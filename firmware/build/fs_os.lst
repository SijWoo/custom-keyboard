ARM GAS  /tmp/ccvtUyKU.s 			page 1


   1              		.cpu cortex-m4
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"fs_os.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.rodata.FS_OS_Init.str1.4,"aMS",%progbits,1
  18              		.align	2
  19              	.LC0:
  20 0000 46532047 		.ascii	"FS Global Lock\000"
  20      6C6F6261 
  20      6C204C6F 
  20      636B00
  21              		.section	.text.FS_OS_Init,"ax",%progbits
  22              		.align	1
  23              		.global	FS_OS_Init
  24              		.arch armv7e-m
  25              		.syntax unified
  26              		.thumb
  27              		.thumb_func
  28              		.fpu fpv4-sp-d16
  30              	FS_OS_Init:
  31              	.LVL0:
  32              	.LFB0:
  33              		.file 1 "rtos/uC-FS/OS/uCOS-III/fs_os.c"
   1:rtos/uC-FS/OS/uCOS-III/fs_os.c **** /*
   2:rtos/uC-FS/OS/uCOS-III/fs_os.c **** ***************************************************************************************************
   3:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *                                                uC/FS
   4:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *                                      The Embedded File System
   5:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *
   6:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *                         (c) Copyright 2008-2019; Silicon Laboratories Inc.,
   7:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *                                400 W. Cesar Chavez, Austin, TX 78701
   8:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *
   9:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *                   All rights reserved. Protected by international copyright laws.
  10:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *
  11:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *                  Your use of this software is subject to your acceptance of the terms
  12:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *                  of a Silicon Labs Micrium software license, which can be obtained by
  13:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *                  contacting info@micrium.com. If you do not agree to the terms of this
  14:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *                  license, you may not use this software.
  15:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *
  16:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *                  Please help us continue to provide the Embedded community with the finest
  17:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *                  software available. Your honesty is greatly appreciated.
  18:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *
  19:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *                    You can find our product's documentation at: doc.micrium.com
  20:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *
  21:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *                          For more information visit us at: www.micrium.com
  22:rtos/uC-FS/OS/uCOS-III/fs_os.c **** ***************************************************************************************************
ARM GAS  /tmp/ccvtUyKU.s 			page 2


  23:rtos/uC-FS/OS/uCOS-III/fs_os.c **** */
  24:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
  25:rtos/uC-FS/OS/uCOS-III/fs_os.c **** /*
  26:rtos/uC-FS/OS/uCOS-III/fs_os.c **** ***************************************************************************************************
  27:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *
  28:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *                                 FILE SYSTEM OPERATING SYSTEM LAYER
  29:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *
  30:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *                                          Micrium uC/OS-III
  31:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *
  32:rtos/uC-FS/OS/uCOS-III/fs_os.c **** * Filename : fs_os.c
  33:rtos/uC-FS/OS/uCOS-III/fs_os.c **** * Version  : v4.07.06
  34:rtos/uC-FS/OS/uCOS-III/fs_os.c **** ***************************************************************************************************
  35:rtos/uC-FS/OS/uCOS-III/fs_os.c **** * Note(s)  : (1) Assumes uC/OS-III V3.03.01 is included in the project build.
  36:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *
  37:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *            (2) REQUIREs the following uC/OS-III features to be ENABLED :
  38:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *
  39:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *                    ------- FEATURE --------    ---------- MINIMUM CONFIGURATION FOR FS/OS PORT --
  40:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *
  41:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *                (a) Semaphores
  42:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *                    (1) OS_SEM_EN                   Enabled
  43:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *
  44:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *                (b) Task registers
  45:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *                    (1) OS_CFG_TASK_REG_TBL_SIZE    >= 2 (if working directory functionality enabl
  46:rtos/uC-FS/OS/uCOS-III/fs_os.c **** ***************************************************************************************************
  47:rtos/uC-FS/OS/uCOS-III/fs_os.c **** */
  48:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
  49:rtos/uC-FS/OS/uCOS-III/fs_os.c **** /*
  50:rtos/uC-FS/OS/uCOS-III/fs_os.c **** ***************************************************************************************************
  51:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *                                            INCLUDE FILES
  52:rtos/uC-FS/OS/uCOS-III/fs_os.c **** ***************************************************************************************************
  53:rtos/uC-FS/OS/uCOS-III/fs_os.c **** */
  54:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
  55:rtos/uC-FS/OS/uCOS-III/fs_os.c **** #define    MICRIUM_SOURCE
  56:rtos/uC-FS/OS/uCOS-III/fs_os.c **** #define    FS_OS_MODULE
  57:rtos/uC-FS/OS/uCOS-III/fs_os.c **** #include  <lib_mem.h>
  58:rtos/uC-FS/OS/uCOS-III/fs_os.c **** #include  <os.h>
  59:rtos/uC-FS/OS/uCOS-III/fs_os.c **** #include  "fs_os.h"
  60:rtos/uC-FS/OS/uCOS-III/fs_os.c **** #include  "../../Source/fs.h"
  61:rtos/uC-FS/OS/uCOS-III/fs_os.c **** #include  "../../Source/fs_dev.h"
  62:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
  63:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
  64:rtos/uC-FS/OS/uCOS-III/fs_os.c **** /*
  65:rtos/uC-FS/OS/uCOS-III/fs_os.c **** ***************************************************************************************************
  66:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *                                            LOCAL DEFINES
  67:rtos/uC-FS/OS/uCOS-III/fs_os.c **** ***************************************************************************************************
  68:rtos/uC-FS/OS/uCOS-III/fs_os.c **** */
  69:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
  70:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
  71:rtos/uC-FS/OS/uCOS-III/fs_os.c **** /*
  72:rtos/uC-FS/OS/uCOS-III/fs_os.c **** ***************************************************************************************************
  73:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *                                           LOCAL CONSTANTS
  74:rtos/uC-FS/OS/uCOS-III/fs_os.c **** ***************************************************************************************************
  75:rtos/uC-FS/OS/uCOS-III/fs_os.c **** */
  76:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
  77:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
  78:rtos/uC-FS/OS/uCOS-III/fs_os.c **** /*
  79:rtos/uC-FS/OS/uCOS-III/fs_os.c **** ***************************************************************************************************
ARM GAS  /tmp/ccvtUyKU.s 			page 3


  80:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *                                          LOCAL DATA TYPES
  81:rtos/uC-FS/OS/uCOS-III/fs_os.c **** ***************************************************************************************************
  82:rtos/uC-FS/OS/uCOS-III/fs_os.c **** */
  83:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
  84:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
  85:rtos/uC-FS/OS/uCOS-III/fs_os.c **** /*
  86:rtos/uC-FS/OS/uCOS-III/fs_os.c **** ***************************************************************************************************
  87:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *                                            LOCAL TABLES
  88:rtos/uC-FS/OS/uCOS-III/fs_os.c **** ***************************************************************************************************
  89:rtos/uC-FS/OS/uCOS-III/fs_os.c **** */
  90:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
  91:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
  92:rtos/uC-FS/OS/uCOS-III/fs_os.c **** /*
  93:rtos/uC-FS/OS/uCOS-III/fs_os.c **** ***************************************************************************************************
  94:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *                                       LOCAL GLOBAL VARIABLES
  95:rtos/uC-FS/OS/uCOS-III/fs_os.c **** ***************************************************************************************************
  96:rtos/uC-FS/OS/uCOS-III/fs_os.c **** */
  97:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
  98:rtos/uC-FS/OS/uCOS-III/fs_os.c ****                                                                 /* ---------------------- LOCKS ---
  99:rtos/uC-FS/OS/uCOS-III/fs_os.c **** static  OS_SEM     FS_OS_LockSem;
 100:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
 101:rtos/uC-FS/OS/uCOS-III/fs_os.c **** static  OS_SEM   **FS_OS_DevLockSemTbl;
 102:rtos/uC-FS/OS/uCOS-III/fs_os.c **** static  OS_SEM   **FS_OS_DevAccessLockSemTbl;
 103:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
 104:rtos/uC-FS/OS/uCOS-III/fs_os.c **** #if (FS_CFG_FILE_LOCK_EN == DEF_ENABLED)
 105:rtos/uC-FS/OS/uCOS-III/fs_os.c **** static  OS_SEM   **FS_OS_FileLockSemTbl;
 106:rtos/uC-FS/OS/uCOS-III/fs_os.c **** static  OS_TCB   **FS_OS_FileLockTaskID_Tbl;
 107:rtos/uC-FS/OS/uCOS-III/fs_os.c **** static  FS_CTR    *FS_OS_FileLockCntTbl;
 108:rtos/uC-FS/OS/uCOS-III/fs_os.c **** #endif
 109:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
 110:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
 111:rtos/uC-FS/OS/uCOS-III/fs_os.c **** #if (FS_CFG_WORKING_DIR_EN == DEF_ENABLED)
 112:rtos/uC-FS/OS/uCOS-III/fs_os.c **** static  OS_REG_ID  FS_OS_RegIdWorkingDir;
 113:rtos/uC-FS/OS/uCOS-III/fs_os.c **** #endif
 114:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
 115:rtos/uC-FS/OS/uCOS-III/fs_os.c **** /*
 116:rtos/uC-FS/OS/uCOS-III/fs_os.c **** ***************************************************************************************************
 117:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *                                      LOCAL FUNCTION PROTOTYPES
 118:rtos/uC-FS/OS/uCOS-III/fs_os.c **** ***************************************************************************************************
 119:rtos/uC-FS/OS/uCOS-III/fs_os.c **** */
 120:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
 121:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
 122:rtos/uC-FS/OS/uCOS-III/fs_os.c **** /*
 123:rtos/uC-FS/OS/uCOS-III/fs_os.c **** ***************************************************************************************************
 124:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *                                     LOCAL CONFIGURATION ERRORS
 125:rtos/uC-FS/OS/uCOS-III/fs_os.c **** ***************************************************************************************************
 126:rtos/uC-FS/OS/uCOS-III/fs_os.c **** */
 127:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
 128:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
 129:rtos/uC-FS/OS/uCOS-III/fs_os.c **** /*
 130:rtos/uC-FS/OS/uCOS-III/fs_os.c **** ***************************************************************************************************
 131:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *                                            FS_OS_Init()
 132:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *
 133:rtos/uC-FS/OS/uCOS-III/fs_os.c **** * Description : Perform FS/OS initialization.
 134:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *
 135:rtos/uC-FS/OS/uCOS-III/fs_os.c **** * Argument(s) : p_err       Pointer to variable that will receive the return error code from this f
 136:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *               ----------  Argument validated by caller.
ARM GAS  /tmp/ccvtUyKU.s 			page 4


 137:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *
 138:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *                               FS_ERR_NONE                 FS/OS initialization successful.
 139:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *                               FS_ERR_OS_INIT_LOCK         FS lock signal NOT successfully initial
 140:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *                               FS_ERR_OS_INIT_LOCK_NAME    FS lock signal name NOT successfully in
 141:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *
 142:rtos/uC-FS/OS/uCOS-III/fs_os.c **** * Return(s)   : none.
 143:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *
 144:rtos/uC-FS/OS/uCOS-III/fs_os.c **** * Note(s)     : none.
 145:rtos/uC-FS/OS/uCOS-III/fs_os.c **** ***************************************************************************************************
 146:rtos/uC-FS/OS/uCOS-III/fs_os.c **** */
 147:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
 148:rtos/uC-FS/OS/uCOS-III/fs_os.c **** void  FS_OS_Init (FS_ERR  *p_err)
 149:rtos/uC-FS/OS/uCOS-III/fs_os.c **** {
  34              		.loc 1 149 1 view -0
  35              		.cfi_startproc
  36              		@ args = 0, pretend = 0, frame = 8
  37              		@ frame_needed = 0, uses_anonymous_args = 0
  38              		.loc 1 149 1 is_stmt 0 view .LVU1
  39 0000 10B5     		push	{r4, lr}
  40              	.LCFI0:
  41              		.cfi_def_cfa_offset 8
  42              		.cfi_offset 4, -8
  43              		.cfi_offset 14, -4
  44 0002 82B0     		sub	sp, sp, #8
  45              	.LCFI1:
  46              		.cfi_def_cfa_offset 16
  47 0004 0446     		mov	r4, r0
 150:rtos/uC-FS/OS/uCOS-III/fs_os.c ****     OS_ERR  err_os;
  48              		.loc 1 150 5 is_stmt 1 view .LVU2
 151:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
 152:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
 153:rtos/uC-FS/OS/uCOS-III/fs_os.c ****     OSSemCreate(            &FS_OS_LockSem,
  49              		.loc 1 153 5 view .LVU3
  50 0006 0DF10603 		add	r3, sp, #6
  51 000a 0122     		movs	r2, #1
  52 000c 0749     		ldr	r1, .L6
  53 000e 0848     		ldr	r0, .L6+4
  54              	.LVL1:
  55              		.loc 1 153 5 is_stmt 0 view .LVU4
  56 0010 FFF7FEFF 		bl	OSSemCreate
  57              	.LVL2:
 154:rtos/uC-FS/OS/uCOS-III/fs_os.c ****                 (CPU_CHAR *) FS_LOCK_NAME,
 155:rtos/uC-FS/OS/uCOS-III/fs_os.c ****                 (OS_SEM_CTR) 1u,
 156:rtos/uC-FS/OS/uCOS-III/fs_os.c ****                             &err_os);
 157:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
 158:rtos/uC-FS/OS/uCOS-III/fs_os.c ****     if (err_os != OS_ERR_NONE) {
  58              		.loc 1 158 5 is_stmt 1 view .LVU5
  59              		.loc 1 158 16 is_stmt 0 view .LVU6
  60 0014 BDF80630 		ldrh	r3, [sp, #6]
  61              		.loc 1 158 8 view .LVU7
  62 0018 1BB9     		cbnz	r3, .L5
 159:rtos/uC-FS/OS/uCOS-III/fs_os.c ****        *p_err = FS_ERR_OS_INIT_LOCK;
 160:rtos/uC-FS/OS/uCOS-III/fs_os.c ****         return;
 161:rtos/uC-FS/OS/uCOS-III/fs_os.c ****     }
 162:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
 163:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
 164:rtos/uC-FS/OS/uCOS-III/fs_os.c **** #if (FS_CFG_WORKING_DIR_EN == DEF_ENABLED)
ARM GAS  /tmp/ccvtUyKU.s 			page 5


 165:rtos/uC-FS/OS/uCOS-III/fs_os.c ****     FS_OS_RegIdWorkingDir = OSTaskRegGetID(&err_os);
 166:rtos/uC-FS/OS/uCOS-III/fs_os.c ****     if (err_os != OS_ERR_NONE) {
 167:rtos/uC-FS/OS/uCOS-III/fs_os.c ****         FS_TRACE_DBG(("FS_OS_Init(): No task register available.\r\n"));
 168:rtos/uC-FS/OS/uCOS-III/fs_os.c ****        *p_err = FS_ERR_OS_INIT;
 169:rtos/uC-FS/OS/uCOS-III/fs_os.c ****         return;
 170:rtos/uC-FS/OS/uCOS-III/fs_os.c ****     }
 171:rtos/uC-FS/OS/uCOS-III/fs_os.c **** #endif
 172:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
 173:rtos/uC-FS/OS/uCOS-III/fs_os.c ****    *p_err = FS_ERR_NONE;
  63              		.loc 1 173 4 is_stmt 1 view .LVU8
  64              		.loc 1 173 11 is_stmt 0 view .LVU9
  65 001a 0023     		movs	r3, #0
  66 001c 2380     		strh	r3, [r4]	@ movhi
  67              	.L1:
 174:rtos/uC-FS/OS/uCOS-III/fs_os.c **** }
  68              		.loc 1 174 1 view .LVU10
  69 001e 02B0     		add	sp, sp, #8
  70              	.LCFI2:
  71              		.cfi_remember_state
  72              		.cfi_def_cfa_offset 8
  73              		@ sp needed
  74 0020 10BD     		pop	{r4, pc}
  75              	.LVL3:
  76              	.L5:
  77              	.LCFI3:
  78              		.cfi_restore_state
 159:rtos/uC-FS/OS/uCOS-III/fs_os.c ****        *p_err = FS_ERR_OS_INIT_LOCK;
  79              		.loc 1 159 8 is_stmt 1 view .LVU11
 159:rtos/uC-FS/OS/uCOS-III/fs_os.c ****        *p_err = FS_ERR_OS_INIT_LOCK;
  80              		.loc 1 159 15 is_stmt 0 view .LVU12
  81 0022 40F2E753 		movw	r3, #1511
  82 0026 2380     		strh	r3, [r4]	@ movhi
 160:rtos/uC-FS/OS/uCOS-III/fs_os.c ****     }
  83              		.loc 1 160 9 is_stmt 1 view .LVU13
  84 0028 F9E7     		b	.L1
  85              	.L7:
  86 002a 00BF     		.align	2
  87              	.L6:
  88 002c 00000000 		.word	.LC0
  89 0030 00000000 		.word	.LANCHOR0
  90              		.cfi_endproc
  91              	.LFE0:
  93              		.section	.text.FS_OS_Lock,"ax",%progbits
  94              		.align	1
  95              		.global	FS_OS_Lock
  96              		.syntax unified
  97              		.thumb
  98              		.thumb_func
  99              		.fpu fpv4-sp-d16
 101              	FS_OS_Lock:
 102              	.LVL4:
 103              	.LFB1:
 175:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
 176:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
 177:rtos/uC-FS/OS/uCOS-III/fs_os.c **** /*
 178:rtos/uC-FS/OS/uCOS-III/fs_os.c **** ***************************************************************************************************
 179:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *                                            FS_OS_Lock()
ARM GAS  /tmp/ccvtUyKU.s 			page 6


 180:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *
 181:rtos/uC-FS/OS/uCOS-III/fs_os.c **** * Description : Acquire mutually exclusive access to file system suite.
 182:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *
 183:rtos/uC-FS/OS/uCOS-III/fs_os.c **** * Argument(s) : p_err       Pointer to variable that will receive the return error code from this f
 184:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *               ----------  Argument validated by caller.
 185:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *
 186:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *                               FS_ERR_NONE       File system access     acquired.
 187:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *                               FS_ERR_OS_LOCK    File system access NOT acquired.
 188:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *
 189:rtos/uC-FS/OS/uCOS-III/fs_os.c **** * Return(s)   : none.
 190:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *
 191:rtos/uC-FS/OS/uCOS-III/fs_os.c **** * Note(s)     : (1) File system access MUST be acquired--i.e. MUST wait for access; do NOT timeout.
 192:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *
 193:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *                   Failure to acquire file system access will prevent file system operation(s)
 194:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *                   from functioning.
 195:rtos/uC-FS/OS/uCOS-III/fs_os.c **** ***************************************************************************************************
 196:rtos/uC-FS/OS/uCOS-III/fs_os.c **** */
 197:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
 198:rtos/uC-FS/OS/uCOS-III/fs_os.c **** void  FS_OS_Lock (FS_ERR  *p_err)
 199:rtos/uC-FS/OS/uCOS-III/fs_os.c **** {
 104              		.loc 1 199 1 view -0
 105              		.cfi_startproc
 106              		@ args = 0, pretend = 0, frame = 8
 107              		@ frame_needed = 0, uses_anonymous_args = 0
 108              		.loc 1 199 1 is_stmt 0 view .LVU15
 109 0000 10B5     		push	{r4, lr}
 110              	.LCFI4:
 111              		.cfi_def_cfa_offset 8
 112              		.cfi_offset 4, -8
 113              		.cfi_offset 14, -4
 114 0002 84B0     		sub	sp, sp, #16
 115              	.LCFI5:
 116              		.cfi_def_cfa_offset 24
 117 0004 0446     		mov	r4, r0
 200:rtos/uC-FS/OS/uCOS-III/fs_os.c ****     OS_ERR  err_os;
 118              		.loc 1 200 5 is_stmt 1 view .LVU16
 201:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
 202:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
 203:rtos/uC-FS/OS/uCOS-III/fs_os.c ****     OSSemPend(          &FS_OS_LockSem,                         /* Acquire file system access ...  
 119              		.loc 1 203 5 view .LVU17
 120 0006 0DF10E03 		add	r3, sp, #14
 121 000a 0093     		str	r3, [sp]
 122 000c 0023     		movs	r3, #0
 123 000e 1A46     		mov	r2, r3
 124 0010 1946     		mov	r1, r3
 125 0012 0648     		ldr	r0, .L12
 126              	.LVL5:
 127              		.loc 1 203 5 is_stmt 0 view .LVU18
 128 0014 FFF7FEFF 		bl	OSSemPend
 129              	.LVL6:
 204:rtos/uC-FS/OS/uCOS-III/fs_os.c ****               (OS_TICK)  0u,                                    /* ... without timeout (see Note #1
 205:rtos/uC-FS/OS/uCOS-III/fs_os.c ****               (OS_OPT)   OS_OPT_PEND_BLOCKING,
 206:rtos/uC-FS/OS/uCOS-III/fs_os.c ****               (CPU_TS *) 0,
 207:rtos/uC-FS/OS/uCOS-III/fs_os.c ****                         &err_os);
 208:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
 209:rtos/uC-FS/OS/uCOS-III/fs_os.c ****     switch (err_os) {
 130              		.loc 1 209 5 is_stmt 1 view .LVU19
ARM GAS  /tmp/ccvtUyKU.s 			page 7


 131 0018 BDF80E30 		ldrh	r3, [sp, #14]
 132 001c 13B9     		cbnz	r3, .L9
 210:rtos/uC-FS/OS/uCOS-III/fs_os.c ****         case OS_ERR_NONE:
 211:rtos/uC-FS/OS/uCOS-III/fs_os.c ****             *p_err = FS_ERR_NONE;
 133              		.loc 1 211 13 view .LVU20
 134              		.loc 1 211 20 is_stmt 0 view .LVU21
 135 001e 2380     		strh	r3, [r4]	@ movhi
 212:rtos/uC-FS/OS/uCOS-III/fs_os.c ****              break;
 136              		.loc 1 212 14 is_stmt 1 view .LVU22
 137              	.L8:
 213:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
 214:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
 215:rtos/uC-FS/OS/uCOS-III/fs_os.c ****         case OS_ERR_OBJ_DEL:
 216:rtos/uC-FS/OS/uCOS-III/fs_os.c ****         case OS_ERR_OBJ_PTR_NULL:
 217:rtos/uC-FS/OS/uCOS-III/fs_os.c ****         case OS_ERR_OBJ_TYPE:
 218:rtos/uC-FS/OS/uCOS-III/fs_os.c ****         case OS_ERR_PEND_ABORT:
 219:rtos/uC-FS/OS/uCOS-III/fs_os.c ****         case OS_ERR_PEND_ISR:
 220:rtos/uC-FS/OS/uCOS-III/fs_os.c ****         case OS_ERR_PEND_WOULD_BLOCK:
 221:rtos/uC-FS/OS/uCOS-III/fs_os.c ****         case OS_ERR_SCHED_LOCKED:
 222:rtos/uC-FS/OS/uCOS-III/fs_os.c ****         case OS_ERR_TIMEOUT:
 223:rtos/uC-FS/OS/uCOS-III/fs_os.c ****         default:
 224:rtos/uC-FS/OS/uCOS-III/fs_os.c ****              FS_TRACE_DBG(("FS_OS_Lock(): Lock failed.\r\n"));
 225:rtos/uC-FS/OS/uCOS-III/fs_os.c ****             *p_err = FS_ERR_OS_LOCK;
 226:rtos/uC-FS/OS/uCOS-III/fs_os.c ****              break;
 227:rtos/uC-FS/OS/uCOS-III/fs_os.c ****     }
 228:rtos/uC-FS/OS/uCOS-III/fs_os.c **** }
 138              		.loc 1 228 1 is_stmt 0 view .LVU23
 139 0020 04B0     		add	sp, sp, #16
 140              	.LCFI6:
 141              		.cfi_remember_state
 142              		.cfi_def_cfa_offset 8
 143              		@ sp needed
 144 0022 10BD     		pop	{r4, pc}
 145              	.LVL7:
 146              	.L9:
 147              	.LCFI7:
 148              		.cfi_restore_state
 224:rtos/uC-FS/OS/uCOS-III/fs_os.c ****             *p_err = FS_ERR_OS_LOCK;
 149              		.loc 1 224 62 is_stmt 1 view .LVU24
 225:rtos/uC-FS/OS/uCOS-III/fs_os.c ****              break;
 150              		.loc 1 225 13 view .LVU25
 225:rtos/uC-FS/OS/uCOS-III/fs_os.c ****              break;
 151              		.loc 1 225 20 is_stmt 0 view .LVU26
 152 0024 40F2DD53 		movw	r3, #1501
 153 0028 2380     		strh	r3, [r4]	@ movhi
 226:rtos/uC-FS/OS/uCOS-III/fs_os.c ****     }
 154              		.loc 1 226 14 is_stmt 1 view .LVU27
 155              		.loc 1 228 1 is_stmt 0 view .LVU28
 156 002a F9E7     		b	.L8
 157              	.L13:
 158              		.align	2
 159              	.L12:
 160 002c 00000000 		.word	.LANCHOR0
 161              		.cfi_endproc
 162              	.LFE1:
 164              		.section	.text.FS_OS_Unlock,"ax",%progbits
 165              		.align	1
ARM GAS  /tmp/ccvtUyKU.s 			page 8


 166              		.global	FS_OS_Unlock
 167              		.syntax unified
 168              		.thumb
 169              		.thumb_func
 170              		.fpu fpv4-sp-d16
 172              	FS_OS_Unlock:
 173              	.LFB2:
 229:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
 230:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
 231:rtos/uC-FS/OS/uCOS-III/fs_os.c **** /*
 232:rtos/uC-FS/OS/uCOS-III/fs_os.c **** ***************************************************************************************************
 233:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *                                           FS_OS_Unlock()
 234:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *
 235:rtos/uC-FS/OS/uCOS-III/fs_os.c **** * Description : Release mutually exclusive access to file system suite.
 236:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *
 237:rtos/uC-FS/OS/uCOS-III/fs_os.c **** * Argument(s) : none.
 238:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *
 239:rtos/uC-FS/OS/uCOS-III/fs_os.c **** * Return(s)   : none.
 240:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *
 241:rtos/uC-FS/OS/uCOS-III/fs_os.c **** * Note(s)     : (1) File system access MUST be released--i.e. MUST unlock access without failure.
 242:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *
 243:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *                   Failure to release file system access will prevent file system operation(s)
 244:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *                   from functioning.
 245:rtos/uC-FS/OS/uCOS-III/fs_os.c **** ***************************************************************************************************
 246:rtos/uC-FS/OS/uCOS-III/fs_os.c **** */
 247:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
 248:rtos/uC-FS/OS/uCOS-III/fs_os.c **** void  FS_OS_Unlock (void)
 249:rtos/uC-FS/OS/uCOS-III/fs_os.c **** {
 174              		.loc 1 249 1 is_stmt 1 view -0
 175              		.cfi_startproc
 176              		@ args = 0, pretend = 0, frame = 8
 177              		@ frame_needed = 0, uses_anonymous_args = 0
 178 0000 00B5     		push	{lr}
 179              	.LCFI8:
 180              		.cfi_def_cfa_offset 4
 181              		.cfi_offset 14, -4
 182 0002 83B0     		sub	sp, sp, #12
 183              	.LCFI9:
 184              		.cfi_def_cfa_offset 16
 250:rtos/uC-FS/OS/uCOS-III/fs_os.c ****     OS_ERR  err_os;
 185              		.loc 1 250 5 view .LVU30
 251:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
 252:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
 253:rtos/uC-FS/OS/uCOS-III/fs_os.c ****     OSSemPost(         &FS_OS_LockSem,                          /* Release file system access.     
 186              		.loc 1 253 5 view .LVU31
 187 0004 0DF10602 		add	r2, sp, #6
 188 0008 0021     		movs	r1, #0
 189 000a 0348     		ldr	r0, .L16
 190 000c FFF7FEFF 		bl	OSSemPost
 191              	.LVL8:
 254:rtos/uC-FS/OS/uCOS-III/fs_os.c ****               (OS_OPT) (OS_OPT_POST_FIFO | OS_OPT_POST_1),
 255:rtos/uC-FS/OS/uCOS-III/fs_os.c ****                        &err_os);
 256:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
 257:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
 258:rtos/uC-FS/OS/uCOS-III/fs_os.c ****     switch (err_os) {
 192              		.loc 1 258 5 view .LVU32
 259:rtos/uC-FS/OS/uCOS-III/fs_os.c ****         case OS_ERR_NONE:
ARM GAS  /tmp/ccvtUyKU.s 			page 9


 260:rtos/uC-FS/OS/uCOS-III/fs_os.c ****              break;
 261:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
 262:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
 263:rtos/uC-FS/OS/uCOS-III/fs_os.c ****         case OS_ERR_OBJ_PTR_NULL:
 264:rtos/uC-FS/OS/uCOS-III/fs_os.c ****         case OS_ERR_OBJ_TYPE:
 265:rtos/uC-FS/OS/uCOS-III/fs_os.c ****         default:
 266:rtos/uC-FS/OS/uCOS-III/fs_os.c ****              FS_TRACE_DBG(("FS_OS_Unlock(): Unlock failed.\r\n"));
 267:rtos/uC-FS/OS/uCOS-III/fs_os.c ****              break;
 268:rtos/uC-FS/OS/uCOS-III/fs_os.c ****     }
 269:rtos/uC-FS/OS/uCOS-III/fs_os.c **** }
 193              		.loc 1 269 1 is_stmt 0 view .LVU33
 194 0010 03B0     		add	sp, sp, #12
 195              	.LCFI10:
 196              		.cfi_def_cfa_offset 4
 197              		@ sp needed
 198 0012 5DF804FB 		ldr	pc, [sp], #4
 199              	.L17:
 200 0016 00BF     		.align	2
 201              	.L16:
 202 0018 00000000 		.word	.LANCHOR0
 203              		.cfi_endproc
 204              	.LFE2:
 206              		.section	.rodata.FS_OS_SemCreate.str1.4,"aMS",%progbits,1
 207              		.align	2
 208              	.LC1:
 209 0000 4653204F 		.ascii	"FS OS Sem\000"
 209      53205365 
 209      6D00
 210              		.section	.text.FS_OS_SemCreate,"ax",%progbits
 211              		.align	1
 212              		.global	FS_OS_SemCreate
 213              		.syntax unified
 214              		.thumb
 215              		.thumb_func
 216              		.fpu fpv4-sp-d16
 218              	FS_OS_SemCreate:
 219              	.LVL9:
 220              	.LFB3:
 270:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
 271:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
 272:rtos/uC-FS/OS/uCOS-III/fs_os.c **** /*
 273:rtos/uC-FS/OS/uCOS-III/fs_os.c **** ***************************************************************************************************
 274:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *                                        FS_OS_WorkingDirGet()
 275:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *
 276:rtos/uC-FS/OS/uCOS-III/fs_os.c **** * Description : Get working directory assigned to active task.
 277:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *
 278:rtos/uC-FS/OS/uCOS-III/fs_os.c **** * Argument(s) : none.
 279:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *
 280:rtos/uC-FS/OS/uCOS-III/fs_os.c **** * Return(s)   : Working directory of active task.
 281:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *
 282:rtos/uC-FS/OS/uCOS-III/fs_os.c **** * Note(s)     : (1) Task register #1 stores the pointer to the working directory.  If the task regi
 283:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *                   is zero, the working directory has not been assigned.
 284:rtos/uC-FS/OS/uCOS-III/fs_os.c **** ***************************************************************************************************
 285:rtos/uC-FS/OS/uCOS-III/fs_os.c **** */
 286:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
 287:rtos/uC-FS/OS/uCOS-III/fs_os.c **** #if (FS_CFG_WORKING_DIR_EN == DEF_ENABLED)
 288:rtos/uC-FS/OS/uCOS-III/fs_os.c **** CPU_CHAR  *FS_OS_WorkingDirGet (void)
ARM GAS  /tmp/ccvtUyKU.s 			page 10


 289:rtos/uC-FS/OS/uCOS-III/fs_os.c **** {
 290:rtos/uC-FS/OS/uCOS-III/fs_os.c ****     OS_ERR       err_os;
 291:rtos/uC-FS/OS/uCOS-III/fs_os.c ****     CPU_ADDR   reg_val;
 292:rtos/uC-FS/OS/uCOS-III/fs_os.c ****     CPU_CHAR    *p_working_dir;
 293:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
 294:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
 295:rtos/uC-FS/OS/uCOS-III/fs_os.c ****     reg_val = OSTaskRegGet((OS_TCB *)  0,
 296:rtos/uC-FS/OS/uCOS-III/fs_os.c ****                                        FS_OS_RegIdWorkingDir,
 297:rtos/uC-FS/OS/uCOS-III/fs_os.c ****                                       &err_os);
 298:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
 299:rtos/uC-FS/OS/uCOS-III/fs_os.c ****     if (err_os != OS_ERR_NONE) {
 300:rtos/uC-FS/OS/uCOS-III/fs_os.c ****         reg_val = 0u;
 301:rtos/uC-FS/OS/uCOS-III/fs_os.c ****     }
 302:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
 303:rtos/uC-FS/OS/uCOS-III/fs_os.c ****     p_working_dir = (CPU_CHAR *)reg_val;
 304:rtos/uC-FS/OS/uCOS-III/fs_os.c ****     return (p_working_dir);
 305:rtos/uC-FS/OS/uCOS-III/fs_os.c **** }
 306:rtos/uC-FS/OS/uCOS-III/fs_os.c **** #endif
 307:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
 308:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
 309:rtos/uC-FS/OS/uCOS-III/fs_os.c **** /*
 310:rtos/uC-FS/OS/uCOS-III/fs_os.c **** ***************************************************************************************************
 311:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *                                        FS_OS_WorkingDirSet()
 312:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *
 313:rtos/uC-FS/OS/uCOS-III/fs_os.c **** * Description : Assign working directory to active task.
 314:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *
 315:rtos/uC-FS/OS/uCOS-III/fs_os.c **** * Argument(s) : p_working_dir   Pointer to working directory.
 316:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *               ----------      Argument validated by caller.
 317:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *
 318:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *               p_err           Pointer to variable that will receive the return error code from th
 319:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *               ----------      Argument validated by caller.
 320:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *
 321:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *                                   FS_ERR_NONE       Working directory successfully set.
 322:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *                                   FS_ERR_OS         Error setting working directory.
 323:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *
 324:rtos/uC-FS/OS/uCOS-III/fs_os.c **** * Return(s)   : Working directory of active task.
 325:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *
 326:rtos/uC-FS/OS/uCOS-III/fs_os.c **** * Note(s)     : none.
 327:rtos/uC-FS/OS/uCOS-III/fs_os.c **** ***************************************************************************************************
 328:rtos/uC-FS/OS/uCOS-III/fs_os.c **** */
 329:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
 330:rtos/uC-FS/OS/uCOS-III/fs_os.c **** #if (FS_CFG_WORKING_DIR_EN == DEF_ENABLED)
 331:rtos/uC-FS/OS/uCOS-III/fs_os.c **** void  FS_OS_WorkingDirSet (CPU_CHAR  *p_working_dir,
 332:rtos/uC-FS/OS/uCOS-III/fs_os.c ****                            FS_ERR    *p_err)
 333:rtos/uC-FS/OS/uCOS-III/fs_os.c **** {
 334:rtos/uC-FS/OS/uCOS-III/fs_os.c ****     OS_ERR    err_os;
 335:rtos/uC-FS/OS/uCOS-III/fs_os.c ****     CPU_ADDR  reg_val;
 336:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
 337:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
 338:rtos/uC-FS/OS/uCOS-III/fs_os.c ****     reg_val = (CPU_ADDR)p_working_dir;
 339:rtos/uC-FS/OS/uCOS-III/fs_os.c ****     OSTaskRegSet((OS_TCB *)  0,
 340:rtos/uC-FS/OS/uCOS-III/fs_os.c ****                              FS_OS_RegIdWorkingDir,
 341:rtos/uC-FS/OS/uCOS-III/fs_os.c ****                  (OS_REG)    reg_val, /* Truncation possible on 64-bit platforms */
 342:rtos/uC-FS/OS/uCOS-III/fs_os.c ****                             &err_os);
 343:rtos/uC-FS/OS/uCOS-III/fs_os.c ****     if(err_os != OS_ERR_NONE) {
 344:rtos/uC-FS/OS/uCOS-III/fs_os.c ****         FS_TRACE_DBG(("FS_OS_WorkingDirSet(): Error setting task register.\r\n"));
 345:rtos/uC-FS/OS/uCOS-III/fs_os.c ****        *p_err = FS_ERR_OS;
ARM GAS  /tmp/ccvtUyKU.s 			page 11


 346:rtos/uC-FS/OS/uCOS-III/fs_os.c ****         return;
 347:rtos/uC-FS/OS/uCOS-III/fs_os.c ****     }
 348:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
 349:rtos/uC-FS/OS/uCOS-III/fs_os.c ****    *p_err = FS_ERR_NONE;
 350:rtos/uC-FS/OS/uCOS-III/fs_os.c **** }
 351:rtos/uC-FS/OS/uCOS-III/fs_os.c **** #endif
 352:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
 353:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
 354:rtos/uC-FS/OS/uCOS-III/fs_os.c **** /*
 355:rtos/uC-FS/OS/uCOS-III/fs_os.c **** ***************************************************************************************************
 356:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *                                       FS_OS_WorkingDirFree()
 357:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *
 358:rtos/uC-FS/OS/uCOS-III/fs_os.c **** * Description : Free working directory assigned to task.
 359:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *
 360:rtos/uC-FS/OS/uCOS-III/fs_os.c **** * Argument(s) : p_tcb       Pointer to the task control block of the task being deleted.
 361:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *               ----------  Argument validated by caller.
 362:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *
 363:rtos/uC-FS/OS/uCOS-III/fs_os.c **** * Return(s)   : Working directory of active task.
 364:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *
 365:rtos/uC-FS/OS/uCOS-III/fs_os.c **** * Note(s)     : (1) Application hooks MUST be enabled & this function MUST be called from App_TaskD
 366:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *                   if any task(s) using FS functions will be deleted.
 367:rtos/uC-FS/OS/uCOS-III/fs_os.c **** ***************************************************************************************************
 368:rtos/uC-FS/OS/uCOS-III/fs_os.c **** */
 369:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
 370:rtos/uC-FS/OS/uCOS-III/fs_os.c **** #if (FS_CFG_WORKING_DIR_EN == DEF_ENABLED)
 371:rtos/uC-FS/OS/uCOS-III/fs_os.c **** void  FS_OS_WorkingDirFree (OS_TCB  *p_tcb)
 372:rtos/uC-FS/OS/uCOS-III/fs_os.c **** {
 373:rtos/uC-FS/OS/uCOS-III/fs_os.c ****     OS_ERR       err_os;
 374:rtos/uC-FS/OS/uCOS-III/fs_os.c ****     CPU_ADDR     reg_val;
 375:rtos/uC-FS/OS/uCOS-III/fs_os.c ****     CPU_CHAR    *path_buf;
 376:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
 377:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
 378:rtos/uC-FS/OS/uCOS-III/fs_os.c ****     reg_val = OSTaskRegGet( p_tcb,
 379:rtos/uC-FS/OS/uCOS-III/fs_os.c ****                             FS_OS_RegIdWorkingDir,
 380:rtos/uC-FS/OS/uCOS-III/fs_os.c ****                            &err_os);
 381:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
 382:rtos/uC-FS/OS/uCOS-III/fs_os.c ****     if (err_os != OS_ERR_NONE) {
 383:rtos/uC-FS/OS/uCOS-III/fs_os.c ****         return;
 384:rtos/uC-FS/OS/uCOS-III/fs_os.c ****     }
 385:rtos/uC-FS/OS/uCOS-III/fs_os.c ****     if (reg_val == 0u) {
 386:rtos/uC-FS/OS/uCOS-III/fs_os.c ****         return;
 387:rtos/uC-FS/OS/uCOS-III/fs_os.c ****     }
 388:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
 389:rtos/uC-FS/OS/uCOS-III/fs_os.c ****     path_buf = (CPU_CHAR *)reg_val;
 390:rtos/uC-FS/OS/uCOS-III/fs_os.c ****     FS_WorkingDirObjFree(path_buf);
 391:rtos/uC-FS/OS/uCOS-III/fs_os.c **** }
 392:rtos/uC-FS/OS/uCOS-III/fs_os.c **** #endif
 393:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
 394:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
 395:rtos/uC-FS/OS/uCOS-III/fs_os.c **** /*
 396:rtos/uC-FS/OS/uCOS-III/fs_os.c **** ***************************************************************************************************
 397:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *                                         FS_OS_SemCreate()
 398:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *
 399:rtos/uC-FS/OS/uCOS-III/fs_os.c **** * Description : Create a semaphore.
 400:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *
 401:rtos/uC-FS/OS/uCOS-III/fs_os.c **** * Argument(s) : p_sem       Pointer to semaphore.
 402:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *               ----------  Argument validated by caller.
ARM GAS  /tmp/ccvtUyKU.s 			page 12


 403:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *
 404:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *               cnt         Initial value for the semaphore.
 405:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *
 406:rtos/uC-FS/OS/uCOS-III/fs_os.c **** * Return(s)   : DEF_OK,   if semaphore created.
 407:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *               DEF_FAIL, otherwise.
 408:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *
 409:rtos/uC-FS/OS/uCOS-III/fs_os.c **** * Note(s)     : none.
 410:rtos/uC-FS/OS/uCOS-III/fs_os.c **** ***************************************************************************************************
 411:rtos/uC-FS/OS/uCOS-III/fs_os.c **** */
 412:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
 413:rtos/uC-FS/OS/uCOS-III/fs_os.c **** CPU_BOOLEAN  FS_OS_SemCreate (FS_OS_SEM  *p_sem,
 414:rtos/uC-FS/OS/uCOS-III/fs_os.c ****                               CPU_INT16U  cnt)
 415:rtos/uC-FS/OS/uCOS-III/fs_os.c **** {
 221              		.loc 1 415 1 is_stmt 1 view -0
 222              		.cfi_startproc
 223              		@ args = 0, pretend = 0, frame = 8
 224              		@ frame_needed = 0, uses_anonymous_args = 0
 225              		.loc 1 415 1 is_stmt 0 view .LVU35
 226 0000 00B5     		push	{lr}
 227              	.LCFI11:
 228              		.cfi_def_cfa_offset 4
 229              		.cfi_offset 14, -4
 230 0002 83B0     		sub	sp, sp, #12
 231              	.LCFI12:
 232              		.cfi_def_cfa_offset 16
 233 0004 0A46     		mov	r2, r1
 416:rtos/uC-FS/OS/uCOS-III/fs_os.c ****     OS_ERR  err_os;
 234              		.loc 1 416 5 is_stmt 1 view .LVU36
 417:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
 418:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
 419:rtos/uC-FS/OS/uCOS-III/fs_os.c ****     OSSemCreate((OS_SEM *)    p_sem,
 235              		.loc 1 419 5 view .LVU37
 236 0006 0DF10603 		add	r3, sp, #6
 237 000a 0649     		ldr	r1, .L22
 238              	.LVL10:
 239              		.loc 1 419 5 is_stmt 0 view .LVU38
 240 000c FFF7FEFF 		bl	OSSemCreate
 241              	.LVL11:
 420:rtos/uC-FS/OS/uCOS-III/fs_os.c ****                 (CPU_CHAR *) "FS OS Sem",
 421:rtos/uC-FS/OS/uCOS-III/fs_os.c ****                 (OS_SEM_CTR)  cnt,
 422:rtos/uC-FS/OS/uCOS-III/fs_os.c ****                              &err_os);
 423:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
 424:rtos/uC-FS/OS/uCOS-III/fs_os.c ****     if (err_os != OS_ERR_NONE) {
 242              		.loc 1 424 5 is_stmt 1 view .LVU39
 243              		.loc 1 424 16 is_stmt 0 view .LVU40
 244 0010 BDF80630 		ldrh	r3, [sp, #6]
 245              		.loc 1 424 8 view .LVU41
 246 0014 1BB9     		cbnz	r3, .L20
 425:rtos/uC-FS/OS/uCOS-III/fs_os.c ****         return (DEF_FAIL);
 426:rtos/uC-FS/OS/uCOS-III/fs_os.c ****     }
 427:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
 428:rtos/uC-FS/OS/uCOS-III/fs_os.c ****     return (DEF_OK);
 247              		.loc 1 428 12 view .LVU42
 248 0016 0120     		movs	r0, #1
 249              	.L19:
 429:rtos/uC-FS/OS/uCOS-III/fs_os.c **** }
 250              		.loc 1 429 1 view .LVU43
ARM GAS  /tmp/ccvtUyKU.s 			page 13


 251 0018 03B0     		add	sp, sp, #12
 252              	.LCFI13:
 253              		.cfi_remember_state
 254              		.cfi_def_cfa_offset 4
 255              		@ sp needed
 256 001a 5DF804FB 		ldr	pc, [sp], #4
 257              	.L20:
 258              	.LCFI14:
 259              		.cfi_restore_state
 425:rtos/uC-FS/OS/uCOS-III/fs_os.c ****         return (DEF_FAIL);
 260              		.loc 1 425 16 view .LVU44
 261 001e 0020     		movs	r0, #0
 262 0020 FAE7     		b	.L19
 263              	.L23:
 264 0022 00BF     		.align	2
 265              	.L22:
 266 0024 00000000 		.word	.LC1
 267              		.cfi_endproc
 268              	.LFE3:
 270              		.section	.text.FS_OS_SemDel,"ax",%progbits
 271              		.align	1
 272              		.global	FS_OS_SemDel
 273              		.syntax unified
 274              		.thumb
 275              		.thumb_func
 276              		.fpu fpv4-sp-d16
 278              	FS_OS_SemDel:
 279              	.LVL12:
 280              	.LFB4:
 430:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
 431:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
 432:rtos/uC-FS/OS/uCOS-III/fs_os.c **** /*
 433:rtos/uC-FS/OS/uCOS-III/fs_os.c **** ***************************************************************************************************
 434:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *                                           FS_OS_SemDel()
 435:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *
 436:rtos/uC-FS/OS/uCOS-III/fs_os.c **** * Description : Delete a semaphore.
 437:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *
 438:rtos/uC-FS/OS/uCOS-III/fs_os.c **** * Argument(s) : p_sem       Pointer to semaphore.
 439:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *               ----------  Argument validated by caller.
 440:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *
 441:rtos/uC-FS/OS/uCOS-III/fs_os.c **** * Return(s)   : DEF_OK,   if semaphore deleted.
 442:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *               DEF_FAIL, otherwise.
 443:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *
 444:rtos/uC-FS/OS/uCOS-III/fs_os.c **** * Note(s)     : none.
 445:rtos/uC-FS/OS/uCOS-III/fs_os.c **** ***************************************************************************************************
 446:rtos/uC-FS/OS/uCOS-III/fs_os.c **** */
 447:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
 448:rtos/uC-FS/OS/uCOS-III/fs_os.c **** CPU_BOOLEAN  FS_OS_SemDel (FS_OS_SEM  *p_sem)
 449:rtos/uC-FS/OS/uCOS-III/fs_os.c **** {
 281              		.loc 1 449 1 is_stmt 1 view -0
 282              		.cfi_startproc
 283              		@ args = 0, pretend = 0, frame = 8
 284              		@ frame_needed = 0, uses_anonymous_args = 0
 285              		.loc 1 449 1 is_stmt 0 view .LVU46
 286 0000 00B5     		push	{lr}
 287              	.LCFI15:
 288              		.cfi_def_cfa_offset 4
ARM GAS  /tmp/ccvtUyKU.s 			page 14


 289              		.cfi_offset 14, -4
 290 0002 83B0     		sub	sp, sp, #12
 291              	.LCFI16:
 292              		.cfi_def_cfa_offset 16
 450:rtos/uC-FS/OS/uCOS-III/fs_os.c ****     OS_ERR  err_os;
 293              		.loc 1 450 5 is_stmt 1 view .LVU47
 451:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
 452:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
 453:rtos/uC-FS/OS/uCOS-III/fs_os.c ****     OSSemDel((OS_SEM *) p_sem,
 294              		.loc 1 453 5 view .LVU48
 295 0004 0DF10602 		add	r2, sp, #6
 296 0008 0121     		movs	r1, #1
 297 000a FFF7FEFF 		bl	OSSemDel
 298              	.LVL13:
 454:rtos/uC-FS/OS/uCOS-III/fs_os.c ****              (OS_OPT)   OS_OPT_DEL_ALWAYS,
 455:rtos/uC-FS/OS/uCOS-III/fs_os.c ****                        &err_os);
 456:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
 457:rtos/uC-FS/OS/uCOS-III/fs_os.c ****     if (err_os == OS_ERR_NONE) {
 299              		.loc 1 457 5 view .LVU49
 300              		.loc 1 457 16 is_stmt 0 view .LVU50
 301 000e BDF80630 		ldrh	r3, [sp, #6]
 302              		.loc 1 457 8 view .LVU51
 303 0012 1BB9     		cbnz	r3, .L26
 458:rtos/uC-FS/OS/uCOS-III/fs_os.c ****         return (DEF_OK);
 304              		.loc 1 458 16 view .LVU52
 305 0014 0120     		movs	r0, #1
 306              	.L25:
 459:rtos/uC-FS/OS/uCOS-III/fs_os.c ****     } else {
 460:rtos/uC-FS/OS/uCOS-III/fs_os.c ****         return (DEF_FAIL);
 461:rtos/uC-FS/OS/uCOS-III/fs_os.c ****     }
 462:rtos/uC-FS/OS/uCOS-III/fs_os.c **** }
 307              		.loc 1 462 1 view .LVU53
 308 0016 03B0     		add	sp, sp, #12
 309              	.LCFI17:
 310              		.cfi_remember_state
 311              		.cfi_def_cfa_offset 4
 312              		@ sp needed
 313 0018 5DF804FB 		ldr	pc, [sp], #4
 314              	.L26:
 315              	.LCFI18:
 316              		.cfi_restore_state
 460:rtos/uC-FS/OS/uCOS-III/fs_os.c ****     }
 317              		.loc 1 460 16 view .LVU54
 318 001c 0020     		movs	r0, #0
 319 001e FAE7     		b	.L25
 320              		.cfi_endproc
 321              	.LFE4:
 323              		.section	.text.FS_OS_SemPend,"ax",%progbits
 324              		.align	1
 325              		.global	FS_OS_SemPend
 326              		.syntax unified
 327              		.thumb
 328              		.thumb_func
 329              		.fpu fpv4-sp-d16
 331              	FS_OS_SemPend:
 332              	.LVL14:
 333              	.LFB5:
ARM GAS  /tmp/ccvtUyKU.s 			page 15


 463:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
 464:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
 465:rtos/uC-FS/OS/uCOS-III/fs_os.c **** /*
 466:rtos/uC-FS/OS/uCOS-III/fs_os.c **** ***************************************************************************************************
 467:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *                                          FS_OS_SemPend()
 468:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *
 469:rtos/uC-FS/OS/uCOS-III/fs_os.c **** * Description : Wait for a semaphore.
 470:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *
 471:rtos/uC-FS/OS/uCOS-III/fs_os.c **** * Argument(s) : p_sem       Pointer to semaphore.
 472:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *               ----------  Argument validated by caller.
 473:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *
 474:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *               timeout     If non-zero, timeout period (in milliseconds).
 475:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *                           If zero,     wait forever.
 476:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *
 477:rtos/uC-FS/OS/uCOS-III/fs_os.c **** * Return(s)   : DEF_OK,   if semaphore now owned by caller.
 478:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *               DEF_FAIL, otherwise.
 479:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *
 480:rtos/uC-FS/OS/uCOS-III/fs_os.c **** * Note(s)     : none.
 481:rtos/uC-FS/OS/uCOS-III/fs_os.c **** ***************************************************************************************************
 482:rtos/uC-FS/OS/uCOS-III/fs_os.c **** */
 483:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
 484:rtos/uC-FS/OS/uCOS-III/fs_os.c **** CPU_BOOLEAN  FS_OS_SemPend (FS_OS_SEM  *p_sem,
 485:rtos/uC-FS/OS/uCOS-III/fs_os.c ****                             CPU_INT32U  timeout)
 486:rtos/uC-FS/OS/uCOS-III/fs_os.c **** {
 334              		.loc 1 486 1 is_stmt 1 view -0
 335              		.cfi_startproc
 336              		@ args = 0, pretend = 0, frame = 8
 337              		@ frame_needed = 0, uses_anonymous_args = 0
 338              		.loc 1 486 1 is_stmt 0 view .LVU56
 339 0000 00B5     		push	{lr}
 340              	.LCFI19:
 341              		.cfi_def_cfa_offset 4
 342              		.cfi_offset 14, -4
 343 0002 85B0     		sub	sp, sp, #20
 344              	.LCFI20:
 345              		.cfi_def_cfa_offset 24
 487:rtos/uC-FS/OS/uCOS-III/fs_os.c ****     OS_TICK  timeout_ticks;
 346              		.loc 1 487 5 is_stmt 1 view .LVU57
 488:rtos/uC-FS/OS/uCOS-III/fs_os.c ****     OS_ERR   err_os;
 347              		.loc 1 488 5 view .LVU58
 489:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
 490:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
 491:rtos/uC-FS/OS/uCOS-III/fs_os.c ****     timeout_ticks = (timeout * OSCfg_TickRate_Hz + (DEF_TIME_NBR_mS_PER_SEC - 1u)) / DEF_TIME_NBR_m
 348              		.loc 1 491 5 view .LVU59
 349              		.loc 1 491 30 is_stmt 0 view .LVU60
 350 0004 0C4B     		ldr	r3, .L32
 351 0006 1B68     		ldr	r3, [r3]
 352 0008 03FB01F1 		mul	r1, r3, r1
 353              	.LVL15:
 354              		.loc 1 491 50 view .LVU61
 355 000c 01F2E731 		addw	r1, r1, #999
 356              		.loc 1 491 19 view .LVU62
 357 0010 0A4B     		ldr	r3, .L32+4
 358 0012 A3FB0131 		umull	r3, r1, r3, r1
 359              	.LVL16:
 492:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
 493:rtos/uC-FS/OS/uCOS-III/fs_os.c ****     OSSemPend((OS_SEM *) p_sem,
ARM GAS  /tmp/ccvtUyKU.s 			page 16


 360              		.loc 1 493 5 is_stmt 1 view .LVU63
 361 0016 0DF10E03 		add	r3, sp, #14
 362 001a 0093     		str	r3, [sp]
 363 001c 0023     		movs	r3, #0
 364 001e 1A46     		mov	r2, r3
 365 0020 8909     		lsrs	r1, r1, #6
 366              	.LVL17:
 367              		.loc 1 493 5 is_stmt 0 view .LVU64
 368 0022 FFF7FEFF 		bl	OSSemPend
 369              	.LVL18:
 494:rtos/uC-FS/OS/uCOS-III/fs_os.c ****                          timeout_ticks,
 495:rtos/uC-FS/OS/uCOS-III/fs_os.c ****               (OS_OPT)   OS_OPT_PEND_BLOCKING,
 496:rtos/uC-FS/OS/uCOS-III/fs_os.c ****               (CPU_TS *) 0,
 497:rtos/uC-FS/OS/uCOS-III/fs_os.c ****                         &err_os);
 498:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
 499:rtos/uC-FS/OS/uCOS-III/fs_os.c ****     if (err_os == OS_ERR_NONE) {
 370              		.loc 1 499 5 is_stmt 1 view .LVU65
 371              		.loc 1 499 16 is_stmt 0 view .LVU66
 372 0026 BDF80E30 		ldrh	r3, [sp, #14]
 373              		.loc 1 499 8 view .LVU67
 374 002a 1BB9     		cbnz	r3, .L30
 500:rtos/uC-FS/OS/uCOS-III/fs_os.c ****         return (DEF_OK);
 375              		.loc 1 500 16 view .LVU68
 376 002c 0120     		movs	r0, #1
 377              	.L29:
 501:rtos/uC-FS/OS/uCOS-III/fs_os.c ****     } else {
 502:rtos/uC-FS/OS/uCOS-III/fs_os.c ****         return (DEF_FAIL);
 503:rtos/uC-FS/OS/uCOS-III/fs_os.c ****     }
 504:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
 505:rtos/uC-FS/OS/uCOS-III/fs_os.c **** }
 378              		.loc 1 505 1 view .LVU69
 379 002e 05B0     		add	sp, sp, #20
 380              	.LCFI21:
 381              		.cfi_remember_state
 382              		.cfi_def_cfa_offset 4
 383              		@ sp needed
 384 0030 5DF804FB 		ldr	pc, [sp], #4
 385              	.L30:
 386              	.LCFI22:
 387              		.cfi_restore_state
 502:rtos/uC-FS/OS/uCOS-III/fs_os.c ****     }
 388              		.loc 1 502 16 view .LVU70
 389 0034 0020     		movs	r0, #0
 390 0036 FAE7     		b	.L29
 391              	.L33:
 392              		.align	2
 393              	.L32:
 394 0038 00000000 		.word	OSCfg_TickRate_Hz
 395 003c D34D6210 		.word	274877907
 396              		.cfi_endproc
 397              	.LFE5:
 399              		.section	.text.FS_OS_SemPost,"ax",%progbits
 400              		.align	1
 401              		.global	FS_OS_SemPost
 402              		.syntax unified
 403              		.thumb
 404              		.thumb_func
ARM GAS  /tmp/ccvtUyKU.s 			page 17


 405              		.fpu fpv4-sp-d16
 407              	FS_OS_SemPost:
 408              	.LVL19:
 409              	.LFB6:
 506:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
 507:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
 508:rtos/uC-FS/OS/uCOS-III/fs_os.c **** /*
 509:rtos/uC-FS/OS/uCOS-III/fs_os.c **** ***************************************************************************************************
 510:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *                                          FS_OS_SemPost()
 511:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *
 512:rtos/uC-FS/OS/uCOS-III/fs_os.c **** * Description : Signal a semaphore.
 513:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *
 514:rtos/uC-FS/OS/uCOS-III/fs_os.c **** * Argument(s) : p_sem       Pointer to semaphore.
 515:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *               ----------  Argument validated by caller.
 516:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *
 517:rtos/uC-FS/OS/uCOS-III/fs_os.c **** * Return(s)   : DEF_OK,   if semaphore signaled.
 518:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *               DEF_FAIL, otherwise.
 519:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *
 520:rtos/uC-FS/OS/uCOS-III/fs_os.c **** * Note(s)     : none.
 521:rtos/uC-FS/OS/uCOS-III/fs_os.c **** ***************************************************************************************************
 522:rtos/uC-FS/OS/uCOS-III/fs_os.c **** */
 523:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
 524:rtos/uC-FS/OS/uCOS-III/fs_os.c **** CPU_BOOLEAN  FS_OS_SemPost (FS_OS_SEM  *p_sem)
 525:rtos/uC-FS/OS/uCOS-III/fs_os.c **** {
 410              		.loc 1 525 1 is_stmt 1 view -0
 411              		.cfi_startproc
 412              		@ args = 0, pretend = 0, frame = 8
 413              		@ frame_needed = 0, uses_anonymous_args = 0
 414              		.loc 1 525 1 is_stmt 0 view .LVU72
 415 0000 00B5     		push	{lr}
 416              	.LCFI23:
 417              		.cfi_def_cfa_offset 4
 418              		.cfi_offset 14, -4
 419 0002 83B0     		sub	sp, sp, #12
 420              	.LCFI24:
 421              		.cfi_def_cfa_offset 16
 526:rtos/uC-FS/OS/uCOS-III/fs_os.c ****     OS_ERR  err_os;
 422              		.loc 1 526 5 is_stmt 1 view .LVU73
 527:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
 528:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
 529:rtos/uC-FS/OS/uCOS-III/fs_os.c ****     OSSemPost(           p_sem,
 423              		.loc 1 529 5 view .LVU74
 424 0004 0DF10602 		add	r2, sp, #6
 425 0008 0021     		movs	r1, #0
 426 000a FFF7FEFF 		bl	OSSemPost
 427              	.LVL20:
 530:rtos/uC-FS/OS/uCOS-III/fs_os.c ****                (OS_OPT)  OS_OPT_POST_1,
 531:rtos/uC-FS/OS/uCOS-III/fs_os.c ****                         &err_os);
 532:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
 533:rtos/uC-FS/OS/uCOS-III/fs_os.c ****     if (err_os == OS_ERR_NONE) {
 428              		.loc 1 533 5 view .LVU75
 429              		.loc 1 533 16 is_stmt 0 view .LVU76
 430 000e BDF80630 		ldrh	r3, [sp, #6]
 431              		.loc 1 533 8 view .LVU77
 432 0012 1BB9     		cbnz	r3, .L36
 534:rtos/uC-FS/OS/uCOS-III/fs_os.c ****         return (DEF_OK);
 433              		.loc 1 534 16 view .LVU78
ARM GAS  /tmp/ccvtUyKU.s 			page 18


 434 0014 0120     		movs	r0, #1
 435              	.L35:
 535:rtos/uC-FS/OS/uCOS-III/fs_os.c ****     } else {
 536:rtos/uC-FS/OS/uCOS-III/fs_os.c ****         return (DEF_FAIL);
 537:rtos/uC-FS/OS/uCOS-III/fs_os.c ****     }
 538:rtos/uC-FS/OS/uCOS-III/fs_os.c **** }
 436              		.loc 1 538 1 view .LVU79
 437 0016 03B0     		add	sp, sp, #12
 438              	.LCFI25:
 439              		.cfi_remember_state
 440              		.cfi_def_cfa_offset 4
 441              		@ sp needed
 442 0018 5DF804FB 		ldr	pc, [sp], #4
 443              	.L36:
 444              	.LCFI26:
 445              		.cfi_restore_state
 536:rtos/uC-FS/OS/uCOS-III/fs_os.c ****     }
 446              		.loc 1 536 16 view .LVU80
 447 001c 0020     		movs	r0, #0
 448 001e FAE7     		b	.L35
 449              		.cfi_endproc
 450              	.LFE6:
 452              		.section	.text.FS_OS_Dly_ms,"ax",%progbits
 453              		.align	1
 454              		.global	FS_OS_Dly_ms
 455              		.syntax unified
 456              		.thumb
 457              		.thumb_func
 458              		.fpu fpv4-sp-d16
 460              	FS_OS_Dly_ms:
 461              	.LVL21:
 462              	.LFB7:
 539:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
 540:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
 541:rtos/uC-FS/OS/uCOS-III/fs_os.c **** /*
 542:rtos/uC-FS/OS/uCOS-III/fs_os.c **** ***************************************************************************************************
 543:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *                                          FS_OS_Dly_ms()
 544:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *
 545:rtos/uC-FS/OS/uCOS-III/fs_os.c **** * Description : Delay for specified time, in milliseconds.
 546:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *
 547:rtos/uC-FS/OS/uCOS-III/fs_os.c **** * Argument(s) : ms      Time delay value, in milliseconds.
 548:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *
 549:rtos/uC-FS/OS/uCOS-III/fs_os.c **** * Return(s)   : none.
 550:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *
 551:rtos/uC-FS/OS/uCOS-III/fs_os.c **** * Note(s)     : none.
 552:rtos/uC-FS/OS/uCOS-III/fs_os.c **** ***************************************************************************************************
 553:rtos/uC-FS/OS/uCOS-III/fs_os.c **** */
 554:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
 555:rtos/uC-FS/OS/uCOS-III/fs_os.c **** void  FS_OS_Dly_ms (CPU_INT16U  ms)
 556:rtos/uC-FS/OS/uCOS-III/fs_os.c **** {
 463              		.loc 1 556 1 is_stmt 1 view -0
 464              		.cfi_startproc
 465              		@ args = 0, pretend = 0, frame = 8
 466              		@ frame_needed = 0, uses_anonymous_args = 0
 467              		.loc 1 556 1 is_stmt 0 view .LVU82
 468 0000 00B5     		push	{lr}
 469              	.LCFI27:
ARM GAS  /tmp/ccvtUyKU.s 			page 19


 470              		.cfi_def_cfa_offset 4
 471              		.cfi_offset 14, -4
 472 0002 83B0     		sub	sp, sp, #12
 473              	.LCFI28:
 474              		.cfi_def_cfa_offset 16
 557:rtos/uC-FS/OS/uCOS-III/fs_os.c ****     OS_ERR   err_os;
 475              		.loc 1 557 5 is_stmt 1 view .LVU83
 558:rtos/uC-FS/OS/uCOS-III/fs_os.c ****     OS_TICK  dly_ticks;
 476              		.loc 1 558 5 view .LVU84
 559:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
 560:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
 561:rtos/uC-FS/OS/uCOS-III/fs_os.c ****     dly_ticks = (OS_TICK)((((ms * OSCfg_TickRate_Hz) + (OSCfg_TickRate_Hz - 1u)) / DEF_TIME_NBR_mS_
 477              		.loc 1 561 5 view .LVU85
 478              		.loc 1 561 54 is_stmt 0 view .LVU86
 479 0004 084B     		ldr	r3, .L40
 480 0006 1B68     		ldr	r3, [r3]
 481 0008 00FB0330 		mla	r0, r0, r3, r3
 482              	.LVL22:
 483              		.loc 1 561 54 view .LVU87
 484 000c 0138     		subs	r0, r0, #1
 485              		.loc 1 561 82 view .LVU88
 486 000e 074B     		ldr	r3, .L40+4
 487 0010 A3FB0030 		umull	r3, r0, r3, r0
 488 0014 8009     		lsrs	r0, r0, #6
 489              	.LVL23:
 562:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
 563:rtos/uC-FS/OS/uCOS-III/fs_os.c ****     OSTimeDly( dly_ticks,
 490              		.loc 1 563 5 is_stmt 1 view .LVU89
 491 0016 0DF10602 		add	r2, sp, #6
 492 001a 0021     		movs	r1, #0
 493 001c 0130     		adds	r0, r0, #1
 494              	.LVL24:
 495              		.loc 1 563 5 is_stmt 0 view .LVU90
 496 001e FFF7FEFF 		bl	OSTimeDly
 497              	.LVL25:
 564:rtos/uC-FS/OS/uCOS-III/fs_os.c ****                OS_OPT_TIME_DLY,
 565:rtos/uC-FS/OS/uCOS-III/fs_os.c ****               &err_os);
 566:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
 567:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
 568:rtos/uC-FS/OS/uCOS-III/fs_os.c ****     switch (err_os) {
 498              		.loc 1 568 5 is_stmt 1 view .LVU91
 569:rtos/uC-FS/OS/uCOS-III/fs_os.c ****         case OS_ERR_TIME_ZERO_DLY:
 570:rtos/uC-FS/OS/uCOS-III/fs_os.c ****         case OS_ERR_NONE:
 571:rtos/uC-FS/OS/uCOS-III/fs_os.c ****              break;
 572:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
 573:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
 574:rtos/uC-FS/OS/uCOS-III/fs_os.c ****         case OS_ERR_OPT_INVALID:
 575:rtos/uC-FS/OS/uCOS-III/fs_os.c ****         case OS_ERR_TIME_DLY_ISR:
 576:rtos/uC-FS/OS/uCOS-III/fs_os.c ****         default:
 577:rtos/uC-FS/OS/uCOS-III/fs_os.c ****              FS_TRACE_DBG(("FS_OS_Dly_ms(): Delay failed.\r\n"));
 578:rtos/uC-FS/OS/uCOS-III/fs_os.c ****              break;
 579:rtos/uC-FS/OS/uCOS-III/fs_os.c ****     }
 580:rtos/uC-FS/OS/uCOS-III/fs_os.c **** }
 499              		.loc 1 580 1 is_stmt 0 view .LVU92
 500 0022 03B0     		add	sp, sp, #12
 501              	.LCFI29:
 502              		.cfi_def_cfa_offset 4
ARM GAS  /tmp/ccvtUyKU.s 			page 20


 503              		@ sp needed
 504 0024 5DF804FB 		ldr	pc, [sp], #4
 505              	.L41:
 506              		.align	2
 507              	.L40:
 508 0028 00000000 		.word	OSCfg_TickRate_Hz
 509 002c D34D6210 		.word	274877907
 510              		.cfi_endproc
 511              	.LFE7:
 513              		.section	.rodata.FS_OS_DevInit.str1.4,"aMS",%progbits,1
 514              		.align	2
 515              	.LC2:
 516 0000 46532044 		.ascii	"FS Device Lock\000"
 516      65766963 
 516      65204C6F 
 516      636B00
 517 000f 00       		.align	2
 518              	.LC3:
 519 0010 46532044 		.ascii	"FS Device Access Lock\000"
 519      65766963 
 519      65204163 
 519      63657373 
 519      204C6F63 
 520              		.section	.text.FS_OS_DevInit,"ax",%progbits
 521              		.align	1
 522              		.global	FS_OS_DevInit
 523              		.syntax unified
 524              		.thumb
 525              		.thumb_func
 526              		.fpu fpv4-sp-d16
 528              	FS_OS_DevInit:
 529              	.LVL26:
 530              	.LFB8:
 581:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
 582:rtos/uC-FS/OS/uCOS-III/fs_os.c **** /*
 583:rtos/uC-FS/OS/uCOS-III/fs_os.c **** ***************************************************************************************************
 584:rtos/uC-FS/OS/uCOS-III/fs_os.c **** ***************************************************************************************************
 585:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *                                               DEVICE
 586:rtos/uC-FS/OS/uCOS-III/fs_os.c **** ***************************************************************************************************
 587:rtos/uC-FS/OS/uCOS-III/fs_os.c **** ***************************************************************************************************
 588:rtos/uC-FS/OS/uCOS-III/fs_os.c **** */
 589:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
 590:rtos/uC-FS/OS/uCOS-III/fs_os.c **** /*
 591:rtos/uC-FS/OS/uCOS-III/fs_os.c **** ***************************************************************************************************
 592:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *                                           FS_OS_DevInit()
 593:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *
 594:rtos/uC-FS/OS/uCOS-III/fs_os.c **** * Description : Perform FS/OS device initialization.
 595:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *
 596:rtos/uC-FS/OS/uCOS-III/fs_os.c **** * Argument(s) : dev_cnt     Number of device locks to allocate.
 597:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *
 598:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *               p_err       Pointer to variable that will receive the return error code from this f
 599:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *               ----------  Argument validated by caller.
 600:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *
 601:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *                               FS_ERR_NONE                 FS/OS device initialization successful.
 602:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *                               FS_ERR_OS_INIT_LOCK         FS device lock signal NOT successfully 
 603:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *                               FS_ERR_OS_INIT_LOCK_NAME    FS device lock signal name NOT successf
 604:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *
ARM GAS  /tmp/ccvtUyKU.s 			page 21


 605:rtos/uC-FS/OS/uCOS-III/fs_os.c **** * Return(s)   : none.
 606:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *
 607:rtos/uC-FS/OS/uCOS-III/fs_os.c **** * Note(s)     : none.
 608:rtos/uC-FS/OS/uCOS-III/fs_os.c **** ***************************************************************************************************
 609:rtos/uC-FS/OS/uCOS-III/fs_os.c **** */
 610:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
 611:rtos/uC-FS/OS/uCOS-III/fs_os.c **** void  FS_OS_DevInit (FS_QTY   dev_cnt,
 612:rtos/uC-FS/OS/uCOS-III/fs_os.c ****                      FS_ERR  *p_err)
 613:rtos/uC-FS/OS/uCOS-III/fs_os.c **** {
 531              		.loc 1 613 1 is_stmt 1 view -0
 532              		.cfi_startproc
 533              		@ args = 0, pretend = 0, frame = 8
 534              		@ frame_needed = 0, uses_anonymous_args = 0
 535              		.loc 1 613 1 is_stmt 0 view .LVU94
 536 0000 2DE9F043 		push	{r4, r5, r6, r7, r8, r9, lr}
 537              	.LCFI30:
 538              		.cfi_def_cfa_offset 28
 539              		.cfi_offset 4, -28
 540              		.cfi_offset 5, -24
 541              		.cfi_offset 6, -20
 542              		.cfi_offset 7, -16
 543              		.cfi_offset 8, -12
 544              		.cfi_offset 9, -8
 545              		.cfi_offset 14, -4
 546 0004 83B0     		sub	sp, sp, #12
 547              	.LCFI31:
 548              		.cfi_def_cfa_offset 40
 549 0006 0746     		mov	r7, r0
 550 0008 8846     		mov	r8, r1
 614:rtos/uC-FS/OS/uCOS-III/fs_os.c ****     OS_ERR      err_os;
 551              		.loc 1 614 5 is_stmt 1 view .LVU95
 615:rtos/uC-FS/OS/uCOS-III/fs_os.c ****     FS_QTY      ix;
 552              		.loc 1 615 5 view .LVU96
 616:rtos/uC-FS/OS/uCOS-III/fs_os.c ****     LIB_ERR     err_lib;
 553              		.loc 1 616 5 view .LVU97
 617:rtos/uC-FS/OS/uCOS-III/fs_os.c ****     CPU_SIZE_T  octets_reqd;
 554              		.loc 1 617 5 view .LVU98
 618:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
 619:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
 620:rtos/uC-FS/OS/uCOS-III/fs_os.c ****                                                                 /* ---------------- CREATE DEVICE L
 621:rtos/uC-FS/OS/uCOS-III/fs_os.c ****     FS_OS_DevLockSemTbl = (OS_SEM **)Mem_HeapAlloc((CPU_SIZE_T) (sizeof(OS_SEM *) * dev_cnt),
 555              		.loc 1 621 5 view .LVU99
 556              		.loc 1 621 38 is_stmt 0 view .LVU100
 557 000a 4FEA8009 		lsl	r9, r0, #2
 558 000e 01AB     		add	r3, sp, #4
 559 0010 6A46     		mov	r2, sp
 560 0012 0421     		movs	r1, #4
 561              	.LVL27:
 562              		.loc 1 621 38 view .LVU101
 563 0014 4846     		mov	r0, r9
 564              	.LVL28:
 565              		.loc 1 621 38 view .LVU102
 566 0016 FFF7FEFF 		bl	Mem_HeapAlloc
 567              	.LVL29:
 568              		.loc 1 621 25 view .LVU103
 569 001a 354B     		ldr	r3, .L62
 570 001c 1860     		str	r0, [r3]
ARM GAS  /tmp/ccvtUyKU.s 			page 22


 622:rtos/uC-FS/OS/uCOS-III/fs_os.c ****                                                    (CPU_SIZE_T)  sizeof(CPU_DATA),
 623:rtos/uC-FS/OS/uCOS-III/fs_os.c ****                                                                 &octets_reqd,
 624:rtos/uC-FS/OS/uCOS-III/fs_os.c ****                                                                 &err_lib);
 625:rtos/uC-FS/OS/uCOS-III/fs_os.c ****     if (FS_OS_DevLockSemTbl == DEF_NULL) {
 571              		.loc 1 625 5 is_stmt 1 view .LVU104
 572              		.loc 1 625 8 is_stmt 0 view .LVU105
 573 001e 08B1     		cbz	r0, .L56
 626:rtos/uC-FS/OS/uCOS-III/fs_os.c ****         FS_TRACE_INFO(("FS_OS_DevInit(): Could not alloc mem for dev locks: %d octets required.\r\n
 627:rtos/uC-FS/OS/uCOS-III/fs_os.c ****        *p_err = FS_ERR_MEM_ALLOC;
 628:rtos/uC-FS/OS/uCOS-III/fs_os.c ****         return;
 629:rtos/uC-FS/OS/uCOS-III/fs_os.c ****     }
 630:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
 631:rtos/uC-FS/OS/uCOS-III/fs_os.c ****     for (ix = 0u; ix < dev_cnt; ix++) {
 574              		.loc 1 631 13 view .LVU106
 575 0020 0024     		movs	r4, #0
 576 0022 0BE0     		b	.L43
 577              	.L56:
 626:rtos/uC-FS/OS/uCOS-III/fs_os.c ****         FS_TRACE_INFO(("FS_OS_DevInit(): Could not alloc mem for dev locks: %d octets required.\r\n
 578              		.loc 1 626 116 is_stmt 1 view .LVU107
 627:rtos/uC-FS/OS/uCOS-III/fs_os.c ****         return;
 579              		.loc 1 627 8 view .LVU108
 627:rtos/uC-FS/OS/uCOS-III/fs_os.c ****         return;
 580              		.loc 1 627 15 is_stmt 0 view .LVU109
 581 0024 1123     		movs	r3, #17
 582 0026 A8F80030 		strh	r3, [r8]	@ movhi
 628:rtos/uC-FS/OS/uCOS-III/fs_os.c ****     }
 583              		.loc 1 628 9 is_stmt 1 view .LVU110
 584 002a 02E0     		b	.L42
 585              	.LVL30:
 586              	.L58:
 632:rtos/uC-FS/OS/uCOS-III/fs_os.c ****         FS_OS_DevLockSemTbl[ix] = (OS_SEM *)Mem_HeapAlloc((CPU_SIZE_T)  sizeof(OS_SEM),
 633:rtos/uC-FS/OS/uCOS-III/fs_os.c ****                                                           (CPU_SIZE_T)  sizeof(CPU_DATA),
 634:rtos/uC-FS/OS/uCOS-III/fs_os.c ****                                                                        &octets_reqd,
 635:rtos/uC-FS/OS/uCOS-III/fs_os.c ****                                                                        &err_lib);
 636:rtos/uC-FS/OS/uCOS-III/fs_os.c ****         if (FS_OS_DevLockSemTbl[ix] == DEF_NULL) {
 637:rtos/uC-FS/OS/uCOS-III/fs_os.c ****             FS_TRACE_INFO(("FS_OS_DevInit(): Could not alloc mem for dev locks: %d octets required.
 587              		.loc 1 637 120 view .LVU111
 638:rtos/uC-FS/OS/uCOS-III/fs_os.c ****            *p_err = FS_ERR_MEM_ALLOC;
 588              		.loc 1 638 12 view .LVU112
 589              		.loc 1 638 19 is_stmt 0 view .LVU113
 590 002c 1123     		movs	r3, #17
 591 002e A8F80030 		strh	r3, [r8]	@ movhi
 639:rtos/uC-FS/OS/uCOS-III/fs_os.c ****             return;
 592              		.loc 1 639 13 is_stmt 1 view .LVU114
 593              	.LVL31:
 594              	.L42:
 640:rtos/uC-FS/OS/uCOS-III/fs_os.c ****         }
 641:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
 642:rtos/uC-FS/OS/uCOS-III/fs_os.c ****         OSSemCreate(             FS_OS_DevLockSemTbl[ix],
 643:rtos/uC-FS/OS/uCOS-III/fs_os.c ****                     (CPU_CHAR *) FS_DEV_LOCK_NAME,
 644:rtos/uC-FS/OS/uCOS-III/fs_os.c ****                     (OS_SEM_CTR) 1u,
 645:rtos/uC-FS/OS/uCOS-III/fs_os.c ****                                 &err_os);
 646:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
 647:rtos/uC-FS/OS/uCOS-III/fs_os.c ****         if (err_os != OS_ERR_NONE) {
 648:rtos/uC-FS/OS/uCOS-III/fs_os.c ****            *p_err = FS_ERR_OS_INIT_LOCK;
 649:rtos/uC-FS/OS/uCOS-III/fs_os.c ****             return;
 650:rtos/uC-FS/OS/uCOS-III/fs_os.c ****         }
ARM GAS  /tmp/ccvtUyKU.s 			page 23


 651:rtos/uC-FS/OS/uCOS-III/fs_os.c ****     }
 652:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
 653:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
 654:rtos/uC-FS/OS/uCOS-III/fs_os.c ****                                                                 /* ------------ CREATE DEVICE ACCES
 655:rtos/uC-FS/OS/uCOS-III/fs_os.c ****     FS_OS_DevAccessLockSemTbl = (OS_SEM **)Mem_HeapAlloc((CPU_SIZE_T) (sizeof(OS_SEM *) * dev_cnt),
 656:rtos/uC-FS/OS/uCOS-III/fs_os.c ****                                                          (CPU_SIZE_T)  sizeof(CPU_DATA),
 657:rtos/uC-FS/OS/uCOS-III/fs_os.c ****                                                                       &octets_reqd,
 658:rtos/uC-FS/OS/uCOS-III/fs_os.c ****                                                                       &err_lib);
 659:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
 660:rtos/uC-FS/OS/uCOS-III/fs_os.c ****     if (FS_OS_DevAccessLockSemTbl == DEF_NULL) {
 661:rtos/uC-FS/OS/uCOS-III/fs_os.c ****         FS_TRACE_INFO(("FS_OS_DevInit(): Could not alloc mem for dev access locks: %d octets requir
 662:rtos/uC-FS/OS/uCOS-III/fs_os.c ****        *p_err = FS_ERR_MEM_ALLOC;
 663:rtos/uC-FS/OS/uCOS-III/fs_os.c ****         return;
 664:rtos/uC-FS/OS/uCOS-III/fs_os.c ****     }
 665:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
 666:rtos/uC-FS/OS/uCOS-III/fs_os.c ****     for (ix = 0u; ix < dev_cnt; ix++) {
 667:rtos/uC-FS/OS/uCOS-III/fs_os.c ****         FS_OS_DevAccessLockSemTbl[ix] = (OS_SEM *)Mem_HeapAlloc((CPU_SIZE_T)  sizeof(OS_SEM),
 668:rtos/uC-FS/OS/uCOS-III/fs_os.c ****                                                                 (CPU_SIZE_T)  sizeof(CPU_DATA),
 669:rtos/uC-FS/OS/uCOS-III/fs_os.c ****                                                                              &octets_reqd,
 670:rtos/uC-FS/OS/uCOS-III/fs_os.c ****                                                                              &err_lib);
 671:rtos/uC-FS/OS/uCOS-III/fs_os.c ****         if (FS_OS_DevAccessLockSemTbl[ix] == DEF_NULL) {
 672:rtos/uC-FS/OS/uCOS-III/fs_os.c ****             FS_TRACE_INFO(("FS_OS_DevInit(): Could not alloc mem for dev access locks: %d octets re
 673:rtos/uC-FS/OS/uCOS-III/fs_os.c ****            *p_err = FS_ERR_MEM_ALLOC;
 674:rtos/uC-FS/OS/uCOS-III/fs_os.c ****             return;
 675:rtos/uC-FS/OS/uCOS-III/fs_os.c ****         }
 676:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
 677:rtos/uC-FS/OS/uCOS-III/fs_os.c ****         OSSemCreate(             FS_OS_DevAccessLockSemTbl[ix],
 678:rtos/uC-FS/OS/uCOS-III/fs_os.c ****                     (CPU_CHAR *) FS_DEV_ACCESS_LOCK_NAME,
 679:rtos/uC-FS/OS/uCOS-III/fs_os.c ****                     (OS_SEM_CTR) 1u,
 680:rtos/uC-FS/OS/uCOS-III/fs_os.c ****                                 &err_os);
 681:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
 682:rtos/uC-FS/OS/uCOS-III/fs_os.c ****         if (err_os != OS_ERR_NONE) {
 683:rtos/uC-FS/OS/uCOS-III/fs_os.c ****            *p_err = FS_ERR_OS_INIT_LOCK;
 684:rtos/uC-FS/OS/uCOS-III/fs_os.c ****             return;
 685:rtos/uC-FS/OS/uCOS-III/fs_os.c ****         }
 686:rtos/uC-FS/OS/uCOS-III/fs_os.c ****     }
 687:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
 688:rtos/uC-FS/OS/uCOS-III/fs_os.c ****    *p_err = FS_ERR_NONE;
 689:rtos/uC-FS/OS/uCOS-III/fs_os.c **** }
 595              		.loc 1 689 1 is_stmt 0 view .LVU115
 596 0032 03B0     		add	sp, sp, #12
 597              	.LCFI32:
 598              		.cfi_remember_state
 599              		.cfi_def_cfa_offset 28
 600              		@ sp needed
 601 0034 BDE8F083 		pop	{r4, r5, r6, r7, r8, r9, pc}
 602              	.LVL32:
 603              	.L46:
 604              	.LCFI33:
 605              		.cfi_restore_state
 631:rtos/uC-FS/OS/uCOS-III/fs_os.c ****         FS_OS_DevLockSemTbl[ix] = (OS_SEM *)Mem_HeapAlloc((CPU_SIZE_T)  sizeof(OS_SEM),
 606              		.loc 1 631 33 is_stmt 1 discriminator 2 view .LVU116
 631:rtos/uC-FS/OS/uCOS-III/fs_os.c ****         FS_OS_DevLockSemTbl[ix] = (OS_SEM *)Mem_HeapAlloc((CPU_SIZE_T)  sizeof(OS_SEM),
 607              		.loc 1 631 35 is_stmt 0 discriminator 2 view .LVU117
 608 0038 0134     		adds	r4, r4, #1
 609              	.LVL33:
 631:rtos/uC-FS/OS/uCOS-III/fs_os.c ****         FS_OS_DevLockSemTbl[ix] = (OS_SEM *)Mem_HeapAlloc((CPU_SIZE_T)  sizeof(OS_SEM),
ARM GAS  /tmp/ccvtUyKU.s 			page 24


 610              		.loc 1 631 35 discriminator 2 view .LVU118
 611 003a A4B2     		uxth	r4, r4
 612              	.LVL34:
 613              	.L43:
 631:rtos/uC-FS/OS/uCOS-III/fs_os.c ****         FS_OS_DevLockSemTbl[ix] = (OS_SEM *)Mem_HeapAlloc((CPU_SIZE_T)  sizeof(OS_SEM),
 614              		.loc 1 631 19 is_stmt 1 discriminator 1 view .LVU119
 631:rtos/uC-FS/OS/uCOS-III/fs_os.c ****         FS_OS_DevLockSemTbl[ix] = (OS_SEM *)Mem_HeapAlloc((CPU_SIZE_T)  sizeof(OS_SEM),
 615              		.loc 1 631 5 is_stmt 0 discriminator 1 view .LVU120
 616 003c BC42     		cmp	r4, r7
 617 003e 1DD2     		bcs	.L57
 632:rtos/uC-FS/OS/uCOS-III/fs_os.c ****                                                           (CPU_SIZE_T)  sizeof(CPU_DATA),
 618              		.loc 1 632 9 is_stmt 1 view .LVU121
 632:rtos/uC-FS/OS/uCOS-III/fs_os.c ****                                                           (CPU_SIZE_T)  sizeof(CPU_DATA),
 619              		.loc 1 632 28 is_stmt 0 view .LVU122
 620 0040 2B4D     		ldr	r5, .L62
 621 0042 2E68     		ldr	r6, [r5]
 632:rtos/uC-FS/OS/uCOS-III/fs_os.c ****                                                           (CPU_SIZE_T)  sizeof(CPU_DATA),
 622              		.loc 1 632 45 view .LVU123
 623 0044 01AB     		add	r3, sp, #4
 624 0046 6A46     		mov	r2, sp
 625 0048 0421     		movs	r1, #4
 626 004a 1020     		movs	r0, #16
 627 004c FFF7FEFF 		bl	Mem_HeapAlloc
 628              	.LVL35:
 632:rtos/uC-FS/OS/uCOS-III/fs_os.c ****                                                           (CPU_SIZE_T)  sizeof(CPU_DATA),
 629              		.loc 1 632 33 view .LVU124
 630 0050 46F82400 		str	r0, [r6, r4, lsl #2]
 636:rtos/uC-FS/OS/uCOS-III/fs_os.c ****             FS_TRACE_INFO(("FS_OS_DevInit(): Could not alloc mem for dev locks: %d octets required.
 631              		.loc 1 636 9 is_stmt 1 view .LVU125
 636:rtos/uC-FS/OS/uCOS-III/fs_os.c ****             FS_TRACE_INFO(("FS_OS_DevInit(): Could not alloc mem for dev locks: %d octets required.
 632              		.loc 1 636 32 is_stmt 0 view .LVU126
 633 0054 2B68     		ldr	r3, [r5]
 634 0056 53F82400 		ldr	r0, [r3, r4, lsl #2]
 636:rtos/uC-FS/OS/uCOS-III/fs_os.c ****             FS_TRACE_INFO(("FS_OS_DevInit(): Could not alloc mem for dev locks: %d octets required.
 635              		.loc 1 636 12 view .LVU127
 636 005a 0028     		cmp	r0, #0
 637 005c E6D0     		beq	.L58
 642:rtos/uC-FS/OS/uCOS-III/fs_os.c ****                     (CPU_CHAR *) FS_DEV_LOCK_NAME,
 638              		.loc 1 642 9 is_stmt 1 view .LVU128
 639 005e 0DF10603 		add	r3, sp, #6
 640 0062 0122     		movs	r2, #1
 641 0064 2349     		ldr	r1, .L62+4
 642 0066 FFF7FEFF 		bl	OSSemCreate
 643              	.LVL36:
 647:rtos/uC-FS/OS/uCOS-III/fs_os.c ****            *p_err = FS_ERR_OS_INIT_LOCK;
 644              		.loc 1 647 9 view .LVU129
 647:rtos/uC-FS/OS/uCOS-III/fs_os.c ****            *p_err = FS_ERR_OS_INIT_LOCK;
 645              		.loc 1 647 20 is_stmt 0 view .LVU130
 646 006a BDF80630 		ldrh	r3, [sp, #6]
 647:rtos/uC-FS/OS/uCOS-III/fs_os.c ****            *p_err = FS_ERR_OS_INIT_LOCK;
 647              		.loc 1 647 12 view .LVU131
 648 006e 002B     		cmp	r3, #0
 649 0070 E2D0     		beq	.L46
 648:rtos/uC-FS/OS/uCOS-III/fs_os.c ****             return;
 650              		.loc 1 648 12 is_stmt 1 view .LVU132
 648:rtos/uC-FS/OS/uCOS-III/fs_os.c ****             return;
 651              		.loc 1 648 19 is_stmt 0 view .LVU133
ARM GAS  /tmp/ccvtUyKU.s 			page 25


 652 0072 40F2E753 		movw	r3, #1511
 653 0076 A8F80030 		strh	r3, [r8]	@ movhi
 649:rtos/uC-FS/OS/uCOS-III/fs_os.c ****         }
 654              		.loc 1 649 13 is_stmt 1 view .LVU134
 655 007a DAE7     		b	.L42
 656              	.L57:
 655:rtos/uC-FS/OS/uCOS-III/fs_os.c ****                                                          (CPU_SIZE_T)  sizeof(CPU_DATA),
 657              		.loc 1 655 5 view .LVU135
 655:rtos/uC-FS/OS/uCOS-III/fs_os.c ****                                                          (CPU_SIZE_T)  sizeof(CPU_DATA),
 658              		.loc 1 655 44 is_stmt 0 view .LVU136
 659 007c 01AB     		add	r3, sp, #4
 660 007e 6A46     		mov	r2, sp
 661 0080 0421     		movs	r1, #4
 662 0082 4846     		mov	r0, r9
 663 0084 FFF7FEFF 		bl	Mem_HeapAlloc
 664              	.LVL37:
 655:rtos/uC-FS/OS/uCOS-III/fs_os.c ****                                                          (CPU_SIZE_T)  sizeof(CPU_DATA),
 665              		.loc 1 655 31 view .LVU137
 666 0088 1B4B     		ldr	r3, .L62+8
 667 008a 1860     		str	r0, [r3]
 660:rtos/uC-FS/OS/uCOS-III/fs_os.c ****         FS_TRACE_INFO(("FS_OS_DevInit(): Could not alloc mem for dev access locks: %d octets requir
 668              		.loc 1 660 5 is_stmt 1 view .LVU138
 660:rtos/uC-FS/OS/uCOS-III/fs_os.c ****         FS_TRACE_INFO(("FS_OS_DevInit(): Could not alloc mem for dev access locks: %d octets requir
 669              		.loc 1 660 8 is_stmt 0 view .LVU139
 670 008c 08B1     		cbz	r0, .L59
 666:rtos/uC-FS/OS/uCOS-III/fs_os.c ****         FS_OS_DevAccessLockSemTbl[ix] = (OS_SEM *)Mem_HeapAlloc((CPU_SIZE_T)  sizeof(OS_SEM),
 671              		.loc 1 666 13 view .LVU140
 672 008e 0024     		movs	r4, #0
 673              	.LVL38:
 666:rtos/uC-FS/OS/uCOS-III/fs_os.c ****         FS_OS_DevAccessLockSemTbl[ix] = (OS_SEM *)Mem_HeapAlloc((CPU_SIZE_T)  sizeof(OS_SEM),
 674              		.loc 1 666 13 view .LVU141
 675 0090 09E0     		b	.L48
 676              	.LVL39:
 677              	.L59:
 661:rtos/uC-FS/OS/uCOS-III/fs_os.c ****        *p_err = FS_ERR_MEM_ALLOC;
 678              		.loc 1 661 123 is_stmt 1 view .LVU142
 662:rtos/uC-FS/OS/uCOS-III/fs_os.c ****         return;
 679              		.loc 1 662 8 view .LVU143
 662:rtos/uC-FS/OS/uCOS-III/fs_os.c ****         return;
 680              		.loc 1 662 15 is_stmt 0 view .LVU144
 681 0092 1123     		movs	r3, #17
 682 0094 A8F80030 		strh	r3, [r8]	@ movhi
 663:rtos/uC-FS/OS/uCOS-III/fs_os.c ****     }
 683              		.loc 1 663 9 is_stmt 1 view .LVU145
 684 0098 CBE7     		b	.L42
 685              	.L61:
 672:rtos/uC-FS/OS/uCOS-III/fs_os.c ****            *p_err = FS_ERR_MEM_ALLOC;
 686              		.loc 1 672 127 view .LVU146
 673:rtos/uC-FS/OS/uCOS-III/fs_os.c ****             return;
 687              		.loc 1 673 12 view .LVU147
 673:rtos/uC-FS/OS/uCOS-III/fs_os.c ****             return;
 688              		.loc 1 673 19 is_stmt 0 view .LVU148
 689 009a 1123     		movs	r3, #17
 690 009c A8F80030 		strh	r3, [r8]	@ movhi
 674:rtos/uC-FS/OS/uCOS-III/fs_os.c ****         }
 691              		.loc 1 674 13 is_stmt 1 view .LVU149
 692 00a0 C7E7     		b	.L42
ARM GAS  /tmp/ccvtUyKU.s 			page 26


 693              	.L50:
 666:rtos/uC-FS/OS/uCOS-III/fs_os.c ****         FS_OS_DevAccessLockSemTbl[ix] = (OS_SEM *)Mem_HeapAlloc((CPU_SIZE_T)  sizeof(OS_SEM),
 694              		.loc 1 666 33 discriminator 2 view .LVU150
 666:rtos/uC-FS/OS/uCOS-III/fs_os.c ****         FS_OS_DevAccessLockSemTbl[ix] = (OS_SEM *)Mem_HeapAlloc((CPU_SIZE_T)  sizeof(OS_SEM),
 695              		.loc 1 666 35 is_stmt 0 discriminator 2 view .LVU151
 696 00a2 0134     		adds	r4, r4, #1
 697              	.LVL40:
 666:rtos/uC-FS/OS/uCOS-III/fs_os.c ****         FS_OS_DevAccessLockSemTbl[ix] = (OS_SEM *)Mem_HeapAlloc((CPU_SIZE_T)  sizeof(OS_SEM),
 698              		.loc 1 666 35 discriminator 2 view .LVU152
 699 00a4 A4B2     		uxth	r4, r4
 700              	.LVL41:
 701              	.L48:
 666:rtos/uC-FS/OS/uCOS-III/fs_os.c ****         FS_OS_DevAccessLockSemTbl[ix] = (OS_SEM *)Mem_HeapAlloc((CPU_SIZE_T)  sizeof(OS_SEM),
 702              		.loc 1 666 19 is_stmt 1 discriminator 1 view .LVU153
 666:rtos/uC-FS/OS/uCOS-III/fs_os.c ****         FS_OS_DevAccessLockSemTbl[ix] = (OS_SEM *)Mem_HeapAlloc((CPU_SIZE_T)  sizeof(OS_SEM),
 703              		.loc 1 666 5 is_stmt 0 discriminator 1 view .LVU154
 704 00a6 BC42     		cmp	r4, r7
 705 00a8 1DD2     		bcs	.L60
 667:rtos/uC-FS/OS/uCOS-III/fs_os.c ****                                                                 (CPU_SIZE_T)  sizeof(CPU_DATA),
 706              		.loc 1 667 9 is_stmt 1 view .LVU155
 667:rtos/uC-FS/OS/uCOS-III/fs_os.c ****                                                                 (CPU_SIZE_T)  sizeof(CPU_DATA),
 707              		.loc 1 667 34 is_stmt 0 view .LVU156
 708 00aa 134D     		ldr	r5, .L62+8
 709 00ac 2E68     		ldr	r6, [r5]
 667:rtos/uC-FS/OS/uCOS-III/fs_os.c ****                                                                 (CPU_SIZE_T)  sizeof(CPU_DATA),
 710              		.loc 1 667 51 view .LVU157
 711 00ae 01AB     		add	r3, sp, #4
 712 00b0 6A46     		mov	r2, sp
 713 00b2 0421     		movs	r1, #4
 714 00b4 1020     		movs	r0, #16
 715 00b6 FFF7FEFF 		bl	Mem_HeapAlloc
 716              	.LVL42:
 667:rtos/uC-FS/OS/uCOS-III/fs_os.c ****                                                                 (CPU_SIZE_T)  sizeof(CPU_DATA),
 717              		.loc 1 667 39 view .LVU158
 718 00ba 46F82400 		str	r0, [r6, r4, lsl #2]
 671:rtos/uC-FS/OS/uCOS-III/fs_os.c ****             FS_TRACE_INFO(("FS_OS_DevInit(): Could not alloc mem for dev access locks: %d octets re
 719              		.loc 1 671 9 is_stmt 1 view .LVU159
 671:rtos/uC-FS/OS/uCOS-III/fs_os.c ****             FS_TRACE_INFO(("FS_OS_DevInit(): Could not alloc mem for dev access locks: %d octets re
 720              		.loc 1 671 38 is_stmt 0 view .LVU160
 721 00be 2B68     		ldr	r3, [r5]
 722 00c0 53F82400 		ldr	r0, [r3, r4, lsl #2]
 671:rtos/uC-FS/OS/uCOS-III/fs_os.c ****             FS_TRACE_INFO(("FS_OS_DevInit(): Could not alloc mem for dev access locks: %d octets re
 723              		.loc 1 671 12 view .LVU161
 724 00c4 0028     		cmp	r0, #0
 725 00c6 E8D0     		beq	.L61
 677:rtos/uC-FS/OS/uCOS-III/fs_os.c ****                     (CPU_CHAR *) FS_DEV_ACCESS_LOCK_NAME,
 726              		.loc 1 677 9 is_stmt 1 view .LVU162
 727 00c8 0DF10603 		add	r3, sp, #6
 728 00cc 0122     		movs	r2, #1
 729 00ce 0B49     		ldr	r1, .L62+12
 730 00d0 FFF7FEFF 		bl	OSSemCreate
 731              	.LVL43:
 682:rtos/uC-FS/OS/uCOS-III/fs_os.c ****            *p_err = FS_ERR_OS_INIT_LOCK;
 732              		.loc 1 682 9 view .LVU163
 682:rtos/uC-FS/OS/uCOS-III/fs_os.c ****            *p_err = FS_ERR_OS_INIT_LOCK;
 733              		.loc 1 682 20 is_stmt 0 view .LVU164
 734 00d4 BDF80630 		ldrh	r3, [sp, #6]
ARM GAS  /tmp/ccvtUyKU.s 			page 27


 682:rtos/uC-FS/OS/uCOS-III/fs_os.c ****            *p_err = FS_ERR_OS_INIT_LOCK;
 735              		.loc 1 682 12 view .LVU165
 736 00d8 002B     		cmp	r3, #0
 737 00da E2D0     		beq	.L50
 683:rtos/uC-FS/OS/uCOS-III/fs_os.c ****             return;
 738              		.loc 1 683 12 is_stmt 1 view .LVU166
 683:rtos/uC-FS/OS/uCOS-III/fs_os.c ****             return;
 739              		.loc 1 683 19 is_stmt 0 view .LVU167
 740 00dc 40F2E753 		movw	r3, #1511
 741 00e0 A8F80030 		strh	r3, [r8]	@ movhi
 684:rtos/uC-FS/OS/uCOS-III/fs_os.c ****         }
 742              		.loc 1 684 13 is_stmt 1 view .LVU168
 743 00e4 A5E7     		b	.L42
 744              	.L60:
 688:rtos/uC-FS/OS/uCOS-III/fs_os.c **** }
 745              		.loc 1 688 4 view .LVU169
 688:rtos/uC-FS/OS/uCOS-III/fs_os.c **** }
 746              		.loc 1 688 11 is_stmt 0 view .LVU170
 747 00e6 0023     		movs	r3, #0
 748 00e8 A8F80030 		strh	r3, [r8]	@ movhi
 749 00ec A1E7     		b	.L42
 750              	.L63:
 751 00ee 00BF     		.align	2
 752              	.L62:
 753 00f0 00000000 		.word	.LANCHOR1
 754 00f4 00000000 		.word	.LC2
 755 00f8 00000000 		.word	.LANCHOR2
 756 00fc 10000000 		.word	.LC3
 757              		.cfi_endproc
 758              	.LFE8:
 760              		.section	.text.FS_OS_DevLock,"ax",%progbits
 761              		.align	1
 762              		.global	FS_OS_DevLock
 763              		.syntax unified
 764              		.thumb
 765              		.thumb_func
 766              		.fpu fpv4-sp-d16
 768              	FS_OS_DevLock:
 769              	.LVL44:
 770              	.LFB9:
 690:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
 691:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
 692:rtos/uC-FS/OS/uCOS-III/fs_os.c **** /*
 693:rtos/uC-FS/OS/uCOS-III/fs_os.c **** ***************************************************************************************************
 694:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *                                           FS_OS_DevLock()
 695:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *
 696:rtos/uC-FS/OS/uCOS-III/fs_os.c **** * Description : Acquire mutually exclusive access to file system device.
 697:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *
 698:rtos/uC-FS/OS/uCOS-III/fs_os.c **** * Argument(s) : dev_id      Index of the semaphore to acquire.
 699:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *
 700:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *               p_err       Pointer to variable that will receive the return error code from this f
 701:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *               ----------  Argument validated by caller.
 702:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *
 703:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *                               FS_ERR_NONE       File system device access     acquired.
 704:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *                               FS_ERR_OS_LOCK    File system device access NOT acquired.
 705:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *
 706:rtos/uC-FS/OS/uCOS-III/fs_os.c **** * Return(s)   : none.
ARM GAS  /tmp/ccvtUyKU.s 			page 28


 707:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *
 708:rtos/uC-FS/OS/uCOS-III/fs_os.c **** * Note(s)     : (1) Device access MUST be acquired--i.e. MUST wait for access; do NOT timeout.
 709:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *
 710:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *                   Failure to acquire device access will prevent device operation(s) from function
 711:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *
 712:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *               (2) When both the device and access locks are required the access lock MUST be
 713:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *                   acquired first.
 714:rtos/uC-FS/OS/uCOS-III/fs_os.c **** ***************************************************************************************************
 715:rtos/uC-FS/OS/uCOS-III/fs_os.c **** */
 716:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
 717:rtos/uC-FS/OS/uCOS-III/fs_os.c **** void  FS_OS_DevLock (FS_ID    dev_id,
 718:rtos/uC-FS/OS/uCOS-III/fs_os.c ****                      FS_ERR  *p_err)
 719:rtos/uC-FS/OS/uCOS-III/fs_os.c **** {
 771              		.loc 1 719 1 is_stmt 1 view -0
 772              		.cfi_startproc
 773              		@ args = 0, pretend = 0, frame = 8
 774              		@ frame_needed = 0, uses_anonymous_args = 0
 775              		.loc 1 719 1 is_stmt 0 view .LVU172
 776 0000 10B5     		push	{r4, lr}
 777              	.LCFI34:
 778              		.cfi_def_cfa_offset 8
 779              		.cfi_offset 4, -8
 780              		.cfi_offset 14, -4
 781 0002 84B0     		sub	sp, sp, #16
 782              	.LCFI35:
 783              		.cfi_def_cfa_offset 24
 784 0004 0C46     		mov	r4, r1
 720:rtos/uC-FS/OS/uCOS-III/fs_os.c ****     OS_ERR  err_os;
 785              		.loc 1 720 5 is_stmt 1 view .LVU173
 721:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
 722:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
 723:rtos/uC-FS/OS/uCOS-III/fs_os.c ****     OSSemPend(           FS_OS_DevLockSemTbl[dev_id],           /* Acquire device access without ti
 786              		.loc 1 723 5 view .LVU174
 787              		.loc 1 723 45 is_stmt 0 view .LVU175
 788 0006 0B4B     		ldr	r3, .L68
 789 0008 1B68     		ldr	r3, [r3]
 790              		.loc 1 723 5 view .LVU176
 791 000a 53F82000 		ldr	r0, [r3, r0, lsl #2]
 792              	.LVL45:
 793              		.loc 1 723 5 view .LVU177
 794 000e 0DF10E03 		add	r3, sp, #14
 795 0012 0093     		str	r3, [sp]
 796 0014 0023     		movs	r3, #0
 797 0016 1A46     		mov	r2, r3
 798 0018 1946     		mov	r1, r3
 799              	.LVL46:
 800              		.loc 1 723 5 view .LVU178
 801 001a FFF7FEFF 		bl	OSSemPend
 802              	.LVL47:
 724:rtos/uC-FS/OS/uCOS-III/fs_os.c ****               (OS_TICK)  0u,
 725:rtos/uC-FS/OS/uCOS-III/fs_os.c ****               (OS_OPT)   OS_OPT_PEND_BLOCKING,
 726:rtos/uC-FS/OS/uCOS-III/fs_os.c ****               (CPU_TS *) 0,
 727:rtos/uC-FS/OS/uCOS-III/fs_os.c ****                         &err_os);
 728:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
 729:rtos/uC-FS/OS/uCOS-III/fs_os.c ****     switch (err_os) {
 803              		.loc 1 729 5 is_stmt 1 view .LVU179
 804 001e BDF80E30 		ldrh	r3, [sp, #14]
ARM GAS  /tmp/ccvtUyKU.s 			page 29


 805 0022 13B9     		cbnz	r3, .L65
 730:rtos/uC-FS/OS/uCOS-III/fs_os.c ****         case OS_ERR_NONE:
 731:rtos/uC-FS/OS/uCOS-III/fs_os.c ****             *p_err = FS_ERR_NONE;
 806              		.loc 1 731 13 view .LVU180
 807              		.loc 1 731 20 is_stmt 0 view .LVU181
 808 0024 2380     		strh	r3, [r4]	@ movhi
 732:rtos/uC-FS/OS/uCOS-III/fs_os.c ****              break;
 809              		.loc 1 732 14 is_stmt 1 view .LVU182
 810              	.L64:
 733:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
 734:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
 735:rtos/uC-FS/OS/uCOS-III/fs_os.c ****         case OS_ERR_OBJ_DEL:
 736:rtos/uC-FS/OS/uCOS-III/fs_os.c ****         case OS_ERR_OBJ_PTR_NULL:
 737:rtos/uC-FS/OS/uCOS-III/fs_os.c ****         case OS_ERR_OBJ_TYPE:
 738:rtos/uC-FS/OS/uCOS-III/fs_os.c ****         case OS_ERR_PEND_ABORT:
 739:rtos/uC-FS/OS/uCOS-III/fs_os.c ****         case OS_ERR_PEND_ISR:
 740:rtos/uC-FS/OS/uCOS-III/fs_os.c ****         case OS_ERR_PEND_WOULD_BLOCK:
 741:rtos/uC-FS/OS/uCOS-III/fs_os.c ****         case OS_ERR_SCHED_LOCKED:
 742:rtos/uC-FS/OS/uCOS-III/fs_os.c ****         case OS_ERR_TIMEOUT:
 743:rtos/uC-FS/OS/uCOS-III/fs_os.c ****         default:
 744:rtos/uC-FS/OS/uCOS-III/fs_os.c ****              FS_TRACE_DBG(("FS_OS_DevLock(): Lock failed for dev %d.\r\n", dev_id));
 745:rtos/uC-FS/OS/uCOS-III/fs_os.c ****             *p_err = FS_ERR_OS_LOCK;
 746:rtos/uC-FS/OS/uCOS-III/fs_os.c ****              break;
 747:rtos/uC-FS/OS/uCOS-III/fs_os.c ****     }
 748:rtos/uC-FS/OS/uCOS-III/fs_os.c **** }
 811              		.loc 1 748 1 is_stmt 0 view .LVU183
 812 0026 04B0     		add	sp, sp, #16
 813              	.LCFI36:
 814              		.cfi_remember_state
 815              		.cfi_def_cfa_offset 8
 816              		@ sp needed
 817 0028 10BD     		pop	{r4, pc}
 818              	.LVL48:
 819              	.L65:
 820              	.LCFI37:
 821              		.cfi_restore_state
 744:rtos/uC-FS/OS/uCOS-III/fs_os.c ****             *p_err = FS_ERR_OS_LOCK;
 822              		.loc 1 744 84 is_stmt 1 view .LVU184
 745:rtos/uC-FS/OS/uCOS-III/fs_os.c ****              break;
 823              		.loc 1 745 13 view .LVU185
 745:rtos/uC-FS/OS/uCOS-III/fs_os.c ****              break;
 824              		.loc 1 745 20 is_stmt 0 view .LVU186
 825 002a 40F2DD53 		movw	r3, #1501
 826 002e 2380     		strh	r3, [r4]	@ movhi
 746:rtos/uC-FS/OS/uCOS-III/fs_os.c ****     }
 827              		.loc 1 746 14 is_stmt 1 view .LVU187
 828              		.loc 1 748 1 is_stmt 0 view .LVU188
 829 0030 F9E7     		b	.L64
 830              	.L69:
 831 0032 00BF     		.align	2
 832              	.L68:
 833 0034 00000000 		.word	.LANCHOR1
 834              		.cfi_endproc
 835              	.LFE9:
 837              		.section	.text.FS_OS_DevUnlock,"ax",%progbits
 838              		.align	1
 839              		.global	FS_OS_DevUnlock
ARM GAS  /tmp/ccvtUyKU.s 			page 30


 840              		.syntax unified
 841              		.thumb
 842              		.thumb_func
 843              		.fpu fpv4-sp-d16
 845              	FS_OS_DevUnlock:
 846              	.LVL49:
 847              	.LFB10:
 749:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
 750:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
 751:rtos/uC-FS/OS/uCOS-III/fs_os.c **** /*
 752:rtos/uC-FS/OS/uCOS-III/fs_os.c **** ***************************************************************************************************
 753:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *                                          FS_OS_DevUnlock()
 754:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *
 755:rtos/uC-FS/OS/uCOS-III/fs_os.c **** * Description : Release mutually exclusive access to file system device.
 756:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *
 757:rtos/uC-FS/OS/uCOS-III/fs_os.c **** * Argument(s) : dev_id      Index of the semaphore to release.
 758:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *
 759:rtos/uC-FS/OS/uCOS-III/fs_os.c **** * Return(s)   : none.
 760:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *
 761:rtos/uC-FS/OS/uCOS-III/fs_os.c **** * Note(s)     : (1) Device access MUST be released--i.e. MUST unlock access without failure.
 762:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *
 763:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *                   Failure to release device access will prevent device operation(s) from function
 764:rtos/uC-FS/OS/uCOS-III/fs_os.c **** ***************************************************************************************************
 765:rtos/uC-FS/OS/uCOS-III/fs_os.c **** */
 766:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
 767:rtos/uC-FS/OS/uCOS-III/fs_os.c **** void  FS_OS_DevUnlock (FS_ID  dev_id)
 768:rtos/uC-FS/OS/uCOS-III/fs_os.c **** {
 848              		.loc 1 768 1 is_stmt 1 view -0
 849              		.cfi_startproc
 850              		@ args = 0, pretend = 0, frame = 8
 851              		@ frame_needed = 0, uses_anonymous_args = 0
 852              		.loc 1 768 1 is_stmt 0 view .LVU190
 853 0000 00B5     		push	{lr}
 854              	.LCFI38:
 855              		.cfi_def_cfa_offset 4
 856              		.cfi_offset 14, -4
 857 0002 83B0     		sub	sp, sp, #12
 858              	.LCFI39:
 859              		.cfi_def_cfa_offset 16
 769:rtos/uC-FS/OS/uCOS-III/fs_os.c ****     OS_ERR  err_os;
 860              		.loc 1 769 5 is_stmt 1 view .LVU191
 770:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
 771:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
 772:rtos/uC-FS/OS/uCOS-III/fs_os.c ****     OSSemPost(          FS_OS_DevLockSemTbl[dev_id],            /* Release device access.          
 861              		.loc 1 772 5 view .LVU192
 862              		.loc 1 772 44 is_stmt 0 view .LVU193
 863 0004 054B     		ldr	r3, .L72
 864 0006 1B68     		ldr	r3, [r3]
 865              		.loc 1 772 5 view .LVU194
 866 0008 0DF10602 		add	r2, sp, #6
 867 000c 0021     		movs	r1, #0
 868 000e 53F82000 		ldr	r0, [r3, r0, lsl #2]
 869              	.LVL50:
 870              		.loc 1 772 5 view .LVU195
 871 0012 FFF7FEFF 		bl	OSSemPost
 872              	.LVL51:
 773:rtos/uC-FS/OS/uCOS-III/fs_os.c ****               (OS_OPT) (OS_OPT_POST_FIFO | OS_OPT_POST_1),
ARM GAS  /tmp/ccvtUyKU.s 			page 31


 774:rtos/uC-FS/OS/uCOS-III/fs_os.c ****                        &err_os);
 775:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
 776:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
 777:rtos/uC-FS/OS/uCOS-III/fs_os.c ****     switch (err_os) {
 873              		.loc 1 777 5 is_stmt 1 view .LVU196
 778:rtos/uC-FS/OS/uCOS-III/fs_os.c ****         case OS_ERR_NONE:
 779:rtos/uC-FS/OS/uCOS-III/fs_os.c ****              break;
 780:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
 781:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
 782:rtos/uC-FS/OS/uCOS-III/fs_os.c ****         case OS_ERR_OBJ_PTR_NULL:
 783:rtos/uC-FS/OS/uCOS-III/fs_os.c ****         case OS_ERR_OBJ_TYPE:
 784:rtos/uC-FS/OS/uCOS-III/fs_os.c ****         default:
 785:rtos/uC-FS/OS/uCOS-III/fs_os.c ****              FS_TRACE_DBG(("FS_OS_DevUnlock(): Unlock failed for dev %d.\r\n", dev_id));
 786:rtos/uC-FS/OS/uCOS-III/fs_os.c ****              break;
 787:rtos/uC-FS/OS/uCOS-III/fs_os.c ****     }
 788:rtos/uC-FS/OS/uCOS-III/fs_os.c **** }
 874              		.loc 1 788 1 is_stmt 0 view .LVU197
 875 0016 03B0     		add	sp, sp, #12
 876              	.LCFI40:
 877              		.cfi_def_cfa_offset 4
 878              		@ sp needed
 879 0018 5DF804FB 		ldr	pc, [sp], #4
 880              	.L73:
 881              		.align	2
 882              	.L72:
 883 001c 00000000 		.word	.LANCHOR1
 884              		.cfi_endproc
 885              	.LFE10:
 887              		.section	.text.FS_OS_DevAccessLock,"ax",%progbits
 888              		.align	1
 889              		.global	FS_OS_DevAccessLock
 890              		.syntax unified
 891              		.thumb
 892              		.thumb_func
 893              		.fpu fpv4-sp-d16
 895              	FS_OS_DevAccessLock:
 896              	.LVL52:
 897              	.LFB11:
 789:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
 790:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
 791:rtos/uC-FS/OS/uCOS-III/fs_os.c **** /*
 792:rtos/uC-FS/OS/uCOS-III/fs_os.c **** ***************************************************************************************************
 793:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *                                        FS_OS_DevAccessLock()
 794:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *
 795:rtos/uC-FS/OS/uCOS-III/fs_os.c **** * Description : Acquire global device access lock and block high level uC/FS operations on that dev
 796:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *
 797:rtos/uC-FS/OS/uCOS-III/fs_os.c **** * Argument(s) : dev_id      Index of the semaphore to acquire.
 798:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *
 799:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *               timeout     Timeout value in milliseconds.
 800:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *
 801:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *               p_err       Pointer to variable that will receive the return error code from this f
 802:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *               ----------  Argument validated by caller.
 803:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *
 804:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *                               FS_ERR_NONE             File system device access     acquired.
 805:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *                               FS_ERR_OS_LOCK          File system device access NOT acquired.
 806:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *                               FS_ERR_OS_LOCK_TIMEOUT  File system device access timed out.
 807:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *
ARM GAS  /tmp/ccvtUyKU.s 			page 32


 808:rtos/uC-FS/OS/uCOS-III/fs_os.c **** * Return(s)   : none.
 809:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *
 810:rtos/uC-FS/OS/uCOS-III/fs_os.c **** * Note(s)     : (1) Device access MUST be acquired--i.e. MUST wait for access; do NOT timeout.
 811:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *
 812:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *               (2) When both the device and access locks are required the access lock MUST be
 813:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *                   acquired first.
 814:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *
 815:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *               (3) The device access lock can be acquired by external applications by calling
 816:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *                   FSDev_AccessLock() to access the device layer exclusively.
 817:rtos/uC-FS/OS/uCOS-III/fs_os.c **** ***************************************************************************************************
 818:rtos/uC-FS/OS/uCOS-III/fs_os.c **** */
 819:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
 820:rtos/uC-FS/OS/uCOS-III/fs_os.c **** void  FS_OS_DevAccessLock (FS_ID       dev_id,
 821:rtos/uC-FS/OS/uCOS-III/fs_os.c ****                            CPU_INT32U  timeout,
 822:rtos/uC-FS/OS/uCOS-III/fs_os.c ****                            FS_ERR     *p_err)
 823:rtos/uC-FS/OS/uCOS-III/fs_os.c **** {
 898              		.loc 1 823 1 is_stmt 1 view -0
 899              		.cfi_startproc
 900              		@ args = 0, pretend = 0, frame = 8
 901              		@ frame_needed = 0, uses_anonymous_args = 0
 902              		.loc 1 823 1 is_stmt 0 view .LVU199
 903 0000 10B5     		push	{r4, lr}
 904              	.LCFI41:
 905              		.cfi_def_cfa_offset 8
 906              		.cfi_offset 4, -8
 907              		.cfi_offset 14, -4
 908 0002 84B0     		sub	sp, sp, #16
 909              	.LCFI42:
 910              		.cfi_def_cfa_offset 24
 911 0004 1446     		mov	r4, r2
 824:rtos/uC-FS/OS/uCOS-III/fs_os.c ****     CPU_INT32U  timeout_ticks;
 912              		.loc 1 824 5 is_stmt 1 view .LVU200
 825:rtos/uC-FS/OS/uCOS-III/fs_os.c ****     OS_ERR      err_os;
 913              		.loc 1 825 5 view .LVU201
 826:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
 827:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
 828:rtos/uC-FS/OS/uCOS-III/fs_os.c ****     timeout_ticks = (((timeout * OSCfg_TickRate_Hz)  + 1000u - 1u) / 1000u);
 914              		.loc 1 828 5 view .LVU202
 915              		.loc 1 828 32 is_stmt 0 view .LVU203
 916 0006 144B     		ldr	r3, .L81
 917 0008 1B68     		ldr	r3, [r3]
 918 000a 03FB01F1 		mul	r1, r3, r1
 919              	.LVL53:
 920              		.loc 1 828 62 view .LVU204
 921 000e 01F2E731 		addw	r1, r1, #999
 922              		.loc 1 828 19 view .LVU205
 923 0012 124B     		ldr	r3, .L81+4
 924 0014 A3FB0131 		umull	r3, r1, r3, r1
 925              	.LVL54:
 829:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
 830:rtos/uC-FS/OS/uCOS-III/fs_os.c ****     OSSemPend(           FS_OS_DevAccessLockSemTbl[dev_id],     /* Acquire device access without ti
 926              		.loc 1 830 5 is_stmt 1 view .LVU206
 927              		.loc 1 830 51 is_stmt 0 view .LVU207
 928 0018 114B     		ldr	r3, .L81+8
 929 001a 1B68     		ldr	r3, [r3]
 930              		.loc 1 830 5 view .LVU208
 931 001c 53F82000 		ldr	r0, [r3, r0, lsl #2]
ARM GAS  /tmp/ccvtUyKU.s 			page 33


 932              	.LVL55:
 933              		.loc 1 830 5 view .LVU209
 934 0020 0DF10E03 		add	r3, sp, #14
 935 0024 0093     		str	r3, [sp]
 936 0026 0023     		movs	r3, #0
 937 0028 1A46     		mov	r2, r3
 938              	.LVL56:
 939              		.loc 1 830 5 view .LVU210
 940 002a 8909     		lsrs	r1, r1, #6
 941              	.LVL57:
 942              		.loc 1 830 5 view .LVU211
 943 002c FFF7FEFF 		bl	OSSemPend
 944              	.LVL58:
 831:rtos/uC-FS/OS/uCOS-III/fs_os.c ****               (OS_TICK)  timeout_ticks,
 832:rtos/uC-FS/OS/uCOS-III/fs_os.c ****               (OS_OPT)   OS_OPT_PEND_BLOCKING,
 833:rtos/uC-FS/OS/uCOS-III/fs_os.c ****               (CPU_TS *) 0,
 834:rtos/uC-FS/OS/uCOS-III/fs_os.c ****                         &err_os);
 835:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
 836:rtos/uC-FS/OS/uCOS-III/fs_os.c ****     switch (err_os) {
 945              		.loc 1 836 5 is_stmt 1 view .LVU212
 946 0030 BDF80E30 		ldrh	r3, [sp, #14]
 947 0034 3BB1     		cbz	r3, .L75
 948 0036 47F2D922 		movw	r2, #29401
 949 003a 9342     		cmp	r3, r2
 950 003c 07D0     		beq	.L76
 837:rtos/uC-FS/OS/uCOS-III/fs_os.c ****         case OS_ERR_NONE:
 838:rtos/uC-FS/OS/uCOS-III/fs_os.c ****             *p_err = FS_ERR_NONE;
 839:rtos/uC-FS/OS/uCOS-III/fs_os.c ****              break;
 840:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
 841:rtos/uC-FS/OS/uCOS-III/fs_os.c ****         case OS_ERR_TIMEOUT:
 842:rtos/uC-FS/OS/uCOS-III/fs_os.c ****             *p_err = FS_ERR_OS_LOCK_TIMEOUT;
 843:rtos/uC-FS/OS/uCOS-III/fs_os.c ****              break;
 844:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
 845:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
 846:rtos/uC-FS/OS/uCOS-III/fs_os.c ****         case OS_ERR_OBJ_DEL:
 847:rtos/uC-FS/OS/uCOS-III/fs_os.c ****         case OS_ERR_OBJ_PTR_NULL:
 848:rtos/uC-FS/OS/uCOS-III/fs_os.c ****         case OS_ERR_OBJ_TYPE:
 849:rtos/uC-FS/OS/uCOS-III/fs_os.c ****         case OS_ERR_PEND_ABORT:
 850:rtos/uC-FS/OS/uCOS-III/fs_os.c ****         case OS_ERR_PEND_ISR:
 851:rtos/uC-FS/OS/uCOS-III/fs_os.c ****         case OS_ERR_PEND_WOULD_BLOCK:
 852:rtos/uC-FS/OS/uCOS-III/fs_os.c ****         case OS_ERR_SCHED_LOCKED:
 853:rtos/uC-FS/OS/uCOS-III/fs_os.c ****         default:
 854:rtos/uC-FS/OS/uCOS-III/fs_os.c ****              FS_TRACE_DBG(("FS_OS_DevAccessLock(): Lock failed for dev %d.\r\n", dev_id));
 951              		.loc 1 854 90 view .LVU213
 855:rtos/uC-FS/OS/uCOS-III/fs_os.c ****             *p_err = FS_ERR_OS_LOCK;
 952              		.loc 1 855 13 view .LVU214
 953              		.loc 1 855 20 is_stmt 0 view .LVU215
 954 003e 40F2DD53 		movw	r3, #1501
 955 0042 2380     		strh	r3, [r4]	@ movhi
 856:rtos/uC-FS/OS/uCOS-III/fs_os.c ****              break;
 956              		.loc 1 856 14 is_stmt 1 view .LVU216
 857:rtos/uC-FS/OS/uCOS-III/fs_os.c ****     }
 858:rtos/uC-FS/OS/uCOS-III/fs_os.c **** }
 957              		.loc 1 858 1 is_stmt 0 view .LVU217
 958 0044 01E0     		b	.L74
 959              	.L75:
 838:rtos/uC-FS/OS/uCOS-III/fs_os.c ****              break;
ARM GAS  /tmp/ccvtUyKU.s 			page 34


 960              		.loc 1 838 13 is_stmt 1 view .LVU218
 838:rtos/uC-FS/OS/uCOS-III/fs_os.c ****              break;
 961              		.loc 1 838 20 is_stmt 0 view .LVU219
 962 0046 0023     		movs	r3, #0
 963 0048 2380     		strh	r3, [r4]	@ movhi
 839:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
 964              		.loc 1 839 14 is_stmt 1 view .LVU220
 965              	.L74:
 966              		.loc 1 858 1 is_stmt 0 view .LVU221
 967 004a 04B0     		add	sp, sp, #16
 968              	.LCFI43:
 969              		.cfi_remember_state
 970              		.cfi_def_cfa_offset 8
 971              		@ sp needed
 972 004c 10BD     		pop	{r4, pc}
 973              	.LVL59:
 974              	.L76:
 975              	.LCFI44:
 976              		.cfi_restore_state
 842:rtos/uC-FS/OS/uCOS-III/fs_os.c ****              break;
 977              		.loc 1 842 13 is_stmt 1 view .LVU222
 842:rtos/uC-FS/OS/uCOS-III/fs_os.c ****              break;
 978              		.loc 1 842 20 is_stmt 0 view .LVU223
 979 004e 40F2DE53 		movw	r3, #1502
 980 0052 2380     		strh	r3, [r4]	@ movhi
 843:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
 981              		.loc 1 843 14 is_stmt 1 view .LVU224
 982 0054 F9E7     		b	.L74
 983              	.L82:
 984 0056 00BF     		.align	2
 985              	.L81:
 986 0058 00000000 		.word	OSCfg_TickRate_Hz
 987 005c D34D6210 		.word	274877907
 988 0060 00000000 		.word	.LANCHOR2
 989              		.cfi_endproc
 990              	.LFE11:
 992              		.section	.text.FS_OS_DevAccessUnlock,"ax",%progbits
 993              		.align	1
 994              		.global	FS_OS_DevAccessUnlock
 995              		.syntax unified
 996              		.thumb
 997              		.thumb_func
 998              		.fpu fpv4-sp-d16
 1000              	FS_OS_DevAccessUnlock:
 1001              	.LVL60:
 1002              	.LFB12:
 859:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
 860:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
 861:rtos/uC-FS/OS/uCOS-III/fs_os.c **** /*
 862:rtos/uC-FS/OS/uCOS-III/fs_os.c **** ***************************************************************************************************
 863:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *                                       FS_OS_DevAccessUnlock()
 864:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *
 865:rtos/uC-FS/OS/uCOS-III/fs_os.c **** * Description : Release mutually exclusive access to file system device.
 866:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *
 867:rtos/uC-FS/OS/uCOS-III/fs_os.c **** * Argument(s) : dev_id      Index of the semaphore to release.
 868:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *
 869:rtos/uC-FS/OS/uCOS-III/fs_os.c **** * Return(s)   : none.
ARM GAS  /tmp/ccvtUyKU.s 			page 35


 870:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *
 871:rtos/uC-FS/OS/uCOS-III/fs_os.c **** * Note(s)     : (1) Device access MUST be released--i.e. MUST unlock access without failure.
 872:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *
 873:rtos/uC-FS/OS/uCOS-III/fs_os.c **** *                   Failure to release device access will prevent device operation(s) from function
 874:rtos/uC-FS/OS/uCOS-III/fs_os.c **** ***************************************************************************************************
 875:rtos/uC-FS/OS/uCOS-III/fs_os.c **** */
 876:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
 877:rtos/uC-FS/OS/uCOS-III/fs_os.c **** void  FS_OS_DevAccessUnlock (FS_ID  dev_id)
 878:rtos/uC-FS/OS/uCOS-III/fs_os.c **** {
 1003              		.loc 1 878 1 view -0
 1004              		.cfi_startproc
 1005              		@ args = 0, pretend = 0, frame = 8
 1006              		@ frame_needed = 0, uses_anonymous_args = 0
 1007              		.loc 1 878 1 is_stmt 0 view .LVU226
 1008 0000 00B5     		push	{lr}
 1009              	.LCFI45:
 1010              		.cfi_def_cfa_offset 4
 1011              		.cfi_offset 14, -4
 1012 0002 83B0     		sub	sp, sp, #12
 1013              	.LCFI46:
 1014              		.cfi_def_cfa_offset 16
 879:rtos/uC-FS/OS/uCOS-III/fs_os.c ****     OS_ERR  err_os;
 1015              		.loc 1 879 5 is_stmt 1 view .LVU227
 880:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
 881:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
 882:rtos/uC-FS/OS/uCOS-III/fs_os.c ****     OSSemPost(          FS_OS_DevAccessLockSemTbl[dev_id],      /* Release device access.          
 1016              		.loc 1 882 5 view .LVU228
 1017              		.loc 1 882 50 is_stmt 0 view .LVU229
 1018 0004 054B     		ldr	r3, .L85
 1019 0006 1B68     		ldr	r3, [r3]
 1020              		.loc 1 882 5 view .LVU230
 1021 0008 0DF10602 		add	r2, sp, #6
 1022 000c 0021     		movs	r1, #0
 1023 000e 53F82000 		ldr	r0, [r3, r0, lsl #2]
 1024              	.LVL61:
 1025              		.loc 1 882 5 view .LVU231
 1026 0012 FFF7FEFF 		bl	OSSemPost
 1027              	.LVL62:
 883:rtos/uC-FS/OS/uCOS-III/fs_os.c ****               (OS_OPT) (OS_OPT_POST_FIFO | OS_OPT_POST_1),
 884:rtos/uC-FS/OS/uCOS-III/fs_os.c ****                        &err_os);
 885:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
 886:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
 887:rtos/uC-FS/OS/uCOS-III/fs_os.c ****     switch (err_os) {
 1028              		.loc 1 887 5 is_stmt 1 view .LVU232
 888:rtos/uC-FS/OS/uCOS-III/fs_os.c ****         case OS_ERR_NONE:
 889:rtos/uC-FS/OS/uCOS-III/fs_os.c ****              break;
 890:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
 891:rtos/uC-FS/OS/uCOS-III/fs_os.c **** 
 892:rtos/uC-FS/OS/uCOS-III/fs_os.c ****         case OS_ERR_OBJ_PTR_NULL:
 893:rtos/uC-FS/OS/uCOS-III/fs_os.c ****         case OS_ERR_OBJ_TYPE:
 894:rtos/uC-FS/OS/uCOS-III/fs_os.c ****         default:
 895:rtos/uC-FS/OS/uCOS-III/fs_os.c ****              FS_TRACE_DBG(("FS_OS_DevAccessUnlock(): Unlock failed for dev %d.\r\n", dev_id));
 896:rtos/uC-FS/OS/uCOS-III/fs_os.c ****              break;
 897:rtos/uC-FS/OS/uCOS-III/fs_os.c ****     }
 898:rtos/uC-FS/OS/uCOS-III/fs_os.c **** }
 1029              		.loc 1 898 1 is_stmt 0 view .LVU233
 1030 0016 03B0     		add	sp, sp, #12
ARM GAS  /tmp/ccvtUyKU.s 			page 36


 1031              	.LCFI47:
 1032              		.cfi_def_cfa_offset 4
 1033              		@ sp needed
 1034 0018 5DF804FB 		ldr	pc, [sp], #4
 1035              	.L86:
 1036              		.align	2
 1037              	.L85:
 1038 001c 00000000 		.word	.LANCHOR2
 1039              		.cfi_endproc
 1040              	.LFE12:
 1042              		.section	.bss.FS_OS_DevAccessLockSemTbl,"aw",%nobits
 1043              		.align	2
 1044              		.set	.LANCHOR2,. + 0
 1047              	FS_OS_DevAccessLockSemTbl:
 1048 0000 00000000 		.space	4
 1049              		.section	.bss.FS_OS_DevLockSemTbl,"aw",%nobits
 1050              		.align	2
 1051              		.set	.LANCHOR1,. + 0
 1054              	FS_OS_DevLockSemTbl:
 1055 0000 00000000 		.space	4
 1056              		.section	.bss.FS_OS_LockSem,"aw",%nobits
 1057              		.align	2
 1058              		.set	.LANCHOR0,. + 0
 1061              	FS_OS_LockSem:
 1062 0000 00000000 		.space	16
 1062      00000000 
 1062      00000000 
 1062      00000000 
 1063              		.text
 1064              	.Letext0:
 1065              		.file 2 "rtos/uC-CPU/ARM-Cortex-M/ARMv7-M/GNU/cpu.h"
 1066              		.file 3 "rtos/uC-LIB/lib_def.h"
 1067              		.file 4 "rtos/uC-CPU/cpu_core.h"
 1068              		.file 5 "rtos/uC-LIB/lib_mem.h"
 1069              		.file 6 "rtos/uCOS-III/Source/os_type.h"
 1070              		.file 7 "rtos/uCOS-III/Source/os.h"
 1071              		.file 8 "rtos/uCOS-III/Ports/ARM-Cortex-M/ARMv7-M/GNU/os_cpu.h"
 1072              		.file 9 "rtos/uC-FS/OS/uCOS-III/fs_os.h"
 1073              		.file 10 "rtos/uC-FS/OS/uCOS-III/../../Source/fs_type.h"
 1074              		.file 11 "rtos/uC-FS/OS/uCOS-III/../../Source/fs_err.h"
ARM GAS  /tmp/ccvtUyKU.s 			page 37


DEFINED SYMBOLS
                            *ABS*:0000000000000000 fs_os.c
     /tmp/ccvtUyKU.s:18     .rodata.FS_OS_Init.str1.4:0000000000000000 $d
     /tmp/ccvtUyKU.s:22     .text.FS_OS_Init:0000000000000000 $t
     /tmp/ccvtUyKU.s:30     .text.FS_OS_Init:0000000000000000 FS_OS_Init
     /tmp/ccvtUyKU.s:88     .text.FS_OS_Init:000000000000002c $d
     /tmp/ccvtUyKU.s:94     .text.FS_OS_Lock:0000000000000000 $t
     /tmp/ccvtUyKU.s:101    .text.FS_OS_Lock:0000000000000000 FS_OS_Lock
     /tmp/ccvtUyKU.s:160    .text.FS_OS_Lock:000000000000002c $d
     /tmp/ccvtUyKU.s:165    .text.FS_OS_Unlock:0000000000000000 $t
     /tmp/ccvtUyKU.s:172    .text.FS_OS_Unlock:0000000000000000 FS_OS_Unlock
     /tmp/ccvtUyKU.s:202    .text.FS_OS_Unlock:0000000000000018 $d
     /tmp/ccvtUyKU.s:207    .rodata.FS_OS_SemCreate.str1.4:0000000000000000 $d
     /tmp/ccvtUyKU.s:211    .text.FS_OS_SemCreate:0000000000000000 $t
     /tmp/ccvtUyKU.s:218    .text.FS_OS_SemCreate:0000000000000000 FS_OS_SemCreate
     /tmp/ccvtUyKU.s:266    .text.FS_OS_SemCreate:0000000000000024 $d
     /tmp/ccvtUyKU.s:271    .text.FS_OS_SemDel:0000000000000000 $t
     /tmp/ccvtUyKU.s:278    .text.FS_OS_SemDel:0000000000000000 FS_OS_SemDel
     /tmp/ccvtUyKU.s:324    .text.FS_OS_SemPend:0000000000000000 $t
     /tmp/ccvtUyKU.s:331    .text.FS_OS_SemPend:0000000000000000 FS_OS_SemPend
     /tmp/ccvtUyKU.s:394    .text.FS_OS_SemPend:0000000000000038 $d
     /tmp/ccvtUyKU.s:400    .text.FS_OS_SemPost:0000000000000000 $t
     /tmp/ccvtUyKU.s:407    .text.FS_OS_SemPost:0000000000000000 FS_OS_SemPost
     /tmp/ccvtUyKU.s:453    .text.FS_OS_Dly_ms:0000000000000000 $t
     /tmp/ccvtUyKU.s:460    .text.FS_OS_Dly_ms:0000000000000000 FS_OS_Dly_ms
     /tmp/ccvtUyKU.s:508    .text.FS_OS_Dly_ms:0000000000000028 $d
     /tmp/ccvtUyKU.s:514    .rodata.FS_OS_DevInit.str1.4:0000000000000000 $d
     /tmp/ccvtUyKU.s:521    .text.FS_OS_DevInit:0000000000000000 $t
     /tmp/ccvtUyKU.s:528    .text.FS_OS_DevInit:0000000000000000 FS_OS_DevInit
     /tmp/ccvtUyKU.s:753    .text.FS_OS_DevInit:00000000000000f0 $d
     /tmp/ccvtUyKU.s:761    .text.FS_OS_DevLock:0000000000000000 $t
     /tmp/ccvtUyKU.s:768    .text.FS_OS_DevLock:0000000000000000 FS_OS_DevLock
     /tmp/ccvtUyKU.s:833    .text.FS_OS_DevLock:0000000000000034 $d
     /tmp/ccvtUyKU.s:838    .text.FS_OS_DevUnlock:0000000000000000 $t
     /tmp/ccvtUyKU.s:845    .text.FS_OS_DevUnlock:0000000000000000 FS_OS_DevUnlock
     /tmp/ccvtUyKU.s:883    .text.FS_OS_DevUnlock:000000000000001c $d
     /tmp/ccvtUyKU.s:888    .text.FS_OS_DevAccessLock:0000000000000000 $t
     /tmp/ccvtUyKU.s:895    .text.FS_OS_DevAccessLock:0000000000000000 FS_OS_DevAccessLock
     /tmp/ccvtUyKU.s:986    .text.FS_OS_DevAccessLock:0000000000000058 $d
     /tmp/ccvtUyKU.s:993    .text.FS_OS_DevAccessUnlock:0000000000000000 $t
     /tmp/ccvtUyKU.s:1000   .text.FS_OS_DevAccessUnlock:0000000000000000 FS_OS_DevAccessUnlock
     /tmp/ccvtUyKU.s:1038   .text.FS_OS_DevAccessUnlock:000000000000001c $d
     /tmp/ccvtUyKU.s:1043   .bss.FS_OS_DevAccessLockSemTbl:0000000000000000 $d
     /tmp/ccvtUyKU.s:1047   .bss.FS_OS_DevAccessLockSemTbl:0000000000000000 FS_OS_DevAccessLockSemTbl
     /tmp/ccvtUyKU.s:1050   .bss.FS_OS_DevLockSemTbl:0000000000000000 $d
     /tmp/ccvtUyKU.s:1054   .bss.FS_OS_DevLockSemTbl:0000000000000000 FS_OS_DevLockSemTbl
     /tmp/ccvtUyKU.s:1057   .bss.FS_OS_LockSem:0000000000000000 $d
     /tmp/ccvtUyKU.s:1061   .bss.FS_OS_LockSem:0000000000000000 FS_OS_LockSem
                           .group:0000000000000000 wm4.0.0f5aa60db9403f389c005f20ecce4286
                           .group:0000000000000000 wm4.cpu_def.h.46.baa122a2898bdc40bb50d1f21ead1515
                           .group:0000000000000000 wm4.cpu_cfg.h.45.38a6a562da8b04490c382a226238c57e
                           .group:0000000000000000 wm4.cpu.h.171.3cb15ee3ccb812cbfdf76d1fbfb9eda0
                           .group:0000000000000000 wm4.cpu_core.h.51.7b35a59c319673f88ae4a256248776ec
                           .group:0000000000000000 wm4.lib_def.h.66.6ab2a012067a8e1f4289db5765835062
                           .group:0000000000000000 wm4.cpu_core.h.143.d3b700e12b3a14ed3bee14c822b49a7d
                           .group:0000000000000000 wm4.lib_cfg.h.40.b2958733f73e73af70f675ca0f89303e
                           .group:0000000000000000 wm4.lib_mem.h.121.89b942a057fb20091baad8bf6b28b1e6
ARM GAS  /tmp/ccvtUyKU.s 			page 38


                           .group:0000000000000000 wm4.os.h.38.05c7a360e844508f9424830362f7eef3
                           .group:0000000000000000 wm4.os_cfg.h.36.1682609214807c39119743015cd1b75b
                           .group:0000000000000000 wm4.os_cfg_app.h.36.9d01bed009cfc3a5184d9a87250e45bf
                           .group:0000000000000000 wm4.os_cpu.h.45.281d793567585e56a091270c28fc7efc
                           .group:0000000000000000 wm4.os_trace.h.37.a6badbf6e748c370e142a9584653748e
                           .group:0000000000000000 wm4.os.h.95.7b45e7e080367d299efd03f7510809bc
                           .group:0000000000000000 wm4.fs_os.h.56.acfc0f6bf76bf0397dd50693443bd9b8
                           .group:0000000000000000 wm4.fs.h.42.4f6311a594ee5619f1ee7a9392eb7faa
                           .group:0000000000000000 wm4.lib_ascii.h.84.da234f9d4d202bba866fb26067887eec
                           .group:0000000000000000 wm4.fs_def.h.42.653ad677c23ef93c522ec84af681385d
                           .group:0000000000000000 wm4.fs_cfg.h.116.da4f8e9d0b9040a97ef3bf26c61e90fd
                           .group:0000000000000000 wm4.clk.h.99.39403db6a27321e53b261bbe20b56e1d
                           .group:0000000000000000 wm4.lib_str.h.60.d6fb3a1336db17c586ed26be94929677
                           .group:0000000000000000 wm4.clk_cfg.h.45.428f260ed0fbcfa16fc822c67c85dade
                           .group:0000000000000000 wm4.clk.h.219.c24c7347fcc7691d3157fe73514cb366
                           .group:0000000000000000 wm4.fs_cfg_fs.h.176.c85074fbe881bfa594608376a65f4dc2
                           .group:0000000000000000 wm4.fs_type.h.42.3e681b291920189044ba1da24ae0f22a
                           .group:0000000000000000 wm4.fs_err.h.42.d52bfed31dff3d1419c5cf09952dee67
                           .group:0000000000000000 wm4.fs.h.97.1d629f0ba32b5622ab4e01a254bd98e8
                           .group:0000000000000000 wm4.fs_dev.h.42.457d0b7de373584765db5fbe40e7c30d
                           .group:0000000000000000 wm4.fs_ctr.h.42.9d1398cac157503ac8af114819f7782b
                           .group:0000000000000000 wm4.fs_dev.h.84.0b8682dc82cfd464ab0da30a876c8006

UNDEFINED SYMBOLS
OSSemCreate
OSSemPend
OSSemPost
OSSemDel
OSCfg_TickRate_Hz
OSTimeDly
Mem_HeapAlloc

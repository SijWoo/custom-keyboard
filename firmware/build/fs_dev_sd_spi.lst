ARM GAS  /tmp/ccOtrZZk.s 			page 1


   1              		.cpu cortex-m4
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"fs_dev_sd_spi.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.text.FSDev_SD_SPI_NameGet,"ax",%progbits
  18              		.align	1
  19              		.arch armv7e-m
  20              		.syntax unified
  21              		.thumb
  22              		.thumb_func
  23              		.fpu fpv4-sp-d16
  25              	FSDev_SD_SPI_NameGet:
  26              	.LFB3:
  27              		.file 1 "rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c"
   1:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** /*
   2:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** ***************************************************************************************************
   3:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                                                uC/FS
   4:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                                      The Embedded File System
   5:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
   6:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                         (c) Copyright 2008-2019; Silicon Laboratories Inc.,
   7:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                                400 W. Cesar Chavez, Austin, TX 78701
   8:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
   9:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                   All rights reserved. Protected by international copyright laws.
  10:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
  11:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                  Your use of this software is subject to your acceptance of the terms
  12:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                  of a Silicon Labs Micrium software license, which can be obtained by
  13:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                  contacting info@micrium.com. If you do not agree to the terms of this
  14:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                  license, you may not use this software.
  15:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
  16:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                  Please help us continue to provide the Embedded community with the finest
  17:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                  software available. Your honesty is greatly appreciated.
  18:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
  19:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                    You can find our product's documentation at: doc.micrium.com
  20:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
  21:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                          For more information visit us at: www.micrium.com
  22:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** ***************************************************************************************************
  23:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** */
  24:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
  25:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** /*
  26:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** ***************************************************************************************************
  27:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
  28:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                                      FILE SYSTEM DEVICE DRIVER
  29:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
  30:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                                             SD/MMC CARD
  31:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                                               SPI MODE
ARM GAS  /tmp/ccOtrZZk.s 			page 2


  32:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
  33:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** * Filename     : fs_dev_sd_spi.c
  34:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** * Version      : v4.07.06
  35:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** ***************************************************************************************************
  36:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** * Reference(s) : (1) SD Card Association.  "Physical Layer Simplified Specification Version 2.00".
  37:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                    July 26, 2006.
  38:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
  39:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                (2) JEDEC Solid State Technology Association.  "MultiMediaCard (MMC) Electrical
  40:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                    Standard, High Capacity".  JESD84-B42.  July 2007.
  41:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** ***************************************************************************************************
  42:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** * Note(s)      : (1) This driver has been tested with MOST SD/MMC media types, including :
  43:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
  44:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                    (a) Standard capacity SD cards, v1.x & v2.0.
  45:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                    (b) SDmicro cards.
  46:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                    (c) High capacity SD cards (SDHC)
  47:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                    (d) MMC
  48:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                    (e) MMCplus
  49:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
  50:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                    It should also work with devices conformant to the relevant SD or MMC specific
  51:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
  52:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                (2) High capacity MMCPlus cards (>2GB) are not supported by the SPI driver.
  53:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
  54:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                (3) MMC (eMMC) v4.3 and superior dropped support for the SPI interface and as such
  55:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                    cannot be used with this driver. SPI support is optional for MMCplus and MMCmo
  56:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                    cards.
  57:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** ***************************************************************************************************
  58:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** */
  59:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
  60:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** /*
  61:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** ***************************************************************************************************
  62:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                                               MODULE
  63:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** ***************************************************************************************************
  64:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** */
  65:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
  66:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** #define  MICRIUM_SOURCE
  67:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** #define  FS_DEV_SD_SPI_MODULE
  68:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
  69:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
  70:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** /*
  71:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** ***************************************************************************************************
  72:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                                            INCLUDE FILES
  73:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** ***************************************************************************************************
  74:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** */
  75:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
  76:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** #include  <lib_ascii.h>
  77:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** #include  <lib_mem.h>
  78:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** #include  <lib_str.h>
  79:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** #include  "../../../Source/fs.h"
  80:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** #include  "../../../Source/fs_dev.h"
  81:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** #include  "fs_dev_sd_spi.h"
  82:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
  83:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
  84:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** /*
  85:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** ***************************************************************************************************
  86:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                                           LINT INHIBITION
  87:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
  88:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** * Note(s) : (1) Certain macro's within this file describe commands, command values or register fiel
ARM GAS  /tmp/ccOtrZZk.s 			page 3


  89:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *               that are currently unused.  lint error option #750 is disabled to prevent error mes
  90:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *               because of unused macro's :
  91:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
  92:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                   "Info 750: local macro '...' (line ..., file ...) not referenced"
  93:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** ***************************************************************************************************
  94:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** */
  95:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
  96:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** /*lint -e750*/
  97:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
  98:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
  99:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** /*
 100:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** ***************************************************************************************************
 101:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                                            LOCAL DEFINES
 102:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** ***************************************************************************************************
 103:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** */
 104:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 105:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** #define  FS_DEV_SD_SPI_CMD_TIMEOUT                       128u
 106:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 107:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** #define  FS_DEV_SD_SPI_RESP_EMPTY                       0xFFu
 108:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 109:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                                 /* ---------- DATA RESPONSE TOKENS 
 110:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** #define  FS_DEV_SD_SPI_TOKEN_RESP_ACCEPTED              0x05u
 111:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** #define  FS_DEV_SD_SPI_TOKEN_RESP_CRC_REJECTED          0x0Bu
 112:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** #define  FS_DEV_SD_SPI_TOKEN_RESP_WR_REJECTED           0x0Du
 113:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** #define  FS_DEV_SD_SPI_TOKEN_RESP_MASK                  0x0Fu
 114:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 115:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 116:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                                 /* -------------- BLOCK TOKENS (7.3
 117:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** #define  FS_DEV_SD_SPI_TOKEN_START_BLK_MULT             0xFCu
 118:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** #define  FS_DEV_SD_SPI_TOKEN_STOP_TRAN                  0xFDu
 119:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** #define  FS_DEV_SD_SPI_TOKEN_START_BLK                  0xFEu
 120:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 121:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 122:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                                 /* ------------ DATA ERROR TOKENS (
 123:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** #define  FS_DEV_SD_SPI_TOKEN_ERR_ERROR                  0x01u
 124:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** #define  FS_DEV_SD_SPI_TOKEN_ERR_CC_ERROR               0x02u
 125:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** #define  FS_DEV_SD_SPI_TOKEN_ERR_CARD_ECC_ERROR         0x04u
 126:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** #define  FS_DEV_SD_SPI_TOKEN_ERR_OUT_OF_RANGE           0x08u
 127:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 128:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** /*
 129:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** ***************************************************************************************************
 130:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                                       R1 RESPONSE BIT DEFINES
 131:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
 132:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** * Note(s) : (1) See [Ref 1], Figure 7-9.
 133:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** ***************************************************************************************************
 134:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** */
 135:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 136:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** #define  FS_DEV_SD_SPI_R1_NONE                   DEF_BIT_NONE   /* In ready state.                 
 137:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** #define  FS_DEV_SD_SPI_R1_IN_IDLE_STATE          DEF_BIT_00     /* In idle state.                  
 138:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** #define  FS_DEV_SD_SPI_R1_ERASE_RESET            DEF_BIT_01     /* Erase sequence clr'd before exec
 139:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** #define  FS_DEV_SD_SPI_R1_ILLEGAL_COMMAND        DEF_BIT_02     /* Illegal command code detected.  
 140:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** #define  FS_DEV_SD_SPI_R1_COM_CRC_ERROR          DEF_BIT_03     /* CRC check of last command failed
 141:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** #define  FS_DEV_SD_SPI_R1_ERASE_SEQUENCE_ERROR   DEF_BIT_04     /* Error in sequence of erase comma
 142:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** #define  FS_DEV_SD_SPI_R1_ADDRESS_ERROR          DEF_BIT_05     /* Misaligned address that did not 
 143:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** #define  FS_DEV_SD_SPI_R1_PARAMETER_ERROR        DEF_BIT_06     /* Command's argument outside allow
 144:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 145:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** /*
ARM GAS  /tmp/ccOtrZZk.s 			page 4


 146:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** ***************************************************************************************************
 147:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                                       R2 RESPONSE BIT DEFINES
 148:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
 149:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** * Note(s) : (1) See [Ref 1], Figure 7-10.
 150:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** ***************************************************************************************************
 151:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** */
 152:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 153:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** #define  FS_DEV_SD_SPI_R2_CARD_IS_LOCKED         DEF_BIT_00     /* Card is locked.                 
 154:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** #define  FS_DEV_SD_SPI_R2_WP_ERASE_SKIP          DEF_BIT_01     /* Attempt to erase a write protect
 155:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** #define  FS_DEV_SD_SPI_R2_LOCK_CMD_FAILED        DEF_BIT_01     /* Password error during lock/unloc
 156:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** #define  FS_DEV_SD_SPI_R2_ERROR                  DEF_BIT_02     /* General or unknown error during 
 157:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** #define  FS_DEV_SD_SPI_R2_CC_ERROR               DEF_BIT_03     /* Internal card controller error. 
 158:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** #define  FS_DEV_SD_SPI_R2_CARD_ECC_FAILED        DEF_BIT_04     /* Card internal ECC applied, faile
 159:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** #define  FS_DEV_SD_SPI_R2_WP_VIOLATION           DEF_BIT_05     /* Tried to write a write-protected
 160:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** #define  FS_DEV_SD_SPI_R2_ERASE_PARAM            DEF_BIT_06     /* Invalid selection for erase, sec
 161:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** #define  FS_DEV_SD_SPI_R2_OUT_OF_RANGE           DEF_BIT_07     /* Parameter out of range.         
 162:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** #define  FS_DEV_SD_SPI_R2_CSD_OVERWRITE          DEF_BIT_07     /* CSD overwritten.                
 163:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 164:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 165:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** /*
 166:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** ***************************************************************************************************
 167:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                                          LOCAL DATA TYPES
 168:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** ***************************************************************************************************
 169:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** */
 170:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 171:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** /*
 172:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** ***************************************************************************************************
 173:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                                        SD SPI DATA DATA TYPE
 174:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** ***************************************************************************************************
 175:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** */
 176:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 177:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** typedef  struct  fs_dev_sd_spi_data  FS_DEV_SD_SPI_DATA;
 178:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** struct  fs_dev_sd_spi_data {
 179:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     FS_TYPE              Type;
 180:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     FS_QTY               UnitNbr;
 181:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     CPU_BOOLEAN          Init;
 182:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 183:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** #if (FS_CFG_CTR_STAT_EN == DEF_ENABLED)
 184:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     FS_CTR               StatRdCtr;
 185:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     FS_CTR               StatWrCtr;
 186:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** #endif
 187:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 188:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** #if (FS_CFG_CTR_ERR_EN == DEF_ENABLED)
 189:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     FS_CTR               ErrRdCtr;
 190:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     FS_CTR               ErrWrCtr;
 191:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 192:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     FS_CTR               ErrCmdRespCtr;
 193:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     FS_CTR               ErrCmdRespTimeoutCtr;
 194:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     FS_CTR               ErrCmdRespEraseResetCtr;
 195:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     FS_CTR               ErrCmdRespIllegalCmdCtr;
 196:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     FS_CTR               ErrCmdRespCommCRC_Ctr;
 197:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     FS_CTR               ErrCmdRespEraseSeqCtr;
 198:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     FS_CTR               ErrCmdRespAddrCtr;
 199:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     FS_CTR               ErrCmdRespParamCtr;
 200:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** #endif
 201:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 202:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     FS_DEV_SD_INFO       Info;
ARM GAS  /tmp/ccOtrZZk.s 			page 5


 203:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 204:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     FS_DEV_SD_SPI_DATA  *NextPtr;
 205:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** };
 206:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 207:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 208:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** /*
 209:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** ***************************************************************************************************
 210:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                                           LOCAL CONSTANTS
 211:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** ***************************************************************************************************
 212:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** */
 213:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 214:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** #define  FS_DEV_SD_SPI_NAME_LEN             2u
 215:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 216:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** static  const  CPU_CHAR  FSDev_SD_SPI_Name[] = "sd";
 217:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 218:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 219:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** /*
 220:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** ***************************************************************************************************
 221:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                                            LOCAL TABLES
 222:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** ***************************************************************************************************
 223:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** */
 224:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 225:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 226:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** /*
 227:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** ***************************************************************************************************
 228:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                                       LOCAL GLOBAL VARIABLES
 229:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** ***************************************************************************************************
 230:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** */
 231:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 232:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** static  FS_DEV_SD_SPI_DATA  *FSDev_SD_SPI_ListFreePtr;
 233:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 234:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 235:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** /*
 236:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** ***************************************************************************************************
 237:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                                            LOCAL MACRO'S
 238:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** ***************************************************************************************************
 239:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** */
 240:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 241:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** /*
 242:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** ***************************************************************************************************
 243:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                                      SPI ENTER & EXIT MACRO'S
 244:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
 245:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** * Note(s) : (1) According to [Ref 2], Section 9.49, eight clocks (i.e., one byte 'clocked') must be
 246:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *               provided after the reception of a response, reading the final byte of a data block
 247:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *               during a read data transaction or receiving the status at the end of a write data
 248:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *               transaction.
 249:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** ***************************************************************************************************
 250:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** */
 251:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 252:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** #define  FS_DEV_SD_SPI_ENTER(unit_nbr)      FSDev_SD_SPI_BSP_SPI.ChipSelEn((unit_nbr));            
 253:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                             FSDev_SD_SPI_WaitClks((unit_nbr), 1u);
 254:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 255:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** #define  FS_DEV_SD_SPI_EXIT(unit_nbr)       FSDev_SD_SPI_WaitClks((unit_nbr), 1u);                 
 256:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                             FSDev_SD_SPI_BSP_SPI.ChipSelDis((unit_nbr));
 257:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 258:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** /*
 259:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** ***************************************************************************************************
ARM GAS  /tmp/ccOtrZZk.s 			page 6


 260:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                                           COUNTER MACRO'S
 261:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** ***************************************************************************************************
 262:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** */
 263:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 264:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** #if (FS_CFG_CTR_STAT_EN == DEF_ENABLED)                         /* ----------------- STAT CTR MACRO
 265:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 266:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** #define  FS_DEV_SD_SPI_STAT_RD_CTR_INC(p_sd_spi_data)                    {  FS_CTR_STAT_INC((p_sd_s
 267:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** #define  FS_DEV_SD_SPI_STAT_WR_CTR_INC(p_sd_spi_data)                    {  FS_CTR_STAT_INC((p_sd_s
 268:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 269:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** #define  FS_DEV_SD_SPI_STAT_RD_CTR_ADD(p_sd_spi_data, val)               {  FS_CTR_STAT_ADD((p_sd_s
 270:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** #define  FS_DEV_SD_SPI_STAT_WR_CTR_ADD(p_sd_spi_data, val)               {  FS_CTR_STAT_ADD((p_sd_s
 271:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 272:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** #else
 273:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 274:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** #define  FS_DEV_SD_SPI_STAT_RD_CTR_INC(p_sd_spi_data)
 275:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** #define  FS_DEV_SD_SPI_STAT_WR_CTR_INC(p_sd_spi_data)
 276:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 277:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** #define  FS_DEV_SD_SPI_STAT_RD_CTR_ADD(p_sd_spi_data, val)
 278:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** #define  FS_DEV_SD_SPI_STAT_WR_CTR_ADD(p_sd_spi_data, val)
 279:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 280:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** #endif
 281:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 282:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 283:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** #if (FS_CFG_CTR_ERR_EN == DEF_ENABLED)                          /* ------------------ ERR CTR MACRO
 284:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 285:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** #define  FS_DEV_SD_SPI_ERR_RD_CTR_INC(p_sd_spi_data)                     {  FS_CTR_ERR_INC((p_sd_sp
 286:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** #define  FS_DEV_SD_SPI_ERR_WR_CTR_INC(p_sd_spi_data)                     {  FS_CTR_ERR_INC((p_sd_sp
 287:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 288:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** #define  FS_DEV_SD_SPI_ERR_CMD_RESP_TIMEOUT_CTR_INC(p_sd_spi_data)       {  FS_CTR_ERR_INC((p_sd_sp
 289:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** #define  FS_DEV_SD_SPI_ERR_CMD_RESP_RESET_ERASE_CTR_INC(p_sd_spi_data)   {  FS_CTR_ERR_INC((p_sd_sp
 290:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** #define  FS_DEV_SD_SPI_ERR_CMD_RESP_ILLEGAL_CMD_CTR_INC(p_sd_spi_data)   {  FS_CTR_ERR_INC((p_sd_sp
 291:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** #define  FS_DEV_SD_SPI_ERR_CMD_RESP_COMM_CRC_INC(p_sd_spi_data)          {  FS_CTR_ERR_INC((p_sd_sp
 292:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** #define  FS_DEV_SD_SPI_ERR_CMD_RESP_SEQ_ERASE_CTR_INC(p_sd_spi_data)     {  FS_CTR_ERR_INC((p_sd_sp
 293:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** #define  FS_DEV_SD_SPI_ERR_CMD_RESP_ADDR_CTR_INC(p_sd_spi_data)          {  FS_CTR_ERR_INC((p_sd_sp
 294:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** #define  FS_DEV_SD_SPI_ERR_CMD_RESP_PARAM_CTR_INC(p_sd_spi_data)         {  FS_CTR_ERR_INC((p_sd_sp
 295:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 296:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** #else
 297:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 298:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** #define  FS_DEV_SD_SPI_ERR_RD_CTR_INC(p_sd_spi_data)
 299:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** #define  FS_DEV_SD_SPI_ERR_WR_CTR_INC(p_sd_spi_data)
 300:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 301:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** #define  FS_DEV_SD_SPI_ERR_CMD_RESP_TIMEOUT_CTR_INC(p_sd_spi_data)
 302:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** #define  FS_DEV_SD_SPI_ERR_CMD_RESP_RESET_ERASE_CTR_INC(p_sd_spi_data)
 303:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** #define  FS_DEV_SD_SPI_ERR_CMD_RESP_ILLEGAL_CMD_CTR_INC(p_sd_spi_data)
 304:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** #define  FS_DEV_SD_SPI_ERR_CMD_RESP_COMM_CRC_INC(p_sd_spi_data)
 305:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** #define  FS_DEV_SD_SPI_ERR_CMD_RESP_SEQ_ERASE_CTR_INC(p_sd_spi_data)
 306:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** #define  FS_DEV_SD_SPI_ERR_CMD_RESP_ADDR_CTR_INC(p_sd_spi_data)
 307:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** #define  FS_DEV_SD_SPI_ERR_CMD_RESP_PARAM_CTR_INC(p_sd_spi_data)
 308:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 309:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** #endif
 310:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 311:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 312:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** /*
 313:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** ***************************************************************************************************
 314:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                                      LOCAL FUNCTION PROTOTYPES
 315:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** ***************************************************************************************************
 316:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** */
ARM GAS  /tmp/ccOtrZZk.s 			page 7


 317:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 318:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                                 /* --------------- DEV INTERFACE FN
 319:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                                 /* Get name of driver.             
 320:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** static  const  CPU_CHAR     *FSDev_SD_SPI_NameGet          (void);
 321:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 322:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                                 /* Init driver.                    
 323:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** static  void                 FSDev_SD_SPI_Init             (FS_ERR                       *p_err);
 324:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 325:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                                 /* Open device.                    
 326:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** static  void                 FSDev_SD_SPI_Open             (FS_DEV                       *p_dev,
 327:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                             void                         *p_dev_cfg
 328:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                             FS_ERR                       *p_err);
 329:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 330:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                                 /* Close device.                   
 331:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** static  void                 FSDev_SD_SPI_Close            (FS_DEV                       *p_dev);
 332:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 333:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                                 /* Read from device.               
 334:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** static  void                 FSDev_SD_SPI_Rd               (FS_DEV                       *p_dev,
 335:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                             void                         *p_dest,
 336:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                             FS_SEC_NBR                    start,
 337:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                             FS_SEC_QTY                    cnt,
 338:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                             FS_ERR                       *p_err);
 339:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 340:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** #if (FS_CFG_RD_ONLY_EN == DEF_DISABLED)
 341:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                                 /* Write to device.                
 342:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** static  void                 FSDev_SD_SPI_Wr               (FS_DEV                       *p_dev,
 343:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                             void                         *p_src,
 344:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                             FS_SEC_NBR                    start,
 345:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                             FS_SEC_QTY                    cnt,
 346:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                             FS_ERR                       *p_err);
 347:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** #endif
 348:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 349:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                                 /* Get device info.                
 350:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** static  void                 FSDev_SD_SPI_Query            (FS_DEV                       *p_dev,
 351:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                             FS_DEV_INFO                  *p_info,
 352:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                             FS_ERR                       *p_err);
 353:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 354:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                                 /* Perform device I/O control.     
 355:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** static  void                 FSDev_SD_SPI_IO_Ctrl          (FS_DEV                       *p_dev,
 356:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                             CPU_INT08U                    opt,
 357:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                             void                         *p_data,
 358:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                             FS_ERR                       *p_err);
 359:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 360:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                                 /* ------------------- LOCAL FNCTS 
 361:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                                 /* Refresh dev.                    
 362:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** static  CPU_BOOLEAN          FSDev_SD_SPI_Refresh          (FS_DEV_SD_SPI_DATA           *p_sd_spi_
 363:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                             FS_ERR                       *p_err);
 364:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 365:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                                 /* Make card ready & get card type.
 366:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** static  CPU_INT08U           FSDev_SD_SPI_MakeRdy          (FS_DEV_SD_SPI_DATA           *p_sd_spi_
 367:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 368:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 369:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 370:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                                 /* Perform command & read resp byte
 371:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** static  CPU_INT08U           FSDev_SD_SPI_Cmd              (FS_DEV_SD_SPI_DATA           *p_sd_spi_
 372:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                             CPU_INT08U                    cmd,
 373:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                             CPU_INT32U                    arg);
ARM GAS  /tmp/ccOtrZZk.s 			page 8


 374:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 375:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                                 /* Perform command & get R1 resp.  
 376:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** static  CPU_INT08U           FSDev_SD_SPI_CmdR1            (FS_DEV_SD_SPI_DATA           *p_sd_spi_
 377:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                             CPU_INT08U                    cmd,
 378:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                             CPU_INT32U                    arg);
 379:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 380:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                                 /* Perform command & get R3/R7 resp
 381:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** static  CPU_INT08U           FSDev_SD_SPI_CmdR3_7          (FS_DEV_SD_SPI_DATA           *p_sd_spi_
 382:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                             CPU_INT08U                    cmd,
 383:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                             CPU_INT32U                    arg,
 384:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                             CPU_INT08U                    resp[]);
 385:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 386:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                                 /* Perform ACMD & get R1 resp.     
 387:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** static  CPU_INT08U           FSDev_SD_SPI_AppCmdR1         (FS_DEV_SD_SPI_DATA           *p_sd_spi_
 388:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                             CPU_INT08U                    acmd,
 389:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                             CPU_INT32U                    arg);
 390:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 391:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                                 /* Exec cmd & rd data blk.         
 392:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** static  CPU_BOOLEAN          FSDev_SD_SPI_RdData           (FS_DEV_SD_SPI_DATA           *p_sd_spi_
 393:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                             CPU_INT08U                    cmd,
 394:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                             CPU_INT32U                    arg,
 395:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                             CPU_INT08U                   *p_dest,
 396:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                             CPU_INT32U                    size);
 397:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 398:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                                 /* Exec cmd & rd mult data blks.   
 399:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** static  CPU_BOOLEAN          FSDev_SD_SPI_RdDataMulti      (FS_DEV_SD_SPI_DATA           *p_sd_spi_
 400:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                             CPU_INT08U                    cmd,
 401:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                             CPU_INT32U                    arg,
 402:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                             CPU_INT08U                   *p_dest,
 403:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                             CPU_INT32U                    size,
 404:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                             CPU_INT32U                    cnt);
 405:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 406:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** #if (FS_CFG_RD_ONLY_EN == DEF_DISABLED)
 407:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                                 /* Exec cmd & wr data blk.         
 408:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** static  CPU_BOOLEAN          FSDev_SD_SPI_WrData           (FS_DEV_SD_SPI_DATA           *p_sd_spi_
 409:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                             CPU_INT08U                    cmd,
 410:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                             CPU_INT32U                    arg,
 411:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                             CPU_INT08U                   *p_src,
 412:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                             CPU_INT32U                    size);
 413:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 414:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                                 /* Exec cmd & wr mult data blks.   
 415:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** static  CPU_BOOLEAN          FSDev_SD_SPI_WrDataMulti      (FS_DEV_SD_SPI_DATA           *p_sd_spi_
 416:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                             CPU_INT08U                    cmd,
 417:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                             CPU_INT32U                    arg,
 418:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                             CPU_INT08U                   *p_src,
 419:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                             CPU_INT32U                    size,
 420:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                             CPU_INT32U                    cnt);
 421:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** #endif
 422:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 423:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 424:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 425:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                                 /* Get CID reg.                    
 426:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** static  CPU_BOOLEAN          FSDev_SD_SPI_SendCID          (FS_DEV_SD_SPI_DATA           *p_sd_spi_
 427:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                             CPU_INT08U                   *p_dest);
 428:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 429:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                                 /* Get CSD reg.                    
 430:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** static  CPU_BOOLEAN          FSDev_SD_SPI_SendCSD          (FS_DEV_SD_SPI_DATA           *p_sd_spi_
ARM GAS  /tmp/ccOtrZZk.s 			page 9


 431:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                             CPU_INT08U                   *p_dest);
 432:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 433:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 434:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                                 /* Rd one byte from card.          
 435:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** static  CPU_INT08U           FSDev_SD_SPI_RdByte           (FS_QTY                        unit_nbr)
 436:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 437:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                                 /* Wait certain number of clocks.  
 438:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** static  void                 FSDev_SD_SPI_WaitClks         (FS_QTY                        unit_nbr,
 439:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                             CPU_INT08U                    nbr_clks)
 440:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 441:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                                 /* Wait for card to rtn start token
 442:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** static  CPU_INT08U           FSDev_SD_SPI_WaitForStart     (FS_QTY                        unit_nbr)
 443:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 444:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                                 /* Wait while card rtns busy token.
 445:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** static  CPU_INT08U           FSDev_SD_SPI_WaitWhileBusy    (FS_QTY                        unit_nbr)
 446:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 447:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 448:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                                 /* Free SD SPI data.               
 449:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** static  void                 FSDev_SD_SPI_DataFree         (FS_DEV_SD_SPI_DATA           *p_sd_spi_
 450:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 451:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                                 /* Allocate & init SD SPI data.    
 452:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** static  FS_DEV_SD_SPI_DATA  *FSDev_SD_SPI_DataGet          (void);
 453:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 454:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** /*
 455:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** ***************************************************************************************************
 456:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                                         INTERFACE STRUCTURE
 457:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** ***************************************************************************************************
 458:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** */
 459:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 460:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** const  FS_DEV_API  FSDev_SD_SPI = {
 461:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     FSDev_SD_SPI_NameGet,
 462:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     FSDev_SD_SPI_Init,
 463:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     FSDev_SD_SPI_Open,
 464:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     FSDev_SD_SPI_Close,
 465:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     FSDev_SD_SPI_Rd,
 466:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** #if (FS_CFG_RD_ONLY_EN == DEF_DISABLED)
 467:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     FSDev_SD_SPI_Wr,
 468:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** #endif
 469:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     FSDev_SD_SPI_Query,
 470:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     FSDev_SD_SPI_IO_Ctrl
 471:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** };
 472:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 473:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 474:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** /*
 475:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** ***************************************************************************************************
 476:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                                     LOCAL CONFIGURATION ERRORS
 477:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** ***************************************************************************************************
 478:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** */
 479:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 480:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 481:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** /*
 482:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** ***************************************************************************************************
 483:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                                       FSDev_SD_SPI_QuerySD()
 484:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
 485:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** * Description : Get low-level information about SD/MMC card.
 486:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
 487:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** * Argument(s) : name_dev    Device name (see Note #1).
ARM GAS  /tmp/ccOtrZZk.s 			page 10


 488:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
 489:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *               p_info      Pointer to structure that will receive SD/MMC card information.
 490:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
 491:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *               p_err       Pointer to variable that will receive return the error code from this f
 492:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
 493:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                               FS_ERR_NONE               SD/MMC info obtained.
 494:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                               FS_ERR_NAME_NULL          Argument 'name_dev' passed a NULL pointer
 495:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                               FS_ERR_NULL_PTR           Argument 'p_info' passed a NULL pointer.
 496:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                               FS_ERR_DEV_INVALID        Argument 'name_dev' specifies an invalid 
 497:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
 498:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                                                         --------- RETURNED BY FSDev_IO_Ctrl() ---
 499:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                               FS_ERR_DEV_NOT_OPEN       Device is not open.
 500:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                               FS_ERR_DEV_NOT_PRESENT    Device is not present.
 501:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                               FS_ERR_DEV_IO             Device I/O error.
 502:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                               FS_ERR_DEV_TIMEOUT        Device timeout.
 503:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
 504:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** * Return(s)   : none.
 505:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
 506:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** * Note(s)     : (1) The device MUST be a SD/MMC device (e.g., "sd:0:").
 507:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** ***************************************************************************************************
 508:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** */
 509:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 510:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** void  FSDev_SD_SPI_QuerySD (CPU_CHAR        *name_dev,
 511:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                             FS_DEV_SD_INFO  *p_info,
 512:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                             FS_ERR          *p_err)
 513:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** {
 514:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     CPU_INT16S  cmp_val;
 515:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 516:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 517:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                                 /* ------------------- VALIDATE ARG
 518:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** #if (FS_CFG_ERR_ARG_CHK_EXT_EN == DEF_ENABLED)
 519:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     if (name_dev == (CPU_CHAR *)0) {                            /* Validate name ptr.              
 520:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****        *p_err = FS_ERR_NAME_NULL;
 521:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         return;
 522:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     }
 523:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 524:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     if (p_info == (FS_DEV_SD_INFO *)0) {                        /* Validate info ptr.              
 525:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****        *p_err = FS_ERR_NULL_PTR;
 526:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         return;
 527:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     }
 528:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** #endif
 529:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 530:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                                 /* Validate name str (see Note #1).
 531:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     cmp_val = Str_Cmp_N(name_dev, (CPU_CHAR *)FSDev_SD_SPI_Name, FS_DEV_SD_SPI_NAME_LEN);
 532:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     if (cmp_val != 0) {
 533:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****        *p_err = FS_ERR_DEV_INVALID;
 534:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         return;
 535:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     }
 536:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 537:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     if (name_dev[FS_DEV_SD_SPI_NAME_LEN] != FS_CHAR_DEV_SEP) {
 538:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****        *p_err = FS_ERR_DEV_INVALID;
 539:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         return;
 540:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     }
 541:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 542:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 543:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                                 /* -------------------- GET SD INFO
 544:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     FSDev_IO_Ctrl(        name_dev,
ARM GAS  /tmp/ccOtrZZk.s 			page 11


 545:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                           FS_DEV_IO_CTRL_SD_QUERY,
 546:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                   (void *)p_info,
 547:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                           p_err);
 548:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** }
 549:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 550:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 551:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** /*
 552:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** ***************************************************************************************************
 553:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                                        FSDev_SD_SPI_RdCID()
 554:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
 555:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** * Description : Read SD/MMC Card ID (CID) register.
 556:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
 557:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** * Argument(s) : name_dev    Device name (see Note #1).
 558:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
 559:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *               p_dest      Pointer to 16-byte buffer that will receive SD/MMC Card ID register.
 560:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
 561:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *               p_err       Pointer to variable that will receive return the error code from this f
 562:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
 563:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                               FS_ERR_NONE               SD/MMC Card ID register read.
 564:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                               FS_ERR_NAME_NULL          Argument 'name_dev' passed a NULL pointer
 565:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                               FS_ERR_NULL_PTR           Argument 'p_dest' passed a NULL pointer.
 566:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                               FS_ERR_DEV_INVALID        Argument 'name_dev' specifies an invalid 
 567:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
 568:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                                                         --------- RETURNED BY FSDev_IO_Ctrl() ---
 569:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                               FS_ERR_DEV_NOT_OPEN       Device is not open.
 570:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                               FS_ERR_DEV_NOT_PRESENT    Device is not present.
 571:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                               FS_ERR_DEV_IO             Device I/O error.
 572:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                               FS_ERR_DEV_TIMEOUT        Device timeout.
 573:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
 574:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** * Return(s)   : none.
 575:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
 576:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** * Note(s)     : (1) The device MUST be a SD/MMC device (e.g., "sd:0:").
 577:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
 578:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *               (2) (a) For SD cards, the structure of the CID is defined in [Ref 1] Section 5.1.
 579:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
 580:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                   (b) For MMC cards, the structure of the CID is defined in [Ref 2] Section 8.2.
 581:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** ***************************************************************************************************
 582:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** */
 583:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 584:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** void  FSDev_SD_SPI_RdCID (CPU_CHAR    *name_dev,
 585:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                           CPU_INT08U  *p_dest,
 586:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                           FS_ERR      *p_err)
 587:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** {
 588:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     CPU_INT16S  cmp_val;
 589:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 590:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 591:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                                 /* ------------------- VALIDATE ARG
 592:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** #if (FS_CFG_ERR_ARG_CHK_EXT_EN == DEF_ENABLED)
 593:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     if (name_dev == (CPU_CHAR *)0) {                            /* Validate name ptr.              
 594:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****        *p_err = FS_ERR_NAME_NULL;
 595:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         return;
 596:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     }
 597:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 598:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     if (p_dest == (CPU_INT08U *)0) {                            /* Validate dest ptr.              
 599:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****        *p_err = FS_ERR_NULL_PTR;
 600:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         return;
 601:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     }
ARM GAS  /tmp/ccOtrZZk.s 			page 12


 602:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** #endif
 603:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 604:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                                 /* Validate name str (see Note #1).
 605:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     cmp_val = Str_Cmp_N(name_dev, (CPU_CHAR *)FSDev_SD_SPI_Name, FS_DEV_SD_SPI_NAME_LEN);
 606:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     if (cmp_val != 0) {
 607:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****        *p_err = FS_ERR_DEV_INVALID;
 608:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         return;
 609:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     }
 610:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 611:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     if (name_dev[FS_DEV_SD_SPI_NAME_LEN] != FS_CHAR_DEV_SEP) {
 612:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****        *p_err = FS_ERR_DEV_INVALID;
 613:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         return;
 614:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     }
 615:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 616:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 617:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                                 /* -------------------- GET SD INFO
 618:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     FSDev_IO_Ctrl(        name_dev,
 619:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                           FS_DEV_IO_CTRL_SD_RD_CID,
 620:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                   (void *)p_dest,
 621:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                           p_err);
 622:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** }
 623:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 624:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 625:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** /*
 626:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** ***************************************************************************************************
 627:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                                        FSDev_SD_SPI_RdCSD()
 628:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
 629:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** * Description : Read SD/MMC Card-Specific Data (CSD) register.
 630:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
 631:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** * Argument(s) : name_dev    Device name (see Note #1).
 632:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
 633:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *               p_dest      Pointer to 16-byte buffer that will receive SD/MMC Card ID register.
 634:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
 635:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *               p_err       Pointer to variable that will receive return the error code from this f
 636:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
 637:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                               FS_ERR_NONE               SD/MMC Card-Specific Data register read.
 638:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                               FS_ERR_NAME_NULL          Argument 'name_dev' passed a NULL pointer
 639:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                               FS_ERR_NULL_PTR           Argument 'p_dest' passed a NULL pointer.
 640:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                               FS_ERR_DEV_INVALID        Argument 'name_dev' specifies an invalid 
 641:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
 642:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                                                         --------- RETURNED BY FSDev_IO_Ctrl() ---
 643:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                               FS_ERR_DEV_NOT_OPEN       Device is not open.
 644:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                               FS_ERR_DEV_NOT_PRESENT    Device is not present.
 645:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                               FS_ERR_DEV_IO             Device I/O error.
 646:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                               FS_ERR_DEV_TIMEOUT        Device timeout.
 647:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
 648:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** * Return(s)   : none.
 649:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
 650:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** * Note(s)     : (1) The device MUST be a SD/MMC device (e.g., "sd:0:").
 651:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
 652:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *               (2) (a) For SD v1.x & SD v2.0 standard capacity, the structure of the CSD is define
 653:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                       [Ref 1], Section 5.3.2.
 654:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
 655:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                   (b) For MMC cards, the structure of the CSD is defined in [Ref 2], Section 8.3.
 656:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
 657:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                   (c) For SD v2.0 high capacity cards, the structure of the CSD is defined in [Re
 658:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                       Section 5.3.3.
ARM GAS  /tmp/ccOtrZZk.s 			page 13


 659:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** ***************************************************************************************************
 660:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** */
 661:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 662:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** void  FSDev_SD_SPI_RdCSD (CPU_CHAR    *name_dev,
 663:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                           CPU_INT08U  *p_dest,
 664:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                           FS_ERR      *p_err)
 665:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** {
 666:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     CPU_INT16S  cmp_val;
 667:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 668:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 669:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                                 /* ------------------- VALIDATE ARG
 670:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** #if (FS_CFG_ERR_ARG_CHK_EXT_EN == DEF_ENABLED)
 671:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     if (name_dev == (CPU_CHAR *)0) {                            /* Validate name ptr.              
 672:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****        *p_err = FS_ERR_NAME_NULL;
 673:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         return;
 674:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     }
 675:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 676:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     if (p_dest == (CPU_INT08U *)0) {                            /* Validate dest ptr.              
 677:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****        *p_err = FS_ERR_NULL_PTR;
 678:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         return;
 679:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     }
 680:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** #endif
 681:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 682:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                                 /* Validate name str (see Note #1).
 683:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     cmp_val = Str_Cmp_N(name_dev, (CPU_CHAR *)FSDev_SD_SPI_Name, FS_DEV_SD_SPI_NAME_LEN);
 684:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     if (cmp_val != 0) {
 685:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****        *p_err = FS_ERR_DEV_INVALID;
 686:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         return;
 687:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     }
 688:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 689:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     if (name_dev[FS_DEV_SD_SPI_NAME_LEN] != FS_CHAR_DEV_SEP) {
 690:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****        *p_err = FS_ERR_DEV_INVALID;
 691:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         return;
 692:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     }
 693:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 694:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 695:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                                 /* -------------------- GET SD INFO
 696:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     FSDev_IO_Ctrl(        name_dev,
 697:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                           FS_DEV_IO_CTRL_SD_RD_CSD,
 698:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                   (void *)p_dest,
 699:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                           p_err);
 700:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** }
 701:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 702:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 703:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** /*
 704:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** ***************************************************************************************************
 705:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** ***************************************************************************************************
 706:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                                     DRIVER INTERFACE FUNCTIONS
 707:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** ***************************************************************************************************
 708:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** ***************************************************************************************************
 709:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** */
 710:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 711:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** /*
 712:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** ***************************************************************************************************
 713:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                                       FSDev_SD_SPI_NameGet()
 714:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
 715:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** * Description : Return name of device driver.
ARM GAS  /tmp/ccOtrZZk.s 			page 14


 716:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
 717:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** * Argument(s) : none.
 718:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
 719:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** * Return(s)   : Pointer to string which holds device driver name.
 720:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
 721:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** * Note(s)     : (1) The name MUST NOT include the ':' character.
 722:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
 723:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *               (2) The name MUST be constant; each time this function is called, the same name MUS
 724:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                   returned.
 725:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** ***************************************************************************************************
 726:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** */
 727:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 728:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** static  const  CPU_CHAR  *FSDev_SD_SPI_NameGet (void)
 729:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** {
  28              		.loc 1 729 1 view -0
  29              		.cfi_startproc
  30              		@ args = 0, pretend = 0, frame = 0
  31              		@ frame_needed = 0, uses_anonymous_args = 0
  32              		@ link register save eliminated.
 730:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     return (FSDev_SD_SPI_Name);
  33              		.loc 1 730 5 view .LVU1
 731:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** }
  34              		.loc 1 731 1 is_stmt 0 view .LVU2
  35 0000 0048     		ldr	r0, .L2
  36 0002 7047     		bx	lr
  37              	.L3:
  38              		.align	2
  39              	.L2:
  40 0004 00000000 		.word	.LANCHOR0
  41              		.cfi_endproc
  42              	.LFE3:
  44              		.section	.text.FSDev_SD_SPI_Init,"ax",%progbits
  45              		.align	1
  46              		.syntax unified
  47              		.thumb
  48              		.thumb_func
  49              		.fpu fpv4-sp-d16
  51              	FSDev_SD_SPI_Init:
  52              	.LVL0:
  53              	.LFB4:
 732:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 733:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 734:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** /*
 735:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** ***************************************************************************************************
 736:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                                         FSDev_SD_SPI_Init()
 737:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
 738:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** * Description : Initialize the driver.
 739:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
 740:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** * Argument(s) : p_err       Pointer to variable that will receive the return error code from this f
 741:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
 742:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                               FS_ERR_NONE    Device driver initialized successfully.
 743:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
 744:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** * Return(s)   : none.
 745:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
 746:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** * Note(s)     : (1) This function should initialize any structures, tables or variables that are co
 747:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                   to all devices or are used to manage devices accessed with the driver.  This fu
 748:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                   SHOULD NOT initialize any devices; that will be done individually for each with
ARM GAS  /tmp/ccOtrZZk.s 			page 15


 749:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                   device driver's 'Open()' function.
 750:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** ***************************************************************************************************
 751:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** */
 752:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 753:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** static  void  FSDev_SD_SPI_Init (FS_ERR  *p_err)
 754:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** {
  54              		.loc 1 754 1 is_stmt 1 view -0
  55              		.cfi_startproc
  56              		@ args = 0, pretend = 0, frame = 0
  57              		@ frame_needed = 0, uses_anonymous_args = 0
  58              		@ link register save eliminated.
 755:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     FSDev_SD_SPI_UnitCtr     =  0u;
  59              		.loc 1 755 5 view .LVU4
  60              		.loc 1 755 30 is_stmt 0 view .LVU5
  61 0000 0023     		movs	r3, #0
  62 0002 034A     		ldr	r2, .L5
  63 0004 1360     		str	r3, [r2]
 756:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     FSDev_SD_SPI_ListFreePtr = (FS_DEV_SD_SPI_DATA *)0;
  64              		.loc 1 756 5 is_stmt 1 view .LVU6
  65              		.loc 1 756 30 is_stmt 0 view .LVU7
  66 0006 034A     		ldr	r2, .L5+4
  67 0008 1360     		str	r3, [r2]
 757:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 758:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****    *p_err = FS_ERR_NONE;
  68              		.loc 1 758 4 is_stmt 1 view .LVU8
  69              		.loc 1 758 11 is_stmt 0 view .LVU9
  70 000a 0380     		strh	r3, [r0]	@ movhi
 759:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** }
  71              		.loc 1 759 1 view .LVU10
  72 000c 7047     		bx	lr
  73              	.L6:
  74 000e 00BF     		.align	2
  75              	.L5:
  76 0010 00000000 		.word	FSDev_SD_SPI_UnitCtr
  77 0014 00000000 		.word	.LANCHOR1
  78              		.cfi_endproc
  79              	.LFE4:
  81              		.section	.text.FSDev_SD_SPI_Query,"ax",%progbits
  82              		.align	1
  83              		.syntax unified
  84              		.thumb
  85              		.thumb_func
  86              		.fpu fpv4-sp-d16
  88              	FSDev_SD_SPI_Query:
  89              	.LVL1:
  90              	.LFB9:
 760:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 761:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 762:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** /*
 763:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** ***************************************************************************************************
 764:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                                         FSDev_SD_SPI_Open()
 765:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
 766:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** * Description : Open (initialize) a device instance.
 767:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
 768:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** * Argument(s) : p_dev       Pointer to device to open.
 769:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
 770:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *               p_dev_cfg   Pointer to device configuration.
ARM GAS  /tmp/ccOtrZZk.s 			page 16


 771:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
 772:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *               p_err       Pointer to variable that will receive the return error code from this f
 773:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
 774:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                               FS_ERR_NONE                    Device opened successfully.
 775:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                               FS_ERR_DEV_ALREADY_OPEN        Device is already opened.
 776:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                               FS_ERR_DEV_INVALID_CFG         Device configuration specified inval
 777:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                               FS_ERR_DEV_INVALID_LOW_FMT     Device needs to be low-level formatt
 778:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                               FS_ERR_DEV_INVALID_LOW_PARAMS  Device low-level device parameters i
 779:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                               FS_ERR_DEV_INVALID_UNIT_NBR    Device unit number is invalid.
 780:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                               FS_ERR_DEV_IO                  Device I/O error.
 781:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                               FS_ERR_DEV_NOT_PRESENT         Device is not present.
 782:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                               FS_ERR_DEV_TIMEOUT             Device timeout.
 783:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                               FS_ERR_MEM_ALLOC               Memory could not be allocated.
 784:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
 785:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** * Return(s)   : none.
 786:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
 787:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** * Note(s)     : (1) Tracking whether a device is open is not necessary, because this should NEVER b
 788:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                   called when a device is already open.
 789:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
 790:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *               (2) Some drivers may need to track whether a device has been previously opened
 791:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                   (indicating that the hardware has previously been initialized).
 792:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
 793:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *               (3) This function will be called EVERY time the device is opened.
 794:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
 795:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *               (4) See 'FSDev_Open() Notes #3'.
 796:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** ***************************************************************************************************
 797:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** */
 798:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 799:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** static  void  FSDev_SD_SPI_Open (FS_DEV  *p_dev,
 800:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                  void    *p_dev_cfg,
 801:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                  FS_ERR  *p_err)
 802:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** {
 803:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     FS_DEV_SD_SPI_DATA  *p_sd_spi_data;
 804:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 805:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 806:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****    (void)p_dev_cfg;                                             /*lint --e{550} Suppress "Symbol no
 807:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 808:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     p_sd_spi_data = FSDev_SD_SPI_DataGet();
 809:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     if (p_sd_spi_data == (FS_DEV_SD_SPI_DATA *)0) {
 810:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****       *p_err = FS_ERR_MEM_ALLOC;
 811:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****        return;
 812:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     }
 813:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 814:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     p_dev->DataPtr         = (void *)p_sd_spi_data;
 815:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     p_sd_spi_data->UnitNbr =  p_dev->UnitNbr;
 816:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 817:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****    (void)FSDev_SD_SPI_Refresh(p_sd_spi_data, p_err);
 818:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** }
 819:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 820:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 821:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** /*
 822:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** ***************************************************************************************************
 823:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                                        FSDev_SD_SPI_Close()
 824:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
 825:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** * Description : Close (uninitialize) a device instance.
 826:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
 827:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** * Argument(s) : p_dev       Pointer to device to close.
ARM GAS  /tmp/ccOtrZZk.s 			page 17


 828:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
 829:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** * Return(s)   : none.
 830:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
 831:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** * Note(s)     : (1) Tracking whether a device is open is not necessary, because this should ONLY be
 832:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                   called when a device is open.
 833:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
 834:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *               (2) This function will be called EVERY time the device is closed.
 835:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** ***************************************************************************************************
 836:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** */
 837:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 838:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** static  void  FSDev_SD_SPI_Close (FS_DEV  *p_dev)
 839:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** {
 840:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     FS_DEV_SD_SPI_DATA  *p_sd_spi_data;
 841:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 842:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 843:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     p_sd_spi_data = (FS_DEV_SD_SPI_DATA *)p_dev->DataPtr;
 844:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     if (p_sd_spi_data->Init == DEF_YES) {
 845:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FSDev_SD_SPI_BSP_SPI.Close(p_sd_spi_data->UnitNbr);
 846:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     }
 847:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     FSDev_SD_SPI_DataFree(p_sd_spi_data);
 848:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** }
 849:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 850:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 851:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** /*
 852:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** ***************************************************************************************************
 853:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                                          FSDev_SD_SPI_Rd()
 854:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
 855:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** * Description : Read from a device & store data in buffer.
 856:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
 857:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** * Argument(s) : p_dev       Pointer to device to read from.
 858:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
 859:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *               p_dest      Pointer to destination buffer.
 860:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
 861:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *               start       Start sector of read.
 862:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
 863:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *               cnt         Number of sectors to read.
 864:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
 865:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *               p_err       Pointer to variable that will receive the return error code from this f
 866:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
 867:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                               FS_ERR_NONE                    Sector(s) read.
 868:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                               FS_ERR_DEV_INVALID_UNIT_NBR    Device unit number is invalid.
 869:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                               FS_ERR_DEV_NOT_OPEN            Device is not open.
 870:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                               FS_ERR_DEV_NOT_PRESENT         Device is not present.
 871:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                               FS_ERR_DEV_IO                  Device I/O error.
 872:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                               FS_ERR_DEV_TIMEOUT             Device timeout.
 873:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
 874:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** * Return(s)   : none.
 875:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
 876:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** * Note(s)     : (1) Tracking whether a device is open is not necessary, because this should ONLY be
 877:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                   called when a device is open.
 878:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
 879:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *               (2) Standard-capacity devices receive the start byte address as the argument of the
 880:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                   command, limiting device access to 4-GB (the range of a 32-bit variable).  To s
 881:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                   that problem, high-capacity devices (like SDHC cards) receive the block number 
 882:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                   argument of the read command.
 883:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** ***************************************************************************************************
 884:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** */
ARM GAS  /tmp/ccOtrZZk.s 			page 18


 885:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 886:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** static  void  FSDev_SD_SPI_Rd (FS_DEV      *p_dev,
 887:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                void        *p_dest,
 888:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                FS_SEC_NBR   start,
 889:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                FS_SEC_QTY   cnt,
 890:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                FS_ERR      *p_err)
 891:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** {
 892:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     CPU_BOOLEAN          ok;
 893:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     CPU_INT32U           start_addr;
 894:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     CPU_INT08U          *p_dest_08;
 895:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     FS_DEV_SD_INFO      *p_sd_info;
 896:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     FS_DEV_SD_SPI_DATA  *p_sd_spi_data;
 897:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     FS_QTY               unit_nbr;
 898:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 899:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 900:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                                 /* ------------------ PREPARE FOR R
 901:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     unit_nbr      =  p_dev->UnitNbr;
 902:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     p_dest_08     = (CPU_INT08U         *)p_dest;
 903:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     p_sd_spi_data = (FS_DEV_SD_SPI_DATA *)p_dev->DataPtr;
 904:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     p_sd_info     = &p_sd_spi_data->Info;
 905:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                                 /* See Note #2.                    
 906:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     start_addr    = (p_sd_info->HighCapacity == DEF_YES) ? start : (start * FS_DEV_SD_BLK_SIZE);
 907:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 908:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     FSDev_SD_SPI_BSP_SPI.Lock(unit_nbr);
 909:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 910:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 911:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     if (cnt > 1u) {                                             /* ---------------- PERFORM MULTIPL
 912:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         ok = FSDev_SD_SPI_RdDataMulti(p_sd_spi_data,            /* Rd data.                        
 913:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                       FS_DEV_SD_CMD_READ_MULTIPLE_BLOCK,
 914:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                       start_addr,
 915:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                       p_dest_08,
 916:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                       FS_DEV_SD_BLK_SIZE,
 917:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                       cnt);
 918:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 919:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 920:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 921:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     } else {                                                    /* ----------------- PERFORM SINGLE
 922:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         ok = FSDev_SD_SPI_RdData(p_sd_spi_data,                 /* Rd data.                        
 923:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                  FS_DEV_SD_CMD_READ_SINGLE_BLOCK,
 924:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                  start_addr,
 925:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                  p_dest_08,
 926:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                  FS_DEV_SD_BLK_SIZE);
 927:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     }
 928:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 929:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 930:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 931:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     if (ok != DEF_OK) {                                         /* ---------------------- CHK ERR -
 932:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FSDev_SD_SPI_BSP_SPI.Unlock(unit_nbr);
 933:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FS_DEV_SD_SPI_ERR_RD_CTR_INC(p_sd_spi_data);
 934:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FS_TRACE_DBG(("FSDev_SD_SPI_Rd(): Failed to read card.\r\n"));
 935:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****        *p_err = FS_ERR_DEV_IO;
 936:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         return;
 937:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     }
 938:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 939:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     FS_DEV_SD_SPI_STAT_RD_CTR_ADD(p_sd_spi_data, cnt);
 940:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 941:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
ARM GAS  /tmp/ccOtrZZk.s 			page 19


 942:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 943:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                                 /* ----------------- RELEASE BUS LO
 944:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     FSDev_SD_SPI_BSP_SPI.Unlock(unit_nbr);
 945:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****    *p_err = FS_ERR_NONE;
 946:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** }
 947:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 948:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 949:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** /*
 950:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** ***************************************************************************************************
 951:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                                          FSDev_SD_SPI_Wr()
 952:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
 953:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** * Description : Write data to a device from a buffer.
 954:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
 955:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** * Argument(s) : p_dev       Pointer to device to write to.
 956:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
 957:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *               p_src       Pointer to source buffer.
 958:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
 959:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *               start       Start sector of write.
 960:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
 961:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *               cnt         Number of sectors to write.
 962:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
 963:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *               p_err       Pointer to variable that will receive the return error code from this f
 964:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
 965:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                               FS_ERR_NONE                    Sector(s) written.
 966:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                               FS_ERR_DEV_INVALID_UNIT_NBR    Device unit number is invalid.
 967:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                               FS_ERR_DEV_NOT_OPEN            Device is not open.
 968:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                               FS_ERR_DEV_NOT_PRESENT         Device is not present.
 969:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                               FS_ERR_DEV_IO                  Device I/O error.
 970:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                               FS_ERR_DEV_TIMEOUT             Device timeout.
 971:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
 972:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** * Return(s)   : none.
 973:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
 974:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** * Note(s)     : (1) Tracking whether a device is open is not necessary, because this should ONLY be
 975:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                   called when a device is open.
 976:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
 977:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *               (2) Standard-capacity devices receive the start byte address as the argument of the
 978:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                   command, limiting device access to 4-GB (the range of a 32-bit variable).  To s
 979:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                   that problem, high-capacity devices (like SDHC cards) receive the block number 
 980:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                   argument of the write command.
 981:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** ***************************************************************************************************
 982:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** */
 983:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 984:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** #if (FS_CFG_RD_ONLY_EN == DEF_DISABLED)
 985:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** static  void  FSDev_SD_SPI_Wr (FS_DEV      *p_dev,
 986:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                void        *p_src,
 987:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                FS_SEC_NBR   start,
 988:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                FS_SEC_QTY   cnt,
 989:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                FS_ERR      *p_err)
 990:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** {
 991:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     CPU_BOOLEAN          ok;
 992:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     CPU_INT32U           start_addr;
 993:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     FS_DEV_SD_INFO      *p_sd_info;
 994:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     FS_DEV_SD_SPI_DATA  *p_sd_spi_data;
 995:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     CPU_INT08U          *p_src_08;
 996:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     FS_QTY               unit_nbr;
 997:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 998:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
ARM GAS  /tmp/ccOtrZZk.s 			page 20


 999:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                                 /* ------------------ PREPARE FOR W
1000:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     unit_nbr      =  p_dev->UnitNbr;
1001:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     p_src_08      = (CPU_INT08U         *)p_src;
1002:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     p_sd_spi_data = (FS_DEV_SD_SPI_DATA *)p_dev->DataPtr;
1003:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     p_sd_info     = &p_sd_spi_data->Info;
1004:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                                 /* See Note #2.                    
1005:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     start_addr    = (p_sd_info->HighCapacity == DEF_YES) ? start : (start * FS_DEV_SD_BLK_SIZE);
1006:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1007:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     FSDev_SD_SPI_BSP_SPI.Lock(unit_nbr);
1008:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1009:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1010:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     if (cnt > 1u) {                                             /* ---------------- PERFORM MULTIPL
1011:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         ok = FSDev_SD_SPI_WrDataMulti(p_sd_spi_data,            /* Wr data.                        
1012:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                       FS_DEV_SD_CMD_WRITE_MULTIPLE_BLOCK,
1013:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                       start_addr,
1014:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                       p_src_08,
1015:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                       FS_DEV_SD_BLK_SIZE,
1016:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                       cnt);
1017:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1018:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1019:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1020:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     } else {                                                    /* ----------------- PERFORM SINGLE
1021:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         ok = FSDev_SD_SPI_WrData(p_sd_spi_data,                 /* Wr data.                        
1022:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                  FS_DEV_SD_CMD_WRITE_BLOCK,
1023:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                  start_addr,
1024:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                  p_src_08,
1025:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                  FS_DEV_SD_BLK_SIZE);
1026:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     }
1027:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1028:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1029:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1030:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     if (ok != DEF_OK) {                                         /* ---------------------- CHK ERR -
1031:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FSDev_SD_SPI_BSP_SPI.Unlock(unit_nbr);
1032:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FS_DEV_SD_SPI_ERR_WR_CTR_INC(p_sd_spi_data);
1033:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FS_TRACE_DBG(("FSDev_SD_SPI_Wr(): Failed to write card.\r\n"));
1034:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****        *p_err = FS_ERR_DEV_IO;
1035:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         return;
1036:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     }
1037:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1038:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     FS_DEV_SD_SPI_STAT_WR_CTR_ADD(p_sd_spi_data, cnt);
1039:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1040:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1041:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1042:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                                 /* ----------------- RELEASE BUS LO
1043:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     FSDev_SD_SPI_BSP_SPI.Unlock(unit_nbr);
1044:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****    *p_err = FS_ERR_NONE;
1045:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** }
1046:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** #endif
1047:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1048:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1049:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** /*
1050:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** ***************************************************************************************************
1051:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                                        FSDev_SD_SPI_Query()
1052:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
1053:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** * Description : Get information about a device.
1054:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
1055:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** * Argument(s) : p_dev       Pointer to device to query.
ARM GAS  /tmp/ccOtrZZk.s 			page 21


1056:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
1057:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *               p_info      Pointer to structure that will receive device information.
1058:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
1059:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *               p_err       Pointer to variable that will receive the return error code from this f
1060:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
1061:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                               FS_ERR_NONE                    Device information obtained.
1062:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                               FS_ERR_DEV_INVALID_UNIT_NBR    Device unit number is invalid.
1063:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                               FS_ERR_DEV_NOT_OPEN            Device is not open.
1064:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                               FS_ERR_DEV_NOT_PRESENT         Device is not present.
1065:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
1066:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** * Return(s)   : none.
1067:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
1068:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** * Note(s)     : (1) Tracking whether a device is open is not necessary, because this should ONLY be
1069:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                   called when a device is open.
1070:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** ***************************************************************************************************
1071:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** */
1072:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1073:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** static  void  FSDev_SD_SPI_Query (FS_DEV       *p_dev,
1074:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                   FS_DEV_INFO  *p_info,
1075:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                   FS_ERR       *p_err)
1076:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** {
  91              		.loc 1 1076 1 is_stmt 1 view -0
  92              		.cfi_startproc
  93              		@ args = 0, pretend = 0, frame = 0
  94              		@ frame_needed = 0, uses_anonymous_args = 0
  95              		@ link register save eliminated.
1077:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     FS_DEV_SD_INFO      *p_sd_info;
  96              		.loc 1 1077 5 view .LVU12
1078:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     FS_DEV_SD_SPI_DATA  *p_sd_spi_data;
  97              		.loc 1 1078 5 view .LVU13
1079:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1080:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1081:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     p_sd_spi_data   = (FS_DEV_SD_SPI_DATA *)p_dev->DataPtr;
  98              		.loc 1 1081 5 view .LVU14
  99              		.loc 1 1081 21 is_stmt 0 view .LVU15
 100 0000 406B     		ldr	r0, [r0, #52]
 101              	.LVL2:
1082:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     p_sd_info       = &p_sd_spi_data->Info;
 102              		.loc 1 1082 5 is_stmt 1 view .LVU16
1083:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1084:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     p_info->SecSize =  FS_DEV_SD_BLK_SIZE;
 103              		.loc 1 1084 5 view .LVU17
 104              		.loc 1 1084 21 is_stmt 0 view .LVU18
 105 0002 4FF40073 		mov	r3, #512
 106 0006 8B60     		str	r3, [r1, #8]
1085:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     p_info->Fixed   =  DEF_NO;
 107              		.loc 1 1085 5 is_stmt 1 view .LVU19
 108              		.loc 1 1085 21 is_stmt 0 view .LVU20
 109 0008 0023     		movs	r3, #0
 110 000a 0B73     		strb	r3, [r1, #12]
1086:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1087:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     switch (p_sd_info->BlkSize) {
 111              		.loc 1 1087 5 is_stmt 1 view .LVU21
 112              		.loc 1 1087 22 is_stmt 0 view .LVU22
 113 000c 8368     		ldr	r3, [r0, #8]
 114              		.loc 1 1087 5 view .LVU23
 115 000e B3F5806F 		cmp	r3, #1024
ARM GAS  /tmp/ccOtrZZk.s 			page 22


 116 0012 0DD0     		beq	.L8
 117 0014 B3F5006F 		cmp	r3, #2048
 118 0018 0ED0     		beq	.L9
 119 001a B3F5007F 		cmp	r3, #512
 120 001e 02D0     		beq	.L12
1088:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         case 512u:
1089:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****              p_info->Size = p_sd_info->NbrBlks;
1090:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****              break;
1091:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1092:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         case 1024u:
1093:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****              p_info->Size = p_sd_info->NbrBlks * 2u;
1094:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****              break;
1095:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1096:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         case 2048u:
1097:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****              p_info->Size = p_sd_info->NbrBlks * 4u;
1098:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****              break;
1099:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1100:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         default:
1101:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****              p_info->Size = 0u;
 121              		.loc 1 1101 14 is_stmt 1 view .LVU24
 122              		.loc 1 1101 27 is_stmt 0 view .LVU25
 123 0020 0023     		movs	r3, #0
 124 0022 4B60     		str	r3, [r1, #4]
1102:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****              break;
 125              		.loc 1 1102 14 is_stmt 1 view .LVU26
 126 0024 01E0     		b	.L11
 127              	.L12:
1089:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****              break;
 128              		.loc 1 1089 14 view .LVU27
1089:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****              break;
 129              		.loc 1 1089 38 is_stmt 0 view .LVU28
 130 0026 C368     		ldr	r3, [r0, #12]
1089:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****              break;
 131              		.loc 1 1089 27 view .LVU29
 132 0028 4B60     		str	r3, [r1, #4]
1090:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 133              		.loc 1 1090 14 is_stmt 1 view .LVU30
 134              	.L11:
1103:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     }
1104:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1105:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****    *p_err = FS_ERR_NONE;
 135              		.loc 1 1105 4 view .LVU31
 136              		.loc 1 1105 11 is_stmt 0 view .LVU32
 137 002a 0023     		movs	r3, #0
 138 002c 1380     		strh	r3, [r2]	@ movhi
1106:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** }
 139              		.loc 1 1106 1 view .LVU33
 140 002e 7047     		bx	lr
 141              	.L8:
1093:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****              break;
 142              		.loc 1 1093 14 is_stmt 1 view .LVU34
1093:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****              break;
 143              		.loc 1 1093 38 is_stmt 0 view .LVU35
 144 0030 C368     		ldr	r3, [r0, #12]
1093:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****              break;
 145              		.loc 1 1093 48 view .LVU36
 146 0032 5B00     		lsls	r3, r3, #1
ARM GAS  /tmp/ccOtrZZk.s 			page 23


1093:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****              break;
 147              		.loc 1 1093 27 view .LVU37
 148 0034 4B60     		str	r3, [r1, #4]
1094:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 149              		.loc 1 1094 14 is_stmt 1 view .LVU38
 150 0036 F8E7     		b	.L11
 151              	.L9:
1097:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****              break;
 152              		.loc 1 1097 14 view .LVU39
1097:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****              break;
 153              		.loc 1 1097 38 is_stmt 0 view .LVU40
 154 0038 C368     		ldr	r3, [r0, #12]
1097:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****              break;
 155              		.loc 1 1097 48 view .LVU41
 156 003a 9B00     		lsls	r3, r3, #2
1097:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****              break;
 157              		.loc 1 1097 27 view .LVU42
 158 003c 4B60     		str	r3, [r1, #4]
1098:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 159              		.loc 1 1098 14 is_stmt 1 view .LVU43
 160 003e F4E7     		b	.L11
 161              		.cfi_endproc
 162              	.LFE9:
 164              		.section	.text.FSDev_SD_SPI_RdByte,"ax",%progbits
 165              		.align	1
 166              		.syntax unified
 167              		.thumb
 168              		.thumb_func
 169              		.fpu fpv4-sp-d16
 171              	FSDev_SD_SPI_RdByte:
 172              	.LVL3:
 173              	.LFB23:
1107:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1108:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1109:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** /*
1110:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** ***************************************************************************************************
1111:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                                       FSDev_SD_SPI_IO_Ctrl()
1112:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
1113:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** * Description : Perform device I/O control operation.
1114:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
1115:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** * Argument(s) : p_dev       Pointer to device to control.
1116:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
1117:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *               opt         Control command.
1118:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
1119:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *               p_data      Buffer which holds data to be used for operation.
1120:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                              OR
1121:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                           Buffer in which data will be stored as a result of operation.
1122:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
1123:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *               p_err       Pointer to variable that will receive return the error code from this f
1124:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
1125:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                               FS_ERR_NONE                    Control operation performed successf
1126:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                               FS_ERR_DEV_INVALID_IO_CTRL     I/O control operation unknown to dri
1127:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                               FS_ERR_DEV_INVALID_UNIT_NBR    Device unit number is invalid.
1128:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                               FS_ERR_DEV_IO                  Device I/O error.
1129:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                               FS_ERR_DEV_NOT_OPEN            Device is not open.
1130:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                               FS_ERR_DEV_NOT_PRESENT         Device is not present.
1131:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                               FS_ERR_DEV_TIMEOUT             Device timeout.
ARM GAS  /tmp/ccOtrZZk.s 			page 24


1132:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
1133:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** * Return(s)   : none.
1134:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
1135:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** * Note(s)     : (1) Tracking whether a device is open is not necessary, because this should ONLY be
1136:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                   called when a device is open.
1137:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
1138:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *               (2) Defined I/O control operations are :
1139:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
1140:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                   (a) FS_DEV_IO_CTRL_REFRESH           Refresh device.
1141:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                   (b) FS_DEV_IO_CTRL_LOW_FMT           Low-level format device.      [*]
1142:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                   (c) FS_DEV_IO_CTRL_LOW_MOUNT         Low-level mount device.       [*]
1143:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                   (d) FS_DEV_IO_CTRL_LOW_UNMOUNT       Low-level unmount device.     [*]
1144:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                   (e) FS_DEV_IO_CTRL_LOW_COMPACT       Low-level compact device.     [*]
1145:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                   (f) FS_DEV_IO_CTRL_LOW_DEFRAG        Low-level defragment device.  [*]
1146:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                   (g) FS_DEV_IO_CTRL_SEC_RELEASE       Release data in sector.       [*]
1147:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                   (h) FS_DEV_IO_CTRL_PHY_RD            Read  physical device.        [*]
1148:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                   (i) FS_DEV_IO_CTRL_PHY_WR            Write physical device.        [*]
1149:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                   (j) FS_DEV_IO_CTRL_PHY_RD_PAGE       Read  physical device page.   [*]
1150:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                   (k) FS_DEV_IO_CTRL_PHY_WR_PAGE       Write physical device page.   [*]
1151:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                   (l) FS_DEV_IO_CTRL_PHY_ERASE_BLK     Erase physical device block.  [*]
1152:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                   (m) FS_DEV_IO_CTRL_PHY_ERASE_CHIP    Erase physical device.        [*]
1153:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
1154:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                   (n) FS_DEV_IO_CTRL_SD_QUERY          Get info about SD/MMC card.
1155:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                   (o) FS_DEV_IO_CTRL_SD_RD_CID         Read SD/MMC card Card ID register.
1156:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                   (p) FS_DEV_IO_CTRL_SD_RD_CSD         Read SD/MMC card Card-Specific Data regist
1157:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
1158:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                           [*] NOT SUPPORTED
1159:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** ***************************************************************************************************
1160:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** */
1161:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1162:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** static  void  FSDev_SD_SPI_IO_Ctrl (FS_DEV      *p_dev,
1163:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                     CPU_INT08U   opt,
1164:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                     void        *p_data,
1165:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                     FS_ERR      *p_err)
1166:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** {
1167:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     FS_DEV_SD_INFO      *p_sd_info;
1168:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     FS_DEV_SD_INFO      *p_sd_info_ctrl;
1169:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     FS_DEV_SD_SPI_DATA  *p_sd_spi_data;
1170:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     CPU_BOOLEAN          ok;
1171:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     CPU_BOOLEAN          chngd;
1172:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     CPU_BOOLEAN         *p_chngd;
1173:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1174:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1175:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     switch (opt) {
1176:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         case FS_DEV_IO_CTRL_REFRESH:                            /* -------------------- RE-OPEN DEV
1177:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****              p_chngd       = (CPU_BOOLEAN *)p_data;
1178:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****              p_sd_spi_data = (FS_DEV_SD_SPI_DATA *)p_dev->DataPtr;
1179:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****              chngd         = FSDev_SD_SPI_Refresh(p_sd_spi_data, p_err);
1180:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****             *p_chngd       = chngd;
1181:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****              break;
1182:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1183:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1184:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         case FS_DEV_IO_CTRL_SD_QUERY:                           /* ------------ GET INFO ABOUT SD/M
1185:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****              if (p_data == (void *)0) {                         /* Validate data ptr.              
1186:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                 *p_err = FS_ERR_NULL_PTR;
1187:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                  return;
1188:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****              }
ARM GAS  /tmp/ccOtrZZk.s 			page 25


1189:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                                 /* Validate dev init.              
1190:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****              p_sd_spi_data  = (FS_DEV_SD_SPI_DATA *)p_dev->DataPtr;
1191:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****              if (p_sd_spi_data->Init == DEF_NO) {
1192:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                  *p_err = FS_ERR_DEV_NOT_PRESENT;
1193:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                   return;
1194:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****              }
1195:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                                 /* Copy info.                      
1196:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****              p_sd_info                    = &p_sd_spi_data->Info;
1197:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****              p_sd_info_ctrl               = (FS_DEV_SD_INFO *)p_data;
1198:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1199:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****              p_sd_info_ctrl->BlkSize      = p_sd_info->BlkSize;
1200:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****              p_sd_info_ctrl->NbrBlks      = p_sd_info->NbrBlks;
1201:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****              p_sd_info_ctrl->ClkFreq      = p_sd_info->ClkFreq;
1202:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****              p_sd_info_ctrl->Timeout      = p_sd_info->Timeout;
1203:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****              p_sd_info_ctrl->CardType     = p_sd_info->CardType;
1204:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****              p_sd_info_ctrl->HighCapacity = p_sd_info->HighCapacity;
1205:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****              p_sd_info_ctrl->ManufID      = p_sd_info->ManufID;
1206:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****              p_sd_info_ctrl->OEM_ID       = p_sd_info->OEM_ID;
1207:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****              p_sd_info_ctrl->ProdSN       = p_sd_info->ProdSN;
1208:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****              Mem_Copy(p_sd_info_ctrl->ProdName, p_sd_info->ProdName, 7u);
1209:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****              p_sd_info_ctrl->ProdRev      = p_sd_info->ProdRev;
1210:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****              p_sd_info_ctrl->Date         = p_sd_info->Date;
1211:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****             *p_err = FS_ERR_NONE;
1212:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****              break;
1213:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1214:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1215:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         case FS_DEV_IO_CTRL_SD_RD_CID:                          /* --------------- READ CARD ID REG
1216:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****              if (p_data == (void *)0) {                         /* Validate data ptr.              
1217:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                 *p_err = FS_ERR_NULL_PTR;
1218:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                  return;
1219:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****              }
1220:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                                 /* Validate dev init.              
1221:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****              p_sd_spi_data  = (FS_DEV_SD_SPI_DATA *)p_dev->DataPtr;
1222:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****              if (p_sd_spi_data->Init == DEF_NO) {
1223:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                  *p_err = FS_ERR_DEV_NOT_PRESENT;
1224:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                   return;
1225:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****              }
1226:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1227:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                                 /* Rd CID reg.                     
1228:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****              FSDev_SD_SPI_BSP_SPI.Lock(p_sd_spi_data->UnitNbr);
1229:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 		     ok = FSDev_SD_SPI_SendCID(              p_sd_spi_data,
1230:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                        (CPU_INT08U *)p_data);
1231:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****              FSDev_SD_SPI_BSP_SPI.Unlock(p_sd_spi_data->UnitNbr);
1232:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1233:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****              if (ok == DEF_NO) {
1234:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                 *p_err = FS_ERR_DEV_IO;
1235:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                  return;
1236:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****              }
1237:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1238:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****             *p_err = FS_ERR_NONE;
1239:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****              break;
1240:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1241:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1242:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         case FS_DEV_IO_CTRL_SD_RD_CSD:                          /* --------- READ CARD-SPECIFIC DAT
1243:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****              if (p_data == (void *)0) {                         /* Validate data ptr.              
1244:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                 *p_err = FS_ERR_NULL_PTR;
1245:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                  return;
ARM GAS  /tmp/ccOtrZZk.s 			page 26


1246:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****              }
1247:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                                 /* Validate dev init.              
1248:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****              p_sd_spi_data  = (FS_DEV_SD_SPI_DATA *)p_dev->DataPtr;
1249:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****              if (p_sd_spi_data->Init == DEF_NO) {
1250:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                  *p_err = FS_ERR_DEV_NOT_PRESENT;
1251:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                   return;
1252:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****              }
1253:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1254:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                                 /* Rd CSD reg.                     
1255:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****              FSDev_SD_SPI_BSP_SPI.Lock(p_sd_spi_data->UnitNbr);
1256:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****              ok = FSDev_SD_SPI_SendCSD(              p_sd_spi_data,
1257:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                        (CPU_INT08U *)p_data);
1258:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****              FSDev_SD_SPI_BSP_SPI.Unlock(p_sd_spi_data->UnitNbr);
1259:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1260:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****              if (ok == DEF_NO) {
1261:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                 *p_err = FS_ERR_DEV_IO;
1262:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                  return;
1263:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****              }
1264:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1265:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****             *p_err = FS_ERR_NONE;
1266:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****              break;
1267:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1268:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1269:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         case FS_DEV_IO_CTRL_LOW_FMT:                            /* --------------- UNSUPPORTED I/O 
1270:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         case FS_DEV_IO_CTRL_LOW_UNMOUNT:
1271:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         case FS_DEV_IO_CTRL_LOW_MOUNT:
1272:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         case FS_DEV_IO_CTRL_LOW_COMPACT:
1273:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         case FS_DEV_IO_CTRL_LOW_DEFRAG:
1274:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         case FS_DEV_IO_CTRL_SEC_RELEASE:
1275:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         case FS_DEV_IO_CTRL_PHY_RD:
1276:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         case FS_DEV_IO_CTRL_PHY_WR:
1277:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         case FS_DEV_IO_CTRL_PHY_WR_PAGE:
1278:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         case FS_DEV_IO_CTRL_PHY_RD_PAGE:
1279:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         case FS_DEV_IO_CTRL_PHY_ERASE_BLK:
1280:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         case FS_DEV_IO_CTRL_PHY_ERASE_CHIP:
1281:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         default:
1282:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****             *p_err = FS_ERR_DEV_INVALID_IO_CTRL;
1283:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****              break;
1284:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     }
1285:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** }
1286:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1287:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1288:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** /*
1289:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** ***************************************************************************************************
1290:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** ***************************************************************************************************
1291:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                                           LOCAL FUNCTIONS
1292:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** ***************************************************************************************************
1293:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** ***************************************************************************************************
1294:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** */
1295:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1296:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** /*
1297:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** ***************************************************************************************************
1298:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                                       FSDev_SD_SPI_Refresh()
1299:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
1300:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** * Description : Refresh a device.
1301:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
1302:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** * Argument(s) : p_sd_spi_data   Pointer to SD SPI data.
ARM GAS  /tmp/ccOtrZZk.s 			page 27


1303:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
1304:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *               p_err           Pointer to variable that will receive the return error code from th
1305:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
1306:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                                   FS_ERR_NONE                    Device opened successfully.
1307:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                                   FS_ERR_DEV_INVALID_UNIT_NBR    Device unit number is invalid.
1308:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                                   FS_ERR_DEV_IO                  Device I/O error.
1309:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                                   FS_ERR_DEV_NOT_PRESENT         Device is not present.
1310:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                                   FS_ERR_DEV_TIMEOUT             Device timeout.
1311:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
1312:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** * Return(s)   : DEF_YES, if device has     changed.
1313:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *               DEF_NO,  if device has NOT changed.
1314:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
1315:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** * Note(s)     : (1) The initialization flow for a SD card is charted in [Ref 1] Figure 4-2.  Simila
1316:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                   the power-up sequence for a MMC card is given in Section 1.11 of [Ref 2].
1317:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
1318:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
1319:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                                                    POWER ON
1320:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                                                        |
1321:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                                                        |
1322:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                                                        v
1323:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                                                      CMD0
1324:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                                                        |
1325:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                                                        |
1326:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                               NO RESPONSE              v             CARD RETURNS RESPONSE
1327:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                                      +---------------CMD8---------------+
1328:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                                      |                                  |
1329:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                                      |                                  |
1330:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                                      v                                  v             NO
1331:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                 NO RESPONSE       ACMD41                            RESPONSE------------------>UN
1332:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *            +--------------------w/ HCS = 0<---------+                VALID?                      
1333:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *            |                         |              |                   |
1334:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *            |                         |              | BUSY              |
1335:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *            |                         v              |                   v
1336:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *            |                   CARD IS READY?-------+                 ACMD41
1337:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *            |                         |                     +------->w/ HCS = 1
1338:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *            |                         | YES                 |             |          TIMEOUT
1339:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *            |                         |                BUSY |             |          OR NO
1340:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *            |                         |                     |             v          RESPONSE
1341:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *            |                         |                     +-------CARD IS READY?------------->UN
1342:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *          CMD1<------------+          |                                   |                       
1343:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *            |              |          |                                   | YES
1344:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** * NO         |              | BUSY     |                                   |
1345:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** * RESP       v              |          |                                   v
1346:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *  +---CARD IS READY?-------+          |                                CMD58
1347:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *  |         |                         |                                   |
1348:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *  |         | YES                     |                                   |
1349:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *  v         |                         |                     NO            v             YES
1350:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** * UNUSABLE   |                         |               +----------- CCS IN RESPONSE? -----------+
1351:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *   CARD     |                         |               |                                        |
1352:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *            v                         v               v                                        v
1353:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *           MMC                  VER 1.x STD      VER 2.0+ STD                            VER 2.0+ 
1354:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *            |                   CAPACITY SD      CAPACITY SD                              CAPACITY
1355:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *            |                         |               |                                        |
1356:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *            |                         |               |                                        |
1357:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *            +-------------------------+---------------+----------------------------------------+
1358:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                                                      |
1359:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                                                      |
ARM GAS  /tmp/ccOtrZZk.s 			page 28


1360:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                                                      v
1361:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
1362:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** ***************************************************************************************************
1363:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** */
1364:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1365:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** static  CPU_BOOLEAN  FSDev_SD_SPI_Refresh (FS_DEV_SD_SPI_DATA  *p_sd_spi_data,
1366:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                            FS_ERR              *p_err)
1367:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** {
1368:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     CPU_INT08U       card_type;
1369:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     CPU_INT08U       resp_r1;
1370:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     CPU_INT08U       resp_reg[16];
1371:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     CPU_INT08U       retries;
1372:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     CPU_BOOLEAN      ok;
1373:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     CPU_BOOLEAN      init_prev;
1374:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     FS_QTY           unit_nbr;
1375:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     FS_DEV_SD_INFO  *p_sd_info;
1376:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     FS_DEV_SD_INFO   sd_info;
1377:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1378:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1379:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                                 /* ------------------- CHK DEV CHNG
1380:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     p_sd_info = &(p_sd_spi_data->Info);
1381:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     unit_nbr  = p_sd_spi_data->UnitNbr;
1382:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     if (p_sd_spi_data->Init == DEF_YES) {                       /* If dev already init'd ...       
1383:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FSDev_SD_ClrInfo(&sd_info);
1384:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1385:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FSDev_SD_SPI_BSP_SPI.Lock(unit_nbr);
1386:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         ok = FSDev_SD_SPI_SendCID( p_sd_spi_data,               /* ... rd CID reg        ...       
1387:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                   &resp_reg[0]);
1388:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FSDev_SD_SPI_BSP_SPI.Unlock(unit_nbr);
1389:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1390:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         if (ok == DEF_YES) {                                    /* ... parse CID info    ...       
1391:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****             (void)FSDev_SD_ParseCID( resp_reg,
1392:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                     &sd_info,
1393:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                      p_sd_info->CardType);
1394:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1395:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1396:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****             if ((sd_info.ManufID == p_sd_info->ManufID) &&      /* ... & if info is same ...       
1397:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                 (sd_info.OEM_ID  == p_sd_info->OEM_ID)  &&
1398:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                 (sd_info.ProdSN  == p_sd_info->ProdSN)) {
1399:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                *p_err = FS_ERR_NONE;                            /* ... dev has not chngd.          
1400:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                 return (DEF_NO);
1401:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****             }
1402:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         }
1403:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1404:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FSDev_SD_SPI_BSP_SPI.Close(unit_nbr);                   /* Uninit HW.                      
1405:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     }
1406:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1407:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1408:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1409:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                                 /* ---------------------- INIT HW -
1410:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     init_prev                = p_sd_spi_data->Init;             /* If init'd prev'ly, dev chngd.   
1411:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     p_sd_spi_data->Init      = DEF_NO;                          /* No longer init'd.               
1412:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     FSDev_SD_ClrInfo(p_sd_info);                                /* Clr old info.                   
1413:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1414:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     ok = FSDev_SD_SPI_BSP_SPI.Open(unit_nbr);                   /* Init HW.                        
1415:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     if (ok != DEF_OK) {                                         /* If HW could not be init'd ...   
1416:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****        *p_err = FS_ERR_DEV_INVALID_UNIT_NBR;                    /* ... rtn err.                    
ARM GAS  /tmp/ccOtrZZk.s 			page 29


1417:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         return (init_prev);
1418:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     }
1419:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1420:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     FSDev_SD_SPI_BSP_SPI.Lock(unit_nbr);
1421:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                                 /* Set clk to dflt clk.            
1422:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     FSDev_SD_SPI_BSP_SPI.SetClkFreq(unit_nbr, (CPU_INT32U)FS_DEV_SD_DFLT_CLK_SPD);
1423:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1424:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1425:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1426:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                                 /* -------------- SEND CMD0 TO RESE
1427:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     retries = 0u;
1428:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     resp_r1 = FS_DEV_SD_SPI_RESP_EMPTY;
1429:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     while ((retries  < FS_DEV_SD_SPI_CMD_TIMEOUT) &&
1430:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****            (resp_r1 != FS_DEV_SD_SPI_R1_IN_IDLE_STATE)) {
1431:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FS_DEV_SD_SPI_ENTER(unit_nbr);                          /* 'Enter' SPI access.             
1432:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FSDev_SD_SPI_WaitClks(unit_nbr, (CPU_INT08U)20);        /* Send empty clks.                
1433:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1434:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         resp_r1 = FSDev_SD_SPI_Cmd(p_sd_spi_data,               /* Perform SD CMD0.                
1435:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                    FS_DEV_SD_CMD_GO_IDLE_STATE,
1436:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                    0u);
1437:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1438:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FS_DEV_SD_SPI_EXIT(unit_nbr);                           /* 'Exit' SPI access.              
1439:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1440:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         if (resp_r1 != FS_DEV_SD_SPI_R1_IN_IDLE_STATE) {
1441:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****             FS_OS_Dly_ms(2u);
1442:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****             retries++;
1443:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         }
1444:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     }
1445:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1446:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     if (resp_r1 != FS_DEV_SD_SPI_R1_IN_IDLE_STATE) {            /* If card never responded ...     
1447:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FSDev_SD_SPI_BSP_SPI.Unlock(unit_nbr);
1448:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FSDev_SD_SPI_BSP_SPI.Close(unit_nbr);
1449:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****        *p_err = FS_ERR_DEV_IO;                                  /* ... rtn err.                    
1450:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         return (init_prev);
1451:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     }
1452:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1453:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     FS_OS_Dly_ms(100u);
1454:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1455:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1456:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1457:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                                 /* ---------------- DETERMINE CARD 
1458:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     card_type = FSDev_SD_SPI_MakeRdy(p_sd_spi_data);            /* Make card rdy & determine card t
1459:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     if (card_type == FS_DEV_SD_CARDTYPE_NONE) {                 /* If card type NOT determined ... 
1460:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FSDev_SD_SPI_BSP_SPI.Unlock(unit_nbr);
1461:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FSDev_SD_SPI_BSP_SPI.Close(unit_nbr);
1462:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****        *p_err = FS_ERR_DEV_IO;                                  /* ... rtn err.                    
1463:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         return (init_prev);
1464:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     }
1465:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1466:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     p_sd_info->CardType = card_type;
1467:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1468:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     if ((card_type == FS_DEV_SD_CARDTYPE_SD_V2_0_HC) ||
1469:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         (card_type == FS_DEV_SD_CARDTYPE_MMC_HC)) {
1470:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         p_sd_info->HighCapacity = DEF_YES;
1471:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     }
1472:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1473:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
ARM GAS  /tmp/ccOtrZZk.s 			page 30


1474:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1475:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                                 /* -------------------- RD CSD REG 
1476:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     ok = FSDev_SD_SPI_SendCSD( p_sd_spi_data,                   /* Get CSD reg from card.          
1477:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                               &resp_reg[0]);
1478:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     if (ok != DEF_OK) {
1479:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FSDev_SD_SPI_BSP_SPI.Unlock(unit_nbr);
1480:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FSDev_SD_SPI_BSP_SPI.Close(unit_nbr);
1481:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****        *p_err = FS_ERR_DEV_IO;
1482:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         return (init_prev);
1483:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     }
1484:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1485:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     ok = FSDev_SD_ParseCSD(resp_reg,                            /* Parse CSD info.                 
1486:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                            p_sd_info,
1487:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                            card_type);
1488:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     if (ok != DEF_OK) {
1489:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FSDev_SD_SPI_BSP_SPI.Unlock(unit_nbr);
1490:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FSDev_SD_SPI_BSP_SPI.Close(unit_nbr);
1491:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****        *p_err = FS_ERR_DEV_IO;
1492:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         return (init_prev);
1493:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     }
1494:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1495:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1496:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                                 /* Set clk freq.                   
1497:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     FSDev_SD_SPI_BSP_SPI.SetClkFreq(unit_nbr, p_sd_info->ClkFreq);
1498:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1499:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1500:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1501:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                                 /* -------------------- RD CID REG 
1502:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     ok = FSDev_SD_SPI_SendCID( p_sd_spi_data,                   /* Get CID reg from card.          
1503:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                               &resp_reg[0]);
1504:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1505:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     if (ok != DEF_OK) {
1506:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FSDev_SD_SPI_BSP_SPI.Unlock(unit_nbr);
1507:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FSDev_SD_SPI_BSP_SPI.Close(unit_nbr);
1508:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****        *p_err = FS_ERR_DEV_IO;
1509:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         return (init_prev);
1510:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     }
1511:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1512:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     p_sd_spi_data->Init = DEF_YES;
1513:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1514:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     (void)FSDev_SD_ParseCID(resp_reg,                           /* Parse CID info.                 
1515:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                             p_sd_info,
1516:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                             card_type);
1517:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1518:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1519:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1520:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                                 /* -------------------- SET BLK LEN
1521:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     resp_r1 = FSDev_SD_SPI_CmdR1(p_sd_spi_data,                 /* Perform CMD16.                  
1522:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                  FS_DEV_SD_CMD_SET_BLOCKLEN,
1523:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                  FS_DEV_SD_BLK_SIZE);
1524:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1525:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     if (resp_r1 != FS_DEV_SD_SPI_R1_NONE) {
1526:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FS_TRACE_INFO(("FSDev_SD_SPI_Refresh(): Could not set block length: error: %02X.\r\n", resp
1527:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     }
1528:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1529:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1530:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
ARM GAS  /tmp/ccOtrZZk.s 			page 31


1531:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1532:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** #if (FS_DEV_SD_SPI_CFG_CRC_EN == DEF_ENABLED)                   /* -------------- ENABLE CRC VERIFI
1533:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     resp_r1 = FSDev_SD_SPI_CmdR1(p_sd_spi_data,
1534:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                  FS_DEV_SD_CMD_CRC_ON_OFF,
1535:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                  FS_DEV_SD_CMD59_CRC_OPT);
1536:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1537:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     if (resp_r1 != FS_DEV_SD_SPI_R1_NONE) {
1538:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FS_TRACE_INFO(("FSDev_SD_SPI_Refresh(): Could not enable CRC: error: %02X.\r\n", resp_r1));
1539:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     }
1540:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** #endif
1541:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1542:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     FSDev_SD_SPI_BSP_SPI.Unlock(unit_nbr);
1543:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1544:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1545:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1546:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                                 /* ----------------- OUTPUT TRACE I
1547:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** #if (FS_TRACE_LEVEL >= TRACE_LEVEL_INFO)
1548:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     FSDev_SD_TraceInfo(p_sd_info);
1549:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** #endif
1550:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1551:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****    *p_err = FS_ERR_NONE;
1552:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     return (DEF_YES);                                           /* Always chngd if opened.         
1553:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** }
1554:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1555:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1556:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** /*
1557:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** ***************************************************************************************************
1558:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                                       FSDev_SD_SPI_MakeRdy()
1559:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
1560:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** * Description : Move card into 'ready' state (& get card type).
1561:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
1562:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** * Argument(s) : p_sd_spi_data   Pointer to SD SPI data.
1563:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
1564:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** * Return(s)   : Card type :
1565:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
1566:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                   FS_DEV_SD_SPI_CARDTYPE_NONE          Card type could not be determined.
1567:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                   FS_DEV_SD_SPI_CARDTYPE_SD_V1_X       SD card v1.x.
1568:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                   FS_DEV_SD_SPI_CARDTYPE_SD_V2_0       SD card v2.0, standard capacity.
1569:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                   FS_DEV_SD_SPI_CARDTYPE_SD_V2_0_HC    SD card v2.0, high capacity.
1570:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                   FS_DEV_SD_SPI_CARDTYPE_MMC           MMC, standard capacity.
1571:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                   FS_DEV_SD_SPI_CARDTYPE_MMC_HC        MMC, high capacity.
1572:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
1573:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** * Note(s)     : (1) #### Add voltage range check.
1574:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** ***************************************************************************************************
1575:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** */
1576:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1577:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** static  CPU_INT08U  FSDev_SD_SPI_MakeRdy (FS_DEV_SD_SPI_DATA  *p_sd_spi_data)
1578:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** {
1579:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     CPU_INT08U  card_type;
1580:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     CPU_INT08U  resp_r1;
1581:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     CPU_INT08U  resp_r3_7[4];
1582:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     CPU_INT08U  retries;
1583:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1584:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1585:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                                 /* ------------- SEND CMD8 TO GET C
1586:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     resp_r1 = FSDev_SD_SPI_CmdR3_7(p_sd_spi_data,               /* Perform CMD8.                   
1587:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                    FS_DEV_SD_CMD_SEND_IF_COND,
ARM GAS  /tmp/ccOtrZZk.s 			page 32


1588:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                    FS_DEV_SD_CMD8_VHS_27_36_V | FS_DEV_SD_CMD8_CHK_PATTERN,
1589:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                    resp_r3_7);
1590:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1591:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                                 /* If card does resp, v2.0 card.   
1592:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     card_type = FS_DEV_SD_CARDTYPE_SD_V1_X;
1593:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     if (resp_r1 == FS_DEV_SD_SPI_R1_IN_IDLE_STATE) {
1594:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         if (resp_r3_7[3] == FS_DEV_SD_CMD8_CHK_PATTERN) {
1595:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****             card_type = FS_DEV_SD_CARDTYPE_SD_V2_0;
1596:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         }
1597:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     }
1598:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1599:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1600:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1601:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                                 /* ---------- SEND ACMD41 TO GET CA
1602:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     retries = 0u;
1603:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     resp_r1 = FS_DEV_SD_SPI_RESP_EMPTY;
1604:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     while (retries < FS_DEV_SD_SPI_CMD_TIMEOUT) {
1605:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         resp_r1 = FSDev_SD_SPI_AppCmdR1(p_sd_spi_data,          /* Perform ACMD41.                 
1606:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                         FS_DEV_SD_ACMD_SD_SEND_OP_COND,
1607:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                         FS_DEV_SD_ACMD41_HCS);
1608:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1609:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         if (resp_r1 == FS_DEV_SD_SPI_R1_NONE) {
1610:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****             break;
1611:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         }
1612:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1613:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FS_OS_Dly_ms(2u);
1614:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1615:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         retries++;
1616:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     }
1617:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1618:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1619:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1620:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                                 /* ------------- SEND CMD1 (FOR MMC
1621:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     if (resp_r1 != FS_DEV_SD_SPI_R1_NONE) {
1622:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         retries = 0u;
1623:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         while (retries < FS_DEV_SD_SPI_CMD_TIMEOUT) {
1624:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****             resp_r1 = FSDev_SD_SPI_CmdR1(p_sd_spi_data,
1625:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                          FS_DEV_SD_CMD_SEND_OP_COND,
1626:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                          0u);
1627:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1628:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****             if (resp_r1 == FS_DEV_SD_SPI_R1_NONE) {
1629:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                 break;
1630:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****             }
1631:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1632:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****             FS_OS_Dly_ms(2u);
1633:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****             retries++;
1634:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         }
1635:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1636:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         if (resp_r1 != FS_DEV_SD_SPI_R1_NONE) {
1637:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****             return (FS_DEV_SD_CARDTYPE_NONE);
1638:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         }
1639:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1640:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         card_type = FS_DEV_SD_CARDTYPE_MMC;
1641:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     }
1642:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1643:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1644:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                                 /* ------------ SEND CMD58 TO GET C
ARM GAS  /tmp/ccOtrZZk.s 			page 33


1645:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     retries = 0u;
1646:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     while (retries < FS_DEV_SD_SPI_CMD_TIMEOUT) {
1647:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         resp_r1 = FSDev_SD_SPI_CmdR3_7(p_sd_spi_data,           /* Perform CMD58.                  
1648:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                        FS_DEV_SD_CMD_READ_OCR,
1649:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                        DEF_BIT_30,
1650:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                        resp_r3_7);
1651:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1652:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         if (resp_r1 == FS_DEV_SD_SPI_R1_NONE) {
1653:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****             if (DEF_BIT_IS_SET(resp_r3_7[0], (FS_DEV_SD_OCR_BUSY >> (3u * DEF_OCTET_NBR_BITS))) == 
1654:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                                 /* Chk for HC card.                
1655:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                 if (DEF_BIT_IS_SET(resp_r3_7[0], (FS_DEV_SD_OCR_CCS >> (3u * DEF_OCTET_NBR_BITS))) 
1656:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                     if (card_type == FS_DEV_SD_CARDTYPE_SD_V2_0) {
1657:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                         card_type =  FS_DEV_SD_CARDTYPE_SD_V2_0_HC;
1658:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                     } else {
1659:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                         if (card_type == FS_DEV_SD_CARDTYPE_MMC) {
1660:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                             card_type =  FS_DEV_SD_CARDTYPE_MMC_HC;
1661:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                         }
1662:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                     }
1663:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                 }
1664:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                 break;
1665:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****             }
1666:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         }
1667:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1668:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         retries++;
1669:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     }
1670:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1671:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1672:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     return (card_type);
1673:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** }
1674:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1675:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1676:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** /*
1677:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** ***************************************************************************************************
1678:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                                         FSDev_SD_SPI_Cmd()
1679:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
1680:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** * Description : Perform command & get response byte.
1681:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
1682:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** * Argument(s) : p_sd_spi_data   Pointer to SD SPI data.
1683:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
1684:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *               cmd             Command index.
1685:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
1686:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *               arg             Command argument.
1687:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
1688:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** * Return(s)   : Command response.
1689:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
1690:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** * Note(s)     : none.
1691:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** ***************************************************************************************************
1692:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** */
1693:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1694:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** static  CPU_INT08U  FSDev_SD_SPI_Cmd (FS_DEV_SD_SPI_DATA  *p_sd_spi_data,
1695:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                       CPU_INT08U           cmd,
1696:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                       CPU_INT32U           arg)
1697:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** {
1698:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     CPU_INT08U  cmd_pkt[6];
1699:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     CPU_INT08U  chk_sum;
1700:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     CPU_INT16U  timeout;
1701:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     CPU_INT08U  resp;
ARM GAS  /tmp/ccOtrZZk.s 			page 34


1702:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1703:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1704:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1705:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                                 /* --------------------- FORM CMD -
1706:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     cmd_pkt[0] =  DEF_BIT_06 | cmd;
1707:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     cmd_pkt[1] = (CPU_INT08U)(arg >> (3u * DEF_OCTET_NBR_BITS)) & DEF_OCTET_MASK;
1708:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     cmd_pkt[2] = (CPU_INT08U)(arg >> (2u * DEF_OCTET_NBR_BITS)) & DEF_OCTET_MASK;
1709:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     cmd_pkt[3] = (CPU_INT08U)(arg >> (1u * DEF_OCTET_NBR_BITS)) & DEF_OCTET_MASK;
1710:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     cmd_pkt[4] = (CPU_INT08U)(arg >> (0u * DEF_OCTET_NBR_BITS)) & DEF_OCTET_MASK;
1711:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1712:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     chk_sum    = FSDev_SD_ChkSumCalc_7Bit(&cmd_pkt[0], 5u);
1713:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1714:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     cmd_pkt[5] = (CPU_INT08U)(chk_sum << 1) | DEF_BIT_00;
1715:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1716:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1717:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                                 /* ---------------------- WR CMD --
1718:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     FSDev_SD_SPI_BSP_SPI.Wr( p_sd_spi_data->UnitNbr,
1719:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                             &cmd_pkt[0],
1720:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                              6u);
1721:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1722:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1723:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                                 /* ---------------------- RD RESP -
1724:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     timeout = 0u;
1725:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     while (timeout < FS_DEV_SD_SPI_CMD_TIMEOUT) {
1726:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         resp = FSDev_SD_SPI_RdByte(p_sd_spi_data->UnitNbr);     /* Rd resp byte.                   
1727:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1728:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         if (DEF_BIT_IS_CLR(resp, DEF_BIT_07) == DEF_YES) {      /* Top bit of resp MUST be clr.    
1729:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****             break;
1730:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         }
1731:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1732:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         timeout++;
1733:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     }
1734:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1735:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     if (timeout == FS_DEV_SD_SPI_CMD_TIMEOUT) {                 /* If timeout, rtn err.            
1736:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FS_DEV_SD_SPI_ERR_CMD_RESP_TIMEOUT_CTR_INC(p_sd_spi_data);
1737:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         return (FS_DEV_SD_SPI_RESP_EMPTY);
1738:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     }
1739:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1740:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** #if (FS_CFG_CTR_ERR_EN == DEF_ENABLED)
1741:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     if (cmd != FS_DEV_SD_CMD_STOP_TRANSMISSION) {
1742:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         if (DEF_BIT_IS_SET(resp, FS_DEV_SD_SPI_R1_ERASE_RESET) == DEF_YES) {
1743:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****             FS_DEV_SD_SPI_ERR_CMD_RESP_RESET_ERASE_CTR_INC(p_sd_spi_data);
1744:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         }
1745:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1746:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         if (DEF_BIT_IS_SET(resp, FS_DEV_SD_SPI_R1_ILLEGAL_COMMAND) == DEF_YES) {
1747:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****             FS_DEV_SD_SPI_ERR_CMD_RESP_ILLEGAL_CMD_CTR_INC(p_sd_spi_data);
1748:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         }
1749:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1750:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         if (DEF_BIT_IS_SET(resp, FS_DEV_SD_SPI_R1_COM_CRC_ERROR) == DEF_YES) {
1751:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****             FS_DEV_SD_SPI_ERR_CMD_RESP_COMM_CRC_INC(p_sd_spi_data);
1752:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         }
1753:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1754:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         if (DEF_BIT_IS_SET(resp, FS_DEV_SD_SPI_R1_ERASE_SEQUENCE_ERROR) == DEF_YES) {
1755:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****             FS_DEV_SD_SPI_ERR_CMD_RESP_SEQ_ERASE_CTR_INC(p_sd_spi_data);
1756:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         }
1757:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1758:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         if (DEF_BIT_IS_SET(resp, FS_DEV_SD_SPI_R1_ADDRESS_ERROR) == DEF_YES) {
ARM GAS  /tmp/ccOtrZZk.s 			page 35


1759:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****             FS_DEV_SD_SPI_ERR_CMD_RESP_ADDR_CTR_INC(p_sd_spi_data);
1760:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         }
1761:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1762:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         if (DEF_BIT_IS_SET(resp, FS_DEV_SD_SPI_R1_PARAMETER_ERROR) == DEF_YES) {
1763:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****             FS_DEV_SD_SPI_ERR_CMD_RESP_PARAM_CTR_INC(p_sd_spi_data);
1764:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         }
1765:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     }
1766:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** #endif
1767:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1768:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     return (resp);
1769:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** }
1770:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1771:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1772:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** /*
1773:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** ***************************************************************************************************
1774:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                                        FSDev_SD_SPI_CmdR1()
1775:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
1776:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** * Description : Perform command & get R1 response.
1777:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
1778:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** * Argument(s) : p_sd_spi_data   Pointer to SD SPI data.
1779:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
1780:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *               cmd             Command index.
1781:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
1782:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *               arg             Command argument.
1783:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
1784:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** * Return(s)   : R1 response.
1785:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
1786:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** * Note(s)     : none.
1787:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** ***************************************************************************************************
1788:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** */
1789:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1790:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** static  CPU_INT08U  FSDev_SD_SPI_CmdR1 (FS_DEV_SD_SPI_DATA  *p_sd_spi_data,
1791:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                         CPU_INT08U           cmd,
1792:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                         CPU_INT32U           arg)
1793:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** {
1794:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     CPU_INT08U  resp_r1;
1795:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1796:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1797:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     FS_DEV_SD_SPI_ENTER(p_sd_spi_data->UnitNbr);
1798:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     resp_r1 = FSDev_SD_SPI_Cmd(p_sd_spi_data,                   /* Get 1st resp byte.              
1799:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                cmd,
1800:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                arg);
1801:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     FS_DEV_SD_SPI_EXIT(p_sd_spi_data->UnitNbr);
1802:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1803:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1804:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     return (resp_r1);
1805:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** }
1806:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1807:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1808:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** /*
1809:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** ***************************************************************************************************
1810:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                                       FSDev_SD_SPI_CmdR3_7()
1811:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
1812:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** * Description : Perform command & get R3 or R7 response.
1813:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
1814:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** * Argument(s) : p_sd_spi_data   Pointer to SD SPI data.
1815:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
ARM GAS  /tmp/ccOtrZZk.s 			page 36


1816:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *               cmd             Command index.
1817:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
1818:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *               arg             Command argument.
1819:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
1820:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *               resp            Buffer in which response will be stored.
1821:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
1822:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** * Return(s)   : R1 response.
1823:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
1824:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** * Note(s)     : none.
1825:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** ***************************************************************************************************
1826:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** */
1827:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1828:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** static  CPU_INT08U  FSDev_SD_SPI_CmdR3_7 (FS_DEV_SD_SPI_DATA  *p_sd_spi_data,
1829:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                           CPU_INT08U           cmd,
1830:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                           CPU_INT32U           arg,
1831:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                           CPU_INT08U           resp[])
1832:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** {
1833:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     CPU_INT08U  resp_r1;
1834:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1835:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1836:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     FS_DEV_SD_SPI_ENTER(p_sd_spi_data->UnitNbr);                /* 'Enter' SPI access.             
1837:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1838:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     resp_r1 = FSDev_SD_SPI_Cmd(p_sd_spi_data,                   /* Get 1st resp byte.              
1839:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                cmd,
1840:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                arg);
1841:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1842:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     if ((resp_r1 != FS_DEV_SD_SPI_R1_NONE) &&
1843:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         (resp_r1 != FS_DEV_SD_SPI_R1_IN_IDLE_STATE)) {
1844:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FS_DEV_SD_SPI_EXIT(p_sd_spi_data->UnitNbr);             /* 'Exit' SPI access.              
1845:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         return (resp_r1);
1846:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     }
1847:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1848:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     FSDev_SD_SPI_BSP_SPI.Rd(p_sd_spi_data->UnitNbr,             /* Rd rest of resp.                
1849:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                             resp,
1850:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                             4u);
1851:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1852:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     FS_DEV_SD_SPI_EXIT(p_sd_spi_data->UnitNbr);                 /* 'Exit' SPI access.              
1853:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     return (resp_r1);
1854:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** }
1855:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1856:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1857:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** /*
1858:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** ***************************************************************************************************
1859:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                                       FSDev_SD_SPI_AppCmdR1()
1860:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
1861:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** * Description : Perform application-specific command & get R1 response.
1862:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
1863:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** * Argument(s) : p_sd_spi_data   Pointer to SD SPI data.
1864:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
1865:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *               acmd            Application-specific command index.
1866:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
1867:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *               arg             Command argument.
1868:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
1869:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** * Return(s)   : Command response.
1870:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
1871:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** * Note(s)     : none.
1872:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** ***************************************************************************************************
ARM GAS  /tmp/ccOtrZZk.s 			page 37


1873:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** */
1874:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1875:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** static  CPU_INT08U  FSDev_SD_SPI_AppCmdR1 (FS_DEV_SD_SPI_DATA  *p_sd_spi_data,
1876:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                            CPU_INT08U           acmd,
1877:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                            CPU_INT32U           arg)
1878:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** {
1879:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     CPU_INT08U  resp_r1;
1880:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1881:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1882:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     FS_DEV_SD_SPI_ENTER(p_sd_spi_data->UnitNbr);                /* 'Enter' SPI access.             
1883:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1884:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     resp_r1 = FSDev_SD_SPI_Cmd(p_sd_spi_data,                   /* Next cmd is app cmd.            
1885:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                FS_DEV_SD_CMD_APP_CMD,
1886:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                0u);
1887:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1888:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     if ((resp_r1 != FS_DEV_SD_SPI_R1_NONE) &&
1889:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         (resp_r1 != FS_DEV_SD_SPI_R1_IN_IDLE_STATE)) {
1890:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FS_DEV_SD_SPI_EXIT(p_sd_spi_data->UnitNbr);             /* 'Exit' SPI access.              
1891:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         return (resp_r1);
1892:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     }
1893:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1894:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     FSDev_SD_SPI_WaitClks(p_sd_spi_data->UnitNbr, 1u);          /* Send empty clk.                 
1895:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1896:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     resp_r1 = FSDev_SD_SPI_Cmd(p_sd_spi_data,                   /* Send app cmd.                   
1897:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                acmd,
1898:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                arg);
1899:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1900:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     FS_DEV_SD_SPI_EXIT(p_sd_spi_data->UnitNbr);                 /* 'Exit' SPI access.              
1901:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     return (resp_r1);
1902:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** }
1903:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1904:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1905:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** /*
1906:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** ***************************************************************************************************
1907:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                                        FSDev_SD_SPI_RdData()
1908:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
1909:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** * Description : Execute command & read data block from card.
1910:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
1911:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** * Argument(s) : p_sd_spi_data   Pointer to SD SPI data.
1912:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
1913:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *               cmd             Command index.
1914:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
1915:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *               arg             Command argument.
1916:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
1917:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *               p_dest          Pointer to destination buffer.
1918:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
1919:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *               size            Size of data block to be read, in octets.
1920:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
1921:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** * Return(s)   : DEF_OK   if the data was read.
1922:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *               DEF_FAIL otherwise.
1923:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
1924:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** * Note(s)     : none.
1925:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** ***************************************************************************************************
1926:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** */
1927:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1928:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** static  CPU_BOOLEAN  FSDev_SD_SPI_RdData (FS_DEV_SD_SPI_DATA  *p_sd_spi_data,
1929:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                           CPU_INT08U           cmd,
ARM GAS  /tmp/ccOtrZZk.s 			page 38


1930:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                           CPU_INT32U           arg,
1931:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                           CPU_INT08U          *p_dest,
1932:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                           CPU_INT32U           size)
1933:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** {
1934:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     CPU_INT08U  crc_buf[2];
1935:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** #if (FS_DEV_SD_SPI_CFG_CRC_EN == DEF_ENABLED)
1936:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     CPU_INT16U  crc;
1937:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     CPU_INT16U  crc_chk;
1938:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** #endif
1939:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     CPU_INT08U  resp_r1;
1940:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     CPU_INT08U  token;
1941:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1942:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1943:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     FS_DEV_SD_SPI_ENTER(p_sd_spi_data->UnitNbr);                /* 'Enter' SPI access.             
1944:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1945:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     resp_r1 = FSDev_SD_SPI_Cmd(p_sd_spi_data,                   /* Perform send CSD command.       
1946:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                cmd,
1947:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                arg);
1948:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1949:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     if (resp_r1 != FS_DEV_SD_SPI_R1_NONE) {
1950:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FS_DEV_SD_SPI_EXIT(p_sd_spi_data->UnitNbr);             /* 'Exit' SPI access.              
1951:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FS_TRACE_DBG(("FSDev_SD_SPI_RdData(): Failed to rd card: cmd err: %02X.\r\n", resp_r1));
1952:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         return (DEF_FAIL);
1953:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     }
1954:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1955:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     token = FSDev_SD_SPI_WaitForStart(p_sd_spi_data->UnitNbr);  /* Wait for start token of data blo
1956:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1957:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     if (token != FS_DEV_SD_SPI_TOKEN_START_BLK) {
1958:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FS_DEV_SD_SPI_EXIT(p_sd_spi_data->UnitNbr);             /* 'Exit' SPI access.              
1959:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FS_TRACE_DBG(("FSDev_SD_SPI_RdData(): Failed to rd card: start token not received.\r\n"));
1960:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         return (DEF_FAIL);
1961:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     }
1962:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1963:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     FSDev_SD_SPI_BSP_SPI.Rd(p_sd_spi_data->UnitNbr,             /* Rd rest of resp.                
1964:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                             p_dest,
1965:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                             size);
1966:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1967:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     FSDev_SD_SPI_BSP_SPI.Rd( p_sd_spi_data->UnitNbr,            /* Rd CRC ...                      
1968:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                             &crc_buf[0],
1969:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                              2u);
1970:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1971:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** #if (FS_DEV_SD_SPI_CFG_CRC_EN == DEF_ENABLED)
1972:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     crc     = MEM_VAL_GET_INT16U_BIG((void *)&crc_buf[0]);      /* ... & chk CRC.                  
1973:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     crc_chk = FSDev_SD_ChkSumCalc_16Bit(p_dest, size);
1974:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1975:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     if (crc != crc_chk) {
1976:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FS_DEV_SD_SPI_EXIT(p_sd_spi_data->UnitNbr);             /* 'Exit' SPI access.              
1977:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FS_TRACE_DBG(("FSDev_SD_SPI_RdData(): CRC chk failed: %02X != %02X.\r\n", crc, crc_chk));
1978:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         return (DEF_NO);
1979:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     }
1980:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** #endif
1981:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1982:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     FS_DEV_SD_SPI_EXIT(p_sd_spi_data->UnitNbr);                 /* 'Exit' SPI access.              
1983:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     return (DEF_OK);
1984:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** }
1985:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
1986:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
ARM GAS  /tmp/ccOtrZZk.s 			page 39


1987:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** /*
1988:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** ***************************************************************************************************
1989:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                                     FSDev_SD_SPI_RdDataMulti()
1990:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
1991:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** * Description : Execute command & read multiple data blocks from card.
1992:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
1993:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** * Argument(s) : p_sd_spi_data   Pointer to SD SPI data.
1994:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
1995:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *               cmd             Command index.
1996:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
1997:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *               arg             Command argument.
1998:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
1999:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *               p_dest          Pointer to destination buffer.
2000:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
2001:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *               size            Size of each data block to be read, in octets.
2002:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
2003:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *               cnt             Number of data blocks to be read.
2004:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
2005:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** * Return(s)   : DEF_OK   if the data was read.
2006:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *               DEF_FAIL otherwise.
2007:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
2008:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** * Note(s)     : none.
2009:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** ***************************************************************************************************
2010:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** */
2011:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
2012:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** static  CPU_BOOLEAN  FSDev_SD_SPI_RdDataMulti (FS_DEV_SD_SPI_DATA  *p_sd_spi_data,
2013:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                CPU_INT08U           cmd,
2014:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                CPU_INT32U           arg,
2015:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                CPU_INT08U          *p_dest,
2016:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                CPU_INT32U           size,
2017:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                CPU_INT32U           cnt)
2018:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** {
2019:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     CPU_INT08U  crc_buf[2];
2020:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** #if (FS_DEV_SD_SPI_CFG_CRC_EN == DEF_ENABLED)
2021:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     CPU_INT16U  crc;
2022:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     CPU_INT16U  crc_chk;
2023:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** #endif
2024:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     CPU_INT08U  resp_r1;
2025:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     CPU_INT08U  token;
2026:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
2027:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
2028:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     FS_DEV_SD_SPI_ENTER(p_sd_spi_data->UnitNbr);                /* 'Enter' SPI access.             
2029:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
2030:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     resp_r1 = FSDev_SD_SPI_Cmd(p_sd_spi_data,                   /* Perform send CSD command.       
2031:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                cmd,
2032:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                arg);
2033:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
2034:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     if (resp_r1 != FS_DEV_SD_SPI_R1_NONE) {
2035:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FS_DEV_SD_SPI_EXIT(p_sd_spi_data->UnitNbr);             /* 'Exit' SPI access.              
2036:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FS_TRACE_DBG(("FSDev_SD_SPI_RdDataMulti(): Failed to rd card: cmd err: %02X.\r\n", resp_r1)
2037:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         return (DEF_FAIL);
2038:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     }
2039:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
2040:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     while (cnt > 0u) {
2041:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                                 /* Wait for start token of data blo
2042:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         token = FSDev_SD_SPI_WaitForStart(p_sd_spi_data->UnitNbr);
2043:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
ARM GAS  /tmp/ccOtrZZk.s 			page 40


2044:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         if (token != FS_DEV_SD_SPI_TOKEN_START_BLK) {
2045:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****             FS_DEV_SD_SPI_EXIT(p_sd_spi_data->UnitNbr);         /* 'Exit' SPI access.              
2046:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****             FS_TRACE_DBG(("FSDev_SD_SPI_RdDataMulti(): Failed to rd card: start token not received.
2047:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****             return (DEF_FAIL);
2048:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         }
2049:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
2050:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FSDev_SD_SPI_BSP_SPI.Rd(p_sd_spi_data->UnitNbr,         /* Rd rest of resp.                
2051:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                 p_dest,
2052:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                 size);
2053:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
2054:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FSDev_SD_SPI_BSP_SPI.Rd( p_sd_spi_data->UnitNbr,        /* Rd CRC ...                      
2055:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                 &crc_buf[0],
2056:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                  2u);
2057:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
2058:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** #if (FS_DEV_SD_SPI_CFG_CRC_EN == DEF_ENABLED)
2059:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         crc     = MEM_VAL_GET_INT16U_BIG((void *)&crc_buf[0]);
2060:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         crc_chk = FSDev_SD_ChkSumCalc_16Bit(p_dest, size);      /* ... & chk CRC.                  
2061:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
2062:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         if (crc != crc_chk) {
2063:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****             FS_DEV_SD_SPI_EXIT(p_sd_spi_data->UnitNbr);         /* 'Exit' SPI access.              
2064:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****             FS_TRACE_DBG(("FSDev_SD_SPI_RdDataMult(): CRC chk failed: %02X != %02X.\r\n", crc, crc_
2065:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****             return (DEF_NO);
2066:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         }
2067:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** #endif
2068:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
2069:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         p_dest += size;
2070:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         cnt--;
2071:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     }
2072:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
2073:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     (void)FSDev_SD_SPI_Cmd(p_sd_spi_data,                       /* Perform stop transmission comman
2074:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                            FS_DEV_SD_CMD_STOP_TRANSMISSION,
2075:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                            0u);
2076:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
2077:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     (void)FSDev_SD_SPI_WaitWhileBusy(p_sd_spi_data->UnitNbr);   /* Wait while busy token rx'd.     
2078:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     FS_DEV_SD_SPI_EXIT(p_sd_spi_data->UnitNbr);                 /* 'Exit' SPI access.              
2079:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     return (DEF_OK);
2080:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** }
2081:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
2082:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
2083:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** /*
2084:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** ***************************************************************************************************
2085:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                                        FSDev_SD_SPI_WrData()
2086:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
2087:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** * Description : Execute command & write data block to card.
2088:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
2089:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** * Argument(s) : p_sd_spi_data   Pointer to SD SPI data.
2090:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
2091:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *               cmd             Command to execute.
2092:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
2093:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *               arg             Command argument.
2094:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
2095:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *               p_src           Pointer to source buffer.
2096:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
2097:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *               size            Size of data block to be written, in octets.
2098:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
2099:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** * Return(s)   : DEF_OK   if the data was read.
2100:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *               DEF_FAIL otherwise.
ARM GAS  /tmp/ccOtrZZk.s 			page 41


2101:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
2102:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** * Note(s)     : none.
2103:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** ***************************************************************************************************
2104:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** */
2105:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
2106:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** #if (FS_CFG_RD_ONLY_EN == DEF_DISABLED)
2107:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** static  CPU_BOOLEAN  FSDev_SD_SPI_WrData (FS_DEV_SD_SPI_DATA  *p_sd_spi_data,
2108:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                           CPU_INT08U           cmd,
2109:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                           CPU_INT32U           arg,
2110:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                           CPU_INT08U          *p_src,
2111:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                           CPU_INT32U           size)
2112:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** {
2113:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** #if (FS_DEV_SD_SPI_CFG_CRC_EN == DEF_ENABLED)
2114:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     CPU_INT16U  crc;
2115:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** #endif
2116:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     CPU_INT08U  crc_buf[2];
2117:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     CPU_INT08U  resp;
2118:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     CPU_INT08U  token;
2119:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
2120:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
2121:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     FS_DEV_SD_SPI_ENTER(p_sd_spi_data->UnitNbr);                /* 'Enter' SPI access.             
2122:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
2123:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     resp  = FSDev_SD_SPI_Cmd(p_sd_spi_data,                     /* Wr cmd & get resp byte.         
2124:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                              cmd,
2125:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                              arg);
2126:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
2127:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     if (resp != FS_DEV_SD_SPI_R1_NONE) {
2128:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FS_DEV_SD_SPI_EXIT(p_sd_spi_data->UnitNbr);             /* 'Exit' SPI access.              
2129:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FS_TRACE_DBG(("FSDev_SD_SPI_WrData(): Failed to wr card: cmd err: %02X.\r\n", resp));
2130:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         return (DEF_FAIL);
2131:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     }
2132:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
2133:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     token = FS_DEV_SD_SPI_TOKEN_START_BLK;
2134:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     FSDev_SD_SPI_BSP_SPI.Wr( p_sd_spi_data->UnitNbr,            /* Wr token.                       
2135:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                             &token,
2136:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                              1u);
2137:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
2138:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     FSDev_SD_SPI_BSP_SPI.Wr( p_sd_spi_data->UnitNbr,            /* Wr data.                        
2139:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                              p_src,
2140:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                              size);
2141:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
2142:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** #if (FS_DEV_SD_SPI_CFG_CRC_EN == DEF_ENABLED)
2143:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     crc = FSDev_SD_ChkSumCalc_16Bit(p_src, size);
2144:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     MEM_VAL_SET_INT16U_BIG((void *)&crc_buf[0], crc);
2145:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** #endif
2146:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
2147:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     FSDev_SD_SPI_BSP_SPI.Wr( p_sd_spi_data->UnitNbr,            /* Wr CRC.                         
2148:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                             &crc_buf[0],
2149:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                              2u);
2150:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
2151:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     FSDev_SD_SPI_BSP_SPI.Rd( p_sd_spi_data->UnitNbr,            /* Rd data resp token.             
2152:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                             &resp,
2153:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                              1u);
2154:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
2155:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
2156:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                                 /* Chk data resp token.            
2157:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     if ((resp & FS_DEV_SD_SPI_TOKEN_RESP_MASK) != FS_DEV_SD_SPI_TOKEN_RESP_ACCEPTED) {
ARM GAS  /tmp/ccOtrZZk.s 			page 42


2158:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                                 /* Wait while busy token rx'd.     
2159:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         (void)FSDev_SD_SPI_WaitWhileBusy(p_sd_spi_data->UnitNbr);
2160:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FS_DEV_SD_SPI_EXIT(p_sd_spi_data->UnitNbr);             /* 'Exit' SPI access.              
2161:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FS_TRACE_DBG(("FSDev_SD_SPI_WrData(): Failed to wr card: data resp token rx'd: %1X.\r\n", r
2162:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         return (DEF_FAIL);
2163:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     }
2164:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
2165:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     resp = FSDev_SD_SPI_WaitWhileBusy(p_sd_spi_data->UnitNbr);  /* Wait while busy token rx'd.     
2166:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     FS_DEV_SD_SPI_EXIT(p_sd_spi_data->UnitNbr);                 /* 'Exit' SPI access.              
2167:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
2168:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     if (resp != FS_DEV_SD_SPI_RESP_EMPTY) {
2169:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FS_TRACE_DBG(("FSDev_SD_SPI_WrData(): Failed to wr card: card busy timed out.\r\n"));
2170:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         return (DEF_FAIL);
2171:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     }
2172:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
2173:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     return (DEF_OK);
2174:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** }
2175:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** #endif
2176:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
2177:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
2178:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** /*
2179:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** ***************************************************************************************************
2180:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                                     FSDev_SD_SPI_WrDataMulti()
2181:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
2182:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** * Description : Execute command & write multiple data blocks to card.
2183:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
2184:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** * Argument(s) : p_sd_spi_data   Pointer to SD SPI data.
2185:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
2186:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *               cmd             Command to execute.
2187:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
2188:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *               arg             Command argument.
2189:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
2190:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *               p_src           Pointer to source buffer.
2191:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
2192:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *               size            Size of each data block to be written, in octets.
2193:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
2194:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *               cnt             Number of data blocks to be written.
2195:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
2196:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** * Return(s)   : DEF_OK   if the data was read.
2197:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *               DEF_FAIL otherwise.
2198:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
2199:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** * Note(s)     : none.
2200:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** ***************************************************************************************************
2201:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** */
2202:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
2203:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** #if (FS_CFG_RD_ONLY_EN == DEF_DISABLED)
2204:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** static  CPU_BOOLEAN  FSDev_SD_SPI_WrDataMulti (FS_DEV_SD_SPI_DATA  *p_sd_spi_data,
2205:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                CPU_INT08U           cmd,
2206:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                CPU_INT32U           arg,
2207:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                CPU_INT08U          *p_src,
2208:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                CPU_INT32U           size,
2209:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                CPU_INT32U           cnt)
2210:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** {
2211:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** #if (FS_DEV_SD_SPI_CFG_CRC_EN == DEF_ENABLED)
2212:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     CPU_INT16U  crc;
2213:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** #endif
2214:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     CPU_INT08U  crc_buf[2];
ARM GAS  /tmp/ccOtrZZk.s 			page 43


2215:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     CPU_INT08U  resp;
2216:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     CPU_INT08U  token;
2217:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
2218:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
2219:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     FS_DEV_SD_SPI_ENTER(p_sd_spi_data->UnitNbr);                /* 'Enter' SPI access.             
2220:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
2221:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     resp = FSDev_SD_SPI_Cmd(p_sd_spi_data,                      /* Perform send CSD command.       
2222:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                             cmd,
2223:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                             arg);
2224:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
2225:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     if (resp != FS_DEV_SD_SPI_R1_NONE) {
2226:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FS_DEV_SD_SPI_EXIT(p_sd_spi_data->UnitNbr);             /* 'Exit' SPI access.              
2227:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FS_TRACE_DBG(("FSDev_SD_SPI_WrDataMulti(): Failed to wr card: cmd err: %02X.\r\n", resp));
2228:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         return (DEF_FAIL);
2229:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     }
2230:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
2231:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     while (cnt > 0u) {
2232:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         token = FS_DEV_SD_SPI_TOKEN_START_BLK_MULT;
2233:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FSDev_SD_SPI_BSP_SPI.Wr( p_sd_spi_data->UnitNbr,        /* Wr token.                       
2234:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                 &token,
2235:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                  1u);
2236:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
2237:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FSDev_SD_SPI_BSP_SPI.Wr( p_sd_spi_data->UnitNbr,        /* Wr data.                        
2238:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                  p_src,
2239:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                  size);
2240:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
2241:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** #if (FS_DEV_SD_SPI_CFG_CRC_EN == DEF_ENABLED)
2242:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         crc = FSDev_SD_ChkSumCalc_16Bit(p_src, size);
2243:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         MEM_VAL_SET_INT16U_BIG((void *)&crc_buf[0], crc);
2244:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** #endif
2245:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
2246:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FSDev_SD_SPI_BSP_SPI.Wr( p_sd_spi_data->UnitNbr,        /* Wr CRC.                         
2247:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                 &crc_buf[0],
2248:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                  2u);
2249:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
2250:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FSDev_SD_SPI_BSP_SPI.Rd( p_sd_spi_data->UnitNbr,        /* Rd data resp token.             
2251:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                 &resp,
2252:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                  1u);
2253:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
2254:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         if ((resp & FS_DEV_SD_SPI_TOKEN_RESP_MASK) != FS_DEV_SD_SPI_TOKEN_RESP_ACCEPTED) {
2255:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                                 /* Wait while busy token rx'd.     
2256:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****             (void)FSDev_SD_SPI_WaitWhileBusy(p_sd_spi_data->UnitNbr);
2257:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****             FS_DEV_SD_SPI_EXIT(p_sd_spi_data->UnitNbr);         /* 'Exit' SPI access.              
2258:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****             FS_TRACE_DBG(("FSDev_SD_SPI_WrDataMulti(): Failed to wr card: data resp token rx'd: %1X
2259:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****             return (DEF_FAIL);
2260:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         }
2261:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
2262:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                                 /* Wait while busy token rx'd.     
2263:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         resp = FSDev_SD_SPI_WaitWhileBusy(p_sd_spi_data->UnitNbr);
2264:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
2265:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         if (resp != FS_DEV_SD_SPI_RESP_EMPTY) {
2266:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****             FS_DEV_SD_SPI_EXIT(p_sd_spi_data->UnitNbr);         /* 'Exit' SPI access.              
2267:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****             FS_TRACE_DBG(("FSDev_SD_SPI_WrDataMulti(): Failed to wr card: card busy timed out.\r\n"
2268:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****             return (DEF_FAIL);
2269:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         }
2270:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
2271:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         p_src += size;
ARM GAS  /tmp/ccOtrZZk.s 			page 44


2272:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         cnt--;
2273:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     }
2274:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
2275:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     token = FS_DEV_SD_SPI_TOKEN_STOP_TRAN;
2276:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     FSDev_SD_SPI_BSP_SPI.Wr( p_sd_spi_data->UnitNbr,            /* Wr token.                       
2277:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                             &token,
2278:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                              1u);
2279:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
2280:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     resp  = FSDev_SD_SPI_WaitWhileBusy(p_sd_spi_data->UnitNbr); /* Wait while busy token rx'd.     
2281:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     FS_DEV_SD_SPI_EXIT(p_sd_spi_data->UnitNbr);                 /* 'Exit' SPI access.              
2282:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
2283:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     if (resp != FS_DEV_SD_SPI_RESP_EMPTY) {
2284:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FS_TRACE_DBG(("FSDev_SD_SPI_WrDataMulti(): Failed to wr card: card busy timed out.\r\n"));
2285:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         return (DEF_FAIL);
2286:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     }
2287:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
2288:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     return (DEF_OK);
2289:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** }
2290:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** #endif
2291:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
2292:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
2293:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** /*
2294:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** ***************************************************************************************************
2295:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                                       FSDev_SD_SPI_SendCID()
2296:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
2297:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** * Description : Get Card ID (CID) register from card.
2298:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
2299:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** * Argument(s) : p_sd_spi_data   Pointer to SD SPI data.
2300:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
2301:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *               p_dest          Pointer to 16-byte buffer that will receive SD/MMC Card ID register
2302:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
2303:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** * Return(s)   : DEF_OK   if the data was read.
2304:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *               DEF_FAIL otherwise.
2305:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
2306:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** * Note(s)     : (1) (a) For SD cards, the structure of the CID is defined in [Ref 1] Section 5.1.
2307:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
2308:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                   (b) For MMC cards, the structure of the CID is defined in [Ref 2] Section 8.2.
2309:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** ***************************************************************************************************
2310:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** */
2311:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
2312:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** static  CPU_BOOLEAN  FSDev_SD_SPI_SendCID (FS_DEV_SD_SPI_DATA  *p_sd_spi_data,
2313:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                            CPU_INT08U          *p_dest)
2314:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** {
2315:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     CPU_BOOLEAN  ok;
2316:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
2317:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
2318:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     ok = FSDev_SD_SPI_RdData(p_sd_spi_data,
2319:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                              FS_DEV_SD_CMD_SEND_CID,
2320:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                              0u,
2321:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                              p_dest,
2322:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                              FS_DEV_SD_CID_REG_LEN);
2323:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
2324:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     return (ok);
2325:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** }
2326:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
2327:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
2328:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** /*
ARM GAS  /tmp/ccOtrZZk.s 			page 45


2329:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** ***************************************************************************************************
2330:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                                       FSDev_SD_SPI_SendCSD()
2331:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
2332:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** * Description : Get Card-Specific Data (CSD) register from card.
2333:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
2334:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** * Argument(s) : p_sd_spi_data   Pointer to SD SPI data.
2335:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
2336:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *               p_dest          Pointer to 16-byte buffer that will receive SD/MMC Card-Specific Da
2337:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
2338:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** * Return(s)   : DEF_OK   if the data was read.
2339:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *               DEF_FAIL otherwise.
2340:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
2341:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** * Note(s)     : (1) (a) For SD v1.x & SD v2.0 standard capacity, the structure of the CSD is define
2342:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                       [Ref 1], Section 5.3.2.
2343:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
2344:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                   (b) For MMC cards, the structure of the CSD is defined in [Ref 2], Section 8.3.
2345:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
2346:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                   (c) For SD v2.0 high capacity cards, the structure of the CSD is defined in [Re
2347:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                       Section 5.3.3.
2348:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** ***************************************************************************************************
2349:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** */
2350:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
2351:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** static  CPU_BOOLEAN  FSDev_SD_SPI_SendCSD (FS_DEV_SD_SPI_DATA  *p_sd_spi_data,
2352:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                            CPU_INT08U          *p_dest)
2353:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** {
2354:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     CPU_BOOLEAN  ok;
2355:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
2356:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
2357:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     ok = FSDev_SD_SPI_RdData(p_sd_spi_data,
2358:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                              FS_DEV_SD_CMD_SEND_CSD,
2359:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                              0u,
2360:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                              p_dest,
2361:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                              FS_DEV_SD_CSD_REG_LEN);
2362:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
2363:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     return (ok);
2364:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** }
2365:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
2366:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
2367:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** /*
2368:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** ***************************************************************************************************
2369:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                                        FSDev_SD_SPI_RdByte()
2370:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
2371:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** * Description : Read one byte from card.
2372:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
2373:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** * Argument(s) : unit_nbr    Unit number of device to control.
2374:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
2375:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** * Return(s)   : Byte read.
2376:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
2377:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** * Note(s)     : none.
2378:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** ***************************************************************************************************
2379:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** */
2380:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
2381:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** static  CPU_INT08U  FSDev_SD_SPI_RdByte (FS_QTY  unit_nbr)
2382:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** {
 174              		.loc 1 2382 1 view -0
 175              		.cfi_startproc
 176              		@ args = 0, pretend = 0, frame = 8
ARM GAS  /tmp/ccOtrZZk.s 			page 46


 177              		@ frame_needed = 0, uses_anonymous_args = 0
 178              		.loc 1 2382 1 is_stmt 0 view .LVU45
 179 0000 00B5     		push	{lr}
 180              	.LCFI0:
 181              		.cfi_def_cfa_offset 4
 182              		.cfi_offset 14, -4
 183 0002 83B0     		sub	sp, sp, #12
 184              	.LCFI1:
 185              		.cfi_def_cfa_offset 16
2383:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     CPU_INT08U  resp;
 186              		.loc 1 2383 5 is_stmt 1 view .LVU46
2384:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
2385:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
2386:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     FSDev_SD_SPI_BSP_SPI.Rd( unit_nbr,                          /* Rd resp byte.                   
 187              		.loc 1 2386 5 view .LVU47
 188              		.loc 1 2386 25 is_stmt 0 view .LVU48
 189 0004 054B     		ldr	r3, .L15
 190 0006 1B69     		ldr	r3, [r3, #16]
 191              		.loc 1 2386 5 view .LVU49
 192 0008 0122     		movs	r2, #1
 193 000a 0DF10701 		add	r1, sp, #7
 194 000e 9847     		blx	r3
 195              	.LVL4:
2387:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                             &resp,
2388:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                              1u);
2389:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
2390:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     return (resp);
 196              		.loc 1 2390 5 is_stmt 1 view .LVU50
2391:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** }
 197              		.loc 1 2391 1 is_stmt 0 view .LVU51
 198 0010 9DF80700 		ldrb	r0, [sp, #7]	@ zero_extendqisi2
 199 0014 03B0     		add	sp, sp, #12
 200              	.LCFI2:
 201              		.cfi_def_cfa_offset 4
 202              		@ sp needed
 203 0016 5DF804FB 		ldr	pc, [sp], #4
 204              	.L16:
 205 001a 00BF     		.align	2
 206              	.L15:
 207 001c 00000000 		.word	FSDev_SD_SPI_BSP_SPI
 208              		.cfi_endproc
 209              	.LFE23:
 211              		.section	.text.FSDev_SD_SPI_WaitClks,"ax",%progbits
 212              		.align	1
 213              		.syntax unified
 214              		.thumb
 215              		.thumb_func
 216              		.fpu fpv4-sp-d16
 218              	FSDev_SD_SPI_WaitClks:
 219              	.LVL5:
 220              	.LFB24:
2392:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
2393:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
2394:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** /*
2395:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** ***************************************************************************************************
2396:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                                       FSDev_SD_SPI_WaitClks()
2397:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
ARM GAS  /tmp/ccOtrZZk.s 			page 47


2398:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** * Description : Send empty data for a certain number of clocks.
2399:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
2400:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** * Argument(s) : unit_nbr    Unit number of device to control.
2401:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
2402:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *               nbr_clks    Number of clock cycles.
2403:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
2404:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** * Return(s)   : none.
2405:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
2406:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** * Note(s)     : none.
2407:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** ***************************************************************************************************
2408:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** */
2409:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
2410:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** static  void  FSDev_SD_SPI_WaitClks (FS_QTY      unit_nbr,
2411:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                      CPU_INT08U  nbr_clks)
2412:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** {
 221              		.loc 1 2412 1 is_stmt 1 view -0
 222              		.cfi_startproc
 223              		@ args = 0, pretend = 0, frame = 8
 224              		@ frame_needed = 0, uses_anonymous_args = 0
 225              		.loc 1 2412 1 is_stmt 0 view .LVU53
 226 0000 70B5     		push	{r4, r5, r6, lr}
 227              	.LCFI3:
 228              		.cfi_def_cfa_offset 16
 229              		.cfi_offset 4, -16
 230              		.cfi_offset 5, -12
 231              		.cfi_offset 6, -8
 232              		.cfi_offset 14, -4
 233 0002 82B0     		sub	sp, sp, #8
 234              	.LCFI4:
 235              		.cfi_def_cfa_offset 24
 236 0004 0646     		mov	r6, r0
 237 0006 0D46     		mov	r5, r1
2413:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     CPU_INT08U  clks;
 238              		.loc 1 2413 5 is_stmt 1 view .LVU54
2414:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     CPU_INT08U  data;
 239              		.loc 1 2414 5 view .LVU55
2415:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
2416:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
2417:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     clks = 0u;
 240              		.loc 1 2417 5 view .LVU56
 241              	.LVL6:
2418:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     while (clks < nbr_clks) {
 242              		.loc 1 2418 5 view .LVU57
2417:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     while (clks < nbr_clks) {
 243              		.loc 1 2417 10 is_stmt 0 view .LVU58
 244 0008 0024     		movs	r4, #0
 245              	.LVL7:
 246              	.L18:
 247              		.loc 1 2418 11 is_stmt 1 view .LVU59
 248 000a AC42     		cmp	r4, r5
 249 000c 0CD2     		bcs	.L21
2419:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         data = FS_DEV_SD_SPI_RESP_EMPTY;
 250              		.loc 1 2419 9 view .LVU60
 251              		.loc 1 2419 14 is_stmt 0 view .LVU61
 252 000e FF23     		movs	r3, #255
 253 0010 8DF80730 		strb	r3, [sp, #7]
2420:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
ARM GAS  /tmp/ccOtrZZk.s 			page 48


2421:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FSDev_SD_SPI_BSP_SPI.Wr( unit_nbr,
 254              		.loc 1 2421 9 is_stmt 1 view .LVU62
 255              		.loc 1 2421 29 is_stmt 0 view .LVU63
 256 0014 054B     		ldr	r3, .L22
 257 0016 5B69     		ldr	r3, [r3, #20]
 258              		.loc 1 2421 9 view .LVU64
 259 0018 0122     		movs	r2, #1
 260 001a 0DF10701 		add	r1, sp, #7
 261 001e 3046     		mov	r0, r6
 262 0020 9847     		blx	r3
 263              	.LVL8:
2422:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                 &data,
2423:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                  1u);
2424:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
2425:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         clks++;
 264              		.loc 1 2425 9 is_stmt 1 view .LVU65
 265              		.loc 1 2425 13 is_stmt 0 view .LVU66
 266 0022 0134     		adds	r4, r4, #1
 267              	.LVL9:
 268              		.loc 1 2425 13 view .LVU67
 269 0024 E4B2     		uxtb	r4, r4
 270              	.LVL10:
 271              		.loc 1 2425 13 view .LVU68
 272 0026 F0E7     		b	.L18
 273              	.L21:
2426:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     }
2427:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** }
 274              		.loc 1 2427 1 view .LVU69
 275 0028 02B0     		add	sp, sp, #8
 276              	.LCFI5:
 277              		.cfi_def_cfa_offset 16
 278              		@ sp needed
 279 002a 70BD     		pop	{r4, r5, r6, pc}
 280              	.LVL11:
 281              	.L23:
 282              		.loc 1 2427 1 view .LVU70
 283              		.align	2
 284              	.L22:
 285 002c 00000000 		.word	FSDev_SD_SPI_BSP_SPI
 286              		.cfi_endproc
 287              	.LFE24:
 289              		.section	.text.FSDev_SD_SPI_WaitForStart,"ax",%progbits
 290              		.align	1
 291              		.syntax unified
 292              		.thumb
 293              		.thumb_func
 294              		.fpu fpv4-sp-d16
 296              	FSDev_SD_SPI_WaitForStart:
 297              	.LVL12:
 298              	.LFB25:
2428:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
2429:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
2430:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** /*
2431:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** ***************************************************************************************************
2432:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                                     FSDev_SD_SPI_WaitForStart()
2433:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
2434:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** * Description : Wait for card to return start token.
ARM GAS  /tmp/ccOtrZZk.s 			page 49


2435:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
2436:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** * Argument(s) : unit_nbr    Unit number of device to control.
2437:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
2438:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** * Return(s)   : Final token.
2439:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
2440:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** * Note(s)     : none.
2441:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** ***************************************************************************************************
2442:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** */
2443:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
2444:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** static  CPU_INT08U  FSDev_SD_SPI_WaitForStart (FS_QTY  unit_nbr)
2445:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** {
 299              		.loc 1 2445 1 is_stmt 1 view -0
 300              		.cfi_startproc
 301              		@ args = 0, pretend = 0, frame = 0
 302              		@ frame_needed = 0, uses_anonymous_args = 0
 303              		.loc 1 2445 1 is_stmt 0 view .LVU72
 304 0000 38B5     		push	{r3, r4, r5, lr}
 305              	.LCFI6:
 306              		.cfi_def_cfa_offset 16
 307              		.cfi_offset 3, -16
 308              		.cfi_offset 4, -12
 309              		.cfi_offset 5, -8
 310              		.cfi_offset 14, -4
 311 0002 0546     		mov	r5, r0
2446:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     CPU_INT32U  clks;
 312              		.loc 1 2446 5 is_stmt 1 view .LVU73
2447:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     CPU_INT08U  datum;
 313              		.loc 1 2447 5 view .LVU74
2448:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
2449:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
2450:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     clks  = 0u;
 314              		.loc 1 2450 5 view .LVU75
 315              	.LVL13:
2451:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     datum = FS_DEV_SD_SPI_RESP_EMPTY;
 316              		.loc 1 2451 5 view .LVU76
2452:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     while (clks < 312500u) {
 317              		.loc 1 2452 5 view .LVU77
2450:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     datum = FS_DEV_SD_SPI_RESP_EMPTY;
 318              		.loc 1 2450 11 is_stmt 0 view .LVU78
 319 0004 0024     		movs	r4, #0
 320              		.loc 1 2452 11 view .LVU79
 321 0006 00E0     		b	.L25
 322              	.LVL14:
 323              	.L30:
2453:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         datum = FSDev_SD_SPI_RdByte(unit_nbr);
2454:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
2455:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         if (datum != FS_DEV_SD_SPI_RESP_EMPTY) {
2456:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****             return (datum);
2457:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         }
2458:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
2459:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         datum = FS_DEV_SD_SPI_RESP_EMPTY;
 324              		.loc 1 2459 9 is_stmt 1 view .LVU80
2460:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
2461:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         clks++;
 325              		.loc 1 2461 9 view .LVU81
 326              		.loc 1 2461 13 is_stmt 0 view .LVU82
 327 0008 0134     		adds	r4, r4, #1
ARM GAS  /tmp/ccOtrZZk.s 			page 50


 328              	.LVL15:
 329              	.L25:
2452:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         datum = FSDev_SD_SPI_RdByte(unit_nbr);
 330              		.loc 1 2452 11 is_stmt 1 view .LVU83
 331 000a 054B     		ldr	r3, .L31
 332 000c 9C42     		cmp	r4, r3
 333 000e 05D8     		bhi	.L29
2453:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         datum = FSDev_SD_SPI_RdByte(unit_nbr);
 334              		.loc 1 2453 9 view .LVU84
2453:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         datum = FSDev_SD_SPI_RdByte(unit_nbr);
 335              		.loc 1 2453 17 is_stmt 0 view .LVU85
 336 0010 2846     		mov	r0, r5
 337 0012 FFF7FEFF 		bl	FSDev_SD_SPI_RdByte
 338              	.LVL16:
2455:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****             return (datum);
 339              		.loc 1 2455 9 is_stmt 1 view .LVU86
2455:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****             return (datum);
 340              		.loc 1 2455 12 is_stmt 0 view .LVU87
 341 0016 FF28     		cmp	r0, #255
 342 0018 F6D0     		beq	.L30
 343              	.LVL17:
 344              	.L26:
2462:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     }
2463:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
2464:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     return (datum);
2465:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** }
 345              		.loc 1 2465 1 view .LVU88
 346 001a 38BD     		pop	{r3, r4, r5, pc}
 347              	.LVL18:
 348              	.L29:
2464:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** }
 349              		.loc 1 2464 12 view .LVU89
 350 001c FF20     		movs	r0, #255
 351 001e FCE7     		b	.L26
 352              	.L32:
 353              		.align	2
 354              	.L31:
 355 0020 B3C40400 		.word	312499
 356              		.cfi_endproc
 357              	.LFE25:
 359              		.section	.text.FSDev_SD_SPI_WaitWhileBusy,"ax",%progbits
 360              		.align	1
 361              		.syntax unified
 362              		.thumb
 363              		.thumb_func
 364              		.fpu fpv4-sp-d16
 366              	FSDev_SD_SPI_WaitWhileBusy:
 367              	.LVL19:
 368              	.LFB26:
2466:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
2467:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
2468:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** /*
2469:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** ***************************************************************************************************
2470:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                                    FSDev_SD_SPI_WaitWhileBusy()
2471:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
2472:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** * Description : Wait while card returns busy token.
2473:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
ARM GAS  /tmp/ccOtrZZk.s 			page 51


2474:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** * Argument(s) : unit_nbr    Unit number of device to control.
2475:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
2476:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** * Return(s)   : Final token.
2477:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
2478:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** * Note(s)     : none.
2479:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** ***************************************************************************************************
2480:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** */
2481:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
2482:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** static  CPU_INT08U  FSDev_SD_SPI_WaitWhileBusy (FS_QTY  unit_nbr)
2483:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** {
 369              		.loc 1 2483 1 is_stmt 1 view -0
 370              		.cfi_startproc
 371              		@ args = 0, pretend = 0, frame = 0
 372              		@ frame_needed = 0, uses_anonymous_args = 0
 373              		.loc 1 2483 1 is_stmt 0 view .LVU91
 374 0000 38B5     		push	{r3, r4, r5, lr}
 375              	.LCFI7:
 376              		.cfi_def_cfa_offset 16
 377              		.cfi_offset 3, -16
 378              		.cfi_offset 4, -12
 379              		.cfi_offset 5, -8
 380              		.cfi_offset 14, -4
 381 0002 0546     		mov	r5, r0
2484:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     CPU_INT32U  clks;
 382              		.loc 1 2484 5 is_stmt 1 view .LVU92
2485:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     CPU_INT08U  datum;
 383              		.loc 1 2485 5 view .LVU93
2486:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
2487:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
2488:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     clks  = 0u;
 384              		.loc 1 2488 5 view .LVU94
 385              	.LVL20:
2489:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     datum = 0x00u;
 386              		.loc 1 2489 5 view .LVU95
2490:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     while (clks < 781250u) {
 387              		.loc 1 2490 5 view .LVU96
2488:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     datum = 0x00u;
 388              		.loc 1 2488 11 is_stmt 0 view .LVU97
 389 0004 0024     		movs	r4, #0
 390              		.loc 1 2490 11 view .LVU98
 391 0006 00E0     		b	.L34
 392              	.LVL21:
 393              	.L39:
2491:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         datum = FSDev_SD_SPI_RdByte(unit_nbr);
2492:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
2493:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         if (datum == FS_DEV_SD_SPI_RESP_EMPTY) {
2494:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****             return (datum);
2495:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         }
2496:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
2497:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         datum = 0x00u;
 394              		.loc 1 2497 9 is_stmt 1 view .LVU99
2498:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
2499:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         clks++;
 395              		.loc 1 2499 9 view .LVU100
 396              		.loc 1 2499 13 is_stmt 0 view .LVU101
 397 0008 0134     		adds	r4, r4, #1
 398              	.LVL22:
ARM GAS  /tmp/ccOtrZZk.s 			page 52


 399              	.L34:
2490:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         datum = FSDev_SD_SPI_RdByte(unit_nbr);
 400              		.loc 1 2490 11 is_stmt 1 view .LVU102
 401 000a 054B     		ldr	r3, .L40
 402 000c 9C42     		cmp	r4, r3
 403 000e 05D8     		bhi	.L38
2491:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         datum = FSDev_SD_SPI_RdByte(unit_nbr);
 404              		.loc 1 2491 9 view .LVU103
2491:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         datum = FSDev_SD_SPI_RdByte(unit_nbr);
 405              		.loc 1 2491 17 is_stmt 0 view .LVU104
 406 0010 2846     		mov	r0, r5
 407 0012 FFF7FEFF 		bl	FSDev_SD_SPI_RdByte
 408              	.LVL23:
2493:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****             return (datum);
 409              		.loc 1 2493 9 is_stmt 1 view .LVU105
2493:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****             return (datum);
 410              		.loc 1 2493 12 is_stmt 0 view .LVU106
 411 0016 FF28     		cmp	r0, #255
 412 0018 F6D1     		bne	.L39
 413              	.LVL24:
 414              	.L35:
2500:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     }
2501:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
2502:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     return (datum);
2503:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** }
 415              		.loc 1 2503 1 view .LVU107
 416 001a 38BD     		pop	{r3, r4, r5, pc}
 417              	.LVL25:
 418              	.L38:
2502:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** }
 419              		.loc 1 2502 12 view .LVU108
 420 001c 0020     		movs	r0, #0
 421 001e FCE7     		b	.L35
 422              	.L41:
 423              		.align	2
 424              	.L40:
 425 0020 C1EB0B00 		.word	781249
 426              		.cfi_endproc
 427              	.LFE26:
 429              		.section	.text.FSDev_SD_SPI_Cmd,"ax",%progbits
 430              		.align	1
 431              		.syntax unified
 432              		.thumb
 433              		.thumb_func
 434              		.fpu fpv4-sp-d16
 436              	FSDev_SD_SPI_Cmd:
 437              	.LVL26:
 438              	.LFB13:
1697:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     CPU_INT08U  cmd_pkt[6];
 439              		.loc 1 1697 1 is_stmt 1 view -0
 440              		.cfi_startproc
 441              		@ args = 0, pretend = 0, frame = 8
 442              		@ frame_needed = 0, uses_anonymous_args = 0
1697:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     CPU_INT08U  cmd_pkt[6];
 443              		.loc 1 1697 1 is_stmt 0 view .LVU110
 444 0000 70B5     		push	{r4, r5, r6, lr}
 445              	.LCFI8:
ARM GAS  /tmp/ccOtrZZk.s 			page 53


 446              		.cfi_def_cfa_offset 16
 447              		.cfi_offset 4, -16
 448              		.cfi_offset 5, -12
 449              		.cfi_offset 6, -8
 450              		.cfi_offset 14, -4
 451 0002 82B0     		sub	sp, sp, #8
 452              	.LCFI9:
 453              		.cfi_def_cfa_offset 24
 454 0004 0646     		mov	r6, r0
 455 0006 0025     		movs	r5, #0
1698:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     CPU_INT08U  chk_sum;
 456              		.loc 1 1698 5 is_stmt 1 view .LVU111
1699:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     CPU_INT16U  timeout;
 457              		.loc 1 1699 5 view .LVU112
1700:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     CPU_INT08U  resp;
 458              		.loc 1 1700 5 view .LVU113
1701:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 459              		.loc 1 1701 5 view .LVU114
1706:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     cmd_pkt[1] = (CPU_INT08U)(arg >> (3u * DEF_OCTET_NBR_BITS)) & DEF_OCTET_MASK;
 460              		.loc 1 1706 5 view .LVU115
1706:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     cmd_pkt[1] = (CPU_INT08U)(arg >> (3u * DEF_OCTET_NBR_BITS)) & DEF_OCTET_MASK;
 461              		.loc 1 1706 16 is_stmt 0 view .LVU116
 462 0008 41F04001 		orr	r1, r1, #64
 463              	.LVL27:
1706:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     cmd_pkt[1] = (CPU_INT08U)(arg >> (3u * DEF_OCTET_NBR_BITS)) & DEF_OCTET_MASK;
 464              		.loc 1 1706 16 view .LVU117
 465 000c 8DF80010 		strb	r1, [sp]
1707:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     cmd_pkt[2] = (CPU_INT08U)(arg >> (2u * DEF_OCTET_NBR_BITS)) & DEF_OCTET_MASK;
 466              		.loc 1 1707 5 is_stmt 1 view .LVU118
1707:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     cmd_pkt[2] = (CPU_INT08U)(arg >> (2u * DEF_OCTET_NBR_BITS)) & DEF_OCTET_MASK;
 467              		.loc 1 1707 18 is_stmt 0 view .LVU119
 468 0010 130E     		lsrs	r3, r2, #24
1707:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     cmd_pkt[2] = (CPU_INT08U)(arg >> (2u * DEF_OCTET_NBR_BITS)) & DEF_OCTET_MASK;
 469              		.loc 1 1707 16 view .LVU120
 470 0012 8DF80130 		strb	r3, [sp, #1]
1708:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     cmd_pkt[3] = (CPU_INT08U)(arg >> (1u * DEF_OCTET_NBR_BITS)) & DEF_OCTET_MASK;
 471              		.loc 1 1708 5 is_stmt 1 view .LVU121
1708:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     cmd_pkt[3] = (CPU_INT08U)(arg >> (1u * DEF_OCTET_NBR_BITS)) & DEF_OCTET_MASK;
 472              		.loc 1 1708 18 is_stmt 0 view .LVU122
 473 0016 C2F30743 		ubfx	r3, r2, #16, #8
1708:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     cmd_pkt[3] = (CPU_INT08U)(arg >> (1u * DEF_OCTET_NBR_BITS)) & DEF_OCTET_MASK;
 474              		.loc 1 1708 16 view .LVU123
 475 001a 8DF80230 		strb	r3, [sp, #2]
1709:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     cmd_pkt[4] = (CPU_INT08U)(arg >> (0u * DEF_OCTET_NBR_BITS)) & DEF_OCTET_MASK;
 476              		.loc 1 1709 5 is_stmt 1 view .LVU124
1709:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     cmd_pkt[4] = (CPU_INT08U)(arg >> (0u * DEF_OCTET_NBR_BITS)) & DEF_OCTET_MASK;
 477              		.loc 1 1709 18 is_stmt 0 view .LVU125
 478 001e C2F30723 		ubfx	r3, r2, #8, #8
1709:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     cmd_pkt[4] = (CPU_INT08U)(arg >> (0u * DEF_OCTET_NBR_BITS)) & DEF_OCTET_MASK;
 479              		.loc 1 1709 16 view .LVU126
 480 0022 8DF80330 		strb	r3, [sp, #3]
1710:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 481              		.loc 1 1710 5 is_stmt 1 view .LVU127
1710:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 482              		.loc 1 1710 16 is_stmt 0 view .LVU128
 483 0026 8DF80420 		strb	r2, [sp, #4]
1712:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
ARM GAS  /tmp/ccOtrZZk.s 			page 54


 484              		.loc 1 1712 5 is_stmt 1 view .LVU129
1712:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 485              		.loc 1 1712 18 is_stmt 0 view .LVU130
 486 002a 0521     		movs	r1, #5
 487 002c 6846     		mov	r0, sp
 488              	.LVL28:
1712:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 489              		.loc 1 1712 18 view .LVU131
 490 002e FFF7FEFF 		bl	FSDev_SD_ChkSumCalc_7Bit
 491              	.LVL29:
1714:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 492              		.loc 1 1714 5 is_stmt 1 view .LVU132
1714:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 493              		.loc 1 1714 18 is_stmt 0 view .LVU133
 494 0032 4300     		lsls	r3, r0, #1
 495 0034 DBB2     		uxtb	r3, r3
1714:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 496              		.loc 1 1714 16 view .LVU134
 497 0036 43F00103 		orr	r3, r3, #1
 498 003a 8DF80530 		strb	r3, [sp, #5]
1718:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                             &cmd_pkt[0],
 499              		.loc 1 1718 5 is_stmt 1 view .LVU135
1718:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                             &cmd_pkt[0],
 500              		.loc 1 1718 25 is_stmt 0 view .LVU136
 501 003e 0D4B     		ldr	r3, .L50
 502 0040 5B69     		ldr	r3, [r3, #20]
1718:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                             &cmd_pkt[0],
 503              		.loc 1 1718 5 view .LVU137
 504 0042 0622     		movs	r2, #6
 505 0044 6946     		mov	r1, sp
 506 0046 B088     		ldrh	r0, [r6, #4]
 507              	.LVL30:
1718:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                             &cmd_pkt[0],
 508              		.loc 1 1718 5 view .LVU138
 509 0048 9847     		blx	r3
 510              	.LVL31:
1724:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     while (timeout < FS_DEV_SD_SPI_CMD_TIMEOUT) {
 511              		.loc 1 1724 5 is_stmt 1 view .LVU139
1725:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         resp = FSDev_SD_SPI_RdByte(p_sd_spi_data->UnitNbr);     /* Rd resp byte.                   
 512              		.loc 1 1725 5 view .LVU140
1724:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     while (timeout < FS_DEV_SD_SPI_CMD_TIMEOUT) {
 513              		.loc 1 1724 13 is_stmt 0 view .LVU141
 514 004a 2C46     		mov	r4, r5
1725:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         resp = FSDev_SD_SPI_RdByte(p_sd_spi_data->UnitNbr);     /* Rd resp byte.                   
 515              		.loc 1 1725 11 view .LVU142
 516 004c 01E0     		b	.L43
 517              	.LVL32:
 518              	.L49:
1732:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     }
 519              		.loc 1 1732 9 is_stmt 1 view .LVU143
1732:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     }
 520              		.loc 1 1732 16 is_stmt 0 view .LVU144
 521 004e 0134     		adds	r4, r4, #1
 522              	.LVL33:
1732:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     }
 523              		.loc 1 1732 16 view .LVU145
 524 0050 A4B2     		uxth	r4, r4
ARM GAS  /tmp/ccOtrZZk.s 			page 55


 525              	.LVL34:
 526              	.L43:
1725:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         resp = FSDev_SD_SPI_RdByte(p_sd_spi_data->UnitNbr);     /* Rd resp byte.                   
 527              		.loc 1 1725 11 is_stmt 1 view .LVU146
 528 0052 7F2C     		cmp	r4, #127
 529 0054 06D8     		bhi	.L44
1726:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 530              		.loc 1 1726 9 view .LVU147
1726:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 531              		.loc 1 1726 16 is_stmt 0 view .LVU148
 532 0056 B088     		ldrh	r0, [r6, #4]
 533 0058 FFF7FEFF 		bl	FSDev_SD_SPI_RdByte
 534              	.LVL35:
 535 005c 0546     		mov	r5, r0
 536              	.LVL36:
1728:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****             break;
 537              		.loc 1 1728 9 is_stmt 1 view .LVU149
1728:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****             break;
 538              		.loc 1 1728 12 is_stmt 0 view .LVU150
 539 005e 10F0800F 		tst	r0, #128
 540 0062 F4D1     		bne	.L49
 541              	.LVL37:
 542              	.L44:
1735:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FS_DEV_SD_SPI_ERR_CMD_RESP_TIMEOUT_CTR_INC(p_sd_spi_data);
 543              		.loc 1 1735 5 is_stmt 1 view .LVU151
1735:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FS_DEV_SD_SPI_ERR_CMD_RESP_TIMEOUT_CTR_INC(p_sd_spi_data);
 544              		.loc 1 1735 8 is_stmt 0 view .LVU152
 545 0064 802C     		cmp	r4, #128
 546 0066 02D0     		beq	.L47
1768:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** }
 547              		.loc 1 1768 12 view .LVU153
 548 0068 2846     		mov	r0, r5
 549              	.L46:
1769:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 550              		.loc 1 1769 1 view .LVU154
 551 006a 02B0     		add	sp, sp, #8
 552              	.LCFI10:
 553              		.cfi_remember_state
 554              		.cfi_def_cfa_offset 16
 555              		@ sp needed
 556 006c 70BD     		pop	{r4, r5, r6, pc}
 557              	.LVL38:
 558              	.L47:
 559              	.LCFI11:
 560              		.cfi_restore_state
1737:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     }
 561              		.loc 1 1737 16 view .LVU155
 562 006e FF20     		movs	r0, #255
 563 0070 FBE7     		b	.L46
 564              	.L51:
 565 0072 00BF     		.align	2
 566              	.L50:
 567 0074 00000000 		.word	FSDev_SD_SPI_BSP_SPI
 568              		.cfi_endproc
 569              	.LFE13:
 571              		.section	.text.FSDev_SD_SPI_AppCmdR1,"ax",%progbits
 572              		.align	1
ARM GAS  /tmp/ccOtrZZk.s 			page 56


 573              		.syntax unified
 574              		.thumb
 575              		.thumb_func
 576              		.fpu fpv4-sp-d16
 578              	FSDev_SD_SPI_AppCmdR1:
 579              	.LVL39:
 580              	.LFB16:
1878:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     CPU_INT08U  resp_r1;
 581              		.loc 1 1878 1 is_stmt 1 view -0
 582              		.cfi_startproc
 583              		@ args = 0, pretend = 0, frame = 0
 584              		@ frame_needed = 0, uses_anonymous_args = 0
1878:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     CPU_INT08U  resp_r1;
 585              		.loc 1 1878 1 is_stmt 0 view .LVU157
 586 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 587              	.LCFI12:
 588              		.cfi_def_cfa_offset 24
 589              		.cfi_offset 3, -24
 590              		.cfi_offset 4, -20
 591              		.cfi_offset 5, -16
 592              		.cfi_offset 6, -12
 593              		.cfi_offset 7, -8
 594              		.cfi_offset 14, -4
 595 0002 0446     		mov	r4, r0
 596 0004 0E46     		mov	r6, r1
 597 0006 1746     		mov	r7, r2
1879:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 598              		.loc 1 1879 5 is_stmt 1 view .LVU158
1882:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 599              		.loc 1 1882 5 view .LVU159
 600 0008 164B     		ldr	r3, .L57
 601 000a 9B69     		ldr	r3, [r3, #24]
 602 000c 8088     		ldrh	r0, [r0, #4]
 603              	.LVL40:
1882:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 604              		.loc 1 1882 5 is_stmt 0 view .LVU160
 605 000e 9847     		blx	r3
 606              	.LVL41:
1882:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 607              		.loc 1 1882 5 is_stmt 1 view .LVU161
 608 0010 0121     		movs	r1, #1
 609 0012 A088     		ldrh	r0, [r4, #4]
 610 0014 FFF7FEFF 		bl	FSDev_SD_SPI_WaitClks
 611              	.LVL42:
1882:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 612              		.loc 1 1882 48 view .LVU162
1884:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                FS_DEV_SD_CMD_APP_CMD,
 613              		.loc 1 1884 5 view .LVU163
1884:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                FS_DEV_SD_CMD_APP_CMD,
 614              		.loc 1 1884 15 is_stmt 0 view .LVU164
 615 0018 0022     		movs	r2, #0
 616 001a 3721     		movs	r1, #55
 617 001c 2046     		mov	r0, r4
 618 001e FFF7FEFF 		bl	FSDev_SD_SPI_Cmd
 619              	.LVL43:
1888:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         (resp_r1 != FS_DEV_SD_SPI_R1_IN_IDLE_STATE)) {
 620              		.loc 1 1888 5 is_stmt 1 view .LVU165
ARM GAS  /tmp/ccOtrZZk.s 			page 57


1888:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         (resp_r1 != FS_DEV_SD_SPI_R1_IN_IDLE_STATE)) {
 621              		.loc 1 1888 8 is_stmt 0 view .LVU166
 622 0022 0128     		cmp	r0, #1
 623 0024 13D8     		bhi	.L56
1894:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 624              		.loc 1 1894 5 is_stmt 1 view .LVU167
 625 0026 0121     		movs	r1, #1
 626 0028 A088     		ldrh	r0, [r4, #4]
 627              	.LVL44:
1894:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 628              		.loc 1 1894 5 is_stmt 0 view .LVU168
 629 002a FFF7FEFF 		bl	FSDev_SD_SPI_WaitClks
 630              	.LVL45:
1896:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                acmd,
 631              		.loc 1 1896 5 is_stmt 1 view .LVU169
1896:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                acmd,
 632              		.loc 1 1896 15 is_stmt 0 view .LVU170
 633 002e 3A46     		mov	r2, r7
 634 0030 3146     		mov	r1, r6
 635 0032 2046     		mov	r0, r4
 636 0034 FFF7FEFF 		bl	FSDev_SD_SPI_Cmd
 637              	.LVL46:
 638 0038 0546     		mov	r5, r0
 639              	.LVL47:
1900:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     return (resp_r1);
 640              		.loc 1 1900 5 is_stmt 1 view .LVU171
 641 003a 0121     		movs	r1, #1
 642 003c A088     		ldrh	r0, [r4, #4]
 643 003e FFF7FEFF 		bl	FSDev_SD_SPI_WaitClks
 644              	.LVL48:
1900:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     return (resp_r1);
 645              		.loc 1 1900 5 view .LVU172
 646 0042 084B     		ldr	r3, .L57
 647 0044 DB69     		ldr	r3, [r3, #28]
 648 0046 A088     		ldrh	r0, [r4, #4]
 649 0048 9847     		blx	r3
 650              	.LVL49:
1900:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     return (resp_r1);
 651              		.loc 1 1900 47 view .LVU173
1901:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** }
 652              		.loc 1 1901 5 view .LVU174
 653              	.L54:
1902:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 654              		.loc 1 1902 1 is_stmt 0 view .LVU175
 655 004a 2846     		mov	r0, r5
 656 004c F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 657              	.LVL50:
 658              	.L56:
1902:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 659              		.loc 1 1902 1 view .LVU176
 660 004e 0546     		mov	r5, r0
1890:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         return (resp_r1);
 661              		.loc 1 1890 9 is_stmt 1 view .LVU177
 662 0050 0121     		movs	r1, #1
 663 0052 A088     		ldrh	r0, [r4, #4]
 664              	.LVL51:
1890:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         return (resp_r1);
ARM GAS  /tmp/ccOtrZZk.s 			page 58


 665              		.loc 1 1890 9 is_stmt 0 view .LVU178
 666 0054 FFF7FEFF 		bl	FSDev_SD_SPI_WaitClks
 667              	.LVL52:
1890:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         return (resp_r1);
 668              		.loc 1 1890 9 is_stmt 1 view .LVU179
 669 0058 024B     		ldr	r3, .L57
 670 005a DB69     		ldr	r3, [r3, #28]
 671 005c A088     		ldrh	r0, [r4, #4]
 672 005e 9847     		blx	r3
 673              	.LVL53:
1890:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         return (resp_r1);
 674              		.loc 1 1890 51 view .LVU180
1891:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     }
 675              		.loc 1 1891 9 view .LVU181
1891:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     }
 676              		.loc 1 1891 16 is_stmt 0 view .LVU182
 677 0060 F3E7     		b	.L54
 678              	.L58:
 679 0062 00BF     		.align	2
 680              	.L57:
 681 0064 00000000 		.word	FSDev_SD_SPI_BSP_SPI
 682              		.cfi_endproc
 683              	.LFE16:
 685              		.section	.text.FSDev_SD_SPI_CmdR3_7,"ax",%progbits
 686              		.align	1
 687              		.syntax unified
 688              		.thumb
 689              		.thumb_func
 690              		.fpu fpv4-sp-d16
 692              	FSDev_SD_SPI_CmdR3_7:
 693              	.LVL54:
 694              	.LFB15:
1832:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     CPU_INT08U  resp_r1;
 695              		.loc 1 1832 1 is_stmt 1 view -0
 696              		.cfi_startproc
 697              		@ args = 0, pretend = 0, frame = 0
 698              		@ frame_needed = 0, uses_anonymous_args = 0
1832:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     CPU_INT08U  resp_r1;
 699              		.loc 1 1832 1 is_stmt 0 view .LVU184
 700 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 701              	.LCFI13:
 702              		.cfi_def_cfa_offset 24
 703              		.cfi_offset 3, -24
 704              		.cfi_offset 4, -20
 705              		.cfi_offset 5, -16
 706              		.cfi_offset 6, -12
 707              		.cfi_offset 7, -8
 708              		.cfi_offset 14, -4
 709 0002 0446     		mov	r4, r0
 710 0004 0D46     		mov	r5, r1
 711 0006 1646     		mov	r6, r2
 712 0008 1F46     		mov	r7, r3
1833:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 713              		.loc 1 1833 5 is_stmt 1 view .LVU185
1836:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 714              		.loc 1 1836 5 view .LVU186
 715 000a 144B     		ldr	r3, .L64
ARM GAS  /tmp/ccOtrZZk.s 			page 59


 716              	.LVL55:
1836:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 717              		.loc 1 1836 5 is_stmt 0 view .LVU187
 718 000c 9B69     		ldr	r3, [r3, #24]
 719 000e 8088     		ldrh	r0, [r0, #4]
 720              	.LVL56:
1836:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 721              		.loc 1 1836 5 view .LVU188
 722 0010 9847     		blx	r3
 723              	.LVL57:
1836:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 724              		.loc 1 1836 5 is_stmt 1 view .LVU189
 725 0012 0121     		movs	r1, #1
 726 0014 A088     		ldrh	r0, [r4, #4]
 727 0016 FFF7FEFF 		bl	FSDev_SD_SPI_WaitClks
 728              	.LVL58:
1836:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 729              		.loc 1 1836 48 view .LVU190
1838:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                cmd,
 730              		.loc 1 1838 5 view .LVU191
1838:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                cmd,
 731              		.loc 1 1838 15 is_stmt 0 view .LVU192
 732 001a 3246     		mov	r2, r6
 733 001c 2946     		mov	r1, r5
 734 001e 2046     		mov	r0, r4
 735 0020 FFF7FEFF 		bl	FSDev_SD_SPI_Cmd
 736              	.LVL59:
 737 0024 0546     		mov	r5, r0
 738              	.LVL60:
1842:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         (resp_r1 != FS_DEV_SD_SPI_R1_IN_IDLE_STATE)) {
 739              		.loc 1 1842 5 is_stmt 1 view .LVU193
1842:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         (resp_r1 != FS_DEV_SD_SPI_R1_IN_IDLE_STATE)) {
 740              		.loc 1 1842 8 is_stmt 0 view .LVU194
 741 0026 0128     		cmp	r0, #1
 742 0028 0ED8     		bhi	.L63
1848:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                             resp,
 743              		.loc 1 1848 5 is_stmt 1 view .LVU195
1848:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                             resp,
 744              		.loc 1 1848 25 is_stmt 0 view .LVU196
 745 002a 0C4E     		ldr	r6, .L64
 746              	.LVL61:
1848:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                             resp,
 747              		.loc 1 1848 25 view .LVU197
 748 002c 3369     		ldr	r3, [r6, #16]
1848:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                             resp,
 749              		.loc 1 1848 5 view .LVU198
 750 002e 0422     		movs	r2, #4
 751 0030 3946     		mov	r1, r7
 752 0032 A088     		ldrh	r0, [r4, #4]
 753              	.LVL62:
1848:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                             resp,
 754              		.loc 1 1848 5 view .LVU199
 755 0034 9847     		blx	r3
 756              	.LVL63:
1852:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     return (resp_r1);
 757              		.loc 1 1852 5 is_stmt 1 view .LVU200
 758 0036 0121     		movs	r1, #1
ARM GAS  /tmp/ccOtrZZk.s 			page 60


 759 0038 A088     		ldrh	r0, [r4, #4]
 760 003a FFF7FEFF 		bl	FSDev_SD_SPI_WaitClks
 761              	.LVL64:
1852:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     return (resp_r1);
 762              		.loc 1 1852 5 view .LVU201
 763 003e F369     		ldr	r3, [r6, #28]
 764 0040 A088     		ldrh	r0, [r4, #4]
 765 0042 9847     		blx	r3
 766              	.LVL65:
1852:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     return (resp_r1);
 767              		.loc 1 1852 47 view .LVU202
1853:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** }
 768              		.loc 1 1853 5 view .LVU203
 769              	.L61:
1854:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 770              		.loc 1 1854 1 is_stmt 0 view .LVU204
 771 0044 2846     		mov	r0, r5
 772 0046 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 773              	.LVL66:
 774              	.L63:
1844:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         return (resp_r1);
 775              		.loc 1 1844 9 is_stmt 1 view .LVU205
 776 0048 0121     		movs	r1, #1
 777 004a A088     		ldrh	r0, [r4, #4]
 778              	.LVL67:
1844:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         return (resp_r1);
 779              		.loc 1 1844 9 is_stmt 0 view .LVU206
 780 004c FFF7FEFF 		bl	FSDev_SD_SPI_WaitClks
 781              	.LVL68:
1844:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         return (resp_r1);
 782              		.loc 1 1844 9 is_stmt 1 view .LVU207
 783 0050 024B     		ldr	r3, .L64
 784 0052 DB69     		ldr	r3, [r3, #28]
 785 0054 A088     		ldrh	r0, [r4, #4]
 786 0056 9847     		blx	r3
 787              	.LVL69:
1844:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         return (resp_r1);
 788              		.loc 1 1844 51 view .LVU208
1845:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     }
 789              		.loc 1 1845 9 view .LVU209
1845:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     }
 790              		.loc 1 1845 16 is_stmt 0 view .LVU210
 791 0058 F4E7     		b	.L61
 792              	.L65:
 793 005a 00BF     		.align	2
 794              	.L64:
 795 005c 00000000 		.word	FSDev_SD_SPI_BSP_SPI
 796              		.cfi_endproc
 797              	.LFE15:
 799              		.section	.text.FSDev_SD_SPI_CmdR1,"ax",%progbits
 800              		.align	1
 801              		.syntax unified
 802              		.thumb
 803              		.thumb_func
 804              		.fpu fpv4-sp-d16
 806              	FSDev_SD_SPI_CmdR1:
 807              	.LVL70:
ARM GAS  /tmp/ccOtrZZk.s 			page 61


 808              	.LFB14:
1793:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     CPU_INT08U  resp_r1;
 809              		.loc 1 1793 1 is_stmt 1 view -0
 810              		.cfi_startproc
 811              		@ args = 0, pretend = 0, frame = 0
 812              		@ frame_needed = 0, uses_anonymous_args = 0
1793:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     CPU_INT08U  resp_r1;
 813              		.loc 1 1793 1 is_stmt 0 view .LVU212
 814 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 815              	.LCFI14:
 816              		.cfi_def_cfa_offset 24
 817              		.cfi_offset 3, -24
 818              		.cfi_offset 4, -20
 819              		.cfi_offset 5, -16
 820              		.cfi_offset 6, -12
 821              		.cfi_offset 7, -8
 822              		.cfi_offset 14, -4
 823 0002 0446     		mov	r4, r0
 824 0004 0D46     		mov	r5, r1
 825 0006 1646     		mov	r6, r2
1794:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 826              		.loc 1 1794 5 is_stmt 1 view .LVU213
1797:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     resp_r1 = FSDev_SD_SPI_Cmd(p_sd_spi_data,                   /* Get 1st resp byte.              
 827              		.loc 1 1797 5 view .LVU214
 828 0008 0B4F     		ldr	r7, .L68
 829 000a BB69     		ldr	r3, [r7, #24]
 830 000c 8088     		ldrh	r0, [r0, #4]
 831              	.LVL71:
1797:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     resp_r1 = FSDev_SD_SPI_Cmd(p_sd_spi_data,                   /* Get 1st resp byte.              
 832              		.loc 1 1797 5 is_stmt 0 view .LVU215
 833 000e 9847     		blx	r3
 834              	.LVL72:
1797:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     resp_r1 = FSDev_SD_SPI_Cmd(p_sd_spi_data,                   /* Get 1st resp byte.              
 835              		.loc 1 1797 5 is_stmt 1 view .LVU216
 836 0010 0121     		movs	r1, #1
 837 0012 A088     		ldrh	r0, [r4, #4]
 838 0014 FFF7FEFF 		bl	FSDev_SD_SPI_WaitClks
 839              	.LVL73:
1797:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     resp_r1 = FSDev_SD_SPI_Cmd(p_sd_spi_data,                   /* Get 1st resp byte.              
 840              		.loc 1 1797 48 view .LVU217
1798:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                cmd,
 841              		.loc 1 1798 5 view .LVU218
1798:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                cmd,
 842              		.loc 1 1798 15 is_stmt 0 view .LVU219
 843 0018 3246     		mov	r2, r6
 844 001a 2946     		mov	r1, r5
 845 001c 2046     		mov	r0, r4
 846 001e FFF7FEFF 		bl	FSDev_SD_SPI_Cmd
 847              	.LVL74:
 848 0022 0546     		mov	r5, r0
 849              	.LVL75:
1801:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 850              		.loc 1 1801 5 is_stmt 1 view .LVU220
 851 0024 0121     		movs	r1, #1
 852 0026 A088     		ldrh	r0, [r4, #4]
 853 0028 FFF7FEFF 		bl	FSDev_SD_SPI_WaitClks
 854              	.LVL76:
ARM GAS  /tmp/ccOtrZZk.s 			page 62


1801:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 855              		.loc 1 1801 5 view .LVU221
 856 002c FB69     		ldr	r3, [r7, #28]
 857 002e A088     		ldrh	r0, [r4, #4]
 858 0030 9847     		blx	r3
 859              	.LVL77:
1801:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 860              		.loc 1 1801 47 view .LVU222
1804:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** }
 861              		.loc 1 1804 5 view .LVU223
1805:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 862              		.loc 1 1805 1 is_stmt 0 view .LVU224
 863 0032 2846     		mov	r0, r5
 864 0034 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 865              	.LVL78:
 866              	.L69:
1805:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 867              		.loc 1 1805 1 view .LVU225
 868 0036 00BF     		.align	2
 869              	.L68:
 870 0038 00000000 		.word	FSDev_SD_SPI_BSP_SPI
 871              		.cfi_endproc
 872              	.LFE14:
 874              		.section	.text.FSDev_SD_SPI_MakeRdy,"ax",%progbits
 875              		.align	1
 876              		.syntax unified
 877              		.thumb
 878              		.thumb_func
 879              		.fpu fpv4-sp-d16
 881              	FSDev_SD_SPI_MakeRdy:
 882              	.LVL79:
 883              	.LFB12:
1578:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     CPU_INT08U  card_type;
 884              		.loc 1 1578 1 is_stmt 1 view -0
 885              		.cfi_startproc
 886              		@ args = 0, pretend = 0, frame = 8
 887              		@ frame_needed = 0, uses_anonymous_args = 0
1578:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     CPU_INT08U  card_type;
 888              		.loc 1 1578 1 is_stmt 0 view .LVU227
 889 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 890              	.LCFI15:
 891              		.cfi_def_cfa_offset 20
 892              		.cfi_offset 4, -20
 893              		.cfi_offset 5, -16
 894              		.cfi_offset 6, -12
 895              		.cfi_offset 7, -8
 896              		.cfi_offset 14, -4
 897 0002 83B0     		sub	sp, sp, #12
 898              	.LCFI16:
 899              		.cfi_def_cfa_offset 32
 900 0004 0546     		mov	r5, r0
1579:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     CPU_INT08U  resp_r1;
 901              		.loc 1 1579 5 is_stmt 1 view .LVU228
1580:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     CPU_INT08U  resp_r3_7[4];
 902              		.loc 1 1580 5 view .LVU229
1581:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     CPU_INT08U  retries;
 903              		.loc 1 1581 5 view .LVU230
ARM GAS  /tmp/ccOtrZZk.s 			page 63


1582:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 904              		.loc 1 1582 5 view .LVU231
1586:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                    FS_DEV_SD_CMD_SEND_IF_COND,
 905              		.loc 1 1586 5 view .LVU232
1586:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                    FS_DEV_SD_CMD_SEND_IF_COND,
 906              		.loc 1 1586 15 is_stmt 0 view .LVU233
 907 0006 01AB     		add	r3, sp, #4
 908 0008 40F2A512 		movw	r2, #421
 909 000c 0821     		movs	r1, #8
 910 000e FFF7FEFF 		bl	FSDev_SD_SPI_CmdR3_7
 911              	.LVL80:
1592:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     if (resp_r1 == FS_DEV_SD_SPI_R1_IN_IDLE_STATE) {
 912              		.loc 1 1592 5 is_stmt 1 view .LVU234
1593:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         if (resp_r3_7[3] == FS_DEV_SD_CMD8_CHK_PATTERN) {
 913              		.loc 1 1593 5 view .LVU235
1593:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         if (resp_r3_7[3] == FS_DEV_SD_CMD8_CHK_PATTERN) {
 914              		.loc 1 1593 8 is_stmt 0 view .LVU236
 915 0012 0128     		cmp	r0, #1
 916 0014 13D0     		beq	.L90
1592:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     if (resp_r1 == FS_DEV_SD_SPI_R1_IN_IDLE_STATE) {
 917              		.loc 1 1592 15 view .LVU237
 918 0016 0126     		movs	r6, #1
 919              	.L71:
 920              	.LVL81:
1602:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     resp_r1 = FS_DEV_SD_SPI_RESP_EMPTY;
 921              		.loc 1 1602 5 is_stmt 1 view .LVU238
1603:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     while (retries < FS_DEV_SD_SPI_CMD_TIMEOUT) {
 922              		.loc 1 1603 5 view .LVU239
1604:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         resp_r1 = FSDev_SD_SPI_AppCmdR1(p_sd_spi_data,          /* Perform ACMD41.                 
 923              		.loc 1 1604 5 view .LVU240
1602:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     resp_r1 = FS_DEV_SD_SPI_RESP_EMPTY;
 924              		.loc 1 1602 13 is_stmt 0 view .LVU241
 925 0018 0024     		movs	r4, #0
1603:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     while (retries < FS_DEV_SD_SPI_CMD_TIMEOUT) {
 926              		.loc 1 1603 13 view .LVU242
 927 001a FF27     		movs	r7, #255
 928              	.LVL82:
 929              	.L72:
1604:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         resp_r1 = FSDev_SD_SPI_AppCmdR1(p_sd_spi_data,          /* Perform ACMD41.                 
 930              		.loc 1 1604 11 is_stmt 1 view .LVU243
 931 001c 14F0800F 		tst	r4, #128
 932 0020 14D1     		bne	.L73
1605:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                         FS_DEV_SD_ACMD_SD_SEND_OP_COND,
 933              		.loc 1 1605 9 view .LVU244
1605:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                         FS_DEV_SD_ACMD_SD_SEND_OP_COND,
 934              		.loc 1 1605 19 is_stmt 0 view .LVU245
 935 0022 4FF08042 		mov	r2, #1073741824
 936 0026 2921     		movs	r1, #41
 937 0028 2846     		mov	r0, r5
 938 002a FFF7FEFF 		bl	FSDev_SD_SPI_AppCmdR1
 939              	.LVL83:
1609:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****             break;
 940              		.loc 1 1609 9 is_stmt 1 view .LVU246
1609:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****             break;
 941              		.loc 1 1609 12 is_stmt 0 view .LVU247
 942 002e 0746     		mov	r7, r0
 943 0030 60B1     		cbz	r0, .L73
ARM GAS  /tmp/ccOtrZZk.s 			page 64


1613:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 944              		.loc 1 1613 9 is_stmt 1 view .LVU248
 945 0032 0220     		movs	r0, #2
 946              	.LVL84:
1613:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 947              		.loc 1 1613 9 is_stmt 0 view .LVU249
 948 0034 FFF7FEFF 		bl	FS_OS_Dly_ms
 949              	.LVL85:
1615:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     }
 950              		.loc 1 1615 9 is_stmt 1 view .LVU250
1615:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     }
 951              		.loc 1 1615 16 is_stmt 0 view .LVU251
 952 0038 0134     		adds	r4, r4, #1
 953              	.LVL86:
1615:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     }
 954              		.loc 1 1615 16 view .LVU252
 955 003a E4B2     		uxtb	r4, r4
 956              	.LVL87:
1615:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     }
 957              		.loc 1 1615 16 view .LVU253
 958 003c EEE7     		b	.L72
 959              	.LVL88:
 960              	.L90:
1615:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     }
 961              		.loc 1 1615 16 view .LVU254
 962 003e 0646     		mov	r6, r0
1594:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****             card_type = FS_DEV_SD_CARDTYPE_SD_V2_0;
 963              		.loc 1 1594 9 is_stmt 1 view .LVU255
1594:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****             card_type = FS_DEV_SD_CARDTYPE_SD_V2_0;
 964              		.loc 1 1594 22 is_stmt 0 view .LVU256
 965 0040 9DF80730 		ldrb	r3, [sp, #7]	@ zero_extendqisi2
1594:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****             card_type = FS_DEV_SD_CARDTYPE_SD_V2_0;
 966              		.loc 1 1594 12 view .LVU257
 967 0044 A52B     		cmp	r3, #165
 968 0046 E7D1     		bne	.L71
1595:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         }
 969              		.loc 1 1595 23 view .LVU258
 970 0048 0226     		movs	r6, #2
 971 004a E5E7     		b	.L71
 972              	.LVL89:
 973              	.L73:
1621:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         retries = 0u;
 974              		.loc 1 1621 5 is_stmt 1 view .LVU259
1621:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         retries = 0u;
 975              		.loc 1 1621 8 is_stmt 0 view .LVU260
 976 004c 0FB9     		cbnz	r7, .L85
 977              	.LVL90:
 978              	.L76:
1645:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     while (retries < FS_DEV_SD_SPI_CMD_TIMEOUT) {
 979              		.loc 1 1645 5 is_stmt 1 view .LVU261
1646:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         resp_r1 = FSDev_SD_SPI_CmdR3_7(p_sd_spi_data,           /* Perform CMD58.                  
 980              		.loc 1 1646 5 view .LVU262
1645:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     while (retries < FS_DEV_SD_SPI_CMD_TIMEOUT) {
 981              		.loc 1 1645 13 is_stmt 0 view .LVU263
 982 004e 0024     		movs	r4, #0
1646:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         resp_r1 = FSDev_SD_SPI_CmdR3_7(p_sd_spi_data,           /* Perform CMD58.                  
 983              		.loc 1 1646 11 view .LVU264
ARM GAS  /tmp/ccOtrZZk.s 			page 65


 984 0050 15E0     		b	.L80
 985              	.LVL91:
 986              	.L85:
1622:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         while (retries < FS_DEV_SD_SPI_CMD_TIMEOUT) {
 987              		.loc 1 1622 17 view .LVU265
 988 0052 0024     		movs	r4, #0
 989              	.LVL92:
 990              	.L75:
1623:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****             resp_r1 = FSDev_SD_SPI_CmdR1(p_sd_spi_data,
 991              		.loc 1 1623 15 is_stmt 1 view .LVU266
 992 0054 14F0800F 		tst	r4, #128
 993 0058 0CD1     		bne	.L77
1624:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                          FS_DEV_SD_CMD_SEND_OP_COND,
 994              		.loc 1 1624 13 view .LVU267
1624:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                          FS_DEV_SD_CMD_SEND_OP_COND,
 995              		.loc 1 1624 23 is_stmt 0 view .LVU268
 996 005a 0022     		movs	r2, #0
 997 005c 0121     		movs	r1, #1
 998 005e 2846     		mov	r0, r5
 999 0060 FFF7FEFF 		bl	FSDev_SD_SPI_CmdR1
 1000              	.LVL93:
1628:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                 break;
 1001              		.loc 1 1628 13 is_stmt 1 view .LVU269
1628:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                 break;
 1002              		.loc 1 1628 16 is_stmt 0 view .LVU270
 1003 0064 0746     		mov	r7, r0
 1004 0066 28B1     		cbz	r0, .L77
1632:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****             retries++;
 1005              		.loc 1 1632 13 is_stmt 1 view .LVU271
 1006 0068 0220     		movs	r0, #2
 1007              	.LVL94:
1632:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****             retries++;
 1008              		.loc 1 1632 13 is_stmt 0 view .LVU272
 1009 006a FFF7FEFF 		bl	FS_OS_Dly_ms
 1010              	.LVL95:
1633:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         }
 1011              		.loc 1 1633 13 is_stmt 1 view .LVU273
1633:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         }
 1012              		.loc 1 1633 20 is_stmt 0 view .LVU274
 1013 006e 0134     		adds	r4, r4, #1
 1014              	.LVL96:
1633:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         }
 1015              		.loc 1 1633 20 view .LVU275
 1016 0070 E4B2     		uxtb	r4, r4
 1017              	.LVL97:
1633:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         }
 1018              		.loc 1 1633 20 view .LVU276
 1019 0072 EFE7     		b	.L75
 1020              	.L77:
 1021              	.LVL98:
1636:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****             return (FS_DEV_SD_CARDTYPE_NONE);
 1022              		.loc 1 1636 9 is_stmt 1 view .LVU277
1636:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****             return (FS_DEV_SD_CARDTYPE_NONE);
 1023              		.loc 1 1636 12 is_stmt 0 view .LVU278
 1024 0074 EFB9     		cbnz	r7, .L86
1640:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     }
 1025              		.loc 1 1640 19 view .LVU279
ARM GAS  /tmp/ccOtrZZk.s 			page 66


 1026 0076 0426     		movs	r6, #4
 1027              	.LVL99:
1640:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     }
 1028              		.loc 1 1640 19 view .LVU280
 1029 0078 E9E7     		b	.L76
 1030              	.LVL100:
 1031              	.L81:
1668:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     }
 1032              		.loc 1 1668 9 is_stmt 1 view .LVU281
1668:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     }
 1033              		.loc 1 1668 16 is_stmt 0 view .LVU282
 1034 007a 0134     		adds	r4, r4, #1
 1035              	.LVL101:
1668:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     }
 1036              		.loc 1 1668 16 view .LVU283
 1037 007c E4B2     		uxtb	r4, r4
 1038              	.LVL102:
 1039              	.L80:
1646:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         resp_r1 = FSDev_SD_SPI_CmdR3_7(p_sd_spi_data,           /* Perform CMD58.                  
 1040              		.loc 1 1646 11 is_stmt 1 view .LVU284
 1041 007e 14F0800F 		tst	r4, #128
 1042 0082 13D1     		bne	.L79
1647:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                        FS_DEV_SD_CMD_READ_OCR,
 1043              		.loc 1 1647 9 view .LVU285
1647:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                        FS_DEV_SD_CMD_READ_OCR,
 1044              		.loc 1 1647 19 is_stmt 0 view .LVU286
 1045 0084 01AB     		add	r3, sp, #4
 1046 0086 4FF08042 		mov	r2, #1073741824
 1047 008a 3A21     		movs	r1, #58
 1048 008c 2846     		mov	r0, r5
 1049 008e FFF7FEFF 		bl	FSDev_SD_SPI_CmdR3_7
 1050              	.LVL103:
1652:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****             if (DEF_BIT_IS_SET(resp_r3_7[0], (FS_DEV_SD_OCR_BUSY >> (3u * DEF_OCTET_NBR_BITS))) == 
 1051              		.loc 1 1652 9 is_stmt 1 view .LVU287
1652:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****             if (DEF_BIT_IS_SET(resp_r3_7[0], (FS_DEV_SD_OCR_BUSY >> (3u * DEF_OCTET_NBR_BITS))) == 
 1052              		.loc 1 1652 12 is_stmt 0 view .LVU288
 1053 0092 0028     		cmp	r0, #0
 1054 0094 F1D1     		bne	.L81
1653:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                                 /* Chk for HC card.                
 1055              		.loc 1 1653 13 is_stmt 1 view .LVU289
1653:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                                 /* Chk for HC card.                
 1056              		.loc 1 1653 17 is_stmt 0 view .LVU290
 1057 0096 9DF80430 		ldrb	r3, [sp, #4]	@ zero_extendqisi2
1653:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                                 /* Chk for HC card.                
 1058              		.loc 1 1653 16 view .LVU291
 1059 009a DA09     		lsrs	r2, r3, #7
 1060 009c EDD0     		beq	.L81
1655:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                     if (card_type == FS_DEV_SD_CARDTYPE_SD_V2_0) {
 1061              		.loc 1 1655 17 is_stmt 1 view .LVU292
1655:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                     if (card_type == FS_DEV_SD_CARDTYPE_SD_V2_0) {
 1062              		.loc 1 1655 20 is_stmt 0 view .LVU293
 1063 009e 13F0400F 		tst	r3, #64
 1064 00a2 03D0     		beq	.L79
1656:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                         card_type =  FS_DEV_SD_CARDTYPE_SD_V2_0_HC;
 1065              		.loc 1 1656 21 is_stmt 1 view .LVU294
1656:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                         card_type =  FS_DEV_SD_CARDTYPE_SD_V2_0_HC;
 1066              		.loc 1 1656 24 is_stmt 0 view .LVU295
ARM GAS  /tmp/ccOtrZZk.s 			page 67


 1067 00a4 022E     		cmp	r6, #2
 1068 00a6 06D0     		beq	.L87
1659:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                             card_type =  FS_DEV_SD_CARDTYPE_MMC_HC;
 1069              		.loc 1 1659 25 is_stmt 1 view .LVU296
1659:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                             card_type =  FS_DEV_SD_CARDTYPE_MMC_HC;
 1070              		.loc 1 1659 28 is_stmt 0 view .LVU297
 1071 00a8 042E     		cmp	r6, #4
 1072 00aa 06D0     		beq	.L91
 1073              	.LVL104:
 1074              	.L79:
1673:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 1075              		.loc 1 1673 1 view .LVU298
 1076 00ac 3046     		mov	r0, r6
 1077 00ae 03B0     		add	sp, sp, #12
 1078              	.LCFI17:
 1079              		.cfi_remember_state
 1080              		.cfi_def_cfa_offset 20
 1081              		@ sp needed
 1082 00b0 F0BD     		pop	{r4, r5, r6, r7, pc}
 1083              	.LVL105:
 1084              	.L86:
 1085              	.LCFI18:
 1086              		.cfi_restore_state
1637:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         }
 1087              		.loc 1 1637 20 view .LVU299
 1088 00b2 0026     		movs	r6, #0
 1089              	.LVL106:
1637:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         }
 1090              		.loc 1 1637 20 view .LVU300
 1091 00b4 FAE7     		b	.L79
 1092              	.LVL107:
 1093              	.L87:
1657:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                     } else {
 1094              		.loc 1 1657 35 view .LVU301
 1095 00b6 0326     		movs	r6, #3
 1096              	.LVL108:
1657:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                     } else {
 1097              		.loc 1 1657 35 view .LVU302
 1098 00b8 F8E7     		b	.L79
 1099              	.LVL109:
 1100              	.L91:
1660:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                         }
 1101              		.loc 1 1660 39 view .LVU303
 1102 00ba 0526     		movs	r6, #5
 1103              	.LVL110:
1660:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                         }
 1104              		.loc 1 1660 39 view .LVU304
 1105 00bc F6E7     		b	.L79
 1106              		.cfi_endproc
 1107              	.LFE12:
 1109              		.section	.text.FSDev_SD_SPI_RdData,"ax",%progbits
 1110              		.align	1
 1111              		.syntax unified
 1112              		.thumb
 1113              		.thumb_func
 1114              		.fpu fpv4-sp-d16
 1116              	FSDev_SD_SPI_RdData:
ARM GAS  /tmp/ccOtrZZk.s 			page 68


 1117              	.LVL111:
 1118              	.LFB17:
1933:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     CPU_INT08U  crc_buf[2];
 1119              		.loc 1 1933 1 is_stmt 1 view -0
 1120              		.cfi_startproc
 1121              		@ args = 4, pretend = 0, frame = 8
 1122              		@ frame_needed = 0, uses_anonymous_args = 0
1933:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     CPU_INT08U  crc_buf[2];
 1123              		.loc 1 1933 1 is_stmt 0 view .LVU306
 1124 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 1125              	.LCFI19:
 1126              		.cfi_def_cfa_offset 20
 1127              		.cfi_offset 4, -20
 1128              		.cfi_offset 5, -16
 1129              		.cfi_offset 6, -12
 1130              		.cfi_offset 7, -8
 1131              		.cfi_offset 14, -4
 1132 0002 83B0     		sub	sp, sp, #12
 1133              	.LCFI20:
 1134              		.cfi_def_cfa_offset 32
 1135 0004 0446     		mov	r4, r0
 1136 0006 0D46     		mov	r5, r1
 1137 0008 1646     		mov	r6, r2
 1138 000a 1F46     		mov	r7, r3
1934:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** #if (FS_DEV_SD_SPI_CFG_CRC_EN == DEF_ENABLED)
 1139              		.loc 1 1934 5 is_stmt 1 view .LVU307
1939:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     CPU_INT08U  token;
 1140              		.loc 1 1939 5 view .LVU308
1940:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 1141              		.loc 1 1940 5 view .LVU309
1943:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 1142              		.loc 1 1943 5 view .LVU310
 1143 000c 1D4A     		ldr	r2, .L99
 1144              	.LVL112:
1943:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 1145              		.loc 1 1943 5 is_stmt 0 view .LVU311
 1146 000e 9269     		ldr	r2, [r2, #24]
 1147 0010 8088     		ldrh	r0, [r0, #4]
 1148              	.LVL113:
1943:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 1149              		.loc 1 1943 5 view .LVU312
 1150 0012 9047     		blx	r2
 1151              	.LVL114:
1943:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 1152              		.loc 1 1943 5 is_stmt 1 view .LVU313
 1153 0014 0121     		movs	r1, #1
 1154 0016 A088     		ldrh	r0, [r4, #4]
 1155 0018 FFF7FEFF 		bl	FSDev_SD_SPI_WaitClks
 1156              	.LVL115:
1943:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 1157              		.loc 1 1943 48 view .LVU314
1945:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                cmd,
 1158              		.loc 1 1945 5 view .LVU315
1945:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                cmd,
 1159              		.loc 1 1945 15 is_stmt 0 view .LVU316
 1160 001c 3246     		mov	r2, r6
 1161 001e 2946     		mov	r1, r5
ARM GAS  /tmp/ccOtrZZk.s 			page 69


 1162 0020 2046     		mov	r0, r4
 1163 0022 FFF7FEFF 		bl	FSDev_SD_SPI_Cmd
 1164              	.LVL116:
1949:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FS_DEV_SD_SPI_EXIT(p_sd_spi_data->UnitNbr);             /* 'Exit' SPI access.              
 1165              		.loc 1 1949 5 is_stmt 1 view .LVU317
1949:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FS_DEV_SD_SPI_EXIT(p_sd_spi_data->UnitNbr);             /* 'Exit' SPI access.              
 1166              		.loc 1 1949 8 is_stmt 0 view .LVU318
 1167 0026 D0B9     		cbnz	r0, .L97
 1168 0028 0546     		mov	r5, r0
1955:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 1169              		.loc 1 1955 5 is_stmt 1 view .LVU319
1955:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 1170              		.loc 1 1955 13 is_stmt 0 view .LVU320
 1171 002a A088     		ldrh	r0, [r4, #4]
 1172              	.LVL117:
1955:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 1173              		.loc 1 1955 13 view .LVU321
 1174 002c FFF7FEFF 		bl	FSDev_SD_SPI_WaitForStart
 1175              	.LVL118:
1957:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FS_DEV_SD_SPI_EXIT(p_sd_spi_data->UnitNbr);             /* 'Exit' SPI access.              
 1176              		.loc 1 1957 5 is_stmt 1 view .LVU322
1957:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FS_DEV_SD_SPI_EXIT(p_sd_spi_data->UnitNbr);             /* 'Exit' SPI access.              
 1177              		.loc 1 1957 8 is_stmt 0 view .LVU323
 1178 0030 FE28     		cmp	r0, #254
 1179 0032 1ED1     		bne	.L98
1963:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                             p_dest,
 1180              		.loc 1 1963 5 is_stmt 1 view .LVU324
1963:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                             p_dest,
 1181              		.loc 1 1963 25 is_stmt 0 view .LVU325
 1182 0034 134D     		ldr	r5, .L99
 1183 0036 2E69     		ldr	r6, [r5, #16]
 1184              	.LVL119:
1963:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                             p_dest,
 1185              		.loc 1 1963 5 view .LVU326
 1186 0038 089A     		ldr	r2, [sp, #32]
 1187 003a 3946     		mov	r1, r7
 1188 003c A088     		ldrh	r0, [r4, #4]
 1189              	.LVL120:
1963:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                             p_dest,
 1190              		.loc 1 1963 5 view .LVU327
 1191 003e B047     		blx	r6
 1192              	.LVL121:
1967:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                             &crc_buf[0],
 1193              		.loc 1 1967 5 is_stmt 1 view .LVU328
 1194 0040 0222     		movs	r2, #2
 1195 0042 01A9     		add	r1, sp, #4
 1196 0044 A088     		ldrh	r0, [r4, #4]
 1197 0046 B047     		blx	r6
 1198              	.LVL122:
1982:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     return (DEF_OK);
 1199              		.loc 1 1982 5 view .LVU329
 1200 0048 0121     		movs	r1, #1
 1201 004a A088     		ldrh	r0, [r4, #4]
 1202 004c FFF7FEFF 		bl	FSDev_SD_SPI_WaitClks
 1203              	.LVL123:
1982:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     return (DEF_OK);
 1204              		.loc 1 1982 5 view .LVU330
ARM GAS  /tmp/ccOtrZZk.s 			page 70


 1205 0050 EB69     		ldr	r3, [r5, #28]
 1206 0052 A088     		ldrh	r0, [r4, #4]
 1207 0054 9847     		blx	r3
 1208              	.LVL124:
1982:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     return (DEF_OK);
 1209              		.loc 1 1982 47 view .LVU331
1983:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** }
 1210              		.loc 1 1983 5 view .LVU332
1983:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** }
 1211              		.loc 1 1983 12 is_stmt 0 view .LVU333
 1212 0056 0125     		movs	r5, #1
 1213              	.L94:
1984:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 1214              		.loc 1 1984 1 view .LVU334
 1215 0058 2846     		mov	r0, r5
 1216 005a 03B0     		add	sp, sp, #12
 1217              	.LCFI21:
 1218              		.cfi_remember_state
 1219              		.cfi_def_cfa_offset 20
 1220              		@ sp needed
 1221 005c F0BD     		pop	{r4, r5, r6, r7, pc}
 1222              	.LVL125:
 1223              	.L97:
 1224              	.LCFI22:
 1225              		.cfi_restore_state
1950:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FS_TRACE_DBG(("FSDev_SD_SPI_RdData(): Failed to rd card: cmd err: %02X.\r\n", resp_r1));
 1226              		.loc 1 1950 9 is_stmt 1 view .LVU335
 1227 005e 0121     		movs	r1, #1
 1228 0060 A088     		ldrh	r0, [r4, #4]
 1229              	.LVL126:
1950:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FS_TRACE_DBG(("FSDev_SD_SPI_RdData(): Failed to rd card: cmd err: %02X.\r\n", resp_r1));
 1230              		.loc 1 1950 9 is_stmt 0 view .LVU336
 1231 0062 FFF7FEFF 		bl	FSDev_SD_SPI_WaitClks
 1232              	.LVL127:
1950:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FS_TRACE_DBG(("FSDev_SD_SPI_RdData(): Failed to rd card: cmd err: %02X.\r\n", resp_r1));
 1233              		.loc 1 1950 9 is_stmt 1 view .LVU337
 1234 0066 074B     		ldr	r3, .L99
 1235 0068 DB69     		ldr	r3, [r3, #28]
 1236 006a A088     		ldrh	r0, [r4, #4]
 1237 006c 9847     		blx	r3
 1238              	.LVL128:
1950:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FS_TRACE_DBG(("FSDev_SD_SPI_RdData(): Failed to rd card: cmd err: %02X.\r\n", resp_r1));
 1239              		.loc 1 1950 51 view .LVU338
1951:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         return (DEF_FAIL);
 1240              		.loc 1 1951 96 view .LVU339
1952:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     }
 1241              		.loc 1 1952 9 view .LVU340
1952:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     }
 1242              		.loc 1 1952 16 is_stmt 0 view .LVU341
 1243 006e 0025     		movs	r5, #0
 1244 0070 F2E7     		b	.L94
 1245              	.LVL129:
 1246              	.L98:
1958:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FS_TRACE_DBG(("FSDev_SD_SPI_RdData(): Failed to rd card: start token not received.\r\n"));
 1247              		.loc 1 1958 9 is_stmt 1 view .LVU342
 1248 0072 0121     		movs	r1, #1
 1249 0074 A088     		ldrh	r0, [r4, #4]
ARM GAS  /tmp/ccOtrZZk.s 			page 71


 1250              	.LVL130:
1958:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FS_TRACE_DBG(("FSDev_SD_SPI_RdData(): Failed to rd card: start token not received.\r\n"));
 1251              		.loc 1 1958 9 is_stmt 0 view .LVU343
 1252 0076 FFF7FEFF 		bl	FSDev_SD_SPI_WaitClks
 1253              	.LVL131:
1958:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FS_TRACE_DBG(("FSDev_SD_SPI_RdData(): Failed to rd card: start token not received.\r\n"));
 1254              		.loc 1 1958 9 is_stmt 1 view .LVU344
 1255 007a 024B     		ldr	r3, .L99
 1256 007c DB69     		ldr	r3, [r3, #28]
 1257 007e A088     		ldrh	r0, [r4, #4]
 1258 0080 9847     		blx	r3
 1259              	.LVL132:
1958:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FS_TRACE_DBG(("FSDev_SD_SPI_RdData(): Failed to rd card: start token not received.\r\n"));
 1260              		.loc 1 1958 51 view .LVU345
1959:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         return (DEF_FAIL);
 1261              		.loc 1 1959 98 view .LVU346
1960:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     }
 1262              		.loc 1 1960 9 view .LVU347
1960:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     }
 1263              		.loc 1 1960 16 is_stmt 0 view .LVU348
 1264 0082 E9E7     		b	.L94
 1265              	.L100:
 1266              		.align	2
 1267              	.L99:
 1268 0084 00000000 		.word	FSDev_SD_SPI_BSP_SPI
 1269              		.cfi_endproc
 1270              	.LFE17:
 1272              		.section	.text.FSDev_SD_SPI_SendCID,"ax",%progbits
 1273              		.align	1
 1274              		.syntax unified
 1275              		.thumb
 1276              		.thumb_func
 1277              		.fpu fpv4-sp-d16
 1279              	FSDev_SD_SPI_SendCID:
 1280              	.LVL133:
 1281              	.LFB21:
2314:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     CPU_BOOLEAN  ok;
 1282              		.loc 1 2314 1 is_stmt 1 view -0
 1283              		.cfi_startproc
 1284              		@ args = 0, pretend = 0, frame = 0
 1285              		@ frame_needed = 0, uses_anonymous_args = 0
2314:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     CPU_BOOLEAN  ok;
 1286              		.loc 1 2314 1 is_stmt 0 view .LVU350
 1287 0000 00B5     		push	{lr}
 1288              	.LCFI23:
 1289              		.cfi_def_cfa_offset 4
 1290              		.cfi_offset 14, -4
 1291 0002 83B0     		sub	sp, sp, #12
 1292              	.LCFI24:
 1293              		.cfi_def_cfa_offset 16
 1294 0004 0B46     		mov	r3, r1
2315:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 1295              		.loc 1 2315 5 is_stmt 1 view .LVU351
2318:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                              FS_DEV_SD_CMD_SEND_CID,
 1296              		.loc 1 2318 5 view .LVU352
2318:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                              FS_DEV_SD_CMD_SEND_CID,
 1297              		.loc 1 2318 10 is_stmt 0 view .LVU353
ARM GAS  /tmp/ccOtrZZk.s 			page 72


 1298 0006 1022     		movs	r2, #16
 1299 0008 0092     		str	r2, [sp]
 1300 000a 0022     		movs	r2, #0
 1301 000c 0A21     		movs	r1, #10
 1302              	.LVL134:
2318:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                              FS_DEV_SD_CMD_SEND_CID,
 1303              		.loc 1 2318 10 view .LVU354
 1304 000e FFF7FEFF 		bl	FSDev_SD_SPI_RdData
 1305              	.LVL135:
2324:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** }
 1306              		.loc 1 2324 5 is_stmt 1 view .LVU355
2325:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 1307              		.loc 1 2325 1 is_stmt 0 view .LVU356
 1308 0012 03B0     		add	sp, sp, #12
 1309              	.LCFI25:
 1310              		.cfi_def_cfa_offset 4
 1311              		@ sp needed
 1312 0014 5DF804FB 		ldr	pc, [sp], #4
 1313              		.cfi_endproc
 1314              	.LFE21:
 1316              		.section	.text.FSDev_SD_SPI_SendCSD,"ax",%progbits
 1317              		.align	1
 1318              		.syntax unified
 1319              		.thumb
 1320              		.thumb_func
 1321              		.fpu fpv4-sp-d16
 1323              	FSDev_SD_SPI_SendCSD:
 1324              	.LVL136:
 1325              	.LFB22:
2353:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     CPU_BOOLEAN  ok;
 1326              		.loc 1 2353 1 is_stmt 1 view -0
 1327              		.cfi_startproc
 1328              		@ args = 0, pretend = 0, frame = 0
 1329              		@ frame_needed = 0, uses_anonymous_args = 0
2353:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     CPU_BOOLEAN  ok;
 1330              		.loc 1 2353 1 is_stmt 0 view .LVU358
 1331 0000 00B5     		push	{lr}
 1332              	.LCFI26:
 1333              		.cfi_def_cfa_offset 4
 1334              		.cfi_offset 14, -4
 1335 0002 83B0     		sub	sp, sp, #12
 1336              	.LCFI27:
 1337              		.cfi_def_cfa_offset 16
 1338 0004 0B46     		mov	r3, r1
2354:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 1339              		.loc 1 2354 5 is_stmt 1 view .LVU359
2357:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                              FS_DEV_SD_CMD_SEND_CSD,
 1340              		.loc 1 2357 5 view .LVU360
2357:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                              FS_DEV_SD_CMD_SEND_CSD,
 1341              		.loc 1 2357 10 is_stmt 0 view .LVU361
 1342 0006 1022     		movs	r2, #16
 1343 0008 0092     		str	r2, [sp]
 1344 000a 0022     		movs	r2, #0
 1345 000c 0921     		movs	r1, #9
 1346              	.LVL137:
2357:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                              FS_DEV_SD_CMD_SEND_CSD,
 1347              		.loc 1 2357 10 view .LVU362
ARM GAS  /tmp/ccOtrZZk.s 			page 73


 1348 000e FFF7FEFF 		bl	FSDev_SD_SPI_RdData
 1349              	.LVL138:
2363:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** }
 1350              		.loc 1 2363 5 is_stmt 1 view .LVU363
2364:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 1351              		.loc 1 2364 1 is_stmt 0 view .LVU364
 1352 0012 03B0     		add	sp, sp, #12
 1353              	.LCFI28:
 1354              		.cfi_def_cfa_offset 4
 1355              		@ sp needed
 1356 0014 5DF804FB 		ldr	pc, [sp], #4
 1357              		.cfi_endproc
 1358              	.LFE22:
 1360              		.section	.text.FSDev_SD_SPI_Refresh,"ax",%progbits
 1361              		.align	1
 1362              		.syntax unified
 1363              		.thumb
 1364              		.thumb_func
 1365              		.fpu fpv4-sp-d16
 1367              	FSDev_SD_SPI_Refresh:
 1368              	.LVL139:
 1369              	.LFB11:
1367:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     CPU_INT08U       card_type;
 1370              		.loc 1 1367 1 is_stmt 1 view -0
 1371              		.cfi_startproc
 1372              		@ args = 0, pretend = 0, frame = 64
 1373              		@ frame_needed = 0, uses_anonymous_args = 0
1367:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     CPU_INT08U       card_type;
 1374              		.loc 1 1367 1 is_stmt 0 view .LVU366
 1375 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 1376              	.LCFI29:
 1377              		.cfi_def_cfa_offset 36
 1378              		.cfi_offset 4, -36
 1379              		.cfi_offset 5, -32
 1380              		.cfi_offset 6, -28
 1381              		.cfi_offset 7, -24
 1382              		.cfi_offset 8, -20
 1383              		.cfi_offset 9, -16
 1384              		.cfi_offset 10, -12
 1385              		.cfi_offset 11, -8
 1386              		.cfi_offset 14, -4
 1387 0004 91B0     		sub	sp, sp, #68
 1388              	.LCFI30:
 1389              		.cfi_def_cfa_offset 104
 1390 0006 0746     		mov	r7, r0
 1391 0008 8946     		mov	r9, r1
1368:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     CPU_INT08U       resp_r1;
 1392              		.loc 1 1368 5 is_stmt 1 view .LVU367
1369:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     CPU_INT08U       resp_reg[16];
 1393              		.loc 1 1369 5 view .LVU368
1370:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     CPU_INT08U       retries;
 1394              		.loc 1 1370 5 view .LVU369
1371:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     CPU_BOOLEAN      ok;
 1395              		.loc 1 1371 5 view .LVU370
1372:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     CPU_BOOLEAN      init_prev;
 1396              		.loc 1 1372 5 view .LVU371
1373:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     FS_QTY           unit_nbr;
ARM GAS  /tmp/ccOtrZZk.s 			page 74


 1397              		.loc 1 1373 5 view .LVU372
1374:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     FS_DEV_SD_INFO  *p_sd_info;
 1398              		.loc 1 1374 5 view .LVU373
1375:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     FS_DEV_SD_INFO   sd_info;
 1399              		.loc 1 1375 5 view .LVU374
1376:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 1400              		.loc 1 1376 5 view .LVU375
1380:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     unit_nbr  = p_sd_spi_data->UnitNbr;
 1401              		.loc 1 1380 5 view .LVU376
1380:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     unit_nbr  = p_sd_spi_data->UnitNbr;
 1402              		.loc 1 1380 15 is_stmt 0 view .LVU377
 1403 000a 00F1080A 		add	r10, r0, #8
 1404              	.LVL140:
1381:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     if (p_sd_spi_data->Init == DEF_YES) {                       /* If dev already init'd ...       
 1405              		.loc 1 1381 5 is_stmt 1 view .LVU378
1381:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     if (p_sd_spi_data->Init == DEF_YES) {                       /* If dev already init'd ...       
 1406              		.loc 1 1381 15 is_stmt 0 view .LVU379
 1407 000e 8488     		ldrh	r4, [r0, #4]
 1408              	.LVL141:
1382:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FSDev_SD_ClrInfo(&sd_info);
 1409              		.loc 1 1382 5 is_stmt 1 view .LVU380
1382:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FSDev_SD_ClrInfo(&sd_info);
 1410              		.loc 1 1382 22 is_stmt 0 view .LVU381
 1411 0010 8379     		ldrb	r3, [r0, #6]	@ zero_extendqisi2
1382:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FSDev_SD_ClrInfo(&sd_info);
 1412              		.loc 1 1382 8 view .LVU382
 1413 0012 012B     		cmp	r3, #1
 1414 0014 14D0     		beq	.L122
 1415              	.LVL142:
 1416              	.L106:
1410:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     p_sd_spi_data->Init      = DEF_NO;                          /* No longer init'd.               
 1417              		.loc 1 1410 5 is_stmt 1 view .LVU383
1410:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     p_sd_spi_data->Init      = DEF_NO;                          /* No longer init'd.               
 1418              		.loc 1 1410 30 is_stmt 0 view .LVU384
 1419 0016 97F806B0 		ldrb	fp, [r7, #6]	@ zero_extendqisi2
 1420              	.LVL143:
1411:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     FSDev_SD_ClrInfo(p_sd_info);                                /* Clr old info.                   
 1421              		.loc 1 1411 5 is_stmt 1 view .LVU385
1411:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     FSDev_SD_ClrInfo(p_sd_info);                                /* Clr old info.                   
 1422              		.loc 1 1411 30 is_stmt 0 view .LVU386
 1423 001a 0023     		movs	r3, #0
 1424 001c BB71     		strb	r3, [r7, #6]
1412:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 1425              		.loc 1 1412 5 is_stmt 1 view .LVU387
 1426 001e 5046     		mov	r0, r10
 1427 0020 FFF7FEFF 		bl	FSDev_SD_ClrInfo
 1428              	.LVL144:
1414:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     if (ok != DEF_OK) {                                         /* If HW could not be init'd ...   
 1429              		.loc 1 1414 5 view .LVU388
1414:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     if (ok != DEF_OK) {                                         /* If HW could not be init'd ...   
 1430              		.loc 1 1414 30 is_stmt 0 view .LVU389
 1431 0024 754B     		ldr	r3, .L126
 1432 0026 1B68     		ldr	r3, [r3]
1414:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     if (ok != DEF_OK) {                                         /* If HW could not be init'd ...   
 1433              		.loc 1 1414 10 view .LVU390
 1434 0028 2046     		mov	r0, r4
 1435 002a 9847     		blx	r3
ARM GAS  /tmp/ccOtrZZk.s 			page 75


 1436              	.LVL145:
1415:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****        *p_err = FS_ERR_DEV_INVALID_UNIT_NBR;                    /* ... rtn err.                    
 1437              		.loc 1 1415 5 is_stmt 1 view .LVU391
1415:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****        *p_err = FS_ERR_DEV_INVALID_UNIT_NBR;                    /* ... rtn err.                    
 1438              		.loc 1 1415 8 is_stmt 0 view .LVU392
 1439 002c 0128     		cmp	r0, #1
 1440 002e 35D0     		beq	.L109
1416:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         return (init_prev);
 1441              		.loc 1 1416 8 is_stmt 1 view .LVU393
1416:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         return (init_prev);
 1442              		.loc 1 1416 15 is_stmt 0 view .LVU394
 1443 0030 4FF4A173 		mov	r3, #322
 1444 0034 A9F80030 		strh	r3, [r9]	@ movhi
1417:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     }
 1445              		.loc 1 1417 9 is_stmt 1 view .LVU395
 1446              	.LVL146:
 1447              	.L108:
1553:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 1448              		.loc 1 1553 1 is_stmt 0 view .LVU396
 1449 0038 5846     		mov	r0, fp
 1450 003a 11B0     		add	sp, sp, #68
 1451              	.LCFI31:
 1452              		.cfi_remember_state
 1453              		.cfi_def_cfa_offset 36
 1454              		@ sp needed
 1455 003c BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 1456              	.LVL147:
 1457              	.L122:
 1458              	.LCFI32:
 1459              		.cfi_restore_state
1383:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 1460              		.loc 1 1383 9 is_stmt 1 view .LVU397
 1461 0040 02A8     		add	r0, sp, #8
 1462              	.LVL148:
1383:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 1463              		.loc 1 1383 9 is_stmt 0 view .LVU398
 1464 0042 FFF7FEFF 		bl	FSDev_SD_ClrInfo
 1465              	.LVL149:
1385:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         ok = FSDev_SD_SPI_SendCID( p_sd_spi_data,               /* ... rd CID reg        ...       
 1466              		.loc 1 1385 9 is_stmt 1 view .LVU399
1385:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         ok = FSDev_SD_SPI_SendCID( p_sd_spi_data,               /* ... rd CID reg        ...       
 1467              		.loc 1 1385 29 is_stmt 0 view .LVU400
 1468 0046 6D4E     		ldr	r6, .L126
 1469 0048 B368     		ldr	r3, [r6, #8]
1385:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         ok = FSDev_SD_SPI_SendCID( p_sd_spi_data,               /* ... rd CID reg        ...       
 1470              		.loc 1 1385 9 view .LVU401
 1471 004a 2046     		mov	r0, r4
 1472 004c 9847     		blx	r3
 1473              	.LVL150:
1386:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                   &resp_reg[0]);
 1474              		.loc 1 1386 9 is_stmt 1 view .LVU402
1386:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                   &resp_reg[0]);
 1475              		.loc 1 1386 14 is_stmt 0 view .LVU403
 1476 004e 0CA9     		add	r1, sp, #48
 1477 0050 3846     		mov	r0, r7
 1478 0052 FFF7FEFF 		bl	FSDev_SD_SPI_SendCID
 1479              	.LVL151:
ARM GAS  /tmp/ccOtrZZk.s 			page 76


 1480 0056 0546     		mov	r5, r0
 1481              	.LVL152:
1388:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 1482              		.loc 1 1388 9 is_stmt 1 view .LVU404
1388:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 1483              		.loc 1 1388 29 is_stmt 0 view .LVU405
 1484 0058 F368     		ldr	r3, [r6, #12]
1388:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 1485              		.loc 1 1388 9 view .LVU406
 1486 005a 2046     		mov	r0, r4
 1487 005c 9847     		blx	r3
 1488              	.LVL153:
1390:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****             (void)FSDev_SD_ParseCID( resp_reg,
 1489              		.loc 1 1390 9 is_stmt 1 view .LVU407
1390:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****             (void)FSDev_SD_ParseCID( resp_reg,
 1490              		.loc 1 1390 12 is_stmt 0 view .LVU408
 1491 005e 012D     		cmp	r5, #1
 1492 0060 04D0     		beq	.L123
 1493              	.L107:
1404:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     }
 1494              		.loc 1 1404 9 is_stmt 1 view .LVU409
1404:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     }
 1495              		.loc 1 1404 29 is_stmt 0 view .LVU410
 1496 0062 664B     		ldr	r3, .L126
 1497 0064 5B68     		ldr	r3, [r3, #4]
1404:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     }
 1498              		.loc 1 1404 9 view .LVU411
 1499 0066 2046     		mov	r0, r4
 1500 0068 9847     		blx	r3
 1501              	.LVL154:
 1502 006a D4E7     		b	.L106
 1503              	.L123:
1391:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                     &sd_info,
 1504              		.loc 1 1391 13 is_stmt 1 view .LVU412
1391:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                     &sd_info,
 1505              		.loc 1 1391 19 is_stmt 0 view .LVU413
 1506 006c 3A7E     		ldrb	r2, [r7, #24]	@ zero_extendqisi2
 1507 006e 02A9     		add	r1, sp, #8
 1508 0070 0CA8     		add	r0, sp, #48
 1509 0072 FFF7FEFF 		bl	FSDev_SD_ParseCID
 1510              	.LVL155:
1396:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                 (sd_info.OEM_ID  == p_sd_info->OEM_ID)  &&
 1511              		.loc 1 1396 13 is_stmt 1 view .LVU414
1396:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                 (sd_info.OEM_ID  == p_sd_info->OEM_ID)  &&
 1512              		.loc 1 1396 25 is_stmt 0 view .LVU415
 1513 0076 9DF81A20 		ldrb	r2, [sp, #26]	@ zero_extendqisi2
1396:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                 (sd_info.OEM_ID  == p_sd_info->OEM_ID)  &&
 1514              		.loc 1 1396 46 view .LVU416
 1515 007a BB7E     		ldrb	r3, [r7, #26]	@ zero_extendqisi2
1396:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                 (sd_info.OEM_ID  == p_sd_info->OEM_ID)  &&
 1516              		.loc 1 1396 16 view .LVU417
 1517 007c 9A42     		cmp	r2, r3
 1518 007e F0D1     		bne	.L107
1397:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                 (sd_info.ProdSN  == p_sd_info->ProdSN)) {
 1519              		.loc 1 1397 25 discriminator 1 view .LVU418
 1520 0080 BDF81C20 		ldrh	r2, [sp, #28]
1397:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                 (sd_info.ProdSN  == p_sd_info->ProdSN)) {
ARM GAS  /tmp/ccOtrZZk.s 			page 77


 1521              		.loc 1 1397 46 discriminator 1 view .LVU419
 1522 0084 BB8B     		ldrh	r3, [r7, #28]
1396:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                 (sd_info.OEM_ID  == p_sd_info->OEM_ID)  &&
 1523              		.loc 1 1396 57 discriminator 1 view .LVU420
 1524 0086 9A42     		cmp	r2, r3
 1525 0088 EBD1     		bne	.L107
1398:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                *p_err = FS_ERR_NONE;                            /* ... dev has not chngd.          
 1526              		.loc 1 1398 46 view .LVU421
 1527 008a 3B6A     		ldr	r3, [r7, #32]
1397:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                 (sd_info.ProdSN  == p_sd_info->ProdSN)) {
 1528              		.loc 1 1397 57 view .LVU422
 1529 008c 089A     		ldr	r2, [sp, #32]
 1530 008e 9A42     		cmp	r2, r3
 1531 0090 E7D1     		bne	.L107
1399:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                 return (DEF_NO);
 1532              		.loc 1 1399 16 is_stmt 1 view .LVU423
1399:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                 return (DEF_NO);
 1533              		.loc 1 1399 23 is_stmt 0 view .LVU424
 1534 0092 4FF0000B 		mov	fp, #0
 1535 0096 A9F800B0 		strh	fp, [r9]	@ movhi
1400:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****             }
 1536              		.loc 1 1400 17 is_stmt 1 view .LVU425
1400:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****             }
 1537              		.loc 1 1400 24 is_stmt 0 view .LVU426
 1538 009a CDE7     		b	.L108
 1539              	.LVL156:
 1540              	.L109:
1420:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                                 /* Set clk to dflt clk.            
 1541              		.loc 1 1420 5 is_stmt 1 view .LVU427
1420:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                                 /* Set clk to dflt clk.            
 1542              		.loc 1 1420 25 is_stmt 0 view .LVU428
 1543 009c 574D     		ldr	r5, .L126
 1544 009e AB68     		ldr	r3, [r5, #8]
1420:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                                 /* Set clk to dflt clk.            
 1545              		.loc 1 1420 5 view .LVU429
 1546 00a0 2046     		mov	r0, r4
 1547              	.LVL157:
1420:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                                 /* Set clk to dflt clk.            
 1548              		.loc 1 1420 5 view .LVU430
 1549 00a2 9847     		blx	r3
 1550              	.LVL158:
1422:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 1551              		.loc 1 1422 5 is_stmt 1 view .LVU431
1422:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 1552              		.loc 1 1422 25 is_stmt 0 view .LVU432
 1553 00a4 2B6A     		ldr	r3, [r5, #32]
 1554 00a6 0193     		str	r3, [sp, #4]
1422:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 1555              		.loc 1 1422 5 view .LVU433
 1556 00a8 5549     		ldr	r1, .L126+4
 1557 00aa 2046     		mov	r0, r4
 1558 00ac 9847     		blx	r3
 1559              	.LVL159:
1427:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     resp_r1 = FS_DEV_SD_SPI_RESP_EMPTY;
 1560              		.loc 1 1427 5 is_stmt 1 view .LVU434
1428:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     while ((retries  < FS_DEV_SD_SPI_CMD_TIMEOUT) &&
 1561              		.loc 1 1428 5 view .LVU435
ARM GAS  /tmp/ccOtrZZk.s 			page 78


1429:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****            (resp_r1 != FS_DEV_SD_SPI_R1_IN_IDLE_STATE)) {
 1562              		.loc 1 1429 5 view .LVU436
1427:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     resp_r1 = FS_DEV_SD_SPI_RESP_EMPTY;
 1563              		.loc 1 1427 13 is_stmt 0 view .LVU437
 1564 00ae 0026     		movs	r6, #0
1428:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     while ((retries  < FS_DEV_SD_SPI_CMD_TIMEOUT) &&
 1565              		.loc 1 1428 13 view .LVU438
 1566 00b0 FF25     		movs	r5, #255
1429:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****            (resp_r1 != FS_DEV_SD_SPI_R1_IN_IDLE_STATE)) {
 1567              		.loc 1 1429 11 view .LVU439
 1568 00b2 04E0     		b	.L110
 1569              	.LVL160:
 1570              	.L124:
1441:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****             retries++;
 1571              		.loc 1 1441 13 is_stmt 1 view .LVU440
 1572 00b4 0220     		movs	r0, #2
 1573 00b6 FFF7FEFF 		bl	FS_OS_Dly_ms
 1574              	.LVL161:
1442:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         }
 1575              		.loc 1 1442 13 view .LVU441
1442:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         }
 1576              		.loc 1 1442 20 is_stmt 0 view .LVU442
 1577 00ba 0136     		adds	r6, r6, #1
 1578              	.LVL162:
1442:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         }
 1579              		.loc 1 1442 20 view .LVU443
 1580 00bc F6B2     		uxtb	r6, r6
 1581              	.LVL163:
 1582              	.L110:
1429:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****            (resp_r1 != FS_DEV_SD_SPI_R1_IN_IDLE_STATE)) {
 1583              		.loc 1 1429 11 is_stmt 1 view .LVU444
 1584 00be 16F0800F 		tst	r6, #128
 1585 00c2 20D1     		bne	.L112
1429:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****            (resp_r1 != FS_DEV_SD_SPI_R1_IN_IDLE_STATE)) {
 1586              		.loc 1 1429 51 is_stmt 0 discriminator 1 view .LVU445
 1587 00c4 012D     		cmp	r5, #1
 1588 00c6 1ED0     		beq	.L112
1431:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FSDev_SD_SPI_WaitClks(unit_nbr, (CPU_INT08U)20);        /* Send empty clks.                
 1589              		.loc 1 1431 9 is_stmt 1 view .LVU446
 1590 00c8 DFF83081 		ldr	r8, .L126
 1591 00cc D8F81830 		ldr	r3, [r8, #24]
 1592 00d0 2046     		mov	r0, r4
 1593 00d2 9847     		blx	r3
 1594              	.LVL164:
1431:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FSDev_SD_SPI_WaitClks(unit_nbr, (CPU_INT08U)20);        /* Send empty clks.                
 1595              		.loc 1 1431 9 view .LVU447
 1596 00d4 0121     		movs	r1, #1
 1597 00d6 2046     		mov	r0, r4
 1598 00d8 FFF7FEFF 		bl	FSDev_SD_SPI_WaitClks
 1599              	.LVL165:
1431:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FSDev_SD_SPI_WaitClks(unit_nbr, (CPU_INT08U)20);        /* Send empty clks.                
 1600              		.loc 1 1431 38 view .LVU448
1432:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 1601              		.loc 1 1432 9 view .LVU449
 1602 00dc 1421     		movs	r1, #20
 1603 00de 2046     		mov	r0, r4
 1604 00e0 FFF7FEFF 		bl	FSDev_SD_SPI_WaitClks
ARM GAS  /tmp/ccOtrZZk.s 			page 79


 1605              	.LVL166:
1434:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                    FS_DEV_SD_CMD_GO_IDLE_STATE,
 1606              		.loc 1 1434 9 view .LVU450
1434:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                    FS_DEV_SD_CMD_GO_IDLE_STATE,
 1607              		.loc 1 1434 19 is_stmt 0 view .LVU451
 1608 00e4 0022     		movs	r2, #0
 1609 00e6 1146     		mov	r1, r2
 1610 00e8 3846     		mov	r0, r7
 1611 00ea FFF7FEFF 		bl	FSDev_SD_SPI_Cmd
 1612              	.LVL167:
 1613 00ee 0546     		mov	r5, r0
 1614              	.LVL168:
1438:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 1615              		.loc 1 1438 9 is_stmt 1 view .LVU452
 1616 00f0 0121     		movs	r1, #1
 1617 00f2 2046     		mov	r0, r4
 1618 00f4 FFF7FEFF 		bl	FSDev_SD_SPI_WaitClks
 1619              	.LVL169:
1438:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 1620              		.loc 1 1438 9 view .LVU453
 1621 00f8 D8F81C30 		ldr	r3, [r8, #28]
 1622 00fc 2046     		mov	r0, r4
 1623 00fe 9847     		blx	r3
 1624              	.LVL170:
1438:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 1625              		.loc 1 1438 37 view .LVU454
1440:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****             FS_OS_Dly_ms(2u);
 1626              		.loc 1 1440 9 view .LVU455
1440:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****             FS_OS_Dly_ms(2u);
 1627              		.loc 1 1440 12 is_stmt 0 view .LVU456
 1628 0100 012D     		cmp	r5, #1
 1629 0102 DCD0     		beq	.L110
 1630 0104 D6E7     		b	.L124
 1631              	.L112:
1446:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FSDev_SD_SPI_BSP_SPI.Unlock(unit_nbr);
 1632              		.loc 1 1446 5 is_stmt 1 view .LVU457
1446:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FSDev_SD_SPI_BSP_SPI.Unlock(unit_nbr);
 1633              		.loc 1 1446 8 is_stmt 0 view .LVU458
 1634 0106 012D     		cmp	r5, #1
 1635 0108 0BD0     		beq	.L114
1447:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FSDev_SD_SPI_BSP_SPI.Close(unit_nbr);
 1636              		.loc 1 1447 9 is_stmt 1 view .LVU459
1447:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FSDev_SD_SPI_BSP_SPI.Close(unit_nbr);
 1637              		.loc 1 1447 29 is_stmt 0 view .LVU460
 1638 010a 3C4D     		ldr	r5, .L126
 1639              	.LVL171:
1447:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FSDev_SD_SPI_BSP_SPI.Close(unit_nbr);
 1640              		.loc 1 1447 29 view .LVU461
 1641 010c EB68     		ldr	r3, [r5, #12]
1447:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FSDev_SD_SPI_BSP_SPI.Close(unit_nbr);
 1642              		.loc 1 1447 9 view .LVU462
 1643 010e 2046     		mov	r0, r4
 1644 0110 9847     		blx	r3
 1645              	.LVL172:
1448:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****        *p_err = FS_ERR_DEV_IO;                                  /* ... rtn err.                    
 1646              		.loc 1 1448 9 is_stmt 1 view .LVU463
1448:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****        *p_err = FS_ERR_DEV_IO;                                  /* ... rtn err.                    
ARM GAS  /tmp/ccOtrZZk.s 			page 80


 1647              		.loc 1 1448 29 is_stmt 0 view .LVU464
 1648 0112 6B68     		ldr	r3, [r5, #4]
1448:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****        *p_err = FS_ERR_DEV_IO;                                  /* ... rtn err.                    
 1649              		.loc 1 1448 9 view .LVU465
 1650 0114 2046     		mov	r0, r4
 1651 0116 9847     		blx	r3
 1652              	.LVL173:
1449:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         return (init_prev);
 1653              		.loc 1 1449 8 is_stmt 1 view .LVU466
1449:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         return (init_prev);
 1654              		.loc 1 1449 15 is_stmt 0 view .LVU467
 1655 0118 40F24313 		movw	r3, #323
 1656 011c A9F80030 		strh	r3, [r9]	@ movhi
1450:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     }
 1657              		.loc 1 1450 9 is_stmt 1 view .LVU468
1450:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     }
 1658              		.loc 1 1450 16 is_stmt 0 view .LVU469
 1659 0120 8AE7     		b	.L108
 1660              	.LVL174:
 1661              	.L114:
1453:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 1662              		.loc 1 1453 5 is_stmt 1 view .LVU470
 1663 0122 6420     		movs	r0, #100
 1664 0124 FFF7FEFF 		bl	FS_OS_Dly_ms
 1665              	.LVL175:
1458:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     if (card_type == FS_DEV_SD_CARDTYPE_NONE) {                 /* If card type NOT determined ... 
 1666              		.loc 1 1458 5 view .LVU471
1458:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     if (card_type == FS_DEV_SD_CARDTYPE_NONE) {                 /* If card type NOT determined ... 
 1667              		.loc 1 1458 17 is_stmt 0 view .LVU472
 1668 0128 3846     		mov	r0, r7
 1669 012a FFF7FEFF 		bl	FSDev_SD_SPI_MakeRdy
 1670              	.LVL176:
1459:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FSDev_SD_SPI_BSP_SPI.Unlock(unit_nbr);
 1671              		.loc 1 1459 5 is_stmt 1 view .LVU473
1459:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FSDev_SD_SPI_BSP_SPI.Unlock(unit_nbr);
 1672              		.loc 1 1459 8 is_stmt 0 view .LVU474
 1673 012e 0546     		mov	r5, r0
 1674              	.LVL177:
1459:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FSDev_SD_SPI_BSP_SPI.Unlock(unit_nbr);
 1675              		.loc 1 1459 8 view .LVU475
 1676 0130 C0B1     		cbz	r0, .L125
1466:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 1677              		.loc 1 1466 5 is_stmt 1 view .LVU476
1466:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 1678              		.loc 1 1466 25 is_stmt 0 view .LVU477
 1679 0132 3876     		strb	r0, [r7, #24]
1468:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         (card_type == FS_DEV_SD_CARDTYPE_MMC_HC)) {
 1680              		.loc 1 1468 5 is_stmt 1 view .LVU478
1468:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         (card_type == FS_DEV_SD_CARDTYPE_MMC_HC)) {
 1681              		.loc 1 1468 8 is_stmt 0 view .LVU479
 1682 0134 0328     		cmp	r0, #3
 1683 0136 01D0     		beq	.L116
1468:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         (card_type == FS_DEV_SD_CARDTYPE_MMC_HC)) {
 1684              		.loc 1 1468 54 discriminator 1 view .LVU480
 1685 0138 0528     		cmp	r0, #5
 1686 013a 01D1     		bne	.L117
 1687              	.L116:
ARM GAS  /tmp/ccOtrZZk.s 			page 81


1470:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     }
 1688              		.loc 1 1470 9 is_stmt 1 view .LVU481
1470:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     }
 1689              		.loc 1 1470 33 is_stmt 0 view .LVU482
 1690 013c 0123     		movs	r3, #1
 1691 013e 7B76     		strb	r3, [r7, #25]
 1692              	.L117:
1476:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                               &resp_reg[0]);
 1693              		.loc 1 1476 5 is_stmt 1 view .LVU483
1476:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                               &resp_reg[0]);
 1694              		.loc 1 1476 10 is_stmt 0 view .LVU484
 1695 0140 0CA9     		add	r1, sp, #48
 1696 0142 3846     		mov	r0, r7
 1697              	.LVL178:
1476:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                               &resp_reg[0]);
 1698              		.loc 1 1476 10 view .LVU485
 1699 0144 FFF7FEFF 		bl	FSDev_SD_SPI_SendCSD
 1700              	.LVL179:
1478:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FSDev_SD_SPI_BSP_SPI.Unlock(unit_nbr);
 1701              		.loc 1 1478 5 is_stmt 1 view .LVU486
1478:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FSDev_SD_SPI_BSP_SPI.Unlock(unit_nbr);
 1702              		.loc 1 1478 8 is_stmt 0 view .LVU487
 1703 0148 0128     		cmp	r0, #1
 1704 014a 17D0     		beq	.L118
1479:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FSDev_SD_SPI_BSP_SPI.Close(unit_nbr);
 1705              		.loc 1 1479 9 is_stmt 1 view .LVU488
1479:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FSDev_SD_SPI_BSP_SPI.Close(unit_nbr);
 1706              		.loc 1 1479 29 is_stmt 0 view .LVU489
 1707 014c 2B4D     		ldr	r5, .L126
 1708 014e EB68     		ldr	r3, [r5, #12]
1479:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FSDev_SD_SPI_BSP_SPI.Close(unit_nbr);
 1709              		.loc 1 1479 9 view .LVU490
 1710 0150 2046     		mov	r0, r4
 1711              	.LVL180:
1479:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FSDev_SD_SPI_BSP_SPI.Close(unit_nbr);
 1712              		.loc 1 1479 9 view .LVU491
 1713 0152 9847     		blx	r3
 1714              	.LVL181:
1480:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****        *p_err = FS_ERR_DEV_IO;
 1715              		.loc 1 1480 9 is_stmt 1 view .LVU492
1480:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****        *p_err = FS_ERR_DEV_IO;
 1716              		.loc 1 1480 29 is_stmt 0 view .LVU493
 1717 0154 6B68     		ldr	r3, [r5, #4]
1480:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****        *p_err = FS_ERR_DEV_IO;
 1718              		.loc 1 1480 9 view .LVU494
 1719 0156 2046     		mov	r0, r4
 1720 0158 9847     		blx	r3
 1721              	.LVL182:
1481:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         return (init_prev);
 1722              		.loc 1 1481 8 is_stmt 1 view .LVU495
1481:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         return (init_prev);
 1723              		.loc 1 1481 15 is_stmt 0 view .LVU496
 1724 015a 40F24313 		movw	r3, #323
 1725 015e A9F80030 		strh	r3, [r9]	@ movhi
1482:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     }
 1726              		.loc 1 1482 9 is_stmt 1 view .LVU497
1482:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     }
ARM GAS  /tmp/ccOtrZZk.s 			page 82


 1727              		.loc 1 1482 16 is_stmt 0 view .LVU498
 1728 0162 69E7     		b	.L108
 1729              	.LVL183:
 1730              	.L125:
1460:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FSDev_SD_SPI_BSP_SPI.Close(unit_nbr);
 1731              		.loc 1 1460 9 is_stmt 1 view .LVU499
1460:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FSDev_SD_SPI_BSP_SPI.Close(unit_nbr);
 1732              		.loc 1 1460 29 is_stmt 0 view .LVU500
 1733 0164 254D     		ldr	r5, .L126
 1734 0166 EB68     		ldr	r3, [r5, #12]
1460:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FSDev_SD_SPI_BSP_SPI.Close(unit_nbr);
 1735              		.loc 1 1460 9 view .LVU501
 1736 0168 2046     		mov	r0, r4
 1737              	.LVL184:
1460:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FSDev_SD_SPI_BSP_SPI.Close(unit_nbr);
 1738              		.loc 1 1460 9 view .LVU502
 1739 016a 9847     		blx	r3
 1740              	.LVL185:
1461:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****        *p_err = FS_ERR_DEV_IO;                                  /* ... rtn err.                    
 1741              		.loc 1 1461 9 is_stmt 1 view .LVU503
1461:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****        *p_err = FS_ERR_DEV_IO;                                  /* ... rtn err.                    
 1742              		.loc 1 1461 29 is_stmt 0 view .LVU504
 1743 016c 6B68     		ldr	r3, [r5, #4]
1461:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****        *p_err = FS_ERR_DEV_IO;                                  /* ... rtn err.                    
 1744              		.loc 1 1461 9 view .LVU505
 1745 016e 2046     		mov	r0, r4
 1746 0170 9847     		blx	r3
 1747              	.LVL186:
1462:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         return (init_prev);
 1748              		.loc 1 1462 8 is_stmt 1 view .LVU506
1462:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         return (init_prev);
 1749              		.loc 1 1462 15 is_stmt 0 view .LVU507
 1750 0172 40F24313 		movw	r3, #323
 1751 0176 A9F80030 		strh	r3, [r9]	@ movhi
1463:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     }
 1752              		.loc 1 1463 9 is_stmt 1 view .LVU508
1463:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     }
 1753              		.loc 1 1463 16 is_stmt 0 view .LVU509
 1754 017a 5DE7     		b	.L108
 1755              	.LVL187:
 1756              	.L118:
1485:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                            p_sd_info,
 1757              		.loc 1 1485 5 is_stmt 1 view .LVU510
1485:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                            p_sd_info,
 1758              		.loc 1 1485 10 is_stmt 0 view .LVU511
 1759 017c 2A46     		mov	r2, r5
 1760 017e 5146     		mov	r1, r10
 1761 0180 0CA8     		add	r0, sp, #48
 1762              	.LVL188:
1485:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                            p_sd_info,
 1763              		.loc 1 1485 10 view .LVU512
 1764 0182 FFF7FEFF 		bl	FSDev_SD_ParseCSD
 1765              	.LVL189:
1488:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FSDev_SD_SPI_BSP_SPI.Unlock(unit_nbr);
 1766              		.loc 1 1488 5 is_stmt 1 view .LVU513
1488:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FSDev_SD_SPI_BSP_SPI.Unlock(unit_nbr);
 1767              		.loc 1 1488 8 is_stmt 0 view .LVU514
ARM GAS  /tmp/ccOtrZZk.s 			page 83


 1768 0186 0128     		cmp	r0, #1
 1769 0188 0BD0     		beq	.L119
1489:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FSDev_SD_SPI_BSP_SPI.Close(unit_nbr);
 1770              		.loc 1 1489 9 is_stmt 1 view .LVU515
1489:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FSDev_SD_SPI_BSP_SPI.Close(unit_nbr);
 1771              		.loc 1 1489 29 is_stmt 0 view .LVU516
 1772 018a 1C4D     		ldr	r5, .L126
 1773 018c EB68     		ldr	r3, [r5, #12]
1489:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FSDev_SD_SPI_BSP_SPI.Close(unit_nbr);
 1774              		.loc 1 1489 9 view .LVU517
 1775 018e 2046     		mov	r0, r4
 1776              	.LVL190:
1489:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FSDev_SD_SPI_BSP_SPI.Close(unit_nbr);
 1777              		.loc 1 1489 9 view .LVU518
 1778 0190 9847     		blx	r3
 1779              	.LVL191:
1490:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****        *p_err = FS_ERR_DEV_IO;
 1780              		.loc 1 1490 9 is_stmt 1 view .LVU519
1490:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****        *p_err = FS_ERR_DEV_IO;
 1781              		.loc 1 1490 29 is_stmt 0 view .LVU520
 1782 0192 6B68     		ldr	r3, [r5, #4]
1490:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****        *p_err = FS_ERR_DEV_IO;
 1783              		.loc 1 1490 9 view .LVU521
 1784 0194 2046     		mov	r0, r4
 1785 0196 9847     		blx	r3
 1786              	.LVL192:
1491:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         return (init_prev);
 1787              		.loc 1 1491 8 is_stmt 1 view .LVU522
1491:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         return (init_prev);
 1788              		.loc 1 1491 15 is_stmt 0 view .LVU523
 1789 0198 40F24313 		movw	r3, #323
 1790 019c A9F80030 		strh	r3, [r9]	@ movhi
1492:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     }
 1791              		.loc 1 1492 9 is_stmt 1 view .LVU524
1492:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     }
 1792              		.loc 1 1492 16 is_stmt 0 view .LVU525
 1793 01a0 4AE7     		b	.L108
 1794              	.LVL193:
 1795              	.L119:
1497:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 1796              		.loc 1 1497 5 is_stmt 1 view .LVU526
 1797 01a2 3969     		ldr	r1, [r7, #16]
 1798 01a4 2046     		mov	r0, r4
 1799              	.LVL194:
1497:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 1800              		.loc 1 1497 5 is_stmt 0 view .LVU527
 1801 01a6 019B     		ldr	r3, [sp, #4]
 1802 01a8 9847     		blx	r3
 1803              	.LVL195:
1502:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                               &resp_reg[0]);
 1804              		.loc 1 1502 5 is_stmt 1 view .LVU528
1502:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                               &resp_reg[0]);
 1805              		.loc 1 1502 10 is_stmt 0 view .LVU529
 1806 01aa 0CA9     		add	r1, sp, #48
 1807 01ac 3846     		mov	r0, r7
 1808 01ae FFF7FEFF 		bl	FSDev_SD_SPI_SendCID
 1809              	.LVL196:
ARM GAS  /tmp/ccOtrZZk.s 			page 84


 1810 01b2 0646     		mov	r6, r0
 1811              	.LVL197:
1505:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FSDev_SD_SPI_BSP_SPI.Unlock(unit_nbr);
 1812              		.loc 1 1505 5 is_stmt 1 view .LVU530
1505:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FSDev_SD_SPI_BSP_SPI.Unlock(unit_nbr);
 1813              		.loc 1 1505 8 is_stmt 0 view .LVU531
 1814 01b4 0128     		cmp	r0, #1
 1815 01b6 0BD0     		beq	.L120
1506:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FSDev_SD_SPI_BSP_SPI.Close(unit_nbr);
 1816              		.loc 1 1506 9 is_stmt 1 view .LVU532
1506:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FSDev_SD_SPI_BSP_SPI.Close(unit_nbr);
 1817              		.loc 1 1506 29 is_stmt 0 view .LVU533
 1818 01b8 104D     		ldr	r5, .L126
 1819 01ba EB68     		ldr	r3, [r5, #12]
1506:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FSDev_SD_SPI_BSP_SPI.Close(unit_nbr);
 1820              		.loc 1 1506 9 view .LVU534
 1821 01bc 2046     		mov	r0, r4
 1822              	.LVL198:
1506:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FSDev_SD_SPI_BSP_SPI.Close(unit_nbr);
 1823              		.loc 1 1506 9 view .LVU535
 1824 01be 9847     		blx	r3
 1825              	.LVL199:
1507:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****        *p_err = FS_ERR_DEV_IO;
 1826              		.loc 1 1507 9 is_stmt 1 view .LVU536
1507:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****        *p_err = FS_ERR_DEV_IO;
 1827              		.loc 1 1507 29 is_stmt 0 view .LVU537
 1828 01c0 6B68     		ldr	r3, [r5, #4]
1507:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****        *p_err = FS_ERR_DEV_IO;
 1829              		.loc 1 1507 9 view .LVU538
 1830 01c2 2046     		mov	r0, r4
 1831 01c4 9847     		blx	r3
 1832              	.LVL200:
1508:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         return (init_prev);
 1833              		.loc 1 1508 8 is_stmt 1 view .LVU539
1508:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         return (init_prev);
 1834              		.loc 1 1508 15 is_stmt 0 view .LVU540
 1835 01c6 40F24313 		movw	r3, #323
 1836 01ca A9F80030 		strh	r3, [r9]	@ movhi
1509:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     }
 1837              		.loc 1 1509 9 is_stmt 1 view .LVU541
1509:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     }
 1838              		.loc 1 1509 16 is_stmt 0 view .LVU542
 1839 01ce 33E7     		b	.L108
 1840              	.LVL201:
 1841              	.L120:
1512:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 1842              		.loc 1 1512 5 is_stmt 1 view .LVU543
1512:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 1843              		.loc 1 1512 25 is_stmt 0 view .LVU544
 1844 01d0 0123     		movs	r3, #1
 1845 01d2 BB71     		strb	r3, [r7, #6]
1514:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                             p_sd_info,
 1846              		.loc 1 1514 5 is_stmt 1 view .LVU545
1514:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                             p_sd_info,
 1847              		.loc 1 1514 11 is_stmt 0 view .LVU546
 1848 01d4 2A46     		mov	r2, r5
 1849 01d6 5146     		mov	r1, r10
ARM GAS  /tmp/ccOtrZZk.s 			page 85


 1850 01d8 0CA8     		add	r0, sp, #48
 1851              	.LVL202:
1514:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                             p_sd_info,
 1852              		.loc 1 1514 11 view .LVU547
 1853 01da FFF7FEFF 		bl	FSDev_SD_ParseCID
 1854              	.LVL203:
1521:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                  FS_DEV_SD_CMD_SET_BLOCKLEN,
 1855              		.loc 1 1521 5 is_stmt 1 view .LVU548
1521:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                  FS_DEV_SD_CMD_SET_BLOCKLEN,
 1856              		.loc 1 1521 15 is_stmt 0 view .LVU549
 1857 01de 4FF40072 		mov	r2, #512
 1858 01e2 1021     		movs	r1, #16
 1859 01e4 3846     		mov	r0, r7
 1860 01e6 FFF7FEFF 		bl	FSDev_SD_SPI_CmdR1
 1861              	.LVL204:
1525:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FS_TRACE_INFO(("FSDev_SD_SPI_Refresh(): Could not set block length: error: %02X.\r\n", resp
 1862              		.loc 1 1525 5 is_stmt 1 view .LVU550
1526:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     }
 1863              		.loc 1 1526 105 view .LVU551
1542:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 1864              		.loc 1 1542 5 view .LVU552
1542:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 1865              		.loc 1 1542 25 is_stmt 0 view .LVU553
 1866 01ea 044B     		ldr	r3, .L126
 1867 01ec DB68     		ldr	r3, [r3, #12]
1542:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 1868              		.loc 1 1542 5 view .LVU554
 1869 01ee 2046     		mov	r0, r4
 1870 01f0 9847     		blx	r3
 1871              	.LVL205:
1551:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     return (DEF_YES);                                           /* Always chngd if opened.         
 1872              		.loc 1 1551 4 is_stmt 1 view .LVU555
1551:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     return (DEF_YES);                                           /* Always chngd if opened.         
 1873              		.loc 1 1551 11 is_stmt 0 view .LVU556
 1874 01f2 0023     		movs	r3, #0
 1875 01f4 A9F80030 		strh	r3, [r9]	@ movhi
1552:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** }
 1876              		.loc 1 1552 5 is_stmt 1 view .LVU557
1552:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** }
 1877              		.loc 1 1552 12 is_stmt 0 view .LVU558
 1878 01f8 B346     		mov	fp, r6
 1879              	.LVL206:
1552:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** }
 1880              		.loc 1 1552 12 view .LVU559
 1881 01fa 1DE7     		b	.L108
 1882              	.L127:
 1883              		.align	2
 1884              	.L126:
 1885 01fc 00000000 		.word	FSDev_SD_SPI_BSP_SPI
 1886 0200 801A0600 		.word	400000
 1887              		.cfi_endproc
 1888              	.LFE11:
 1890              		.section	.text.FSDev_SD_SPI_IO_Ctrl,"ax",%progbits
 1891              		.align	1
 1892              		.syntax unified
 1893              		.thumb
 1894              		.thumb_func
ARM GAS  /tmp/ccOtrZZk.s 			page 86


 1895              		.fpu fpv4-sp-d16
 1897              	FSDev_SD_SPI_IO_Ctrl:
 1898              	.LVL207:
 1899              	.LFB10:
1166:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     FS_DEV_SD_INFO      *p_sd_info;
 1900              		.loc 1 1166 1 is_stmt 1 view -0
 1901              		.cfi_startproc
 1902              		@ args = 0, pretend = 0, frame = 0
 1903              		@ frame_needed = 0, uses_anonymous_args = 0
1166:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     FS_DEV_SD_INFO      *p_sd_info;
 1904              		.loc 1 1166 1 is_stmt 0 view .LVU561
 1905 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 1906              	.LCFI33:
 1907              		.cfi_def_cfa_offset 24
 1908              		.cfi_offset 3, -24
 1909              		.cfi_offset 4, -20
 1910              		.cfi_offset 5, -16
 1911              		.cfi_offset 6, -12
 1912              		.cfi_offset 7, -8
 1913              		.cfi_offset 14, -4
 1914 0002 1446     		mov	r4, r2
 1915 0004 1D46     		mov	r5, r3
1167:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     FS_DEV_SD_INFO      *p_sd_info_ctrl;
 1916              		.loc 1 1167 5 is_stmt 1 view .LVU562
1168:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     FS_DEV_SD_SPI_DATA  *p_sd_spi_data;
 1917              		.loc 1 1168 5 view .LVU563
1169:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     CPU_BOOLEAN          ok;
 1918              		.loc 1 1169 5 view .LVU564
1170:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     CPU_BOOLEAN          chngd;
 1919              		.loc 1 1170 5 view .LVU565
1171:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     CPU_BOOLEAN         *p_chngd;
 1920              		.loc 1 1171 5 view .LVU566
1172:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 1921              		.loc 1 1172 5 view .LVU567
1175:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         case FS_DEV_IO_CTRL_REFRESH:                            /* -------------------- RE-OPEN DEV
 1922              		.loc 1 1175 5 view .LVU568
 1923 0006 4129     		cmp	r1, #65
 1924 0008 4ED0     		beq	.L129
 1925 000a 0BD8     		bhi	.L130
 1926 000c 0129     		cmp	r1, #1
 1927 000e 22D0     		beq	.L131
 1928 0010 4029     		cmp	r1, #64
 1929 0012 73D1     		bne	.L133
1185:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                 *p_err = FS_ERR_NULL_PTR;
 1930              		.loc 1 1185 14 view .LVU569
1185:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                 *p_err = FS_ERR_NULL_PTR;
 1931              		.loc 1 1185 17 is_stmt 0 view .LVU570
 1932 0014 2AB3     		cbz	r2, .L145
1190:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****              if (p_sd_spi_data->Init == DEF_NO) {
 1933              		.loc 1 1190 14 is_stmt 1 view .LVU571
1190:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****              if (p_sd_spi_data->Init == DEF_NO) {
 1934              		.loc 1 1190 29 is_stmt 0 view .LVU572
 1935 0016 466B     		ldr	r6, [r0, #52]
 1936              	.LVL208:
1191:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                  *p_err = FS_ERR_DEV_NOT_PRESENT;
 1937              		.loc 1 1191 14 is_stmt 1 view .LVU573
1191:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                  *p_err = FS_ERR_DEV_NOT_PRESENT;
ARM GAS  /tmp/ccOtrZZk.s 			page 87


 1938              		.loc 1 1191 31 is_stmt 0 view .LVU574
 1939 0018 B379     		ldrb	r3, [r6, #6]	@ zero_extendqisi2
 1940              	.LVL209:
1191:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                  *p_err = FS_ERR_DEV_NOT_PRESENT;
 1941              		.loc 1 1191 17 view .LVU575
 1942 001a 2BBB     		cbnz	r3, .L137
1192:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                   return;
 1943              		.loc 1 1192 18 is_stmt 1 view .LVU576
1192:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                   return;
 1944              		.loc 1 1192 25 is_stmt 0 view .LVU577
 1945 001c 4FF4A373 		mov	r3, #326
 1946 0020 2B80     		strh	r3, [r5]	@ movhi
1193:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****              }
 1947              		.loc 1 1193 19 is_stmt 1 view .LVU578
 1948 0022 1DE0     		b	.L128
 1949              	.LVL210:
 1950              	.L130:
1175:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         case FS_DEV_IO_CTRL_REFRESH:                            /* -------------------- RE-OPEN DEV
 1951              		.loc 1 1175 5 is_stmt 0 view .LVU579
 1952 0024 4229     		cmp	r1, #66
 1953 0026 69D1     		bne	.L133
1243:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                 *p_err = FS_ERR_NULL_PTR;
 1954              		.loc 1 1243 14 is_stmt 1 view .LVU580
1243:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                 *p_err = FS_ERR_NULL_PTR;
 1955              		.loc 1 1243 17 is_stmt 0 view .LVU581
 1956 0028 002A     		cmp	r2, #0
 1957 002a 5CD0     		beq	.L146
1248:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****              if (p_sd_spi_data->Init == DEF_NO) {
 1958              		.loc 1 1248 14 is_stmt 1 view .LVU582
1248:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****              if (p_sd_spi_data->Init == DEF_NO) {
 1959              		.loc 1 1248 29 is_stmt 0 view .LVU583
 1960 002c 466B     		ldr	r6, [r0, #52]
 1961              	.LVL211:
1249:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                  *p_err = FS_ERR_DEV_NOT_PRESENT;
 1962              		.loc 1 1249 14 is_stmt 1 view .LVU584
1249:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                  *p_err = FS_ERR_DEV_NOT_PRESENT;
 1963              		.loc 1 1249 31 is_stmt 0 view .LVU585
 1964 002e B379     		ldrb	r3, [r6, #6]	@ zero_extendqisi2
 1965              	.LVL212:
1249:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                  *p_err = FS_ERR_DEV_NOT_PRESENT;
 1966              		.loc 1 1249 17 view .LVU586
 1967 0030 002B     		cmp	r3, #0
 1968 0032 5BD0     		beq	.L147
1255:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****              ok = FSDev_SD_SPI_SendCSD(              p_sd_spi_data,
 1969              		.loc 1 1255 14 is_stmt 1 view .LVU587
1255:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****              ok = FSDev_SD_SPI_SendCSD(              p_sd_spi_data,
 1970              		.loc 1 1255 34 is_stmt 0 view .LVU588
 1971 0034 334F     		ldr	r7, .L152
 1972 0036 BB68     		ldr	r3, [r7, #8]
1255:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****              ok = FSDev_SD_SPI_SendCSD(              p_sd_spi_data,
 1973              		.loc 1 1255 14 view .LVU589
 1974 0038 B088     		ldrh	r0, [r6, #4]
 1975              	.LVL213:
1255:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****              ok = FSDev_SD_SPI_SendCSD(              p_sd_spi_data,
 1976              		.loc 1 1255 14 view .LVU590
 1977 003a 9847     		blx	r3
 1978              	.LVL214:
ARM GAS  /tmp/ccOtrZZk.s 			page 88


1256:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                        (CPU_INT08U *)p_data);
 1979              		.loc 1 1256 14 is_stmt 1 view .LVU591
1256:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                        (CPU_INT08U *)p_data);
 1980              		.loc 1 1256 19 is_stmt 0 view .LVU592
 1981 003c 2146     		mov	r1, r4
 1982 003e 3046     		mov	r0, r6
 1983 0040 FFF7FEFF 		bl	FSDev_SD_SPI_SendCSD
 1984              	.LVL215:
 1985 0044 0446     		mov	r4, r0
 1986              	.LVL216:
1258:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 1987              		.loc 1 1258 14 is_stmt 1 view .LVU593
1258:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 1988              		.loc 1 1258 34 is_stmt 0 view .LVU594
 1989 0046 FB68     		ldr	r3, [r7, #12]
1258:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 1990              		.loc 1 1258 14 view .LVU595
 1991 0048 B088     		ldrh	r0, [r6, #4]
 1992 004a 9847     		blx	r3
 1993              	.LVL217:
1260:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                 *p_err = FS_ERR_DEV_IO;
 1994              		.loc 1 1260 14 is_stmt 1 view .LVU596
1260:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                 *p_err = FS_ERR_DEV_IO;
 1995              		.loc 1 1260 17 is_stmt 0 view .LVU597
 1996 004c 002C     		cmp	r4, #0
 1997 004e 51D0     		beq	.L148
1265:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****              break;
 1998              		.loc 1 1265 13 is_stmt 1 view .LVU598
1265:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****              break;
 1999              		.loc 1 1265 20 is_stmt 0 view .LVU599
 2000 0050 0023     		movs	r3, #0
 2001 0052 2B80     		strh	r3, [r5]	@ movhi
1266:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 2002              		.loc 1 1266 14 is_stmt 1 view .LVU600
 2003 0054 04E0     		b	.L128
 2004              	.LVL218:
 2005              	.L131:
1177:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****              p_sd_spi_data = (FS_DEV_SD_SPI_DATA *)p_dev->DataPtr;
 2006              		.loc 1 1177 14 view .LVU601
1178:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****              chngd         = FSDev_SD_SPI_Refresh(p_sd_spi_data, p_err);
 2007              		.loc 1 1178 14 view .LVU602
1179:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****             *p_chngd       = chngd;
 2008              		.loc 1 1179 14 view .LVU603
1179:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****             *p_chngd       = chngd;
 2009              		.loc 1 1179 30 is_stmt 0 view .LVU604
 2010 0056 1946     		mov	r1, r3
 2011              	.LVL219:
1179:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****             *p_chngd       = chngd;
 2012              		.loc 1 1179 30 view .LVU605
 2013 0058 406B     		ldr	r0, [r0, #52]
 2014              	.LVL220:
1179:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****             *p_chngd       = chngd;
 2015              		.loc 1 1179 30 view .LVU606
 2016 005a FFF7FEFF 		bl	FSDev_SD_SPI_Refresh
 2017              	.LVL221:
1180:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****              break;
 2018              		.loc 1 1180 13 is_stmt 1 view .LVU607
ARM GAS  /tmp/ccOtrZZk.s 			page 89


1180:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****              break;
 2019              		.loc 1 1180 28 is_stmt 0 view .LVU608
 2020 005e 2070     		strb	r0, [r4]
1181:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 2021              		.loc 1 1181 14 is_stmt 1 view .LVU609
 2022              	.LVL222:
 2023              	.L128:
1285:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 2024              		.loc 1 1285 1 is_stmt 0 view .LVU610
 2025 0060 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 2026              	.LVL223:
 2027              	.L145:
1186:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                  return;
 2028              		.loc 1 1186 17 is_stmt 1 view .LVU611
1186:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                  return;
 2029              		.loc 1 1186 24 is_stmt 0 view .LVU612
 2030 0062 1323     		movs	r3, #19
 2031              	.LVL224:
1186:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                  return;
 2032              		.loc 1 1186 24 view .LVU613
 2033 0064 2B80     		strh	r3, [r5]	@ movhi
1187:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****              }
 2034              		.loc 1 1187 18 is_stmt 1 view .LVU614
 2035 0066 FBE7     		b	.L128
 2036              	.LVL225:
 2037              	.L137:
1196:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****              p_sd_info_ctrl               = (FS_DEV_SD_INFO *)p_data;
 2038              		.loc 1 1196 14 view .LVU615
1197:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 2039              		.loc 1 1197 14 view .LVU616
1199:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****              p_sd_info_ctrl->NbrBlks      = p_sd_info->NbrBlks;
 2040              		.loc 1 1199 14 view .LVU617
1199:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****              p_sd_info_ctrl->NbrBlks      = p_sd_info->NbrBlks;
 2041              		.loc 1 1199 54 is_stmt 0 view .LVU618
 2042 0068 B368     		ldr	r3, [r6, #8]
1199:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****              p_sd_info_ctrl->NbrBlks      = p_sd_info->NbrBlks;
 2043              		.loc 1 1199 43 view .LVU619
 2044 006a 1360     		str	r3, [r2]
1200:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****              p_sd_info_ctrl->ClkFreq      = p_sd_info->ClkFreq;
 2045              		.loc 1 1200 14 is_stmt 1 view .LVU620
1200:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****              p_sd_info_ctrl->ClkFreq      = p_sd_info->ClkFreq;
 2046              		.loc 1 1200 54 is_stmt 0 view .LVU621
 2047 006c F368     		ldr	r3, [r6, #12]
1200:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****              p_sd_info_ctrl->ClkFreq      = p_sd_info->ClkFreq;
 2048              		.loc 1 1200 43 view .LVU622
 2049 006e 5360     		str	r3, [r2, #4]
1201:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****              p_sd_info_ctrl->Timeout      = p_sd_info->Timeout;
 2050              		.loc 1 1201 14 is_stmt 1 view .LVU623
1201:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****              p_sd_info_ctrl->Timeout      = p_sd_info->Timeout;
 2051              		.loc 1 1201 54 is_stmt 0 view .LVU624
 2052 0070 3369     		ldr	r3, [r6, #16]
1201:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****              p_sd_info_ctrl->Timeout      = p_sd_info->Timeout;
 2053              		.loc 1 1201 43 view .LVU625
 2054 0072 9360     		str	r3, [r2, #8]
1202:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****              p_sd_info_ctrl->CardType     = p_sd_info->CardType;
 2055              		.loc 1 1202 14 is_stmt 1 view .LVU626
1202:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****              p_sd_info_ctrl->CardType     = p_sd_info->CardType;
ARM GAS  /tmp/ccOtrZZk.s 			page 90


 2056              		.loc 1 1202 54 is_stmt 0 view .LVU627
 2057 0074 7369     		ldr	r3, [r6, #20]
1202:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****              p_sd_info_ctrl->CardType     = p_sd_info->CardType;
 2058              		.loc 1 1202 43 view .LVU628
 2059 0076 D360     		str	r3, [r2, #12]
1203:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****              p_sd_info_ctrl->HighCapacity = p_sd_info->HighCapacity;
 2060              		.loc 1 1203 14 is_stmt 1 view .LVU629
1203:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****              p_sd_info_ctrl->HighCapacity = p_sd_info->HighCapacity;
 2061              		.loc 1 1203 54 is_stmt 0 view .LVU630
 2062 0078 337E     		ldrb	r3, [r6, #24]	@ zero_extendqisi2
1203:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****              p_sd_info_ctrl->HighCapacity = p_sd_info->HighCapacity;
 2063              		.loc 1 1203 43 view .LVU631
 2064 007a 1374     		strb	r3, [r2, #16]
1204:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****              p_sd_info_ctrl->ManufID      = p_sd_info->ManufID;
 2065              		.loc 1 1204 14 is_stmt 1 view .LVU632
1204:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****              p_sd_info_ctrl->ManufID      = p_sd_info->ManufID;
 2066              		.loc 1 1204 54 is_stmt 0 view .LVU633
 2067 007c 737E     		ldrb	r3, [r6, #25]	@ zero_extendqisi2
1204:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****              p_sd_info_ctrl->ManufID      = p_sd_info->ManufID;
 2068              		.loc 1 1204 43 view .LVU634
 2069 007e 5374     		strb	r3, [r2, #17]
1205:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****              p_sd_info_ctrl->OEM_ID       = p_sd_info->OEM_ID;
 2070              		.loc 1 1205 14 is_stmt 1 view .LVU635
1205:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****              p_sd_info_ctrl->OEM_ID       = p_sd_info->OEM_ID;
 2071              		.loc 1 1205 54 is_stmt 0 view .LVU636
 2072 0080 B37E     		ldrb	r3, [r6, #26]	@ zero_extendqisi2
1205:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****              p_sd_info_ctrl->OEM_ID       = p_sd_info->OEM_ID;
 2073              		.loc 1 1205 43 view .LVU637
 2074 0082 9374     		strb	r3, [r2, #18]
1206:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****              p_sd_info_ctrl->ProdSN       = p_sd_info->ProdSN;
 2075              		.loc 1 1206 14 is_stmt 1 view .LVU638
1206:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****              p_sd_info_ctrl->ProdSN       = p_sd_info->ProdSN;
 2076              		.loc 1 1206 54 is_stmt 0 view .LVU639
 2077 0084 B38B     		ldrh	r3, [r6, #28]
1206:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****              p_sd_info_ctrl->ProdSN       = p_sd_info->ProdSN;
 2078              		.loc 1 1206 43 view .LVU640
 2079 0086 9382     		strh	r3, [r2, #20]	@ movhi
1207:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****              Mem_Copy(p_sd_info_ctrl->ProdName, p_sd_info->ProdName, 7u);
 2080              		.loc 1 1207 14 is_stmt 1 view .LVU641
1207:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****              Mem_Copy(p_sd_info_ctrl->ProdName, p_sd_info->ProdName, 7u);
 2081              		.loc 1 1207 54 is_stmt 0 view .LVU642
 2082 0088 336A     		ldr	r3, [r6, #32]
1207:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****              Mem_Copy(p_sd_info_ctrl->ProdName, p_sd_info->ProdName, 7u);
 2083              		.loc 1 1207 43 view .LVU643
 2084 008a 9361     		str	r3, [r2, #24]
1208:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****              p_sd_info_ctrl->ProdRev      = p_sd_info->ProdRev;
 2085              		.loc 1 1208 14 is_stmt 1 view .LVU644
 2086 008c 0722     		movs	r2, #7
 2087              	.LVL226:
1208:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****              p_sd_info_ctrl->ProdRev      = p_sd_info->ProdRev;
 2088              		.loc 1 1208 14 is_stmt 0 view .LVU645
 2089 008e 06F12401 		add	r1, r6, #36
 2090              	.LVL227:
1208:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****              p_sd_info_ctrl->ProdRev      = p_sd_info->ProdRev;
 2091              		.loc 1 1208 14 view .LVU646
 2092 0092 04F11C00 		add	r0, r4, #28
 2093              	.LVL228:
ARM GAS  /tmp/ccOtrZZk.s 			page 91


1208:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****              p_sd_info_ctrl->ProdRev      = p_sd_info->ProdRev;
 2094              		.loc 1 1208 14 view .LVU647
 2095 0096 FFF7FEFF 		bl	Mem_Copy
 2096              	.LVL229:
1209:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****              p_sd_info_ctrl->Date         = p_sd_info->Date;
 2097              		.loc 1 1209 14 is_stmt 1 view .LVU648
1209:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****              p_sd_info_ctrl->Date         = p_sd_info->Date;
 2098              		.loc 1 1209 54 is_stmt 0 view .LVU649
 2099 009a B38D     		ldrh	r3, [r6, #44]
1209:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****              p_sd_info_ctrl->Date         = p_sd_info->Date;
 2100              		.loc 1 1209 43 view .LVU650
 2101 009c A384     		strh	r3, [r4, #36]	@ movhi
1210:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****             *p_err = FS_ERR_NONE;
 2102              		.loc 1 1210 14 is_stmt 1 view .LVU651
1210:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****             *p_err = FS_ERR_NONE;
 2103              		.loc 1 1210 54 is_stmt 0 view .LVU652
 2104 009e F38D     		ldrh	r3, [r6, #46]
1210:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****             *p_err = FS_ERR_NONE;
 2105              		.loc 1 1210 43 view .LVU653
 2106 00a0 E384     		strh	r3, [r4, #38]	@ movhi
1211:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****              break;
 2107              		.loc 1 1211 13 is_stmt 1 view .LVU654
1211:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****              break;
 2108              		.loc 1 1211 20 is_stmt 0 view .LVU655
 2109 00a2 0023     		movs	r3, #0
 2110 00a4 2B80     		strh	r3, [r5]	@ movhi
1212:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 2111              		.loc 1 1212 14 is_stmt 1 view .LVU656
 2112 00a6 DBE7     		b	.L128
 2113              	.LVL230:
 2114              	.L129:
1216:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                 *p_err = FS_ERR_NULL_PTR;
 2115              		.loc 1 1216 14 view .LVU657
1216:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                 *p_err = FS_ERR_NULL_PTR;
 2116              		.loc 1 1216 17 is_stmt 0 view .LVU658
 2117 00a8 92B1     		cbz	r2, .L149
1221:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****              if (p_sd_spi_data->Init == DEF_NO) {
 2118              		.loc 1 1221 14 is_stmt 1 view .LVU659
1221:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****              if (p_sd_spi_data->Init == DEF_NO) {
 2119              		.loc 1 1221 29 is_stmt 0 view .LVU660
 2120 00aa 466B     		ldr	r6, [r0, #52]
 2121              	.LVL231:
1222:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                  *p_err = FS_ERR_DEV_NOT_PRESENT;
 2122              		.loc 1 1222 14 is_stmt 1 view .LVU661
1222:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                  *p_err = FS_ERR_DEV_NOT_PRESENT;
 2123              		.loc 1 1222 31 is_stmt 0 view .LVU662
 2124 00ac B379     		ldrb	r3, [r6, #6]	@ zero_extendqisi2
 2125              	.LVL232:
1222:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                  *p_err = FS_ERR_DEV_NOT_PRESENT;
 2126              		.loc 1 1222 17 view .LVU663
 2127 00ae 93B1     		cbz	r3, .L150
1228:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 		     ok = FSDev_SD_SPI_SendCID(              p_sd_spi_data,
 2128              		.loc 1 1228 14 is_stmt 1 view .LVU664
1228:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 		     ok = FSDev_SD_SPI_SendCID(              p_sd_spi_data,
 2129              		.loc 1 1228 34 is_stmt 0 view .LVU665
 2130 00b0 144F     		ldr	r7, .L152
 2131 00b2 BB68     		ldr	r3, [r7, #8]
ARM GAS  /tmp/ccOtrZZk.s 			page 92


1228:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 		     ok = FSDev_SD_SPI_SendCID(              p_sd_spi_data,
 2132              		.loc 1 1228 14 view .LVU666
 2133 00b4 B088     		ldrh	r0, [r6, #4]
 2134              	.LVL233:
1228:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 		     ok = FSDev_SD_SPI_SendCID(              p_sd_spi_data,
 2135              		.loc 1 1228 14 view .LVU667
 2136 00b6 9847     		blx	r3
 2137              	.LVL234:
1229:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                        (CPU_INT08U *)p_data);
 2138              		.loc 1 1229 8 is_stmt 1 view .LVU668
1229:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                        (CPU_INT08U *)p_data);
 2139              		.loc 1 1229 13 is_stmt 0 view .LVU669
 2140 00b8 2146     		mov	r1, r4
 2141 00ba 3046     		mov	r0, r6
 2142 00bc FFF7FEFF 		bl	FSDev_SD_SPI_SendCID
 2143              	.LVL235:
 2144 00c0 0446     		mov	r4, r0
 2145              	.LVL236:
1231:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 2146              		.loc 1 1231 14 is_stmt 1 view .LVU670
1231:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 2147              		.loc 1 1231 34 is_stmt 0 view .LVU671
 2148 00c2 FB68     		ldr	r3, [r7, #12]
1231:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 2149              		.loc 1 1231 14 view .LVU672
 2150 00c4 B088     		ldrh	r0, [r6, #4]
 2151 00c6 9847     		blx	r3
 2152              	.LVL237:
1233:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                 *p_err = FS_ERR_DEV_IO;
 2153              		.loc 1 1233 14 is_stmt 1 view .LVU673
1233:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                 *p_err = FS_ERR_DEV_IO;
 2154              		.loc 1 1233 17 is_stmt 0 view .LVU674
 2155 00c8 4CB1     		cbz	r4, .L151
1238:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****              break;
 2156              		.loc 1 1238 13 is_stmt 1 view .LVU675
1238:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****              break;
 2157              		.loc 1 1238 20 is_stmt 0 view .LVU676
 2158 00ca 0023     		movs	r3, #0
 2159 00cc 2B80     		strh	r3, [r5]	@ movhi
1239:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 2160              		.loc 1 1239 14 is_stmt 1 view .LVU677
 2161 00ce C7E7     		b	.L128
 2162              	.LVL238:
 2163              	.L149:
1217:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                  return;
 2164              		.loc 1 1217 17 view .LVU678
1217:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                  return;
 2165              		.loc 1 1217 24 is_stmt 0 view .LVU679
 2166 00d0 1323     		movs	r3, #19
 2167              	.LVL239:
1217:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                  return;
 2168              		.loc 1 1217 24 view .LVU680
 2169 00d2 2B80     		strh	r3, [r5]	@ movhi
1218:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****              }
 2170              		.loc 1 1218 18 is_stmt 1 view .LVU681
 2171 00d4 C4E7     		b	.L128
 2172              	.LVL240:
ARM GAS  /tmp/ccOtrZZk.s 			page 93


 2173              	.L150:
1223:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                   return;
 2174              		.loc 1 1223 18 view .LVU682
1223:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                   return;
 2175              		.loc 1 1223 25 is_stmt 0 view .LVU683
 2176 00d6 4FF4A373 		mov	r3, #326
 2177 00da 2B80     		strh	r3, [r5]	@ movhi
1224:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****              }
 2178              		.loc 1 1224 19 is_stmt 1 view .LVU684
 2179 00dc C0E7     		b	.L128
 2180              	.LVL241:
 2181              	.L151:
1234:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                  return;
 2182              		.loc 1 1234 17 view .LVU685
1234:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                  return;
 2183              		.loc 1 1234 24 is_stmt 0 view .LVU686
 2184 00de 40F24313 		movw	r3, #323
 2185 00e2 2B80     		strh	r3, [r5]	@ movhi
1235:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****              }
 2186              		.loc 1 1235 18 is_stmt 1 view .LVU687
 2187 00e4 BCE7     		b	.L128
 2188              	.LVL242:
 2189              	.L146:
1244:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                  return;
 2190              		.loc 1 1244 17 view .LVU688
1244:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                  return;
 2191              		.loc 1 1244 24 is_stmt 0 view .LVU689
 2192 00e6 1323     		movs	r3, #19
 2193              	.LVL243:
1244:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                  return;
 2194              		.loc 1 1244 24 view .LVU690
 2195 00e8 2B80     		strh	r3, [r5]	@ movhi
1245:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****              }
 2196              		.loc 1 1245 18 is_stmt 1 view .LVU691
 2197 00ea B9E7     		b	.L128
 2198              	.LVL244:
 2199              	.L147:
1250:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                   return;
 2200              		.loc 1 1250 18 view .LVU692
1250:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                   return;
 2201              		.loc 1 1250 25 is_stmt 0 view .LVU693
 2202 00ec 4FF4A373 		mov	r3, #326
 2203 00f0 2B80     		strh	r3, [r5]	@ movhi
1251:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****              }
 2204              		.loc 1 1251 19 is_stmt 1 view .LVU694
 2205 00f2 B5E7     		b	.L128
 2206              	.LVL245:
 2207              	.L148:
1261:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                  return;
 2208              		.loc 1 1261 17 view .LVU695
1261:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                  return;
 2209              		.loc 1 1261 24 is_stmt 0 view .LVU696
 2210 00f4 40F24313 		movw	r3, #323
 2211 00f8 2B80     		strh	r3, [r5]	@ movhi
1262:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****              }
 2212              		.loc 1 1262 18 is_stmt 1 view .LVU697
 2213 00fa B1E7     		b	.L128
ARM GAS  /tmp/ccOtrZZk.s 			page 94


 2214              	.LVL246:
 2215              	.L133:
1282:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****              break;
 2216              		.loc 1 1282 13 view .LVU698
1282:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****              break;
 2217              		.loc 1 1282 20 is_stmt 0 view .LVU699
 2218 00fc 40F23913 		movw	r3, #313
 2219              	.LVL247:
1282:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****              break;
 2220              		.loc 1 1282 20 view .LVU700
 2221 0100 2B80     		strh	r3, [r5]	@ movhi
1283:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     }
 2222              		.loc 1 1283 14 is_stmt 1 view .LVU701
 2223 0102 ADE7     		b	.L128
 2224              	.L153:
 2225              		.align	2
 2226              	.L152:
 2227 0104 00000000 		.word	FSDev_SD_SPI_BSP_SPI
 2228              		.cfi_endproc
 2229              	.LFE10:
 2231              		.section	.text.FSDev_SD_SPI_WrDataMulti,"ax",%progbits
 2232              		.align	1
 2233              		.syntax unified
 2234              		.thumb
 2235              		.thumb_func
 2236              		.fpu fpv4-sp-d16
 2238              	FSDev_SD_SPI_WrDataMulti:
 2239              	.LVL248:
 2240              	.LFB20:
2210:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** #if (FS_DEV_SD_SPI_CFG_CRC_EN == DEF_ENABLED)
 2241              		.loc 1 2210 1 view -0
 2242              		.cfi_startproc
 2243              		@ args = 8, pretend = 0, frame = 8
 2244              		@ frame_needed = 0, uses_anonymous_args = 0
2210:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** #if (FS_DEV_SD_SPI_CFG_CRC_EN == DEF_ENABLED)
 2245              		.loc 1 2210 1 is_stmt 0 view .LVU703
 2246 0000 2DE9F047 		push	{r4, r5, r6, r7, r8, r9, r10, lr}
 2247              	.LCFI34:
 2248              		.cfi_def_cfa_offset 32
 2249              		.cfi_offset 4, -32
 2250              		.cfi_offset 5, -28
 2251              		.cfi_offset 6, -24
 2252              		.cfi_offset 7, -20
 2253              		.cfi_offset 8, -16
 2254              		.cfi_offset 9, -12
 2255              		.cfi_offset 10, -8
 2256              		.cfi_offset 14, -4
 2257 0004 82B0     		sub	sp, sp, #8
 2258              	.LCFI35:
 2259              		.cfi_def_cfa_offset 40
 2260 0006 0446     		mov	r4, r0
 2261 0008 8846     		mov	r8, r1
 2262 000a 9146     		mov	r9, r2
 2263 000c 1D46     		mov	r5, r3
 2264 000e 0A9F     		ldr	r7, [sp, #40]
 2265 0010 0B9E     		ldr	r6, [sp, #44]
2214:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     CPU_INT08U  resp;
ARM GAS  /tmp/ccOtrZZk.s 			page 95


 2266              		.loc 1 2214 5 is_stmt 1 view .LVU704
2215:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     CPU_INT08U  token;
 2267              		.loc 1 2215 5 view .LVU705
2216:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 2268              		.loc 1 2216 5 view .LVU706
2219:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 2269              		.loc 1 2219 5 view .LVU707
 2270 0012 3E4B     		ldr	r3, .L163
 2271              	.LVL249:
2219:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 2272              		.loc 1 2219 5 is_stmt 0 view .LVU708
 2273 0014 9B69     		ldr	r3, [r3, #24]
 2274 0016 8088     		ldrh	r0, [r0, #4]
 2275              	.LVL250:
2219:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 2276              		.loc 1 2219 5 view .LVU709
 2277 0018 9847     		blx	r3
 2278              	.LVL251:
2219:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 2279              		.loc 1 2219 5 is_stmt 1 view .LVU710
 2280 001a 0121     		movs	r1, #1
 2281 001c A088     		ldrh	r0, [r4, #4]
 2282 001e FFF7FEFF 		bl	FSDev_SD_SPI_WaitClks
 2283              	.LVL252:
2219:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 2284              		.loc 1 2219 48 view .LVU711
2221:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                             cmd,
 2285              		.loc 1 2221 5 view .LVU712
2221:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                             cmd,
 2286              		.loc 1 2221 12 is_stmt 0 view .LVU713
 2287 0022 4A46     		mov	r2, r9
 2288 0024 4146     		mov	r1, r8
 2289 0026 2046     		mov	r0, r4
 2290 0028 FFF7FEFF 		bl	FSDev_SD_SPI_Cmd
 2291              	.LVL253:
 2292 002c 8046     		mov	r8, r0
2221:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                             cmd,
 2293              		.loc 1 2221 10 view .LVU714
 2294 002e 8DF80300 		strb	r0, [sp, #3]
2225:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FS_DEV_SD_SPI_EXIT(p_sd_spi_data->UnitNbr);             /* 'Exit' SPI access.              
 2295              		.loc 1 2225 5 is_stmt 1 view .LVU715
2225:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FS_DEV_SD_SPI_EXIT(p_sd_spi_data->UnitNbr);             /* 'Exit' SPI access.              
 2296              		.loc 1 2225 8 is_stmt 0 view .LVU716
 2297 0032 D8B1     		cbz	r0, .L155
2226:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FS_TRACE_DBG(("FSDev_SD_SPI_WrDataMulti(): Failed to wr card: cmd err: %02X.\r\n", resp));
 2298              		.loc 1 2226 9 is_stmt 1 view .LVU717
 2299 0034 0121     		movs	r1, #1
 2300 0036 A088     		ldrh	r0, [r4, #4]
 2301 0038 FFF7FEFF 		bl	FSDev_SD_SPI_WaitClks
 2302              	.LVL254:
2226:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FS_TRACE_DBG(("FSDev_SD_SPI_WrDataMulti(): Failed to wr card: cmd err: %02X.\r\n", resp));
 2303              		.loc 1 2226 9 view .LVU718
 2304 003c 334B     		ldr	r3, .L163
 2305 003e DB69     		ldr	r3, [r3, #28]
 2306 0040 A088     		ldrh	r0, [r4, #4]
 2307 0042 9847     		blx	r3
 2308              	.LVL255:
ARM GAS  /tmp/ccOtrZZk.s 			page 96


2226:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FS_TRACE_DBG(("FSDev_SD_SPI_WrDataMulti(): Failed to wr card: cmd err: %02X.\r\n", resp));
 2309              		.loc 1 2226 51 view .LVU719
2227:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         return (DEF_FAIL);
 2310              		.loc 1 2227 98 view .LVU720
2228:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     }
 2311              		.loc 1 2228 9 view .LVU721
2228:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     }
 2312              		.loc 1 2228 16 is_stmt 0 view .LVU722
 2313 0044 4FF00008 		mov	r8, #0
 2314 0048 0AE0     		b	.L156
 2315              	.LVL256:
 2316              	.L162:
2256:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****             FS_DEV_SD_SPI_EXIT(p_sd_spi_data->UnitNbr);         /* 'Exit' SPI access.              
 2317              		.loc 1 2256 13 is_stmt 1 view .LVU723
2256:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****             FS_DEV_SD_SPI_EXIT(p_sd_spi_data->UnitNbr);         /* 'Exit' SPI access.              
 2318              		.loc 1 2256 19 is_stmt 0 view .LVU724
 2319 004a A088     		ldrh	r0, [r4, #4]
 2320 004c FFF7FEFF 		bl	FSDev_SD_SPI_WaitWhileBusy
 2321              	.LVL257:
2257:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****             FS_TRACE_DBG(("FSDev_SD_SPI_WrDataMulti(): Failed to wr card: data resp token rx'd: %1X
 2322              		.loc 1 2257 13 is_stmt 1 view .LVU725
 2323 0050 0121     		movs	r1, #1
 2324 0052 A088     		ldrh	r0, [r4, #4]
 2325 0054 FFF7FEFF 		bl	FSDev_SD_SPI_WaitClks
 2326              	.LVL258:
2257:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****             FS_TRACE_DBG(("FSDev_SD_SPI_WrDataMulti(): Failed to wr card: data resp token rx'd: %1X
 2327              		.loc 1 2257 13 view .LVU726
 2328 0058 DAF81C30 		ldr	r3, [r10, #28]
 2329 005c A088     		ldrh	r0, [r4, #4]
 2330 005e 9847     		blx	r3
 2331              	.LVL259:
2257:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****             FS_TRACE_DBG(("FSDev_SD_SPI_WrDataMulti(): Failed to wr card: data resp token rx'd: %1X
 2332              		.loc 1 2257 55 view .LVU727
2258:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****             return (DEF_FAIL);
 2333              		.loc 1 2258 146 view .LVU728
2259:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         }
 2334              		.loc 1 2259 13 view .LVU729
 2335              	.L156:
2289:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** #endif
 2336              		.loc 1 2289 1 is_stmt 0 view .LVU730
 2337 0060 4046     		mov	r0, r8
 2338 0062 02B0     		add	sp, sp, #8
 2339              	.LCFI36:
 2340              		.cfi_remember_state
 2341              		.cfi_def_cfa_offset 32
 2342              		@ sp needed
 2343 0064 BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, r10, pc}
 2344              	.LVL260:
 2345              	.L158:
 2346              	.LCFI37:
 2347              		.cfi_restore_state
2271:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         cnt--;
 2348              		.loc 1 2271 9 is_stmt 1 view .LVU731
2271:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         cnt--;
 2349              		.loc 1 2271 15 is_stmt 0 view .LVU732
 2350 0068 3D44     		add	r5, r5, r7
 2351              	.LVL261:
ARM GAS  /tmp/ccOtrZZk.s 			page 97


2272:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     }
 2352              		.loc 1 2272 9 is_stmt 1 view .LVU733
2272:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     }
 2353              		.loc 1 2272 12 is_stmt 0 view .LVU734
 2354 006a 013E     		subs	r6, r6, #1
 2355              	.LVL262:
 2356              	.L155:
2231:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         token = FS_DEV_SD_SPI_TOKEN_START_BLK_MULT;
 2357              		.loc 1 2231 11 is_stmt 1 view .LVU735
 2358 006c 86B3     		cbz	r6, .L161
2232:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FSDev_SD_SPI_BSP_SPI.Wr( p_sd_spi_data->UnitNbr,        /* Wr token.                       
 2359              		.loc 1 2232 9 view .LVU736
2232:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FSDev_SD_SPI_BSP_SPI.Wr( p_sd_spi_data->UnitNbr,        /* Wr token.                       
 2360              		.loc 1 2232 15 is_stmt 0 view .LVU737
 2361 006e FC23     		movs	r3, #252
 2362 0070 8DF80230 		strb	r3, [sp, #2]
2233:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                 &token,
 2363              		.loc 1 2233 9 is_stmt 1 view .LVU738
2233:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                 &token,
 2364              		.loc 1 2233 29 is_stmt 0 view .LVU739
 2365 0074 DFF894A0 		ldr	r10, .L163
 2366 0078 DAF81490 		ldr	r9, [r10, #20]
2233:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                 &token,
 2367              		.loc 1 2233 9 view .LVU740
 2368 007c 0122     		movs	r2, #1
 2369 007e 0DF10201 		add	r1, sp, #2
 2370 0082 A088     		ldrh	r0, [r4, #4]
 2371 0084 C847     		blx	r9
 2372              	.LVL263:
2237:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                  p_src,
 2373              		.loc 1 2237 9 is_stmt 1 view .LVU741
 2374 0086 3A46     		mov	r2, r7
 2375 0088 2946     		mov	r1, r5
 2376 008a A088     		ldrh	r0, [r4, #4]
 2377 008c C847     		blx	r9
 2378              	.LVL264:
2246:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                 &crc_buf[0],
 2379              		.loc 1 2246 9 view .LVU742
 2380 008e 0222     		movs	r2, #2
 2381 0090 01A9     		add	r1, sp, #4
 2382 0092 A088     		ldrh	r0, [r4, #4]
 2383 0094 C847     		blx	r9
 2384              	.LVL265:
2250:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                 &resp,
 2385              		.loc 1 2250 9 view .LVU743
2250:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                 &resp,
 2386              		.loc 1 2250 29 is_stmt 0 view .LVU744
 2387 0096 DAF81030 		ldr	r3, [r10, #16]
2250:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                 &resp,
 2388              		.loc 1 2250 9 view .LVU745
 2389 009a 0122     		movs	r2, #1
 2390 009c 0DF10301 		add	r1, sp, #3
 2391 00a0 A088     		ldrh	r0, [r4, #4]
 2392 00a2 9847     		blx	r3
 2393              	.LVL266:
2254:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                                 /* Wait while busy token rx'd.     
 2394              		.loc 1 2254 9 is_stmt 1 view .LVU746
ARM GAS  /tmp/ccOtrZZk.s 			page 98


2254:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                                 /* Wait while busy token rx'd.     
 2395              		.loc 1 2254 19 is_stmt 0 view .LVU747
 2396 00a4 9DF80320 		ldrb	r2, [sp, #3]	@ zero_extendqisi2
2254:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                                 /* Wait while busy token rx'd.     
 2397              		.loc 1 2254 12 view .LVU748
 2398 00a8 02F00F02 		and	r2, r2, #15
 2399 00ac 052A     		cmp	r2, #5
 2400 00ae CCD1     		bne	.L162
2263:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 2401              		.loc 1 2263 9 is_stmt 1 view .LVU749
2263:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 2402              		.loc 1 2263 16 is_stmt 0 view .LVU750
 2403 00b0 A088     		ldrh	r0, [r4, #4]
 2404 00b2 FFF7FEFF 		bl	FSDev_SD_SPI_WaitWhileBusy
 2405              	.LVL267:
2263:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 2406              		.loc 1 2263 14 view .LVU751
 2407 00b6 8DF80300 		strb	r0, [sp, #3]
2265:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****             FS_DEV_SD_SPI_EXIT(p_sd_spi_data->UnitNbr);         /* 'Exit' SPI access.              
 2408              		.loc 1 2265 9 is_stmt 1 view .LVU752
2265:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****             FS_DEV_SD_SPI_EXIT(p_sd_spi_data->UnitNbr);         /* 'Exit' SPI access.              
 2409              		.loc 1 2265 12 is_stmt 0 view .LVU753
 2410 00ba FF28     		cmp	r0, #255
 2411 00bc D4D0     		beq	.L158
2266:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****             FS_TRACE_DBG(("FSDev_SD_SPI_WrDataMulti(): Failed to wr card: card busy timed out.\r\n"
 2412              		.loc 1 2266 13 is_stmt 1 view .LVU754
 2413 00be 0121     		movs	r1, #1
 2414 00c0 A088     		ldrh	r0, [r4, #4]
 2415 00c2 FFF7FEFF 		bl	FSDev_SD_SPI_WaitClks
 2416              	.LVL268:
2266:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****             FS_TRACE_DBG(("FSDev_SD_SPI_WrDataMulti(): Failed to wr card: card busy timed out.\r\n"
 2417              		.loc 1 2266 13 view .LVU755
 2418 00c6 114B     		ldr	r3, .L163
 2419 00c8 DB69     		ldr	r3, [r3, #28]
 2420 00ca A088     		ldrh	r0, [r4, #4]
 2421 00cc 9847     		blx	r3
 2422              	.LVL269:
2266:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****             FS_TRACE_DBG(("FSDev_SD_SPI_WrDataMulti(): Failed to wr card: card busy timed out.\r\n"
 2423              		.loc 1 2266 55 view .LVU756
2267:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****             return (DEF_FAIL);
 2424              		.loc 1 2267 102 view .LVU757
2268:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         }
 2425              		.loc 1 2268 13 view .LVU758
2268:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         }
 2426              		.loc 1 2268 20 is_stmt 0 view .LVU759
 2427 00ce C7E7     		b	.L156
 2428              	.L161:
2275:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     FSDev_SD_SPI_BSP_SPI.Wr( p_sd_spi_data->UnitNbr,            /* Wr token.                       
 2429              		.loc 1 2275 5 is_stmt 1 view .LVU760
2275:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     FSDev_SD_SPI_BSP_SPI.Wr( p_sd_spi_data->UnitNbr,            /* Wr token.                       
 2430              		.loc 1 2275 11 is_stmt 0 view .LVU761
 2431 00d0 FD23     		movs	r3, #253
 2432 00d2 8DF80230 		strb	r3, [sp, #2]
2276:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                             &token,
 2433              		.loc 1 2276 5 is_stmt 1 view .LVU762
2276:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                             &token,
 2434              		.loc 1 2276 25 is_stmt 0 view .LVU763
ARM GAS  /tmp/ccOtrZZk.s 			page 99


 2435 00d6 0D4D     		ldr	r5, .L163
 2436              	.LVL270:
2276:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                             &token,
 2437              		.loc 1 2276 25 view .LVU764
 2438 00d8 6B69     		ldr	r3, [r5, #20]
2276:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                             &token,
 2439              		.loc 1 2276 5 view .LVU765
 2440 00da 0122     		movs	r2, #1
 2441 00dc 0DF10201 		add	r1, sp, #2
 2442 00e0 A088     		ldrh	r0, [r4, #4]
 2443 00e2 9847     		blx	r3
 2444              	.LVL271:
2280:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     FS_DEV_SD_SPI_EXIT(p_sd_spi_data->UnitNbr);                 /* 'Exit' SPI access.              
 2445              		.loc 1 2280 5 is_stmt 1 view .LVU766
2280:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     FS_DEV_SD_SPI_EXIT(p_sd_spi_data->UnitNbr);                 /* 'Exit' SPI access.              
 2446              		.loc 1 2280 13 is_stmt 0 view .LVU767
 2447 00e4 A088     		ldrh	r0, [r4, #4]
 2448 00e6 FFF7FEFF 		bl	FSDev_SD_SPI_WaitWhileBusy
 2449              	.LVL272:
2280:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     FS_DEV_SD_SPI_EXIT(p_sd_spi_data->UnitNbr);                 /* 'Exit' SPI access.              
 2450              		.loc 1 2280 11 view .LVU768
 2451 00ea 8DF80300 		strb	r0, [sp, #3]
2281:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 2452              		.loc 1 2281 5 is_stmt 1 view .LVU769
 2453 00ee 0121     		movs	r1, #1
 2454 00f0 A088     		ldrh	r0, [r4, #4]
 2455 00f2 FFF7FEFF 		bl	FSDev_SD_SPI_WaitClks
 2456              	.LVL273:
2281:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 2457              		.loc 1 2281 5 view .LVU770
 2458 00f6 EB69     		ldr	r3, [r5, #28]
 2459 00f8 A088     		ldrh	r0, [r4, #4]
 2460 00fa 9847     		blx	r3
 2461              	.LVL274:
2281:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 2462              		.loc 1 2281 47 view .LVU771
2283:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FS_TRACE_DBG(("FSDev_SD_SPI_WrDataMulti(): Failed to wr card: card busy timed out.\r\n"));
 2463              		.loc 1 2283 5 view .LVU772
2283:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FS_TRACE_DBG(("FSDev_SD_SPI_WrDataMulti(): Failed to wr card: card busy timed out.\r\n"));
 2464              		.loc 1 2283 14 is_stmt 0 view .LVU773
 2465 00fc 9DF80330 		ldrb	r3, [sp, #3]	@ zero_extendqisi2
2283:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FS_TRACE_DBG(("FSDev_SD_SPI_WrDataMulti(): Failed to wr card: card busy timed out.\r\n"));
 2466              		.loc 1 2283 8 view .LVU774
 2467 0100 FF2B     		cmp	r3, #255
 2468 0102 ADD1     		bne	.L156
2288:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** }
 2469              		.loc 1 2288 12 view .LVU775
 2470 0104 4FF00108 		mov	r8, #1
 2471 0108 AAE7     		b	.L156
 2472              	.L164:
 2473 010a 00BF     		.align	2
 2474              	.L163:
 2475 010c 00000000 		.word	FSDev_SD_SPI_BSP_SPI
 2476              		.cfi_endproc
 2477              	.LFE20:
 2479              		.section	.text.FSDev_SD_SPI_WrData,"ax",%progbits
 2480              		.align	1
ARM GAS  /tmp/ccOtrZZk.s 			page 100


 2481              		.syntax unified
 2482              		.thumb
 2483              		.thumb_func
 2484              		.fpu fpv4-sp-d16
 2486              	FSDev_SD_SPI_WrData:
 2487              	.LVL275:
 2488              	.LFB19:
2112:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** #if (FS_DEV_SD_SPI_CFG_CRC_EN == DEF_ENABLED)
 2489              		.loc 1 2112 1 is_stmt 1 view -0
 2490              		.cfi_startproc
 2491              		@ args = 4, pretend = 0, frame = 8
 2492              		@ frame_needed = 0, uses_anonymous_args = 0
2112:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** #if (FS_DEV_SD_SPI_CFG_CRC_EN == DEF_ENABLED)
 2493              		.loc 1 2112 1 is_stmt 0 view .LVU777
 2494 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 2495              	.LCFI38:
 2496              		.cfi_def_cfa_offset 24
 2497              		.cfi_offset 4, -24
 2498              		.cfi_offset 5, -20
 2499              		.cfi_offset 6, -16
 2500              		.cfi_offset 7, -12
 2501              		.cfi_offset 8, -8
 2502              		.cfi_offset 14, -4
 2503 0004 82B0     		sub	sp, sp, #8
 2504              	.LCFI39:
 2505              		.cfi_def_cfa_offset 32
 2506 0006 0446     		mov	r4, r0
 2507 0008 0D46     		mov	r5, r1
 2508 000a 1646     		mov	r6, r2
 2509 000c 9846     		mov	r8, r3
2116:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     CPU_INT08U  resp;
 2510              		.loc 1 2116 5 is_stmt 1 view .LVU778
2117:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     CPU_INT08U  token;
 2511              		.loc 1 2117 5 view .LVU779
2118:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 2512              		.loc 1 2118 5 view .LVU780
2121:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 2513              		.loc 1 2121 5 view .LVU781
 2514 000e 2D4B     		ldr	r3, .L171
 2515              	.LVL276:
2121:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 2516              		.loc 1 2121 5 is_stmt 0 view .LVU782
 2517 0010 9B69     		ldr	r3, [r3, #24]
 2518 0012 8088     		ldrh	r0, [r0, #4]
 2519              	.LVL277:
2121:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 2520              		.loc 1 2121 5 view .LVU783
 2521 0014 9847     		blx	r3
 2522              	.LVL278:
2121:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 2523              		.loc 1 2121 5 is_stmt 1 view .LVU784
 2524 0016 0121     		movs	r1, #1
 2525 0018 A088     		ldrh	r0, [r4, #4]
 2526 001a FFF7FEFF 		bl	FSDev_SD_SPI_WaitClks
 2527              	.LVL279:
2121:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 2528              		.loc 1 2121 48 view .LVU785
ARM GAS  /tmp/ccOtrZZk.s 			page 101


2123:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                              cmd,
 2529              		.loc 1 2123 5 view .LVU786
2123:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                              cmd,
 2530              		.loc 1 2123 13 is_stmt 0 view .LVU787
 2531 001e 3246     		mov	r2, r6
 2532 0020 2946     		mov	r1, r5
 2533 0022 2046     		mov	r0, r4
 2534 0024 FFF7FEFF 		bl	FSDev_SD_SPI_Cmd
 2535              	.LVL280:
2123:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                              cmd,
 2536              		.loc 1 2123 11 view .LVU788
 2537 0028 8DF80300 		strb	r0, [sp, #3]
2127:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FS_DEV_SD_SPI_EXIT(p_sd_spi_data->UnitNbr);             /* 'Exit' SPI access.              
 2538              		.loc 1 2127 5 is_stmt 1 view .LVU789
2127:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FS_DEV_SD_SPI_EXIT(p_sd_spi_data->UnitNbr);             /* 'Exit' SPI access.              
 2539              		.loc 1 2127 8 is_stmt 0 view .LVU790
 2540 002c 60BB     		cbnz	r0, .L170
 2541 002e 0546     		mov	r5, r0
2133:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     FSDev_SD_SPI_BSP_SPI.Wr( p_sd_spi_data->UnitNbr,            /* Wr token.                       
 2542              		.loc 1 2133 5 is_stmt 1 view .LVU791
2133:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     FSDev_SD_SPI_BSP_SPI.Wr( p_sd_spi_data->UnitNbr,            /* Wr token.                       
 2543              		.loc 1 2133 11 is_stmt 0 view .LVU792
 2544 0030 FE23     		movs	r3, #254
 2545 0032 8DF80230 		strb	r3, [sp, #2]
2134:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                             &token,
 2546              		.loc 1 2134 5 is_stmt 1 view .LVU793
2134:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                             &token,
 2547              		.loc 1 2134 25 is_stmt 0 view .LVU794
 2548 0036 234F     		ldr	r7, .L171
 2549 0038 7E69     		ldr	r6, [r7, #20]
 2550              	.LVL281:
2134:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                             &token,
 2551              		.loc 1 2134 5 view .LVU795
 2552 003a 0122     		movs	r2, #1
 2553 003c 0DF10201 		add	r1, sp, #2
 2554 0040 A088     		ldrh	r0, [r4, #4]
 2555 0042 B047     		blx	r6
 2556              	.LVL282:
2138:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                              p_src,
 2557              		.loc 1 2138 5 is_stmt 1 view .LVU796
 2558 0044 089A     		ldr	r2, [sp, #32]
 2559 0046 4146     		mov	r1, r8
 2560 0048 A088     		ldrh	r0, [r4, #4]
 2561 004a B047     		blx	r6
 2562              	.LVL283:
2147:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                             &crc_buf[0],
 2563              		.loc 1 2147 5 view .LVU797
 2564 004c 0222     		movs	r2, #2
 2565 004e 01A9     		add	r1, sp, #4
 2566 0050 A088     		ldrh	r0, [r4, #4]
 2567 0052 B047     		blx	r6
 2568              	.LVL284:
2151:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                             &resp,
 2569              		.loc 1 2151 5 view .LVU798
2151:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                             &resp,
 2570              		.loc 1 2151 25 is_stmt 0 view .LVU799
 2571 0054 3B69     		ldr	r3, [r7, #16]
ARM GAS  /tmp/ccOtrZZk.s 			page 102


2151:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                             &resp,
 2572              		.loc 1 2151 5 view .LVU800
 2573 0056 0122     		movs	r2, #1
 2574 0058 0DF10301 		add	r1, sp, #3
 2575 005c A088     		ldrh	r0, [r4, #4]
 2576 005e 9847     		blx	r3
 2577              	.LVL285:
2157:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                                 /* Wait while busy token rx'd.     
 2578              		.loc 1 2157 5 is_stmt 1 view .LVU801
2157:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                                 /* Wait while busy token rx'd.     
 2579              		.loc 1 2157 15 is_stmt 0 view .LVU802
 2580 0060 9DF80330 		ldrb	r3, [sp, #3]	@ zero_extendqisi2
2157:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                                 /* Wait while busy token rx'd.     
 2581              		.loc 1 2157 8 view .LVU803
 2582 0064 03F00F03 		and	r3, r3, #15
 2583 0068 052B     		cmp	r3, #5
 2584 006a 17D0     		beq	.L168
2159:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FS_DEV_SD_SPI_EXIT(p_sd_spi_data->UnitNbr);             /* 'Exit' SPI access.              
 2585              		.loc 1 2159 9 is_stmt 1 view .LVU804
2159:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FS_DEV_SD_SPI_EXIT(p_sd_spi_data->UnitNbr);             /* 'Exit' SPI access.              
 2586              		.loc 1 2159 15 is_stmt 0 view .LVU805
 2587 006c A088     		ldrh	r0, [r4, #4]
 2588 006e FFF7FEFF 		bl	FSDev_SD_SPI_WaitWhileBusy
 2589              	.LVL286:
2160:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FS_TRACE_DBG(("FSDev_SD_SPI_WrData(): Failed to wr card: data resp token rx'd: %1X.\r\n", r
 2590              		.loc 1 2160 9 is_stmt 1 view .LVU806
 2591 0072 0121     		movs	r1, #1
 2592 0074 A088     		ldrh	r0, [r4, #4]
 2593 0076 FFF7FEFF 		bl	FSDev_SD_SPI_WaitClks
 2594              	.LVL287:
2160:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FS_TRACE_DBG(("FSDev_SD_SPI_WrData(): Failed to wr card: data resp token rx'd: %1X.\r\n", r
 2595              		.loc 1 2160 9 view .LVU807
 2596 007a FB69     		ldr	r3, [r7, #28]
 2597 007c A088     		ldrh	r0, [r4, #4]
 2598 007e 9847     		blx	r3
 2599              	.LVL288:
2160:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FS_TRACE_DBG(("FSDev_SD_SPI_WrData(): Failed to wr card: data resp token rx'd: %1X.\r\n", r
 2600              		.loc 1 2160 51 view .LVU808
2161:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         return (DEF_FAIL);
 2601              		.loc 1 2161 137 view .LVU809
2162:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     }
 2602              		.loc 1 2162 9 view .LVU810
 2603              	.L167:
2174:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** #endif
 2604              		.loc 1 2174 1 is_stmt 0 view .LVU811
 2605 0080 2846     		mov	r0, r5
 2606 0082 02B0     		add	sp, sp, #8
 2607              	.LCFI40:
 2608              		.cfi_remember_state
 2609              		.cfi_def_cfa_offset 24
 2610              		@ sp needed
 2611 0084 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 2612              	.LVL289:
 2613              	.L170:
 2614              	.LCFI41:
 2615              		.cfi_restore_state
2128:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FS_TRACE_DBG(("FSDev_SD_SPI_WrData(): Failed to wr card: cmd err: %02X.\r\n", resp));
ARM GAS  /tmp/ccOtrZZk.s 			page 103


 2616              		.loc 1 2128 9 is_stmt 1 view .LVU812
 2617 0088 0121     		movs	r1, #1
 2618 008a A088     		ldrh	r0, [r4, #4]
 2619 008c FFF7FEFF 		bl	FSDev_SD_SPI_WaitClks
 2620              	.LVL290:
2128:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FS_TRACE_DBG(("FSDev_SD_SPI_WrData(): Failed to wr card: cmd err: %02X.\r\n", resp));
 2621              		.loc 1 2128 9 view .LVU813
 2622 0090 0C4B     		ldr	r3, .L171
 2623 0092 DB69     		ldr	r3, [r3, #28]
 2624 0094 A088     		ldrh	r0, [r4, #4]
 2625 0096 9847     		blx	r3
 2626              	.LVL291:
2128:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FS_TRACE_DBG(("FSDev_SD_SPI_WrData(): Failed to wr card: cmd err: %02X.\r\n", resp));
 2627              		.loc 1 2128 51 view .LVU814
2129:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         return (DEF_FAIL);
 2628              		.loc 1 2129 93 view .LVU815
2130:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     }
 2629              		.loc 1 2130 9 view .LVU816
2130:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     }
 2630              		.loc 1 2130 16 is_stmt 0 view .LVU817
 2631 0098 0025     		movs	r5, #0
 2632 009a F1E7     		b	.L167
 2633              	.LVL292:
 2634              	.L168:
2165:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     FS_DEV_SD_SPI_EXIT(p_sd_spi_data->UnitNbr);                 /* 'Exit' SPI access.              
 2635              		.loc 1 2165 5 is_stmt 1 view .LVU818
2165:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     FS_DEV_SD_SPI_EXIT(p_sd_spi_data->UnitNbr);                 /* 'Exit' SPI access.              
 2636              		.loc 1 2165 12 is_stmt 0 view .LVU819
 2637 009c A088     		ldrh	r0, [r4, #4]
 2638 009e FFF7FEFF 		bl	FSDev_SD_SPI_WaitWhileBusy
 2639              	.LVL293:
2165:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     FS_DEV_SD_SPI_EXIT(p_sd_spi_data->UnitNbr);                 /* 'Exit' SPI access.              
 2640              		.loc 1 2165 10 view .LVU820
 2641 00a2 8DF80300 		strb	r0, [sp, #3]
2166:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 2642              		.loc 1 2166 5 is_stmt 1 view .LVU821
 2643 00a6 0121     		movs	r1, #1
 2644 00a8 A088     		ldrh	r0, [r4, #4]
 2645 00aa FFF7FEFF 		bl	FSDev_SD_SPI_WaitClks
 2646              	.LVL294:
2166:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 2647              		.loc 1 2166 5 view .LVU822
 2648 00ae 054B     		ldr	r3, .L171
 2649 00b0 DB69     		ldr	r3, [r3, #28]
 2650 00b2 A088     		ldrh	r0, [r4, #4]
 2651 00b4 9847     		blx	r3
 2652              	.LVL295:
2166:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 2653              		.loc 1 2166 47 view .LVU823
2168:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FS_TRACE_DBG(("FSDev_SD_SPI_WrData(): Failed to wr card: card busy timed out.\r\n"));
 2654              		.loc 1 2168 5 view .LVU824
2168:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FS_TRACE_DBG(("FSDev_SD_SPI_WrData(): Failed to wr card: card busy timed out.\r\n"));
 2655              		.loc 1 2168 14 is_stmt 0 view .LVU825
 2656 00b6 9DF80330 		ldrb	r3, [sp, #3]	@ zero_extendqisi2
2168:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FS_TRACE_DBG(("FSDev_SD_SPI_WrData(): Failed to wr card: card busy timed out.\r\n"));
 2657              		.loc 1 2168 8 view .LVU826
 2658 00ba FF2B     		cmp	r3, #255
ARM GAS  /tmp/ccOtrZZk.s 			page 104


 2659 00bc E0D1     		bne	.L167
2173:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** }
 2660              		.loc 1 2173 12 view .LVU827
 2661 00be 0125     		movs	r5, #1
 2662 00c0 DEE7     		b	.L167
 2663              	.L172:
 2664 00c2 00BF     		.align	2
 2665              	.L171:
 2666 00c4 00000000 		.word	FSDev_SD_SPI_BSP_SPI
 2667              		.cfi_endproc
 2668              	.LFE19:
 2670              		.section	.text.FSDev_SD_SPI_Wr,"ax",%progbits
 2671              		.align	1
 2672              		.syntax unified
 2673              		.thumb
 2674              		.thumb_func
 2675              		.fpu fpv4-sp-d16
 2677              	FSDev_SD_SPI_Wr:
 2678              	.LVL296:
 2679              	.LFB8:
 990:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     CPU_BOOLEAN          ok;
 2680              		.loc 1 990 1 is_stmt 1 view -0
 2681              		.cfi_startproc
 2682              		@ args = 4, pretend = 0, frame = 0
 2683              		@ frame_needed = 0, uses_anonymous_args = 0
 990:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     CPU_BOOLEAN          ok;
 2684              		.loc 1 990 1 is_stmt 0 view .LVU829
 2685 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 2686              	.LCFI42:
 2687              		.cfi_def_cfa_offset 24
 2688              		.cfi_offset 4, -24
 2689              		.cfi_offset 5, -20
 2690              		.cfi_offset 6, -16
 2691              		.cfi_offset 7, -12
 2692              		.cfi_offset 8, -8
 2693              		.cfi_offset 14, -4
 2694 0004 82B0     		sub	sp, sp, #8
 2695              	.LCFI43:
 2696              		.cfi_def_cfa_offset 32
 2697 0006 8846     		mov	r8, r1
 2698 0008 1446     		mov	r4, r2
 2699 000a 1D46     		mov	r5, r3
 991:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     CPU_INT32U           start_addr;
 2700              		.loc 1 991 5 is_stmt 1 view .LVU830
 992:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     FS_DEV_SD_INFO      *p_sd_info;
 2701              		.loc 1 992 5 view .LVU831
 993:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     FS_DEV_SD_SPI_DATA  *p_sd_spi_data;
 2702              		.loc 1 993 5 view .LVU832
 994:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     CPU_INT08U          *p_src_08;
 2703              		.loc 1 994 5 view .LVU833
 995:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     FS_QTY               unit_nbr;
 2704              		.loc 1 995 5 view .LVU834
 996:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 2705              		.loc 1 996 5 view .LVU835
1000:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     p_src_08      = (CPU_INT08U         *)p_src;
 2706              		.loc 1 1000 5 view .LVU836
1000:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     p_src_08      = (CPU_INT08U         *)p_src;
ARM GAS  /tmp/ccOtrZZk.s 			page 105


 2707              		.loc 1 1000 19 is_stmt 0 view .LVU837
 2708 000c 078C     		ldrh	r7, [r0, #32]
 2709              	.LVL297:
1001:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     p_sd_spi_data = (FS_DEV_SD_SPI_DATA *)p_dev->DataPtr;
 2710              		.loc 1 1001 5 is_stmt 1 view .LVU838
1002:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     p_sd_info     = &p_sd_spi_data->Info;
 2711              		.loc 1 1002 5 view .LVU839
1002:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     p_sd_info     = &p_sd_spi_data->Info;
 2712              		.loc 1 1002 19 is_stmt 0 view .LVU840
 2713 000e 466B     		ldr	r6, [r0, #52]
 2714              	.LVL298:
1003:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                                 /* See Note #2.                    
 2715              		.loc 1 1003 5 is_stmt 1 view .LVU841
1005:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 2716              		.loc 1 1005 5 view .LVU842
1005:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 2717              		.loc 1 1005 31 is_stmt 0 view .LVU843
 2718 0010 737E     		ldrb	r3, [r6, #25]	@ zero_extendqisi2
 2719              	.LVL299:
1005:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 2720              		.loc 1 1005 66 view .LVU844
 2721 0012 012B     		cmp	r3, #1
 2722 0014 00D0     		beq	.L174
1005:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 2723              		.loc 1 1005 66 discriminator 1 view .LVU845
 2724 0016 5402     		lsls	r4, r2, #9
 2725              	.L174:
 2726              	.LVL300:
1007:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 2727              		.loc 1 1007 5 is_stmt 1 discriminator 4 view .LVU846
1007:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 2728              		.loc 1 1007 25 is_stmt 0 discriminator 4 view .LVU847
 2729 0018 174B     		ldr	r3, .L180
 2730 001a 9B68     		ldr	r3, [r3, #8]
1007:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 2731              		.loc 1 1007 5 discriminator 4 view .LVU848
 2732 001c 3846     		mov	r0, r7
 2733              	.LVL301:
1007:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 2734              		.loc 1 1007 5 discriminator 4 view .LVU849
 2735 001e 9847     		blx	r3
 2736              	.LVL302:
1010:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         ok = FSDev_SD_SPI_WrDataMulti(p_sd_spi_data,            /* Wr data.                        
 2737              		.loc 1 1010 5 is_stmt 1 discriminator 4 view .LVU850
1010:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         ok = FSDev_SD_SPI_WrDataMulti(p_sd_spi_data,            /* Wr data.                        
 2738              		.loc 1 1010 8 is_stmt 0 discriminator 4 view .LVU851
 2739 0020 012D     		cmp	r5, #1
 2740 0022 16D9     		bls	.L175
1011:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                       FS_DEV_SD_CMD_WRITE_MULTIPLE_BLOCK,
 2741              		.loc 1 1011 9 is_stmt 1 view .LVU852
1011:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                       FS_DEV_SD_CMD_WRITE_MULTIPLE_BLOCK,
 2742              		.loc 1 1011 14 is_stmt 0 view .LVU853
 2743 0024 0195     		str	r5, [sp, #4]
 2744 0026 4FF40073 		mov	r3, #512
 2745 002a 0093     		str	r3, [sp]
 2746 002c 4346     		mov	r3, r8
 2747 002e 2246     		mov	r2, r4
ARM GAS  /tmp/ccOtrZZk.s 			page 106


 2748 0030 1921     		movs	r1, #25
 2749 0032 3046     		mov	r0, r6
 2750 0034 FFF7FEFF 		bl	FSDev_SD_SPI_WrDataMulti
 2751              	.LVL303:
 2752              	.L176:
1030:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FSDev_SD_SPI_BSP_SPI.Unlock(unit_nbr);
 2753              		.loc 1 1030 5 is_stmt 1 view .LVU854
1030:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FSDev_SD_SPI_BSP_SPI.Unlock(unit_nbr);
 2754              		.loc 1 1030 8 is_stmt 0 view .LVU855
 2755 0038 0128     		cmp	r0, #1
 2756 003a 14D0     		beq	.L177
1031:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FS_DEV_SD_SPI_ERR_WR_CTR_INC(p_sd_spi_data);
 2757              		.loc 1 1031 9 is_stmt 1 view .LVU856
1031:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FS_DEV_SD_SPI_ERR_WR_CTR_INC(p_sd_spi_data);
 2758              		.loc 1 1031 29 is_stmt 0 view .LVU857
 2759 003c 0E4B     		ldr	r3, .L180
 2760 003e DB68     		ldr	r3, [r3, #12]
1031:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FS_DEV_SD_SPI_ERR_WR_CTR_INC(p_sd_spi_data);
 2761              		.loc 1 1031 9 view .LVU858
 2762 0040 3846     		mov	r0, r7
 2763              	.LVL304:
1031:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FS_DEV_SD_SPI_ERR_WR_CTR_INC(p_sd_spi_data);
 2764              		.loc 1 1031 9 view .LVU859
 2765 0042 9847     		blx	r3
 2766              	.LVL305:
1032:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FS_TRACE_DBG(("FSDev_SD_SPI_Wr(): Failed to write card.\r\n"));
 2767              		.loc 1 1032 52 is_stmt 1 view .LVU860
1033:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****        *p_err = FS_ERR_DEV_IO;
 2768              		.loc 1 1033 71 view .LVU861
1034:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         return;
 2769              		.loc 1 1034 8 view .LVU862
1034:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         return;
 2770              		.loc 1 1034 15 is_stmt 0 view .LVU863
 2771 0044 40F24313 		movw	r3, #323
 2772 0048 089A     		ldr	r2, [sp, #32]
 2773 004a 1380     		strh	r3, [r2]	@ movhi
1035:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     }
 2774              		.loc 1 1035 9 is_stmt 1 view .LVU864
 2775              	.L173:
1045:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** #endif
 2776              		.loc 1 1045 1 is_stmt 0 view .LVU865
 2777 004c 02B0     		add	sp, sp, #8
 2778              	.LCFI44:
 2779              		.cfi_remember_state
 2780              		.cfi_def_cfa_offset 24
 2781              		@ sp needed
 2782 004e BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 2783              	.LVL306:
 2784              	.L175:
 2785              	.LCFI45:
 2786              		.cfi_restore_state
1021:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                  FS_DEV_SD_CMD_WRITE_BLOCK,
 2787              		.loc 1 1021 9 is_stmt 1 view .LVU866
1021:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                  FS_DEV_SD_CMD_WRITE_BLOCK,
 2788              		.loc 1 1021 14 is_stmt 0 view .LVU867
 2789 0052 4FF40073 		mov	r3, #512
 2790 0056 0093     		str	r3, [sp]
ARM GAS  /tmp/ccOtrZZk.s 			page 107


 2791 0058 4346     		mov	r3, r8
 2792 005a 2246     		mov	r2, r4
 2793 005c 1821     		movs	r1, #24
 2794 005e 3046     		mov	r0, r6
 2795 0060 FFF7FEFF 		bl	FSDev_SD_SPI_WrData
 2796              	.LVL307:
1021:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                  FS_DEV_SD_CMD_WRITE_BLOCK,
 2797              		.loc 1 1021 14 view .LVU868
 2798 0064 E8E7     		b	.L176
 2799              	.L177:
1038:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 2800              		.loc 1 1038 54 is_stmt 1 view .LVU869
1043:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****    *p_err = FS_ERR_NONE;
 2801              		.loc 1 1043 5 view .LVU870
1043:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****    *p_err = FS_ERR_NONE;
 2802              		.loc 1 1043 25 is_stmt 0 view .LVU871
 2803 0066 044B     		ldr	r3, .L180
 2804 0068 DB68     		ldr	r3, [r3, #12]
1043:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****    *p_err = FS_ERR_NONE;
 2805              		.loc 1 1043 5 view .LVU872
 2806 006a 3846     		mov	r0, r7
 2807              	.LVL308:
1043:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****    *p_err = FS_ERR_NONE;
 2808              		.loc 1 1043 5 view .LVU873
 2809 006c 9847     		blx	r3
 2810              	.LVL309:
1044:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** }
 2811              		.loc 1 1044 4 is_stmt 1 view .LVU874
1044:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** }
 2812              		.loc 1 1044 11 is_stmt 0 view .LVU875
 2813 006e 0023     		movs	r3, #0
 2814 0070 089A     		ldr	r2, [sp, #32]
 2815 0072 1380     		strh	r3, [r2]	@ movhi
 2816 0074 EAE7     		b	.L173
 2817              	.L181:
 2818 0076 00BF     		.align	2
 2819              	.L180:
 2820 0078 00000000 		.word	FSDev_SD_SPI_BSP_SPI
 2821              		.cfi_endproc
 2822              	.LFE8:
 2824              		.section	.text.FSDev_SD_SPI_RdDataMulti,"ax",%progbits
 2825              		.align	1
 2826              		.syntax unified
 2827              		.thumb
 2828              		.thumb_func
 2829              		.fpu fpv4-sp-d16
 2831              	FSDev_SD_SPI_RdDataMulti:
 2832              	.LVL310:
 2833              	.LFB18:
2018:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     CPU_INT08U  crc_buf[2];
 2834              		.loc 1 2018 1 is_stmt 1 view -0
 2835              		.cfi_startproc
 2836              		@ args = 8, pretend = 0, frame = 8
 2837              		@ frame_needed = 0, uses_anonymous_args = 0
2018:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     CPU_INT08U  crc_buf[2];
 2838              		.loc 1 2018 1 is_stmt 0 view .LVU877
 2839 0000 2DE9F043 		push	{r4, r5, r6, r7, r8, r9, lr}
ARM GAS  /tmp/ccOtrZZk.s 			page 108


 2840              	.LCFI46:
 2841              		.cfi_def_cfa_offset 28
 2842              		.cfi_offset 4, -28
 2843              		.cfi_offset 5, -24
 2844              		.cfi_offset 6, -20
 2845              		.cfi_offset 7, -16
 2846              		.cfi_offset 8, -12
 2847              		.cfi_offset 9, -8
 2848              		.cfi_offset 14, -4
 2849 0004 83B0     		sub	sp, sp, #12
 2850              	.LCFI47:
 2851              		.cfi_def_cfa_offset 40
 2852 0006 0446     		mov	r4, r0
 2853 0008 0F46     		mov	r7, r1
 2854 000a 9146     		mov	r9, r2
 2855 000c 1D46     		mov	r5, r3
 2856 000e DDF82880 		ldr	r8, [sp, #40]
 2857 0012 0B9E     		ldr	r6, [sp, #44]
2019:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** #if (FS_DEV_SD_SPI_CFG_CRC_EN == DEF_ENABLED)
 2858              		.loc 1 2019 5 is_stmt 1 view .LVU878
2024:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     CPU_INT08U  token;
 2859              		.loc 1 2024 5 view .LVU879
2025:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 2860              		.loc 1 2025 5 view .LVU880
2028:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 2861              		.loc 1 2028 5 view .LVU881
 2862 0014 254B     		ldr	r3, .L191
 2863              	.LVL311:
2028:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 2864              		.loc 1 2028 5 is_stmt 0 view .LVU882
 2865 0016 9B69     		ldr	r3, [r3, #24]
 2866 0018 8088     		ldrh	r0, [r0, #4]
 2867              	.LVL312:
2028:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 2868              		.loc 1 2028 5 view .LVU883
 2869 001a 9847     		blx	r3
 2870              	.LVL313:
2028:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 2871              		.loc 1 2028 5 is_stmt 1 view .LVU884
 2872 001c 0121     		movs	r1, #1
 2873 001e A088     		ldrh	r0, [r4, #4]
 2874 0020 FFF7FEFF 		bl	FSDev_SD_SPI_WaitClks
 2875              	.LVL314:
2028:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 2876              		.loc 1 2028 48 view .LVU885
2030:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                cmd,
 2877              		.loc 1 2030 5 view .LVU886
2030:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                cmd,
 2878              		.loc 1 2030 15 is_stmt 0 view .LVU887
 2879 0024 4A46     		mov	r2, r9
 2880 0026 3946     		mov	r1, r7
 2881 0028 2046     		mov	r0, r4
 2882 002a FFF7FEFF 		bl	FSDev_SD_SPI_Cmd
 2883              	.LVL315:
2034:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FS_DEV_SD_SPI_EXIT(p_sd_spi_data->UnitNbr);             /* 'Exit' SPI access.              
 2884              		.loc 1 2034 5 is_stmt 1 view .LVU888
2034:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FS_DEV_SD_SPI_EXIT(p_sd_spi_data->UnitNbr);             /* 'Exit' SPI access.              
ARM GAS  /tmp/ccOtrZZk.s 			page 109


 2885              		.loc 1 2034 8 is_stmt 0 view .LVU889
 2886 002e 8146     		mov	r9, r0
 2887              	.LVL316:
2034:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FS_DEV_SD_SPI_EXIT(p_sd_spi_data->UnitNbr);             /* 'Exit' SPI access.              
 2888              		.loc 1 2034 8 view .LVU890
 2889 0030 90B9     		cbnz	r0, .L188
 2890              	.LVL317:
 2891              	.L183:
2040:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                                 /* Wait for start token of data blo
 2892              		.loc 1 2040 11 is_stmt 1 view .LVU891
 2893 0032 2EB3     		cbz	r6, .L189
2042:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 2894              		.loc 1 2042 9 view .LVU892
2042:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 2895              		.loc 1 2042 17 is_stmt 0 view .LVU893
 2896 0034 A088     		ldrh	r0, [r4, #4]
 2897 0036 FFF7FEFF 		bl	FSDev_SD_SPI_WaitForStart
 2898              	.LVL318:
2044:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****             FS_DEV_SD_SPI_EXIT(p_sd_spi_data->UnitNbr);         /* 'Exit' SPI access.              
 2899              		.loc 1 2044 9 is_stmt 1 view .LVU894
2044:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****             FS_DEV_SD_SPI_EXIT(p_sd_spi_data->UnitNbr);         /* 'Exit' SPI access.              
 2900              		.loc 1 2044 12 is_stmt 0 view .LVU895
 2901 003a FE28     		cmp	r0, #254
 2902 003c 17D1     		bne	.L190
2050:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                 p_dest,
 2903              		.loc 1 2050 9 is_stmt 1 view .LVU896
2050:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                 p_dest,
 2904              		.loc 1 2050 29 is_stmt 0 view .LVU897
 2905 003e 1B4B     		ldr	r3, .L191
 2906 0040 1F69     		ldr	r7, [r3, #16]
2050:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                 p_dest,
 2907              		.loc 1 2050 9 view .LVU898
 2908 0042 4246     		mov	r2, r8
 2909 0044 2946     		mov	r1, r5
 2910 0046 A088     		ldrh	r0, [r4, #4]
 2911              	.LVL319:
2050:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                 p_dest,
 2912              		.loc 1 2050 9 view .LVU899
 2913 0048 B847     		blx	r7
 2914              	.LVL320:
2054:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                 &crc_buf[0],
 2915              		.loc 1 2054 9 is_stmt 1 view .LVU900
 2916 004a 0222     		movs	r2, #2
 2917 004c 01A9     		add	r1, sp, #4
 2918 004e A088     		ldrh	r0, [r4, #4]
 2919 0050 B847     		blx	r7
 2920              	.LVL321:
2069:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         cnt--;
 2921              		.loc 1 2069 9 view .LVU901
2069:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         cnt--;
 2922              		.loc 1 2069 16 is_stmt 0 view .LVU902
 2923 0052 4544     		add	r5, r5, r8
 2924              	.LVL322:
2070:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     }
 2925              		.loc 1 2070 9 is_stmt 1 view .LVU903
2070:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     }
 2926              		.loc 1 2070 12 is_stmt 0 view .LVU904
ARM GAS  /tmp/ccOtrZZk.s 			page 110


 2927 0054 013E     		subs	r6, r6, #1
 2928              	.LVL323:
2070:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     }
 2929              		.loc 1 2070 12 view .LVU905
 2930 0056 ECE7     		b	.L183
 2931              	.LVL324:
 2932              	.L188:
2035:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FS_TRACE_DBG(("FSDev_SD_SPI_RdDataMulti(): Failed to rd card: cmd err: %02X.\r\n", resp_r1)
 2933              		.loc 1 2035 9 is_stmt 1 view .LVU906
 2934 0058 0121     		movs	r1, #1
 2935 005a A088     		ldrh	r0, [r4, #4]
 2936              	.LVL325:
2035:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FS_TRACE_DBG(("FSDev_SD_SPI_RdDataMulti(): Failed to rd card: cmd err: %02X.\r\n", resp_r1)
 2937              		.loc 1 2035 9 is_stmt 0 view .LVU907
 2938 005c FFF7FEFF 		bl	FSDev_SD_SPI_WaitClks
 2939              	.LVL326:
2035:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FS_TRACE_DBG(("FSDev_SD_SPI_RdDataMulti(): Failed to rd card: cmd err: %02X.\r\n", resp_r1)
 2940              		.loc 1 2035 9 is_stmt 1 view .LVU908
 2941 0060 124B     		ldr	r3, .L191
 2942 0062 DB69     		ldr	r3, [r3, #28]
 2943 0064 A088     		ldrh	r0, [r4, #4]
 2944 0066 9847     		blx	r3
 2945              	.LVL327:
2035:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FS_TRACE_DBG(("FSDev_SD_SPI_RdDataMulti(): Failed to rd card: cmd err: %02X.\r\n", resp_r1)
 2946              		.loc 1 2035 51 view .LVU909
2036:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         return (DEF_FAIL);
 2947              		.loc 1 2036 101 view .LVU910
2037:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     }
 2948              		.loc 1 2037 9 view .LVU911
2037:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     }
 2949              		.loc 1 2037 16 is_stmt 0 view .LVU912
 2950 0068 4FF00009 		mov	r9, #0
 2951 006c 1AE0     		b	.L184
 2952              	.LVL328:
 2953              	.L190:
2045:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****             FS_TRACE_DBG(("FSDev_SD_SPI_RdDataMulti(): Failed to rd card: start token not received.
 2954              		.loc 1 2045 13 is_stmt 1 view .LVU913
 2955 006e 0121     		movs	r1, #1
 2956 0070 A088     		ldrh	r0, [r4, #4]
 2957              	.LVL329:
2045:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****             FS_TRACE_DBG(("FSDev_SD_SPI_RdDataMulti(): Failed to rd card: start token not received.
 2958              		.loc 1 2045 13 is_stmt 0 view .LVU914
 2959 0072 FFF7FEFF 		bl	FSDev_SD_SPI_WaitClks
 2960              	.LVL330:
2045:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****             FS_TRACE_DBG(("FSDev_SD_SPI_RdDataMulti(): Failed to rd card: start token not received.
 2961              		.loc 1 2045 13 is_stmt 1 view .LVU915
 2962 0076 0D4B     		ldr	r3, .L191
 2963 0078 DB69     		ldr	r3, [r3, #28]
 2964 007a A088     		ldrh	r0, [r4, #4]
 2965 007c 9847     		blx	r3
 2966              	.LVL331:
2045:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****             FS_TRACE_DBG(("FSDev_SD_SPI_RdDataMulti(): Failed to rd card: start token not received.
 2967              		.loc 1 2045 55 view .LVU916
2046:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****             return (DEF_FAIL);
 2968              		.loc 1 2046 107 view .LVU917
2047:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         }
 2969              		.loc 1 2047 13 view .LVU918
ARM GAS  /tmp/ccOtrZZk.s 			page 111


2047:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         }
 2970              		.loc 1 2047 20 is_stmt 0 view .LVU919
 2971 007e 11E0     		b	.L184
 2972              	.L189:
2073:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                            FS_DEV_SD_CMD_STOP_TRANSMISSION,
 2973              		.loc 1 2073 5 is_stmt 1 view .LVU920
2073:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                            FS_DEV_SD_CMD_STOP_TRANSMISSION,
 2974              		.loc 1 2073 11 is_stmt 0 view .LVU921
 2975 0080 0022     		movs	r2, #0
 2976 0082 0C21     		movs	r1, #12
 2977 0084 2046     		mov	r0, r4
 2978 0086 FFF7FEFF 		bl	FSDev_SD_SPI_Cmd
 2979              	.LVL332:
2077:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     FS_DEV_SD_SPI_EXIT(p_sd_spi_data->UnitNbr);                 /* 'Exit' SPI access.              
 2980              		.loc 1 2077 5 is_stmt 1 view .LVU922
2077:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     FS_DEV_SD_SPI_EXIT(p_sd_spi_data->UnitNbr);                 /* 'Exit' SPI access.              
 2981              		.loc 1 2077 11 is_stmt 0 view .LVU923
 2982 008a A088     		ldrh	r0, [r4, #4]
 2983 008c FFF7FEFF 		bl	FSDev_SD_SPI_WaitWhileBusy
 2984              	.LVL333:
2078:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     return (DEF_OK);
 2985              		.loc 1 2078 5 is_stmt 1 view .LVU924
 2986 0090 0121     		movs	r1, #1
 2987 0092 A088     		ldrh	r0, [r4, #4]
 2988 0094 FFF7FEFF 		bl	FSDev_SD_SPI_WaitClks
 2989              	.LVL334:
2078:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     return (DEF_OK);
 2990              		.loc 1 2078 5 view .LVU925
 2991 0098 044B     		ldr	r3, .L191
 2992 009a DB69     		ldr	r3, [r3, #28]
 2993 009c A088     		ldrh	r0, [r4, #4]
 2994 009e 9847     		blx	r3
 2995              	.LVL335:
2078:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     return (DEF_OK);
 2996              		.loc 1 2078 47 view .LVU926
2079:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** }
 2997              		.loc 1 2079 5 view .LVU927
2079:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** }
 2998              		.loc 1 2079 12 is_stmt 0 view .LVU928
 2999 00a0 4FF00109 		mov	r9, #1
 3000              	.LVL336:
 3001              	.L184:
2080:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 3002              		.loc 1 2080 1 view .LVU929
 3003 00a4 4846     		mov	r0, r9
 3004 00a6 03B0     		add	sp, sp, #12
 3005              	.LCFI48:
 3006              		.cfi_def_cfa_offset 28
 3007              		@ sp needed
 3008 00a8 BDE8F083 		pop	{r4, r5, r6, r7, r8, r9, pc}
 3009              	.LVL337:
 3010              	.L192:
2080:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 3011              		.loc 1 2080 1 view .LVU930
 3012              		.align	2
 3013              	.L191:
 3014 00ac 00000000 		.word	FSDev_SD_SPI_BSP_SPI
ARM GAS  /tmp/ccOtrZZk.s 			page 112


 3015              		.cfi_endproc
 3016              	.LFE18:
 3018              		.section	.text.FSDev_SD_SPI_Rd,"ax",%progbits
 3019              		.align	1
 3020              		.syntax unified
 3021              		.thumb
 3022              		.thumb_func
 3023              		.fpu fpv4-sp-d16
 3025              	FSDev_SD_SPI_Rd:
 3026              	.LVL338:
 3027              	.LFB7:
 891:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     CPU_BOOLEAN          ok;
 3028              		.loc 1 891 1 is_stmt 1 view -0
 3029              		.cfi_startproc
 3030              		@ args = 4, pretend = 0, frame = 0
 3031              		@ frame_needed = 0, uses_anonymous_args = 0
 891:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     CPU_BOOLEAN          ok;
 3032              		.loc 1 891 1 is_stmt 0 view .LVU932
 3033 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 3034              	.LCFI49:
 3035              		.cfi_def_cfa_offset 24
 3036              		.cfi_offset 4, -24
 3037              		.cfi_offset 5, -20
 3038              		.cfi_offset 6, -16
 3039              		.cfi_offset 7, -12
 3040              		.cfi_offset 8, -8
 3041              		.cfi_offset 14, -4
 3042 0004 82B0     		sub	sp, sp, #8
 3043              	.LCFI50:
 3044              		.cfi_def_cfa_offset 32
 3045 0006 8846     		mov	r8, r1
 3046 0008 1446     		mov	r4, r2
 3047 000a 1D46     		mov	r5, r3
 892:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     CPU_INT32U           start_addr;
 3048              		.loc 1 892 5 is_stmt 1 view .LVU933
 893:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     CPU_INT08U          *p_dest_08;
 3049              		.loc 1 893 5 view .LVU934
 894:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     FS_DEV_SD_INFO      *p_sd_info;
 3050              		.loc 1 894 5 view .LVU935
 895:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     FS_DEV_SD_SPI_DATA  *p_sd_spi_data;
 3051              		.loc 1 895 5 view .LVU936
 896:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     FS_QTY               unit_nbr;
 3052              		.loc 1 896 5 view .LVU937
 897:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 3053              		.loc 1 897 5 view .LVU938
 901:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     p_dest_08     = (CPU_INT08U         *)p_dest;
 3054              		.loc 1 901 5 view .LVU939
 901:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     p_dest_08     = (CPU_INT08U         *)p_dest;
 3055              		.loc 1 901 19 is_stmt 0 view .LVU940
 3056 000c 078C     		ldrh	r7, [r0, #32]
 3057              	.LVL339:
 902:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     p_sd_spi_data = (FS_DEV_SD_SPI_DATA *)p_dev->DataPtr;
 3058              		.loc 1 902 5 is_stmt 1 view .LVU941
 903:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     p_sd_info     = &p_sd_spi_data->Info;
 3059              		.loc 1 903 5 view .LVU942
 903:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     p_sd_info     = &p_sd_spi_data->Info;
 3060              		.loc 1 903 19 is_stmt 0 view .LVU943
ARM GAS  /tmp/ccOtrZZk.s 			page 113


 3061 000e 466B     		ldr	r6, [r0, #52]
 3062              	.LVL340:
 904:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                                 /* See Note #2.                    
 3063              		.loc 1 904 5 is_stmt 1 view .LVU944
 906:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 3064              		.loc 1 906 5 view .LVU945
 906:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 3065              		.loc 1 906 31 is_stmt 0 view .LVU946
 3066 0010 737E     		ldrb	r3, [r6, #25]	@ zero_extendqisi2
 3067              	.LVL341:
 906:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 3068              		.loc 1 906 66 view .LVU947
 3069 0012 012B     		cmp	r3, #1
 3070 0014 00D0     		beq	.L194
 906:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 3071              		.loc 1 906 66 discriminator 1 view .LVU948
 3072 0016 5402     		lsls	r4, r2, #9
 3073              	.L194:
 3074              	.LVL342:
 908:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 3075              		.loc 1 908 5 is_stmt 1 discriminator 4 view .LVU949
 908:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 3076              		.loc 1 908 25 is_stmt 0 discriminator 4 view .LVU950
 3077 0018 174B     		ldr	r3, .L200
 3078 001a 9B68     		ldr	r3, [r3, #8]
 908:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 3079              		.loc 1 908 5 discriminator 4 view .LVU951
 3080 001c 3846     		mov	r0, r7
 3081              	.LVL343:
 908:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 3082              		.loc 1 908 5 discriminator 4 view .LVU952
 3083 001e 9847     		blx	r3
 3084              	.LVL344:
 911:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         ok = FSDev_SD_SPI_RdDataMulti(p_sd_spi_data,            /* Rd data.                        
 3085              		.loc 1 911 5 is_stmt 1 discriminator 4 view .LVU953
 911:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         ok = FSDev_SD_SPI_RdDataMulti(p_sd_spi_data,            /* Rd data.                        
 3086              		.loc 1 911 8 is_stmt 0 discriminator 4 view .LVU954
 3087 0020 012D     		cmp	r5, #1
 3088 0022 16D9     		bls	.L195
 912:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                       FS_DEV_SD_CMD_READ_MULTIPLE_BLOCK,
 3089              		.loc 1 912 9 is_stmt 1 view .LVU955
 912:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                       FS_DEV_SD_CMD_READ_MULTIPLE_BLOCK,
 3090              		.loc 1 912 14 is_stmt 0 view .LVU956
 3091 0024 0195     		str	r5, [sp, #4]
 3092 0026 4FF40073 		mov	r3, #512
 3093 002a 0093     		str	r3, [sp]
 3094 002c 4346     		mov	r3, r8
 3095 002e 2246     		mov	r2, r4
 3096 0030 1221     		movs	r1, #18
 3097 0032 3046     		mov	r0, r6
 3098 0034 FFF7FEFF 		bl	FSDev_SD_SPI_RdDataMulti
 3099              	.LVL345:
 3100              	.L196:
 931:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FSDev_SD_SPI_BSP_SPI.Unlock(unit_nbr);
 3101              		.loc 1 931 5 is_stmt 1 view .LVU957
 931:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FSDev_SD_SPI_BSP_SPI.Unlock(unit_nbr);
 3102              		.loc 1 931 8 is_stmt 0 view .LVU958
ARM GAS  /tmp/ccOtrZZk.s 			page 114


 3103 0038 0128     		cmp	r0, #1
 3104 003a 14D0     		beq	.L197
 932:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FS_DEV_SD_SPI_ERR_RD_CTR_INC(p_sd_spi_data);
 3105              		.loc 1 932 9 is_stmt 1 view .LVU959
 932:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FS_DEV_SD_SPI_ERR_RD_CTR_INC(p_sd_spi_data);
 3106              		.loc 1 932 29 is_stmt 0 view .LVU960
 3107 003c 0E4B     		ldr	r3, .L200
 3108 003e DB68     		ldr	r3, [r3, #12]
 932:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FS_DEV_SD_SPI_ERR_RD_CTR_INC(p_sd_spi_data);
 3109              		.loc 1 932 9 view .LVU961
 3110 0040 3846     		mov	r0, r7
 3111              	.LVL346:
 932:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FS_DEV_SD_SPI_ERR_RD_CTR_INC(p_sd_spi_data);
 3112              		.loc 1 932 9 view .LVU962
 3113 0042 9847     		blx	r3
 3114              	.LVL347:
 933:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FS_TRACE_DBG(("FSDev_SD_SPI_Rd(): Failed to read card.\r\n"));
 3115              		.loc 1 933 52 is_stmt 1 view .LVU963
 934:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****        *p_err = FS_ERR_DEV_IO;
 3116              		.loc 1 934 70 view .LVU964
 935:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         return;
 3117              		.loc 1 935 8 view .LVU965
 935:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         return;
 3118              		.loc 1 935 15 is_stmt 0 view .LVU966
 3119 0044 40F24313 		movw	r3, #323
 3120 0048 089A     		ldr	r2, [sp, #32]
 3121 004a 1380     		strh	r3, [r2]	@ movhi
 936:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     }
 3122              		.loc 1 936 9 is_stmt 1 view .LVU967
 3123              	.L193:
 946:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 3124              		.loc 1 946 1 is_stmt 0 view .LVU968
 3125 004c 02B0     		add	sp, sp, #8
 3126              	.LCFI51:
 3127              		.cfi_remember_state
 3128              		.cfi_def_cfa_offset 24
 3129              		@ sp needed
 3130 004e BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 3131              	.LVL348:
 3132              	.L195:
 3133              	.LCFI52:
 3134              		.cfi_restore_state
 922:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                  FS_DEV_SD_CMD_READ_SINGLE_BLOCK,
 3135              		.loc 1 922 9 is_stmt 1 view .LVU969
 922:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                  FS_DEV_SD_CMD_READ_SINGLE_BLOCK,
 3136              		.loc 1 922 14 is_stmt 0 view .LVU970
 3137 0052 4FF40073 		mov	r3, #512
 3138 0056 0093     		str	r3, [sp]
 3139 0058 4346     		mov	r3, r8
 3140 005a 2246     		mov	r2, r4
 3141 005c 1121     		movs	r1, #17
 3142 005e 3046     		mov	r0, r6
 3143 0060 FFF7FEFF 		bl	FSDev_SD_SPI_RdData
 3144              	.LVL349:
 922:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                  FS_DEV_SD_CMD_READ_SINGLE_BLOCK,
 3145              		.loc 1 922 14 view .LVU971
 3146 0064 E8E7     		b	.L196
ARM GAS  /tmp/ccOtrZZk.s 			page 115


 3147              	.L197:
 939:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 3148              		.loc 1 939 54 is_stmt 1 view .LVU972
 944:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****    *p_err = FS_ERR_NONE;
 3149              		.loc 1 944 5 view .LVU973
 944:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****    *p_err = FS_ERR_NONE;
 3150              		.loc 1 944 25 is_stmt 0 view .LVU974
 3151 0066 044B     		ldr	r3, .L200
 3152 0068 DB68     		ldr	r3, [r3, #12]
 944:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****    *p_err = FS_ERR_NONE;
 3153              		.loc 1 944 5 view .LVU975
 3154 006a 3846     		mov	r0, r7
 3155              	.LVL350:
 944:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****    *p_err = FS_ERR_NONE;
 3156              		.loc 1 944 5 view .LVU976
 3157 006c 9847     		blx	r3
 3158              	.LVL351:
 945:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** }
 3159              		.loc 1 945 4 is_stmt 1 view .LVU977
 945:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** }
 3160              		.loc 1 945 11 is_stmt 0 view .LVU978
 3161 006e 0023     		movs	r3, #0
 3162 0070 089A     		ldr	r2, [sp, #32]
 3163 0072 1380     		strh	r3, [r2]	@ movhi
 3164 0074 EAE7     		b	.L193
 3165              	.L201:
 3166 0076 00BF     		.align	2
 3167              	.L200:
 3168 0078 00000000 		.word	FSDev_SD_SPI_BSP_SPI
 3169              		.cfi_endproc
 3170              	.LFE7:
 3172              		.section	.text.FSDev_SD_SPI_DataFree,"ax",%progbits
 3173              		.align	1
 3174              		.syntax unified
 3175              		.thumb
 3176              		.thumb_func
 3177              		.fpu fpv4-sp-d16
 3179              	FSDev_SD_SPI_DataFree:
 3180              	.LVL352:
 3181              	.LFB27:
2504:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
2505:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
2506:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** /*
2507:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** ***************************************************************************************************
2508:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                                      FSDev_SD_SPI_DataFree()
2509:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
2510:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** * Description : Free a SD SPI data object.
2511:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
2512:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** * Argument(s) : p_sd_spi_data   Pointer to a SD SPI data object.
2513:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *               -------------   Argument validated by caller.
2514:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
2515:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** * Return(s)   : none.
2516:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
2517:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** * Note(s)     : none.
2518:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** ***************************************************************************************************
2519:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** */
2520:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
ARM GAS  /tmp/ccOtrZZk.s 			page 116


2521:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** static  void  FSDev_SD_SPI_DataFree (FS_DEV_SD_SPI_DATA  *p_sd_spi_data)
2522:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** {
 3182              		.loc 1 2522 1 is_stmt 1 view -0
 3183              		.cfi_startproc
 3184              		@ args = 0, pretend = 0, frame = 0
 3185              		@ frame_needed = 0, uses_anonymous_args = 0
 3186              		.loc 1 2522 1 is_stmt 0 view .LVU980
 3187 0000 10B5     		push	{r4, lr}
 3188              	.LCFI53:
 3189              		.cfi_def_cfa_offset 8
 3190              		.cfi_offset 4, -8
 3191              		.cfi_offset 14, -4
 3192 0002 0446     		mov	r4, r0
2523:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     CPU_SR_ALLOC();
 3193              		.loc 1 2523 5 is_stmt 1 view .LVU981
 3194              	.LVL353:
2524:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
2525:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
2526:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     CPU_CRITICAL_ENTER();
 3195              		.loc 1 2526 5 view .LVU982
 3196              		.loc 1 2526 5 view .LVU983
 3197              		.loc 1 2526 5 view .LVU984
 3198 0004 4020     		movs	r0, #64
 3199              	.LVL354:
 3200              		.loc 1 2526 5 is_stmt 0 view .LVU985
 3201 0006 FFF7FEFF 		bl	CPU_SR_Save
 3202              	.LVL355:
 3203              		.loc 1 2526 5 is_stmt 1 view .LVU986
 3204              		.loc 1 2526 5 view .LVU987
2527:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     p_sd_spi_data->NextPtr   = FSDev_SD_SPI_ListFreePtr;        /* Add to free pool.               
 3205              		.loc 1 2527 5 view .LVU988
 3206              		.loc 1 2527 30 is_stmt 0 view .LVU989
 3207 000a 034B     		ldr	r3, .L204
 3208 000c 1A68     		ldr	r2, [r3]
 3209 000e 2263     		str	r2, [r4, #48]
2528:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     FSDev_SD_SPI_ListFreePtr = p_sd_spi_data;
 3210              		.loc 1 2528 5 is_stmt 1 view .LVU990
 3211              		.loc 1 2528 30 is_stmt 0 view .LVU991
 3212 0010 1C60     		str	r4, [r3]
2529:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     CPU_CRITICAL_EXIT();
 3213              		.loc 1 2529 5 is_stmt 1 view .LVU992
 3214              		.loc 1 2529 5 view .LVU993
 3215              		.loc 1 2529 5 view .LVU994
 3216 0012 FFF7FEFF 		bl	CPU_SR_Restore
 3217              	.LVL356:
 3218              		.loc 1 2529 5 view .LVU995
 3219              		.loc 1 2529 5 view .LVU996
2530:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** }
 3220              		.loc 1 2530 1 is_stmt 0 view .LVU997
 3221 0016 10BD     		pop	{r4, pc}
 3222              	.LVL357:
 3223              	.L205:
 3224              		.loc 1 2530 1 view .LVU998
 3225              		.align	2
 3226              	.L204:
 3227 0018 00000000 		.word	.LANCHOR1
 3228              		.cfi_endproc
ARM GAS  /tmp/ccOtrZZk.s 			page 117


 3229              	.LFE27:
 3231              		.section	.text.FSDev_SD_SPI_Close,"ax",%progbits
 3232              		.align	1
 3233              		.syntax unified
 3234              		.thumb
 3235              		.thumb_func
 3236              		.fpu fpv4-sp-d16
 3238              	FSDev_SD_SPI_Close:
 3239              	.LVL358:
 3240              	.LFB6:
 839:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     FS_DEV_SD_SPI_DATA  *p_sd_spi_data;
 3241              		.loc 1 839 1 is_stmt 1 view -0
 3242              		.cfi_startproc
 3243              		@ args = 0, pretend = 0, frame = 0
 3244              		@ frame_needed = 0, uses_anonymous_args = 0
 839:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     FS_DEV_SD_SPI_DATA  *p_sd_spi_data;
 3245              		.loc 1 839 1 is_stmt 0 view .LVU1000
 3246 0000 10B5     		push	{r4, lr}
 3247              	.LCFI54:
 3248              		.cfi_def_cfa_offset 8
 3249              		.cfi_offset 4, -8
 3250              		.cfi_offset 14, -4
 840:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 3251              		.loc 1 840 5 is_stmt 1 view .LVU1001
 843:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     if (p_sd_spi_data->Init == DEF_YES) {
 3252              		.loc 1 843 5 view .LVU1002
 843:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     if (p_sd_spi_data->Init == DEF_YES) {
 3253              		.loc 1 843 19 is_stmt 0 view .LVU1003
 3254 0002 446B     		ldr	r4, [r0, #52]
 3255              	.LVL359:
 844:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FSDev_SD_SPI_BSP_SPI.Close(p_sd_spi_data->UnitNbr);
 3256              		.loc 1 844 5 is_stmt 1 view .LVU1004
 844:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FSDev_SD_SPI_BSP_SPI.Close(p_sd_spi_data->UnitNbr);
 3257              		.loc 1 844 22 is_stmt 0 view .LVU1005
 3258 0004 A379     		ldrb	r3, [r4, #6]	@ zero_extendqisi2
 844:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FSDev_SD_SPI_BSP_SPI.Close(p_sd_spi_data->UnitNbr);
 3259              		.loc 1 844 8 view .LVU1006
 3260 0006 012B     		cmp	r3, #1
 3261 0008 03D0     		beq	.L209
 3262              	.LVL360:
 3263              	.L207:
 847:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** }
 3264              		.loc 1 847 5 is_stmt 1 view .LVU1007
 3265 000a 2046     		mov	r0, r4
 3266 000c FFF7FEFF 		bl	FSDev_SD_SPI_DataFree
 3267              	.LVL361:
 848:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 3268              		.loc 1 848 1 is_stmt 0 view .LVU1008
 3269 0010 10BD     		pop	{r4, pc}
 3270              	.LVL362:
 3271              	.L209:
 845:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     }
 3272              		.loc 1 845 9 is_stmt 1 view .LVU1009
 845:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     }
 3273              		.loc 1 845 29 is_stmt 0 view .LVU1010
 3274 0012 024B     		ldr	r3, .L210
 3275 0014 5B68     		ldr	r3, [r3, #4]
ARM GAS  /tmp/ccOtrZZk.s 			page 118


 845:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     }
 3276              		.loc 1 845 9 view .LVU1011
 3277 0016 A088     		ldrh	r0, [r4, #4]
 3278              	.LVL363:
 845:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     }
 3279              		.loc 1 845 9 view .LVU1012
 3280 0018 9847     		blx	r3
 3281              	.LVL364:
 3282 001a F6E7     		b	.L207
 3283              	.L211:
 3284              		.align	2
 3285              	.L210:
 3286 001c 00000000 		.word	FSDev_SD_SPI_BSP_SPI
 3287              		.cfi_endproc
 3288              	.LFE6:
 3290              		.section	.text.FSDev_SD_SPI_DataGet,"ax",%progbits
 3291              		.align	1
 3292              		.syntax unified
 3293              		.thumb
 3294              		.thumb_func
 3295              		.fpu fpv4-sp-d16
 3297              	FSDev_SD_SPI_DataGet:
 3298              	.LFB28:
2531:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
2532:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
2533:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** /*
2534:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** ***************************************************************************************************
2535:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *                                       FSDev_SD_SPI_DataGet()
2536:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
2537:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** * Description : Allocate & initialize a SD SPI data object.
2538:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
2539:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** * Argument(s) : none.
2540:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
2541:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** * Return(s)   : Pointer to a SD SPI data object, if NO errors.
2542:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *               Pointer to NULL,                 otherwise.
2543:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** *
2544:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** * Note(s)     : none.
2545:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** ***************************************************************************************************
2546:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** */
2547:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
2548:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** static  FS_DEV_SD_SPI_DATA  *FSDev_SD_SPI_DataGet (void)
2549:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** {
 3299              		.loc 1 2549 1 is_stmt 1 view -0
 3300              		.cfi_startproc
 3301              		@ args = 0, pretend = 0, frame = 8
 3302              		@ frame_needed = 0, uses_anonymous_args = 0
 3303 0000 30B5     		push	{r4, r5, lr}
 3304              	.LCFI55:
 3305              		.cfi_def_cfa_offset 12
 3306              		.cfi_offset 4, -12
 3307              		.cfi_offset 5, -8
 3308              		.cfi_offset 14, -4
 3309 0002 83B0     		sub	sp, sp, #12
 3310              	.LCFI56:
 3311              		.cfi_def_cfa_offset 24
2550:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     LIB_ERR              alloc_err;
 3312              		.loc 1 2550 5 view .LVU1014
ARM GAS  /tmp/ccOtrZZk.s 			page 119


2551:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     CPU_SIZE_T           octets_reqd;
 3313              		.loc 1 2551 5 view .LVU1015
2552:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     FS_DEV_SD_SPI_DATA  *p_sd_spi_data;
 3314              		.loc 1 2552 5 view .LVU1016
2553:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     CPU_SR_ALLOC();
 3315              		.loc 1 2553 5 view .LVU1017
 3316              	.LVL365:
2554:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
2555:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
2556:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                                 /* --------------------- ALLOC DATA
2557:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     CPU_CRITICAL_ENTER();
 3317              		.loc 1 2557 5 view .LVU1018
 3318              		.loc 1 2557 5 view .LVU1019
 3319              		.loc 1 2557 5 view .LVU1020
 3320 0004 4020     		movs	r0, #64
 3321 0006 FFF7FEFF 		bl	CPU_SR_Save
 3322              	.LVL366:
 3323 000a 0546     		mov	r5, r0
 3324              	.LVL367:
 3325              		.loc 1 2557 5 view .LVU1021
 3326              		.loc 1 2557 5 view .LVU1022
2558:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     if (FSDev_SD_SPI_ListFreePtr == (FS_DEV_SD_SPI_DATA *)0) {
 3327              		.loc 1 2558 5 view .LVU1023
 3328              		.loc 1 2558 34 is_stmt 0 view .LVU1024
 3329 000c 124B     		ldr	r3, .L220
 3330 000e 1C68     		ldr	r4, [r3]
 3331              		.loc 1 2558 8 view .LVU1025
 3332 0010 7CB1     		cbz	r4, .L218
2559:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         p_sd_spi_data = (FS_DEV_SD_SPI_DATA *)Mem_HeapAlloc( sizeof(FS_DEV_SD_SPI_DATA),
2560:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                              sizeof(CPU_DATA),
2561:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                             &octets_reqd,
2562:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                             &alloc_err);
2563:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         if (p_sd_spi_data == (FS_DEV_SD_SPI_DATA *)0) {
2564:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****             CPU_CRITICAL_EXIT();
2565:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****             FS_TRACE_DBG(("FSDev_SD_SPI_DataGet(): Could not alloc mem for SD SPI data: %d octets r
2566:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****             return ((FS_DEV_SD_SPI_DATA *)0);
2567:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         }
2568:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         (void)alloc_err;
2569:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
2570:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FSDev_SD_SPI_UnitCtr++;
2571:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
2572:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
2573:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     } else {
2574:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         p_sd_spi_data            = FSDev_SD_SPI_ListFreePtr;
 3333              		.loc 1 2574 9 is_stmt 1 view .LVU1026
 3334              	.LVL368:
2575:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         FSDev_SD_SPI_ListFreePtr = FSDev_SD_SPI_ListFreePtr->NextPtr;
 3335              		.loc 1 2575 9 view .LVU1027
 3336              		.loc 1 2575 60 is_stmt 0 view .LVU1028
 3337 0012 226B     		ldr	r2, [r4, #48]
 3338              		.loc 1 2575 34 view .LVU1029
 3339 0014 104B     		ldr	r3, .L220
 3340 0016 1A60     		str	r2, [r3]
 3341              	.LVL369:
 3342              	.L216:
2576:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     }
2577:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     CPU_CRITICAL_EXIT();
ARM GAS  /tmp/ccOtrZZk.s 			page 120


 3343              		.loc 1 2577 5 is_stmt 1 view .LVU1030
 3344              		.loc 1 2577 5 view .LVU1031
 3345              		.loc 1 2577 5 view .LVU1032
 3346 0018 2846     		mov	r0, r5
 3347 001a FFF7FEFF 		bl	CPU_SR_Restore
 3348              	.LVL370:
 3349              		.loc 1 2577 5 view .LVU1033
 3350              		.loc 1 2577 5 view .LVU1034
2578:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
2579:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
2580:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                                 /* ---------------------- CLR DATA 
2581:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     FSDev_SD_ClrInfo(&p_sd_spi_data->Info);                     /* Clr SD info.                    
 3351              		.loc 1 2581 5 view .LVU1035
 3352 001e 04F10800 		add	r0, r4, #8
 3353 0022 FFF7FEFF 		bl	FSDev_SD_ClrInfo
 3354              	.LVL371:
2582:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
2583:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     p_sd_spi_data->Init                    =  DEF_NO;
 3355              		.loc 1 2583 5 view .LVU1036
 3356              		.loc 1 2583 44 is_stmt 0 view .LVU1037
 3357 0026 0023     		movs	r3, #0
 3358 0028 A371     		strb	r3, [r4, #6]
2584:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
2585:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** #if (FS_CFG_CTR_STAT_EN                    == DEF_ENABLED)      /* Clr stat ctrs.                  
2586:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     p_sd_spi_data->StatRdCtr               =  0u;
2587:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     p_sd_spi_data->StatWrCtr               =  0u;
2588:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** #endif
2589:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
2590:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** #if (FS_CFG_CTR_ERR_EN                     == DEF_ENABLED)      /* Clr err ctrs.                   
2591:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     p_sd_spi_data->ErrRdCtr                =  0u;
2592:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     p_sd_spi_data->ErrWrCtr                =  0u;
2593:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
2594:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     p_sd_spi_data->ErrCmdRespCtr           =  0u;
2595:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     p_sd_spi_data->ErrCmdRespTimeoutCtr    =  0u;
2596:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     p_sd_spi_data->ErrCmdRespEraseResetCtr =  0u;
2597:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     p_sd_spi_data->ErrCmdRespIllegalCmdCtr =  0u;
2598:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     p_sd_spi_data->ErrCmdRespCommCRC_Ctr   =  0u;
2599:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     p_sd_spi_data->ErrCmdRespEraseSeqCtr   =  0u;
2600:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     p_sd_spi_data->ErrCmdRespAddrCtr       =  0u;
2601:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     p_sd_spi_data->ErrCmdRespParamCtr      =  0u;
2602:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** #endif
2603:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
2604:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     p_sd_spi_data->NextPtr                 = (FS_DEV_SD_SPI_DATA *)0;
 3359              		.loc 1 2604 5 is_stmt 1 view .LVU1038
 3360              		.loc 1 2604 44 is_stmt 0 view .LVU1039
 3361 002a 2363     		str	r3, [r4, #48]
2605:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
2606:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     return (p_sd_spi_data);
 3362              		.loc 1 2606 5 is_stmt 1 view .LVU1040
 3363              	.L212:
2607:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** }
 3364              		.loc 1 2607 1 is_stmt 0 view .LVU1041
 3365 002c 2046     		mov	r0, r4
 3366 002e 03B0     		add	sp, sp, #12
 3367              	.LCFI57:
 3368              		.cfi_remember_state
 3369              		.cfi_def_cfa_offset 12
ARM GAS  /tmp/ccOtrZZk.s 			page 121


 3370              		@ sp needed
 3371 0030 30BD     		pop	{r4, r5, pc}
 3372              	.LVL372:
 3373              	.L218:
 3374              	.LCFI58:
 3375              		.cfi_restore_state
2559:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                              sizeof(CPU_DATA),
 3376              		.loc 1 2559 9 is_stmt 1 view .LVU1042
2559:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                              sizeof(CPU_DATA),
 3377              		.loc 1 2559 47 is_stmt 0 view .LVU1043
 3378 0032 0DF10603 		add	r3, sp, #6
 3379 0036 6A46     		mov	r2, sp
 3380 0038 0421     		movs	r1, #4
 3381 003a 3420     		movs	r0, #52
 3382              	.LVL373:
2559:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                                                              sizeof(CPU_DATA),
 3383              		.loc 1 2559 47 view .LVU1044
 3384 003c FFF7FEFF 		bl	Mem_HeapAlloc
 3385              	.LVL374:
2563:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****             CPU_CRITICAL_EXIT();
 3386              		.loc 1 2563 9 is_stmt 1 view .LVU1045
2563:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****             CPU_CRITICAL_EXIT();
 3387              		.loc 1 2563 12 is_stmt 0 view .LVU1046
 3388 0040 0446     		mov	r4, r0
 3389 0042 20B1     		cbz	r0, .L219
2568:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 3390              		.loc 1 2568 9 is_stmt 1 view .LVU1047
2570:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 3391              		.loc 1 2570 9 view .LVU1048
2570:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 3392              		.loc 1 2570 29 is_stmt 0 view .LVU1049
 3393 0044 054A     		ldr	r2, .L220+4
 3394 0046 1368     		ldr	r3, [r2]
 3395 0048 0133     		adds	r3, r3, #1
 3396 004a 1360     		str	r3, [r2]
 3397 004c E4E7     		b	.L216
 3398              	.L219:
2564:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****             FS_TRACE_DBG(("FSDev_SD_SPI_DataGet(): Could not alloc mem for SD SPI data: %d octets r
 3399              		.loc 1 2564 13 is_stmt 1 view .LVU1050
2564:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****             FS_TRACE_DBG(("FSDev_SD_SPI_DataGet(): Could not alloc mem for SD SPI data: %d octets r
 3400              		.loc 1 2564 13 view .LVU1051
2564:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****             FS_TRACE_DBG(("FSDev_SD_SPI_DataGet(): Could not alloc mem for SD SPI data: %d octets r
 3401              		.loc 1 2564 13 view .LVU1052
 3402 004e 2846     		mov	r0, r5
 3403              	.LVL375:
2564:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****             FS_TRACE_DBG(("FSDev_SD_SPI_DataGet(): Could not alloc mem for SD SPI data: %d octets r
 3404              		.loc 1 2564 13 is_stmt 0 view .LVU1053
 3405 0050 FFF7FEFF 		bl	CPU_SR_Restore
 3406              	.LVL376:
2564:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****             FS_TRACE_DBG(("FSDev_SD_SPI_DataGet(): Could not alloc mem for SD SPI data: %d octets r
 3407              		.loc 1 2564 13 is_stmt 1 view .LVU1054
2564:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****             FS_TRACE_DBG(("FSDev_SD_SPI_DataGet(): Could not alloc mem for SD SPI data: %d octets r
 3408              		.loc 1 2564 13 view .LVU1055
2565:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****             return ((FS_DEV_SD_SPI_DATA *)0);
 3409              		.loc 1 2565 128 view .LVU1056
2566:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         }
 3410              		.loc 1 2566 13 view .LVU1057
ARM GAS  /tmp/ccOtrZZk.s 			page 122


2566:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         }
 3411              		.loc 1 2566 20 is_stmt 0 view .LVU1058
 3412 0054 EAE7     		b	.L212
 3413              	.L221:
 3414 0056 00BF     		.align	2
 3415              	.L220:
 3416 0058 00000000 		.word	.LANCHOR1
 3417 005c 00000000 		.word	FSDev_SD_SPI_UnitCtr
 3418              		.cfi_endproc
 3419              	.LFE28:
 3421              		.section	.text.FSDev_SD_SPI_Open,"ax",%progbits
 3422              		.align	1
 3423              		.syntax unified
 3424              		.thumb
 3425              		.thumb_func
 3426              		.fpu fpv4-sp-d16
 3428              	FSDev_SD_SPI_Open:
 3429              	.LVL377:
 3430              	.LFB5:
 802:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     FS_DEV_SD_SPI_DATA  *p_sd_spi_data;
 3431              		.loc 1 802 1 is_stmt 1 view -0
 3432              		.cfi_startproc
 3433              		@ args = 0, pretend = 0, frame = 0
 3434              		@ frame_needed = 0, uses_anonymous_args = 0
 802:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     FS_DEV_SD_SPI_DATA  *p_sd_spi_data;
 3435              		.loc 1 802 1 is_stmt 0 view .LVU1060
 3436 0000 38B5     		push	{r3, r4, r5, lr}
 3437              	.LCFI59:
 3438              		.cfi_def_cfa_offset 16
 3439              		.cfi_offset 3, -16
 3440              		.cfi_offset 4, -12
 3441              		.cfi_offset 5, -8
 3442              		.cfi_offset 14, -4
 3443 0002 0446     		mov	r4, r0
 3444 0004 1546     		mov	r5, r2
 803:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 3445              		.loc 1 803 5 is_stmt 1 view .LVU1061
 806:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 3446              		.loc 1 806 4 view .LVU1062
 808:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     if (p_sd_spi_data == (FS_DEV_SD_SPI_DATA *)0) {
 3447              		.loc 1 808 5 view .LVU1063
 808:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     if (p_sd_spi_data == (FS_DEV_SD_SPI_DATA *)0) {
 3448              		.loc 1 808 21 is_stmt 0 view .LVU1064
 3449 0006 FFF7FEFF 		bl	FSDev_SD_SPI_DataGet
 3450              	.LVL378:
 809:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****       *p_err = FS_ERR_MEM_ALLOC;
 3451              		.loc 1 809 5 is_stmt 1 view .LVU1065
 809:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****       *p_err = FS_ERR_MEM_ALLOC;
 3452              		.loc 1 809 8 is_stmt 0 view .LVU1066
 3453 000a 30B1     		cbz	r0, .L226
 814:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     p_sd_spi_data->UnitNbr =  p_dev->UnitNbr;
 3454              		.loc 1 814 5 is_stmt 1 view .LVU1067
 814:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     p_sd_spi_data->UnitNbr =  p_dev->UnitNbr;
 3455              		.loc 1 814 28 is_stmt 0 view .LVU1068
 3456 000c 6063     		str	r0, [r4, #52]
 815:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 3457              		.loc 1 815 5 is_stmt 1 view .LVU1069
ARM GAS  /tmp/ccOtrZZk.s 			page 123


 815:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 3458              		.loc 1 815 36 is_stmt 0 view .LVU1070
 3459 000e 228C     		ldrh	r2, [r4, #32]
 815:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 3460              		.loc 1 815 28 view .LVU1071
 3461 0010 8280     		strh	r2, [r0, #4]	@ movhi
 817:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** }
 3462              		.loc 1 817 4 is_stmt 1 view .LVU1072
 817:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** }
 3463              		.loc 1 817 10 is_stmt 0 view .LVU1073
 3464 0012 2946     		mov	r1, r5
 3465 0014 FFF7FEFF 		bl	FSDev_SD_SPI_Refresh
 3466              	.LVL379:
 3467              	.L222:
 818:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 3468              		.loc 1 818 1 view .LVU1074
 3469 0018 38BD     		pop	{r3, r4, r5, pc}
 3470              	.LVL380:
 3471              	.L226:
 810:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****        return;
 3472              		.loc 1 810 7 is_stmt 1 view .LVU1075
 810:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****        return;
 3473              		.loc 1 810 14 is_stmt 0 view .LVU1076
 3474 001a 1123     		movs	r3, #17
 3475 001c 2B80     		strh	r3, [r5]	@ movhi
 811:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     }
 3476              		.loc 1 811 8 is_stmt 1 view .LVU1077
 3477 001e FBE7     		b	.L222
 3478              		.cfi_endproc
 3479              	.LFE5:
 3481              		.section	.text.FSDev_SD_SPI_QuerySD,"ax",%progbits
 3482              		.align	1
 3483              		.global	FSDev_SD_SPI_QuerySD
 3484              		.syntax unified
 3485              		.thumb
 3486              		.thumb_func
 3487              		.fpu fpv4-sp-d16
 3489              	FSDev_SD_SPI_QuerySD:
 3490              	.LVL381:
 3491              	.LFB0:
 513:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     CPU_INT16S  cmp_val;
 3492              		.loc 1 513 1 view -0
 3493              		.cfi_startproc
 3494              		@ args = 0, pretend = 0, frame = 0
 3495              		@ frame_needed = 0, uses_anonymous_args = 0
 513:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     CPU_INT16S  cmp_val;
 3496              		.loc 1 513 1 is_stmt 0 view .LVU1079
 3497 0000 70B5     		push	{r4, r5, r6, lr}
 3498              	.LCFI60:
 3499              		.cfi_def_cfa_offset 16
 3500              		.cfi_offset 4, -16
 3501              		.cfi_offset 5, -12
 3502              		.cfi_offset 6, -8
 3503              		.cfi_offset 14, -4
 3504 0002 1646     		mov	r6, r2
 514:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 3505              		.loc 1 514 5 is_stmt 1 view .LVU1080
ARM GAS  /tmp/ccOtrZZk.s 			page 124


 519:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****        *p_err = FS_ERR_NAME_NULL;
 3506              		.loc 1 519 5 view .LVU1081
 519:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****        *p_err = FS_ERR_NAME_NULL;
 3507              		.loc 1 519 8 is_stmt 0 view .LVU1082
 3508 0004 70B1     		cbz	r0, .L234
 3509 0006 0C46     		mov	r4, r1
 3510 0008 0546     		mov	r5, r0
 524:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****        *p_err = FS_ERR_NULL_PTR;
 3511              		.loc 1 524 5 is_stmt 1 view .LVU1083
 524:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****        *p_err = FS_ERR_NULL_PTR;
 3512              		.loc 1 524 8 is_stmt 0 view .LVU1084
 3513 000a 79B1     		cbz	r1, .L235
 531:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     if (cmp_val != 0) {
 3514              		.loc 1 531 5 is_stmt 1 view .LVU1085
 531:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     if (cmp_val != 0) {
 3515              		.loc 1 531 15 is_stmt 0 view .LVU1086
 3516 000c 0222     		movs	r2, #2
 3517              	.LVL382:
 531:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     if (cmp_val != 0) {
 3518              		.loc 1 531 15 view .LVU1087
 3519 000e 0E49     		ldr	r1, .L237
 3520              	.LVL383:
 531:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     if (cmp_val != 0) {
 3521              		.loc 1 531 15 view .LVU1088
 3522 0010 FFF7FEFF 		bl	Str_Cmp_N
 3523              	.LVL384:
 532:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****        *p_err = FS_ERR_DEV_INVALID;
 3524              		.loc 1 532 5 is_stmt 1 view .LVU1089
 532:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****        *p_err = FS_ERR_DEV_INVALID;
 3525              		.loc 1 532 8 is_stmt 0 view .LVU1090
 3526 0014 68B9     		cbnz	r0, .L236
 537:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****        *p_err = FS_ERR_DEV_INVALID;
 3527              		.loc 1 537 5 is_stmt 1 view .LVU1091
 537:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****        *p_err = FS_ERR_DEV_INVALID;
 3528              		.loc 1 537 17 is_stmt 0 view .LVU1092
 3529 0016 AB78     		ldrb	r3, [r5, #2]	@ zero_extendqisi2
 537:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****        *p_err = FS_ERR_DEV_INVALID;
 3530              		.loc 1 537 8 view .LVU1093
 3531 0018 3A2B     		cmp	r3, #58
 3532 001a 0ED0     		beq	.L232
 538:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         return;
 3533              		.loc 1 538 8 is_stmt 1 view .LVU1094
 538:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         return;
 3534              		.loc 1 538 15 is_stmt 0 view .LVU1095
 3535 001c 4FF49B73 		mov	r3, #310
 3536 0020 3380     		strh	r3, [r6]	@ movhi
 539:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     }
 3537              		.loc 1 539 9 is_stmt 1 view .LVU1096
 3538 0022 05E0     		b	.L227
 3539              	.LVL385:
 3540              	.L234:
 520:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         return;
 3541              		.loc 1 520 8 view .LVU1097
 520:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         return;
 3542              		.loc 1 520 15 is_stmt 0 view .LVU1098
 3543 0024 40F28933 		movw	r3, #905
 3544 0028 1380     		strh	r3, [r2]	@ movhi
ARM GAS  /tmp/ccOtrZZk.s 			page 125


 521:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     }
 3545              		.loc 1 521 9 is_stmt 1 view .LVU1099
 3546 002a 01E0     		b	.L227
 3547              	.L235:
 525:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         return;
 3548              		.loc 1 525 8 view .LVU1100
 525:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         return;
 3549              		.loc 1 525 15 is_stmt 0 view .LVU1101
 3550 002c 1323     		movs	r3, #19
 3551 002e 1380     		strh	r3, [r2]	@ movhi
 526:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     }
 3552              		.loc 1 526 9 is_stmt 1 view .LVU1102
 3553              	.LVL386:
 3554              	.L227:
 548:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 3555              		.loc 1 548 1 is_stmt 0 view .LVU1103
 3556 0030 70BD     		pop	{r4, r5, r6, pc}
 3557              	.LVL387:
 3558              	.L236:
 533:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         return;
 3559              		.loc 1 533 8 is_stmt 1 view .LVU1104
 533:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         return;
 3560              		.loc 1 533 15 is_stmt 0 view .LVU1105
 3561 0032 4FF49B73 		mov	r3, #310
 3562 0036 3380     		strh	r3, [r6]	@ movhi
 534:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     }
 3563              		.loc 1 534 9 is_stmt 1 view .LVU1106
 3564 0038 FAE7     		b	.L227
 3565              	.L232:
 544:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                           FS_DEV_IO_CTRL_SD_QUERY,
 3566              		.loc 1 544 5 view .LVU1107
 3567 003a 3346     		mov	r3, r6
 3568 003c 2246     		mov	r2, r4
 3569 003e 4021     		movs	r1, #64
 3570 0040 2846     		mov	r0, r5
 3571              	.LVL388:
 544:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                           FS_DEV_IO_CTRL_SD_QUERY,
 3572              		.loc 1 544 5 is_stmt 0 view .LVU1108
 3573 0042 FFF7FEFF 		bl	FSDev_IO_Ctrl
 3574              	.LVL389:
 3575 0046 F3E7     		b	.L227
 3576              	.L238:
 3577              		.align	2
 3578              	.L237:
 3579 0048 00000000 		.word	.LANCHOR0
 3580              		.cfi_endproc
 3581              	.LFE0:
 3583              		.section	.text.FSDev_SD_SPI_RdCID,"ax",%progbits
 3584              		.align	1
 3585              		.global	FSDev_SD_SPI_RdCID
 3586              		.syntax unified
 3587              		.thumb
 3588              		.thumb_func
 3589              		.fpu fpv4-sp-d16
 3591              	FSDev_SD_SPI_RdCID:
 3592              	.LVL390:
 3593              	.LFB1:
ARM GAS  /tmp/ccOtrZZk.s 			page 126


 587:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     CPU_INT16S  cmp_val;
 3594              		.loc 1 587 1 is_stmt 1 view -0
 3595              		.cfi_startproc
 3596              		@ args = 0, pretend = 0, frame = 0
 3597              		@ frame_needed = 0, uses_anonymous_args = 0
 587:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     CPU_INT16S  cmp_val;
 3598              		.loc 1 587 1 is_stmt 0 view .LVU1110
 3599 0000 70B5     		push	{r4, r5, r6, lr}
 3600              	.LCFI61:
 3601              		.cfi_def_cfa_offset 16
 3602              		.cfi_offset 4, -16
 3603              		.cfi_offset 5, -12
 3604              		.cfi_offset 6, -8
 3605              		.cfi_offset 14, -4
 3606 0002 1646     		mov	r6, r2
 588:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 3607              		.loc 1 588 5 is_stmt 1 view .LVU1111
 593:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****        *p_err = FS_ERR_NAME_NULL;
 3608              		.loc 1 593 5 view .LVU1112
 593:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****        *p_err = FS_ERR_NAME_NULL;
 3609              		.loc 1 593 8 is_stmt 0 view .LVU1113
 3610 0004 70B1     		cbz	r0, .L246
 3611 0006 0C46     		mov	r4, r1
 3612 0008 0546     		mov	r5, r0
 598:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****        *p_err = FS_ERR_NULL_PTR;
 3613              		.loc 1 598 5 is_stmt 1 view .LVU1114
 598:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****        *p_err = FS_ERR_NULL_PTR;
 3614              		.loc 1 598 8 is_stmt 0 view .LVU1115
 3615 000a 79B1     		cbz	r1, .L247
 605:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     if (cmp_val != 0) {
 3616              		.loc 1 605 5 is_stmt 1 view .LVU1116
 605:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     if (cmp_val != 0) {
 3617              		.loc 1 605 15 is_stmt 0 view .LVU1117
 3618 000c 0222     		movs	r2, #2
 3619              	.LVL391:
 605:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     if (cmp_val != 0) {
 3620              		.loc 1 605 15 view .LVU1118
 3621 000e 0E49     		ldr	r1, .L249
 3622              	.LVL392:
 605:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     if (cmp_val != 0) {
 3623              		.loc 1 605 15 view .LVU1119
 3624 0010 FFF7FEFF 		bl	Str_Cmp_N
 3625              	.LVL393:
 606:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****        *p_err = FS_ERR_DEV_INVALID;
 3626              		.loc 1 606 5 is_stmt 1 view .LVU1120
 606:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****        *p_err = FS_ERR_DEV_INVALID;
 3627              		.loc 1 606 8 is_stmt 0 view .LVU1121
 3628 0014 68B9     		cbnz	r0, .L248
 611:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****        *p_err = FS_ERR_DEV_INVALID;
 3629              		.loc 1 611 5 is_stmt 1 view .LVU1122
 611:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****        *p_err = FS_ERR_DEV_INVALID;
 3630              		.loc 1 611 17 is_stmt 0 view .LVU1123
 3631 0016 AB78     		ldrb	r3, [r5, #2]	@ zero_extendqisi2
 611:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****        *p_err = FS_ERR_DEV_INVALID;
 3632              		.loc 1 611 8 view .LVU1124
 3633 0018 3A2B     		cmp	r3, #58
 3634 001a 0ED0     		beq	.L244
ARM GAS  /tmp/ccOtrZZk.s 			page 127


 612:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         return;
 3635              		.loc 1 612 8 is_stmt 1 view .LVU1125
 612:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         return;
 3636              		.loc 1 612 15 is_stmt 0 view .LVU1126
 3637 001c 4FF49B73 		mov	r3, #310
 3638 0020 3380     		strh	r3, [r6]	@ movhi
 613:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     }
 3639              		.loc 1 613 9 is_stmt 1 view .LVU1127
 3640 0022 05E0     		b	.L239
 3641              	.LVL394:
 3642              	.L246:
 594:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         return;
 3643              		.loc 1 594 8 view .LVU1128
 594:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         return;
 3644              		.loc 1 594 15 is_stmt 0 view .LVU1129
 3645 0024 40F28933 		movw	r3, #905
 3646 0028 1380     		strh	r3, [r2]	@ movhi
 595:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     }
 3647              		.loc 1 595 9 is_stmt 1 view .LVU1130
 3648 002a 01E0     		b	.L239
 3649              	.L247:
 599:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         return;
 3650              		.loc 1 599 8 view .LVU1131
 599:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         return;
 3651              		.loc 1 599 15 is_stmt 0 view .LVU1132
 3652 002c 1323     		movs	r3, #19
 3653 002e 1380     		strh	r3, [r2]	@ movhi
 600:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     }
 3654              		.loc 1 600 9 is_stmt 1 view .LVU1133
 3655              	.LVL395:
 3656              	.L239:
 622:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 3657              		.loc 1 622 1 is_stmt 0 view .LVU1134
 3658 0030 70BD     		pop	{r4, r5, r6, pc}
 3659              	.LVL396:
 3660              	.L248:
 607:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         return;
 3661              		.loc 1 607 8 is_stmt 1 view .LVU1135
 607:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         return;
 3662              		.loc 1 607 15 is_stmt 0 view .LVU1136
 3663 0032 4FF49B73 		mov	r3, #310
 3664 0036 3380     		strh	r3, [r6]	@ movhi
 608:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     }
 3665              		.loc 1 608 9 is_stmt 1 view .LVU1137
 3666 0038 FAE7     		b	.L239
 3667              	.L244:
 618:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                           FS_DEV_IO_CTRL_SD_RD_CID,
 3668              		.loc 1 618 5 view .LVU1138
 3669 003a 3346     		mov	r3, r6
 3670 003c 2246     		mov	r2, r4
 3671 003e 4121     		movs	r1, #65
 3672 0040 2846     		mov	r0, r5
 3673              	.LVL397:
 618:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                           FS_DEV_IO_CTRL_SD_RD_CID,
 3674              		.loc 1 618 5 is_stmt 0 view .LVU1139
 3675 0042 FFF7FEFF 		bl	FSDev_IO_Ctrl
 3676              	.LVL398:
ARM GAS  /tmp/ccOtrZZk.s 			page 128


 3677 0046 F3E7     		b	.L239
 3678              	.L250:
 3679              		.align	2
 3680              	.L249:
 3681 0048 00000000 		.word	.LANCHOR0
 3682              		.cfi_endproc
 3683              	.LFE1:
 3685              		.section	.text.FSDev_SD_SPI_RdCSD,"ax",%progbits
 3686              		.align	1
 3687              		.global	FSDev_SD_SPI_RdCSD
 3688              		.syntax unified
 3689              		.thumb
 3690              		.thumb_func
 3691              		.fpu fpv4-sp-d16
 3693              	FSDev_SD_SPI_RdCSD:
 3694              	.LVL399:
 3695              	.LFB2:
 665:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     CPU_INT16S  cmp_val;
 3696              		.loc 1 665 1 is_stmt 1 view -0
 3697              		.cfi_startproc
 3698              		@ args = 0, pretend = 0, frame = 0
 3699              		@ frame_needed = 0, uses_anonymous_args = 0
 665:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     CPU_INT16S  cmp_val;
 3700              		.loc 1 665 1 is_stmt 0 view .LVU1141
 3701 0000 70B5     		push	{r4, r5, r6, lr}
 3702              	.LCFI62:
 3703              		.cfi_def_cfa_offset 16
 3704              		.cfi_offset 4, -16
 3705              		.cfi_offset 5, -12
 3706              		.cfi_offset 6, -8
 3707              		.cfi_offset 14, -4
 3708 0002 1646     		mov	r6, r2
 666:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 3709              		.loc 1 666 5 is_stmt 1 view .LVU1142
 671:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****        *p_err = FS_ERR_NAME_NULL;
 3710              		.loc 1 671 5 view .LVU1143
 671:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****        *p_err = FS_ERR_NAME_NULL;
 3711              		.loc 1 671 8 is_stmt 0 view .LVU1144
 3712 0004 70B1     		cbz	r0, .L258
 3713 0006 0C46     		mov	r4, r1
 3714 0008 0546     		mov	r5, r0
 676:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****        *p_err = FS_ERR_NULL_PTR;
 3715              		.loc 1 676 5 is_stmt 1 view .LVU1145
 676:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****        *p_err = FS_ERR_NULL_PTR;
 3716              		.loc 1 676 8 is_stmt 0 view .LVU1146
 3717 000a 79B1     		cbz	r1, .L259
 683:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     if (cmp_val != 0) {
 3718              		.loc 1 683 5 is_stmt 1 view .LVU1147
 683:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     if (cmp_val != 0) {
 3719              		.loc 1 683 15 is_stmt 0 view .LVU1148
 3720 000c 0222     		movs	r2, #2
 3721              	.LVL400:
 683:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     if (cmp_val != 0) {
 3722              		.loc 1 683 15 view .LVU1149
 3723 000e 0E49     		ldr	r1, .L261
 3724              	.LVL401:
 683:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     if (cmp_val != 0) {
ARM GAS  /tmp/ccOtrZZk.s 			page 129


 3725              		.loc 1 683 15 view .LVU1150
 3726 0010 FFF7FEFF 		bl	Str_Cmp_N
 3727              	.LVL402:
 684:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****        *p_err = FS_ERR_DEV_INVALID;
 3728              		.loc 1 684 5 is_stmt 1 view .LVU1151
 684:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****        *p_err = FS_ERR_DEV_INVALID;
 3729              		.loc 1 684 8 is_stmt 0 view .LVU1152
 3730 0014 68B9     		cbnz	r0, .L260
 689:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****        *p_err = FS_ERR_DEV_INVALID;
 3731              		.loc 1 689 5 is_stmt 1 view .LVU1153
 689:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****        *p_err = FS_ERR_DEV_INVALID;
 3732              		.loc 1 689 17 is_stmt 0 view .LVU1154
 3733 0016 AB78     		ldrb	r3, [r5, #2]	@ zero_extendqisi2
 689:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****        *p_err = FS_ERR_DEV_INVALID;
 3734              		.loc 1 689 8 view .LVU1155
 3735 0018 3A2B     		cmp	r3, #58
 3736 001a 0ED0     		beq	.L256
 690:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         return;
 3737              		.loc 1 690 8 is_stmt 1 view .LVU1156
 690:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         return;
 3738              		.loc 1 690 15 is_stmt 0 view .LVU1157
 3739 001c 4FF49B73 		mov	r3, #310
 3740 0020 3380     		strh	r3, [r6]	@ movhi
 691:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     }
 3741              		.loc 1 691 9 is_stmt 1 view .LVU1158
 3742 0022 05E0     		b	.L251
 3743              	.LVL403:
 3744              	.L258:
 672:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         return;
 3745              		.loc 1 672 8 view .LVU1159
 672:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         return;
 3746              		.loc 1 672 15 is_stmt 0 view .LVU1160
 3747 0024 40F28933 		movw	r3, #905
 3748 0028 1380     		strh	r3, [r2]	@ movhi
 673:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     }
 3749              		.loc 1 673 9 is_stmt 1 view .LVU1161
 3750 002a 01E0     		b	.L251
 3751              	.L259:
 677:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         return;
 3752              		.loc 1 677 8 view .LVU1162
 677:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         return;
 3753              		.loc 1 677 15 is_stmt 0 view .LVU1163
 3754 002c 1323     		movs	r3, #19
 3755 002e 1380     		strh	r3, [r2]	@ movhi
 678:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     }
 3756              		.loc 1 678 9 is_stmt 1 view .LVU1164
 3757              	.LVL404:
 3758              	.L251:
 700:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c **** 
 3759              		.loc 1 700 1 is_stmt 0 view .LVU1165
 3760 0030 70BD     		pop	{r4, r5, r6, pc}
 3761              	.LVL405:
 3762              	.L260:
 685:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         return;
 3763              		.loc 1 685 8 is_stmt 1 view .LVU1166
 685:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****         return;
 3764              		.loc 1 685 15 is_stmt 0 view .LVU1167
ARM GAS  /tmp/ccOtrZZk.s 			page 130


 3765 0032 4FF49B73 		mov	r3, #310
 3766 0036 3380     		strh	r3, [r6]	@ movhi
 686:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****     }
 3767              		.loc 1 686 9 is_stmt 1 view .LVU1168
 3768 0038 FAE7     		b	.L251
 3769              	.L256:
 696:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                           FS_DEV_IO_CTRL_SD_RD_CSD,
 3770              		.loc 1 696 5 view .LVU1169
 3771 003a 3346     		mov	r3, r6
 3772 003c 2246     		mov	r2, r4
 3773 003e 4221     		movs	r1, #66
 3774 0040 2846     		mov	r0, r5
 3775              	.LVL406:
 696:rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.c ****                           FS_DEV_IO_CTRL_SD_RD_CSD,
 3776              		.loc 1 696 5 is_stmt 0 view .LVU1170
 3777 0042 FFF7FEFF 		bl	FSDev_IO_Ctrl
 3778              	.LVL407:
 3779 0046 F3E7     		b	.L251
 3780              	.L262:
 3781              		.align	2
 3782              	.L261:
 3783 0048 00000000 		.word	.LANCHOR0
 3784              		.cfi_endproc
 3785              	.LFE2:
 3787              		.global	FSDev_SD_SPI
 3788              		.comm	FSDev_SD_SPI_UnitCtr,4,4
 3789              		.section	.bss.FSDev_SD_SPI_ListFreePtr,"aw",%nobits
 3790              		.align	2
 3791              		.set	.LANCHOR1,. + 0
 3794              	FSDev_SD_SPI_ListFreePtr:
 3795 0000 00000000 		.space	4
 3796              		.section	.rodata.FSDev_SD_SPI,"a"
 3797              		.align	2
 3800              	FSDev_SD_SPI:
 3801 0000 00000000 		.word	FSDev_SD_SPI_NameGet
 3802 0004 00000000 		.word	FSDev_SD_SPI_Init
 3803 0008 00000000 		.word	FSDev_SD_SPI_Open
 3804 000c 00000000 		.word	FSDev_SD_SPI_Close
 3805 0010 00000000 		.word	FSDev_SD_SPI_Rd
 3806 0014 00000000 		.word	FSDev_SD_SPI_Wr
 3807 0018 00000000 		.word	FSDev_SD_SPI_Query
 3808 001c 00000000 		.word	FSDev_SD_SPI_IO_Ctrl
 3809              		.section	.rodata.FSDev_SD_SPI_Name,"a"
 3810              		.align	2
 3811              		.set	.LANCHOR0,. + 0
 3814              	FSDev_SD_SPI_Name:
 3815 0000 736400   		.ascii	"sd\000"
 3816              		.text
 3817              	.Letext0:
 3818              		.file 2 "rtos/uC-CPU/ARM-Cortex-M/ARMv7-M/GNU/cpu.h"
 3819              		.file 3 "rtos/uC-LIB/lib_def.h"
 3820              		.file 4 "rtos/uC-LIB/lib_mem.h"
 3821              		.file 5 "rtos/uC-FS/Dev/SD/SPI/../../../Source/fs_type.h"
 3822              		.file 6 "rtos/uC-FS/Dev/SD/SPI/../../../Source/fs_dev.h"
 3823              		.file 7 "rtos/uC-FS/Dev/SD/SPI/../../../Source/fs_err.h"
 3824              		.file 8 "rtos/uC-FS/Dev/SD/SPI/../../../Source/fs_ctr.h"
 3825              		.file 9 "rtos/uC-FS/Dev/SD/SPI/../fs_dev_sd.h"
ARM GAS  /tmp/ccOtrZZk.s 			page 131


 3826              		.file 10 "rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.h"
 3827              		.file 11 "rtos/uC-LIB/lib_str.h"
ARM GAS  /tmp/ccOtrZZk.s 			page 132


DEFINED SYMBOLS
                            *ABS*:0000000000000000 fs_dev_sd_spi.c
     /tmp/ccOtrZZk.s:18     .text.FSDev_SD_SPI_NameGet:0000000000000000 $t
     /tmp/ccOtrZZk.s:25     .text.FSDev_SD_SPI_NameGet:0000000000000000 FSDev_SD_SPI_NameGet
     /tmp/ccOtrZZk.s:40     .text.FSDev_SD_SPI_NameGet:0000000000000004 $d
     /tmp/ccOtrZZk.s:45     .text.FSDev_SD_SPI_Init:0000000000000000 $t
     /tmp/ccOtrZZk.s:51     .text.FSDev_SD_SPI_Init:0000000000000000 FSDev_SD_SPI_Init
     /tmp/ccOtrZZk.s:76     .text.FSDev_SD_SPI_Init:0000000000000010 $d
                            *COM*:0000000000000004 FSDev_SD_SPI_UnitCtr
     /tmp/ccOtrZZk.s:82     .text.FSDev_SD_SPI_Query:0000000000000000 $t
     /tmp/ccOtrZZk.s:88     .text.FSDev_SD_SPI_Query:0000000000000000 FSDev_SD_SPI_Query
     /tmp/ccOtrZZk.s:165    .text.FSDev_SD_SPI_RdByte:0000000000000000 $t
     /tmp/ccOtrZZk.s:171    .text.FSDev_SD_SPI_RdByte:0000000000000000 FSDev_SD_SPI_RdByte
     /tmp/ccOtrZZk.s:207    .text.FSDev_SD_SPI_RdByte:000000000000001c $d
     /tmp/ccOtrZZk.s:212    .text.FSDev_SD_SPI_WaitClks:0000000000000000 $t
     /tmp/ccOtrZZk.s:218    .text.FSDev_SD_SPI_WaitClks:0000000000000000 FSDev_SD_SPI_WaitClks
     /tmp/ccOtrZZk.s:285    .text.FSDev_SD_SPI_WaitClks:000000000000002c $d
     /tmp/ccOtrZZk.s:290    .text.FSDev_SD_SPI_WaitForStart:0000000000000000 $t
     /tmp/ccOtrZZk.s:296    .text.FSDev_SD_SPI_WaitForStart:0000000000000000 FSDev_SD_SPI_WaitForStart
     /tmp/ccOtrZZk.s:355    .text.FSDev_SD_SPI_WaitForStart:0000000000000020 $d
     /tmp/ccOtrZZk.s:360    .text.FSDev_SD_SPI_WaitWhileBusy:0000000000000000 $t
     /tmp/ccOtrZZk.s:366    .text.FSDev_SD_SPI_WaitWhileBusy:0000000000000000 FSDev_SD_SPI_WaitWhileBusy
     /tmp/ccOtrZZk.s:425    .text.FSDev_SD_SPI_WaitWhileBusy:0000000000000020 $d
     /tmp/ccOtrZZk.s:430    .text.FSDev_SD_SPI_Cmd:0000000000000000 $t
     /tmp/ccOtrZZk.s:436    .text.FSDev_SD_SPI_Cmd:0000000000000000 FSDev_SD_SPI_Cmd
     /tmp/ccOtrZZk.s:567    .text.FSDev_SD_SPI_Cmd:0000000000000074 $d
     /tmp/ccOtrZZk.s:572    .text.FSDev_SD_SPI_AppCmdR1:0000000000000000 $t
     /tmp/ccOtrZZk.s:578    .text.FSDev_SD_SPI_AppCmdR1:0000000000000000 FSDev_SD_SPI_AppCmdR1
     /tmp/ccOtrZZk.s:681    .text.FSDev_SD_SPI_AppCmdR1:0000000000000064 $d
     /tmp/ccOtrZZk.s:686    .text.FSDev_SD_SPI_CmdR3_7:0000000000000000 $t
     /tmp/ccOtrZZk.s:692    .text.FSDev_SD_SPI_CmdR3_7:0000000000000000 FSDev_SD_SPI_CmdR3_7
     /tmp/ccOtrZZk.s:795    .text.FSDev_SD_SPI_CmdR3_7:000000000000005c $d
     /tmp/ccOtrZZk.s:800    .text.FSDev_SD_SPI_CmdR1:0000000000000000 $t
     /tmp/ccOtrZZk.s:806    .text.FSDev_SD_SPI_CmdR1:0000000000000000 FSDev_SD_SPI_CmdR1
     /tmp/ccOtrZZk.s:870    .text.FSDev_SD_SPI_CmdR1:0000000000000038 $d
     /tmp/ccOtrZZk.s:875    .text.FSDev_SD_SPI_MakeRdy:0000000000000000 $t
     /tmp/ccOtrZZk.s:881    .text.FSDev_SD_SPI_MakeRdy:0000000000000000 FSDev_SD_SPI_MakeRdy
     /tmp/ccOtrZZk.s:1110   .text.FSDev_SD_SPI_RdData:0000000000000000 $t
     /tmp/ccOtrZZk.s:1116   .text.FSDev_SD_SPI_RdData:0000000000000000 FSDev_SD_SPI_RdData
     /tmp/ccOtrZZk.s:1268   .text.FSDev_SD_SPI_RdData:0000000000000084 $d
     /tmp/ccOtrZZk.s:1273   .text.FSDev_SD_SPI_SendCID:0000000000000000 $t
     /tmp/ccOtrZZk.s:1279   .text.FSDev_SD_SPI_SendCID:0000000000000000 FSDev_SD_SPI_SendCID
     /tmp/ccOtrZZk.s:1317   .text.FSDev_SD_SPI_SendCSD:0000000000000000 $t
     /tmp/ccOtrZZk.s:1323   .text.FSDev_SD_SPI_SendCSD:0000000000000000 FSDev_SD_SPI_SendCSD
     /tmp/ccOtrZZk.s:1361   .text.FSDev_SD_SPI_Refresh:0000000000000000 $t
     /tmp/ccOtrZZk.s:1367   .text.FSDev_SD_SPI_Refresh:0000000000000000 FSDev_SD_SPI_Refresh
     /tmp/ccOtrZZk.s:1885   .text.FSDev_SD_SPI_Refresh:00000000000001fc $d
     /tmp/ccOtrZZk.s:1891   .text.FSDev_SD_SPI_IO_Ctrl:0000000000000000 $t
     /tmp/ccOtrZZk.s:1897   .text.FSDev_SD_SPI_IO_Ctrl:0000000000000000 FSDev_SD_SPI_IO_Ctrl
     /tmp/ccOtrZZk.s:2227   .text.FSDev_SD_SPI_IO_Ctrl:0000000000000104 $d
     /tmp/ccOtrZZk.s:2232   .text.FSDev_SD_SPI_WrDataMulti:0000000000000000 $t
     /tmp/ccOtrZZk.s:2238   .text.FSDev_SD_SPI_WrDataMulti:0000000000000000 FSDev_SD_SPI_WrDataMulti
     /tmp/ccOtrZZk.s:2475   .text.FSDev_SD_SPI_WrDataMulti:000000000000010c $d
     /tmp/ccOtrZZk.s:2480   .text.FSDev_SD_SPI_WrData:0000000000000000 $t
     /tmp/ccOtrZZk.s:2486   .text.FSDev_SD_SPI_WrData:0000000000000000 FSDev_SD_SPI_WrData
     /tmp/ccOtrZZk.s:2666   .text.FSDev_SD_SPI_WrData:00000000000000c4 $d
     /tmp/ccOtrZZk.s:2671   .text.FSDev_SD_SPI_Wr:0000000000000000 $t
ARM GAS  /tmp/ccOtrZZk.s 			page 133


     /tmp/ccOtrZZk.s:2677   .text.FSDev_SD_SPI_Wr:0000000000000000 FSDev_SD_SPI_Wr
     /tmp/ccOtrZZk.s:2820   .text.FSDev_SD_SPI_Wr:0000000000000078 $d
     /tmp/ccOtrZZk.s:2825   .text.FSDev_SD_SPI_RdDataMulti:0000000000000000 $t
     /tmp/ccOtrZZk.s:2831   .text.FSDev_SD_SPI_RdDataMulti:0000000000000000 FSDev_SD_SPI_RdDataMulti
     /tmp/ccOtrZZk.s:3014   .text.FSDev_SD_SPI_RdDataMulti:00000000000000ac $d
     /tmp/ccOtrZZk.s:3019   .text.FSDev_SD_SPI_Rd:0000000000000000 $t
     /tmp/ccOtrZZk.s:3025   .text.FSDev_SD_SPI_Rd:0000000000000000 FSDev_SD_SPI_Rd
     /tmp/ccOtrZZk.s:3168   .text.FSDev_SD_SPI_Rd:0000000000000078 $d
     /tmp/ccOtrZZk.s:3173   .text.FSDev_SD_SPI_DataFree:0000000000000000 $t
     /tmp/ccOtrZZk.s:3179   .text.FSDev_SD_SPI_DataFree:0000000000000000 FSDev_SD_SPI_DataFree
     /tmp/ccOtrZZk.s:3227   .text.FSDev_SD_SPI_DataFree:0000000000000018 $d
     /tmp/ccOtrZZk.s:3232   .text.FSDev_SD_SPI_Close:0000000000000000 $t
     /tmp/ccOtrZZk.s:3238   .text.FSDev_SD_SPI_Close:0000000000000000 FSDev_SD_SPI_Close
     /tmp/ccOtrZZk.s:3286   .text.FSDev_SD_SPI_Close:000000000000001c $d
     /tmp/ccOtrZZk.s:3291   .text.FSDev_SD_SPI_DataGet:0000000000000000 $t
     /tmp/ccOtrZZk.s:3297   .text.FSDev_SD_SPI_DataGet:0000000000000000 FSDev_SD_SPI_DataGet
     /tmp/ccOtrZZk.s:3416   .text.FSDev_SD_SPI_DataGet:0000000000000058 $d
     /tmp/ccOtrZZk.s:3422   .text.FSDev_SD_SPI_Open:0000000000000000 $t
     /tmp/ccOtrZZk.s:3428   .text.FSDev_SD_SPI_Open:0000000000000000 FSDev_SD_SPI_Open
     /tmp/ccOtrZZk.s:3482   .text.FSDev_SD_SPI_QuerySD:0000000000000000 $t
     /tmp/ccOtrZZk.s:3489   .text.FSDev_SD_SPI_QuerySD:0000000000000000 FSDev_SD_SPI_QuerySD
     /tmp/ccOtrZZk.s:3579   .text.FSDev_SD_SPI_QuerySD:0000000000000048 $d
     /tmp/ccOtrZZk.s:3584   .text.FSDev_SD_SPI_RdCID:0000000000000000 $t
     /tmp/ccOtrZZk.s:3591   .text.FSDev_SD_SPI_RdCID:0000000000000000 FSDev_SD_SPI_RdCID
     /tmp/ccOtrZZk.s:3681   .text.FSDev_SD_SPI_RdCID:0000000000000048 $d
     /tmp/ccOtrZZk.s:3686   .text.FSDev_SD_SPI_RdCSD:0000000000000000 $t
     /tmp/ccOtrZZk.s:3693   .text.FSDev_SD_SPI_RdCSD:0000000000000000 FSDev_SD_SPI_RdCSD
     /tmp/ccOtrZZk.s:3783   .text.FSDev_SD_SPI_RdCSD:0000000000000048 $d
     /tmp/ccOtrZZk.s:3800   .rodata.FSDev_SD_SPI:0000000000000000 FSDev_SD_SPI
     /tmp/ccOtrZZk.s:3790   .bss.FSDev_SD_SPI_ListFreePtr:0000000000000000 $d
     /tmp/ccOtrZZk.s:3794   .bss.FSDev_SD_SPI_ListFreePtr:0000000000000000 FSDev_SD_SPI_ListFreePtr
     /tmp/ccOtrZZk.s:3797   .rodata.FSDev_SD_SPI:0000000000000000 $d
     /tmp/ccOtrZZk.s:3810   .rodata.FSDev_SD_SPI_Name:0000000000000000 $d
     /tmp/ccOtrZZk.s:3814   .rodata.FSDev_SD_SPI_Name:0000000000000000 FSDev_SD_SPI_Name
                           .group:0000000000000000 wm4.0.0f5aa60db9403f389c005f20ecce4286
                           .group:0000000000000000 wm4.cpu_def.h.46.baa122a2898bdc40bb50d1f21ead1515
                           .group:0000000000000000 wm4.cpu_cfg.h.45.38a6a562da8b04490c382a226238c57e
                           .group:0000000000000000 wm4.cpu.h.171.3cb15ee3ccb812cbfdf76d1fbfb9eda0
                           .group:0000000000000000 wm4.lib_def.h.66.6ab2a012067a8e1f4289db5765835062
                           .group:0000000000000000 wm4.lib_ascii.h.132.fab7475cf7158ae9b59cf42e0e06afca
                           .group:0000000000000000 wm4.cpu_core.h.51.bda0b8f45c33e87ce41267758624493c
                           .group:0000000000000000 wm4.lib_cfg.h.40.b2958733f73e73af70f675ca0f89303e
                           .group:0000000000000000 wm4.lib_mem.h.121.89b942a057fb20091baad8bf6b28b1e6
                           .group:0000000000000000 wm4.lib_str.h.60.d6fb3a1336db17c586ed26be94929677
                           .group:0000000000000000 wm4.fs.h.42.4f6311a594ee5619f1ee7a9392eb7faa
                           .group:0000000000000000 wm4.fs_def.h.42.653ad677c23ef93c522ec84af681385d
                           .group:0000000000000000 wm4.fs_cfg.h.116.da4f8e9d0b9040a97ef3bf26c61e90fd
                           .group:0000000000000000 wm4.clk.h.99.39403db6a27321e53b261bbe20b56e1d
                           .group:0000000000000000 wm4.clk_cfg.h.45.428f260ed0fbcfa16fc822c67c85dade
                           .group:0000000000000000 wm4.clk.h.219.c24c7347fcc7691d3157fe73514cb366
                           .group:0000000000000000 wm4.fs_cfg_fs.h.176.c85074fbe881bfa594608376a65f4dc2
                           .group:0000000000000000 wm4.fs_type.h.42.3e681b291920189044ba1da24ae0f22a
                           .group:0000000000000000 wm4.fs_err.h.42.d52bfed31dff3d1419c5cf09952dee67
                           .group:0000000000000000 wm4.fs.h.97.1d629f0ba32b5622ab4e01a254bd98e8
                           .group:0000000000000000 wm4.fs_dev.h.42.457d0b7de373584765db5fbe40e7c30d
                           .group:0000000000000000 wm4.fs_ctr.h.42.9d1398cac157503ac8af114819f7782b
                           .group:0000000000000000 wm4.fs_dev.h.84.0b8682dc82cfd464ab0da30a876c8006
ARM GAS  /tmp/ccOtrZZk.s 			page 134


                           .group:0000000000000000 wm4.fs_dev_sd_spi.h.61.c30397dd9437dc5f82680fc8fd74e71c
                           .group:0000000000000000 wm4.fs_dev_sd.h.51.8fab0a2de1a39903165fb5d84ccccc96
                           .group:0000000000000000 wm4.fs_dev_sd.h.87.291a6dec37946aecadc14eb5adc7a3fa

UNDEFINED SYMBOLS
FSDev_SD_SPI_BSP_SPI
FSDev_SD_ChkSumCalc_7Bit
FS_OS_Dly_ms
FSDev_SD_ClrInfo
FSDev_SD_ParseCID
FSDev_SD_ParseCSD
Mem_Copy
CPU_SR_Save
CPU_SR_Restore
Mem_HeapAlloc
Str_Cmp_N
FSDev_IO_Ctrl

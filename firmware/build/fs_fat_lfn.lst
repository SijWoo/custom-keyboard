ARM GAS  /tmp/ccu2ENwm.s 			page 1


   1              		.cpu cortex-m4
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"fs_fat_lfn.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.text.FS_FAT_LFN_Chk,"ax",%progbits
  18              		.align	1
  19              		.arch armv7e-m
  20              		.syntax unified
  21              		.thumb
  22              		.thumb_func
  23              		.fpu fpv4-sp-d16
  25              	FS_FAT_LFN_Chk:
  26              	.LVL0:
  27              	.LFB5:
  28              		.file 1 "rtos/uC-FS/FAT/fs_fat_lfn.c"
   1:rtos/uC-FS/FAT/fs_fat_lfn.c **** /*
   2:rtos/uC-FS/FAT/fs_fat_lfn.c **** ***************************************************************************************************
   3:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                                                uC/FS
   4:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                                      The Embedded File System
   5:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
   6:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                         (c) Copyright 2008-2019; Silicon Laboratories Inc.,
   7:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                                400 W. Cesar Chavez, Austin, TX 78701
   8:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
   9:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                   All rights reserved. Protected by international copyright laws.
  10:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
  11:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                  Your use of this software is subject to your acceptance of the terms
  12:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                  of a Silicon Labs Micrium software license, which can be obtained by
  13:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                  contacting info@micrium.com. If you do not agree to the terms of this
  14:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                  license, you may not use this software.
  15:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
  16:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                  Please help us continue to provide the Embedded community with the finest
  17:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                  software available. Your honesty is greatly appreciated.
  18:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
  19:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                    You can find our product's documentation at: doc.micrium.com
  20:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
  21:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                          For more information visit us at: www.micrium.com
  22:rtos/uC-FS/FAT/fs_fat_lfn.c **** ***************************************************************************************************
  23:rtos/uC-FS/FAT/fs_fat_lfn.c **** */
  24:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
  25:rtos/uC-FS/FAT/fs_fat_lfn.c **** /*
  26:rtos/uC-FS/FAT/fs_fat_lfn.c **** ***************************************************************************************************
  27:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
  28:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                                     FILE SYSTEM FAT MANAGEMENT
  29:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
  30:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                                       LONG FILE NAME SUPPORT
ARM GAS  /tmp/ccu2ENwm.s 			page 2


  31:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
  32:rtos/uC-FS/FAT/fs_fat_lfn.c **** * Filename : fs_fat_lfn.c
  33:rtos/uC-FS/FAT/fs_fat_lfn.c **** * Version  : v4.07.06
  34:rtos/uC-FS/FAT/fs_fat_lfn.c **** ***************************************************************************************************
  35:rtos/uC-FS/FAT/fs_fat_lfn.c **** */
  36:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
  37:rtos/uC-FS/FAT/fs_fat_lfn.c **** /*
  38:rtos/uC-FS/FAT/fs_fat_lfn.c **** ***************************************************************************************************
  39:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                                               MODULE
  40:rtos/uC-FS/FAT/fs_fat_lfn.c **** ***************************************************************************************************
  41:rtos/uC-FS/FAT/fs_fat_lfn.c **** */
  42:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
  43:rtos/uC-FS/FAT/fs_fat_lfn.c **** #define  MICRIUM_SOURCE
  44:rtos/uC-FS/FAT/fs_fat_lfn.c **** #define  FS_FAT_LFN_MODULE
  45:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
  46:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
  47:rtos/uC-FS/FAT/fs_fat_lfn.c **** /*
  48:rtos/uC-FS/FAT/fs_fat_lfn.c **** ***************************************************************************************************
  49:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                                            INCLUDE FILES
  50:rtos/uC-FS/FAT/fs_fat_lfn.c **** ***************************************************************************************************
  51:rtos/uC-FS/FAT/fs_fat_lfn.c **** */
  52:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
  53:rtos/uC-FS/FAT/fs_fat_lfn.c **** #include  <lib_mem.h>
  54:rtos/uC-FS/FAT/fs_fat_lfn.c **** #include  "../Source/fs.h"
  55:rtos/uC-FS/FAT/fs_fat_lfn.c **** #include  "../Source/fs_buf.h"
  56:rtos/uC-FS/FAT/fs_fat_lfn.c **** #include  "../Source/fs_cfg_fs.h"
  57:rtos/uC-FS/FAT/fs_fat_lfn.c **** #include  "../Source/fs_unicode.h"
  58:rtos/uC-FS/FAT/fs_fat_lfn.c **** #include  "../Source/fs_vol.h"
  59:rtos/uC-FS/FAT/fs_fat_lfn.c **** #include  "fs_fat.h"
  60:rtos/uC-FS/FAT/fs_fat_lfn.c **** #include  "fs_fat_journal.h"
  61:rtos/uC-FS/FAT/fs_fat_lfn.c **** #include  "fs_fat_lfn.h"
  62:rtos/uC-FS/FAT/fs_fat_lfn.c **** #include  "fs_fat_sfn.h"
  63:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
  64:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
  65:rtos/uC-FS/FAT/fs_fat_lfn.c **** /*
  66:rtos/uC-FS/FAT/fs_fat_lfn.c **** ***************************************************************************************************
  67:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                                               MODULE
  68:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
  69:rtos/uC-FS/FAT/fs_fat_lfn.c **** * Note(s) : (1) See 'fs_fat_lfn.h  MODULE'.
  70:rtos/uC-FS/FAT/fs_fat_lfn.c **** ***************************************************************************************************
  71:rtos/uC-FS/FAT/fs_fat_lfn.c **** */
  72:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
  73:rtos/uC-FS/FAT/fs_fat_lfn.c **** #ifdef   FS_FAT_LFN_MODULE_PRESENT                              /* See Note #1.                    
  74:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
  75:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
  76:rtos/uC-FS/FAT/fs_fat_lfn.c **** /*
  77:rtos/uC-FS/FAT/fs_fat_lfn.c **** ***************************************************************************************************
  78:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                                            LOCAL DEFINES
  79:rtos/uC-FS/FAT/fs_fat_lfn.c **** ***************************************************************************************************
  80:rtos/uC-FS/FAT/fs_fat_lfn.c **** */
  81:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
  82:rtos/uC-FS/FAT/fs_fat_lfn.c **** #define  FS_FAT_DIRENT_LFN_NBR_CHARS                      13u
  83:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
  84:rtos/uC-FS/FAT/fs_fat_lfn.c **** #define  FS_FAT_LFN_CHAR_EMPTY_HI                       0xFFu
  85:rtos/uC-FS/FAT/fs_fat_lfn.c **** #define  FS_FAT_LFN_CHAR_EMPTY_LO                       0xFFu
  86:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
  87:rtos/uC-FS/FAT/fs_fat_lfn.c **** #define  FS_FAT_LFN_CHAR_FINAL_HI                       0x00u
ARM GAS  /tmp/ccu2ENwm.s 			page 3


  88:rtos/uC-FS/FAT/fs_fat_lfn.c **** #define  FS_FAT_LFN_CHAR_FINAL_LO                       0x00u
  89:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
  90:rtos/uC-FS/FAT/fs_fat_lfn.c **** #define  FS_FAT_LFN_OFF_SEQNUMBER                          0u
  91:rtos/uC-FS/FAT/fs_fat_lfn.c **** #define  FS_FAT_LFN_OFF_NAMEFIRST                          1u
  92:rtos/uC-FS/FAT/fs_fat_lfn.c **** #define  FS_FAT_LFN_OFF_ATTR                              11u
  93:rtos/uC-FS/FAT/fs_fat_lfn.c **** #define  FS_FAT_LFN_OFF_RES                               12u
  94:rtos/uC-FS/FAT/fs_fat_lfn.c **** #define  FS_FAT_LFN_OFF_CHKSUM                            13u
  95:rtos/uC-FS/FAT/fs_fat_lfn.c **** #define  FS_FAT_LFN_OFF_NAMESECOND                        14u
  96:rtos/uC-FS/FAT/fs_fat_lfn.c **** #define  FS_FAT_LFN_OFF_FSTCLUSLO                         26u
  97:rtos/uC-FS/FAT/fs_fat_lfn.c **** #define  FS_FAT_LFN_OFF_NAMETHIRD                         28u
  98:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
  99:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 100:rtos/uC-FS/FAT/fs_fat_lfn.c **** /*
 101:rtos/uC-FS/FAT/fs_fat_lfn.c **** ***************************************************************************************************
 102:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                                          LOCAL DATA TYPES
 103:rtos/uC-FS/FAT/fs_fat_lfn.c **** ***************************************************************************************************
 104:rtos/uC-FS/FAT/fs_fat_lfn.c **** */
 105:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 106:rtos/uC-FS/FAT/fs_fat_lfn.c **** typedef  CPU_INT32U  FS_FAT_SFN_TAIL;
 107:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 108:rtos/uC-FS/FAT/fs_fat_lfn.c **** #if (FS_CFG_UTF8_EN == DEF_ENABLED)
 109:rtos/uC-FS/FAT/fs_fat_lfn.c **** typedef  CPU_WCHAR   FS_FAT_LFN_CHAR;
 110:rtos/uC-FS/FAT/fs_fat_lfn.c **** #else
 111:rtos/uC-FS/FAT/fs_fat_lfn.c **** typedef  CPU_CHAR    FS_FAT_LFN_CHAR;
 112:rtos/uC-FS/FAT/fs_fat_lfn.c **** #endif
 113:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 114:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 115:rtos/uC-FS/FAT/fs_fat_lfn.c **** /*
 116:rtos/uC-FS/FAT/fs_fat_lfn.c **** ***************************************************************************************************
 117:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                                           LOCAL CONSTANTS
 118:rtos/uC-FS/FAT/fs_fat_lfn.c **** ***************************************************************************************************
 119:rtos/uC-FS/FAT/fs_fat_lfn.c **** */
 120:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 121:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 122:rtos/uC-FS/FAT/fs_fat_lfn.c **** /*
 123:rtos/uC-FS/FAT/fs_fat_lfn.c **** ***************************************************************************************************
 124:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                                            LOCAL TABLES
 125:rtos/uC-FS/FAT/fs_fat_lfn.c **** ***************************************************************************************************
 126:rtos/uC-FS/FAT/fs_fat_lfn.c **** */
 127:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 128:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 129:rtos/uC-FS/FAT/fs_fat_lfn.c **** /*
 130:rtos/uC-FS/FAT/fs_fat_lfn.c **** ***************************************************************************************************
 131:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                                       LOCAL GLOBAL VARIABLES
 132:rtos/uC-FS/FAT/fs_fat_lfn.c **** ***************************************************************************************************
 133:rtos/uC-FS/FAT/fs_fat_lfn.c **** */
 134:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 135:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 136:rtos/uC-FS/FAT/fs_fat_lfn.c **** /*
 137:rtos/uC-FS/FAT/fs_fat_lfn.c **** ***************************************************************************************************
 138:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                                           LOCAL MACRO'S
 139:rtos/uC-FS/FAT/fs_fat_lfn.c **** ***************************************************************************************************
 140:rtos/uC-FS/FAT/fs_fat_lfn.c **** */
 141:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 142:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 143:rtos/uC-FS/FAT/fs_fat_lfn.c **** /*
 144:rtos/uC-FS/FAT/fs_fat_lfn.c **** ***************************************************************************************************
ARM GAS  /tmp/ccu2ENwm.s 			page 4


 145:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                                      LOCAL FUNCTION PROTOTYPES
 146:rtos/uC-FS/FAT/fs_fat_lfn.c **** ***************************************************************************************************
 147:rtos/uC-FS/FAT/fs_fat_lfn.c **** */
 148:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                                         /* ------- 
 149:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                                         /* Create L
 150:rtos/uC-FS/FAT/fs_fat_lfn.c **** #if (FS_CFG_RD_ONLY_EN == DEF_DISABLED)
 151:rtos/uC-FS/FAT/fs_fat_lfn.c **** static  void               FS_FAT_LFN_DirEntryCreate          (FS_VOL                 *p_vol,
 152:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                FS_BUF                 *p_buf,
 153:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                CPU_CHAR               *name,
 154:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                CPU_BOOLEAN             is_dir,
 155:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                FS_FAT_CLUS_NBR         file_first_c
 156:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                FS_FAT_DIR_POS         *p_dir_start_
 157:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                FS_FAT_DIR_POS         *p_dir_end_po
 158:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                FS_ERR                 *p_err);
 159:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 160:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                                         /* Create L
 161:rtos/uC-FS/FAT/fs_fat_lfn.c **** static  void               FS_FAT_LFN_DirEntryCreateAt        (FS_VOL                 *p_vol,
 162:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                FS_BUF                 *p_buf,
 163:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                CPU_CHAR               *name,
 164:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                FS_FILE_NAME_LEN        name_len,
 165:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                CPU_INT32U              name_8_3[],
 166:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                CPU_BOOLEAN             is_dir,
 167:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                FS_FAT_CLUS_NBR         file_first_c
 168:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                FS_FAT_DIR_POS         *p_dir_pos,
 169:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                FS_FAT_DIR_POS         *p_dir_end_po
 170:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                FS_ERR                 *p_err);
 171:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 172:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                                         /* Delete L
 173:rtos/uC-FS/FAT/fs_fat_lfn.c **** static  void               FS_FAT_LFN_DirEntryDel             (FS_VOL                 *p_vol,
 174:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                FS_BUF                 *p_buf,
 175:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                FS_FAT_DIR_POS         *p_dir_start_
 176:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                FS_FAT_DIR_POS         *p_dir_end_po
 177:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                FS_ERR                 *p_err);
 178:rtos/uC-FS/FAT/fs_fat_lfn.c **** #endif
 179:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                                         /* Srch dir
 180:rtos/uC-FS/FAT/fs_fat_lfn.c **** static  void               FS_FAT_LFN_DirEntryFind            (FS_VOL                 *p_vol,
 181:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                FS_BUF                 *p_buf,
 182:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                CPU_CHAR               *name,
 183:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                CPU_CHAR              **p_name_next,
 184:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                FS_FAT_DIR_POS         *p_dir_start_
 185:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                FS_FAT_DIR_POS         *p_dir_end_po
 186:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                FS_ERR                 *p_err);
 187:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 188:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                                         /* Get next
 189:rtos/uC-FS/FAT/fs_fat_lfn.c **** static  void               FS_FAT_LFN_NextDirEntryGet         (FS_VOL                 *p_vol,
 190:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                FS_BUF                 *p_buf,
 191:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                void                   *name,
 192:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                FS_FAT_DIR_POS         *p_dir_start_
 193:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                FS_FAT_DIR_POS         *p_dir_end_po
 194:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                FS_ERR                 *p_err);
 195:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 196:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 197:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                                         /* --------
 198:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                                         /* Check na
 199:rtos/uC-FS/FAT/fs_fat_lfn.c **** static  void               FS_FAT_LFN_Chk                     (CPU_CHAR               *name,
 200:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                FS_FILE_NAME_LEN       *p_name_len,
 201:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                FS_FILE_NAME_LEN       *p_name_len_o
ARM GAS  /tmp/ccu2ENwm.s 			page 5


 202:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                FS_ERR                 *p_err);
 203:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 204:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                                         /* Calculat
 205:rtos/uC-FS/FAT/fs_fat_lfn.c **** static  CPU_INT08U         FS_FAT_LFN_ChkSumCalc              (void                   *name_8_3);
 206:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 207:rtos/uC-FS/FAT/fs_fat_lfn.c **** #if (FS_CFG_RD_ONLY_EN == DEF_DISABLED)                                                 /* Format d
 208:rtos/uC-FS/FAT/fs_fat_lfn.c **** static  void               FS_FAT_LFN_DirEntryFmt             (void                   *p_dir_entry,
 209:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                FS_FAT_LFN_CHAR        *name,
 210:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                FS_FILE_NAME_LEN        char_cnt,
 211:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                CPU_INT08U              chk_sum,
 212:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                FS_FAT_DIR_ENTRY_QTY    lfn_nbr,
 213:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                CPU_BOOLEAN             is_final);
 214:rtos/uC-FS/FAT/fs_fat_lfn.c **** #endif
 215:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 216:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                                         /* Find dir
 217:rtos/uC-FS/FAT/fs_fat_lfn.c **** #if (FS_CFG_RD_ONLY_EN == DEF_DISABLED)
 218:rtos/uC-FS/FAT/fs_fat_lfn.c **** static  void               FS_FAT_LFN_DirEntryPlace           (FS_VOL                 *p_vol,
 219:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                FS_BUF                 *p_buf,
 220:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                FS_FAT_DIR_ENTRY_QTY    dir_entry_cn
 221:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                FS_FAT_SEC_NBR          dir_start_se
 222:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                FS_FAT_DIR_POS         *p_dir_end_po
 223:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                FS_ERR                 *p_err);
 224:rtos/uC-FS/FAT/fs_fat_lfn.c **** #endif
 225:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 226:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                                         /* Find len
 227:rtos/uC-FS/FAT/fs_fat_lfn.c **** static  FS_FILE_NAME_LEN   FS_FAT_LFN_Len                     (void                   *p_dir_entry)
 228:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 229:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                                         /* Parse LF
 230:rtos/uC-FS/FAT/fs_fat_lfn.c **** static  void               FS_FAT_LFN_Parse                   (void                   *p_dir_entry,
 231:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                FS_FAT_LFN_CHAR        *name,
 232:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                FS_FILE_NAME_LEN        name_len);
 233:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 234:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                                         /* Parse fu
 235:rtos/uC-FS/FAT/fs_fat_lfn.c **** static  void               FS_FAT_LFN_ParseFull               (void                   *p_dir_entry,
 236:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                FS_FAT_LFN_CHAR        *name);
 237:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 238:rtos/uC-FS/FAT/fs_fat_lfn.c **** #if (FS_CFG_RD_ONLY_EN == DEF_DISABLED)                                                 /* Allocate
 239:rtos/uC-FS/FAT/fs_fat_lfn.c **** static  void               FS_FAT_LFN_SFN_Alloc               (FS_VOL                 *p_vol,
 240:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                FS_BUF                 *p_buf,
 241:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                CPU_CHAR               *name,
 242:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                CPU_INT32U              name_8_3[],
 243:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                FS_FAT_SEC_NBR          dir_sec,
 244:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                FS_ERR                 *p_err);
 245:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 246:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                                         /* Format S
 247:rtos/uC-FS/FAT/fs_fat_lfn.c **** static  FS_FILE_NAME_LEN   FS_FAT_LFN_SFN_Fmt                 (CPU_CHAR               *name,
 248:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                CPU_INT32U              name_8_3[],
 249:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                FS_ERR                 *p_err);
 250:rtos/uC-FS/FAT/fs_fat_lfn.c **** #endif
 251:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 252:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                                         /* Parse SF
 253:rtos/uC-FS/FAT/fs_fat_lfn.c **** static  void               FS_FAT_LFN_SFN_Parse               (void                   *p_dir_entry,
 254:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                FS_FAT_LFN_CHAR        *name,
 255:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                CPU_BOOLEAN             name_lower_c
 256:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                CPU_BOOLEAN             ext_lower_ca
 257:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 258:rtos/uC-FS/FAT/fs_fat_lfn.c **** #if (FS_CFG_RD_ONLY_EN == DEF_DISABLED)                                                 /* Format S
ARM GAS  /tmp/ccu2ENwm.s 			page 6


 259:rtos/uC-FS/FAT/fs_fat_lfn.c **** static  void               FS_FAT_LFN_SFN_FmtTail             (CPU_INT32U              name_8_3[],
 260:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                FS_FILE_NAME_LEN        char_cnt,
 261:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                FS_FAT_SFN_TAIL         tail_nbr);
 262:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 263:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                                         /* Find max
 264:rtos/uC-FS/FAT/fs_fat_lfn.c **** static  FS_FAT_SFN_TAIL    FS_FAT_LFN_SFN_DirEntryFindMax     (FS_VOL                 *p_vol,
 265:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                FS_BUF                 *p_buf,
 266:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                CPU_INT32U              name_8_3[],
 267:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                FS_FAT_SEC_NBR          dir_start_se
 268:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                FS_ERR                 *p_err);
 269:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 270:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                                         /* Find max
 271:rtos/uC-FS/FAT/fs_fat_lfn.c **** static  FS_FAT_SFN_TAIL    FS_FAT_LFN_SFN_DirEntryFindMaxInSec(void                   *p_temp,
 272:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                FS_SEC_SIZE             sec_size,
 273:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                CPU_INT32U              name_8_3[],
 274:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                FS_ERR                 *p_err);
 275:rtos/uC-FS/FAT/fs_fat_lfn.c **** #endif
 276:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 277:rtos/uC-FS/FAT/fs_fat_lfn.c **** static  FS_FILE_NAME_LEN   FS_FAT_LFN_StrLen_N                (FS_FAT_LFN_CHAR        *p_str,
 278:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                FS_FILE_NAME_LEN        len_max);
 279:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 280:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 281:rtos/uC-FS/FAT/fs_fat_lfn.c **** static  CPU_INT32S         FS_FAT_LFN_StrCmpIgnoreCase_N      (CPU_CHAR               *p1_str,
 282:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                FS_FAT_LFN_CHAR        *p2_str,
 283:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                FS_FILE_NAME_LEN        len_max);
 284:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 285:rtos/uC-FS/FAT/fs_fat_lfn.c **** #if (FS_FAT_CFG_VOL_CHK_EN == DEF_ENABLED)                                              /* Check di
 286:rtos/uC-FS/FAT/fs_fat_lfn.c **** static  CPU_INT08U         FS_FAT_LFN_DirEntriesChk           (FS_VOL                 *p_vol,
 287:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                FS_BUF                 *p_buf,
 288:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                FS_FAT_DIR_POS         *p_dir_start_
 289:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                FS_FAT_DIR_POS         *p_dir_end_po
 290:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                FS_ERR                 *p_err);
 291:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 292:rtos/uC-FS/FAT/fs_fat_lfn.c **** #if (FS_CFG_RD_ONLY_EN == DEF_DISABLED)                                                 /* Delete d
 293:rtos/uC-FS/FAT/fs_fat_lfn.c **** static  void               FS_FAT_LFN_DirEntryFree            (FS_VOL                 *p_vol,
 294:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                FS_BUF                 *p_buf,
 295:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                FS_FAT_DIR_POS         *p_dir_start_
 296:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                FS_ERR                 *p_err);
 297:rtos/uC-FS/FAT/fs_fat_lfn.c **** #endif
 298:rtos/uC-FS/FAT/fs_fat_lfn.c **** #endif
 299:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 300:rtos/uC-FS/FAT/fs_fat_lfn.c **** /*
 301:rtos/uC-FS/FAT/fs_fat_lfn.c **** ***************************************************************************************************
 302:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                                         INTERFACE STRUCTURE
 303:rtos/uC-FS/FAT/fs_fat_lfn.c **** ***************************************************************************************************
 304:rtos/uC-FS/FAT/fs_fat_lfn.c **** */
 305:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 306:rtos/uC-FS/FAT/fs_fat_lfn.c **** const  FS_FAT_FN_API  FS_FAT_LFN_API = {
 307:rtos/uC-FS/FAT/fs_fat_lfn.c **** #if (FS_CFG_RD_ONLY_EN == DEF_DISABLED)
 308:rtos/uC-FS/FAT/fs_fat_lfn.c ****     FS_FAT_LFN_DirEntryCreate,
 309:rtos/uC-FS/FAT/fs_fat_lfn.c ****     FS_FAT_LFN_DirEntryCreateAt,
 310:rtos/uC-FS/FAT/fs_fat_lfn.c ****     FS_FAT_LFN_DirEntryDel,
 311:rtos/uC-FS/FAT/fs_fat_lfn.c **** #endif
 312:rtos/uC-FS/FAT/fs_fat_lfn.c ****     FS_FAT_LFN_DirEntryFind,
 313:rtos/uC-FS/FAT/fs_fat_lfn.c ****     FS_FAT_LFN_NextDirEntryGet,
 314:rtos/uC-FS/FAT/fs_fat_lfn.c **** };
 315:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
ARM GAS  /tmp/ccu2ENwm.s 			page 7


 316:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 317:rtos/uC-FS/FAT/fs_fat_lfn.c **** /*
 318:rtos/uC-FS/FAT/fs_fat_lfn.c **** ***************************************************************************************************
 319:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                                     LOCAL CONFIGURATION ERRORS
 320:rtos/uC-FS/FAT/fs_fat_lfn.c **** ***************************************************************************************************
 321:rtos/uC-FS/FAT/fs_fat_lfn.c **** */
 322:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 323:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 324:rtos/uC-FS/FAT/fs_fat_lfn.c **** /*
 325:rtos/uC-FS/FAT/fs_fat_lfn.c **** ***************************************************************************************************
 326:rtos/uC-FS/FAT/fs_fat_lfn.c **** ***************************************************************************************************
 327:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                                         INTERNAL FUNCTIONS
 328:rtos/uC-FS/FAT/fs_fat_lfn.c **** ***************************************************************************************************
 329:rtos/uC-FS/FAT/fs_fat_lfn.c **** ***************************************************************************************************
 330:rtos/uC-FS/FAT/fs_fat_lfn.c **** */
 331:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 332:rtos/uC-FS/FAT/fs_fat_lfn.c **** /*
 333:rtos/uC-FS/FAT/fs_fat_lfn.c **** ***************************************************************************************************
 334:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                                         FS_FAT_LFN_DirChk()
 335:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
 336:rtos/uC-FS/FAT/fs_fat_lfn.c **** * Description : Check entries in directory.
 337:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
 338:rtos/uC-FS/FAT/fs_fat_lfn.c **** * Argument(s) : p_vol       Pointer to volume.
 339:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
 340:rtos/uC-FS/FAT/fs_fat_lfn.c **** *               p_buf       Pointer to temporary buffer.
 341:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
 342:rtos/uC-FS/FAT/fs_fat_lfn.c **** *               dir_sec     Directory sector in which entries should be checked.
 343:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
 344:rtos/uC-FS/FAT/fs_fat_lfn.c **** *               p_err       Pointer to variable that will receive the return error code from this f
 345:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
 346:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                               FS_ERR_NONE    Directory checked.
 347:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                               FS_ERR_DEV     Device access error.
 348:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
 349:rtos/uC-FS/FAT/fs_fat_lfn.c **** * Return(s)   : none.
 350:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
 351:rtos/uC-FS/FAT/fs_fat_lfn.c **** * Note(s)     : none.
 352:rtos/uC-FS/FAT/fs_fat_lfn.c **** ***************************************************************************************************
 353:rtos/uC-FS/FAT/fs_fat_lfn.c **** */
 354:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 355:rtos/uC-FS/FAT/fs_fat_lfn.c **** #if (FS_FAT_CFG_VOL_CHK_EN == DEF_ENABLED)
 356:rtos/uC-FS/FAT/fs_fat_lfn.c **** void  FS_FAT_LFN_DirChk (FS_VOL          *p_vol,
 357:rtos/uC-FS/FAT/fs_fat_lfn.c ****                          FS_BUF          *p_buf,
 358:rtos/uC-FS/FAT/fs_fat_lfn.c ****                          FS_FAT_SEC_NBR   dir_sec,
 359:rtos/uC-FS/FAT/fs_fat_lfn.c ****                          FS_ERR          *p_err)
 360:rtos/uC-FS/FAT/fs_fat_lfn.c **** {
 361:rtos/uC-FS/FAT/fs_fat_lfn.c ****     FS_FAT_DIR_POS   dir_cur_pos;
 362:rtos/uC-FS/FAT/fs_fat_lfn.c ****     FS_FAT_DIR_POS   dir_end_pos;
 363:rtos/uC-FS/FAT/fs_fat_lfn.c ****     CPU_INT08U       entry_cnt;
 364:rtos/uC-FS/FAT/fs_fat_lfn.c **** #if (FS_CFG_RD_ONLY_EN == DEF_DISABLED)
 365:rtos/uC-FS/FAT/fs_fat_lfn.c ****     FS_FAT_DATA     *p_fat_data;
 366:rtos/uC-FS/FAT/fs_fat_lfn.c ****     FS_FAT_DIR_POS   dir_free_pos;
 367:rtos/uC-FS/FAT/fs_fat_lfn.c **** #endif
 368:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 369:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 370:rtos/uC-FS/FAT/fs_fat_lfn.c ****     dir_cur_pos.SecNbr =  dir_sec;
 371:rtos/uC-FS/FAT/fs_fat_lfn.c ****     dir_cur_pos.SecPos =  0u;
 372:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
ARM GAS  /tmp/ccu2ENwm.s 			page 8


 373:rtos/uC-FS/FAT/fs_fat_lfn.c ****     do {
 374:rtos/uC-FS/FAT/fs_fat_lfn.c ****         entry_cnt = FS_FAT_LFN_DirEntriesChk( p_vol,
 375:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                               p_buf,
 376:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                              &dir_cur_pos,
 377:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                              &dir_end_pos,
 378:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                               p_err);
 379:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 380:rtos/uC-FS/FAT/fs_fat_lfn.c ****         switch (*p_err) {
 381:rtos/uC-FS/FAT/fs_fat_lfn.c ****             case FS_ERR_NONE:
 382:rtos/uC-FS/FAT/fs_fat_lfn.c ****                  return;
 383:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 384:rtos/uC-FS/FAT/fs_fat_lfn.c ****             case FS_ERR_DEV:
 385:rtos/uC-FS/FAT/fs_fat_lfn.c ****                  return;
 386:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 387:rtos/uC-FS/FAT/fs_fat_lfn.c ****             case FS_ERR_SYS_LFN_ORPHANED:
 388:rtos/uC-FS/FAT/fs_fat_lfn.c ****                  FS_TRACE_DBG(("FS_FAT_LFN_DirChk(): Orphaned LFN entries: %d entries starting at %
 389:rtos/uC-FS/FAT/fs_fat_lfn.c **** #if (FS_CFG_RD_ONLY_EN == DEF_DISABLED)
 390:rtos/uC-FS/FAT/fs_fat_lfn.c ****                  p_fat_data         = (FS_FAT_DATA *)p_vol->DataPtr;
 391:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 392:rtos/uC-FS/FAT/fs_fat_lfn.c ****                  dir_free_pos.SecNbr = dir_end_pos.SecNbr;
 393:rtos/uC-FS/FAT/fs_fat_lfn.c ****                  dir_free_pos.SecPos = dir_end_pos.SecPos;
 394:rtos/uC-FS/FAT/fs_fat_lfn.c ****                  while (entry_cnt > 0) {
 395:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                 /* Free dir entry.                 
 396:rtos/uC-FS/FAT/fs_fat_lfn.c ****                      FS_FAT_LFN_DirEntryFree( p_vol,
 397:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                               p_buf,
 398:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                              &dir_free_pos,
 399:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                               p_err);
 400:rtos/uC-FS/FAT/fs_fat_lfn.c ****                      if (*p_err != FS_ERR_NONE) {
 401:rtos/uC-FS/FAT/fs_fat_lfn.c ****                          return;
 402:rtos/uC-FS/FAT/fs_fat_lfn.c ****                      }
 403:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 404:rtos/uC-FS/FAT/fs_fat_lfn.c ****                      entry_cnt--;
 405:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 406:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                 /* Rd next dir sec.                
 407:rtos/uC-FS/FAT/fs_fat_lfn.c ****                      if (entry_cnt > 0) {
 408:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                 /* Move to next entry.             
 409:rtos/uC-FS/FAT/fs_fat_lfn.c ****                          dir_free_pos.SecPos += FS_FAT_SIZE_DIR_ENTRY;
 410:rtos/uC-FS/FAT/fs_fat_lfn.c ****                          if (dir_free_pos.SecPos == p_fat_data->SecSize) {
 411:rtos/uC-FS/FAT/fs_fat_lfn.c ****                              dir_free_pos.SecNbr =  FS_FAT_SecNextGet(p_vol,
 412:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                       p_buf,
 413:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                       dir_free_pos.SecNbr,
 414:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                       p_err);
 415:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 416:rtos/uC-FS/FAT/fs_fat_lfn.c ****                              switch (*p_err) {
 417:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                  case FS_ERR_NONE:
 418:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                       break;
 419:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 420:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                  case FS_ERR_SYS_CLUS_CHAIN_END:
 421:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                  case FS_ERR_SYS_CLUS_INVALID:
 422:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                      *p_err = FS_ERR_NONE;
 423:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                       return;
 424:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 425:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                  case FS_ERR_DEV:
 426:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                  default:
 427:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                       return;
 428:rtos/uC-FS/FAT/fs_fat_lfn.c ****                              }
 429:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
ARM GAS  /tmp/ccu2ENwm.s 			page 9


 430:rtos/uC-FS/FAT/fs_fat_lfn.c ****                              dir_free_pos.SecPos = 0u;
 431:rtos/uC-FS/FAT/fs_fat_lfn.c ****                          }
 432:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 433:rtos/uC-FS/FAT/fs_fat_lfn.c ****                      }
 434:rtos/uC-FS/FAT/fs_fat_lfn.c ****                  }
 435:rtos/uC-FS/FAT/fs_fat_lfn.c **** #endif
 436:rtos/uC-FS/FAT/fs_fat_lfn.c ****                  break;
 437:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 438:rtos/uC-FS/FAT/fs_fat_lfn.c ****             default:
 439:rtos/uC-FS/FAT/fs_fat_lfn.c ****                  FS_TRACE_DBG(("FS_FAT_LFN_DirChk(): Default case reached.\r\n"));
 440:rtos/uC-FS/FAT/fs_fat_lfn.c ****                  return;
 441:rtos/uC-FS/FAT/fs_fat_lfn.c ****         }
 442:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 443:rtos/uC-FS/FAT/fs_fat_lfn.c ****         dir_cur_pos.SecNbr = dir_end_pos.SecNbr;                /* Start checking at del'd dir entr
 444:rtos/uC-FS/FAT/fs_fat_lfn.c ****         dir_cur_pos.SecPos = dir_end_pos.SecPos;
 445:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 446:rtos/uC-FS/FAT/fs_fat_lfn.c ****     } while (entry_cnt != 0);                                   /* While invalid entries found.    
 447:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 448:rtos/uC-FS/FAT/fs_fat_lfn.c ****    *p_err = FS_ERR_NONE;
 449:rtos/uC-FS/FAT/fs_fat_lfn.c **** }
 450:rtos/uC-FS/FAT/fs_fat_lfn.c **** #endif
 451:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 452:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 453:rtos/uC-FS/FAT/fs_fat_lfn.c **** /*
 454:rtos/uC-FS/FAT/fs_fat_lfn.c **** ***************************************************************************************************
 455:rtos/uC-FS/FAT/fs_fat_lfn.c **** ***************************************************************************************************
 456:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                                       FILE NAME API FUNCTIONS
 457:rtos/uC-FS/FAT/fs_fat_lfn.c **** ***************************************************************************************************
 458:rtos/uC-FS/FAT/fs_fat_lfn.c **** ***************************************************************************************************
 459:rtos/uC-FS/FAT/fs_fat_lfn.c **** */
 460:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 461:rtos/uC-FS/FAT/fs_fat_lfn.c **** /*
 462:rtos/uC-FS/FAT/fs_fat_lfn.c **** ***************************************************************************************************
 463:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                                     FS_FAT_LFN_DirEntryCreate()
 464:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
 465:rtos/uC-FS/FAT/fs_fat_lfn.c **** * Description : Create LFN directory entry.
 466:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
 467:rtos/uC-FS/FAT/fs_fat_lfn.c **** * Argument(s) : p_vol               Pointer to volume.
 468:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
 469:rtos/uC-FS/FAT/fs_fat_lfn.c **** *               p_buf               Pointer to temporary buffer.
 470:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
 471:rtos/uC-FS/FAT/fs_fat_lfn.c **** *               name                Name of the entry.
 472:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
 473:rtos/uC-FS/FAT/fs_fat_lfn.c **** *               is_dir              Indicates whether directory entry is entry for directory :
 474:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
 475:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                                       DEF_YES, entry is for directory.
 476:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                                       DEF_NO,  entry is for file.
 477:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
 478:rtos/uC-FS/FAT/fs_fat_lfn.c **** *               file_first_clus     First cluster in entry.
 479:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
 480:rtos/uC-FS/FAT/fs_fat_lfn.c **** *               p_dir_start_pos     Pointer to directory position at which entry should be created;
 481:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                                   variable that will receive the directory position at which the 
 482:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                                   entry_cnt (the first LFN entry or the SFN entry) was created.
 483:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
 484:rtos/uC-FS/FAT/fs_fat_lfn.c **** *               p_dir_end_pos       Pointer to variable that will receive the directory position at
 485:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                                   the final entry (the SFN entry) was created.
 486:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
ARM GAS  /tmp/ccu2ENwm.s 			page 10


 487:rtos/uC-FS/FAT/fs_fat_lfn.c **** *               p_err               Pointer to variable that will receive the return error code fro
 488:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
 489:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                                       FS_ERR_NONE                 Directory entry created.
 490:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                                       FS_ERR_DEV                  Device access error.
 491:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                                       FS_ERR_DIR_FULL             Directory is full (space could 
 492:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                                       FS_ERR_DEV_FULL             Device is full (space could not
 493:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                                       FS_ERR_ENTRY_CORRUPT        File system entry is corrupt.
 494:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
 495:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                                                                   --- RETURNED BY FS_FAT_LFN_SFN_
 496:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                                       FS_ERR_NAME_INVALID         LFN name invalid.
 497:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                                       FS_ERR_SYS_SFN_NOT_AVAIL    No SFN available.
 498:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
 499:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                                                                   ----- RETURNED BY FS_FAT_Journa
 500:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                                       FS_ERR_BUF_NONE_AVAIL       Buffer not available.
 501:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                                       FS_ERR_JOURNAL_FULL         Journal full.
 502:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
 503:rtos/uC-FS/FAT/fs_fat_lfn.c **** * Return(s)   : none.
 504:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
 505:rtos/uC-FS/FAT/fs_fat_lfn.c **** * Note(s)     : (1) ???? If name is a valid SFN, create only SFN.
 506:rtos/uC-FS/FAT/fs_fat_lfn.c **** ***************************************************************************************************
 507:rtos/uC-FS/FAT/fs_fat_lfn.c **** */
 508:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 509:rtos/uC-FS/FAT/fs_fat_lfn.c **** #if (FS_CFG_RD_ONLY_EN == DEF_DISABLED)
 510:rtos/uC-FS/FAT/fs_fat_lfn.c **** static  void  FS_FAT_LFN_DirEntryCreate (FS_VOL           *p_vol,
 511:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                          FS_BUF           *p_buf,
 512:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                          CPU_CHAR         *name,
 513:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                          CPU_BOOLEAN       is_dir,
 514:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                          FS_FAT_CLUS_NBR   file_first_clus,
 515:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                          FS_FAT_DIR_POS   *p_dir_start_pos,
 516:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                          FS_FAT_DIR_POS   *p_dir_end_pos,
 517:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                          FS_ERR           *p_err)
 518:rtos/uC-FS/FAT/fs_fat_lfn.c **** {
 519:rtos/uC-FS/FAT/fs_fat_lfn.c ****     FS_FAT_DIR_POS        dir_cur_pos;
 520:rtos/uC-FS/FAT/fs_fat_lfn.c ****     FS_FAT_DIR_ENTRY_QTY  dir_entry_cnt;
 521:rtos/uC-FS/FAT/fs_fat_lfn.c ****     CPU_BOOLEAN           ext_lower_case;
 522:rtos/uC-FS/FAT/fs_fat_lfn.c ****     CPU_BOOLEAN           formed;
 523:rtos/uC-FS/FAT/fs_fat_lfn.c ****     CPU_INT32U            name_8_3[4];
 524:rtos/uC-FS/FAT/fs_fat_lfn.c ****     FS_FILE_NAME_LEN      name_len;
 525:rtos/uC-FS/FAT/fs_fat_lfn.c ****     FS_FILE_NAME_LEN      name_len_octet;
 526:rtos/uC-FS/FAT/fs_fat_lfn.c ****     CPU_BOOLEAN           name_lower_case;
 527:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 528:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 529:rtos/uC-FS/FAT/fs_fat_lfn.c ****     p_dir_end_pos->SecNbr = 0u;                                 /* Dflt dir end pos.               
 530:rtos/uC-FS/FAT/fs_fat_lfn.c ****     p_dir_end_pos->SecPos = 0u;
 531:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 532:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 533:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 534:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                 /* ----------------- FIND DIR ENTRI
 535:rtos/uC-FS/FAT/fs_fat_lfn.c ****     FS_FAT_LFN_Chk( name,                                       /* Chk whether valid LFN.          
 536:rtos/uC-FS/FAT/fs_fat_lfn.c ****                    &name_len,
 537:rtos/uC-FS/FAT/fs_fat_lfn.c ****                    &name_len_octet,
 538:rtos/uC-FS/FAT/fs_fat_lfn.c ****                     p_err);
 539:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 540:rtos/uC-FS/FAT/fs_fat_lfn.c ****     if (*p_err != FS_ERR_NONE) {
 541:rtos/uC-FS/FAT/fs_fat_lfn.c ****          return;
 542:rtos/uC-FS/FAT/fs_fat_lfn.c ****     }
 543:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
ARM GAS  /tmp/ccu2ENwm.s 			page 11


 544:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                 /* Calc nbr of LFN dir entries.    
 545:rtos/uC-FS/FAT/fs_fat_lfn.c ****     dir_entry_cnt = (FS_FAT_DIR_ENTRY_QTY)((name_len + FS_FAT_DIRENT_LFN_NBR_CHARS - 1u) / FS_FAT_D
 546:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 547:rtos/uC-FS/FAT/fs_fat_lfn.c ****     FS_FAT_LFN_DirEntryPlace( p_vol,                            /* Find consecutive dir entries for
 548:rtos/uC-FS/FAT/fs_fat_lfn.c ****                               p_buf,
 549:rtos/uC-FS/FAT/fs_fat_lfn.c ****                              (dir_entry_cnt + 1u),
 550:rtos/uC-FS/FAT/fs_fat_lfn.c ****                               p_dir_start_pos->SecNbr,
 551:rtos/uC-FS/FAT/fs_fat_lfn.c ****                              &dir_cur_pos,
 552:rtos/uC-FS/FAT/fs_fat_lfn.c ****                               p_err);
 553:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 554:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 555:rtos/uC-FS/FAT/fs_fat_lfn.c ****     switch (*p_err) {
 556:rtos/uC-FS/FAT/fs_fat_lfn.c ****         case FS_ERR_NONE:
 557:rtos/uC-FS/FAT/fs_fat_lfn.c ****              break;
 558:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 559:rtos/uC-FS/FAT/fs_fat_lfn.c ****         case FS_ERR_DEV_FULL:
 560:rtos/uC-FS/FAT/fs_fat_lfn.c ****         case FS_ERR_DIR_FULL:
 561:rtos/uC-FS/FAT/fs_fat_lfn.c ****         case FS_ERR_ENTRY_CORRUPT:
 562:rtos/uC-FS/FAT/fs_fat_lfn.c ****              FS_TRACE_DBG(("FS_FAT_LFN_DirEntryCreate(): No dir entries avail.\r\n"));
 563:rtos/uC-FS/FAT/fs_fat_lfn.c ****              return;
 564:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 565:rtos/uC-FS/FAT/fs_fat_lfn.c ****         case FS_ERR_DEV:
 566:rtos/uC-FS/FAT/fs_fat_lfn.c ****              return;
 567:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 568:rtos/uC-FS/FAT/fs_fat_lfn.c ****         default:
 569:rtos/uC-FS/FAT/fs_fat_lfn.c ****              FS_TRACE_DBG(("FS_FAT_LFN_DirEntryCreate(): Default case reached.\r\n"));
 570:rtos/uC-FS/FAT/fs_fat_lfn.c ****              return;
 571:rtos/uC-FS/FAT/fs_fat_lfn.c ****     }
 572:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 573:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 574:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                 /* --------------------- ALLOC SFN 
 575:rtos/uC-FS/FAT/fs_fat_lfn.c ****     formed = DEF_NO;
 576:rtos/uC-FS/FAT/fs_fat_lfn.c ****     if (name_len_octet == name_len) {                           /* If name contains only 8-bit char
 577:rtos/uC-FS/FAT/fs_fat_lfn.c ****         FS_FAT_SFN_Create( name,                                /* ... try to form SFN directly fro
 578:rtos/uC-FS/FAT/fs_fat_lfn.c ****                           &name_8_3[0],
 579:rtos/uC-FS/FAT/fs_fat_lfn.c ****                           &name_lower_case,
 580:rtos/uC-FS/FAT/fs_fat_lfn.c ****                           &ext_lower_case,
 581:rtos/uC-FS/FAT/fs_fat_lfn.c ****                            p_err);
 582:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 583:rtos/uC-FS/FAT/fs_fat_lfn.c ****         if (*p_err == FS_ERR_NONE) {
 584:rtos/uC-FS/FAT/fs_fat_lfn.c ****             FS_FAT_SFN_API.DirEntryCreate(p_vol,                /* ... create only SFN.            
 585:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                           p_buf,
 586:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                           name,
 587:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                           is_dir,
 588:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                           file_first_clus,
 589:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                           p_dir_start_pos,
 590:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                           p_dir_end_pos,
 591:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                           p_err);
 592:rtos/uC-FS/FAT/fs_fat_lfn.c ****             return;
 593:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 594:rtos/uC-FS/FAT/fs_fat_lfn.c ****         } else {
 595:rtos/uC-FS/FAT/fs_fat_lfn.c ****             if (*p_err == FS_ERR_NAME_MIXED_CASE) {
 596:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 formed = DEF_YES;
 597:rtos/uC-FS/FAT/fs_fat_lfn.c ****             }
 598:rtos/uC-FS/FAT/fs_fat_lfn.c ****         }
 599:rtos/uC-FS/FAT/fs_fat_lfn.c ****     }
 600:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
ARM GAS  /tmp/ccu2ENwm.s 			page 12


 601:rtos/uC-FS/FAT/fs_fat_lfn.c ****     if (formed == DEF_NO) {                                     /* If SFN could NOT be formed direc
 602:rtos/uC-FS/FAT/fs_fat_lfn.c ****         FS_FAT_LFN_SFN_Alloc( p_vol,                            /* ... use LFN generation.         
 603:rtos/uC-FS/FAT/fs_fat_lfn.c ****                               p_buf,
 604:rtos/uC-FS/FAT/fs_fat_lfn.c ****                               name,
 605:rtos/uC-FS/FAT/fs_fat_lfn.c ****                              &name_8_3[0],
 606:rtos/uC-FS/FAT/fs_fat_lfn.c ****                               p_dir_start_pos->SecNbr,
 607:rtos/uC-FS/FAT/fs_fat_lfn.c ****                               p_err);
 608:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 609:rtos/uC-FS/FAT/fs_fat_lfn.c ****         if (*p_err != FS_ERR_NONE) {
 610:rtos/uC-FS/FAT/fs_fat_lfn.c ****              return;
 611:rtos/uC-FS/FAT/fs_fat_lfn.c ****         }
 612:rtos/uC-FS/FAT/fs_fat_lfn.c ****     }
 613:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 614:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 615:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 616:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                 /* ------------------- WR DIR ENTRY
 617:rtos/uC-FS/FAT/fs_fat_lfn.c ****     FS_FAT_LFN_DirEntryCreateAt( p_vol,
 618:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                  p_buf,
 619:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                  name,
 620:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                  name_len,
 621:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                 &name_8_3[0],
 622:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                  is_dir,
 623:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                  file_first_clus,
 624:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                 &dir_cur_pos,
 625:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                  p_dir_end_pos,
 626:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                  p_err);
 627:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 628:rtos/uC-FS/FAT/fs_fat_lfn.c ****     if (*p_err != FS_ERR_NONE) {
 629:rtos/uC-FS/FAT/fs_fat_lfn.c ****         return;
 630:rtos/uC-FS/FAT/fs_fat_lfn.c ****     }
 631:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 632:rtos/uC-FS/FAT/fs_fat_lfn.c ****     p_dir_start_pos->SecNbr = dir_cur_pos.SecNbr;               /* Rtn start pos.                  
 633:rtos/uC-FS/FAT/fs_fat_lfn.c ****     p_dir_start_pos->SecPos = dir_cur_pos.SecPos;
 634:rtos/uC-FS/FAT/fs_fat_lfn.c **** }
 635:rtos/uC-FS/FAT/fs_fat_lfn.c **** #endif
 636:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 637:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 638:rtos/uC-FS/FAT/fs_fat_lfn.c **** /*
 639:rtos/uC-FS/FAT/fs_fat_lfn.c **** ***************************************************************************************************
 640:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                                    FS_FAT_LFN_DirEntryCreateAt()
 641:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
 642:rtos/uC-FS/FAT/fs_fat_lfn.c **** * Description : Create LFN directory entry at specified position.
 643:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
 644:rtos/uC-FS/FAT/fs_fat_lfn.c **** * Argument(s) : p_vol               Pointer to volume.
 645:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
 646:rtos/uC-FS/FAT/fs_fat_lfn.c **** *               p_buf               Pointer to temporary buffer.
 647:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
 648:rtos/uC-FS/FAT/fs_fat_lfn.c **** *               name                Name of the entry.
 649:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
 650:rtos/uC-FS/FAT/fs_fat_lfn.c **** *               name_len            Entry name length, in characters.
 651:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
 652:rtos/uC-FS/FAT/fs_fat_lfn.c **** *               name_8_3            Entry SFN.
 653:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
 654:rtos/uC-FS/FAT/fs_fat_lfn.c **** *               is_dir              Indicates whether directory entry is entry for directory :
 655:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
 656:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                                       DEF_YES, entry is for directory.
 657:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                                       DEF_NO,  entry is for file.
ARM GAS  /tmp/ccu2ENwm.s 			page 13


 658:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
 659:rtos/uC-FS/FAT/fs_fat_lfn.c **** *               file_first_clus     First cluster in entry.
 660:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
 661:rtos/uC-FS/FAT/fs_fat_lfn.c **** *               p_dir_pos           Pointer to directory position at which entry should be created.
 662:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
 663:rtos/uC-FS/FAT/fs_fat_lfn.c **** *               p_dir_end_pos       Pointer to variable that will receive the directory position at
 664:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                                   the final entry (the SFN entry) was created.
 665:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
 666:rtos/uC-FS/FAT/fs_fat_lfn.c **** *               p_err               Pointer to variable that will receive the return error code fro
 667:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
 668:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                                       FS_ERR_NONE             Directory entry created.
 669:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                                       FS_ERR_DEV              Device access error.
 670:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                                       FS_ERR_DIR_FULL         Directory is full (space could not 
 671:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                                       FS_ERR_DEV_FULL         Device is full (space could not be 
 672:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                                       FS_ERR_ENTRY_CORRUPT    File system entry is corrupt.
 673:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
 674:rtos/uC-FS/FAT/fs_fat_lfn.c **** * Return(s)   : none.
 675:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
 676:rtos/uC-FS/FAT/fs_fat_lfn.c **** * Note(s)     : none.
 677:rtos/uC-FS/FAT/fs_fat_lfn.c **** ***************************************************************************************************
 678:rtos/uC-FS/FAT/fs_fat_lfn.c **** */
 679:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 680:rtos/uC-FS/FAT/fs_fat_lfn.c **** #if (FS_CFG_RD_ONLY_EN == DEF_DISABLED)
 681:rtos/uC-FS/FAT/fs_fat_lfn.c **** static  void  FS_FAT_LFN_DirEntryCreateAt (FS_VOL            *p_vol,
 682:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                            FS_BUF            *p_buf,
 683:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                            CPU_CHAR          *name,
 684:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                            FS_FILE_NAME_LEN   name_len,
 685:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                            CPU_INT32U         name_8_3[],
 686:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                            CPU_BOOLEAN        is_dir,
 687:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                            FS_FAT_CLUS_NBR    file_first_clus,
 688:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                            FS_FAT_DIR_POS    *p_dir_pos,
 689:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                            FS_FAT_DIR_POS    *p_dir_end_pos,
 690:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                            FS_ERR            *p_err)
 691:rtos/uC-FS/FAT/fs_fat_lfn.c **** {
 692:rtos/uC-FS/FAT/fs_fat_lfn.c ****     FS_FAT_DATA           *p_fat_data;
 693:rtos/uC-FS/FAT/fs_fat_lfn.c ****     CPU_INT08U            *p_dir_entry;
 694:rtos/uC-FS/FAT/fs_fat_lfn.c ****     FS_FILE_NAME_LEN       char_cnt;
 695:rtos/uC-FS/FAT/fs_fat_lfn.c ****     FS_FILE_NAME_LEN       char_cnt_wr;
 696:rtos/uC-FS/FAT/fs_fat_lfn.c ****     CPU_INT08U             chk_sum;
 697:rtos/uC-FS/FAT/fs_fat_lfn.c ****     FS_FAT_DIR_POS         dir_cur_pos;
 698:rtos/uC-FS/FAT/fs_fat_lfn.c ****     FS_FAT_DIR_ENTRY_QTY   dir_entry_cnt;
 699:rtos/uC-FS/FAT/fs_fat_lfn.c ****     CPU_BOOLEAN            is_final;
 700:rtos/uC-FS/FAT/fs_fat_lfn.c **** #if (FS_CFG_UTF8_EN == DEF_ENABLED)
 701:rtos/uC-FS/FAT/fs_fat_lfn.c ****     CPU_WCHAR              name_wc[FS_FAT_MAX_FILE_NAME_LEN + 1u];
 702:rtos/uC-FS/FAT/fs_fat_lfn.c ****     CPU_CHAR              *p_name_rtn;
 703:rtos/uC-FS/FAT/fs_fat_lfn.c **** #endif
 704:rtos/uC-FS/FAT/fs_fat_lfn.c ****     FS_FAT_LFN_CHAR       *p_name_create;
 705:rtos/uC-FS/FAT/fs_fat_lfn.c **** #ifdef FS_FAT_JOURNAL_MODULE_PRESENT
 706:rtos/uC-FS/FAT/fs_fat_lfn.c ****     CPU_INT32U             dir_entry_ix;
 707:rtos/uC-FS/FAT/fs_fat_lfn.c **** #endif
 708:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 709:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 710:rtos/uC-FS/FAT/fs_fat_lfn.c ****     p_dir_end_pos->SecNbr =  0u;                                /* Dflt dir end pos.               
 711:rtos/uC-FS/FAT/fs_fat_lfn.c ****     p_dir_end_pos->SecPos =  0u;
 712:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 713:rtos/uC-FS/FAT/fs_fat_lfn.c ****     p_fat_data            = (FS_FAT_DATA *)p_vol->DataPtr;
 714:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
ARM GAS  /tmp/ccu2ENwm.s 			page 14


 715:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 716:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                 /* ---------------- WR LFN DIR ENTR
 717:rtos/uC-FS/FAT/fs_fat_lfn.c ****     char_cnt       =  name_len;
 718:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 719:rtos/uC-FS/FAT/fs_fat_lfn.c **** #if (FS_CFG_UTF8_EN == DEF_ENABLED)
 720:rtos/uC-FS/FAT/fs_fat_lfn.c ****     p_name_rtn     =  name;
 721:rtos/uC-FS/FAT/fs_fat_lfn.c ****     (void)MB_StrToWC(&name_wc[0],
 722:rtos/uC-FS/FAT/fs_fat_lfn.c ****                      &p_name_rtn,
 723:rtos/uC-FS/FAT/fs_fat_lfn.c ****                       FS_FAT_MAX_FILE_NAME_LEN);
 724:rtos/uC-FS/FAT/fs_fat_lfn.c ****     p_name_create  = &name_wc[0];
 725:rtos/uC-FS/FAT/fs_fat_lfn.c **** #else
 726:rtos/uC-FS/FAT/fs_fat_lfn.c ****     p_name_create  =  name;
 727:rtos/uC-FS/FAT/fs_fat_lfn.c **** #endif
 728:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 729:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                 /* Calc nbr of LFN dir entries.    
 730:rtos/uC-FS/FAT/fs_fat_lfn.c ****     dir_entry_cnt  = (FS_FAT_DIR_ENTRY_QTY)((char_cnt + FS_FAT_DIRENT_LFN_NBR_CHARS - 1u) / FS_FAT_
 731:rtos/uC-FS/FAT/fs_fat_lfn.c ****     p_name_create += char_cnt;                                  /* Move to end of file name.       
 732:rtos/uC-FS/FAT/fs_fat_lfn.c ****     is_final       = DEF_YES;
 733:rtos/uC-FS/FAT/fs_fat_lfn.c ****     chk_sum        = FS_FAT_LFN_ChkSumCalc((void *)name_8_3);
 734:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 735:rtos/uC-FS/FAT/fs_fat_lfn.c ****     char_cnt_wr    = char_cnt % FS_FAT_DIRENT_LFN_NBR_CHARS;    /* Calc nbr chars for final LFN dir
 736:rtos/uC-FS/FAT/fs_fat_lfn.c ****     if (char_cnt_wr == 0u) {
 737:rtos/uC-FS/FAT/fs_fat_lfn.c ****         char_cnt_wr =  FS_FAT_DIRENT_LFN_NBR_CHARS;
 738:rtos/uC-FS/FAT/fs_fat_lfn.c ****     }
 739:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 740:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 741:rtos/uC-FS/FAT/fs_fat_lfn.c **** #ifdef  FS_FAT_JOURNAL_MODULE_PRESENT
 742:rtos/uC-FS/FAT/fs_fat_lfn.c ****     if (DEF_BIT_IS_SET(p_fat_data->JournalState, FS_FAT_JOURNAL_STATE_REPLAY) == DEF_NO) {
 743:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 744:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                 /* ------------- CALC NEW ENTRY LAS
 745:rtos/uC-FS/FAT/fs_fat_lfn.c ****         dir_cur_pos.SecNbr =  p_dir_pos->SecNbr;
 746:rtos/uC-FS/FAT/fs_fat_lfn.c ****         dir_cur_pos.SecPos =  p_dir_pos->SecPos;
 747:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 748:rtos/uC-FS/FAT/fs_fat_lfn.c ****         for (dir_entry_ix = 0u; dir_entry_ix < dir_entry_cnt; dir_entry_ix++) {
 749:rtos/uC-FS/FAT/fs_fat_lfn.c ****             dir_cur_pos.SecPos += FS_FAT_SIZE_DIR_ENTRY;
 750:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 751:rtos/uC-FS/FAT/fs_fat_lfn.c ****             if (dir_cur_pos.SecPos == p_fat_data->SecSize) {
 752:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 dir_cur_pos.SecNbr = FS_FAT_SecNextGet(p_vol,   /* Get next dir sec.               
 753:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                        p_buf,
 754:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                        dir_cur_pos.SecNbr,
 755:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                        p_err);
 756:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 switch (*p_err) {
 757:rtos/uC-FS/FAT/fs_fat_lfn.c ****                     case FS_ERR_NONE:
 758:rtos/uC-FS/FAT/fs_fat_lfn.c ****                          break;
 759:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 760:rtos/uC-FS/FAT/fs_fat_lfn.c ****                     case FS_ERR_DIR_FULL:
 761:rtos/uC-FS/FAT/fs_fat_lfn.c ****                     case FS_ERR_DEV_FULL:
 762:rtos/uC-FS/FAT/fs_fat_lfn.c ****                          FS_TRACE_DBG(("FS_FAT_LFN_DirEntryCreateAt(): No dir entries avail.\r\n"))
 763:rtos/uC-FS/FAT/fs_fat_lfn.c ****                          return;
 764:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 765:rtos/uC-FS/FAT/fs_fat_lfn.c ****                     case FS_ERR_SYS_CLUS_CHAIN_END:
 766:rtos/uC-FS/FAT/fs_fat_lfn.c ****                     case FS_ERR_SYS_CLUS_INVALID:
 767:rtos/uC-FS/FAT/fs_fat_lfn.c ****                         *p_err = FS_ERR_ENTRY_CORRUPT;
 768:rtos/uC-FS/FAT/fs_fat_lfn.c ****                          return;
 769:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 770:rtos/uC-FS/FAT/fs_fat_lfn.c ****                     case FS_ERR_DEV:
 771:rtos/uC-FS/FAT/fs_fat_lfn.c ****                     default:
ARM GAS  /tmp/ccu2ENwm.s 			page 15


 772:rtos/uC-FS/FAT/fs_fat_lfn.c ****                          return;
 773:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 }
 774:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 dir_cur_pos.SecPos = 0u;
 775:rtos/uC-FS/FAT/fs_fat_lfn.c ****             }
 776:rtos/uC-FS/FAT/fs_fat_lfn.c ****         }
 777:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                 /* ------------------- ENTER JOURNA
 778:rtos/uC-FS/FAT/fs_fat_lfn.c ****         FS_FAT_JournalEnterEntryCreate(p_vol,
 779:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                        p_buf,
 780:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                        p_dir_pos,
 781:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                       &dir_cur_pos,
 782:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                        p_err);
 783:rtos/uC-FS/FAT/fs_fat_lfn.c ****         if (*p_err != FS_ERR_NONE) {
 784:rtos/uC-FS/FAT/fs_fat_lfn.c ****             return;
 785:rtos/uC-FS/FAT/fs_fat_lfn.c ****         }
 786:rtos/uC-FS/FAT/fs_fat_lfn.c ****     }
 787:rtos/uC-FS/FAT/fs_fat_lfn.c **** #endif
 788:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 789:rtos/uC-FS/FAT/fs_fat_lfn.c ****     dir_cur_pos.SecNbr =  p_dir_pos->SecNbr;                    /* Reset cur dir pos.              
 790:rtos/uC-FS/FAT/fs_fat_lfn.c ****     dir_cur_pos.SecPos =  p_dir_pos->SecPos;
 791:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 792:rtos/uC-FS/FAT/fs_fat_lfn.c ****     FSBuf_Set(p_buf,                                            /* Rd dir sec of init dir entry.   
 793:rtos/uC-FS/FAT/fs_fat_lfn.c ****               dir_cur_pos.SecNbr,
 794:rtos/uC-FS/FAT/fs_fat_lfn.c ****               FS_VOL_SEC_TYPE_DIR,
 795:rtos/uC-FS/FAT/fs_fat_lfn.c ****               DEF_YES,
 796:rtos/uC-FS/FAT/fs_fat_lfn.c ****               p_err);
 797:rtos/uC-FS/FAT/fs_fat_lfn.c ****     if (*p_err != FS_ERR_NONE) {
 798:rtos/uC-FS/FAT/fs_fat_lfn.c ****         return;
 799:rtos/uC-FS/FAT/fs_fat_lfn.c ****     }
 800:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 801:rtos/uC-FS/FAT/fs_fat_lfn.c ****     p_dir_entry        = (CPU_INT08U *)p_buf->DataPtr + dir_cur_pos.SecPos;
 802:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 803:rtos/uC-FS/FAT/fs_fat_lfn.c ****     while (dir_entry_cnt >= 1u) {
 804:rtos/uC-FS/FAT/fs_fat_lfn.c ****         p_name_create -= char_cnt_wr;
 805:rtos/uC-FS/FAT/fs_fat_lfn.c ****         char_cnt      -= char_cnt_wr;
 806:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 807:rtos/uC-FS/FAT/fs_fat_lfn.c ****         FS_FAT_LFN_DirEntryFmt((void *)p_dir_entry,             /* Fmt new LFN entry.              
 808:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                        p_name_create,
 809:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                        char_cnt_wr,
 810:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                        chk_sum,
 811:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                        dir_entry_cnt,
 812:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                        is_final);
 813:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 814:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 815:rtos/uC-FS/FAT/fs_fat_lfn.c ****         char_cnt_wr = FS_FAT_DIRENT_LFN_NBR_CHARS;
 816:rtos/uC-FS/FAT/fs_fat_lfn.c ****         is_final    = DEF_NO;
 817:rtos/uC-FS/FAT/fs_fat_lfn.c ****         dir_entry_cnt--;
 818:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 819:rtos/uC-FS/FAT/fs_fat_lfn.c ****         p_dir_entry        += FS_FAT_SIZE_DIR_ENTRY;
 820:rtos/uC-FS/FAT/fs_fat_lfn.c ****         dir_cur_pos.SecPos += FS_FAT_SIZE_DIR_ENTRY;
 821:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 822:rtos/uC-FS/FAT/fs_fat_lfn.c ****         if (dir_cur_pos.SecPos == p_fat_data->SecSize) {
 823:rtos/uC-FS/FAT/fs_fat_lfn.c ****             FSBuf_MarkDirty(p_buf, p_err);                      /* Wr updated dir sec.             
 824:rtos/uC-FS/FAT/fs_fat_lfn.c ****             if (*p_err != FS_ERR_NONE) {
 825:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 return;
 826:rtos/uC-FS/FAT/fs_fat_lfn.c ****             }
 827:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 828:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                 /* Get next dir sec.               
ARM GAS  /tmp/ccu2ENwm.s 			page 16


 829:rtos/uC-FS/FAT/fs_fat_lfn.c ****             dir_cur_pos.SecNbr = FS_FAT_SecNextGet(p_vol,
 830:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                    p_buf,
 831:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                    dir_cur_pos.SecNbr,
 832:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                    p_err);
 833:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 834:rtos/uC-FS/FAT/fs_fat_lfn.c ****             switch (*p_err) {
 835:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 case FS_ERR_NONE:
 836:rtos/uC-FS/FAT/fs_fat_lfn.c ****                      break;
 837:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 838:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 case FS_ERR_DIR_FULL:
 839:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 case FS_ERR_DEV_FULL:
 840:rtos/uC-FS/FAT/fs_fat_lfn.c ****                      FS_TRACE_DBG(("FS_FAT_LFN_DirEntryCreateAt(): No dir entries avail.\r\n"));
 841:rtos/uC-FS/FAT/fs_fat_lfn.c ****                      return;
 842:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 843:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 case FS_ERR_SYS_CLUS_CHAIN_END:
 844:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 case FS_ERR_SYS_CLUS_INVALID:
 845:rtos/uC-FS/FAT/fs_fat_lfn.c ****                     *p_err = FS_ERR_ENTRY_CORRUPT;
 846:rtos/uC-FS/FAT/fs_fat_lfn.c ****                      return;
 847:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 848:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 case FS_ERR_DEV:
 849:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 default:
 850:rtos/uC-FS/FAT/fs_fat_lfn.c ****                      return;
 851:rtos/uC-FS/FAT/fs_fat_lfn.c ****             }
 852:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 853:rtos/uC-FS/FAT/fs_fat_lfn.c ****             FSBuf_Set(p_buf,                                    /* Rd new dir sec.                 
 854:rtos/uC-FS/FAT/fs_fat_lfn.c ****                       dir_cur_pos.SecNbr,
 855:rtos/uC-FS/FAT/fs_fat_lfn.c ****                       FS_VOL_SEC_TYPE_DIR,
 856:rtos/uC-FS/FAT/fs_fat_lfn.c ****                       DEF_YES,
 857:rtos/uC-FS/FAT/fs_fat_lfn.c ****                       p_err);
 858:rtos/uC-FS/FAT/fs_fat_lfn.c ****             if (*p_err != FS_ERR_NONE) {
 859:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 return;
 860:rtos/uC-FS/FAT/fs_fat_lfn.c ****             }
 861:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 862:rtos/uC-FS/FAT/fs_fat_lfn.c ****             p_dir_entry        = (CPU_INT08U *)p_buf->DataPtr;
 863:rtos/uC-FS/FAT/fs_fat_lfn.c ****             dir_cur_pos.SecPos = 0u;
 864:rtos/uC-FS/FAT/fs_fat_lfn.c ****         }
 865:rtos/uC-FS/FAT/fs_fat_lfn.c ****     }
 866:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 867:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 868:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                 /* ----------------- WR SFN DIR ENT
 869:rtos/uC-FS/FAT/fs_fat_lfn.c ****     FS_FAT_SFN_DirEntryFmt((void *)p_dir_entry,                 /* Make SFN dir entry.             
 870:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                    name_8_3,
 871:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                    is_dir,
 872:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                    file_first_clus,
 873:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                    DEF_NO,
 874:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                    DEF_NO);
 875:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 876:rtos/uC-FS/FAT/fs_fat_lfn.c ****     FSBuf_MarkDirty(p_buf, p_err);                              /* Wr updated dir sec.             
 877:rtos/uC-FS/FAT/fs_fat_lfn.c ****     if (*p_err != FS_ERR_NONE) {
 878:rtos/uC-FS/FAT/fs_fat_lfn.c ****         return;
 879:rtos/uC-FS/FAT/fs_fat_lfn.c ****     }
 880:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 881:rtos/uC-FS/FAT/fs_fat_lfn.c ****     p_dir_end_pos->SecNbr = dir_cur_pos.SecNbr;
 882:rtos/uC-FS/FAT/fs_fat_lfn.c ****     p_dir_end_pos->SecPos = dir_cur_pos.SecPos;
 883:rtos/uC-FS/FAT/fs_fat_lfn.c **** }
 884:rtos/uC-FS/FAT/fs_fat_lfn.c **** #endif
 885:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
ARM GAS  /tmp/ccu2ENwm.s 			page 17


 886:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 887:rtos/uC-FS/FAT/fs_fat_lfn.c **** /*
 888:rtos/uC-FS/FAT/fs_fat_lfn.c **** ***************************************************************************************************
 889:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                                      FS_FAT_LFN_DirEntryDel()
 890:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
 891:rtos/uC-FS/FAT/fs_fat_lfn.c **** * Description : Delete LFN directory entry.
 892:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
 893:rtos/uC-FS/FAT/fs_fat_lfn.c **** * Argument(s) : p_vol               Pointer to volume.
 894:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
 895:rtos/uC-FS/FAT/fs_fat_lfn.c **** *               p_buf               Pointer to temporary buffer.
 896:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
 897:rtos/uC-FS/FAT/fs_fat_lfn.c **** *               p_dir_start_pos     Pointer to directory position at which the first entry (the fir
 898:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                                   entry or the SFN entry) is located.
 899:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
 900:rtos/uC-FS/FAT/fs_fat_lfn.c **** *               p_dir_end_pos       Pointer to directory position at which the final entry (the SFN
 901:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                                   entry) is located.
 902:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
 903:rtos/uC-FS/FAT/fs_fat_lfn.c **** *               p_err               Pointer to variable that will receive the return error code fro
 904:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
 905:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                                       FS_ERR_NONE    Directory entry deleted.
 906:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                                       FS_ERR_DEV     Device access error.
 907:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
 908:rtos/uC-FS/FAT/fs_fat_lfn.c **** * Return(s)   : none.
 909:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
 910:rtos/uC-FS/FAT/fs_fat_lfn.c **** * Note(s)     : (1) The sector number gotten from the FAT should be valid.  These checks are effect
 911:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                   redundant.
 912:rtos/uC-FS/FAT/fs_fat_lfn.c **** ***************************************************************************************************
 913:rtos/uC-FS/FAT/fs_fat_lfn.c **** */
 914:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 915:rtos/uC-FS/FAT/fs_fat_lfn.c **** #if (FS_CFG_RD_ONLY_EN == DEF_DISABLED)
 916:rtos/uC-FS/FAT/fs_fat_lfn.c **** static  void  FS_FAT_LFN_DirEntryDel (FS_VOL          *p_vol,
 917:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                       FS_BUF          *p_buf,
 918:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                       FS_FAT_DIR_POS  *p_dir_start_pos,
 919:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                       FS_FAT_DIR_POS  *p_dir_end_pos,
 920:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                       FS_ERR          *p_err)
 921:rtos/uC-FS/FAT/fs_fat_lfn.c **** {
 922:rtos/uC-FS/FAT/fs_fat_lfn.c ****     FS_FAT_DATA     *p_fat_data;
 923:rtos/uC-FS/FAT/fs_fat_lfn.c ****     FS_FAT_DIR_POS   dir_cur_pos;
 924:rtos/uC-FS/FAT/fs_fat_lfn.c ****     CPU_INT08U      *p_dir_entry;
 925:rtos/uC-FS/FAT/fs_fat_lfn.c ****     FS_FAT_SEC_NBR   dir_next_sec;
 926:rtos/uC-FS/FAT/fs_fat_lfn.c ****     CPU_BOOLEAN      dir_sec_valid;
 927:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 928:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 929:rtos/uC-FS/FAT/fs_fat_lfn.c ****     p_fat_data = (FS_FAT_DATA *)p_vol->DataPtr;
 930:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 931:rtos/uC-FS/FAT/fs_fat_lfn.c **** #ifdef  FS_FAT_JOURNAL_MODULE_PRESENT
 932:rtos/uC-FS/FAT/fs_fat_lfn.c ****     if (DEF_BIT_IS_SET(p_fat_data->JournalState, FS_FAT_JOURNAL_STATE_REPLAY) == DEF_NO) {
 933:rtos/uC-FS/FAT/fs_fat_lfn.c ****         FS_FAT_JournalEnterEntryUpdate(p_vol,
 934:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                        p_buf,
 935:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                        p_dir_start_pos,
 936:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                        p_dir_end_pos,
 937:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                        p_err);
 938:rtos/uC-FS/FAT/fs_fat_lfn.c ****         if (*p_err != FS_ERR_NONE) {
 939:rtos/uC-FS/FAT/fs_fat_lfn.c ****             return;
 940:rtos/uC-FS/FAT/fs_fat_lfn.c ****         }
 941:rtos/uC-FS/FAT/fs_fat_lfn.c ****     }
 942:rtos/uC-FS/FAT/fs_fat_lfn.c **** #endif
ARM GAS  /tmp/ccu2ENwm.s 			page 18


 943:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 944:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 945:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                 /* -------------------- RD DIR SEC 
 946:rtos/uC-FS/FAT/fs_fat_lfn.c ****     p_dir_entry         = (CPU_INT08U  *)p_buf->DataPtr;
 947:rtos/uC-FS/FAT/fs_fat_lfn.c ****     p_dir_entry        +=  p_dir_start_pos->SecPos;
 948:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 949:rtos/uC-FS/FAT/fs_fat_lfn.c ****     dir_cur_pos.SecNbr  =  p_dir_start_pos->SecNbr;
 950:rtos/uC-FS/FAT/fs_fat_lfn.c ****     dir_cur_pos.SecPos  =  p_dir_start_pos->SecPos;
 951:rtos/uC-FS/FAT/fs_fat_lfn.c ****     dir_sec_valid       =  FS_FAT_IS_VALID_SEC(p_fat_data, dir_cur_pos.SecNbr);
 952:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 953:rtos/uC-FS/FAT/fs_fat_lfn.c ****     FSBuf_Set(p_buf,
 954:rtos/uC-FS/FAT/fs_fat_lfn.c ****               dir_cur_pos.SecNbr,
 955:rtos/uC-FS/FAT/fs_fat_lfn.c ****               FS_VOL_SEC_TYPE_DIR,
 956:rtos/uC-FS/FAT/fs_fat_lfn.c ****               DEF_YES,
 957:rtos/uC-FS/FAT/fs_fat_lfn.c ****               p_err);
 958:rtos/uC-FS/FAT/fs_fat_lfn.c ****     if (*p_err != FS_ERR_NONE) {
 959:rtos/uC-FS/FAT/fs_fat_lfn.c ****          return;
 960:rtos/uC-FS/FAT/fs_fat_lfn.c ****     }
 961:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 962:rtos/uC-FS/FAT/fs_fat_lfn.c ****     while ( (dir_sec_valid      == DEF_YES) &&                  /* While sec is valid (see Note #1)
 963:rtos/uC-FS/FAT/fs_fat_lfn.c ****            ((dir_cur_pos.SecNbr != p_dir_end_pos->SecNbr) ||    /* ... &     end sec     not reache
 964:rtos/uC-FS/FAT/fs_fat_lfn.c ****             (dir_cur_pos.SecPos <= p_dir_end_pos->SecPos))) {   /* ...    OR end sec pos not reache
 965:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 966:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                 /* ------------------ RD NEXT DIR S
 967:rtos/uC-FS/FAT/fs_fat_lfn.c ****         if (dir_cur_pos.SecPos == p_fat_data->SecSize) {
 968:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                 /* Get next sec in dir.            
 969:rtos/uC-FS/FAT/fs_fat_lfn.c ****             dir_next_sec = FS_FAT_SecNextGet(p_vol,
 970:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                              p_buf,
 971:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                              dir_cur_pos.SecNbr,
 972:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                              p_err);
 973:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 974:rtos/uC-FS/FAT/fs_fat_lfn.c ****             switch (*p_err) {
 975:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 case FS_ERR_NONE:
 976:rtos/uC-FS/FAT/fs_fat_lfn.c ****                      break;
 977:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 978:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 case FS_ERR_SYS_CLUS_CHAIN_END:
 979:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 case FS_ERR_SYS_CLUS_INVALID:
 980:rtos/uC-FS/FAT/fs_fat_lfn.c ****                      FS_TRACE_INFO(("FS_FAT_LFN_DirEntryDel(): Unexpected end to dir while del'ing 
 981:rtos/uC-FS/FAT/fs_fat_lfn.c ****                     *p_err = FS_ERR_ENTRY_CORRUPT;
 982:rtos/uC-FS/FAT/fs_fat_lfn.c ****                      return;
 983:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 984:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 case FS_ERR_DEV:
 985:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 default:
 986:rtos/uC-FS/FAT/fs_fat_lfn.c ****                      return;
 987:rtos/uC-FS/FAT/fs_fat_lfn.c ****             }
 988:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 989:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                 /* Chk sec validity (see Note #1). 
 990:rtos/uC-FS/FAT/fs_fat_lfn.c ****             dir_sec_valid      = FS_FAT_IS_VALID_SEC(p_fat_data, dir_next_sec);
 991:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 992:rtos/uC-FS/FAT/fs_fat_lfn.c ****             dir_cur_pos.SecNbr = dir_next_sec;
 993:rtos/uC-FS/FAT/fs_fat_lfn.c ****             dir_cur_pos.SecPos = 0u;
 994:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 995:rtos/uC-FS/FAT/fs_fat_lfn.c ****             if (dir_sec_valid == DEF_YES) {
 996:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 p_dir_entry = (CPU_INT08U *)p_buf->DataPtr;
 997:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 998:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 FSBuf_Set(p_buf,
 999:rtos/uC-FS/FAT/fs_fat_lfn.c ****                           dir_cur_pos.SecNbr,
ARM GAS  /tmp/ccu2ENwm.s 			page 19


1000:rtos/uC-FS/FAT/fs_fat_lfn.c ****                           FS_VOL_SEC_TYPE_DIR,
1001:rtos/uC-FS/FAT/fs_fat_lfn.c ****                           DEF_YES,
1002:rtos/uC-FS/FAT/fs_fat_lfn.c ****                           p_err);
1003:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 if (*p_err != FS_ERR_NONE) {
1004:rtos/uC-FS/FAT/fs_fat_lfn.c ****                     return;
1005:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 }
1006:rtos/uC-FS/FAT/fs_fat_lfn.c ****             }
1007:rtos/uC-FS/FAT/fs_fat_lfn.c ****         }
1008:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1009:rtos/uC-FS/FAT/fs_fat_lfn.c ****         if (dir_sec_valid == DEF_YES) {
1010:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                 /* ------------------- CLR DIR ENTR
1011:rtos/uC-FS/FAT/fs_fat_lfn.c **** #if (FS_CFG_DBG_MEM_CLR_EN == DEF_ENABLED)
1012:rtos/uC-FS/FAT/fs_fat_lfn.c ****             Mem_Clr((void *)p_dir_entry,
1013:rtos/uC-FS/FAT/fs_fat_lfn.c ****                             FS_FAT_SIZE_DIR_ENTRY);
1014:rtos/uC-FS/FAT/fs_fat_lfn.c **** #endif
1015:rtos/uC-FS/FAT/fs_fat_lfn.c ****             p_dir_entry[0] = FS_FAT_DIRENT_NAME_ERASED_AND_FREE;/* Mark LFN dir entry as free.     
1016:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1017:rtos/uC-FS/FAT/fs_fat_lfn.c ****             FSBuf_MarkDirty(p_buf, p_err);
1018:rtos/uC-FS/FAT/fs_fat_lfn.c ****             if (*p_err != FS_ERR_NONE) {
1019:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 return;
1020:rtos/uC-FS/FAT/fs_fat_lfn.c ****             }
1021:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1022:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1023:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1024:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                 /* ---------------- MOVE TO NEXT EN
1025:rtos/uC-FS/FAT/fs_fat_lfn.c ****             dir_cur_pos.SecPos += FS_FAT_SIZE_DIR_ENTRY;
1026:rtos/uC-FS/FAT/fs_fat_lfn.c ****             p_dir_entry        += FS_FAT_SIZE_DIR_ENTRY;
1027:rtos/uC-FS/FAT/fs_fat_lfn.c ****         }
1028:rtos/uC-FS/FAT/fs_fat_lfn.c ****     }
1029:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1030:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1031:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1032:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1033:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                 /* ---------------- ALL DIR SECS FO
1034:rtos/uC-FS/FAT/fs_fat_lfn.c ****     if (dir_sec_valid == DEF_NO) {                              /* Invalid sec found (see Note #1).
1035:rtos/uC-FS/FAT/fs_fat_lfn.c ****         FS_TRACE_DBG(("FS_FAT_LFN_DirEntryDel(): Invalid sec gotten: %d.\r\n", dir_cur_pos.SecNbr))
1036:rtos/uC-FS/FAT/fs_fat_lfn.c ****        *p_err = FS_ERR_ENTRY_CORRUPT;
1037:rtos/uC-FS/FAT/fs_fat_lfn.c ****     }
1038:rtos/uC-FS/FAT/fs_fat_lfn.c **** }
1039:rtos/uC-FS/FAT/fs_fat_lfn.c **** #endif
1040:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1041:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1042:rtos/uC-FS/FAT/fs_fat_lfn.c **** /*
1043:rtos/uC-FS/FAT/fs_fat_lfn.c **** ***************************************************************************************************
1044:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                                      FS_FAT_LFN_DirEntryFind()
1045:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
1046:rtos/uC-FS/FAT/fs_fat_lfn.c **** * Description : Search directory for LFN directory entry.
1047:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
1048:rtos/uC-FS/FAT/fs_fat_lfn.c **** * Argument(s) : p_vol               Pointer to volume.
1049:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
1050:rtos/uC-FS/FAT/fs_fat_lfn.c **** *               p_buf               Pointer to temporary buffer.
1051:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
1052:rtos/uC-FS/FAT/fs_fat_lfn.c **** *               name                Name of the entry (see Note #2).
1053:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
1054:rtos/uC-FS/FAT/fs_fat_lfn.c **** *               p_name_next         Pointer to variable that will receive pointer to character foll
1055:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                                   entry name (see Note #2).
1056:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
ARM GAS  /tmp/ccu2ENwm.s 			page 20


1057:rtos/uC-FS/FAT/fs_fat_lfn.c **** *               p_dir_start_pos     Pointer to directory position at which search should start; var
1058:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                                   will receive the directory position at which the first entry (t
1059:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                                   first LFN entry or the SFN entry) is located.
1060:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
1061:rtos/uC-FS/FAT/fs_fat_lfn.c **** *               p_dir_end_pos       Pointer to variable that will receive the directory position at
1062:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                                   the final entry (the SFN entry) is located.
1063:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
1064:rtos/uC-FS/FAT/fs_fat_lfn.c **** *               p_err               Pointer to variable that will receive the return error code fro
1065:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
1066:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                                       FS_ERR_NONE                       Directory entry found.
1067:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                                       FS_ERR_DEV                        Device access error.
1068:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                                       FS_ERR_SYS_DIR_ENTRY_NOT_FOUND    Directory entry not found
1069:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
1070:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                                                                         --- RETURNED BY FS_FAT_LF
1071:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                                       FS_ERR_NAME_INVALID               File name is illegal.
1072:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
1073:rtos/uC-FS/FAT/fs_fat_lfn.c **** * Return(s)   : none.
1074:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
1075:rtos/uC-FS/FAT/fs_fat_lfn.c **** * Note(s)     : (1) (a) The 'p_temp' pointer is 4-byte aligned since all sectors are 4-byte aligned
1076:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
1077:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                   (b) All pointers to directory entries are 4-byte aligned since all directory en
1078:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                       lie at a offset multiple of 32 (the size of a directory entry) from the beg
1079:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                       of a sector.
1080:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
1081:rtos/uC-FS/FAT/fs_fat_lfn.c **** *               (2) The file name 'name' MAY not be NULL-terminated; it may be followed by a path
1082:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                   separator character.  Only the characters until the first NULL or path separato
1083:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                   character should be used in the comparison.
1084:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
1085:rtos/uC-FS/FAT/fs_fat_lfn.c **** *               (3) The sector number gotten from the FAT should be valid.  These checks are effect
1086:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                   redundant.
1087:rtos/uC-FS/FAT/fs_fat_lfn.c **** ***************************************************************************************************
1088:rtos/uC-FS/FAT/fs_fat_lfn.c **** */
1089:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1090:rtos/uC-FS/FAT/fs_fat_lfn.c **** static  void  FS_FAT_LFN_DirEntryFind (FS_VOL           *p_vol,
1091:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                        FS_BUF           *p_buf,
1092:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                        CPU_CHAR         *name,
1093:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                        CPU_CHAR        **p_name_next,
1094:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                        FS_FAT_DIR_POS   *p_dir_start_pos,
1095:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                        FS_FAT_DIR_POS   *p_dir_end_pos,
1096:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                        FS_ERR           *p_err)
1097:rtos/uC-FS/FAT/fs_fat_lfn.c **** {
1098:rtos/uC-FS/FAT/fs_fat_lfn.c ****     CPU_BOOLEAN        chk_sfn;
1099:rtos/uC-FS/FAT/fs_fat_lfn.c ****     FS_FAT_DIR_POS     dir_cur_pos;
1100:rtos/uC-FS/FAT/fs_fat_lfn.c ****     FS_FAT_DIR_POS     dir_end_pos;
1101:rtos/uC-FS/FAT/fs_fat_lfn.c ****     CPU_BOOLEAN        dir_sec_valid;
1102:rtos/uC-FS/FAT/fs_fat_lfn.c ****     CPU_BOOLEAN        ext_lower_case;
1103:rtos/uC-FS/FAT/fs_fat_lfn.c ****     CPU_INT32U         name_8_3[3];
1104:rtos/uC-FS/FAT/fs_fat_lfn.c ****     FS_FILE_NAME_LEN   name_len;
1105:rtos/uC-FS/FAT/fs_fat_lfn.c ****     FS_FILE_NAME_LEN   name_len_octet;
1106:rtos/uC-FS/FAT/fs_fat_lfn.c ****     FS_FILE_NAME_LEN   name_len_found;
1107:rtos/uC-FS/FAT/fs_fat_lfn.c ****     FS_FAT_LFN_CHAR    name_lfn[FS_FAT_MAX_FILE_NAME_LEN + 1u];
1108:rtos/uC-FS/FAT/fs_fat_lfn.c ****     CPU_INT32S         name_lfn_cmp;
1109:rtos/uC-FS/FAT/fs_fat_lfn.c ****     CPU_BOOLEAN        name_lower_case;
1110:rtos/uC-FS/FAT/fs_fat_lfn.c ****     CPU_INT32U         name_word;
1111:rtos/uC-FS/FAT/fs_fat_lfn.c ****     CPU_INT08U        *p_dir_entry;
1112:rtos/uC-FS/FAT/fs_fat_lfn.c ****     FS_FAT_DATA       *p_fat_data;
1113:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
ARM GAS  /tmp/ccu2ENwm.s 			page 21


1114:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1115:rtos/uC-FS/FAT/fs_fat_lfn.c ****     p_dir_end_pos->SecNbr = 0u;                                 /* Dflt dir end pos.               
1116:rtos/uC-FS/FAT/fs_fat_lfn.c ****     p_dir_end_pos->SecPos = 0u;
1117:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1118:rtos/uC-FS/FAT/fs_fat_lfn.c ****     FS_FAT_SFN_Chk(name,                                        /* Chk if valid SFN.               
1119:rtos/uC-FS/FAT/fs_fat_lfn.c ****                   &name_len,
1120:rtos/uC-FS/FAT/fs_fat_lfn.c ****                    p_err);
1121:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1122:rtos/uC-FS/FAT/fs_fat_lfn.c ****     if (*p_err == FS_ERR_NONE) {
1123:rtos/uC-FS/FAT/fs_fat_lfn.c **** #if (FS_CFG_DBG_MEM_CLR_EN == DEF_ENABLED)
1124:rtos/uC-FS/FAT/fs_fat_lfn.c ****         Mem_Clr((void *)name_8_3, sizeof(name_8_3));
1125:rtos/uC-FS/FAT/fs_fat_lfn.c **** #endif
1126:rtos/uC-FS/FAT/fs_fat_lfn.c ****         FS_FAT_SFN_Create(name,                                 /* Create 8.3 name.                
1127:rtos/uC-FS/FAT/fs_fat_lfn.c ****                          &name_8_3[0],
1128:rtos/uC-FS/FAT/fs_fat_lfn.c ****                          &name_lower_case,
1129:rtos/uC-FS/FAT/fs_fat_lfn.c ****                          &ext_lower_case,
1130:rtos/uC-FS/FAT/fs_fat_lfn.c ****                           p_err);
1131:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1132:rtos/uC-FS/FAT/fs_fat_lfn.c ****         if (*p_err == FS_ERR_NAME_MIXED_CASE) {
1133:rtos/uC-FS/FAT/fs_fat_lfn.c ****             *p_err  = FS_ERR_NONE;
1134:rtos/uC-FS/FAT/fs_fat_lfn.c ****         }
1135:rtos/uC-FS/FAT/fs_fat_lfn.c ****     }
1136:rtos/uC-FS/FAT/fs_fat_lfn.c ****     chk_sfn = (*p_err == FS_ERR_NONE) ? DEF_YES : DEF_NO;       /* Cmp with SFNs if valid SFN.     
1137:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1138:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1139:rtos/uC-FS/FAT/fs_fat_lfn.c ****     FS_FAT_LFN_Chk( name,                                       /* Chk if valid LFN.               
1140:rtos/uC-FS/FAT/fs_fat_lfn.c ****                    &name_len,
1141:rtos/uC-FS/FAT/fs_fat_lfn.c ****                    &name_len_octet,
1142:rtos/uC-FS/FAT/fs_fat_lfn.c ****                     p_err);
1143:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1144:rtos/uC-FS/FAT/fs_fat_lfn.c ****     if (*p_err != FS_ERR_NONE) {
1145:rtos/uC-FS/FAT/fs_fat_lfn.c ****         *p_name_next = name;
1146:rtos/uC-FS/FAT/fs_fat_lfn.c ****          return;
1147:rtos/uC-FS/FAT/fs_fat_lfn.c ****     }
1148:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1149:rtos/uC-FS/FAT/fs_fat_lfn.c ****    *p_name_next        =  name + name_len_octet;
1150:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1151:rtos/uC-FS/FAT/fs_fat_lfn.c ****     p_fat_data         = (FS_FAT_DATA *)p_vol->DataPtr;
1152:rtos/uC-FS/FAT/fs_fat_lfn.c ****     dir_cur_pos.SecNbr =  p_dir_start_pos->SecNbr;
1153:rtos/uC-FS/FAT/fs_fat_lfn.c ****     dir_cur_pos.SecPos =  p_dir_start_pos->SecPos;
1154:rtos/uC-FS/FAT/fs_fat_lfn.c ****     dir_sec_valid      =  FS_FAT_IS_VALID_SEC(p_fat_data, dir_cur_pos.SecNbr);
1155:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1156:rtos/uC-FS/FAT/fs_fat_lfn.c ****     while (dir_sec_valid == DEF_YES) {                          /* While sec is valid (see Note #3)
1157:rtos/uC-FS/FAT/fs_fat_lfn.c ****         FS_FAT_LFN_NextDirEntryGet(         p_vol,
1158:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                             p_buf,
1159:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                    (void *)&name_lfn[0],
1160:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                            &dir_cur_pos,
1161:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                            &dir_end_pos,
1162:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                             p_err);
1163:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1164:rtos/uC-FS/FAT/fs_fat_lfn.c ****         switch (*p_err) {
1165:rtos/uC-FS/FAT/fs_fat_lfn.c ****             case FS_ERR_NONE:
1166:rtos/uC-FS/FAT/fs_fat_lfn.c ****                  break;
1167:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1168:rtos/uC-FS/FAT/fs_fat_lfn.c ****             case FS_ERR_EOF:
1169:rtos/uC-FS/FAT/fs_fat_lfn.c ****             case FS_ERR_DIR_FULL:
1170:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 *p_err = FS_ERR_SYS_DIR_ENTRY_NOT_FOUND;
ARM GAS  /tmp/ccu2ENwm.s 			page 22


1171:rtos/uC-FS/FAT/fs_fat_lfn.c ****                  return;
1172:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1173:rtos/uC-FS/FAT/fs_fat_lfn.c ****             case FS_ERR_DEV:
1174:rtos/uC-FS/FAT/fs_fat_lfn.c ****                  return;
1175:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1176:rtos/uC-FS/FAT/fs_fat_lfn.c ****             default:
1177:rtos/uC-FS/FAT/fs_fat_lfn.c ****                  FS_TRACE_DBG(("FS_FAT_LFN_DirEntryFind(): Default case reached.\r\n"));
1178:rtos/uC-FS/FAT/fs_fat_lfn.c ****                  return;
1179:rtos/uC-FS/FAT/fs_fat_lfn.c ****         }
1180:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1181:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1182:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1183:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                 /* ---------------------- CHK LFN -
1184:rtos/uC-FS/FAT/fs_fat_lfn.c ****         p_dir_entry    = (CPU_INT08U *)p_buf->DataPtr + dir_end_pos.SecPos;
1185:rtos/uC-FS/FAT/fs_fat_lfn.c ****         name_len_found = FS_FAT_LFN_StrLen_N(name_lfn, FS_FAT_MAX_FILE_NAME_LEN);
1186:rtos/uC-FS/FAT/fs_fat_lfn.c ****         if (name_len == name_len_found) {                       /* See Note #2.                    
1187:rtos/uC-FS/FAT/fs_fat_lfn.c ****             name_lfn_cmp = FS_FAT_LFN_StrCmpIgnoreCase_N(name, &name_lfn[0], name_len);
1188:rtos/uC-FS/FAT/fs_fat_lfn.c ****             if (name_lfn_cmp == 0) {
1189:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 p_dir_start_pos->SecNbr = dir_cur_pos.SecNbr;
1190:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 p_dir_start_pos->SecPos = dir_cur_pos.SecPos;
1191:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 p_dir_end_pos->SecNbr   = dir_end_pos.SecNbr;
1192:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 p_dir_end_pos->SecPos   = dir_end_pos.SecPos;
1193:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 return;
1194:rtos/uC-FS/FAT/fs_fat_lfn.c ****             }
1195:rtos/uC-FS/FAT/fs_fat_lfn.c ****         }
1196:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1197:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1198:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1199:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                 /* ---------------------- CHK SFN -
1200:rtos/uC-FS/FAT/fs_fat_lfn.c ****         if (chk_sfn == DEF_YES) {
1201:rtos/uC-FS/FAT/fs_fat_lfn.c ****             name_word = MEM_VAL_GET_INT32U((void *)(p_dir_entry + 0u));
1202:rtos/uC-FS/FAT/fs_fat_lfn.c ****             if (name_word == name_8_3[0]) {
1203:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 name_word = MEM_VAL_GET_INT32U((void *)(p_dir_entry + 4u));
1204:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 if (name_word == name_8_3[1]) {
1205:rtos/uC-FS/FAT/fs_fat_lfn.c ****                     name_word  = MEM_VAL_GET_INT32U((void *)(p_dir_entry + 8u));
1206:rtos/uC-FS/FAT/fs_fat_lfn.c ****                    #if (CPU_CFG_ENDIAN_TYPE == CPU_ENDIAN_TYPE_LITTLE)
1207:rtos/uC-FS/FAT/fs_fat_lfn.c ****                     name_word &= 0x00FFFFFFu;
1208:rtos/uC-FS/FAT/fs_fat_lfn.c ****                    #else
1209:rtos/uC-FS/FAT/fs_fat_lfn.c ****                     name_word &= 0xFFFFFF00u;
1210:rtos/uC-FS/FAT/fs_fat_lfn.c ****                    #endif
1211:rtos/uC-FS/FAT/fs_fat_lfn.c ****                     if (name_word == name_8_3[2]) {
1212:rtos/uC-FS/FAT/fs_fat_lfn.c ****                         p_dir_start_pos->SecNbr = dir_end_pos.SecNbr;
1213:rtos/uC-FS/FAT/fs_fat_lfn.c ****                         p_dir_start_pos->SecPos = dir_end_pos.SecPos;
1214:rtos/uC-FS/FAT/fs_fat_lfn.c ****                         p_dir_end_pos->SecNbr   = dir_end_pos.SecNbr;
1215:rtos/uC-FS/FAT/fs_fat_lfn.c ****                         p_dir_end_pos->SecPos   = dir_end_pos.SecPos;
1216:rtos/uC-FS/FAT/fs_fat_lfn.c ****                         return;
1217:rtos/uC-FS/FAT/fs_fat_lfn.c ****                     }
1218:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 }
1219:rtos/uC-FS/FAT/fs_fat_lfn.c ****             }
1220:rtos/uC-FS/FAT/fs_fat_lfn.c ****         }
1221:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1222:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1223:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1224:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                 /* ---------------- MOVE TO NEXT EN
1225:rtos/uC-FS/FAT/fs_fat_lfn.c ****         dir_cur_pos.SecNbr = dir_end_pos.SecNbr;
1226:rtos/uC-FS/FAT/fs_fat_lfn.c ****         dir_cur_pos.SecPos = dir_end_pos.SecPos + FS_FAT_SIZE_DIR_ENTRY;
1227:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                 /* Chk sec validity (see Note #3). 
ARM GAS  /tmp/ccu2ENwm.s 			page 23


1228:rtos/uC-FS/FAT/fs_fat_lfn.c ****         dir_sec_valid      = FS_FAT_IS_VALID_SEC(p_fat_data, dir_end_pos.SecNbr);
1229:rtos/uC-FS/FAT/fs_fat_lfn.c ****     }
1230:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1231:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1232:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                 /* Invalid sec found (see Note #3).
1233:rtos/uC-FS/FAT/fs_fat_lfn.c ****     FS_TRACE_DBG(("FS_FAT_LFN_DirEntryFind(): Invalid sec gotten: %d.\r\n", dir_end_pos.SecNbr));
1234:rtos/uC-FS/FAT/fs_fat_lfn.c ****    *p_err = FS_ERR_ENTRY_CORRUPT;
1235:rtos/uC-FS/FAT/fs_fat_lfn.c **** }
1236:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1237:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1238:rtos/uC-FS/FAT/fs_fat_lfn.c **** /*
1239:rtos/uC-FS/FAT/fs_fat_lfn.c **** ***************************************************************************************************
1240:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                                    FS_FAT_LFN_NextDirEntryGet()
1241:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
1242:rtos/uC-FS/FAT/fs_fat_lfn.c **** * Description : Get next LFN dir entry from dir.
1243:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
1244:rtos/uC-FS/FAT/fs_fat_lfn.c **** * Argument(s) : p_vol               Pointer to volume.
1245:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
1246:rtos/uC-FS/FAT/fs_fat_lfn.c **** *               p_buf               Pointer to temporary buffer.
1247:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
1248:rtos/uC-FS/FAT/fs_fat_lfn.c **** *               name                String that will receive entry name.
1249:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                                       OR
1250:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                                   Pointer to NULL.
1251:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
1252:rtos/uC-FS/FAT/fs_fat_lfn.c **** *               p_dir_start_pos     Pointer to directory position at which search should start; var
1253:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                                   will receive the directory position at which the first entry (t
1254:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                                   first LFN entry or the SFN entry) is located.
1255:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
1256:rtos/uC-FS/FAT/fs_fat_lfn.c **** *               p_dir_end_pos       Pointer to variable that will receive the directory position at
1257:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                                   the final entry (the SFN entry) is located.
1258:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
1259:rtos/uC-FS/FAT/fs_fat_lfn.c **** *               p_err               Pointer to variable that will receive the return error code fro
1260:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
1261:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                                       FS_ERR_NONE    Directory entry gotten.
1262:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                                       FS_ERR_DEV     Device access error.
1263:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                                       FS_ERR_EOF     End of directory reached.
1264:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
1265:rtos/uC-FS/FAT/fs_fat_lfn.c **** * Return(s)   : none.
1266:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
1267:rtos/uC-FS/FAT/fs_fat_lfn.c **** * Note(s)     : (1) The lower nibble of the first byte of a LFN directory entry is the index of tha
1268:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                   entry in the group of LFN entries for the SFN.  The first LFN entry (i.e., the 
1269:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                   located in the lowest position of the lowest sector) contains the final charact
1270:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                   of the LFN & has the highest index.  Additionally, the first LFN entry will hav
1271:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                   sixth bit of the first byte set.
1272:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
1273:rtos/uC-FS/FAT/fs_fat_lfn.c **** *               (2) The checksum of a LFN becomes invalid if the SFN is modified or deleted by a LF
1274:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                   ignorant system.  In the case of an invalid checksum, the SFN is the correct na
1275:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
1276:rtos/uC-FS/FAT/fs_fat_lfn.c **** *               (3) The sector number gotten from the FAT should be valid.  These checks are effect
1277:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                   redundant.
1278:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
1279:rtos/uC-FS/FAT/fs_fat_lfn.c **** *               (4) Windows stores case information for the short file name in the NTRes byte of th
1280:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                   directory entry :
1281:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                   (a) If bit 3 is set, the name characters are lower case.
1282:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                   (b) If bit 4 is set, the extension characters are lower case.
1283:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
1284:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                   Names of entries created by systems that do not appropriate set NTRes bits upon
ARM GAS  /tmp/ccu2ENwm.s 			page 24


1285:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                   creation will not be returned in the intended case; however, since all file nam
1286:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                   comparisons are caseless, driver operation is unaffected.
1287:rtos/uC-FS/FAT/fs_fat_lfn.c **** ***************************************************************************************************
1288:rtos/uC-FS/FAT/fs_fat_lfn.c **** */
1289:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1290:rtos/uC-FS/FAT/fs_fat_lfn.c **** static  void  FS_FAT_LFN_NextDirEntryGet (FS_VOL           *p_vol,
1291:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                           FS_BUF           *p_buf,
1292:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                           void             *name,
1293:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                           FS_FAT_DIR_POS   *p_dir_start_pos,
1294:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                           FS_FAT_DIR_POS   *p_dir_end_pos,
1295:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                           FS_ERR           *p_err)
1296:rtos/uC-FS/FAT/fs_fat_lfn.c **** {
1297:rtos/uC-FS/FAT/fs_fat_lfn.c ****     CPU_INT08U         attrib;
1298:rtos/uC-FS/FAT/fs_fat_lfn.c ****     CPU_INT08U         chksum;
1299:rtos/uC-FS/FAT/fs_fat_lfn.c ****     CPU_INT08U         chksum_calc;
1300:rtos/uC-FS/FAT/fs_fat_lfn.c ****     FS_FLAGS           chksum_correctly_set;
1301:rtos/uC-FS/FAT/fs_fat_lfn.c ****     FS_FAT_DIR_POS     dir_cur_pos;
1302:rtos/uC-FS/FAT/fs_fat_lfn.c ****     FS_FAT_SEC_NBR     dir_next_sec;
1303:rtos/uC-FS/FAT/fs_fat_lfn.c ****     CPU_BOOLEAN        dir_sec_valid;
1304:rtos/uC-FS/FAT/fs_fat_lfn.c ****     CPU_BOOLEAN        ext_lower_case;
1305:rtos/uC-FS/FAT/fs_fat_lfn.c ****     CPU_BOOLEAN        has_lfn;
1306:rtos/uC-FS/FAT/fs_fat_lfn.c ****     CPU_BOOLEAN        lfn_seq_nbr_invalid;
1307:rtos/uC-FS/FAT/fs_fat_lfn.c ****     CPU_INT08U         lfn_entry_cnt;
1308:rtos/uC-FS/FAT/fs_fat_lfn.c ****     CPU_BOOLEAN        lfn_entry_first;
1309:rtos/uC-FS/FAT/fs_fat_lfn.c ****     CPU_INT08U         lfn_seq_nbr;
1310:rtos/uC-FS/FAT/fs_fat_lfn.c ****     FS_FILE_NAME_LEN   lfn_len;
1311:rtos/uC-FS/FAT/fs_fat_lfn.c ****     FS_FILE_NAME_LEN   lfn_pos;
1312:rtos/uC-FS/FAT/fs_fat_lfn.c ****     CPU_BOOLEAN        long_name;
1313:rtos/uC-FS/FAT/fs_fat_lfn.c ****     CPU_INT08U         name_char;
1314:rtos/uC-FS/FAT/fs_fat_lfn.c ****     CPU_BOOLEAN        name_lower_case;
1315:rtos/uC-FS/FAT/fs_fat_lfn.c ****     CPU_INT08U         ntres;
1316:rtos/uC-FS/FAT/fs_fat_lfn.c ****     FS_FAT_LFN_CHAR   *p_name_char;
1317:rtos/uC-FS/FAT/fs_fat_lfn.c ****     FS_FAT_DATA       *p_fat_data;
1318:rtos/uC-FS/FAT/fs_fat_lfn.c ****     CPU_INT08U        *p_dir_entry;
1319:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1320:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1321:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1322:rtos/uC-FS/FAT/fs_fat_lfn.c ****     p_dir_end_pos->SecNbr =  0u;                                /* Dflt dir end pos.               
1323:rtos/uC-FS/FAT/fs_fat_lfn.c ****     p_dir_end_pos->SecPos =  0u;
1324:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1325:rtos/uC-FS/FAT/fs_fat_lfn.c ****     chksum                =  0u;
1326:rtos/uC-FS/FAT/fs_fat_lfn.c ****     chksum_correctly_set  =  DEF_NO;
1327:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1328:rtos/uC-FS/FAT/fs_fat_lfn.c ****     lfn_entry_cnt         =  0u;
1329:rtos/uC-FS/FAT/fs_fat_lfn.c ****     has_lfn               =  DEF_NO;
1330:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1331:rtos/uC-FS/FAT/fs_fat_lfn.c ****     p_name_char           = (FS_FAT_LFN_CHAR *)name;
1332:rtos/uC-FS/FAT/fs_fat_lfn.c ****     p_fat_data            = (FS_FAT_DATA     *)p_vol->DataPtr;
1333:rtos/uC-FS/FAT/fs_fat_lfn.c ****     p_dir_entry           = (CPU_INT08U      *)p_buf->DataPtr;
1334:rtos/uC-FS/FAT/fs_fat_lfn.c ****     p_dir_entry          +=  p_dir_start_pos->SecPos;
1335:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1336:rtos/uC-FS/FAT/fs_fat_lfn.c ****     dir_cur_pos.SecNbr    =  p_dir_start_pos->SecNbr;
1337:rtos/uC-FS/FAT/fs_fat_lfn.c ****     dir_cur_pos.SecPos    =  p_dir_start_pos->SecPos;
1338:rtos/uC-FS/FAT/fs_fat_lfn.c ****     dir_sec_valid         =  FS_FAT_IS_VALID_SEC(p_fat_data, dir_cur_pos.SecNbr);
1339:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1340:rtos/uC-FS/FAT/fs_fat_lfn.c ****     if (dir_sec_valid == DEF_NO) {
1341:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                 /* Invalid sec found (see Note #3).
ARM GAS  /tmp/ccu2ENwm.s 			page 25


1342:rtos/uC-FS/FAT/fs_fat_lfn.c ****         FS_TRACE_DBG(("FS_FAT_LFN_NextDirEntryGet(): Invalid sec gotten: %d.\r\n", dir_cur_pos.SecN
1343:rtos/uC-FS/FAT/fs_fat_lfn.c ****        *p_err = FS_ERR_ENTRY_CORRUPT;
1344:rtos/uC-FS/FAT/fs_fat_lfn.c ****         return;
1345:rtos/uC-FS/FAT/fs_fat_lfn.c ****     }
1346:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1347:rtos/uC-FS/FAT/fs_fat_lfn.c ****     FSBuf_Set(p_buf,
1348:rtos/uC-FS/FAT/fs_fat_lfn.c ****               dir_cur_pos.SecNbr,
1349:rtos/uC-FS/FAT/fs_fat_lfn.c ****               FS_VOL_SEC_TYPE_DIR,
1350:rtos/uC-FS/FAT/fs_fat_lfn.c ****               DEF_YES,
1351:rtos/uC-FS/FAT/fs_fat_lfn.c ****               p_err);
1352:rtos/uC-FS/FAT/fs_fat_lfn.c ****     if (*p_err != FS_ERR_NONE) {
1353:rtos/uC-FS/FAT/fs_fat_lfn.c ****          return;
1354:rtos/uC-FS/FAT/fs_fat_lfn.c ****     }
1355:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1356:rtos/uC-FS/FAT/fs_fat_lfn.c ****     while (DEF_YES) {
1357:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                 /* ------------------ RD NEXT DIR S
1358:rtos/uC-FS/FAT/fs_fat_lfn.c ****         if (dir_cur_pos.SecPos == p_fat_data->SecSize) {        /* If whole sector has been read   
1359:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                 /* Get next sector                 
1360:rtos/uC-FS/FAT/fs_fat_lfn.c ****             dir_next_sec = FS_FAT_SecNextGet(p_vol,
1361:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                              p_buf,
1362:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                              dir_cur_pos.SecNbr,
1363:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                              p_err);
1364:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1365:rtos/uC-FS/FAT/fs_fat_lfn.c ****             switch (*p_err) {
1366:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 case FS_ERR_NONE:
1367:rtos/uC-FS/FAT/fs_fat_lfn.c ****                      break;
1368:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1369:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 case FS_ERR_SYS_CLUS_CHAIN_END:
1370:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 case FS_ERR_SYS_CLUS_INVALID:
1371:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 case FS_ERR_DIR_FULL:
1372:rtos/uC-FS/FAT/fs_fat_lfn.c ****                      p_dir_end_pos->SecNbr = dir_cur_pos.SecNbr;
1373:rtos/uC-FS/FAT/fs_fat_lfn.c ****                      p_dir_end_pos->SecPos = dir_cur_pos.SecPos;
1374:rtos/uC-FS/FAT/fs_fat_lfn.c ****                     *p_err = FS_ERR_EOF;
1375:rtos/uC-FS/FAT/fs_fat_lfn.c ****                      return;
1376:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1377:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 case FS_ERR_DEV:
1378:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 default:
1379:rtos/uC-FS/FAT/fs_fat_lfn.c ****                      return;
1380:rtos/uC-FS/FAT/fs_fat_lfn.c ****             }
1381:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1382:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                 /* Chk sec validity (see Note #3). 
1383:rtos/uC-FS/FAT/fs_fat_lfn.c ****             dir_sec_valid      = FS_FAT_IS_VALID_SEC(p_fat_data, dir_next_sec);
1384:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1385:rtos/uC-FS/FAT/fs_fat_lfn.c ****             dir_cur_pos.SecNbr = dir_next_sec;
1386:rtos/uC-FS/FAT/fs_fat_lfn.c ****             dir_cur_pos.SecPos = 0u;
1387:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1388:rtos/uC-FS/FAT/fs_fat_lfn.c ****             if (dir_sec_valid == DEF_YES) {
1389:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 p_dir_entry = (CPU_INT08U *)p_buf->DataPtr;
1390:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1391:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 FSBuf_Set(p_buf,
1392:rtos/uC-FS/FAT/fs_fat_lfn.c ****                           dir_cur_pos.SecNbr,
1393:rtos/uC-FS/FAT/fs_fat_lfn.c ****                           FS_VOL_SEC_TYPE_DIR,
1394:rtos/uC-FS/FAT/fs_fat_lfn.c ****                           DEF_YES,
1395:rtos/uC-FS/FAT/fs_fat_lfn.c ****                           p_err);
1396:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1397:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 if (*p_err != FS_ERR_NONE) {
1398:rtos/uC-FS/FAT/fs_fat_lfn.c ****                     return;
ARM GAS  /tmp/ccu2ENwm.s 			page 26


1399:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 }
1400:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1401:rtos/uC-FS/FAT/fs_fat_lfn.c ****             } else {
1402:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                 /* Invalid sec found (see Note #3).
1403:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 FS_TRACE_DBG(("FS_FAT_LFN_NextDirEntryGet(): Invalid sec gotten: %d.\r\n", dir_cur_
1404:rtos/uC-FS/FAT/fs_fat_lfn.c ****                *p_err = FS_ERR_ENTRY_CORRUPT;
1405:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 return;
1406:rtos/uC-FS/FAT/fs_fat_lfn.c ****             }
1407:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1408:rtos/uC-FS/FAT/fs_fat_lfn.c ****         }
1409:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1410:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1411:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                 /* ------------- CHK IF LAST ENTRY 
1412:rtos/uC-FS/FAT/fs_fat_lfn.c ****         name_char = *p_dir_entry;
1413:rtos/uC-FS/FAT/fs_fat_lfn.c ****         if (name_char == FS_FAT_DIRENT_NAME_FREE) {             /* If dir entry free & all subseque
1414:rtos/uC-FS/FAT/fs_fat_lfn.c ****             p_dir_end_pos->SecNbr = dir_cur_pos.SecNbr;
1415:rtos/uC-FS/FAT/fs_fat_lfn.c ****             p_dir_end_pos->SecPos = dir_cur_pos.SecPos;
1416:rtos/uC-FS/FAT/fs_fat_lfn.c ****            *p_err = FS_ERR_EOF;                                 /* Could not find another entry    
1417:rtos/uC-FS/FAT/fs_fat_lfn.c ****             return;                                             /* ... rtn NULL ptr.               
1418:rtos/uC-FS/FAT/fs_fat_lfn.c ****         }
1419:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1420:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1421:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1422:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1423:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1424:rtos/uC-FS/FAT/fs_fat_lfn.c ****         if (name_char == FS_FAT_DIRENT_NAME_ERASED_AND_FREE) {  /* If dir entry free but not last. 
1425:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1426:rtos/uC-FS/FAT/fs_fat_lfn.c ****             lfn_entry_cnt = 0u;
1427:rtos/uC-FS/FAT/fs_fat_lfn.c ****             has_lfn       = DEF_NO;
1428:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1429:rtos/uC-FS/FAT/fs_fat_lfn.c ****         } else {                                                /* If dir entry NOT free.          
1430:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1431:rtos/uC-FS/FAT/fs_fat_lfn.c ****             attrib = *(p_dir_entry + FS_FAT_LFN_OFF_ATTR);
1432:rtos/uC-FS/FAT/fs_fat_lfn.c ****             long_name = FS_FAT_DIRENT_ATTR_IS_LONG_NAME(attrib);/* LFN attribute should always be 0
1433:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1434:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                 /* --------------------- LFN ENTRY 
1435:rtos/uC-FS/FAT/fs_fat_lfn.c ****             if (long_name == DEF_YES) {                         /* If dir entry is LFN entry       
1436:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1437:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                 /* Sequence number of lfn entry    
1438:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 lfn_seq_nbr = (name_char & FS_FAT_DIRENT_NAME_LONG_ENTRY_MASK);
1439:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1440:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 lfn_seq_nbr_invalid = (lfn_seq_nbr == 0u) || (lfn_seq_nbr > 20u);
1441:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 if (lfn_seq_nbr_invalid == DEF_YES) {           /* If sequence number is not valid 
1442:rtos/uC-FS/FAT/fs_fat_lfn.c ****                     lfn_entry_cnt = 0u;
1443:rtos/uC-FS/FAT/fs_fat_lfn.c ****                     has_lfn       = DEF_NO;
1444:rtos/uC-FS/FAT/fs_fat_lfn.c ****                     FS_TRACE_DBG(("FS_FAT_LFN_NextDirEntryGet(): LFN entry has an invalid sequence 
1445:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 } else {
1446:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                 /* 1st LFN entry.                  
1447:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                 /* 1st entry to be read is also the
1448:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                 /* Bit 7 of the sequence number sho
1449:rtos/uC-FS/FAT/fs_fat_lfn.c ****                     lfn_entry_first = DEF_BIT_IS_SET(name_char, FS_FAT_DIRENT_NAME_LAST_LONG_ENTRY)
1450:rtos/uC-FS/FAT/fs_fat_lfn.c ****                     if (lfn_entry_first == DEF_YES) {
1451:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1452:rtos/uC-FS/FAT/fs_fat_lfn.c ****                         has_lfn              =   DEF_NO;
1453:rtos/uC-FS/FAT/fs_fat_lfn.c ****                         lfn_entry_cnt        =   lfn_seq_nbr;
1454:rtos/uC-FS/FAT/fs_fat_lfn.c ****                         chksum               = *(p_dir_entry + FS_FAT_LFN_OFF_CHKSUM);
1455:rtos/uC-FS/FAT/fs_fat_lfn.c ****                         chksum_correctly_set =   DEF_YES;
ARM GAS  /tmp/ccu2ENwm.s 			page 27


1456:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1457:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                 /* Number of character in this LFN 
1458:rtos/uC-FS/FAT/fs_fat_lfn.c ****                         lfn_len = FS_FAT_LFN_Len((void *)p_dir_entry);
1459:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                 /* Start position of theses charact
1460:rtos/uC-FS/FAT/fs_fat_lfn.c ****                         lfn_pos = ((FS_FILE_NAME_LEN)lfn_entry_cnt - 1u) * FS_FAT_DIRENT_LFN_NBR_CH
1461:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1462:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                 /* If file name is shorter than or 
1463:rtos/uC-FS/FAT/fs_fat_lfn.c ****                         if (lfn_len + lfn_pos <= FS_FAT_MAX_FILE_NAME_LEN) {
1464:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1465:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                 /* If p_name_char is NOT a NULL poi
1466:rtos/uC-FS/FAT/fs_fat_lfn.c ****                             if (p_name_char != (FS_FAT_LFN_CHAR *)0) {
1467:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                 /* Parse LFN entry into LFN name bu
1468:rtos/uC-FS/FAT/fs_fat_lfn.c **** #if (FS_CFG_DBG_MEM_CLR_EN == DEF_ENABLED)
1469:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                 Mem_Clr((void *)p_name_char, FS_FAT_MAX_FILE_NAME_LEN);
1470:rtos/uC-FS/FAT/fs_fat_lfn.c **** #endif
1471:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                 FS_FAT_LFN_Parse((void *) p_dir_entry,
1472:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                          &p_name_char[lfn_pos],
1473:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                           lfn_len);
1474:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                 p_name_char[lfn_pos + lfn_len] =(FS_FAT_LFN_CHAR)ASCII_CHAR_NULL;
1475:rtos/uC-FS/FAT/fs_fat_lfn.c ****                             }
1476:rtos/uC-FS/FAT/fs_fat_lfn.c ****                             lfn_entry_cnt--;
1477:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1478:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                 /* If all LFN entries have been rea
1479:rtos/uC-FS/FAT/fs_fat_lfn.c ****                             if (lfn_pos == 0u) {
1480:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                 has_lfn = DEF_YES;
1481:rtos/uC-FS/FAT/fs_fat_lfn.c ****                             }
1482:rtos/uC-FS/FAT/fs_fat_lfn.c ****                             p_dir_start_pos->SecNbr = dir_cur_pos.SecNbr;
1483:rtos/uC-FS/FAT/fs_fat_lfn.c ****                             p_dir_start_pos->SecPos = dir_cur_pos.SecPos;
1484:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1485:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                 /* If file name is longer than max 
1486:rtos/uC-FS/FAT/fs_fat_lfn.c ****                         } else {
1487:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1488:rtos/uC-FS/FAT/fs_fat_lfn.c ****                             FS_TRACE_DBG(("FS_FAT_LFN_NextDirEntryGet(): LFN w/len %d > MAX_LEN = %
1489:rtos/uC-FS/FAT/fs_fat_lfn.c ****                             lfn_entry_cnt = 0u;
1490:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1491:rtos/uC-FS/FAT/fs_fat_lfn.c ****                         }
1492:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1493:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1494:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                 /* LFN entry, not 1st.             
1495:rtos/uC-FS/FAT/fs_fat_lfn.c ****                     } else if (lfn_entry_cnt == lfn_seq_nbr) {
1496:rtos/uC-FS/FAT/fs_fat_lfn.c ****                         lfn_pos = ((FS_FILE_NAME_LEN)lfn_entry_cnt - 1u) * FS_FAT_DIRENT_LFN_NBR_CH
1497:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1498:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                 /* If p_name_char is NOT a NULL poi
1499:rtos/uC-FS/FAT/fs_fat_lfn.c ****                         if (p_name_char != (FS_FAT_LFN_CHAR *)0) {
1500:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                 /* Parse LFN entry into LFN name bu
1501:rtos/uC-FS/FAT/fs_fat_lfn.c ****                             FS_FAT_LFN_ParseFull((void *) p_dir_entry,
1502:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                          &p_name_char[lfn_pos]);
1503:rtos/uC-FS/FAT/fs_fat_lfn.c ****                         }
1504:rtos/uC-FS/FAT/fs_fat_lfn.c ****                         lfn_entry_cnt--;
1505:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1506:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                 /* If all LFN entries have been rea
1507:rtos/uC-FS/FAT/fs_fat_lfn.c ****                         if (lfn_pos == 0u) {
1508:rtos/uC-FS/FAT/fs_fat_lfn.c ****                             has_lfn = DEF_YES;
1509:rtos/uC-FS/FAT/fs_fat_lfn.c ****                         }
1510:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1511:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                 /* Orphaned LFN entry?             
1512:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                 /* If LFN entry sequence number inv
ARM GAS  /tmp/ccu2ENwm.s 			page 28


1513:rtos/uC-FS/FAT/fs_fat_lfn.c ****                     } else {
1514:rtos/uC-FS/FAT/fs_fat_lfn.c ****                         FS_TRACE_DBG(("FS_FAT_LFN_NextDirEntryGet(): Orphaned LFN entries? starting
1515:rtos/uC-FS/FAT/fs_fat_lfn.c ****                         lfn_entry_cnt = 0u;
1516:rtos/uC-FS/FAT/fs_fat_lfn.c ****                         has_lfn       = DEF_NO;
1517:rtos/uC-FS/FAT/fs_fat_lfn.c ****                     }
1518:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1519:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 }
1520:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1521:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1522:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                 /* --------------------- SFN ENTRY 
1523:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                 /* If dir entry is SFN entry       
1524:rtos/uC-FS/FAT/fs_fat_lfn.c ****             } else if (DEF_BIT_IS_CLR(attrib, FS_FAT_DIRENT_ATTR_VOLUME_ID) == DEF_YES) {
1525:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 if (has_lfn == DEF_YES) {                       /* If SFN entry has matching LFN en
1526:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1527:rtos/uC-FS/FAT/fs_fat_lfn.c ****                     chksum_calc     = FS_FAT_LFN_ChkSumCalc((void *)p_dir_entry);
1528:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1529:rtos/uC-FS/FAT/fs_fat_lfn.c ****                     if (chksum_correctly_set == DEF_YES) {
1530:rtos/uC-FS/FAT/fs_fat_lfn.c ****                         if (chksum_calc != chksum) {
1531:rtos/uC-FS/FAT/fs_fat_lfn.c ****                             FS_TRACE_DBG(("FS_FAT_LFN_NextDirEntryGet(): LFN chksum mismatch for LF
1532:rtos/uC-FS/FAT/fs_fat_lfn.c ****                             has_lfn = DEF_NO;
1533:rtos/uC-FS/FAT/fs_fat_lfn.c ****                         }
1534:rtos/uC-FS/FAT/fs_fat_lfn.c ****                         chksum_correctly_set = DEF_NO;
1535:rtos/uC-FS/FAT/fs_fat_lfn.c ****                     } else {
1536:rtos/uC-FS/FAT/fs_fat_lfn.c ****                         FS_TRACE_DBG(("FS_FAT_LFN_NextDirEntryGet(): Orphaned LFN entries? starting
1537:rtos/uC-FS/FAT/fs_fat_lfn.c ****                     }
1538:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1539:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 }
1540:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1541:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 if (has_lfn == DEF_NO) {                        /* If SFN entry does not have match
1542:rtos/uC-FS/FAT/fs_fat_lfn.c ****                     p_dir_start_pos->SecNbr = dir_cur_pos.SecNbr;
1543:rtos/uC-FS/FAT/fs_fat_lfn.c ****                     p_dir_start_pos->SecPos = dir_cur_pos.SecPos;
1544:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1545:rtos/uC-FS/FAT/fs_fat_lfn.c ****                     if (p_name_char != (FS_FAT_LFN_CHAR *)0) {
1546:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                 /* Apply case (see Note #4).       
1547:rtos/uC-FS/FAT/fs_fat_lfn.c ****                         ntres           = MEM_VAL_GET_INT08U_LITTLE((void *)(p_dir_entry + FS_FAT_D
1548:rtos/uC-FS/FAT/fs_fat_lfn.c ****                         name_lower_case = DEF_BIT_IS_SET(ntres, FS_FAT_DIRENT_NTRES_NAME_LOWER_CASE
1549:rtos/uC-FS/FAT/fs_fat_lfn.c ****                         ext_lower_case  = DEF_BIT_IS_SET(ntres, FS_FAT_DIRENT_NTRES_EXT_LOWER_CASE)
1550:rtos/uC-FS/FAT/fs_fat_lfn.c **** #if (FS_CFG_DBG_MEM_CLR_EN == DEF_ENABLED)
1551:rtos/uC-FS/FAT/fs_fat_lfn.c ****                         Mem_Clr((void *)p_name_char, FS_FAT_MAX_FILE_NAME_LEN);
1552:rtos/uC-FS/FAT/fs_fat_lfn.c **** #endif
1553:rtos/uC-FS/FAT/fs_fat_lfn.c ****                         FS_FAT_LFN_SFN_Parse((void *)p_dir_entry,
1554:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                      p_name_char,
1555:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                      name_lower_case,
1556:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                      ext_lower_case);
1557:rtos/uC-FS/FAT/fs_fat_lfn.c ****                     }
1558:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 }
1559:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 p_dir_end_pos->SecNbr = dir_cur_pos.SecNbr;
1560:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 p_dir_end_pos->SecPos = dir_cur_pos.SecPos;
1561:rtos/uC-FS/FAT/fs_fat_lfn.c ****                *p_err = FS_ERR_NONE;
1562:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 return;
1563:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                 /* If entry is not a file entry    
1564:rtos/uC-FS/FAT/fs_fat_lfn.c ****             } else {
1565:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 lfn_entry_cnt = 0u;
1566:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 has_lfn       = DEF_NO;
1567:rtos/uC-FS/FAT/fs_fat_lfn.c ****             }
1568:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1569:rtos/uC-FS/FAT/fs_fat_lfn.c ****         }
ARM GAS  /tmp/ccu2ENwm.s 			page 29


1570:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1571:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1572:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1573:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                 /* ---------------- MOVE TO NEXT EN
1574:rtos/uC-FS/FAT/fs_fat_lfn.c ****         dir_cur_pos.SecPos += FS_FAT_SIZE_DIR_ENTRY;
1575:rtos/uC-FS/FAT/fs_fat_lfn.c ****         p_dir_entry        += FS_FAT_SIZE_DIR_ENTRY;
1576:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1577:rtos/uC-FS/FAT/fs_fat_lfn.c ****     }
1578:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1579:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1580:rtos/uC-FS/FAT/fs_fat_lfn.c **** }
1581:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1582:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1583:rtos/uC-FS/FAT/fs_fat_lfn.c **** /*
1584:rtos/uC-FS/FAT/fs_fat_lfn.c **** ***************************************************************************************************
1585:rtos/uC-FS/FAT/fs_fat_lfn.c **** ***************************************************************************************************
1586:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                                           LOCAL FUNCTIONS
1587:rtos/uC-FS/FAT/fs_fat_lfn.c **** ***************************************************************************************************
1588:rtos/uC-FS/FAT/fs_fat_lfn.c **** ***************************************************************************************************
1589:rtos/uC-FS/FAT/fs_fat_lfn.c **** */
1590:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1591:rtos/uC-FS/FAT/fs_fat_lfn.c **** /*
1592:rtos/uC-FS/FAT/fs_fat_lfn.c **** ***************************************************************************************************
1593:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                                          FS_FAT_LFN_Chk()
1594:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
1595:rtos/uC-FS/FAT/fs_fat_lfn.c **** * Description : Check whether file name is valid LFN.
1596:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
1597:rtos/uC-FS/FAT/fs_fat_lfn.c **** * Argument(s) : name                Name of the entry.
1598:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
1599:rtos/uC-FS/FAT/fs_fat_lfn.c **** *               p_name_len          Pointer to variable that will receive the length of the file na
1600:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
1601:rtos/uC-FS/FAT/fs_fat_lfn.c **** *               p_name_len_octet    Pointer to variable that will receive the length of the file na
1602:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
1603:rtos/uC-FS/FAT/fs_fat_lfn.c **** *               p_err               Pointer to variable that will receive the return error code fro
1604:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
1605:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                                       FS_ERR_NONE            File name valid.
1606:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                                       FS_ERR_NAME_INVALID    File name invalid.
1607:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
1608:rtos/uC-FS/FAT/fs_fat_lfn.c **** * Return(s)   : none.
1609:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
1610:rtos/uC-FS/FAT/fs_fat_lfn.c **** * Note(s)     : (1) If 'name' is not NULL, then it must point to an array of 'FS_FAT_MAX_FILE_NAME_
1611:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                   characters.
1612:rtos/uC-FS/FAT/fs_fat_lfn.c **** ***************************************************************************************************
1613:rtos/uC-FS/FAT/fs_fat_lfn.c **** */
1614:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1615:rtos/uC-FS/FAT/fs_fat_lfn.c **** static  void  FS_FAT_LFN_Chk (CPU_CHAR          *name,
1616:rtos/uC-FS/FAT/fs_fat_lfn.c ****                               FS_FILE_NAME_LEN  *p_name_len,
1617:rtos/uC-FS/FAT/fs_fat_lfn.c ****                               FS_FILE_NAME_LEN  *p_name_len_octet,
1618:rtos/uC-FS/FAT/fs_fat_lfn.c ****                               FS_ERR            *p_err)
1619:rtos/uC-FS/FAT/fs_fat_lfn.c **** {
  29              		.loc 1 1619 1 view -0
  30              		.cfi_startproc
  31              		@ args = 0, pretend = 0, frame = 0
  32              		@ frame_needed = 0, uses_anonymous_args = 0
  33              		@ link register save eliminated.
  34              		.loc 1 1619 1 is_stmt 0 view .LVU1
  35 0000 F0B4     		push	{r4, r5, r6, r7}
ARM GAS  /tmp/ccu2ENwm.s 			page 30


  36              	.LCFI0:
  37              		.cfi_def_cfa_offset 16
  38              		.cfi_offset 4, -16
  39              		.cfi_offset 5, -12
  40              		.cfi_offset 6, -8
  41              		.cfi_offset 7, -4
1620:rtos/uC-FS/FAT/fs_fat_lfn.c ****     CPU_BOOLEAN       is_legal;
  42              		.loc 1 1620 5 is_stmt 1 view .LVU2
1621:rtos/uC-FS/FAT/fs_fat_lfn.c ****     FS_FAT_LFN_CHAR   name_char;
  43              		.loc 1 1621 5 view .LVU3
1622:rtos/uC-FS/FAT/fs_fat_lfn.c ****     CPU_SIZE_T        name_char_len;
  44              		.loc 1 1622 5 view .LVU4
1623:rtos/uC-FS/FAT/fs_fat_lfn.c ****     FS_FILE_NAME_LEN  name_len;
  45              		.loc 1 1623 5 view .LVU5
1624:rtos/uC-FS/FAT/fs_fat_lfn.c ****     FS_FILE_NAME_LEN  name_len_octet;
  46              		.loc 1 1624 5 view .LVU6
1625:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1626:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1627:rtos/uC-FS/FAT/fs_fat_lfn.c ****     is_legal         = DEF_YES;
  47              		.loc 1 1627 5 view .LVU7
  48              	.LVL1:
1628:rtos/uC-FS/FAT/fs_fat_lfn.c ****     name_len         = 0u;
  49              		.loc 1 1628 5 view .LVU8
1629:rtos/uC-FS/FAT/fs_fat_lfn.c ****     name_len_octet   = 0u;
  50              		.loc 1 1629 5 view .LVU9
1630:rtos/uC-FS/FAT/fs_fat_lfn.c ****    *p_name_len       = 0u;
  51              		.loc 1 1630 4 view .LVU10
  52              		.loc 1 1630 22 is_stmt 0 view .LVU11
  53 0002 0024     		movs	r4, #0
  54 0004 0C80     		strh	r4, [r1]	@ movhi
1631:rtos/uC-FS/FAT/fs_fat_lfn.c ****    *p_name_len_octet = 0u;
  55              		.loc 1 1631 4 is_stmt 1 view .LVU12
  56              		.loc 1 1631 22 is_stmt 0 view .LVU13
  57 0006 1480     		strh	r4, [r2]	@ movhi
1632:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1633:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1634:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                 /* ------------------- CHK INIT CHA
1635:rtos/uC-FS/FAT/fs_fat_lfn.c **** #if (FS_CFG_UTF8_EN == DEF_ENABLED)
1636:rtos/uC-FS/FAT/fs_fat_lfn.c ****     name_char_len = MB_CharToWC(&name_char,
1637:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                  name,
1638:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                  MB_MAX_LEN);
1639:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1640:rtos/uC-FS/FAT/fs_fat_lfn.c ****     if (name_char_len > MB_MAX_LEN) {
1641:rtos/uC-FS/FAT/fs_fat_lfn.c ****         name_char = (FS_FAT_LFN_CHAR)ASCII_CHAR_NULL;
1642:rtos/uC-FS/FAT/fs_fat_lfn.c ****     }
1643:rtos/uC-FS/FAT/fs_fat_lfn.c **** #else
1644:rtos/uC-FS/FAT/fs_fat_lfn.c ****     name_char_len = 1u;
  58              		.loc 1 1644 5 is_stmt 1 view .LVU14
  59              	.LVL2:
1645:rtos/uC-FS/FAT/fs_fat_lfn.c ****     name_char     = *name;
  60              		.loc 1 1645 5 view .LVU15
  61              		.loc 1 1645 19 is_stmt 0 view .LVU16
  62 0008 0478     		ldrb	r4, [r0]	@ zero_extendqisi2
  63              	.LVL3:
1646:rtos/uC-FS/FAT/fs_fat_lfn.c **** #endif
1647:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1648:rtos/uC-FS/FAT/fs_fat_lfn.c ****     switch (name_char) {                                        /* Rtn err if first char is ' ', '\
ARM GAS  /tmp/ccu2ENwm.s 			page 31


  64              		.loc 1 1648 5 is_stmt 1 view .LVU17
  65 000a 202C     		cmp	r4, #32
  66 000c 06D0     		beq	.L2
  67 000e 5C2C     		cmp	r4, #92
  68 0010 04D0     		beq	.L2
  69 0012 1CB1     		cbz	r4, .L2
  70 0014 0026     		movs	r6, #0
  71 0016 3546     		mov	r5, r6
  72 0018 0127     		movs	r7, #1
  73 001a 1FE0     		b	.L3
  74              	.L2:
1649:rtos/uC-FS/FAT/fs_fat_lfn.c ****         case ASCII_CHAR_SPACE:
1650:rtos/uC-FS/FAT/fs_fat_lfn.c ****         case ASCII_CHAR_NULL:
1651:rtos/uC-FS/FAT/fs_fat_lfn.c ****         case FS_FAT_PATH_SEP_CHAR:
1652:rtos/uC-FS/FAT/fs_fat_lfn.c ****              FS_TRACE_DBG(("FS_FAT_LFN_Process(): Invalid first char.\n"));
  75              		.loc 1 1652 75 view .LVU18
1653:rtos/uC-FS/FAT/fs_fat_lfn.c ****             *p_err = FS_ERR_NAME_INVALID;
  76              		.loc 1 1653 13 view .LVU19
  77              		.loc 1 1653 20 is_stmt 0 view .LVU20
  78 001c 40F28732 		movw	r2, #903
  79              	.LVL4:
  80              		.loc 1 1653 20 view .LVU21
  81 0020 1A80     		strh	r2, [r3]	@ movhi
1654:rtos/uC-FS/FAT/fs_fat_lfn.c ****              return;
  82              		.loc 1 1654 14 is_stmt 1 view .LVU22
  83              	.LVL5:
  84              	.L1:
1655:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1656:rtos/uC-FS/FAT/fs_fat_lfn.c ****         default:
1657:rtos/uC-FS/FAT/fs_fat_lfn.c ****              break;
1658:rtos/uC-FS/FAT/fs_fat_lfn.c ****     }
1659:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1660:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1661:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                 /* ------------------- PROCESS PATH
1662:rtos/uC-FS/FAT/fs_fat_lfn.c ****     while ((name_char != (CPU_CHAR)ASCII_CHAR_NULL     ) &&     /* Process str until NULL char ... 
1663:rtos/uC-FS/FAT/fs_fat_lfn.c ****            (name_char != (CPU_CHAR)FS_FAT_PATH_SEP_CHAR) &&     /* ... or path sep        char ... 
1664:rtos/uC-FS/FAT/fs_fat_lfn.c ****            (is_legal  ==  DEF_YES                      )) {     /* ... or illegal name is found.   
1665:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1666:rtos/uC-FS/FAT/fs_fat_lfn.c ****         if (name_len <= FS_FAT_MAX_FILE_NAME_LEN) {
1667:rtos/uC-FS/FAT/fs_fat_lfn.c ****             is_legal = FS_FAT_IS_LEGAL_LFN_CHAR(name_char);
1668:rtos/uC-FS/FAT/fs_fat_lfn.c ****             if (is_legal == DEF_YES) {
1669:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 name_len_octet += (FS_FILE_NAME_LEN)name_char_len;
1670:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 name_len++;
1671:rtos/uC-FS/FAT/fs_fat_lfn.c ****             } else {
1672:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 FS_TRACE_DBG(("FS_FAT_LFN_Process(): Invalid character in file name: %c (0x%02X).\r
1673:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 is_legal = DEF_NO;
1674:rtos/uC-FS/FAT/fs_fat_lfn.c ****             }
1675:rtos/uC-FS/FAT/fs_fat_lfn.c ****         } else {                                                /* Name illegal if file name too lo
1676:rtos/uC-FS/FAT/fs_fat_lfn.c ****             FS_TRACE_DBG(("FS_FAT_LFN_Process(): File name too long.\r\n"));
1677:rtos/uC-FS/FAT/fs_fat_lfn.c ****             is_legal = DEF_NO;
1678:rtos/uC-FS/FAT/fs_fat_lfn.c ****         }
1679:rtos/uC-FS/FAT/fs_fat_lfn.c **** #if (FS_CFG_UTF8_EN == DEF_ENABLED)
1680:rtos/uC-FS/FAT/fs_fat_lfn.c ****         name         += name_char_len;
1681:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1682:rtos/uC-FS/FAT/fs_fat_lfn.c ****         name_char_len = MB_CharToWC(&name_char,
1683:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                      name,
1684:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                      MB_MAX_LEN);
ARM GAS  /tmp/ccu2ENwm.s 			page 32


1685:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1686:rtos/uC-FS/FAT/fs_fat_lfn.c ****         if (name_char_len > MB_MAX_LEN) {
1687:rtos/uC-FS/FAT/fs_fat_lfn.c ****             name_char = (FS_FAT_LFN_CHAR)ASCII_CHAR_NULL;
1688:rtos/uC-FS/FAT/fs_fat_lfn.c ****         }
1689:rtos/uC-FS/FAT/fs_fat_lfn.c **** #else
1690:rtos/uC-FS/FAT/fs_fat_lfn.c ****         name++;
1691:rtos/uC-FS/FAT/fs_fat_lfn.c ****         name_char = *name;
1692:rtos/uC-FS/FAT/fs_fat_lfn.c **** #endif
1693:rtos/uC-FS/FAT/fs_fat_lfn.c ****     }
1694:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1695:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1696:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                 /* ------------------- ASSIGN & RTN
1697:rtos/uC-FS/FAT/fs_fat_lfn.c ****     if (is_legal == DEF_NO) {                                   /* Rtn err if illegal name.        
1698:rtos/uC-FS/FAT/fs_fat_lfn.c ****        *p_err = FS_ERR_NAME_INVALID;
1699:rtos/uC-FS/FAT/fs_fat_lfn.c ****         return;
1700:rtos/uC-FS/FAT/fs_fat_lfn.c ****     }
1701:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1702:rtos/uC-FS/FAT/fs_fat_lfn.c ****    *p_name_len       = name_len;
1703:rtos/uC-FS/FAT/fs_fat_lfn.c ****    *p_name_len_octet = name_len_octet;
1704:rtos/uC-FS/FAT/fs_fat_lfn.c ****    *p_err            = FS_ERR_NONE;
1705:rtos/uC-FS/FAT/fs_fat_lfn.c **** }
  85              		.loc 1 1705 1 is_stmt 0 view .LVU23
  86 0022 F0BC     		pop	{r4, r5, r6, r7}
  87              	.LCFI1:
  88              		.cfi_remember_state
  89              		.cfi_restore 7
  90              		.cfi_restore 6
  91              		.cfi_restore 5
  92              		.cfi_restore 4
  93              		.cfi_def_cfa_offset 0
  94              	.LVL6:
  95              		.loc 1 1705 1 view .LVU24
  96 0024 7047     		bx	lr
  97              	.LVL7:
  98              	.L6:
  99              	.LCFI2:
 100              		.cfi_restore_state
1667:rtos/uC-FS/FAT/fs_fat_lfn.c ****             if (is_legal == DEF_YES) {
 101              		.loc 1 1667 24 discriminator 8 view .LVU25
 102 0026 3D2C     		cmp	r4, #61
 103 0028 24D0     		beq	.L7
1667:rtos/uC-FS/FAT/fs_fat_lfn.c ****             if (is_legal == DEF_YES) {
 104              		.loc 1 1667 24 discriminator 10 view .LVU26
 105 002a 3B2C     		cmp	r4, #59
 106 002c 22D0     		beq	.L7
1667:rtos/uC-FS/FAT/fs_fat_lfn.c ****             if (is_legal == DEF_YES) {
 107              		.loc 1 1667 24 discriminator 12 view .LVU27
 108 002e A4F1300C 		sub	ip, r4, #48
 109 0032 5FFA8CFC 		uxtb	ip, ip
 110 0036 BCF1090F 		cmp	ip, #9
 111 003a 1BD9     		bls	.L7
1667:rtos/uC-FS/FAT/fs_fat_lfn.c ****             if (is_legal == DEF_YES) {
 112              		.loc 1 1667 24 discriminator 14 view .LVU28
 113 003c A4F1200C 		sub	ip, r4, #32
 114 0040 5FFA8CFC 		uxtb	ip, ip
 115 0044 BCF10E0F 		cmp	ip, #14
 116 0048 19D8     		bhi	.L13
ARM GAS  /tmp/ccu2ENwm.s 			page 33


1667:rtos/uC-FS/FAT/fs_fat_lfn.c ****             if (is_legal == DEF_YES) {
 117              		.loc 1 1667 24 discriminator 15 view .LVU29
 118 004a 222C     		cmp	r4, #34
 119 004c 19D0     		beq	.L14
1667:rtos/uC-FS/FAT/fs_fat_lfn.c ****             if (is_legal == DEF_YES) {
 120              		.loc 1 1667 24 discriminator 17 view .LVU30
 121 004e 2A2C     		cmp	r4, #42
 122 0050 10D1     		bne	.L7
1673:rtos/uC-FS/FAT/fs_fat_lfn.c ****             }
 123              		.loc 1 1673 26 view .LVU31
 124 0052 0027     		movs	r7, #0
 125              	.LVL8:
1673:rtos/uC-FS/FAT/fs_fat_lfn.c ****             }
 126              		.loc 1 1673 26 view .LVU32
 127 0054 00E0     		b	.L5
 128              	.LVL9:
 129              	.L12:
1677:rtos/uC-FS/FAT/fs_fat_lfn.c ****         }
 130              		.loc 1 1677 22 view .LVU33
 131 0056 0027     		movs	r7, #0
 132              	.LVL10:
 133              	.L5:
1690:rtos/uC-FS/FAT/fs_fat_lfn.c ****         name_char = *name;
 134              		.loc 1 1690 9 is_stmt 1 view .LVU34
1691:rtos/uC-FS/FAT/fs_fat_lfn.c **** #endif
 135              		.loc 1 1691 9 view .LVU35
1691:rtos/uC-FS/FAT/fs_fat_lfn.c **** #endif
 136              		.loc 1 1691 19 is_stmt 0 view .LVU36
 137 0058 10F8014F 		ldrb	r4, [r0, #1]!	@ zero_extendqisi2
 138              	.LVL11:
 139              	.L3:
1662:rtos/uC-FS/FAT/fs_fat_lfn.c ****            (name_char != (CPU_CHAR)FS_FAT_PATH_SEP_CHAR) &&     /* ... or path sep        char ... 
 140              		.loc 1 1662 11 is_stmt 1 discriminator 1 view .LVU37
 141 005c 9CB1     		cbz	r4, .L8
1662:rtos/uC-FS/FAT/fs_fat_lfn.c ****            (name_char != (CPU_CHAR)FS_FAT_PATH_SEP_CHAR) &&     /* ... or path sep        char ... 
 142              		.loc 1 1662 58 is_stmt 0 discriminator 2 view .LVU38
 143 005e 5C2C     		cmp	r4, #92
 144 0060 11D0     		beq	.L8
1663:rtos/uC-FS/FAT/fs_fat_lfn.c ****            (is_legal  ==  DEF_YES                      )) {     /* ... or illegal name is found.   
 145              		.loc 1 1663 58 view .LVU39
 146 0062 87B1     		cbz	r7, .L8
1666:rtos/uC-FS/FAT/fs_fat_lfn.c ****             is_legal = FS_FAT_IS_LEGAL_LFN_CHAR(name_char);
 147              		.loc 1 1666 9 is_stmt 1 view .LVU40
1666:rtos/uC-FS/FAT/fs_fat_lfn.c ****             is_legal = FS_FAT_IS_LEGAL_LFN_CHAR(name_char);
 148              		.loc 1 1666 12 is_stmt 0 view .LVU41
 149 0064 FF2D     		cmp	r5, #255
 150 0066 F6D8     		bhi	.L12
1667:rtos/uC-FS/FAT/fs_fat_lfn.c ****             if (is_legal == DEF_YES) {
 151              		.loc 1 1667 13 is_stmt 1 view .LVU42
1667:rtos/uC-FS/FAT/fs_fat_lfn.c ****             if (is_legal == DEF_YES) {
 152              		.loc 1 1667 22 is_stmt 0 view .LVU43
 153 0068 3F2C     		cmp	r4, #63
 154 006a DCD9     		bls	.L6
1667:rtos/uC-FS/FAT/fs_fat_lfn.c ****             if (is_legal == DEF_YES) {
 155              		.loc 1 1667 24 discriminator 3 view .LVU44
 156 006c 7C2C     		cmp	r4, #124
 157 006e DAD0     		beq	.L6
ARM GAS  /tmp/ccu2ENwm.s 			page 34


1667:rtos/uC-FS/FAT/fs_fat_lfn.c ****             if (is_legal == DEF_YES) {
 158              		.loc 1 1667 24 discriminator 5 view .LVU45
 159 0070 7F2C     		cmp	r4, #127
 160 0072 D8D0     		beq	.L6
 161              	.L7:
 162              	.LVL12:
1669:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 name_len++;
 163              		.loc 1 1669 17 is_stmt 1 view .LVU46
1669:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 name_len++;
 164              		.loc 1 1669 32 is_stmt 0 view .LVU47
 165 0074 0136     		adds	r6, r6, #1
 166              	.LVL13:
1669:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 name_len++;
 167              		.loc 1 1669 32 view .LVU48
 168 0076 B6B2     		uxth	r6, r6
 169              	.LVL14:
1670:rtos/uC-FS/FAT/fs_fat_lfn.c ****             } else {
 170              		.loc 1 1670 17 is_stmt 1 view .LVU49
1670:rtos/uC-FS/FAT/fs_fat_lfn.c ****             } else {
 171              		.loc 1 1670 25 is_stmt 0 view .LVU50
 172 0078 0135     		adds	r5, r5, #1
 173              	.LVL15:
1670:rtos/uC-FS/FAT/fs_fat_lfn.c ****             } else {
 174              		.loc 1 1670 25 view .LVU51
 175 007a ADB2     		uxth	r5, r5
 176              	.LVL16:
1670:rtos/uC-FS/FAT/fs_fat_lfn.c ****             } else {
 177              		.loc 1 1670 25 view .LVU52
 178 007c ECE7     		b	.L5
 179              	.LVL17:
 180              	.L13:
1673:rtos/uC-FS/FAT/fs_fat_lfn.c ****             }
 181              		.loc 1 1673 26 view .LVU53
 182 007e 0027     		movs	r7, #0
 183              	.LVL18:
1673:rtos/uC-FS/FAT/fs_fat_lfn.c ****             }
 184              		.loc 1 1673 26 view .LVU54
 185 0080 EAE7     		b	.L5
 186              	.LVL19:
 187              	.L14:
1673:rtos/uC-FS/FAT/fs_fat_lfn.c ****             }
 188              		.loc 1 1673 26 view .LVU55
 189 0082 0027     		movs	r7, #0
 190              	.LVL20:
1673:rtos/uC-FS/FAT/fs_fat_lfn.c ****             }
 191              		.loc 1 1673 26 view .LVU56
 192 0084 E8E7     		b	.L5
 193              	.LVL21:
 194              	.L8:
1697:rtos/uC-FS/FAT/fs_fat_lfn.c ****        *p_err = FS_ERR_NAME_INVALID;
 195              		.loc 1 1697 5 is_stmt 1 view .LVU57
1697:rtos/uC-FS/FAT/fs_fat_lfn.c ****        *p_err = FS_ERR_NAME_INVALID;
 196              		.loc 1 1697 8 is_stmt 0 view .LVU58
 197 0086 27B1     		cbz	r7, .L17
1702:rtos/uC-FS/FAT/fs_fat_lfn.c ****    *p_name_len_octet = name_len_octet;
 198              		.loc 1 1702 4 is_stmt 1 view .LVU59
1702:rtos/uC-FS/FAT/fs_fat_lfn.c ****    *p_name_len_octet = name_len_octet;
ARM GAS  /tmp/ccu2ENwm.s 			page 35


 199              		.loc 1 1702 22 is_stmt 0 view .LVU60
 200 0088 0D80     		strh	r5, [r1]	@ movhi
1703:rtos/uC-FS/FAT/fs_fat_lfn.c ****    *p_err            = FS_ERR_NONE;
 201              		.loc 1 1703 4 is_stmt 1 view .LVU61
1703:rtos/uC-FS/FAT/fs_fat_lfn.c ****    *p_err            = FS_ERR_NONE;
 202              		.loc 1 1703 22 is_stmt 0 view .LVU62
 203 008a 1680     		strh	r6, [r2]	@ movhi
1704:rtos/uC-FS/FAT/fs_fat_lfn.c **** }
 204              		.loc 1 1704 4 is_stmt 1 view .LVU63
1704:rtos/uC-FS/FAT/fs_fat_lfn.c **** }
 205              		.loc 1 1704 22 is_stmt 0 view .LVU64
 206 008c 0022     		movs	r2, #0
 207              	.LVL22:
1704:rtos/uC-FS/FAT/fs_fat_lfn.c **** }
 208              		.loc 1 1704 22 view .LVU65
 209 008e 1A80     		strh	r2, [r3]	@ movhi
 210 0090 C7E7     		b	.L1
 211              	.LVL23:
 212              	.L17:
1698:rtos/uC-FS/FAT/fs_fat_lfn.c ****         return;
 213              		.loc 1 1698 8 is_stmt 1 view .LVU66
1698:rtos/uC-FS/FAT/fs_fat_lfn.c ****         return;
 214              		.loc 1 1698 15 is_stmt 0 view .LVU67
 215 0092 40F28732 		movw	r2, #903
 216              	.LVL24:
1698:rtos/uC-FS/FAT/fs_fat_lfn.c ****         return;
 217              		.loc 1 1698 15 view .LVU68
 218 0096 1A80     		strh	r2, [r3]	@ movhi
1699:rtos/uC-FS/FAT/fs_fat_lfn.c ****     }
 219              		.loc 1 1699 9 is_stmt 1 view .LVU69
 220 0098 C3E7     		b	.L1
 221              		.cfi_endproc
 222              	.LFE5:
 224              		.section	.text.FS_FAT_LFN_ChkSumCalc,"ax",%progbits
 225              		.align	1
 226              		.syntax unified
 227              		.thumb
 228              		.thumb_func
 229              		.fpu fpv4-sp-d16
 231              	FS_FAT_LFN_ChkSumCalc:
 232              	.LVL25:
 233              	.LFB6:
1706:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1707:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1708:rtos/uC-FS/FAT/fs_fat_lfn.c **** /*
1709:rtos/uC-FS/FAT/fs_fat_lfn.c **** ***************************************************************************************************
1710:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                                       FS_FAT_LFN_ChkSumCalc()
1711:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
1712:rtos/uC-FS/FAT/fs_fat_lfn.c **** * Description : Calculate LFN checksum.
1713:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
1714:rtos/uC-FS/FAT/fs_fat_lfn.c **** * Argument(s) : name_8_3    Entry SFN.
1715:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
1716:rtos/uC-FS/FAT/fs_fat_lfn.c **** * Return(s)   : LFN checksum
1717:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
1718:rtos/uC-FS/FAT/fs_fat_lfn.c **** * Note(s)     : (1) The checksum is calculated according to the algorithm given in [Ref 1], page 28
1719:rtos/uC-FS/FAT/fs_fat_lfn.c **** ***************************************************************************************************
1720:rtos/uC-FS/FAT/fs_fat_lfn.c **** */
ARM GAS  /tmp/ccu2ENwm.s 			page 36


1721:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1722:rtos/uC-FS/FAT/fs_fat_lfn.c **** static  CPU_INT08U  FS_FAT_LFN_ChkSumCalc (void  *name_8_3)
1723:rtos/uC-FS/FAT/fs_fat_lfn.c **** {
 234              		.loc 1 1723 1 view -0
 235              		.cfi_startproc
 236              		@ args = 0, pretend = 0, frame = 0
 237              		@ frame_needed = 0, uses_anonymous_args = 0
 238              		@ link register save eliminated.
 239              		.loc 1 1723 1 is_stmt 0 view .LVU71
 240 0000 0146     		mov	r1, r0
1724:rtos/uC-FS/FAT/fs_fat_lfn.c ****     CPU_INT08U   chk_sum;
 241              		.loc 1 1724 5 is_stmt 1 view .LVU72
1725:rtos/uC-FS/FAT/fs_fat_lfn.c ****     CPU_INT16U   name_8_3_len;
 242              		.loc 1 1725 5 view .LVU73
1726:rtos/uC-FS/FAT/fs_fat_lfn.c ****     CPU_INT08U  *name_8_3_08;
 243              		.loc 1 1726 5 view .LVU74
1727:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1728:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1729:rtos/uC-FS/FAT/fs_fat_lfn.c ****     chk_sum      = 0u;
 244              		.loc 1 1729 5 view .LVU75
 245              	.LVL26:
1730:rtos/uC-FS/FAT/fs_fat_lfn.c ****     name_8_3_len = 11u;
 246              		.loc 1 1730 5 view .LVU76
1731:rtos/uC-FS/FAT/fs_fat_lfn.c ****     name_8_3_08  = (CPU_INT08U *)name_8_3;
 247              		.loc 1 1731 5 view .LVU77
1732:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1733:rtos/uC-FS/FAT/fs_fat_lfn.c ****     while (name_8_3_len >= 1u) {
 248              		.loc 1 1733 5 view .LVU78
1730:rtos/uC-FS/FAT/fs_fat_lfn.c ****     name_8_3_08  = (CPU_INT08U *)name_8_3;
 249              		.loc 1 1730 18 is_stmt 0 view .LVU79
 250 0002 0B22     		movs	r2, #11
1729:rtos/uC-FS/FAT/fs_fat_lfn.c ****     name_8_3_len = 11u;
 251              		.loc 1 1729 18 view .LVU80
 252 0004 0020     		movs	r0, #0
 253              	.LVL27:
 254              		.loc 1 1733 11 view .LVU81
 255 0006 09E0     		b	.L19
 256              	.LVL28:
 257              	.L20:
1734:rtos/uC-FS/FAT/fs_fat_lfn.c ****         chk_sum = ((DEF_BIT_IS_SET(chk_sum, DEF_BIT_00) == DEF_YES) ? DEF_BIT_07 : DEF_BIT_NONE) + 
 258              		.loc 1 1734 9 is_stmt 1 view .LVU82
 259              		.loc 1 1734 98 is_stmt 0 view .LVU83
 260 0008 C301     		lsls	r3, r0, #7
 261 000a 43EA5003 		orr	r3, r3, r0, lsr #1
 262              		.loc 1 1734 117 view .LVU84
 263 000e 11F8010B 		ldrb	r0, [r1], #1	@ zero_extendqisi2
 264              	.LVL29:
 265              		.loc 1 1734 17 view .LVU85
 266 0012 50FA83F3 		uxtab	r3, r0, r3
 267 0016 D8B2     		uxtb	r0, r3
 268              	.LVL30:
1735:rtos/uC-FS/FAT/fs_fat_lfn.c ****         name_8_3_08++;
 269              		.loc 1 1735 9 is_stmt 1 view .LVU86
1736:rtos/uC-FS/FAT/fs_fat_lfn.c ****         name_8_3_len--;
 270              		.loc 1 1736 9 view .LVU87
 271              		.loc 1 1736 21 is_stmt 0 view .LVU88
 272 0018 013A     		subs	r2, r2, #1
ARM GAS  /tmp/ccu2ENwm.s 			page 37


 273              	.LVL31:
 274              		.loc 1 1736 21 view .LVU89
 275 001a 92B2     		uxth	r2, r2
 276              	.LVL32:
 277              	.L19:
1733:rtos/uC-FS/FAT/fs_fat_lfn.c ****         chk_sum = ((DEF_BIT_IS_SET(chk_sum, DEF_BIT_00) == DEF_YES) ? DEF_BIT_07 : DEF_BIT_NONE) + 
 278              		.loc 1 1733 11 is_stmt 1 view .LVU90
 279 001c 002A     		cmp	r2, #0
 280 001e F3D1     		bne	.L20
1737:rtos/uC-FS/FAT/fs_fat_lfn.c ****     }
1738:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1739:rtos/uC-FS/FAT/fs_fat_lfn.c ****     return (chk_sum);
1740:rtos/uC-FS/FAT/fs_fat_lfn.c **** }
 281              		.loc 1 1740 1 is_stmt 0 view .LVU91
 282 0020 7047     		bx	lr
 283              		.cfi_endproc
 284              	.LFE6:
 286              		.section	.text.FS_FAT_LFN_DirEntryFmt,"ax",%progbits
 287              		.align	1
 288              		.syntax unified
 289              		.thumb
 290              		.thumb_func
 291              		.fpu fpv4-sp-d16
 293              	FS_FAT_LFN_DirEntryFmt:
 294              	.LVL33:
 295              	.LFB7:
1741:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1742:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1743:rtos/uC-FS/FAT/fs_fat_lfn.c **** /*
1744:rtos/uC-FS/FAT/fs_fat_lfn.c **** ***************************************************************************************************
1745:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                                      FS_FAT_LFN_DirEntryFmt()
1746:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
1747:rtos/uC-FS/FAT/fs_fat_lfn.c **** * Description : Make directory entry for LFN entry.
1748:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
1749:rtos/uC-FS/FAT/fs_fat_lfn.c **** * Argument(s) : p_dir_entry     Pointer to buffer that will receive the directory entry.
1750:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
1751:rtos/uC-FS/FAT/fs_fat_lfn.c **** *               name            Entry name.
1752:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
1753:rtos/uC-FS/FAT/fs_fat_lfn.c **** *               char_cnt        Number of characters to write.
1754:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
1755:rtos/uC-FS/FAT/fs_fat_lfn.c **** *               chk_sum         Checksum of LFN entry.
1756:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
1757:rtos/uC-FS/FAT/fs_fat_lfn.c **** *               lfn_nbr         LFN sequence number.
1758:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
1759:rtos/uC-FS/FAT/fs_fat_lfn.c **** *               is_final        Indicates whether LFN entry is the final LFN entry :
1760:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
1761:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                                   DEF_YES, if the LFN entry is     the final LFN entry.
1762:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                                   DEF_NO,  if the LFN entry is NOT the final LFN entry.
1763:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
1764:rtos/uC-FS/FAT/fs_fat_lfn.c **** * Return(s)   : none.
1765:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
1766:rtos/uC-FS/FAT/fs_fat_lfn.c **** * Note(s)     : (1) The LFN directory entry format is specified in [Ref. 1], Page 28 :
1767:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
1768:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                   (a) The 0th byte contains the sequence number of the LFN entry in the LFN, star
1769:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                       at 1.  The final LFN entry for the LFN (which is stored in the lowest on-di
1770:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                       location) has its 6th bit set.
1771:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
ARM GAS  /tmp/ccu2ENwm.s 			page 38


1772:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                   (b) Up to 13 Unicode characters are stored in each LFN entry.  If the final LFN
1773:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                       for the LFN has fewer than 13 characters (neglecting a NULL character), the
1774:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                       NULL character is placed following the final LFN character.  Remaining char
1775:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                       slots, if any, are filled with 0xFFFF.
1776:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
1777:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                       ---------------------------------------------------------------------------
1778:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                       |    |   #1    |   #2    |   #3    |   #4    |   #5    |    |    |    |   #
1779:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                       ---------------------------------------------------------------------------
1780:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                       |   #7    |   #8    |   #9    |   #10   |   #11   |         |   #12   |   #
1781:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                       ---------------------------------------------------------------------------
1782:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
1783:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                   (c) The 11th byte contains the LFN entry attributes, 0x0F.
1784:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
1785:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                   (d) The 12th, 27th & 28th bytes are NULL.
1786:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
1787:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                   (e) The 13th byte contains the LFN entry checksum.  (See 'FS_FAT_LFN_ChkSumCalc
1788:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                       Note #2').
1789:rtos/uC-FS/FAT/fs_fat_lfn.c **** ***************************************************************************************************
1790:rtos/uC-FS/FAT/fs_fat_lfn.c **** */
1791:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1792:rtos/uC-FS/FAT/fs_fat_lfn.c **** #if (FS_CFG_RD_ONLY_EN == DEF_DISABLED)
1793:rtos/uC-FS/FAT/fs_fat_lfn.c **** static  void  FS_FAT_LFN_DirEntryFmt (void                  *p_dir_entry,
1794:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                       FS_FAT_LFN_CHAR       *name,
1795:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                       FS_FILE_NAME_LEN       char_cnt,
1796:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                       CPU_INT08U             chk_sum,
1797:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                       FS_FAT_DIR_ENTRY_QTY   lfn_nbr,
1798:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                       CPU_BOOLEAN            is_final)
1799:rtos/uC-FS/FAT/fs_fat_lfn.c **** {
 296              		.loc 1 1799 1 is_stmt 1 view -0
 297              		.cfi_startproc
 298              		@ args = 8, pretend = 0, frame = 0
 299              		@ frame_needed = 0, uses_anonymous_args = 0
 300              		@ link register save eliminated.
 301              		.loc 1 1799 1 is_stmt 0 view .LVU93
 302 0000 70B4     		push	{r4, r5, r6}
 303              	.LCFI3:
 304              		.cfi_def_cfa_offset 12
 305              		.cfi_offset 4, -12
 306              		.cfi_offset 5, -8
 307              		.cfi_offset 6, -4
 308 0002 9DF80C40 		ldrb	r4, [sp, #12]	@ zero_extendqisi2
1800:rtos/uC-FS/FAT/fs_fat_lfn.c ****     FS_FILE_NAME_LEN   char_cnt_wr;
 309              		.loc 1 1800 5 is_stmt 1 view .LVU94
1801:rtos/uC-FS/FAT/fs_fat_lfn.c ****     CPU_INT08U         marker;
 310              		.loc 1 1801 5 view .LVU95
1802:rtos/uC-FS/FAT/fs_fat_lfn.c ****     CPU_INT08U         i;
 311              		.loc 1 1802 5 view .LVU96
1803:rtos/uC-FS/FAT/fs_fat_lfn.c ****     CPU_INT08U        *p_dir_entry_08;
 312              		.loc 1 1803 5 view .LVU97
1804:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1805:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1806:rtos/uC-FS/FAT/fs_fat_lfn.c ****     char_cnt_wr    = 0u;
 313              		.loc 1 1806 5 view .LVU98
 314              	.LVL34:
1807:rtos/uC-FS/FAT/fs_fat_lfn.c ****     p_dir_entry_08 = (CPU_INT08U *)p_dir_entry;
 315              		.loc 1 1807 5 view .LVU99
1808:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
ARM GAS  /tmp/ccu2ENwm.s 			page 39


1809:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1810:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                 /* ----------------- LONG ENTRY MAR
1811:rtos/uC-FS/FAT/fs_fat_lfn.c ****     marker         = (is_final == DEF_YES) ? (lfn_nbr | FS_FAT_DIRENT_NAME_LAST_LONG_ENTRY)
 316              		.loc 1 1811 5 view .LVU100
 317              		.loc 1 1811 20 is_stmt 0 view .LVU101
 318 0006 9DF81050 		ldrb	r5, [sp, #16]	@ zero_extendqisi2
 319 000a 012D     		cmp	r5, #1
 320 000c 04D0     		beq	.L39
 321              	.L22:
 322              	.LVL35:
1812:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                            : (lfn_nbr);
1813:rtos/uC-FS/FAT/fs_fat_lfn.c ****    *p_dir_entry_08 = marker;
 323              		.loc 1 1813 4 is_stmt 1 discriminator 4 view .LVU102
 324              		.loc 1 1813 20 is_stmt 0 discriminator 4 view .LVU103
 325 000e 00F8014B 		strb	r4, [r0], #1
 326              	.LVL36:
1814:rtos/uC-FS/FAT/fs_fat_lfn.c ****     p_dir_entry_08++;
 327              		.loc 1 1814 5 is_stmt 1 discriminator 4 view .LVU104
1815:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1816:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1817:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1818:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                 /* ----------------- NAME CHARS 1 -
1819:rtos/uC-FS/FAT/fs_fat_lfn.c ****     for (i = 1u; i <= 5u; i++) {
 328              		.loc 1 1819 5 discriminator 4 view .LVU105
 329              		.loc 1 1819 12 is_stmt 0 discriminator 4 view .LVU106
 330 0012 0125     		movs	r5, #1
1806:rtos/uC-FS/FAT/fs_fat_lfn.c ****     p_dir_entry_08 = (CPU_INT08U *)p_dir_entry;
 331              		.loc 1 1806 20 discriminator 4 view .LVU107
 332 0014 0024     		movs	r4, #0
 333              	.LVL37:
 334              		.loc 1 1819 5 discriminator 4 view .LVU108
 335 0016 0EE0     		b	.L23
 336              	.LVL38:
 337              	.L39:
1811:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                            : (lfn_nbr);
 338              		.loc 1 1811 20 discriminator 1 view .LVU109
 339 0018 44F04004 		orr	r4, r4, #64
 340 001c F7E7     		b	.L22
 341              	.LVL39:
 342              	.L24:
1820:rtos/uC-FS/FAT/fs_fat_lfn.c ****         if (char_cnt_wr > char_cnt) {
1821:rtos/uC-FS/FAT/fs_fat_lfn.c ****            *p_dir_entry_08 = FS_FAT_LFN_CHAR_EMPTY_LO;
1822:rtos/uC-FS/FAT/fs_fat_lfn.c ****             p_dir_entry_08++;
1823:rtos/uC-FS/FAT/fs_fat_lfn.c ****            *p_dir_entry_08 = FS_FAT_LFN_CHAR_EMPTY_HI;
1824:rtos/uC-FS/FAT/fs_fat_lfn.c ****             p_dir_entry_08++;
1825:rtos/uC-FS/FAT/fs_fat_lfn.c ****         } else if (char_cnt_wr == char_cnt) {
 343              		.loc 1 1825 16 is_stmt 1 view .LVU110
 344              		.loc 1 1825 19 is_stmt 0 view .LVU111
 345 001e 9442     		cmp	r4, r2
 346 0020 12D0     		beq	.L40
1826:rtos/uC-FS/FAT/fs_fat_lfn.c ****            *p_dir_entry_08 = FS_FAT_LFN_CHAR_FINAL_LO;
1827:rtos/uC-FS/FAT/fs_fat_lfn.c ****             p_dir_entry_08++;
1828:rtos/uC-FS/FAT/fs_fat_lfn.c ****            *p_dir_entry_08 = FS_FAT_LFN_CHAR_FINAL_HI;
1829:rtos/uC-FS/FAT/fs_fat_lfn.c ****             p_dir_entry_08++;
1830:rtos/uC-FS/FAT/fs_fat_lfn.c ****         } else {
1831:rtos/uC-FS/FAT/fs_fat_lfn.c **** #if (FS_CFG_UTF8_EN == DEF_ENABLED)
1832:rtos/uC-FS/FAT/fs_fat_lfn.c ****            *p_dir_entry_08 = ((CPU_INT08U)(*name >> (0u * DEF_INT_08_NBR_BITS)) & DEF_INT_08_MASK);
ARM GAS  /tmp/ccu2ENwm.s 			page 40


1833:rtos/uC-FS/FAT/fs_fat_lfn.c ****             p_dir_entry_08++;
1834:rtos/uC-FS/FAT/fs_fat_lfn.c ****            *p_dir_entry_08 = ((CPU_INT08U)(*name >> (1u * DEF_INT_08_NBR_BITS)) & DEF_INT_08_MASK);
1835:rtos/uC-FS/FAT/fs_fat_lfn.c ****             p_dir_entry_08++;
1836:rtos/uC-FS/FAT/fs_fat_lfn.c **** #else
1837:rtos/uC-FS/FAT/fs_fat_lfn.c ****            *p_dir_entry_08 = (CPU_INT08U)*name;
 347              		.loc 1 1837 12 is_stmt 1 view .LVU112
 348              		.loc 1 1837 30 is_stmt 0 view .LVU113
 349 0022 11F8016B 		ldrb	r6, [r1], #1	@ zero_extendqisi2
 350              	.LVL40:
 351              		.loc 1 1837 28 view .LVU114
 352 0026 0670     		strb	r6, [r0]
1838:rtos/uC-FS/FAT/fs_fat_lfn.c ****             p_dir_entry_08++;
 353              		.loc 1 1838 13 is_stmt 1 view .LVU115
 354              	.LVL41:
1839:rtos/uC-FS/FAT/fs_fat_lfn.c ****            *p_dir_entry_08 = (CPU_INT08U) ASCII_CHAR_NULL;
 355              		.loc 1 1839 12 view .LVU116
 356              		.loc 1 1839 28 is_stmt 0 view .LVU117
 357 0028 0026     		movs	r6, #0
 358 002a 4670     		strb	r6, [r0, #1]
1840:rtos/uC-FS/FAT/fs_fat_lfn.c ****             p_dir_entry_08++;
 359              		.loc 1 1840 13 is_stmt 1 view .LVU118
 360              		.loc 1 1840 27 is_stmt 0 view .LVU119
 361 002c 0230     		adds	r0, r0, #2
 362              	.LVL42:
1841:rtos/uC-FS/FAT/fs_fat_lfn.c **** #endif
1842:rtos/uC-FS/FAT/fs_fat_lfn.c ****             name++;
 363              		.loc 1 1842 13 is_stmt 1 view .LVU120
 364              	.L25:
1843:rtos/uC-FS/FAT/fs_fat_lfn.c ****         }
1844:rtos/uC-FS/FAT/fs_fat_lfn.c ****         char_cnt_wr++;
 365              		.loc 1 1844 9 discriminator 2 view .LVU121
 366              		.loc 1 1844 20 is_stmt 0 discriminator 2 view .LVU122
 367 002e 0134     		adds	r4, r4, #1
 368              	.LVL43:
 369              		.loc 1 1844 20 discriminator 2 view .LVU123
 370 0030 A4B2     		uxth	r4, r4
 371              	.LVL44:
1819:rtos/uC-FS/FAT/fs_fat_lfn.c ****         if (char_cnt_wr > char_cnt) {
 372              		.loc 1 1819 27 is_stmt 1 discriminator 2 view .LVU124
1819:rtos/uC-FS/FAT/fs_fat_lfn.c ****         if (char_cnt_wr > char_cnt) {
 373              		.loc 1 1819 28 is_stmt 0 discriminator 2 view .LVU125
 374 0032 0135     		adds	r5, r5, #1
 375              	.LVL45:
1819:rtos/uC-FS/FAT/fs_fat_lfn.c ****         if (char_cnt_wr > char_cnt) {
 376              		.loc 1 1819 28 discriminator 2 view .LVU126
 377 0034 EDB2     		uxtb	r5, r5
 378              	.LVL46:
 379              	.L23:
1819:rtos/uC-FS/FAT/fs_fat_lfn.c ****         if (char_cnt_wr > char_cnt) {
 380              		.loc 1 1819 18 is_stmt 1 discriminator 1 view .LVU127
1819:rtos/uC-FS/FAT/fs_fat_lfn.c ****         if (char_cnt_wr > char_cnt) {
 381              		.loc 1 1819 5 is_stmt 0 discriminator 1 view .LVU128
 382 0036 052D     		cmp	r5, #5
 383 0038 0BD8     		bhi	.L41
1820:rtos/uC-FS/FAT/fs_fat_lfn.c ****            *p_dir_entry_08 = FS_FAT_LFN_CHAR_EMPTY_LO;
 384              		.loc 1 1820 9 is_stmt 1 view .LVU129
1820:rtos/uC-FS/FAT/fs_fat_lfn.c ****            *p_dir_entry_08 = FS_FAT_LFN_CHAR_EMPTY_LO;
ARM GAS  /tmp/ccu2ENwm.s 			page 41


 385              		.loc 1 1820 12 is_stmt 0 view .LVU130
 386 003a 9442     		cmp	r4, r2
 387 003c EFD9     		bls	.L24
1821:rtos/uC-FS/FAT/fs_fat_lfn.c ****             p_dir_entry_08++;
 388              		.loc 1 1821 12 is_stmt 1 view .LVU131
1821:rtos/uC-FS/FAT/fs_fat_lfn.c ****             p_dir_entry_08++;
 389              		.loc 1 1821 28 is_stmt 0 view .LVU132
 390 003e FF26     		movs	r6, #255
 391 0040 0670     		strb	r6, [r0]
1822:rtos/uC-FS/FAT/fs_fat_lfn.c ****            *p_dir_entry_08 = FS_FAT_LFN_CHAR_EMPTY_HI;
 392              		.loc 1 1822 13 is_stmt 1 view .LVU133
 393              	.LVL47:
1823:rtos/uC-FS/FAT/fs_fat_lfn.c ****             p_dir_entry_08++;
 394              		.loc 1 1823 12 view .LVU134
1823:rtos/uC-FS/FAT/fs_fat_lfn.c ****             p_dir_entry_08++;
 395              		.loc 1 1823 28 is_stmt 0 view .LVU135
 396 0042 4670     		strb	r6, [r0, #1]
1824:rtos/uC-FS/FAT/fs_fat_lfn.c ****         } else if (char_cnt_wr == char_cnt) {
 397              		.loc 1 1824 13 is_stmt 1 view .LVU136
1824:rtos/uC-FS/FAT/fs_fat_lfn.c ****         } else if (char_cnt_wr == char_cnt) {
 398              		.loc 1 1824 27 is_stmt 0 view .LVU137
 399 0044 0230     		adds	r0, r0, #2
 400              	.LVL48:
1824:rtos/uC-FS/FAT/fs_fat_lfn.c ****         } else if (char_cnt_wr == char_cnt) {
 401              		.loc 1 1824 27 view .LVU138
 402 0046 F2E7     		b	.L25
 403              	.L40:
1826:rtos/uC-FS/FAT/fs_fat_lfn.c ****             p_dir_entry_08++;
 404              		.loc 1 1826 12 is_stmt 1 view .LVU139
1826:rtos/uC-FS/FAT/fs_fat_lfn.c ****             p_dir_entry_08++;
 405              		.loc 1 1826 28 is_stmt 0 view .LVU140
 406 0048 0026     		movs	r6, #0
 407 004a 0670     		strb	r6, [r0]
1827:rtos/uC-FS/FAT/fs_fat_lfn.c ****            *p_dir_entry_08 = FS_FAT_LFN_CHAR_FINAL_HI;
 408              		.loc 1 1827 13 is_stmt 1 view .LVU141
 409              	.LVL49:
1828:rtos/uC-FS/FAT/fs_fat_lfn.c ****             p_dir_entry_08++;
 410              		.loc 1 1828 12 view .LVU142
1828:rtos/uC-FS/FAT/fs_fat_lfn.c ****             p_dir_entry_08++;
 411              		.loc 1 1828 28 is_stmt 0 view .LVU143
 412 004c 4670     		strb	r6, [r0, #1]
1829:rtos/uC-FS/FAT/fs_fat_lfn.c ****         } else {
 413              		.loc 1 1829 13 is_stmt 1 view .LVU144
1829:rtos/uC-FS/FAT/fs_fat_lfn.c ****         } else {
 414              		.loc 1 1829 27 is_stmt 0 view .LVU145
 415 004e 0230     		adds	r0, r0, #2
 416              	.LVL50:
1829:rtos/uC-FS/FAT/fs_fat_lfn.c ****         } else {
 417              		.loc 1 1829 27 view .LVU146
 418 0050 EDE7     		b	.L25
 419              	.L41:
1845:rtos/uC-FS/FAT/fs_fat_lfn.c ****     }
1846:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1847:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1848:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1849:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                 /* ---------------- DIR ENTRY ATTRI
1850:rtos/uC-FS/FAT/fs_fat_lfn.c ****    *p_dir_entry_08 = FS_FAT_DIRENT_ATTR_LONG_NAME;              /* Long file name.                 
ARM GAS  /tmp/ccu2ENwm.s 			page 42


 420              		.loc 1 1850 4 is_stmt 1 view .LVU147
 421              		.loc 1 1850 20 is_stmt 0 view .LVU148
 422 0052 0F25     		movs	r5, #15
 423              	.LVL51:
 424              		.loc 1 1850 20 view .LVU149
 425 0054 0570     		strb	r5, [r0]
1851:rtos/uC-FS/FAT/fs_fat_lfn.c ****     p_dir_entry_08++;
 426              		.loc 1 1851 5 is_stmt 1 view .LVU150
 427              	.LVL52:
1852:rtos/uC-FS/FAT/fs_fat_lfn.c ****    *p_dir_entry_08 = 0x00u;                                     /* NULL byte.                      
 428              		.loc 1 1852 4 view .LVU151
 429              		.loc 1 1852 20 is_stmt 0 view .LVU152
 430 0056 0025     		movs	r5, #0
 431 0058 4570     		strb	r5, [r0, #1]
1853:rtos/uC-FS/FAT/fs_fat_lfn.c ****     p_dir_entry_08++;
 432              		.loc 1 1853 5 is_stmt 1 view .LVU153
 433              	.LVL53:
1854:rtos/uC-FS/FAT/fs_fat_lfn.c ****    *p_dir_entry_08 = chk_sum;                                   /* Checksum.                       
 434              		.loc 1 1854 4 view .LVU154
 435              		.loc 1 1854 20 is_stmt 0 view .LVU155
 436 005a 8370     		strb	r3, [r0, #2]
1855:rtos/uC-FS/FAT/fs_fat_lfn.c ****     p_dir_entry_08++;
 437              		.loc 1 1855 5 is_stmt 1 view .LVU156
 438              		.loc 1 1855 19 is_stmt 0 view .LVU157
 439 005c C31C     		adds	r3, r0, #3
 440              	.LVL54:
1856:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1857:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1858:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1859:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                 /* ----------------- NAME CHARS 6 -
1860:rtos/uC-FS/FAT/fs_fat_lfn.c ****     for (i = 6u; i <= 11u; i++) {
 441              		.loc 1 1860 5 is_stmt 1 view .LVU158
 442              		.loc 1 1860 12 is_stmt 0 view .LVU159
 443 005e 0620     		movs	r0, #6
 444              	.LVL55:
 445              		.loc 1 1860 5 view .LVU160
 446 0060 0BE0     		b	.L28
 447              	.LVL56:
 448              	.L29:
1861:rtos/uC-FS/FAT/fs_fat_lfn.c ****         if (char_cnt_wr > char_cnt) {
1862:rtos/uC-FS/FAT/fs_fat_lfn.c ****            *p_dir_entry_08 = FS_FAT_LFN_CHAR_EMPTY_LO;
1863:rtos/uC-FS/FAT/fs_fat_lfn.c ****             p_dir_entry_08++;
1864:rtos/uC-FS/FAT/fs_fat_lfn.c ****            *p_dir_entry_08 = FS_FAT_LFN_CHAR_EMPTY_HI;
1865:rtos/uC-FS/FAT/fs_fat_lfn.c ****             p_dir_entry_08++;
1866:rtos/uC-FS/FAT/fs_fat_lfn.c ****         } else if (char_cnt_wr == char_cnt) {
 449              		.loc 1 1866 16 is_stmt 1 view .LVU161
 450              		.loc 1 1866 19 is_stmt 0 view .LVU162
 451 0062 9442     		cmp	r4, r2
 452 0064 12D0     		beq	.L42
1867:rtos/uC-FS/FAT/fs_fat_lfn.c ****            *p_dir_entry_08 = FS_FAT_LFN_CHAR_FINAL_LO;
1868:rtos/uC-FS/FAT/fs_fat_lfn.c ****             p_dir_entry_08++;
1869:rtos/uC-FS/FAT/fs_fat_lfn.c ****            *p_dir_entry_08 = FS_FAT_LFN_CHAR_FINAL_HI;
1870:rtos/uC-FS/FAT/fs_fat_lfn.c ****             p_dir_entry_08++;
1871:rtos/uC-FS/FAT/fs_fat_lfn.c ****         } else {
1872:rtos/uC-FS/FAT/fs_fat_lfn.c **** #if (FS_CFG_UTF8_EN == DEF_ENABLED)
1873:rtos/uC-FS/FAT/fs_fat_lfn.c ****            *p_dir_entry_08 = ((CPU_INT08U)(*name >> (0u * DEF_INT_08_NBR_BITS)) & DEF_INT_08_MASK);
1874:rtos/uC-FS/FAT/fs_fat_lfn.c ****             p_dir_entry_08++;
ARM GAS  /tmp/ccu2ENwm.s 			page 43


1875:rtos/uC-FS/FAT/fs_fat_lfn.c ****            *p_dir_entry_08 = ((CPU_INT08U)(*name >> (1u * DEF_INT_08_NBR_BITS)) & DEF_INT_08_MASK);
1876:rtos/uC-FS/FAT/fs_fat_lfn.c ****             p_dir_entry_08++;
1877:rtos/uC-FS/FAT/fs_fat_lfn.c **** #else
1878:rtos/uC-FS/FAT/fs_fat_lfn.c ****            *p_dir_entry_08 = (CPU_INT08U)*name;
 453              		.loc 1 1878 12 is_stmt 1 view .LVU163
 454              		.loc 1 1878 30 is_stmt 0 view .LVU164
 455 0066 11F8015B 		ldrb	r5, [r1], #1	@ zero_extendqisi2
 456              	.LVL57:
 457              		.loc 1 1878 28 view .LVU165
 458 006a 1D70     		strb	r5, [r3]
1879:rtos/uC-FS/FAT/fs_fat_lfn.c ****             p_dir_entry_08++;
 459              		.loc 1 1879 13 is_stmt 1 view .LVU166
 460              	.LVL58:
1880:rtos/uC-FS/FAT/fs_fat_lfn.c ****            *p_dir_entry_08 = (CPU_INT08U) ASCII_CHAR_NULL;
 461              		.loc 1 1880 12 view .LVU167
 462              		.loc 1 1880 28 is_stmt 0 view .LVU168
 463 006c 0025     		movs	r5, #0
 464 006e 5D70     		strb	r5, [r3, #1]
1881:rtos/uC-FS/FAT/fs_fat_lfn.c ****             p_dir_entry_08++;
 465              		.loc 1 1881 13 is_stmt 1 view .LVU169
 466              		.loc 1 1881 27 is_stmt 0 view .LVU170
 467 0070 0233     		adds	r3, r3, #2
 468              	.LVL59:
1882:rtos/uC-FS/FAT/fs_fat_lfn.c **** #endif
1883:rtos/uC-FS/FAT/fs_fat_lfn.c ****             name++;
 469              		.loc 1 1883 13 is_stmt 1 view .LVU171
 470              	.L30:
1884:rtos/uC-FS/FAT/fs_fat_lfn.c ****         }
1885:rtos/uC-FS/FAT/fs_fat_lfn.c ****         char_cnt_wr++;
 471              		.loc 1 1885 9 discriminator 2 view .LVU172
 472              		.loc 1 1885 20 is_stmt 0 discriminator 2 view .LVU173
 473 0072 0134     		adds	r4, r4, #1
 474              	.LVL60:
 475              		.loc 1 1885 20 discriminator 2 view .LVU174
 476 0074 A4B2     		uxth	r4, r4
 477              	.LVL61:
1860:rtos/uC-FS/FAT/fs_fat_lfn.c ****         if (char_cnt_wr > char_cnt) {
 478              		.loc 1 1860 28 is_stmt 1 discriminator 2 view .LVU175
1860:rtos/uC-FS/FAT/fs_fat_lfn.c ****         if (char_cnt_wr > char_cnt) {
 479              		.loc 1 1860 29 is_stmt 0 discriminator 2 view .LVU176
 480 0076 0130     		adds	r0, r0, #1
 481              	.LVL62:
1860:rtos/uC-FS/FAT/fs_fat_lfn.c ****         if (char_cnt_wr > char_cnt) {
 482              		.loc 1 1860 29 discriminator 2 view .LVU177
 483 0078 C0B2     		uxtb	r0, r0
 484              	.LVL63:
 485              	.L28:
1860:rtos/uC-FS/FAT/fs_fat_lfn.c ****         if (char_cnt_wr > char_cnt) {
 486              		.loc 1 1860 18 is_stmt 1 discriminator 1 view .LVU178
1860:rtos/uC-FS/FAT/fs_fat_lfn.c ****         if (char_cnt_wr > char_cnt) {
 487              		.loc 1 1860 5 is_stmt 0 discriminator 1 view .LVU179
 488 007a 0B28     		cmp	r0, #11
 489 007c 0BD8     		bhi	.L43
1861:rtos/uC-FS/FAT/fs_fat_lfn.c ****            *p_dir_entry_08 = FS_FAT_LFN_CHAR_EMPTY_LO;
 490              		.loc 1 1861 9 is_stmt 1 view .LVU180
1861:rtos/uC-FS/FAT/fs_fat_lfn.c ****            *p_dir_entry_08 = FS_FAT_LFN_CHAR_EMPTY_LO;
 491              		.loc 1 1861 12 is_stmt 0 view .LVU181
ARM GAS  /tmp/ccu2ENwm.s 			page 44


 492 007e 9442     		cmp	r4, r2
 493 0080 EFD9     		bls	.L29
1862:rtos/uC-FS/FAT/fs_fat_lfn.c ****             p_dir_entry_08++;
 494              		.loc 1 1862 12 is_stmt 1 view .LVU182
1862:rtos/uC-FS/FAT/fs_fat_lfn.c ****             p_dir_entry_08++;
 495              		.loc 1 1862 28 is_stmt 0 view .LVU183
 496 0082 FF25     		movs	r5, #255
 497 0084 1D70     		strb	r5, [r3]
1863:rtos/uC-FS/FAT/fs_fat_lfn.c ****            *p_dir_entry_08 = FS_FAT_LFN_CHAR_EMPTY_HI;
 498              		.loc 1 1863 13 is_stmt 1 view .LVU184
 499              	.LVL64:
1864:rtos/uC-FS/FAT/fs_fat_lfn.c ****             p_dir_entry_08++;
 500              		.loc 1 1864 12 view .LVU185
1864:rtos/uC-FS/FAT/fs_fat_lfn.c ****             p_dir_entry_08++;
 501              		.loc 1 1864 28 is_stmt 0 view .LVU186
 502 0086 5D70     		strb	r5, [r3, #1]
1865:rtos/uC-FS/FAT/fs_fat_lfn.c ****         } else if (char_cnt_wr == char_cnt) {
 503              		.loc 1 1865 13 is_stmt 1 view .LVU187
1865:rtos/uC-FS/FAT/fs_fat_lfn.c ****         } else if (char_cnt_wr == char_cnt) {
 504              		.loc 1 1865 27 is_stmt 0 view .LVU188
 505 0088 0233     		adds	r3, r3, #2
 506              	.LVL65:
1865:rtos/uC-FS/FAT/fs_fat_lfn.c ****         } else if (char_cnt_wr == char_cnt) {
 507              		.loc 1 1865 27 view .LVU189
 508 008a F2E7     		b	.L30
 509              	.L42:
1867:rtos/uC-FS/FAT/fs_fat_lfn.c ****             p_dir_entry_08++;
 510              		.loc 1 1867 12 is_stmt 1 view .LVU190
1867:rtos/uC-FS/FAT/fs_fat_lfn.c ****             p_dir_entry_08++;
 511              		.loc 1 1867 28 is_stmt 0 view .LVU191
 512 008c 0025     		movs	r5, #0
 513 008e 1D70     		strb	r5, [r3]
1868:rtos/uC-FS/FAT/fs_fat_lfn.c ****            *p_dir_entry_08 = FS_FAT_LFN_CHAR_FINAL_HI;
 514              		.loc 1 1868 13 is_stmt 1 view .LVU192
 515              	.LVL66:
1869:rtos/uC-FS/FAT/fs_fat_lfn.c ****             p_dir_entry_08++;
 516              		.loc 1 1869 12 view .LVU193
1869:rtos/uC-FS/FAT/fs_fat_lfn.c ****             p_dir_entry_08++;
 517              		.loc 1 1869 28 is_stmt 0 view .LVU194
 518 0090 5D70     		strb	r5, [r3, #1]
1870:rtos/uC-FS/FAT/fs_fat_lfn.c ****         } else {
 519              		.loc 1 1870 13 is_stmt 1 view .LVU195
1870:rtos/uC-FS/FAT/fs_fat_lfn.c ****         } else {
 520              		.loc 1 1870 27 is_stmt 0 view .LVU196
 521 0092 0233     		adds	r3, r3, #2
 522              	.LVL67:
1870:rtos/uC-FS/FAT/fs_fat_lfn.c ****         } else {
 523              		.loc 1 1870 27 view .LVU197
 524 0094 EDE7     		b	.L30
 525              	.L43:
1886:rtos/uC-FS/FAT/fs_fat_lfn.c ****     }
1887:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1888:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1889:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1890:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                 /* -------------------- NULL BYTES 
1891:rtos/uC-FS/FAT/fs_fat_lfn.c ****    *p_dir_entry_08 = 0x00u;
 526              		.loc 1 1891 4 is_stmt 1 view .LVU198
ARM GAS  /tmp/ccu2ENwm.s 			page 45


 527              		.loc 1 1891 20 is_stmt 0 view .LVU199
 528 0096 0020     		movs	r0, #0
 529              	.LVL68:
 530              		.loc 1 1891 20 view .LVU200
 531 0098 1870     		strb	r0, [r3]
1892:rtos/uC-FS/FAT/fs_fat_lfn.c ****     p_dir_entry_08++;
 532              		.loc 1 1892 5 is_stmt 1 view .LVU201
 533              	.LVL69:
1893:rtos/uC-FS/FAT/fs_fat_lfn.c ****    *p_dir_entry_08 = 0x00u;
 534              		.loc 1 1893 4 view .LVU202
 535              		.loc 1 1893 20 is_stmt 0 view .LVU203
 536 009a 5870     		strb	r0, [r3, #1]
1894:rtos/uC-FS/FAT/fs_fat_lfn.c ****     p_dir_entry_08++;
 537              		.loc 1 1894 5 is_stmt 1 view .LVU204
 538              		.loc 1 1894 19 is_stmt 0 view .LVU205
 539 009c 0233     		adds	r3, r3, #2
 540              	.LVL70:
1895:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1896:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1897:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1898:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                 /* ---------------- NAME CHARS 12 -
1899:rtos/uC-FS/FAT/fs_fat_lfn.c ****     for (i = 12u; i <= 13u; i++) {
 541              		.loc 1 1899 5 is_stmt 1 view .LVU206
 542              		.loc 1 1899 12 is_stmt 0 view .LVU207
 543 009e 0C20     		movs	r0, #12
 544              		.loc 1 1899 5 view .LVU208
 545 00a0 0BE0     		b	.L33
 546              	.LVL71:
 547              	.L34:
1900:rtos/uC-FS/FAT/fs_fat_lfn.c ****         if (char_cnt_wr > char_cnt) {
1901:rtos/uC-FS/FAT/fs_fat_lfn.c ****            *p_dir_entry_08 = FS_FAT_LFN_CHAR_EMPTY_LO;
1902:rtos/uC-FS/FAT/fs_fat_lfn.c ****             p_dir_entry_08++;
1903:rtos/uC-FS/FAT/fs_fat_lfn.c ****            *p_dir_entry_08 = FS_FAT_LFN_CHAR_EMPTY_HI;
1904:rtos/uC-FS/FAT/fs_fat_lfn.c ****             p_dir_entry_08++;
1905:rtos/uC-FS/FAT/fs_fat_lfn.c ****         } else if (char_cnt_wr == char_cnt) {
 548              		.loc 1 1905 16 is_stmt 1 view .LVU209
 549              		.loc 1 1905 19 is_stmt 0 view .LVU210
 550 00a2 9442     		cmp	r4, r2
 551 00a4 12D0     		beq	.L44
1906:rtos/uC-FS/FAT/fs_fat_lfn.c ****            *p_dir_entry_08 = FS_FAT_LFN_CHAR_FINAL_LO;
1907:rtos/uC-FS/FAT/fs_fat_lfn.c ****             p_dir_entry_08++;
1908:rtos/uC-FS/FAT/fs_fat_lfn.c ****            *p_dir_entry_08 = FS_FAT_LFN_CHAR_FINAL_HI;
1909:rtos/uC-FS/FAT/fs_fat_lfn.c ****             p_dir_entry_08++;
1910:rtos/uC-FS/FAT/fs_fat_lfn.c ****         } else {
1911:rtos/uC-FS/FAT/fs_fat_lfn.c **** #if (FS_CFG_UTF8_EN == DEF_ENABLED)
1912:rtos/uC-FS/FAT/fs_fat_lfn.c ****            *p_dir_entry_08 = ((CPU_INT08U)(*name >> (0u * DEF_INT_08_NBR_BITS)) & DEF_INT_08_MASK);
1913:rtos/uC-FS/FAT/fs_fat_lfn.c ****             p_dir_entry_08++;
1914:rtos/uC-FS/FAT/fs_fat_lfn.c ****            *p_dir_entry_08 = ((CPU_INT08U)(*name >> (1u * DEF_INT_08_NBR_BITS)) & DEF_INT_08_MASK);
1915:rtos/uC-FS/FAT/fs_fat_lfn.c ****             p_dir_entry_08++;
1916:rtos/uC-FS/FAT/fs_fat_lfn.c **** #else
1917:rtos/uC-FS/FAT/fs_fat_lfn.c ****            *p_dir_entry_08 = (CPU_INT08U)*name;
 552              		.loc 1 1917 12 is_stmt 1 view .LVU211
 553              		.loc 1 1917 30 is_stmt 0 view .LVU212
 554 00a6 11F8015B 		ldrb	r5, [r1], #1	@ zero_extendqisi2
 555              	.LVL72:
 556              		.loc 1 1917 28 view .LVU213
 557 00aa 1D70     		strb	r5, [r3]
ARM GAS  /tmp/ccu2ENwm.s 			page 46


1918:rtos/uC-FS/FAT/fs_fat_lfn.c ****             p_dir_entry_08++;
 558              		.loc 1 1918 13 is_stmt 1 view .LVU214
 559              	.LVL73:
1919:rtos/uC-FS/FAT/fs_fat_lfn.c ****            *p_dir_entry_08 = (CPU_INT08U) ASCII_CHAR_NULL;
 560              		.loc 1 1919 12 view .LVU215
 561              		.loc 1 1919 28 is_stmt 0 view .LVU216
 562 00ac 0025     		movs	r5, #0
 563 00ae 5D70     		strb	r5, [r3, #1]
1920:rtos/uC-FS/FAT/fs_fat_lfn.c ****             p_dir_entry_08++;
 564              		.loc 1 1920 13 is_stmt 1 view .LVU217
 565              		.loc 1 1920 27 is_stmt 0 view .LVU218
 566 00b0 0233     		adds	r3, r3, #2
 567              	.LVL74:
1921:rtos/uC-FS/FAT/fs_fat_lfn.c **** #endif
1922:rtos/uC-FS/FAT/fs_fat_lfn.c ****             name++;
 568              		.loc 1 1922 13 is_stmt 1 view .LVU219
 569              	.L35:
1923:rtos/uC-FS/FAT/fs_fat_lfn.c ****         }
1924:rtos/uC-FS/FAT/fs_fat_lfn.c ****         char_cnt_wr++;
 570              		.loc 1 1924 9 discriminator 2 view .LVU220
 571              		.loc 1 1924 20 is_stmt 0 discriminator 2 view .LVU221
 572 00b2 0134     		adds	r4, r4, #1
 573              	.LVL75:
 574              		.loc 1 1924 20 discriminator 2 view .LVU222
 575 00b4 A4B2     		uxth	r4, r4
 576              	.LVL76:
1899:rtos/uC-FS/FAT/fs_fat_lfn.c ****         if (char_cnt_wr > char_cnt) {
 577              		.loc 1 1899 29 is_stmt 1 discriminator 2 view .LVU223
1899:rtos/uC-FS/FAT/fs_fat_lfn.c ****         if (char_cnt_wr > char_cnt) {
 578              		.loc 1 1899 30 is_stmt 0 discriminator 2 view .LVU224
 579 00b6 0130     		adds	r0, r0, #1
 580              	.LVL77:
1899:rtos/uC-FS/FAT/fs_fat_lfn.c ****         if (char_cnt_wr > char_cnt) {
 581              		.loc 1 1899 30 discriminator 2 view .LVU225
 582 00b8 C0B2     		uxtb	r0, r0
 583              	.LVL78:
 584              	.L33:
1899:rtos/uC-FS/FAT/fs_fat_lfn.c ****         if (char_cnt_wr > char_cnt) {
 585              		.loc 1 1899 19 is_stmt 1 discriminator 1 view .LVU226
1899:rtos/uC-FS/FAT/fs_fat_lfn.c ****         if (char_cnt_wr > char_cnt) {
 586              		.loc 1 1899 5 is_stmt 0 discriminator 1 view .LVU227
 587 00ba 0D28     		cmp	r0, #13
 588 00bc 0BD8     		bhi	.L45
1900:rtos/uC-FS/FAT/fs_fat_lfn.c ****            *p_dir_entry_08 = FS_FAT_LFN_CHAR_EMPTY_LO;
 589              		.loc 1 1900 9 is_stmt 1 view .LVU228
1900:rtos/uC-FS/FAT/fs_fat_lfn.c ****            *p_dir_entry_08 = FS_FAT_LFN_CHAR_EMPTY_LO;
 590              		.loc 1 1900 12 is_stmt 0 view .LVU229
 591 00be 9442     		cmp	r4, r2
 592 00c0 EFD9     		bls	.L34
1901:rtos/uC-FS/FAT/fs_fat_lfn.c ****             p_dir_entry_08++;
 593              		.loc 1 1901 12 is_stmt 1 view .LVU230
1901:rtos/uC-FS/FAT/fs_fat_lfn.c ****             p_dir_entry_08++;
 594              		.loc 1 1901 28 is_stmt 0 view .LVU231
 595 00c2 FF25     		movs	r5, #255
 596 00c4 1D70     		strb	r5, [r3]
1902:rtos/uC-FS/FAT/fs_fat_lfn.c ****            *p_dir_entry_08 = FS_FAT_LFN_CHAR_EMPTY_HI;
 597              		.loc 1 1902 13 is_stmt 1 view .LVU232
ARM GAS  /tmp/ccu2ENwm.s 			page 47


 598              	.LVL79:
1903:rtos/uC-FS/FAT/fs_fat_lfn.c ****             p_dir_entry_08++;
 599              		.loc 1 1903 12 view .LVU233
1903:rtos/uC-FS/FAT/fs_fat_lfn.c ****             p_dir_entry_08++;
 600              		.loc 1 1903 28 is_stmt 0 view .LVU234
 601 00c6 5D70     		strb	r5, [r3, #1]
1904:rtos/uC-FS/FAT/fs_fat_lfn.c ****         } else if (char_cnt_wr == char_cnt) {
 602              		.loc 1 1904 13 is_stmt 1 view .LVU235
1904:rtos/uC-FS/FAT/fs_fat_lfn.c ****         } else if (char_cnt_wr == char_cnt) {
 603              		.loc 1 1904 27 is_stmt 0 view .LVU236
 604 00c8 0233     		adds	r3, r3, #2
 605              	.LVL80:
1904:rtos/uC-FS/FAT/fs_fat_lfn.c ****         } else if (char_cnt_wr == char_cnt) {
 606              		.loc 1 1904 27 view .LVU237
 607 00ca F2E7     		b	.L35
 608              	.L44:
1906:rtos/uC-FS/FAT/fs_fat_lfn.c ****             p_dir_entry_08++;
 609              		.loc 1 1906 12 is_stmt 1 view .LVU238
1906:rtos/uC-FS/FAT/fs_fat_lfn.c ****             p_dir_entry_08++;
 610              		.loc 1 1906 28 is_stmt 0 view .LVU239
 611 00cc 0025     		movs	r5, #0
 612 00ce 1D70     		strb	r5, [r3]
1907:rtos/uC-FS/FAT/fs_fat_lfn.c ****            *p_dir_entry_08 = FS_FAT_LFN_CHAR_FINAL_HI;
 613              		.loc 1 1907 13 is_stmt 1 view .LVU240
 614              	.LVL81:
1908:rtos/uC-FS/FAT/fs_fat_lfn.c ****             p_dir_entry_08++;
 615              		.loc 1 1908 12 view .LVU241
1908:rtos/uC-FS/FAT/fs_fat_lfn.c ****             p_dir_entry_08++;
 616              		.loc 1 1908 28 is_stmt 0 view .LVU242
 617 00d0 5D70     		strb	r5, [r3, #1]
1909:rtos/uC-FS/FAT/fs_fat_lfn.c ****         } else {
 618              		.loc 1 1909 13 is_stmt 1 view .LVU243
1909:rtos/uC-FS/FAT/fs_fat_lfn.c ****         } else {
 619              		.loc 1 1909 27 is_stmt 0 view .LVU244
 620 00d2 0233     		adds	r3, r3, #2
 621              	.LVL82:
1909:rtos/uC-FS/FAT/fs_fat_lfn.c ****         } else {
 622              		.loc 1 1909 27 view .LVU245
 623 00d4 EDE7     		b	.L35
 624              	.L45:
1925:rtos/uC-FS/FAT/fs_fat_lfn.c ****     }
1926:rtos/uC-FS/FAT/fs_fat_lfn.c **** }
 625              		.loc 1 1926 1 view .LVU246
 626 00d6 70BC     		pop	{r4, r5, r6}
 627              	.LCFI4:
 628              		.cfi_restore 6
 629              		.cfi_restore 5
 630              		.cfi_restore 4
 631              		.cfi_def_cfa_offset 0
 632              	.LVL83:
 633              		.loc 1 1926 1 view .LVU247
 634 00d8 7047     		bx	lr
 635              		.cfi_endproc
 636              	.LFE7:
 638              		.section	.text.FS_FAT_LFN_Len,"ax",%progbits
 639              		.align	1
 640              		.syntax unified
ARM GAS  /tmp/ccu2ENwm.s 			page 48


 641              		.thumb
 642              		.thumb_func
 643              		.fpu fpv4-sp-d16
 645              	FS_FAT_LFN_Len:
 646              	.LVL84:
 647              	.LFB9:
1927:rtos/uC-FS/FAT/fs_fat_lfn.c **** #endif
1928:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1929:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1930:rtos/uC-FS/FAT/fs_fat_lfn.c **** /*
1931:rtos/uC-FS/FAT/fs_fat_lfn.c **** ***************************************************************************************************
1932:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                                     FS_FAT_LFN_DirEntryPlace()
1933:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
1934:rtos/uC-FS/FAT/fs_fat_lfn.c **** * Description : Find consecutive directory entries for placement of LFN.
1935:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
1936:rtos/uC-FS/FAT/fs_fat_lfn.c **** * Argument(s) : p_vol           Pointer to volume.
1937:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
1938:rtos/uC-FS/FAT/fs_fat_lfn.c **** *               p_buf           Pointer to temporary buffer.
1939:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
1940:rtos/uC-FS/FAT/fs_fat_lfn.c **** *               dir_entry_cnt   Number of consecutive directory entries required.
1941:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
1942:rtos/uC-FS/FAT/fs_fat_lfn.c **** *               dir_start_sec   Directory sector in which entries should be located.
1943:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
1944:rtos/uC-FS/FAT/fs_fat_lfn.c **** *               p_dir_end_pos   Pointer to variable that will receive the directory position at whi
1945:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                               entries can be located.
1946:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
1947:rtos/uC-FS/FAT/fs_fat_lfn.c **** *               p_err           Pointer to variable that will receive the return error code from th
1948:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
1949:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                                   FS_ERR_NONE             Directory entries found.
1950:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                                   FS_ERR_DEV              Device access error.
1951:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                                   FS_ERR_DIR_FULL         Directory is full (space could not be a
1952:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                                   FS_ERR_DEV_FULL         Device is full (space could not be allo
1953:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                                   FS_ERR_ENTRY_CORRUPT    File system entry is corrupt.
1954:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
1955:rtos/uC-FS/FAT/fs_fat_lfn.c **** * Return(s)   : none.
1956:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
1957:rtos/uC-FS/FAT/fs_fat_lfn.c **** * Note(s)     : (1) (a) The 'p_temp' pointer is 4-byte aligned since all sectors are 4-byte aligned
1958:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
1959:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                   (b) All pointers to directory entries are 4-byte aligned since all directory en
1960:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                       lie at a offset multiple of 32 (the size of a directory entry) from the beg
1961:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                       of a sector.
1962:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
1963:rtos/uC-FS/FAT/fs_fat_lfn.c **** *               (2) The sector number gotten or allocated from the FAT should be valid.  These chec
1964:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                   effectively redundant.
1965:rtos/uC-FS/FAT/fs_fat_lfn.c **** ***************************************************************************************************
1966:rtos/uC-FS/FAT/fs_fat_lfn.c **** */
1967:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1968:rtos/uC-FS/FAT/fs_fat_lfn.c **** #if (FS_CFG_RD_ONLY_EN == DEF_DISABLED)
1969:rtos/uC-FS/FAT/fs_fat_lfn.c **** static  void  FS_FAT_LFN_DirEntryPlace (FS_VOL                *p_vol,
1970:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                         FS_BUF                *p_buf,
1971:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                         FS_FAT_DIR_ENTRY_QTY   dir_entry_cnt,
1972:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                         FS_FAT_SEC_NBR         dir_start_sec,
1973:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                         FS_FAT_DIR_POS        *p_dir_end_pos,
1974:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                         FS_ERR                *p_err)
1975:rtos/uC-FS/FAT/fs_fat_lfn.c **** {
1976:rtos/uC-FS/FAT/fs_fat_lfn.c ****     CPU_BOOLEAN            chk;
1977:rtos/uC-FS/FAT/fs_fat_lfn.c ****     FS_FAT_DIR_POS         dir_cur_pos;
ARM GAS  /tmp/ccu2ENwm.s 			page 49


1978:rtos/uC-FS/FAT/fs_fat_lfn.c ****     FS_FAT_DIR_POS         dir_cur_start_pos;
1979:rtos/uC-FS/FAT/fs_fat_lfn.c ****     FS_FAT_DIR_ENTRY_QTY   dir_entry_free_cnt;
1980:rtos/uC-FS/FAT/fs_fat_lfn.c ****     CPU_BOOLEAN            dir_sec_valid;
1981:rtos/uC-FS/FAT/fs_fat_lfn.c ****     CPU_INT08U            *p_dir_entry;
1982:rtos/uC-FS/FAT/fs_fat_lfn.c ****     FS_FAT_DATA           *p_fat_data;
1983:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1984:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1985:rtos/uC-FS/FAT/fs_fat_lfn.c ****     p_dir_end_pos->SecNbr    =  0u;
1986:rtos/uC-FS/FAT/fs_fat_lfn.c ****     p_dir_end_pos->SecPos    =  0u;
1987:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1988:rtos/uC-FS/FAT/fs_fat_lfn.c ****     p_fat_data               = (FS_FAT_DATA *)p_vol->DataPtr;
1989:rtos/uC-FS/FAT/fs_fat_lfn.c ****     dir_entry_free_cnt       =  0u;
1990:rtos/uC-FS/FAT/fs_fat_lfn.c ****     dir_cur_pos.SecNbr       =  dir_start_sec;
1991:rtos/uC-FS/FAT/fs_fat_lfn.c ****     dir_cur_pos.SecPos       =  0u;
1992:rtos/uC-FS/FAT/fs_fat_lfn.c ****     dir_cur_start_pos.SecNbr =  0u;
1993:rtos/uC-FS/FAT/fs_fat_lfn.c ****     dir_cur_start_pos.SecPos =  0u;
1994:rtos/uC-FS/FAT/fs_fat_lfn.c ****     dir_sec_valid            =  FS_FAT_IS_VALID_SEC(p_fat_data, dir_cur_pos.SecNbr);
1995:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1996:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1997:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
1998:rtos/uC-FS/FAT/fs_fat_lfn.c ****     while (dir_sec_valid == DEF_YES) {                          /* While sec is valid (see Note #2)
1999:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                 /* -------------------- CHK JOURNAL
2000:rtos/uC-FS/FAT/fs_fat_lfn.c ****         chk = DEF_YES;
2001:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                 /* -------------------- RD DIR SEC 
2002:rtos/uC-FS/FAT/fs_fat_lfn.c ****         if (chk == DEF_YES) {
2003:rtos/uC-FS/FAT/fs_fat_lfn.c ****             FSBuf_Set(p_buf,
2004:rtos/uC-FS/FAT/fs_fat_lfn.c ****                       dir_cur_pos.SecNbr,
2005:rtos/uC-FS/FAT/fs_fat_lfn.c ****                       FS_VOL_SEC_TYPE_DIR,
2006:rtos/uC-FS/FAT/fs_fat_lfn.c ****                       DEF_YES,
2007:rtos/uC-FS/FAT/fs_fat_lfn.c ****                       p_err);
2008:rtos/uC-FS/FAT/fs_fat_lfn.c ****             if (*p_err != FS_ERR_NONE) {
2009:rtos/uC-FS/FAT/fs_fat_lfn.c ****                  return;
2010:rtos/uC-FS/FAT/fs_fat_lfn.c ****             }
2011:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
2012:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
2013:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
2014:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                 /* ----------- CNT CONSECUTIVE EMPT
2015:rtos/uC-FS/FAT/fs_fat_lfn.c ****             dir_cur_pos.SecPos = 0u;
2016:rtos/uC-FS/FAT/fs_fat_lfn.c ****             p_dir_entry        = (CPU_INT08U *)p_buf->DataPtr;
2017:rtos/uC-FS/FAT/fs_fat_lfn.c ****             while (dir_cur_pos.SecPos < p_fat_data->SecSize) {
2018:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
2019:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 if ((*p_dir_entry == FS_FAT_DIRENT_NAME_ERASED_AND_FREE) ||
2020:rtos/uC-FS/FAT/fs_fat_lfn.c ****                     (*p_dir_entry == FS_FAT_DIRENT_NAME_FREE)) {   /* Free entry found ... inc cnt.
2021:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
2022:rtos/uC-FS/FAT/fs_fat_lfn.c ****                     if (dir_entry_free_cnt == 0u) {
2023:rtos/uC-FS/FAT/fs_fat_lfn.c ****                         dir_cur_start_pos.SecNbr = dir_cur_pos.SecNbr;
2024:rtos/uC-FS/FAT/fs_fat_lfn.c ****                         dir_cur_start_pos.SecPos = dir_cur_pos.SecPos;
2025:rtos/uC-FS/FAT/fs_fat_lfn.c ****                     }
2026:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
2027:rtos/uC-FS/FAT/fs_fat_lfn.c ****                     dir_entry_free_cnt++;
2028:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
2029:rtos/uC-FS/FAT/fs_fat_lfn.c ****                     if (dir_entry_free_cnt >= dir_entry_cnt) {
2030:rtos/uC-FS/FAT/fs_fat_lfn.c ****                         p_dir_end_pos->SecNbr = dir_cur_start_pos.SecNbr;
2031:rtos/uC-FS/FAT/fs_fat_lfn.c ****                         p_dir_end_pos->SecPos = dir_cur_start_pos.SecPos;
2032:rtos/uC-FS/FAT/fs_fat_lfn.c ****                         return;
2033:rtos/uC-FS/FAT/fs_fat_lfn.c ****                     }
2034:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 } else {                                            /* Occupied entry ... reset cnt
ARM GAS  /tmp/ccu2ENwm.s 			page 50


2035:rtos/uC-FS/FAT/fs_fat_lfn.c ****                     dir_entry_free_cnt = 0u;
2036:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 }
2037:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
2038:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 p_dir_entry        += FS_FAT_SIZE_DIR_ENTRY;
2039:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 dir_cur_pos.SecPos += FS_FAT_SIZE_DIR_ENTRY;
2040:rtos/uC-FS/FAT/fs_fat_lfn.c ****             }
2041:rtos/uC-FS/FAT/fs_fat_lfn.c ****         }
2042:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
2043:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
2044:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
2045:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                 /* -------------------- GET NEXT SE
2046:rtos/uC-FS/FAT/fs_fat_lfn.c ****         dir_cur_pos.SecNbr = FS_FAT_SecNextGetAlloc(p_vol,
2047:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                     p_buf,
2048:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                     dir_cur_pos.SecNbr,
2049:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                     DEF_YES,
2050:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                     p_err);
2051:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
2052:rtos/uC-FS/FAT/fs_fat_lfn.c ****         switch (*p_err) {
2053:rtos/uC-FS/FAT/fs_fat_lfn.c ****             case FS_ERR_NONE:
2054:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                 /* Chk sec validity (see Note #2). 
2055:rtos/uC-FS/FAT/fs_fat_lfn.c ****                  dir_sec_valid = FS_FAT_IS_VALID_SEC(p_fat_data, dir_cur_pos.SecNbr);
2056:rtos/uC-FS/FAT/fs_fat_lfn.c ****                  break;
2057:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
2058:rtos/uC-FS/FAT/fs_fat_lfn.c ****             case FS_ERR_DIR_FULL:
2059:rtos/uC-FS/FAT/fs_fat_lfn.c ****             case FS_ERR_DEV_FULL:
2060:rtos/uC-FS/FAT/fs_fat_lfn.c ****                  return;
2061:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
2062:rtos/uC-FS/FAT/fs_fat_lfn.c ****             case FS_ERR_SYS_CLUS_CHAIN_END:
2063:rtos/uC-FS/FAT/fs_fat_lfn.c ****             case FS_ERR_SYS_CLUS_INVALID:
2064:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 *p_err = FS_ERR_ENTRY_CORRUPT;
2065:rtos/uC-FS/FAT/fs_fat_lfn.c ****                  return;
2066:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
2067:rtos/uC-FS/FAT/fs_fat_lfn.c ****             case FS_ERR_DEV:
2068:rtos/uC-FS/FAT/fs_fat_lfn.c ****             default:
2069:rtos/uC-FS/FAT/fs_fat_lfn.c ****                  return;
2070:rtos/uC-FS/FAT/fs_fat_lfn.c ****         }
2071:rtos/uC-FS/FAT/fs_fat_lfn.c ****     }
2072:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
2073:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
2074:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                 /* Invalid sec found (see Note #2).
2075:rtos/uC-FS/FAT/fs_fat_lfn.c ****     FS_TRACE_DBG(("FS_FAT_LFN_DirEntryPlace(): Invalid sec alloc'd: %d.\r\n", dir_cur_pos.SecNbr));
2076:rtos/uC-FS/FAT/fs_fat_lfn.c ****    *p_err = FS_ERR_ENTRY_CORRUPT;
2077:rtos/uC-FS/FAT/fs_fat_lfn.c ****     return;
2078:rtos/uC-FS/FAT/fs_fat_lfn.c **** }
2079:rtos/uC-FS/FAT/fs_fat_lfn.c **** #endif
2080:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
2081:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
2082:rtos/uC-FS/FAT/fs_fat_lfn.c **** /*
2083:rtos/uC-FS/FAT/fs_fat_lfn.c **** ***************************************************************************************************
2084:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                                          FS_FAT_LFN_Len()
2085:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
2086:rtos/uC-FS/FAT/fs_fat_lfn.c **** * Description : Calculate length of LFN name in LFN entry.
2087:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
2088:rtos/uC-FS/FAT/fs_fat_lfn.c **** * Argument(s) : p_dir_entry     Pointer to directory entry.
2089:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
2090:rtos/uC-FS/FAT/fs_fat_lfn.c **** * Return(s)   : Number of characters in name.
2091:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
ARM GAS  /tmp/ccu2ENwm.s 			page 51


2092:rtos/uC-FS/FAT/fs_fat_lfn.c **** * Note(s)     : (1) Length does not include final NULL (0x0000) character
2093:rtos/uC-FS/FAT/fs_fat_lfn.c **** ***************************************************************************************************
2094:rtos/uC-FS/FAT/fs_fat_lfn.c **** */
2095:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
2096:rtos/uC-FS/FAT/fs_fat_lfn.c **** static  FS_FILE_NAME_LEN  FS_FAT_LFN_Len (void  *p_dir_entry)
2097:rtos/uC-FS/FAT/fs_fat_lfn.c **** {
 648              		.loc 1 2097 1 is_stmt 1 view -0
 649              		.cfi_startproc
 650              		@ args = 0, pretend = 0, frame = 0
 651              		@ frame_needed = 0, uses_anonymous_args = 0
 652              		@ link register save eliminated.
 653              		.loc 1 2097 1 is_stmt 0 view .LVU249
 654 0000 10B4     		push	{r4}
 655              	.LCFI5:
 656              		.cfi_def_cfa_offset 4
 657              		.cfi_offset 4, -4
2098:rtos/uC-FS/FAT/fs_fat_lfn.c ****     CPU_INT08U         byte1;
 658              		.loc 1 2098 5 is_stmt 1 view .LVU250
2099:rtos/uC-FS/FAT/fs_fat_lfn.c ****     CPU_INT08U         byte2;
 659              		.loc 1 2099 5 view .LVU251
2100:rtos/uC-FS/FAT/fs_fat_lfn.c ****     CPU_INT08U         i;
 660              		.loc 1 2100 5 view .LVU252
2101:rtos/uC-FS/FAT/fs_fat_lfn.c ****     FS_FILE_NAME_LEN   lfn_len;
 661              		.loc 1 2101 5 view .LVU253
2102:rtos/uC-FS/FAT/fs_fat_lfn.c ****     CPU_INT08U        *p_dir_entry_08;
 662              		.loc 1 2102 5 view .LVU254
2103:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
2104:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
2105:rtos/uC-FS/FAT/fs_fat_lfn.c ****     lfn_len        = 0u;
 663              		.loc 1 2105 5 view .LVU255
 664              	.LVL85:
2106:rtos/uC-FS/FAT/fs_fat_lfn.c ****     p_dir_entry_08 = (CPU_INT08U *)p_dir_entry;
 665              		.loc 1 2106 5 view .LVU256
2107:rtos/uC-FS/FAT/fs_fat_lfn.c ****     p_dir_entry_08++;
 666              		.loc 1 2107 5 view .LVU257
 667              		.loc 1 2107 19 is_stmt 0 view .LVU258
 668 0002 431C     		adds	r3, r0, #1
 669              	.LVL86:
2108:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
2109:rtos/uC-FS/FAT/fs_fat_lfn.c ****     for (i = 1u; i <= 5u; i++) {                                /* Chk chars 1-5.                  
 670              		.loc 1 2109 5 is_stmt 1 view .LVU259
2105:rtos/uC-FS/FAT/fs_fat_lfn.c ****     p_dir_entry_08 = (CPU_INT08U *)p_dir_entry;
 671              		.loc 1 2105 20 is_stmt 0 view .LVU260
 672 0004 0020     		movs	r0, #0
 673              	.LVL87:
 674              		.loc 1 2109 12 view .LVU261
 675 0006 0122     		movs	r2, #1
 676              		.loc 1 2109 5 view .LVU262
 677 0008 03E0     		b	.L47
 678              	.LVL88:
 679              	.L48:
2110:rtos/uC-FS/FAT/fs_fat_lfn.c ****         byte1 = *p_dir_entry_08;
2111:rtos/uC-FS/FAT/fs_fat_lfn.c ****         p_dir_entry_08++;
2112:rtos/uC-FS/FAT/fs_fat_lfn.c ****         byte2 = *p_dir_entry_08;
2113:rtos/uC-FS/FAT/fs_fat_lfn.c ****         p_dir_entry_08++;
2114:rtos/uC-FS/FAT/fs_fat_lfn.c ****         if ((byte1 == FS_FAT_LFN_CHAR_FINAL_HI) && (byte2 == FS_FAT_LFN_CHAR_FINAL_LO)) {
2115:rtos/uC-FS/FAT/fs_fat_lfn.c ****             return (lfn_len);
ARM GAS  /tmp/ccu2ENwm.s 			page 52


2116:rtos/uC-FS/FAT/fs_fat_lfn.c ****         }
2117:rtos/uC-FS/FAT/fs_fat_lfn.c ****         lfn_len++;
 680              		.loc 1 2117 9 is_stmt 1 discriminator 2 view .LVU263
 681              		.loc 1 2117 16 is_stmt 0 discriminator 2 view .LVU264
 682 000a 0130     		adds	r0, r0, #1
 683              	.LVL89:
 684              		.loc 1 2117 16 discriminator 2 view .LVU265
 685 000c 80B2     		uxth	r0, r0
 686              	.LVL90:
2109:rtos/uC-FS/FAT/fs_fat_lfn.c ****         byte1 = *p_dir_entry_08;
 687              		.loc 1 2109 27 is_stmt 1 discriminator 2 view .LVU266
2109:rtos/uC-FS/FAT/fs_fat_lfn.c ****         byte1 = *p_dir_entry_08;
 688              		.loc 1 2109 28 is_stmt 0 discriminator 2 view .LVU267
 689 000e 0132     		adds	r2, r2, #1
 690              	.LVL91:
2109:rtos/uC-FS/FAT/fs_fat_lfn.c ****         byte1 = *p_dir_entry_08;
 691              		.loc 1 2109 28 discriminator 2 view .LVU268
 692 0010 D2B2     		uxtb	r2, r2
 693              	.LVL92:
 694              	.L47:
2109:rtos/uC-FS/FAT/fs_fat_lfn.c ****         byte1 = *p_dir_entry_08;
 695              		.loc 1 2109 18 is_stmt 1 discriminator 1 view .LVU269
2109:rtos/uC-FS/FAT/fs_fat_lfn.c ****         byte1 = *p_dir_entry_08;
 696              		.loc 1 2109 5 is_stmt 0 discriminator 1 view .LVU270
 697 0012 052A     		cmp	r2, #5
 698 0014 07D8     		bhi	.L58
2110:rtos/uC-FS/FAT/fs_fat_lfn.c ****         byte1 = *p_dir_entry_08;
 699              		.loc 1 2110 9 is_stmt 1 view .LVU271
2110:rtos/uC-FS/FAT/fs_fat_lfn.c ****         byte1 = *p_dir_entry_08;
 700              		.loc 1 2110 15 is_stmt 0 view .LVU272
 701 0016 1978     		ldrb	r1, [r3]	@ zero_extendqisi2
 702              	.LVL93:
2111:rtos/uC-FS/FAT/fs_fat_lfn.c ****         byte2 = *p_dir_entry_08;
 703              		.loc 1 2111 9 is_stmt 1 view .LVU273
2112:rtos/uC-FS/FAT/fs_fat_lfn.c ****         p_dir_entry_08++;
 704              		.loc 1 2112 9 view .LVU274
2112:rtos/uC-FS/FAT/fs_fat_lfn.c ****         p_dir_entry_08++;
 705              		.loc 1 2112 15 is_stmt 0 view .LVU275
 706 0018 5C78     		ldrb	r4, [r3, #1]	@ zero_extendqisi2
 707              	.LVL94:
2113:rtos/uC-FS/FAT/fs_fat_lfn.c ****         if ((byte1 == FS_FAT_LFN_CHAR_FINAL_HI) && (byte2 == FS_FAT_LFN_CHAR_FINAL_LO)) {
 708              		.loc 1 2113 9 is_stmt 1 view .LVU276
2113:rtos/uC-FS/FAT/fs_fat_lfn.c ****         if ((byte1 == FS_FAT_LFN_CHAR_FINAL_HI) && (byte2 == FS_FAT_LFN_CHAR_FINAL_LO)) {
 709              		.loc 1 2113 23 is_stmt 0 view .LVU277
 710 001a 0233     		adds	r3, r3, #2
 711              	.LVL95:
2114:rtos/uC-FS/FAT/fs_fat_lfn.c ****             return (lfn_len);
 712              		.loc 1 2114 9 is_stmt 1 view .LVU278
2114:rtos/uC-FS/FAT/fs_fat_lfn.c ****             return (lfn_len);
 713              		.loc 1 2114 12 is_stmt 0 view .LVU279
 714 001c 0029     		cmp	r1, #0
 715 001e F4D1     		bne	.L48
2114:rtos/uC-FS/FAT/fs_fat_lfn.c ****             return (lfn_len);
 716              		.loc 1 2114 49 discriminator 1 view .LVU280
 717 0020 002C     		cmp	r4, #0
 718 0022 F2D1     		bne	.L48
 719 0024 0FE0     		b	.L49
ARM GAS  /tmp/ccu2ENwm.s 			page 53


 720              	.LVL96:
 721              	.L58:
2118:rtos/uC-FS/FAT/fs_fat_lfn.c ****     }
2119:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
2120:rtos/uC-FS/FAT/fs_fat_lfn.c ****     p_dir_entry_08 += 3u;
 722              		.loc 1 2120 5 is_stmt 1 view .LVU281
 723              		.loc 1 2120 20 is_stmt 0 view .LVU282
 724 0026 0333     		adds	r3, r3, #3
 725              	.LVL97:
2121:rtos/uC-FS/FAT/fs_fat_lfn.c ****     for (i = 6u; i <= 11u; i++) {                               /* Chk chars 6-11.                 
 726              		.loc 1 2121 5 is_stmt 1 view .LVU283
 727              		.loc 1 2121 12 is_stmt 0 view .LVU284
 728 0028 0622     		movs	r2, #6
 729              		.loc 1 2121 5 view .LVU285
 730 002a 03E0     		b	.L51
 731              	.LVL98:
 732              	.L52:
2122:rtos/uC-FS/FAT/fs_fat_lfn.c ****         byte1 = *p_dir_entry_08;
2123:rtos/uC-FS/FAT/fs_fat_lfn.c ****         p_dir_entry_08++;
2124:rtos/uC-FS/FAT/fs_fat_lfn.c ****         byte2 = *p_dir_entry_08;
2125:rtos/uC-FS/FAT/fs_fat_lfn.c ****         p_dir_entry_08++;
2126:rtos/uC-FS/FAT/fs_fat_lfn.c ****         if ((byte1 == FS_FAT_LFN_CHAR_FINAL_HI) && (byte2 == FS_FAT_LFN_CHAR_FINAL_LO)) {
2127:rtos/uC-FS/FAT/fs_fat_lfn.c ****             return (lfn_len);
2128:rtos/uC-FS/FAT/fs_fat_lfn.c ****         }
2129:rtos/uC-FS/FAT/fs_fat_lfn.c ****         lfn_len++;
 733              		.loc 1 2129 9 is_stmt 1 discriminator 2 view .LVU286
 734              		.loc 1 2129 16 is_stmt 0 discriminator 2 view .LVU287
 735 002c 0130     		adds	r0, r0, #1
 736              	.LVL99:
 737              		.loc 1 2129 16 discriminator 2 view .LVU288
 738 002e 80B2     		uxth	r0, r0
 739              	.LVL100:
2121:rtos/uC-FS/FAT/fs_fat_lfn.c ****     for (i = 6u; i <= 11u; i++) {                               /* Chk chars 6-11.                 
 740              		.loc 1 2121 28 is_stmt 1 discriminator 2 view .LVU289
2121:rtos/uC-FS/FAT/fs_fat_lfn.c ****     for (i = 6u; i <= 11u; i++) {                               /* Chk chars 6-11.                 
 741              		.loc 1 2121 29 is_stmt 0 discriminator 2 view .LVU290
 742 0030 0132     		adds	r2, r2, #1
 743              	.LVL101:
2121:rtos/uC-FS/FAT/fs_fat_lfn.c ****     for (i = 6u; i <= 11u; i++) {                               /* Chk chars 6-11.                 
 744              		.loc 1 2121 29 discriminator 2 view .LVU291
 745 0032 D2B2     		uxtb	r2, r2
 746              	.LVL102:
 747              	.L51:
2121:rtos/uC-FS/FAT/fs_fat_lfn.c ****     for (i = 6u; i <= 11u; i++) {                               /* Chk chars 6-11.                 
 748              		.loc 1 2121 18 is_stmt 1 discriminator 1 view .LVU292
2121:rtos/uC-FS/FAT/fs_fat_lfn.c ****     for (i = 6u; i <= 11u; i++) {                               /* Chk chars 6-11.                 
 749              		.loc 1 2121 5 is_stmt 0 discriminator 1 view .LVU293
 750 0034 0B2A     		cmp	r2, #11
 751 0036 09D8     		bhi	.L59
2122:rtos/uC-FS/FAT/fs_fat_lfn.c ****         byte1 = *p_dir_entry_08;
 752              		.loc 1 2122 9 is_stmt 1 view .LVU294
2122:rtos/uC-FS/FAT/fs_fat_lfn.c ****         byte1 = *p_dir_entry_08;
 753              		.loc 1 2122 15 is_stmt 0 view .LVU295
 754 0038 1978     		ldrb	r1, [r3]	@ zero_extendqisi2
 755              	.LVL103:
2123:rtos/uC-FS/FAT/fs_fat_lfn.c ****         byte2 = *p_dir_entry_08;
 756              		.loc 1 2123 9 is_stmt 1 view .LVU296
ARM GAS  /tmp/ccu2ENwm.s 			page 54


2124:rtos/uC-FS/FAT/fs_fat_lfn.c ****         p_dir_entry_08++;
 757              		.loc 1 2124 9 view .LVU297
2124:rtos/uC-FS/FAT/fs_fat_lfn.c ****         p_dir_entry_08++;
 758              		.loc 1 2124 15 is_stmt 0 view .LVU298
 759 003a 5C78     		ldrb	r4, [r3, #1]	@ zero_extendqisi2
 760              	.LVL104:
2125:rtos/uC-FS/FAT/fs_fat_lfn.c ****         if ((byte1 == FS_FAT_LFN_CHAR_FINAL_HI) && (byte2 == FS_FAT_LFN_CHAR_FINAL_LO)) {
 761              		.loc 1 2125 9 is_stmt 1 view .LVU299
2125:rtos/uC-FS/FAT/fs_fat_lfn.c ****         if ((byte1 == FS_FAT_LFN_CHAR_FINAL_HI) && (byte2 == FS_FAT_LFN_CHAR_FINAL_LO)) {
 762              		.loc 1 2125 23 is_stmt 0 view .LVU300
 763 003c 0233     		adds	r3, r3, #2
 764              	.LVL105:
2126:rtos/uC-FS/FAT/fs_fat_lfn.c ****             return (lfn_len);
 765              		.loc 1 2126 9 is_stmt 1 view .LVU301
2126:rtos/uC-FS/FAT/fs_fat_lfn.c ****             return (lfn_len);
 766              		.loc 1 2126 12 is_stmt 0 view .LVU302
 767 003e 0029     		cmp	r1, #0
 768 0040 F4D1     		bne	.L52
2126:rtos/uC-FS/FAT/fs_fat_lfn.c ****             return (lfn_len);
 769              		.loc 1 2126 49 discriminator 1 view .LVU303
 770 0042 002C     		cmp	r4, #0
 771 0044 F2D1     		bne	.L52
 772              	.LVL106:
 773              	.L49:
2130:rtos/uC-FS/FAT/fs_fat_lfn.c ****     }
2131:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
2132:rtos/uC-FS/FAT/fs_fat_lfn.c ****     p_dir_entry_08 += 2u;
2133:rtos/uC-FS/FAT/fs_fat_lfn.c ****     for (i = 12u; i <= 13u; i++) {                              /* Chk chars 12-13.                
2134:rtos/uC-FS/FAT/fs_fat_lfn.c ****         byte1 = *p_dir_entry_08;
2135:rtos/uC-FS/FAT/fs_fat_lfn.c ****         p_dir_entry_08++;
2136:rtos/uC-FS/FAT/fs_fat_lfn.c ****         byte2 = *p_dir_entry_08;
2137:rtos/uC-FS/FAT/fs_fat_lfn.c ****         p_dir_entry_08++;
2138:rtos/uC-FS/FAT/fs_fat_lfn.c ****         if ((byte1 == FS_FAT_LFN_CHAR_FINAL_HI) && (byte2 == FS_FAT_LFN_CHAR_FINAL_LO)) {
2139:rtos/uC-FS/FAT/fs_fat_lfn.c ****             return (lfn_len);
2140:rtos/uC-FS/FAT/fs_fat_lfn.c ****         }
2141:rtos/uC-FS/FAT/fs_fat_lfn.c ****         lfn_len++;
2142:rtos/uC-FS/FAT/fs_fat_lfn.c ****     }
2143:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
2144:rtos/uC-FS/FAT/fs_fat_lfn.c ****     return (lfn_len);
2145:rtos/uC-FS/FAT/fs_fat_lfn.c **** }
 774              		.loc 1 2145 1 view .LVU304
 775 0046 5DF8044B 		ldr	r4, [sp], #4
 776              	.LCFI6:
 777              		.cfi_remember_state
 778              		.cfi_restore 4
 779              		.cfi_def_cfa_offset 0
 780 004a 7047     		bx	lr
 781              	.L59:
 782              	.LCFI7:
 783              		.cfi_restore_state
2132:rtos/uC-FS/FAT/fs_fat_lfn.c ****     for (i = 12u; i <= 13u; i++) {                              /* Chk chars 12-13.                
 784              		.loc 1 2132 5 is_stmt 1 view .LVU305
2132:rtos/uC-FS/FAT/fs_fat_lfn.c ****     for (i = 12u; i <= 13u; i++) {                              /* Chk chars 12-13.                
 785              		.loc 1 2132 20 is_stmt 0 view .LVU306
 786 004c 0233     		adds	r3, r3, #2
 787              	.LVL107:
2133:rtos/uC-FS/FAT/fs_fat_lfn.c ****         byte1 = *p_dir_entry_08;
ARM GAS  /tmp/ccu2ENwm.s 			page 55


 788              		.loc 1 2133 5 is_stmt 1 view .LVU307
2133:rtos/uC-FS/FAT/fs_fat_lfn.c ****         byte1 = *p_dir_entry_08;
 789              		.loc 1 2133 12 is_stmt 0 view .LVU308
 790 004e 0C22     		movs	r2, #12
2133:rtos/uC-FS/FAT/fs_fat_lfn.c ****         byte1 = *p_dir_entry_08;
 791              		.loc 1 2133 5 view .LVU309
 792 0050 03E0     		b	.L54
 793              	.LVL108:
 794              	.L55:
2141:rtos/uC-FS/FAT/fs_fat_lfn.c ****     }
 795              		.loc 1 2141 9 is_stmt 1 discriminator 2 view .LVU310
2141:rtos/uC-FS/FAT/fs_fat_lfn.c ****     }
 796              		.loc 1 2141 16 is_stmt 0 discriminator 2 view .LVU311
 797 0052 0130     		adds	r0, r0, #1
 798              	.LVL109:
2141:rtos/uC-FS/FAT/fs_fat_lfn.c ****     }
 799              		.loc 1 2141 16 discriminator 2 view .LVU312
 800 0054 80B2     		uxth	r0, r0
 801              	.LVL110:
2133:rtos/uC-FS/FAT/fs_fat_lfn.c ****         byte1 = *p_dir_entry_08;
 802              		.loc 1 2133 29 is_stmt 1 discriminator 2 view .LVU313
2133:rtos/uC-FS/FAT/fs_fat_lfn.c ****         byte1 = *p_dir_entry_08;
 803              		.loc 1 2133 30 is_stmt 0 discriminator 2 view .LVU314
 804 0056 0132     		adds	r2, r2, #1
 805              	.LVL111:
2133:rtos/uC-FS/FAT/fs_fat_lfn.c ****         byte1 = *p_dir_entry_08;
 806              		.loc 1 2133 30 discriminator 2 view .LVU315
 807 0058 D2B2     		uxtb	r2, r2
 808              	.LVL112:
 809              	.L54:
2133:rtos/uC-FS/FAT/fs_fat_lfn.c ****         byte1 = *p_dir_entry_08;
 810              		.loc 1 2133 19 is_stmt 1 discriminator 1 view .LVU316
2133:rtos/uC-FS/FAT/fs_fat_lfn.c ****         byte1 = *p_dir_entry_08;
 811              		.loc 1 2133 5 is_stmt 0 discriminator 1 view .LVU317
 812 005a 0D2A     		cmp	r2, #13
 813 005c F3D8     		bhi	.L49
2134:rtos/uC-FS/FAT/fs_fat_lfn.c ****         p_dir_entry_08++;
 814              		.loc 1 2134 9 is_stmt 1 view .LVU318
2134:rtos/uC-FS/FAT/fs_fat_lfn.c ****         p_dir_entry_08++;
 815              		.loc 1 2134 15 is_stmt 0 view .LVU319
 816 005e 1978     		ldrb	r1, [r3]	@ zero_extendqisi2
 817              	.LVL113:
2135:rtos/uC-FS/FAT/fs_fat_lfn.c ****         byte2 = *p_dir_entry_08;
 818              		.loc 1 2135 9 is_stmt 1 view .LVU320
2136:rtos/uC-FS/FAT/fs_fat_lfn.c ****         p_dir_entry_08++;
 819              		.loc 1 2136 9 view .LVU321
2136:rtos/uC-FS/FAT/fs_fat_lfn.c ****         p_dir_entry_08++;
 820              		.loc 1 2136 15 is_stmt 0 view .LVU322
 821 0060 5C78     		ldrb	r4, [r3, #1]	@ zero_extendqisi2
 822              	.LVL114:
2137:rtos/uC-FS/FAT/fs_fat_lfn.c ****         if ((byte1 == FS_FAT_LFN_CHAR_FINAL_HI) && (byte2 == FS_FAT_LFN_CHAR_FINAL_LO)) {
 823              		.loc 1 2137 9 is_stmt 1 view .LVU323
2137:rtos/uC-FS/FAT/fs_fat_lfn.c ****         if ((byte1 == FS_FAT_LFN_CHAR_FINAL_HI) && (byte2 == FS_FAT_LFN_CHAR_FINAL_LO)) {
 824              		.loc 1 2137 23 is_stmt 0 view .LVU324
 825 0062 0233     		adds	r3, r3, #2
 826              	.LVL115:
2138:rtos/uC-FS/FAT/fs_fat_lfn.c ****             return (lfn_len);
ARM GAS  /tmp/ccu2ENwm.s 			page 56


 827              		.loc 1 2138 9 is_stmt 1 view .LVU325
2138:rtos/uC-FS/FAT/fs_fat_lfn.c ****             return (lfn_len);
 828              		.loc 1 2138 12 is_stmt 0 view .LVU326
 829 0064 0029     		cmp	r1, #0
 830 0066 F4D1     		bne	.L55
2138:rtos/uC-FS/FAT/fs_fat_lfn.c ****             return (lfn_len);
 831              		.loc 1 2138 49 discriminator 1 view .LVU327
 832 0068 002C     		cmp	r4, #0
 833 006a F2D1     		bne	.L55
 834 006c EBE7     		b	.L49
 835              		.cfi_endproc
 836              	.LFE9:
 838              		.section	.text.FS_FAT_LFN_Parse,"ax",%progbits
 839              		.align	1
 840              		.syntax unified
 841              		.thumb
 842              		.thumb_func
 843              		.fpu fpv4-sp-d16
 845              	FS_FAT_LFN_Parse:
 846              	.LVL116:
 847              	.LFB10:
2146:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
2147:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
2148:rtos/uC-FS/FAT/fs_fat_lfn.c **** /*
2149:rtos/uC-FS/FAT/fs_fat_lfn.c **** ***************************************************************************************************
2150:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                                         FS_FAT_LFN_Parse()
2151:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
2152:rtos/uC-FS/FAT/fs_fat_lfn.c **** * Description : Read characters of LFN name in LFN entry.
2153:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
2154:rtos/uC-FS/FAT/fs_fat_lfn.c **** * Argument(s) : p_dir_entry     Pointer to directory entry.
2155:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
2156:rtos/uC-FS/FAT/fs_fat_lfn.c **** *               name            String that will receive entry name characters.
2157:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
2158:rtos/uC-FS/FAT/fs_fat_lfn.c **** *               name_len        Number of characters in directory entry.
2159:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
2160:rtos/uC-FS/FAT/fs_fat_lfn.c **** * Return(s)   : none.
2161:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
2162:rtos/uC-FS/FAT/fs_fat_lfn.c **** * Note(s)     : (1) See 'FS_FAT_LFN_DirEntryFmt() Note #2'.
2163:rtos/uC-FS/FAT/fs_fat_lfn.c **** ***************************************************************************************************
2164:rtos/uC-FS/FAT/fs_fat_lfn.c **** */
2165:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
2166:rtos/uC-FS/FAT/fs_fat_lfn.c **** static  void  FS_FAT_LFN_Parse (void              *p_dir_entry,
2167:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                 FS_FAT_LFN_CHAR   *name,
2168:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                 FS_FILE_NAME_LEN   name_len)
2169:rtos/uC-FS/FAT/fs_fat_lfn.c **** {
 848              		.loc 1 2169 1 is_stmt 1 view -0
 849              		.cfi_startproc
 850              		@ args = 0, pretend = 0, frame = 0
 851              		@ frame_needed = 0, uses_anonymous_args = 0
 852              		@ link register save eliminated.
 853              		.loc 1 2169 1 is_stmt 0 view .LVU329
 854 0000 10B4     		push	{r4}
 855              	.LCFI8:
 856              		.cfi_def_cfa_offset 4
 857              		.cfi_offset 4, -4
2170:rtos/uC-FS/FAT/fs_fat_lfn.c ****     CPU_INT08U         i;
 858              		.loc 1 2170 5 is_stmt 1 view .LVU330
ARM GAS  /tmp/ccu2ENwm.s 			page 57


2171:rtos/uC-FS/FAT/fs_fat_lfn.c ****     CPU_INT08U        *p_dir_entry_08;
 859              		.loc 1 2171 5 view .LVU331
2172:rtos/uC-FS/FAT/fs_fat_lfn.c ****     FS_FILE_NAME_LEN   name_len_rem;
 860              		.loc 1 2172 5 view .LVU332
2173:rtos/uC-FS/FAT/fs_fat_lfn.c ****     FS_FAT_LFN_CHAR    name_char;
 861              		.loc 1 2173 5 view .LVU333
2174:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
2175:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
2176:rtos/uC-FS/FAT/fs_fat_lfn.c ****     name_len_rem   =  name_len;
 862              		.loc 1 2176 5 view .LVU334
 863              	.LVL117:
2177:rtos/uC-FS/FAT/fs_fat_lfn.c ****     p_dir_entry_08 = (CPU_INT08U *)p_dir_entry;
 864              		.loc 1 2177 5 view .LVU335
2178:rtos/uC-FS/FAT/fs_fat_lfn.c ****     p_dir_entry_08++;
 865              		.loc 1 2178 5 view .LVU336
 866              		.loc 1 2178 19 is_stmt 0 view .LVU337
 867 0002 0130     		adds	r0, r0, #1
 868              	.LVL118:
2179:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
2180:rtos/uC-FS/FAT/fs_fat_lfn.c **** #if (FS_CFG_UTF8_EN == DEF_ENABLED)                             /* ----------------- PARSE AS UNICO
2181:rtos/uC-FS/FAT/fs_fat_lfn.c ****     for (i = 1u; i <= 5u; i++) {                                /* Parse chars 1-5.                
2182:rtos/uC-FS/FAT/fs_fat_lfn.c ****         name_char       = ((FS_FAT_LFN_CHAR)((FS_FAT_LFN_CHAR)*(p_dir_entry_08 + 0u) << (0u * DEF_O
2183:rtos/uC-FS/FAT/fs_fat_lfn.c ****                         |  (FS_FAT_LFN_CHAR)((FS_FAT_LFN_CHAR)*(p_dir_entry_08 + 1u) << (1u * DEF_O
2184:rtos/uC-FS/FAT/fs_fat_lfn.c ****        *name            = name_char;
2185:rtos/uC-FS/FAT/fs_fat_lfn.c ****         name++;
2186:rtos/uC-FS/FAT/fs_fat_lfn.c ****         p_dir_entry_08 += 2u;
2187:rtos/uC-FS/FAT/fs_fat_lfn.c ****         if (name_len_rem == 1u) {
2188:rtos/uC-FS/FAT/fs_fat_lfn.c ****             return;
2189:rtos/uC-FS/FAT/fs_fat_lfn.c ****         }
2190:rtos/uC-FS/FAT/fs_fat_lfn.c ****         name_len_rem--;
2191:rtos/uC-FS/FAT/fs_fat_lfn.c ****     }
2192:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
2193:rtos/uC-FS/FAT/fs_fat_lfn.c ****     p_dir_entry_08 += 3u;
2194:rtos/uC-FS/FAT/fs_fat_lfn.c ****     for (i = 6u; i <= 11u; i++) {                               /* Parse chars 6-11.               
2195:rtos/uC-FS/FAT/fs_fat_lfn.c ****         name_char       = ((FS_FAT_LFN_CHAR)((FS_FAT_LFN_CHAR)*(p_dir_entry_08 + 0u) << (0u * DEF_O
2196:rtos/uC-FS/FAT/fs_fat_lfn.c ****                         |  (FS_FAT_LFN_CHAR)((FS_FAT_LFN_CHAR)*(p_dir_entry_08 + 1u) << (1u * DEF_O
2197:rtos/uC-FS/FAT/fs_fat_lfn.c ****        *name            = name_char;
2198:rtos/uC-FS/FAT/fs_fat_lfn.c ****         name++;
2199:rtos/uC-FS/FAT/fs_fat_lfn.c ****         p_dir_entry_08 += 2u;
2200:rtos/uC-FS/FAT/fs_fat_lfn.c ****         if (name_len_rem == 1u) {
2201:rtos/uC-FS/FAT/fs_fat_lfn.c ****             return;
2202:rtos/uC-FS/FAT/fs_fat_lfn.c ****         }
2203:rtos/uC-FS/FAT/fs_fat_lfn.c ****         name_len_rem--;
2204:rtos/uC-FS/FAT/fs_fat_lfn.c ****     }
2205:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
2206:rtos/uC-FS/FAT/fs_fat_lfn.c ****     p_dir_entry_08 += 2u;
2207:rtos/uC-FS/FAT/fs_fat_lfn.c ****     for (i = 12u; i <= 13u; i++) {                              /* Chk chars 12-13.                
2208:rtos/uC-FS/FAT/fs_fat_lfn.c ****         name_char       = ((FS_FAT_LFN_CHAR)((FS_FAT_LFN_CHAR)*(p_dir_entry_08 + 0u) << (0u * DEF_O
2209:rtos/uC-FS/FAT/fs_fat_lfn.c ****                         |  (FS_FAT_LFN_CHAR)((FS_FAT_LFN_CHAR)*(p_dir_entry_08 + 1u) << (1u * DEF_O
2210:rtos/uC-FS/FAT/fs_fat_lfn.c ****        *name            = name_char;
2211:rtos/uC-FS/FAT/fs_fat_lfn.c ****         name++;
2212:rtos/uC-FS/FAT/fs_fat_lfn.c ****         p_dir_entry_08 += 2u;
2213:rtos/uC-FS/FAT/fs_fat_lfn.c ****         if (name_len_rem == 1u) {
2214:rtos/uC-FS/FAT/fs_fat_lfn.c ****             return;
2215:rtos/uC-FS/FAT/fs_fat_lfn.c ****         }
2216:rtos/uC-FS/FAT/fs_fat_lfn.c ****         name_len_rem--;
2217:rtos/uC-FS/FAT/fs_fat_lfn.c ****     }
ARM GAS  /tmp/ccu2ENwm.s 			page 58


2218:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
2219:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
2220:rtos/uC-FS/FAT/fs_fat_lfn.c **** #else                                                           /* ------------------ PARSE AS ASCI
2221:rtos/uC-FS/FAT/fs_fat_lfn.c ****     for (i = 1u; i <= 5u; i++) {                                /* Parse chars 1-5.                
 869              		.loc 1 2221 5 is_stmt 1 view .LVU338
 870              		.loc 1 2221 12 is_stmt 0 view .LVU339
 871 0004 0123     		movs	r3, #1
 872              	.LVL119:
 873              	.L61:
 874              		.loc 1 2221 18 is_stmt 1 discriminator 1 view .LVU340
 875              		.loc 1 2221 5 is_stmt 0 discriminator 1 view .LVU341
 876 0006 052B     		cmp	r3, #5
 877 0008 0AD8     		bhi	.L69
2222:rtos/uC-FS/FAT/fs_fat_lfn.c ****         name_char       = (FS_FAT_LFN_CHAR)*p_dir_entry_08;
 878              		.loc 1 2222 9 is_stmt 1 view .LVU342
 879              		.loc 1 2222 25 is_stmt 0 view .LVU343
 880 000a 10F8024B 		ldrb	r4, [r0], #2	@ zero_extendqisi2
 881              	.LVL120:
2223:rtos/uC-FS/FAT/fs_fat_lfn.c ****        *name            = name_char;
 882              		.loc 1 2223 8 is_stmt 1 view .LVU344
 883              		.loc 1 2223 25 is_stmt 0 view .LVU345
 884 000e 01F8014B 		strb	r4, [r1], #1
 885              	.LVL121:
2224:rtos/uC-FS/FAT/fs_fat_lfn.c ****         name++;
 886              		.loc 1 2224 9 is_stmt 1 view .LVU346
2225:rtos/uC-FS/FAT/fs_fat_lfn.c ****         p_dir_entry_08 += 2u;
 887              		.loc 1 2225 9 view .LVU347
2226:rtos/uC-FS/FAT/fs_fat_lfn.c ****         if (name_len_rem == 1u) {
 888              		.loc 1 2226 9 view .LVU348
 889              		.loc 1 2226 12 is_stmt 0 view .LVU349
 890 0012 012A     		cmp	r2, #1
 891 0014 22D0     		beq	.L60
2227:rtos/uC-FS/FAT/fs_fat_lfn.c ****             return;
2228:rtos/uC-FS/FAT/fs_fat_lfn.c ****         }
2229:rtos/uC-FS/FAT/fs_fat_lfn.c ****         name_len_rem--;
 892              		.loc 1 2229 9 is_stmt 1 discriminator 2 view .LVU350
 893              		.loc 1 2229 21 is_stmt 0 discriminator 2 view .LVU351
 894 0016 013A     		subs	r2, r2, #1
 895              	.LVL122:
 896              		.loc 1 2229 21 discriminator 2 view .LVU352
 897 0018 92B2     		uxth	r2, r2
 898              	.LVL123:
2221:rtos/uC-FS/FAT/fs_fat_lfn.c ****         name_char       = (FS_FAT_LFN_CHAR)*p_dir_entry_08;
 899              		.loc 1 2221 27 is_stmt 1 discriminator 2 view .LVU353
2221:rtos/uC-FS/FAT/fs_fat_lfn.c ****         name_char       = (FS_FAT_LFN_CHAR)*p_dir_entry_08;
 900              		.loc 1 2221 28 is_stmt 0 discriminator 2 view .LVU354
 901 001a 0133     		adds	r3, r3, #1
 902              	.LVL124:
2221:rtos/uC-FS/FAT/fs_fat_lfn.c ****         name_char       = (FS_FAT_LFN_CHAR)*p_dir_entry_08;
 903              		.loc 1 2221 28 discriminator 2 view .LVU355
 904 001c DBB2     		uxtb	r3, r3
 905              	.LVL125:
2221:rtos/uC-FS/FAT/fs_fat_lfn.c ****         name_char       = (FS_FAT_LFN_CHAR)*p_dir_entry_08;
 906              		.loc 1 2221 28 discriminator 2 view .LVU356
 907 001e F2E7     		b	.L61
 908              	.LVL126:
 909              	.L69:
ARM GAS  /tmp/ccu2ENwm.s 			page 59


2230:rtos/uC-FS/FAT/fs_fat_lfn.c ****     }
2231:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
2232:rtos/uC-FS/FAT/fs_fat_lfn.c ****     p_dir_entry_08 += 3u;
 910              		.loc 1 2232 5 is_stmt 1 view .LVU357
 911              		.loc 1 2232 20 is_stmt 0 view .LVU358
 912 0020 0330     		adds	r0, r0, #3
 913              	.LVL127:
2233:rtos/uC-FS/FAT/fs_fat_lfn.c ****     for (i = 6u; i <= 11u; i++) {                               /* Parse chars 6-11.               
 914              		.loc 1 2233 5 is_stmt 1 view .LVU359
 915              		.loc 1 2233 12 is_stmt 0 view .LVU360
 916 0022 0623     		movs	r3, #6
 917              	.LVL128:
 918              	.L64:
 919              		.loc 1 2233 18 is_stmt 1 discriminator 1 view .LVU361
 920              		.loc 1 2233 5 is_stmt 0 discriminator 1 view .LVU362
 921 0024 0B2B     		cmp	r3, #11
 922 0026 0AD8     		bhi	.L70
2234:rtos/uC-FS/FAT/fs_fat_lfn.c ****         name_char       = (FS_FAT_LFN_CHAR)*p_dir_entry_08;
 923              		.loc 1 2234 9 is_stmt 1 view .LVU363
 924              		.loc 1 2234 25 is_stmt 0 view .LVU364
 925 0028 10F8024B 		ldrb	r4, [r0], #2	@ zero_extendqisi2
 926              	.LVL129:
2235:rtos/uC-FS/FAT/fs_fat_lfn.c ****        *name            = name_char;
 927              		.loc 1 2235 8 is_stmt 1 view .LVU365
 928              		.loc 1 2235 25 is_stmt 0 view .LVU366
 929 002c 01F8014B 		strb	r4, [r1], #1
 930              	.LVL130:
2236:rtos/uC-FS/FAT/fs_fat_lfn.c ****         name++;
 931              		.loc 1 2236 9 is_stmt 1 view .LVU367
2237:rtos/uC-FS/FAT/fs_fat_lfn.c ****         p_dir_entry_08 += 2u;
 932              		.loc 1 2237 9 view .LVU368
2238:rtos/uC-FS/FAT/fs_fat_lfn.c ****         if (name_len_rem == 1u) {
 933              		.loc 1 2238 9 view .LVU369
 934              		.loc 1 2238 12 is_stmt 0 view .LVU370
 935 0030 012A     		cmp	r2, #1
 936 0032 13D0     		beq	.L60
2239:rtos/uC-FS/FAT/fs_fat_lfn.c ****             return;
2240:rtos/uC-FS/FAT/fs_fat_lfn.c ****         }
2241:rtos/uC-FS/FAT/fs_fat_lfn.c ****         name_len_rem--;
 937              		.loc 1 2241 9 is_stmt 1 discriminator 2 view .LVU371
 938              		.loc 1 2241 21 is_stmt 0 discriminator 2 view .LVU372
 939 0034 013A     		subs	r2, r2, #1
 940              	.LVL131:
 941              		.loc 1 2241 21 discriminator 2 view .LVU373
 942 0036 92B2     		uxth	r2, r2
 943              	.LVL132:
2233:rtos/uC-FS/FAT/fs_fat_lfn.c ****         name_char       = (FS_FAT_LFN_CHAR)*p_dir_entry_08;
 944              		.loc 1 2233 28 is_stmt 1 discriminator 2 view .LVU374
2233:rtos/uC-FS/FAT/fs_fat_lfn.c ****         name_char       = (FS_FAT_LFN_CHAR)*p_dir_entry_08;
 945              		.loc 1 2233 29 is_stmt 0 discriminator 2 view .LVU375
 946 0038 0133     		adds	r3, r3, #1
 947              	.LVL133:
2233:rtos/uC-FS/FAT/fs_fat_lfn.c ****         name_char       = (FS_FAT_LFN_CHAR)*p_dir_entry_08;
 948              		.loc 1 2233 29 discriminator 2 view .LVU376
 949 003a DBB2     		uxtb	r3, r3
 950              	.LVL134:
2233:rtos/uC-FS/FAT/fs_fat_lfn.c ****         name_char       = (FS_FAT_LFN_CHAR)*p_dir_entry_08;
ARM GAS  /tmp/ccu2ENwm.s 			page 60


 951              		.loc 1 2233 29 discriminator 2 view .LVU377
 952 003c F2E7     		b	.L64
 953              	.LVL135:
 954              	.L70:
2242:rtos/uC-FS/FAT/fs_fat_lfn.c ****     }
2243:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
2244:rtos/uC-FS/FAT/fs_fat_lfn.c ****     p_dir_entry_08 += 2u;
 955              		.loc 1 2244 5 is_stmt 1 view .LVU378
 956              		.loc 1 2244 20 is_stmt 0 view .LVU379
 957 003e 0230     		adds	r0, r0, #2
 958              	.LVL136:
2245:rtos/uC-FS/FAT/fs_fat_lfn.c ****     for (i = 12u; i <= 13u; i++) {                              /* Chk chars 12-13.                
 959              		.loc 1 2245 5 is_stmt 1 view .LVU380
 960              		.loc 1 2245 12 is_stmt 0 view .LVU381
 961 0040 0C23     		movs	r3, #12
 962              	.LVL137:
 963              	.L66:
 964              		.loc 1 2245 19 is_stmt 1 discriminator 1 view .LVU382
 965              		.loc 1 2245 5 is_stmt 0 discriminator 1 view .LVU383
 966 0042 0D2B     		cmp	r3, #13
 967 0044 0AD8     		bhi	.L60
2246:rtos/uC-FS/FAT/fs_fat_lfn.c ****         name_char       = (FS_FAT_LFN_CHAR)*p_dir_entry_08;
 968              		.loc 1 2246 9 is_stmt 1 view .LVU384
 969              		.loc 1 2246 25 is_stmt 0 view .LVU385
 970 0046 10F8024B 		ldrb	r4, [r0], #2	@ zero_extendqisi2
 971              	.LVL138:
2247:rtos/uC-FS/FAT/fs_fat_lfn.c ****        *name            = name_char;
 972              		.loc 1 2247 8 is_stmt 1 view .LVU386
 973              		.loc 1 2247 25 is_stmt 0 view .LVU387
 974 004a 01F8014B 		strb	r4, [r1], #1
 975              	.LVL139:
2248:rtos/uC-FS/FAT/fs_fat_lfn.c ****         name++;
 976              		.loc 1 2248 9 is_stmt 1 view .LVU388
2249:rtos/uC-FS/FAT/fs_fat_lfn.c ****         p_dir_entry_08 += 2u;
 977              		.loc 1 2249 9 view .LVU389
2250:rtos/uC-FS/FAT/fs_fat_lfn.c ****         if (name_len_rem == 1u) {
 978              		.loc 1 2250 9 view .LVU390
 979              		.loc 1 2250 12 is_stmt 0 view .LVU391
 980 004e 012A     		cmp	r2, #1
 981 0050 04D0     		beq	.L60
2251:rtos/uC-FS/FAT/fs_fat_lfn.c ****             return;
2252:rtos/uC-FS/FAT/fs_fat_lfn.c ****         }
2253:rtos/uC-FS/FAT/fs_fat_lfn.c ****         name_len_rem--;
 982              		.loc 1 2253 9 is_stmt 1 discriminator 2 view .LVU392
 983              		.loc 1 2253 21 is_stmt 0 discriminator 2 view .LVU393
 984 0052 013A     		subs	r2, r2, #1
 985              	.LVL140:
 986              		.loc 1 2253 21 discriminator 2 view .LVU394
 987 0054 92B2     		uxth	r2, r2
 988              	.LVL141:
2245:rtos/uC-FS/FAT/fs_fat_lfn.c ****         name_char       = (FS_FAT_LFN_CHAR)*p_dir_entry_08;
 989              		.loc 1 2245 29 is_stmt 1 discriminator 2 view .LVU395
2245:rtos/uC-FS/FAT/fs_fat_lfn.c ****         name_char       = (FS_FAT_LFN_CHAR)*p_dir_entry_08;
 990              		.loc 1 2245 30 is_stmt 0 discriminator 2 view .LVU396
 991 0056 0133     		adds	r3, r3, #1
 992              	.LVL142:
2245:rtos/uC-FS/FAT/fs_fat_lfn.c ****         name_char       = (FS_FAT_LFN_CHAR)*p_dir_entry_08;
ARM GAS  /tmp/ccu2ENwm.s 			page 61


 993              		.loc 1 2245 30 discriminator 2 view .LVU397
 994 0058 DBB2     		uxtb	r3, r3
 995              	.LVL143:
2245:rtos/uC-FS/FAT/fs_fat_lfn.c ****         name_char       = (FS_FAT_LFN_CHAR)*p_dir_entry_08;
 996              		.loc 1 2245 30 discriminator 2 view .LVU398
 997 005a F2E7     		b	.L66
 998              	.LVL144:
 999              	.L60:
2254:rtos/uC-FS/FAT/fs_fat_lfn.c ****     }
2255:rtos/uC-FS/FAT/fs_fat_lfn.c **** #endif
2256:rtos/uC-FS/FAT/fs_fat_lfn.c **** }
 1000              		.loc 1 2256 1 view .LVU399
 1001 005c 5DF8044B 		ldr	r4, [sp], #4
 1002              	.LCFI9:
 1003              		.cfi_restore 4
 1004              		.cfi_def_cfa_offset 0
 1005 0060 7047     		bx	lr
 1006              		.cfi_endproc
 1007              	.LFE10:
 1009              		.section	.text.FS_FAT_LFN_ParseFull,"ax",%progbits
 1010              		.align	1
 1011              		.syntax unified
 1012              		.thumb
 1013              		.thumb_func
 1014              		.fpu fpv4-sp-d16
 1016              	FS_FAT_LFN_ParseFull:
 1017              	.LVL145:
 1018              	.LFB11:
2257:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
2258:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
2259:rtos/uC-FS/FAT/fs_fat_lfn.c **** /*
2260:rtos/uC-FS/FAT/fs_fat_lfn.c **** ***************************************************************************************************
2261:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                                       FS_FAT_LFN_ParseFull()
2262:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
2263:rtos/uC-FS/FAT/fs_fat_lfn.c **** * Description : Read all characters of LFN name in LFN entry.
2264:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
2265:rtos/uC-FS/FAT/fs_fat_lfn.c **** * Argument(s) : p_dir_entry     Pointer to directory entry.
2266:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
2267:rtos/uC-FS/FAT/fs_fat_lfn.c **** *               name            String that will receive entry name characters.
2268:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
2269:rtos/uC-FS/FAT/fs_fat_lfn.c **** * Return(s)   : none.
2270:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
2271:rtos/uC-FS/FAT/fs_fat_lfn.c **** * Note(s)     : (1) See 'FS_FAT_LFN_DirEntryFmt() Note #2'.
2272:rtos/uC-FS/FAT/fs_fat_lfn.c **** ***************************************************************************************************
2273:rtos/uC-FS/FAT/fs_fat_lfn.c **** */
2274:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
2275:rtos/uC-FS/FAT/fs_fat_lfn.c **** static  void  FS_FAT_LFN_ParseFull (void             *p_dir_entry,
2276:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                     FS_FAT_LFN_CHAR  *name)
2277:rtos/uC-FS/FAT/fs_fat_lfn.c **** {
 1019              		.loc 1 2277 1 is_stmt 1 view -0
 1020              		.cfi_startproc
 1021              		@ args = 0, pretend = 0, frame = 0
 1022              		@ frame_needed = 0, uses_anonymous_args = 0
 1023              		@ link register save eliminated.
2278:rtos/uC-FS/FAT/fs_fat_lfn.c ****     CPU_INT08U         i;
 1024              		.loc 1 2278 5 view .LVU401
2279:rtos/uC-FS/FAT/fs_fat_lfn.c ****     CPU_INT08U        *p_dir_entry_08;
ARM GAS  /tmp/ccu2ENwm.s 			page 62


 1025              		.loc 1 2279 5 view .LVU402
2280:rtos/uC-FS/FAT/fs_fat_lfn.c ****     FS_FAT_LFN_CHAR    name_char;
 1026              		.loc 1 2280 5 view .LVU403
2281:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
2282:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
2283:rtos/uC-FS/FAT/fs_fat_lfn.c ****     p_dir_entry_08 = (CPU_INT08U *)p_dir_entry;
 1027              		.loc 1 2283 5 view .LVU404
2284:rtos/uC-FS/FAT/fs_fat_lfn.c ****     p_dir_entry_08++;
 1028              		.loc 1 2284 5 view .LVU405
 1029              		.loc 1 2284 19 is_stmt 0 view .LVU406
 1030 0000 0130     		adds	r0, r0, #1
 1031              	.LVL146:
2285:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
2286:rtos/uC-FS/FAT/fs_fat_lfn.c **** #if (FS_CFG_UTF8_EN == DEF_ENABLED)                             /* ----------------- PARSE AS UNICO
2287:rtos/uC-FS/FAT/fs_fat_lfn.c ****     for (i = 1u; i <= 5u; i++) {                                /* Parse chars 1-5.                
2288:rtos/uC-FS/FAT/fs_fat_lfn.c ****         name_char       = ((FS_FAT_LFN_CHAR)((FS_FAT_LFN_CHAR)*(p_dir_entry_08 + 0u) << (0u * DEF_O
2289:rtos/uC-FS/FAT/fs_fat_lfn.c ****                         |  (FS_FAT_LFN_CHAR)((FS_FAT_LFN_CHAR)*(p_dir_entry_08 + 1u) << (1u * DEF_O
2290:rtos/uC-FS/FAT/fs_fat_lfn.c ****        *name            = name_char;
2291:rtos/uC-FS/FAT/fs_fat_lfn.c ****         name++;
2292:rtos/uC-FS/FAT/fs_fat_lfn.c ****         p_dir_entry_08 += 2u;
2293:rtos/uC-FS/FAT/fs_fat_lfn.c ****     }
2294:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
2295:rtos/uC-FS/FAT/fs_fat_lfn.c ****     p_dir_entry_08 += 3u;
2296:rtos/uC-FS/FAT/fs_fat_lfn.c ****     for (i = 6u; i <= 11u; i++) {                               /* Parse chars 6-11.               
2297:rtos/uC-FS/FAT/fs_fat_lfn.c ****         name_char       = ((FS_FAT_LFN_CHAR)((FS_FAT_LFN_CHAR)*(p_dir_entry_08 + 0u) << (0u * DEF_O
2298:rtos/uC-FS/FAT/fs_fat_lfn.c ****                         |  (FS_FAT_LFN_CHAR)((FS_FAT_LFN_CHAR)*(p_dir_entry_08 + 1u) << (1u * DEF_O
2299:rtos/uC-FS/FAT/fs_fat_lfn.c ****        *name            = name_char;
2300:rtos/uC-FS/FAT/fs_fat_lfn.c ****         name++;
2301:rtos/uC-FS/FAT/fs_fat_lfn.c ****         p_dir_entry_08 += 2u;
2302:rtos/uC-FS/FAT/fs_fat_lfn.c ****     }
2303:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
2304:rtos/uC-FS/FAT/fs_fat_lfn.c ****     p_dir_entry_08 += 2u;
2305:rtos/uC-FS/FAT/fs_fat_lfn.c ****     for (i = 12u; i <= 13u; i++) {                              /* Chk chars 12-13.                
2306:rtos/uC-FS/FAT/fs_fat_lfn.c ****         name_char       = ((FS_FAT_LFN_CHAR)((FS_FAT_LFN_CHAR)*(p_dir_entry_08 + 0u) << (0u * DEF_O
2307:rtos/uC-FS/FAT/fs_fat_lfn.c ****                         |  (FS_FAT_LFN_CHAR)((FS_FAT_LFN_CHAR)*(p_dir_entry_08 + 1u) << (1u * DEF_O
2308:rtos/uC-FS/FAT/fs_fat_lfn.c ****        *name            = name_char;
2309:rtos/uC-FS/FAT/fs_fat_lfn.c ****         name++;
2310:rtos/uC-FS/FAT/fs_fat_lfn.c ****         p_dir_entry_08 += 2u;
2311:rtos/uC-FS/FAT/fs_fat_lfn.c ****     }
2312:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
2313:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
2314:rtos/uC-FS/FAT/fs_fat_lfn.c **** #else                                                           /* ------------------ PARSE AS ASCI
2315:rtos/uC-FS/FAT/fs_fat_lfn.c ****     for (i = 1u; i <= 5u; i++) {                                /* Parse chars 1-5.                
 1032              		.loc 1 2315 5 is_stmt 1 view .LVU407
 1033              		.loc 1 2315 12 is_stmt 0 view .LVU408
 1034 0002 0123     		movs	r3, #1
 1035              	.LVL147:
 1036              	.L72:
 1037              		.loc 1 2315 18 is_stmt 1 discriminator 1 view .LVU409
 1038              		.loc 1 2315 5 is_stmt 0 discriminator 1 view .LVU410
 1039 0004 052B     		cmp	r3, #5
 1040 0006 06D8     		bhi	.L78
2316:rtos/uC-FS/FAT/fs_fat_lfn.c ****         name_char       = (FS_FAT_LFN_CHAR)*p_dir_entry_08;
 1041              		.loc 1 2316 9 is_stmt 1 discriminator 3 view .LVU411
 1042              		.loc 1 2316 25 is_stmt 0 discriminator 3 view .LVU412
 1043 0008 10F8022B 		ldrb	r2, [r0], #2	@ zero_extendqisi2
 1044              	.LVL148:
ARM GAS  /tmp/ccu2ENwm.s 			page 63


2317:rtos/uC-FS/FAT/fs_fat_lfn.c ****        *name            = name_char;
 1045              		.loc 1 2317 8 is_stmt 1 discriminator 3 view .LVU413
 1046              		.loc 1 2317 25 is_stmt 0 discriminator 3 view .LVU414
 1047 000c 01F8012B 		strb	r2, [r1], #1
 1048              	.LVL149:
2318:rtos/uC-FS/FAT/fs_fat_lfn.c ****         name++;
 1049              		.loc 1 2318 9 is_stmt 1 discriminator 3 view .LVU415
2319:rtos/uC-FS/FAT/fs_fat_lfn.c ****         p_dir_entry_08 += 2u;
 1050              		.loc 1 2319 9 discriminator 3 view .LVU416
2315:rtos/uC-FS/FAT/fs_fat_lfn.c ****         name_char       = (FS_FAT_LFN_CHAR)*p_dir_entry_08;
 1051              		.loc 1 2315 27 discriminator 3 view .LVU417
2315:rtos/uC-FS/FAT/fs_fat_lfn.c ****         name_char       = (FS_FAT_LFN_CHAR)*p_dir_entry_08;
 1052              		.loc 1 2315 28 is_stmt 0 discriminator 3 view .LVU418
 1053 0010 0133     		adds	r3, r3, #1
 1054              	.LVL150:
2315:rtos/uC-FS/FAT/fs_fat_lfn.c ****         name_char       = (FS_FAT_LFN_CHAR)*p_dir_entry_08;
 1055              		.loc 1 2315 28 discriminator 3 view .LVU419
 1056 0012 DBB2     		uxtb	r3, r3
 1057              	.LVL151:
2315:rtos/uC-FS/FAT/fs_fat_lfn.c ****         name_char       = (FS_FAT_LFN_CHAR)*p_dir_entry_08;
 1058              		.loc 1 2315 28 discriminator 3 view .LVU420
 1059 0014 F6E7     		b	.L72
 1060              	.LVL152:
 1061              	.L78:
2320:rtos/uC-FS/FAT/fs_fat_lfn.c ****     }
2321:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
2322:rtos/uC-FS/FAT/fs_fat_lfn.c ****     p_dir_entry_08 += 3u;
 1062              		.loc 1 2322 5 is_stmt 1 view .LVU421
 1063              		.loc 1 2322 20 is_stmt 0 view .LVU422
 1064 0016 0330     		adds	r0, r0, #3
 1065              	.LVL153:
2323:rtos/uC-FS/FAT/fs_fat_lfn.c ****     for (i = 6u; i <= 11u; i++) {                               /* Parse chars 6-11.               
 1066              		.loc 1 2323 5 is_stmt 1 view .LVU423
 1067              		.loc 1 2323 12 is_stmt 0 view .LVU424
 1068 0018 0623     		movs	r3, #6
 1069              	.LVL154:
 1070              	.L74:
 1071              		.loc 1 2323 18 is_stmt 1 discriminator 1 view .LVU425
 1072              		.loc 1 2323 5 is_stmt 0 discriminator 1 view .LVU426
 1073 001a 0B2B     		cmp	r3, #11
 1074 001c 06D8     		bhi	.L79
2324:rtos/uC-FS/FAT/fs_fat_lfn.c ****         name_char       = (FS_FAT_LFN_CHAR)*p_dir_entry_08;
 1075              		.loc 1 2324 9 is_stmt 1 discriminator 3 view .LVU427
 1076              		.loc 1 2324 25 is_stmt 0 discriminator 3 view .LVU428
 1077 001e 10F8022B 		ldrb	r2, [r0], #2	@ zero_extendqisi2
 1078              	.LVL155:
2325:rtos/uC-FS/FAT/fs_fat_lfn.c ****        *name            = name_char;
 1079              		.loc 1 2325 8 is_stmt 1 discriminator 3 view .LVU429
 1080              		.loc 1 2325 25 is_stmt 0 discriminator 3 view .LVU430
 1081 0022 01F8012B 		strb	r2, [r1], #1
 1082              	.LVL156:
2326:rtos/uC-FS/FAT/fs_fat_lfn.c ****         name++;
 1083              		.loc 1 2326 9 is_stmt 1 discriminator 3 view .LVU431
2327:rtos/uC-FS/FAT/fs_fat_lfn.c ****         p_dir_entry_08 += 2u;
 1084              		.loc 1 2327 9 discriminator 3 view .LVU432
2323:rtos/uC-FS/FAT/fs_fat_lfn.c ****         name_char       = (FS_FAT_LFN_CHAR)*p_dir_entry_08;
 1085              		.loc 1 2323 28 discriminator 3 view .LVU433
ARM GAS  /tmp/ccu2ENwm.s 			page 64


2323:rtos/uC-FS/FAT/fs_fat_lfn.c ****         name_char       = (FS_FAT_LFN_CHAR)*p_dir_entry_08;
 1086              		.loc 1 2323 29 is_stmt 0 discriminator 3 view .LVU434
 1087 0026 0133     		adds	r3, r3, #1
 1088              	.LVL157:
2323:rtos/uC-FS/FAT/fs_fat_lfn.c ****         name_char       = (FS_FAT_LFN_CHAR)*p_dir_entry_08;
 1089              		.loc 1 2323 29 discriminator 3 view .LVU435
 1090 0028 DBB2     		uxtb	r3, r3
 1091              	.LVL158:
2323:rtos/uC-FS/FAT/fs_fat_lfn.c ****         name_char       = (FS_FAT_LFN_CHAR)*p_dir_entry_08;
 1092              		.loc 1 2323 29 discriminator 3 view .LVU436
 1093 002a F6E7     		b	.L74
 1094              	.LVL159:
 1095              	.L79:
2328:rtos/uC-FS/FAT/fs_fat_lfn.c ****     }
2329:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
2330:rtos/uC-FS/FAT/fs_fat_lfn.c ****     p_dir_entry_08 += 2u;
 1096              		.loc 1 2330 5 is_stmt 1 view .LVU437
 1097              		.loc 1 2330 20 is_stmt 0 view .LVU438
 1098 002c 0230     		adds	r0, r0, #2
 1099              	.LVL160:
2331:rtos/uC-FS/FAT/fs_fat_lfn.c ****     for (i = 12u; i <= 13u; i++) {                              /* Chk chars 12-13.                
 1100              		.loc 1 2331 5 is_stmt 1 view .LVU439
 1101              		.loc 1 2331 12 is_stmt 0 view .LVU440
 1102 002e 0C23     		movs	r3, #12
 1103              		.loc 1 2331 5 view .LVU441
 1104 0030 05E0     		b	.L76
 1105              	.LVL161:
 1106              	.L77:
2332:rtos/uC-FS/FAT/fs_fat_lfn.c ****         name_char       = (FS_FAT_LFN_CHAR)*p_dir_entry_08;
 1107              		.loc 1 2332 9 is_stmt 1 discriminator 3 view .LVU442
 1108              		.loc 1 2332 25 is_stmt 0 discriminator 3 view .LVU443
 1109 0032 10F8022B 		ldrb	r2, [r0], #2	@ zero_extendqisi2
 1110              	.LVL162:
2333:rtos/uC-FS/FAT/fs_fat_lfn.c ****        *name            = name_char;
 1111              		.loc 1 2333 8 is_stmt 1 discriminator 3 view .LVU444
 1112              		.loc 1 2333 25 is_stmt 0 discriminator 3 view .LVU445
 1113 0036 01F8012B 		strb	r2, [r1], #1
 1114              	.LVL163:
2334:rtos/uC-FS/FAT/fs_fat_lfn.c ****         name++;
 1115              		.loc 1 2334 9 is_stmt 1 discriminator 3 view .LVU446
2335:rtos/uC-FS/FAT/fs_fat_lfn.c ****         p_dir_entry_08 += 2u;
 1116              		.loc 1 2335 9 discriminator 3 view .LVU447
2331:rtos/uC-FS/FAT/fs_fat_lfn.c ****         name_char       = (FS_FAT_LFN_CHAR)*p_dir_entry_08;
 1117              		.loc 1 2331 29 discriminator 3 view .LVU448
2331:rtos/uC-FS/FAT/fs_fat_lfn.c ****         name_char       = (FS_FAT_LFN_CHAR)*p_dir_entry_08;
 1118              		.loc 1 2331 30 is_stmt 0 discriminator 3 view .LVU449
 1119 003a 0133     		adds	r3, r3, #1
 1120              	.LVL164:
2331:rtos/uC-FS/FAT/fs_fat_lfn.c ****         name_char       = (FS_FAT_LFN_CHAR)*p_dir_entry_08;
 1121              		.loc 1 2331 30 discriminator 3 view .LVU450
 1122 003c DBB2     		uxtb	r3, r3
 1123              	.LVL165:
 1124              	.L76:
2331:rtos/uC-FS/FAT/fs_fat_lfn.c ****         name_char       = (FS_FAT_LFN_CHAR)*p_dir_entry_08;
 1125              		.loc 1 2331 19 is_stmt 1 discriminator 1 view .LVU451
2331:rtos/uC-FS/FAT/fs_fat_lfn.c ****         name_char       = (FS_FAT_LFN_CHAR)*p_dir_entry_08;
 1126              		.loc 1 2331 5 is_stmt 0 discriminator 1 view .LVU452
ARM GAS  /tmp/ccu2ENwm.s 			page 65


 1127 003e 0D2B     		cmp	r3, #13
 1128 0040 F7D9     		bls	.L77
2336:rtos/uC-FS/FAT/fs_fat_lfn.c ****     }
2337:rtos/uC-FS/FAT/fs_fat_lfn.c **** #endif
2338:rtos/uC-FS/FAT/fs_fat_lfn.c **** }
 1129              		.loc 1 2338 1 view .LVU453
 1130 0042 7047     		bx	lr
 1131              		.cfi_endproc
 1132              	.LFE11:
 1134              		.section	.text.FS_FAT_LFN_SFN_Parse,"ax",%progbits
 1135              		.align	1
 1136              		.syntax unified
 1137              		.thumb
 1138              		.thumb_func
 1139              		.fpu fpv4-sp-d16
 1141              	FS_FAT_LFN_SFN_Parse:
 1142              	.LVL166:
 1143              	.LFB14:
2339:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
2340:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
2341:rtos/uC-FS/FAT/fs_fat_lfn.c **** /*
2342:rtos/uC-FS/FAT/fs_fat_lfn.c **** ***************************************************************************************************
2343:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                                       FS_FAT_LFN_SFN_Alloc()
2344:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
2345:rtos/uC-FS/FAT/fs_fat_lfn.c **** * Description : Allocate SFN.
2346:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
2347:rtos/uC-FS/FAT/fs_fat_lfn.c **** * Argument(s) : p_vol           Pointer to volume.
2348:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
2349:rtos/uC-FS/FAT/fs_fat_lfn.c **** *               p_buf           Pointer to temporary buffer.
2350:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
2351:rtos/uC-FS/FAT/fs_fat_lfn.c **** *               name            Name of the entry.
2352:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
2353:rtos/uC-FS/FAT/fs_fat_lfn.c **** *               name_8_3        Array that will receive the entry SFN.
2354:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
2355:rtos/uC-FS/FAT/fs_fat_lfn.c **** *               p_dir_entry     Pointer to directory entry.
2356:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
2357:rtos/uC-FS/FAT/fs_fat_lfn.c **** *               dir_sec         Directory sector in which file will be located.
2358:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
2359:rtos/uC-FS/FAT/fs_fat_lfn.c **** *               p_err           Pointer to variable that will receive the return error code from th
2360:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
2361:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                                   FS_ERR_NONE                 SFN allocated.
2362:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                                   FS_ERR_SYS_SFN_NOT_AVAIL    No SFN is available.
2363:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
2364:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                                                               ---- RETURNED BY FS_FAT_SFN_DirSrch
2365:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                                   FS_ERR_DEV                  Device access error.
2366:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
2367:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                                                               ---- RETURNED BY FS_FAT_LFN_SFN_Fmt
2368:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                                   FS_ERR_NAME_INVALID         LFN name invalid.
2369:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
2370:rtos/uC-FS/FAT/fs_fat_lfn.c **** * Return(s)   : none.
2371:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
2372:rtos/uC-FS/FAT/fs_fat_lfn.c **** * Note(s)     : (1) See 'FS_FAT_SFN_Create() Note #1'.
2373:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
2374:rtos/uC-FS/FAT/fs_fat_lfn.c **** *               (2) The basis SFN is formed according to the rules outlined in [Ref 1] (see
2375:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                   'FS_FAT_LFN_SFN_Fmt() Note #2'), with the tail generation as outlined therein a
2376:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                   (see 'FS_FAT_LFN_SFN_FmtTail() Note #2').
2377:rtos/uC-FS/FAT/fs_fat_lfn.c **** ***************************************************************************************************
ARM GAS  /tmp/ccu2ENwm.s 			page 66


2378:rtos/uC-FS/FAT/fs_fat_lfn.c **** */
2379:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
2380:rtos/uC-FS/FAT/fs_fat_lfn.c **** #if (FS_CFG_RD_ONLY_EN == DEF_DISABLED)
2381:rtos/uC-FS/FAT/fs_fat_lfn.c **** static  void  FS_FAT_LFN_SFN_Alloc (FS_VOL          *p_vol,
2382:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                     FS_BUF          *p_buf,
2383:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                     CPU_CHAR        *name,
2384:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                     CPU_INT32U       name_8_3[],
2385:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                     FS_FAT_SEC_NBR   dir_sec,
2386:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                     FS_ERR          *p_err)
2387:rtos/uC-FS/FAT/fs_fat_lfn.c **** {
2388:rtos/uC-FS/FAT/fs_fat_lfn.c ****     CPU_INT16U       char_cnt;
2389:rtos/uC-FS/FAT/fs_fat_lfn.c ****     FS_FAT_DIR_POS   dir_start_pos;
2390:rtos/uC-FS/FAT/fs_fat_lfn.c ****     FS_FAT_DIR_POS   dir_end_pos;
2391:rtos/uC-FS/FAT/fs_fat_lfn.c ****     FS_FAT_SFN_TAIL  tail_nbr;
2392:rtos/uC-FS/FAT/fs_fat_lfn.c ****     FS_FAT_SFN_TAIL  tail_max;
2393:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
2394:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
2395:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
2396:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                 /* ------------------- FMT INIT NAM
2397:rtos/uC-FS/FAT/fs_fat_lfn.c ****     char_cnt = FS_FAT_LFN_SFN_Fmt(name, name_8_3, p_err);       /* Fmt SFN from LFN.               
2398:rtos/uC-FS/FAT/fs_fat_lfn.c ****     if (*p_err != FS_ERR_NONE) {
2399:rtos/uC-FS/FAT/fs_fat_lfn.c ****         return;
2400:rtos/uC-FS/FAT/fs_fat_lfn.c ****     }
2401:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
2402:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
2403:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
2404:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                 /* ------------------- FIND MAX SFN
2405:rtos/uC-FS/FAT/fs_fat_lfn.c ****     tail_max = FS_FAT_LFN_SFN_DirEntryFindMax(p_vol,
2406:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                               p_buf,
2407:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                               name_8_3,
2408:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                               dir_sec,
2409:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                               p_err);
2410:rtos/uC-FS/FAT/fs_fat_lfn.c ****     (void)p_err;                                               /* Err ignored. Ret val chk'd instea
2411:rtos/uC-FS/FAT/fs_fat_lfn.c ****     if (tail_max == 0u) {
2412:rtos/uC-FS/FAT/fs_fat_lfn.c ****         tail_nbr =  1u;
2413:rtos/uC-FS/FAT/fs_fat_lfn.c ****     } else {
2414:rtos/uC-FS/FAT/fs_fat_lfn.c ****         if (tail_max < 999999u) {
2415:rtos/uC-FS/FAT/fs_fat_lfn.c ****             tail_nbr = tail_max + 1u;
2416:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
2417:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
2418:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
2419:rtos/uC-FS/FAT/fs_fat_lfn.c ****         } else {                                                /* -------------- SRCH FOR FREE SFN
2420:rtos/uC-FS/FAT/fs_fat_lfn.c ****             tail_nbr = 1u;
2421:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
2422:rtos/uC-FS/FAT/fs_fat_lfn.c ****             while (tail_nbr <= 999999u) {
2423:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 FS_FAT_LFN_SFN_FmtTail(name_8_3, char_cnt, tail_nbr);
2424:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
2425:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                 /* Srch dir for SFN.               
2426:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 dir_start_pos.SecNbr = dir_sec;
2427:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 dir_start_pos.SecPos = 0u;
2428:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 FS_FAT_SFN_SFN_Find( p_vol,
2429:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                      p_buf,
2430:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                      name_8_3,
2431:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                     &dir_start_pos,
2432:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                     &dir_end_pos,
2433:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                      p_err);
2434:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
ARM GAS  /tmp/ccu2ENwm.s 			page 67


2435:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 if (*p_err == FS_ERR_SYS_DIR_ENTRY_NOT_FOUND) {
2436:rtos/uC-FS/FAT/fs_fat_lfn.c ****                     break;
2437:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 }
2438:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
2439:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 switch (*p_err) {
2440:rtos/uC-FS/FAT/fs_fat_lfn.c ****                     case FS_ERR_NONE:                           /* SFN found, so collision.        
2441:rtos/uC-FS/FAT/fs_fat_lfn.c ****                          break;
2442:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
2443:rtos/uC-FS/FAT/fs_fat_lfn.c ****                     case FS_ERR_DEV:
2444:rtos/uC-FS/FAT/fs_fat_lfn.c ****                          return;
2445:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
2446:rtos/uC-FS/FAT/fs_fat_lfn.c ****                     default:
2447:rtos/uC-FS/FAT/fs_fat_lfn.c ****                          FS_TRACE_LOG(("FS_FAT_LFN_SFN_Alloc(): Default case reached.\r\n"));
2448:rtos/uC-FS/FAT/fs_fat_lfn.c ****                          return;
2449:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 }
2450:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
2451:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 tail_nbr++;                                     /* Inc tail nbr.                   
2452:rtos/uC-FS/FAT/fs_fat_lfn.c ****             }
2453:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
2454:rtos/uC-FS/FAT/fs_fat_lfn.c ****             if (tail_nbr > 999999u) {
2455:rtos/uC-FS/FAT/fs_fat_lfn.c ****                *p_err = FS_ERR_SYS_SFN_NOT_AVAIL;
2456:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 return;
2457:rtos/uC-FS/FAT/fs_fat_lfn.c ****             }
2458:rtos/uC-FS/FAT/fs_fat_lfn.c ****         }
2459:rtos/uC-FS/FAT/fs_fat_lfn.c ****     }
2460:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
2461:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
2462:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
2463:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                 /* ------------------ SFN TAIL FOUN
2464:rtos/uC-FS/FAT/fs_fat_lfn.c ****     FS_FAT_LFN_SFN_FmtTail(name_8_3, char_cnt, tail_nbr);       /* Add tail to SFN.                
2465:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
2466:rtos/uC-FS/FAT/fs_fat_lfn.c ****     FS_TRACE_LOG(("FS_FAT_LFN_SFN_Alloc(): SFN %s ASSIGNED TO\r\n", (CPU_CHAR *)name_8_3));
2467:rtos/uC-FS/FAT/fs_fat_lfn.c ****     FS_TRACE_LOG(("                            %s\r\n",             (CPU_CHAR *)name));
2468:rtos/uC-FS/FAT/fs_fat_lfn.c ****    *p_err = FS_ERR_NONE;
2469:rtos/uC-FS/FAT/fs_fat_lfn.c **** }
2470:rtos/uC-FS/FAT/fs_fat_lfn.c **** #endif
2471:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
2472:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
2473:rtos/uC-FS/FAT/fs_fat_lfn.c **** /*
2474:rtos/uC-FS/FAT/fs_fat_lfn.c **** ***************************************************************************************************
2475:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                                        FS_FAT_LFN_SFN_Fmt()
2476:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
2477:rtos/uC-FS/FAT/fs_fat_lfn.c **** * Description : Format SFN from LFN.
2478:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
2479:rtos/uC-FS/FAT/fs_fat_lfn.c **** * Argument(s) : name        Name of the entry.
2480:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
2481:rtos/uC-FS/FAT/fs_fat_lfn.c **** *               name_8_3    Array that will receive the entry SFN.
2482:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
2483:rtos/uC-FS/FAT/fs_fat_lfn.c **** *               p_err       Pointer to variable that will receive the return error code from this f
2484:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
2485:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                               FS_ERR_NONE            SFN formatted.
2486:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                               FS_ERR_NAME_INVALID    LFN name invalid.
2487:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
2488:rtos/uC-FS/FAT/fs_fat_lfn.c **** * Return(s)   : The number of characters in the basis SFN.
2489:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
2490:rtos/uC-FS/FAT/fs_fat_lfn.c **** * Note(s)     : (1) See 'FS_FAT_SFN_Create() Note #1'.
2491:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
ARM GAS  /tmp/ccu2ENwm.s 			page 68


2492:rtos/uC-FS/FAT/fs_fat_lfn.c **** *               (2) The basis SFN is formed according to the rules outlined in Microsoft's
2493:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                   'FAT: General Overview of On-Disk Format' :
2494:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
2495:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                   (a) The file name is converted to upper case.
2496:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
2497:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                   (b) If the character is not a valid SFN character, then it is replaced by a '_'
2498:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
2499:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                   (c) Leading & embedded spaces are skipped.
2500:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
2501:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                   (d) Leading periods are skipped.  The first embedded period ends the primary po
2502:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                       of the basis name.
2503:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
2504:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                       (1) The final period separates the base name from its extension.  Once the
2505:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                           final period is reached, the following characters will be parsed to for
2506:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                           the extension.
2507:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
2508:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                   (e) The base name may contain as many as 8 characters.
2509:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
2510:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                   (f) The extension may contain as many as 3 characters.
2511:rtos/uC-FS/FAT/fs_fat_lfn.c **** ***************************************************************************************************
2512:rtos/uC-FS/FAT/fs_fat_lfn.c **** */
2513:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
2514:rtos/uC-FS/FAT/fs_fat_lfn.c **** #if (FS_CFG_RD_ONLY_EN == DEF_DISABLED)
2515:rtos/uC-FS/FAT/fs_fat_lfn.c **** static  FS_FILE_NAME_LEN  FS_FAT_LFN_SFN_Fmt (CPU_CHAR    *name,
2516:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                               CPU_INT32U   name_8_3[],
2517:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                               FS_ERR      *p_err)
2518:rtos/uC-FS/FAT/fs_fat_lfn.c **** {
2519:rtos/uC-FS/FAT/fs_fat_lfn.c ****     FS_FILE_NAME_LEN   char_cnt;
2520:rtos/uC-FS/FAT/fs_fat_lfn.c ****     FS_FILE_NAME_LEN   char_cnt_ext;
2521:rtos/uC-FS/FAT/fs_fat_lfn.c ****     FS_FILE_NAME_LEN   i;
2522:rtos/uC-FS/FAT/fs_fat_lfn.c ****     CPU_BOOLEAN        is_legal;
2523:rtos/uC-FS/FAT/fs_fat_lfn.c ****     CPU_BOOLEAN        is_done;
2524:rtos/uC-FS/FAT/fs_fat_lfn.c **** #if (FS_CFG_UTF8_EN == DEF_ENABLED)
2525:rtos/uC-FS/FAT/fs_fat_lfn.c ****     CPU_WCHAR          name_char;
2526:rtos/uC-FS/FAT/fs_fat_lfn.c ****     CPU_SIZE_T         name_char_len;
2527:rtos/uC-FS/FAT/fs_fat_lfn.c **** #else
2528:rtos/uC-FS/FAT/fs_fat_lfn.c ****     CPU_CHAR           name_char;
2529:rtos/uC-FS/FAT/fs_fat_lfn.c **** #endif
2530:rtos/uC-FS/FAT/fs_fat_lfn.c ****     CPU_CHAR          *p_period;
2531:rtos/uC-FS/FAT/fs_fat_lfn.c ****     CPU_CHAR           name_8_3_08[12];
2532:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
2533:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
2534:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                 /* -------------------- CLR SFN BUF
2535:rtos/uC-FS/FAT/fs_fat_lfn.c ****     for (i = 0u; i < 11u; i++) {                                /* 'Clear' 8.3 file name buffer.   
2536:rtos/uC-FS/FAT/fs_fat_lfn.c ****         name_8_3_08[i] = (CPU_INT08U)ASCII_CHAR_SPACE;
2537:rtos/uC-FS/FAT/fs_fat_lfn.c ****     }
2538:rtos/uC-FS/FAT/fs_fat_lfn.c ****     name_8_3_08[11] = (CPU_INT08U)ASCII_CHAR_NULL;             /* 'Clear' final byte of 8.3 file na
2539:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
2540:rtos/uC-FS/FAT/fs_fat_lfn.c ****     p_period     =  Str_Char_Last_N(name, FS_CFG_MAX_FILE_NAME_LEN, (CPU_CHAR)ASCII_CHAR_FULL_STOP)
2541:rtos/uC-FS/FAT/fs_fat_lfn.c ****     if (p_period == name) {                                     /* If period not found in name ... 
2542:rtos/uC-FS/FAT/fs_fat_lfn.c ****         p_period = (CPU_CHAR *)0;                               /* ... set ptr to period invalid.  
2543:rtos/uC-FS/FAT/fs_fat_lfn.c ****     }
2544:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
2545:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
2546:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
2547:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                 /* -------------- COPY PRIMARY FILE
2548:rtos/uC-FS/FAT/fs_fat_lfn.c ****     i             =  0u;
ARM GAS  /tmp/ccu2ENwm.s 			page 69


2549:rtos/uC-FS/FAT/fs_fat_lfn.c ****     char_cnt      =  0u;
2550:rtos/uC-FS/FAT/fs_fat_lfn.c ****     is_done       =  DEF_NO;
2551:rtos/uC-FS/FAT/fs_fat_lfn.c ****     is_legal      =  DEF_YES;
2552:rtos/uC-FS/FAT/fs_fat_lfn.c **** #if (FS_CFG_UTF8_EN == DEF_ENABLED)
2553:rtos/uC-FS/FAT/fs_fat_lfn.c ****     name_char_len = MB_CharToWC( &name_char,
2554:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                   name,
2555:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                   MB_MAX_LEN);
2556:rtos/uC-FS/FAT/fs_fat_lfn.c ****     if (name_char_len > MB_MAX_LEN) {
2557:rtos/uC-FS/FAT/fs_fat_lfn.c ****         name_char = (CPU_WCHAR)ASCII_CHAR_NULL;
2558:rtos/uC-FS/FAT/fs_fat_lfn.c ****     }
2559:rtos/uC-FS/FAT/fs_fat_lfn.c **** #else
2560:rtos/uC-FS/FAT/fs_fat_lfn.c ****     name_char     = *name;
2561:rtos/uC-FS/FAT/fs_fat_lfn.c **** #endif
2562:rtos/uC-FS/FAT/fs_fat_lfn.c ****     while ((is_done  == DEF_NO) &&                              /* While parse is not done ...     
2563:rtos/uC-FS/FAT/fs_fat_lfn.c ****            (is_legal == DEF_YES)) {                             /* ... & name is still legal.      
2564:rtos/uC-FS/FAT/fs_fat_lfn.c ****         switch (name_char) {
2565:rtos/uC-FS/FAT/fs_fat_lfn.c ****             case ASCII_CHAR_SPACE:                              /* Skip embedded spaces (see Notes 
2566:rtos/uC-FS/FAT/fs_fat_lfn.c ****                  break;
2567:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
2568:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
2569:rtos/uC-FS/FAT/fs_fat_lfn.c ****             case ASCII_CHAR_FULL_STOP:                          /* End at first embedded periods (s
2570:rtos/uC-FS/FAT/fs_fat_lfn.c ****                  is_done = DEF_YES;
2571:rtos/uC-FS/FAT/fs_fat_lfn.c ****                  break;
2572:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
2573:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
2574:rtos/uC-FS/FAT/fs_fat_lfn.c ****             case ASCII_CHAR_NULL:                               /* Exit loop if NULL char or path s
2575:rtos/uC-FS/FAT/fs_fat_lfn.c ****             case FS_FAT_PATH_SEP_CHAR:
2576:rtos/uC-FS/FAT/fs_fat_lfn.c ****                  is_done = DEF_YES;
2577:rtos/uC-FS/FAT/fs_fat_lfn.c ****                  break;
2578:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
2579:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
2580:rtos/uC-FS/FAT/fs_fat_lfn.c ****             default:                                            /* Chk for legal file name char.   
2581:rtos/uC-FS/FAT/fs_fat_lfn.c ****                  is_legal = FS_FAT_IS_LEGAL_SFN_CHAR(name_char);
2582:rtos/uC-FS/FAT/fs_fat_lfn.c **** #if (FS_CFG_UTF8_EN == DEF_ENABLED)
2583:rtos/uC-FS/FAT/fs_fat_lfn.c ****                  if (name_char > DEF_INT_08U_MAX_VAL) {         /* Chk for non-8 bit char.         
2584:rtos/uC-FS/FAT/fs_fat_lfn.c ****                      is_legal = DEF_NO;
2585:rtos/uC-FS/FAT/fs_fat_lfn.c ****                  }
2586:rtos/uC-FS/FAT/fs_fat_lfn.c **** #endif
2587:rtos/uC-FS/FAT/fs_fat_lfn.c ****                  if (is_legal == DEF_YES) {
2588:rtos/uC-FS/FAT/fs_fat_lfn.c ****                      name_8_3_08[i] = ASCII_TO_UPPER(name_char);            /* See Notes #2a.      
2589:rtos/uC-FS/FAT/fs_fat_lfn.c ****                      i++;
2590:rtos/uC-FS/FAT/fs_fat_lfn.c ****                  } else {
2591:rtos/uC-FS/FAT/fs_fat_lfn.c ****                      is_legal = FS_FAT_IS_LEGAL_LFN_CHAR(name_char);
2592:rtos/uC-FS/FAT/fs_fat_lfn.c ****                      if (is_legal == DEF_YES) {
2593:rtos/uC-FS/FAT/fs_fat_lfn.c ****                         name_8_3_08[i] = (CPU_CHAR)ASCII_CHAR_LOW_LINE;     /* See Notes #2b.      
2594:rtos/uC-FS/FAT/fs_fat_lfn.c ****                         i++;
2595:rtos/uC-FS/FAT/fs_fat_lfn.c ****                      } else {
2596:rtos/uC-FS/FAT/fs_fat_lfn.c ****                          FS_TRACE_DBG(("FS_FAT_LFN_SFN_Fmt(): Invalid character in file name: %c (0
2597:rtos/uC-FS/FAT/fs_fat_lfn.c ****                      }
2598:rtos/uC-FS/FAT/fs_fat_lfn.c ****                  }
2599:rtos/uC-FS/FAT/fs_fat_lfn.c ****                  char_cnt++;
2600:rtos/uC-FS/FAT/fs_fat_lfn.c ****                  break;
2601:rtos/uC-FS/FAT/fs_fat_lfn.c ****         }
2602:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
2603:rtos/uC-FS/FAT/fs_fat_lfn.c ****         if ((is_done  == DEF_NO) &&                             /* If name not fully parsed ...    
2604:rtos/uC-FS/FAT/fs_fat_lfn.c ****             (is_legal == DEF_YES)) {                            /* ... & name is still legal.      
2605:rtos/uC-FS/FAT/fs_fat_lfn.c ****             if (char_cnt >= FS_FAT_SFN_NAME_MAX_NBR_CHAR) {     /* See Notes #2e.                  
ARM GAS  /tmp/ccu2ENwm.s 			page 70


2606:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 is_done = DEF_YES;
2607:rtos/uC-FS/FAT/fs_fat_lfn.c ****             } else {
2608:rtos/uC-FS/FAT/fs_fat_lfn.c **** #if (FS_CFG_UTF8_EN == DEF_ENABLED)
2609:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 name        +=  name_char_len;
2610:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 name_char_len = MB_CharToWC(&name_char,
2611:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                              name,
2612:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                              MB_MAX_LEN);
2613:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
2614:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 if (name_char_len > MB_MAX_LEN) {
2615:rtos/uC-FS/FAT/fs_fat_lfn.c ****                     name_char = (CPU_WCHAR)ASCII_CHAR_NULL;
2616:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 }
2617:rtos/uC-FS/FAT/fs_fat_lfn.c **** #else
2618:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 name++;
2619:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 name_char = *name;
2620:rtos/uC-FS/FAT/fs_fat_lfn.c **** #endif
2621:rtos/uC-FS/FAT/fs_fat_lfn.c ****             }
2622:rtos/uC-FS/FAT/fs_fat_lfn.c ****         }
2623:rtos/uC-FS/FAT/fs_fat_lfn.c ****     }
2624:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
2625:rtos/uC-FS/FAT/fs_fat_lfn.c ****     if (is_legal == DEF_NO) {
2626:rtos/uC-FS/FAT/fs_fat_lfn.c ****        *p_err = FS_ERR_NAME_INVALID;
2627:rtos/uC-FS/FAT/fs_fat_lfn.c ****         return (0u);
2628:rtos/uC-FS/FAT/fs_fat_lfn.c ****     }
2629:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
2630:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
2631:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
2632:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                 /* ------------------ COPY EXTENSIO
2633:rtos/uC-FS/FAT/fs_fat_lfn.c ****     i += FS_FAT_SFN_NAME_MAX_NBR_CHAR - char_cnt;
2634:rtos/uC-FS/FAT/fs_fat_lfn.c ****     if (p_period != (CPU_CHAR *)0) {                            /* If there is a period in file nam
2635:rtos/uC-FS/FAT/fs_fat_lfn.c ****         p_period++;
2636:rtos/uC-FS/FAT/fs_fat_lfn.c ****         char_cnt_ext  = 0u;
2637:rtos/uC-FS/FAT/fs_fat_lfn.c ****         is_done       = DEF_NO;
2638:rtos/uC-FS/FAT/fs_fat_lfn.c ****         is_legal      = DEF_YES;
2639:rtos/uC-FS/FAT/fs_fat_lfn.c **** #if (FS_CFG_UTF8_EN  == DEF_ENABLED)
2640:rtos/uC-FS/FAT/fs_fat_lfn.c ****         name_char_len = MB_CharToWC(&name_char,
2641:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                      p_period,
2642:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                      MB_MAX_LEN);
2643:rtos/uC-FS/FAT/fs_fat_lfn.c ****         if ((name_char_len == (CPU_SIZE_T)-2) ||
2644:rtos/uC-FS/FAT/fs_fat_lfn.c ****             (name_char_len == (CPU_SIZE_T)-1)) {
2645:rtos/uC-FS/FAT/fs_fat_lfn.c ****             name_char = (CPU_WCHAR)ASCII_CHAR_NULL;
2646:rtos/uC-FS/FAT/fs_fat_lfn.c ****         }
2647:rtos/uC-FS/FAT/fs_fat_lfn.c **** #else
2648:rtos/uC-FS/FAT/fs_fat_lfn.c ****         name_char     = *p_period;
2649:rtos/uC-FS/FAT/fs_fat_lfn.c **** #endif
2650:rtos/uC-FS/FAT/fs_fat_lfn.c ****         while ((is_done  == DEF_NO) &&
2651:rtos/uC-FS/FAT/fs_fat_lfn.c ****                (is_legal == DEF_YES)) {
2652:rtos/uC-FS/FAT/fs_fat_lfn.c ****             switch (name_char) {
2653:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 case ASCII_CHAR_SPACE:                          /* Skip embedded spaces (see Notes 
2654:rtos/uC-FS/FAT/fs_fat_lfn.c ****                      break;
2655:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
2656:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
2657:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 case ASCII_CHAR_NULL:                           /* Exit loop if NULL char or path s
2658:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 case FS_FAT_PATH_SEP_CHAR:
2659:rtos/uC-FS/FAT/fs_fat_lfn.c ****                      is_done = DEF_YES;
2660:rtos/uC-FS/FAT/fs_fat_lfn.c ****                      break;
2661:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
2662:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
ARM GAS  /tmp/ccu2ENwm.s 			page 71


2663:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 default:                                        /* Chk for legal file name char.   
2664:rtos/uC-FS/FAT/fs_fat_lfn.c ****                      is_legal = FS_FAT_IS_LEGAL_SFN_CHAR(name_char);
2665:rtos/uC-FS/FAT/fs_fat_lfn.c **** #if (FS_CFG_UTF8_EN == DEF_ENABLED)
2666:rtos/uC-FS/FAT/fs_fat_lfn.c ****                      if (name_char > DEF_INT_08U_MAX_VAL) {     /* Chk for non-8 bit char.         
2667:rtos/uC-FS/FAT/fs_fat_lfn.c ****                          is_legal = DEF_NO;
2668:rtos/uC-FS/FAT/fs_fat_lfn.c ****                      }
2669:rtos/uC-FS/FAT/fs_fat_lfn.c **** #endif
2670:rtos/uC-FS/FAT/fs_fat_lfn.c ****                      if (is_legal == DEF_YES) {
2671:rtos/uC-FS/FAT/fs_fat_lfn.c ****                          name_8_3_08[i] = ASCII_TO_UPPER(name_char);            /* See Notes #2a.  
2672:rtos/uC-FS/FAT/fs_fat_lfn.c ****                          i++;
2673:rtos/uC-FS/FAT/fs_fat_lfn.c ****                      } else {
2674:rtos/uC-FS/FAT/fs_fat_lfn.c ****                          is_legal = FS_FAT_IS_LEGAL_LFN_CHAR(name_char);
2675:rtos/uC-FS/FAT/fs_fat_lfn.c ****                          if (is_legal == DEF_YES) {
2676:rtos/uC-FS/FAT/fs_fat_lfn.c ****                              name_8_3_08[i] = (CPU_INT08U)ASCII_CHAR_LOW_LINE;  /* See Notes #2b.  
2677:rtos/uC-FS/FAT/fs_fat_lfn.c ****                              i++;
2678:rtos/uC-FS/FAT/fs_fat_lfn.c ****                          } else {
2679:rtos/uC-FS/FAT/fs_fat_lfn.c ****                             FS_TRACE_DBG(("FS_FAT_LFN_SFN_Fmt(): Invalid character in file ext: %c 
2680:rtos/uC-FS/FAT/fs_fat_lfn.c ****                          }
2681:rtos/uC-FS/FAT/fs_fat_lfn.c ****                      }
2682:rtos/uC-FS/FAT/fs_fat_lfn.c ****                      char_cnt_ext++;
2683:rtos/uC-FS/FAT/fs_fat_lfn.c ****                      break;
2684:rtos/uC-FS/FAT/fs_fat_lfn.c ****             }
2685:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
2686:rtos/uC-FS/FAT/fs_fat_lfn.c ****             if ((is_done  == DEF_NO) &&                         /* If name not fully parsed ...    
2687:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 (is_legal == DEF_YES)) {                        /* ... & name is still legal.      
2688:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 if (char_cnt_ext >= FS_FAT_SFN_EXT_MAX_NBR_CHAR) {      /* See Notes #2f.          
2689:rtos/uC-FS/FAT/fs_fat_lfn.c ****                     is_done = DEF_YES;
2690:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 } else {
2691:rtos/uC-FS/FAT/fs_fat_lfn.c **** #if (FS_CFG_UTF8_EN == DEF_ENABLED)
2692:rtos/uC-FS/FAT/fs_fat_lfn.c ****                     p_period     += name_char_len;
2693:rtos/uC-FS/FAT/fs_fat_lfn.c ****                     name_char_len = MB_CharToWC(&name_char,
2694:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                  p_period,
2695:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                  MB_MAX_LEN);
2696:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
2697:rtos/uC-FS/FAT/fs_fat_lfn.c ****                     if ((name_char_len == (CPU_SIZE_T)-2) ||
2698:rtos/uC-FS/FAT/fs_fat_lfn.c ****                         (name_char_len == (CPU_SIZE_T)-1)) {
2699:rtos/uC-FS/FAT/fs_fat_lfn.c ****                         name_char = (CPU_WCHAR)ASCII_CHAR_NULL;
2700:rtos/uC-FS/FAT/fs_fat_lfn.c ****                     }
2701:rtos/uC-FS/FAT/fs_fat_lfn.c **** #else
2702:rtos/uC-FS/FAT/fs_fat_lfn.c ****                     p_period++;
2703:rtos/uC-FS/FAT/fs_fat_lfn.c ****                     name_char = *p_period;
2704:rtos/uC-FS/FAT/fs_fat_lfn.c **** #endif
2705:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 }
2706:rtos/uC-FS/FAT/fs_fat_lfn.c ****             }
2707:rtos/uC-FS/FAT/fs_fat_lfn.c ****         }
2708:rtos/uC-FS/FAT/fs_fat_lfn.c ****     }
2709:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
2710:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
2711:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
2712:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                 /* ------------------------ RTN ---
2713:rtos/uC-FS/FAT/fs_fat_lfn.c ****     if (is_legal == DEF_NO) {                                   /* Rtn err if illegal name.        
2714:rtos/uC-FS/FAT/fs_fat_lfn.c ****        *p_err = FS_ERR_NAME_INVALID;
2715:rtos/uC-FS/FAT/fs_fat_lfn.c ****         return (0u);
2716:rtos/uC-FS/FAT/fs_fat_lfn.c ****     }
2717:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
2718:rtos/uC-FS/FAT/fs_fat_lfn.c ****     name_8_3[0] = MEM_VAL_GET_INT32U((void *)&name_8_3_08[0]);
2719:rtos/uC-FS/FAT/fs_fat_lfn.c ****     name_8_3[1] = MEM_VAL_GET_INT32U((void *)&name_8_3_08[4]);
ARM GAS  /tmp/ccu2ENwm.s 			page 72


2720:rtos/uC-FS/FAT/fs_fat_lfn.c ****     name_8_3[2] = MEM_VAL_GET_INT32U((void *)&name_8_3_08[8]);
2721:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
2722:rtos/uC-FS/FAT/fs_fat_lfn.c ****    *p_err = FS_ERR_NONE;
2723:rtos/uC-FS/FAT/fs_fat_lfn.c ****     return (char_cnt);
2724:rtos/uC-FS/FAT/fs_fat_lfn.c **** }
2725:rtos/uC-FS/FAT/fs_fat_lfn.c **** #endif
2726:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
2727:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
2728:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
2729:rtos/uC-FS/FAT/fs_fat_lfn.c **** /*
2730:rtos/uC-FS/FAT/fs_fat_lfn.c **** ***************************************************************************************************
2731:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                                       FS_FAT_LFN_SFN_Parse()
2732:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
2733:rtos/uC-FS/FAT/fs_fat_lfn.c **** * Description : Read characters of SFN name in SFN entry.
2734:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
2735:rtos/uC-FS/FAT/fs_fat_lfn.c **** * Argument(s) : p_dir_entry         Pointer to directory entry.
2736:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
2737:rtos/uC-FS/FAT/fs_fat_lfn.c **** *               name                String that will receive entry name.
2738:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
2739:rtos/uC-FS/FAT/fs_fat_lfn.c **** *               name_lower_case     Indicates whether name characters will be returned in lower cas
2740:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                                       DEF_YES, name characters will be returned in lower case.
2741:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                                       DEF_NO,  name characters will be returned in upper case.
2742:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
2743:rtos/uC-FS/FAT/fs_fat_lfn.c **** *               ext_lower_case      Indicates whether extension characters will be returned in lowe
2744:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                                       DEF_YES, extension characters will be returned in lower cas
2745:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                                       DEF_NO,  extension characters will be returned in upper cas
2746:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
2747:rtos/uC-FS/FAT/fs_fat_lfn.c **** * Return(s)   : none.
2748:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
2749:rtos/uC-FS/FAT/fs_fat_lfn.c **** * Note(s)     : none.
2750:rtos/uC-FS/FAT/fs_fat_lfn.c **** ***************************************************************************************************
2751:rtos/uC-FS/FAT/fs_fat_lfn.c **** */
2752:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
2753:rtos/uC-FS/FAT/fs_fat_lfn.c **** static  void  FS_FAT_LFN_SFN_Parse (void             *p_dir_entry,
2754:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                     FS_FAT_LFN_CHAR  *name,
2755:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                     CPU_BOOLEAN       name_lower_case,
2756:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                     CPU_BOOLEAN       ext_lower_case)
2757:rtos/uC-FS/FAT/fs_fat_lfn.c **** {
 1144              		.loc 1 2757 1 is_stmt 1 view -0
 1145              		.cfi_startproc
 1146              		@ args = 0, pretend = 0, frame = 0
 1147              		@ frame_needed = 0, uses_anonymous_args = 0
 1148              		@ link register save eliminated.
 1149              		.loc 1 2757 1 is_stmt 0 view .LVU455
 1150 0000 F0B4     		push	{r4, r5, r6, r7}
 1151              	.LCFI10:
 1152              		.cfi_def_cfa_offset 16
 1153              		.cfi_offset 4, -16
 1154              		.cfi_offset 5, -12
 1155              		.cfi_offset 6, -8
 1156              		.cfi_offset 7, -4
2758:rtos/uC-FS/FAT/fs_fat_lfn.c ****     FS_FILE_NAME_LEN   ix;
 1157              		.loc 1 2758 5 is_stmt 1 view .LVU456
2759:rtos/uC-FS/FAT/fs_fat_lfn.c ****     FS_FILE_NAME_LEN   len;
 1158              		.loc 1 2759 5 view .LVU457
2760:rtos/uC-FS/FAT/fs_fat_lfn.c ****     CPU_INT08U        *p_dir_entry_08;
 1159              		.loc 1 2760 5 view .LVU458
ARM GAS  /tmp/ccu2ENwm.s 			page 73


2761:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
2762:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
2763:rtos/uC-FS/FAT/fs_fat_lfn.c ****     p_dir_entry_08 = (CPU_INT08U *)p_dir_entry;
 1160              		.loc 1 2763 5 view .LVU459
 1161              	.LVL167:
2764:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
2765:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                 /* ---------------------- RD NAME -
2766:rtos/uC-FS/FAT/fs_fat_lfn.c ****     for (len = FS_FAT_SFN_NAME_MAX_NBR_CHAR; len > 0u; len--) { /* Calc name len.                  
 1162              		.loc 1 2766 5 view .LVU460
 1163              		.loc 1 2766 14 is_stmt 0 view .LVU461
 1164 0002 0824     		movs	r4, #8
 1165              		.loc 1 2766 5 view .LVU462
 1166 0004 01E0     		b	.L81
 1167              	.LVL168:
 1168              	.L99:
 1169              		.loc 1 2766 56 is_stmt 1 discriminator 2 view .LVU463
 1170              		.loc 1 2766 59 is_stmt 0 discriminator 2 view .LVU464
 1171 0006 013C     		subs	r4, r4, #1
 1172              	.LVL169:
 1173              		.loc 1 2766 59 discriminator 2 view .LVU465
 1174 0008 A4B2     		uxth	r4, r4
 1175              	.LVL170:
 1176              	.L81:
 1177              		.loc 1 2766 46 is_stmt 1 discriminator 1 view .LVU466
 1178              		.loc 1 2766 5 is_stmt 0 discriminator 1 view .LVU467
 1179 000a 24B1     		cbz	r4, .L82
2767:rtos/uC-FS/FAT/fs_fat_lfn.c ****         if (p_dir_entry_08[len - 1u] != (CPU_INT08U)ASCII_CHAR_SPACE) {
 1180              		.loc 1 2767 9 is_stmt 1 view .LVU468
 1181              		.loc 1 2767 27 is_stmt 0 view .LVU469
 1182 000c 0519     		adds	r5, r0, r4
 1183 000e 15F8015C 		ldrb	r5, [r5, #-1]	@ zero_extendqisi2
 1184              		.loc 1 2767 12 view .LVU470
 1185 0012 202D     		cmp	r5, #32
 1186 0014 F7D0     		beq	.L99
 1187              	.L82:
2768:rtos/uC-FS/FAT/fs_fat_lfn.c ****             break;
2769:rtos/uC-FS/FAT/fs_fat_lfn.c ****         }
2770:rtos/uC-FS/FAT/fs_fat_lfn.c ****     }
2771:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
2772:rtos/uC-FS/FAT/fs_fat_lfn.c ****     if (len != 0u) {                                            /* Copy name.                      
 1188              		.loc 1 2772 5 is_stmt 1 view .LVU471
 1189              		.loc 1 2772 8 is_stmt 0 view .LVU472
 1190 0016 D4B9     		cbnz	r4, .L97
 1191              	.L85:
2773:rtos/uC-FS/FAT/fs_fat_lfn.c ****         for (ix = 0u; ix < len; ix++) {
2774:rtos/uC-FS/FAT/fs_fat_lfn.c ****            *name = (name_lower_case == DEF_YES) ? ASCII_TO_LOWER((CPU_CHAR)p_dir_entry_08[ix])
2775:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                 :                          p_dir_entry_08[ix];
2776:rtos/uC-FS/FAT/fs_fat_lfn.c ****             name++;
2777:rtos/uC-FS/FAT/fs_fat_lfn.c ****         }
2778:rtos/uC-FS/FAT/fs_fat_lfn.c ****     }
2779:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
2780:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
2781:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
2782:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                 /* ---------------------- RD EXT --
2783:rtos/uC-FS/FAT/fs_fat_lfn.c ****     for (len = FS_FAT_SFN_EXT_MAX_NBR_CHAR; len > 0u; len--) {  /* Calc ext len.                   
 1192              		.loc 1 2783 5 is_stmt 1 view .LVU473
 1193              	.LVL171:
ARM GAS  /tmp/ccu2ENwm.s 			page 74


 1194              		.loc 1 2783 14 is_stmt 0 view .LVU474
 1195 0018 0324     		movs	r4, #3
 1196              	.LVL172:
 1197              	.L89:
 1198              		.loc 1 2783 45 is_stmt 1 discriminator 1 view .LVU475
 1199              		.loc 1 2783 5 is_stmt 0 discriminator 1 view .LVU476
 1200 001a D4B1     		cbz	r4, .L90
2784:rtos/uC-FS/FAT/fs_fat_lfn.c ****         if (p_dir_entry_08[len + FS_FAT_SFN_NAME_MAX_NBR_CHAR - 1u] != (CPU_INT08U)ASCII_CHAR_SPACE
 1201              		.loc 1 2784 9 is_stmt 1 view .LVU477
 1202              		.loc 1 2784 27 is_stmt 0 view .LVU478
 1203 001c 0219     		adds	r2, r0, r4
 1204 001e D279     		ldrb	r2, [r2, #7]	@ zero_extendqisi2
 1205              		.loc 1 2784 12 view .LVU479
 1206 0020 202A     		cmp	r2, #32
 1207 0022 16D1     		bne	.L90
2783:rtos/uC-FS/FAT/fs_fat_lfn.c ****         if (p_dir_entry_08[len + FS_FAT_SFN_NAME_MAX_NBR_CHAR - 1u] != (CPU_INT08U)ASCII_CHAR_SPACE
 1208              		.loc 1 2783 55 is_stmt 1 discriminator 2 view .LVU480
2783:rtos/uC-FS/FAT/fs_fat_lfn.c ****         if (p_dir_entry_08[len + FS_FAT_SFN_NAME_MAX_NBR_CHAR - 1u] != (CPU_INT08U)ASCII_CHAR_SPACE
 1209              		.loc 1 2783 58 is_stmt 0 discriminator 2 view .LVU481
 1210 0024 013C     		subs	r4, r4, #1
 1211              	.LVL173:
2783:rtos/uC-FS/FAT/fs_fat_lfn.c ****         if (p_dir_entry_08[len + FS_FAT_SFN_NAME_MAX_NBR_CHAR - 1u] != (CPU_INT08U)ASCII_CHAR_SPACE
 1212              		.loc 1 2783 58 discriminator 2 view .LVU482
 1213 0026 A4B2     		uxth	r4, r4
 1214              	.LVL174:
2783:rtos/uC-FS/FAT/fs_fat_lfn.c ****         if (p_dir_entry_08[len + FS_FAT_SFN_NAME_MAX_NBR_CHAR - 1u] != (CPU_INT08U)ASCII_CHAR_SPACE
 1215              		.loc 1 2783 58 discriminator 2 view .LVU483
 1216 0028 F7E7     		b	.L89
 1217              	.LVL175:
 1218              	.L86:
2774:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                 :                          p_dir_entry_08[ix];
 1219              		.loc 1 2774 18 discriminator 2 view .LVU484
 1220 002a 465D     		ldrb	r6, [r0, r5]	@ zero_extendqisi2
 1221              	.L87:
2774:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                 :                          p_dir_entry_08[ix];
 1222              		.loc 1 2774 18 discriminator 8 view .LVU485
 1223 002c 01F8016B 		strb	r6, [r1], #1
 1224              	.LVL176:
2776:rtos/uC-FS/FAT/fs_fat_lfn.c ****         }
 1225              		.loc 1 2776 13 is_stmt 1 discriminator 8 view .LVU486
2773:rtos/uC-FS/FAT/fs_fat_lfn.c ****            *name = (name_lower_case == DEF_YES) ? ASCII_TO_LOWER((CPU_CHAR)p_dir_entry_08[ix])
 1226              		.loc 1 2773 33 discriminator 8 view .LVU487
2773:rtos/uC-FS/FAT/fs_fat_lfn.c ****            *name = (name_lower_case == DEF_YES) ? ASCII_TO_LOWER((CPU_CHAR)p_dir_entry_08[ix])
 1227              		.loc 1 2773 35 is_stmt 0 discriminator 8 view .LVU488
 1228 0030 0135     		adds	r5, r5, #1
 1229              	.LVL177:
2773:rtos/uC-FS/FAT/fs_fat_lfn.c ****            *name = (name_lower_case == DEF_YES) ? ASCII_TO_LOWER((CPU_CHAR)p_dir_entry_08[ix])
 1230              		.loc 1 2773 35 discriminator 8 view .LVU489
 1231 0032 ADB2     		uxth	r5, r5
 1232              	.LVL178:
 1233              	.L84:
2773:rtos/uC-FS/FAT/fs_fat_lfn.c ****            *name = (name_lower_case == DEF_YES) ? ASCII_TO_LOWER((CPU_CHAR)p_dir_entry_08[ix])
 1234              		.loc 1 2773 23 is_stmt 1 discriminator 2 view .LVU490
2773:rtos/uC-FS/FAT/fs_fat_lfn.c ****            *name = (name_lower_case == DEF_YES) ? ASCII_TO_LOWER((CPU_CHAR)p_dir_entry_08[ix])
 1235              		.loc 1 2773 9 is_stmt 0 discriminator 2 view .LVU491
 1236 0034 A542     		cmp	r5, r4
 1237 0036 EFD2     		bcs	.L85
ARM GAS  /tmp/ccu2ENwm.s 			page 75


2774:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                 :                          p_dir_entry_08[ix];
 1238              		.loc 1 2774 12 is_stmt 1 view .LVU492
2774:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                 :                          p_dir_entry_08[ix];
 1239              		.loc 1 2774 18 is_stmt 0 view .LVU493
 1240 0038 012A     		cmp	r2, #1
 1241 003a F6D1     		bne	.L86
2774:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                 :                          p_dir_entry_08[ix];
 1242              		.loc 1 2774 51 discriminator 1 view .LVU494
 1243 003c 465D     		ldrb	r6, [r0, r5]	@ zero_extendqisi2
 1244 003e A6F14107 		sub	r7, r6, #65
 1245 0042 FFB2     		uxtb	r7, r7
2774:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                 :                          p_dir_entry_08[ix];
 1246              		.loc 1 2774 18 discriminator 1 view .LVU495
 1247 0044 192F     		cmp	r7, #25
 1248 0046 F1D8     		bhi	.L87
2774:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                 :                          p_dir_entry_08[ix];
 1249              		.loc 1 2774 18 discriminator 3 view .LVU496
 1250 0048 2036     		adds	r6, r6, #32
 1251 004a F6B2     		uxtb	r6, r6
 1252 004c EEE7     		b	.L87
 1253              	.LVL179:
 1254              	.L97:
2773:rtos/uC-FS/FAT/fs_fat_lfn.c ****            *name = (name_lower_case == DEF_YES) ? ASCII_TO_LOWER((CPU_CHAR)p_dir_entry_08[ix])
 1255              		.loc 1 2773 17 view .LVU497
 1256 004e 0025     		movs	r5, #0
 1257 0050 F0E7     		b	.L84
 1258              	.LVL180:
 1259              	.L90:
2785:rtos/uC-FS/FAT/fs_fat_lfn.c ****             break;
2786:rtos/uC-FS/FAT/fs_fat_lfn.c ****         }
2787:rtos/uC-FS/FAT/fs_fat_lfn.c ****     }
2788:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
2789:rtos/uC-FS/FAT/fs_fat_lfn.c ****     if (len != 0u) {                                            /* Copy ext.                       
 1260              		.loc 1 2789 5 is_stmt 1 view .LVU498
 1261              		.loc 1 2789 8 is_stmt 0 view .LVU499
 1262 0052 CCB1     		cbz	r4, .L92
2790:rtos/uC-FS/FAT/fs_fat_lfn.c ****        *name = (FS_FAT_LFN_CHAR)ASCII_CHAR_FULL_STOP;
 1263              		.loc 1 2790 8 is_stmt 1 view .LVU500
 1264              		.loc 1 2790 14 is_stmt 0 view .LVU501
 1265 0054 2E22     		movs	r2, #46
 1266 0056 01F8012B 		strb	r2, [r1], #1
 1267              	.LVL181:
2791:rtos/uC-FS/FAT/fs_fat_lfn.c ****         name++;
 1268              		.loc 1 2791 9 is_stmt 1 view .LVU502
2792:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
2793:rtos/uC-FS/FAT/fs_fat_lfn.c ****         for (ix = 0u; ix < len; ix++) {
 1269              		.loc 1 2793 9 view .LVU503
 1270              		.loc 1 2793 17 is_stmt 0 view .LVU504
 1271 005a 0022     		movs	r2, #0
 1272              		.loc 1 2793 9 view .LVU505
 1273 005c 06E0     		b	.L93
 1274              	.LVL182:
 1275              	.L94:
2794:rtos/uC-FS/FAT/fs_fat_lfn.c ****            *name = (ext_lower_case == DEF_YES) ? ASCII_TO_LOWER((CPU_CHAR)p_dir_entry_08[ix + FS_FA
2795:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                :                          p_dir_entry_08[ix + FS_FA
 1276              		.loc 1 2795 89 discriminator 2 view .LVU506
 1277 005e 02F10805 		add	r5, r2, #8
ARM GAS  /tmp/ccu2ENwm.s 			page 76


2794:rtos/uC-FS/FAT/fs_fat_lfn.c ****            *name = (ext_lower_case == DEF_YES) ? ASCII_TO_LOWER((CPU_CHAR)p_dir_entry_08[ix + FS_FA
 1278              		.loc 1 2794 18 discriminator 2 view .LVU507
 1279 0062 455D     		ldrb	r5, [r0, r5]	@ zero_extendqisi2
 1280              	.L95:
2794:rtos/uC-FS/FAT/fs_fat_lfn.c ****            *name = (ext_lower_case == DEF_YES) ? ASCII_TO_LOWER((CPU_CHAR)p_dir_entry_08[ix + FS_FA
 1281              		.loc 1 2794 18 discriminator 8 view .LVU508
 1282 0064 01F8015B 		strb	r5, [r1], #1
 1283              	.LVL183:
2796:rtos/uC-FS/FAT/fs_fat_lfn.c ****             name++;
 1284              		.loc 1 2796 13 is_stmt 1 discriminator 8 view .LVU509
2793:rtos/uC-FS/FAT/fs_fat_lfn.c ****            *name = (ext_lower_case == DEF_YES) ? ASCII_TO_LOWER((CPU_CHAR)p_dir_entry_08[ix + FS_FA
 1285              		.loc 1 2793 33 discriminator 8 view .LVU510
2793:rtos/uC-FS/FAT/fs_fat_lfn.c ****            *name = (ext_lower_case == DEF_YES) ? ASCII_TO_LOWER((CPU_CHAR)p_dir_entry_08[ix + FS_FA
 1286              		.loc 1 2793 35 is_stmt 0 discriminator 8 view .LVU511
 1287 0068 0132     		adds	r2, r2, #1
 1288              	.LVL184:
2793:rtos/uC-FS/FAT/fs_fat_lfn.c ****            *name = (ext_lower_case == DEF_YES) ? ASCII_TO_LOWER((CPU_CHAR)p_dir_entry_08[ix + FS_FA
 1289              		.loc 1 2793 35 discriminator 8 view .LVU512
 1290 006a 92B2     		uxth	r2, r2
 1291              	.LVL185:
 1292              	.L93:
2793:rtos/uC-FS/FAT/fs_fat_lfn.c ****            *name = (ext_lower_case == DEF_YES) ? ASCII_TO_LOWER((CPU_CHAR)p_dir_entry_08[ix + FS_FA
 1293              		.loc 1 2793 23 is_stmt 1 discriminator 2 view .LVU513
2793:rtos/uC-FS/FAT/fs_fat_lfn.c ****            *name = (ext_lower_case == DEF_YES) ? ASCII_TO_LOWER((CPU_CHAR)p_dir_entry_08[ix + FS_FA
 1294              		.loc 1 2793 9 is_stmt 0 discriminator 2 view .LVU514
 1295 006c A242     		cmp	r2, r4
 1296 006e 0BD2     		bcs	.L92
2794:rtos/uC-FS/FAT/fs_fat_lfn.c ****            *name = (ext_lower_case == DEF_YES) ? ASCII_TO_LOWER((CPU_CHAR)p_dir_entry_08[ix + FS_FA
 1297              		.loc 1 2794 12 is_stmt 1 view .LVU515
2794:rtos/uC-FS/FAT/fs_fat_lfn.c ****            *name = (ext_lower_case == DEF_YES) ? ASCII_TO_LOWER((CPU_CHAR)p_dir_entry_08[ix + FS_FA
 1298              		.loc 1 2794 18 is_stmt 0 view .LVU516
 1299 0070 012B     		cmp	r3, #1
 1300 0072 F4D1     		bne	.L94
2794:rtos/uC-FS/FAT/fs_fat_lfn.c ****            *name = (ext_lower_case == DEF_YES) ? ASCII_TO_LOWER((CPU_CHAR)p_dir_entry_08[ix + FS_FA
 1301              		.loc 1 2794 50 discriminator 1 view .LVU517
 1302 0074 8518     		adds	r5, r0, r2
 1303 0076 2D7A     		ldrb	r5, [r5, #8]	@ zero_extendqisi2
 1304 0078 A5F14106 		sub	r6, r5, #65
 1305 007c F6B2     		uxtb	r6, r6
2794:rtos/uC-FS/FAT/fs_fat_lfn.c ****            *name = (ext_lower_case == DEF_YES) ? ASCII_TO_LOWER((CPU_CHAR)p_dir_entry_08[ix + FS_FA
 1306              		.loc 1 2794 18 discriminator 1 view .LVU518
 1307 007e 192E     		cmp	r6, #25
 1308 0080 F0D8     		bhi	.L95
2794:rtos/uC-FS/FAT/fs_fat_lfn.c ****            *name = (ext_lower_case == DEF_YES) ? ASCII_TO_LOWER((CPU_CHAR)p_dir_entry_08[ix + FS_FA
 1309              		.loc 1 2794 18 discriminator 3 view .LVU519
 1310 0082 2035     		adds	r5, r5, #32
 1311 0084 EDB2     		uxtb	r5, r5
 1312 0086 EDE7     		b	.L95
 1313              	.LVL186:
 1314              	.L92:
2797:rtos/uC-FS/FAT/fs_fat_lfn.c ****         }
2798:rtos/uC-FS/FAT/fs_fat_lfn.c ****     }
2799:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
2800:rtos/uC-FS/FAT/fs_fat_lfn.c ****    *name = (FS_FAT_LFN_CHAR)ASCII_CHAR_NULL;                    /* End NULL char.                  
 1315              		.loc 1 2800 4 is_stmt 1 view .LVU520
 1316              		.loc 1 2800 10 is_stmt 0 view .LVU521
 1317 0088 0023     		movs	r3, #0
ARM GAS  /tmp/ccu2ENwm.s 			page 77


 1318              	.LVL187:
 1319              		.loc 1 2800 10 view .LVU522
 1320 008a 0B70     		strb	r3, [r1]
2801:rtos/uC-FS/FAT/fs_fat_lfn.c **** }
 1321              		.loc 1 2801 1 view .LVU523
 1322 008c F0BC     		pop	{r4, r5, r6, r7}
 1323              	.LCFI11:
 1324              		.cfi_restore 7
 1325              		.cfi_restore 6
 1326              		.cfi_restore 5
 1327              		.cfi_restore 4
 1328              		.cfi_def_cfa_offset 0
 1329              	.LVL188:
 1330              		.loc 1 2801 1 view .LVU524
 1331 008e 7047     		bx	lr
 1332              		.cfi_endproc
 1333              	.LFE14:
 1335              		.section	.text.FS_FAT_LFN_SFN_FmtTail,"ax",%progbits
 1336              		.align	1
 1337              		.syntax unified
 1338              		.thumb
 1339              		.thumb_func
 1340              		.fpu fpv4-sp-d16
 1342              	FS_FAT_LFN_SFN_FmtTail:
 1343              	.LVL189:
 1344              	.LFB15:
2802:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
2803:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
2804:rtos/uC-FS/FAT/fs_fat_lfn.c **** /*
2805:rtos/uC-FS/FAT/fs_fat_lfn.c **** ***************************************************************************************************
2806:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                                      FS_FAT_LFN_SFN_FmtTail()
2807:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
2808:rtos/uC-FS/FAT/fs_fat_lfn.c **** * Description : Format SFN tail.
2809:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
2810:rtos/uC-FS/FAT/fs_fat_lfn.c **** * Argument(s) : name_8_3    Entry SFN.
2811:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
2812:rtos/uC-FS/FAT/fs_fat_lfn.c **** *               char_cnt    Number of characters in base SFN.
2813:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
2814:rtos/uC-FS/FAT/fs_fat_lfn.c **** *               tail_nbr    Number to use for tail.
2815:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
2816:rtos/uC-FS/FAT/fs_fat_lfn.c **** * Return(s)   : none.
2817:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
2818:rtos/uC-FS/FAT/fs_fat_lfn.c **** * Note(s)     : (1) The numeric tail is formatted according to the numeric-tail generation algorith
2819:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                   in [Ref 1] :
2820:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
2821:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                   (a) The numeric tail is a string '~n' where 'n' is a decimal number between 1 &
2822:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                       999999.
2823:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
2824:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                   (b) This function MUST never be called with 'tail_nbr' > 999999; a check for th
2825:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                       merely added for completeness.
2826:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
2827:rtos/uC-FS/FAT/fs_fat_lfn.c **** *               (2) If the numeric tail can be appended to the base SFN WITHOUT overflowing the
2828:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                   8-character limit, then it is appended; otherwise, the final characters of the
2829:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                   8-character SFN will be the numeric tail (thus overwriting as few of the name
2830:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                   characters as possible).
2831:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
2832:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                   (a) For example, if the name encoded in 'name_8_3' is 'abcd.txt' & 'tail_nbr'
ARM GAS  /tmp/ccu2ENwm.s 			page 78


2833:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                       is 12, then the resulting SFN will be 'abcd~12.txt'.
2834:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
2835:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                   (b) For example, if the name encoded in 'name_8_3' is 'abcd.txt' & 'tail_nbr'
2836:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                       is 12345, then the resulting SFN will be 'ab~12345.txt'.
2837:rtos/uC-FS/FAT/fs_fat_lfn.c **** ***************************************************************************************************
2838:rtos/uC-FS/FAT/fs_fat_lfn.c **** */
2839:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
2840:rtos/uC-FS/FAT/fs_fat_lfn.c **** #if (FS_CFG_RD_ONLY_EN == DEF_DISABLED)
2841:rtos/uC-FS/FAT/fs_fat_lfn.c **** static  void  FS_FAT_LFN_SFN_FmtTail (CPU_INT32U         name_8_3[],
2842:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                       FS_FILE_NAME_LEN   char_cnt,
2843:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                       FS_FAT_SFN_TAIL    tail_nbr)
2844:rtos/uC-FS/FAT/fs_fat_lfn.c **** {
 1345              		.loc 1 2844 1 is_stmt 1 view -0
 1346              		.cfi_startproc
 1347              		@ args = 0, pretend = 0, frame = 16
 1348              		@ frame_needed = 0, uses_anonymous_args = 0
 1349              		@ link register save eliminated.
 1350              		.loc 1 2844 1 is_stmt 0 view .LVU526
 1351 0000 30B4     		push	{r4, r5}
 1352              	.LCFI12:
 1353              		.cfi_def_cfa_offset 8
 1354              		.cfi_offset 4, -8
 1355              		.cfi_offset 5, -4
 1356 0002 84B0     		sub	sp, sp, #16
 1357              	.LCFI13:
 1358              		.cfi_def_cfa_offset 24
2845:rtos/uC-FS/FAT/fs_fat_lfn.c ****     CPU_INT16U        char_cnt_tail;
 1359              		.loc 1 2845 5 is_stmt 1 view .LVU527
2846:rtos/uC-FS/FAT/fs_fat_lfn.c ****     FS_FILE_NAME_LEN  char_ix;
 1360              		.loc 1 2846 5 view .LVU528
2847:rtos/uC-FS/FAT/fs_fat_lfn.c ****     CPU_INT08U        name_8_3_08[12];
 1361              		.loc 1 2847 5 view .LVU529
2848:rtos/uC-FS/FAT/fs_fat_lfn.c ****     CPU_INT08U        tail_nbr_dig;
 1362              		.loc 1 2848 5 view .LVU530
2849:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
2850:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
2851:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                 /* --------------- CALC NBR TAIL CH
2852:rtos/uC-FS/FAT/fs_fat_lfn.c ****     if (tail_nbr < 10u) {
 1363              		.loc 1 2852 5 view .LVU531
 1364              		.loc 1 2852 8 is_stmt 0 view .LVU532
 1365 0004 092A     		cmp	r2, #9
 1366 0006 11D9     		bls	.L106
2853:rtos/uC-FS/FAT/fs_fat_lfn.c ****         char_cnt_tail = 1u;
2854:rtos/uC-FS/FAT/fs_fat_lfn.c ****     } else if (tail_nbr < 100u) {
 1367              		.loc 1 2854 12 is_stmt 1 view .LVU533
 1368              		.loc 1 2854 15 is_stmt 0 view .LVU534
 1369 0008 632A     		cmp	r2, #99
 1370 000a 49D9     		bls	.L107
2855:rtos/uC-FS/FAT/fs_fat_lfn.c ****         char_cnt_tail = 2u;
2856:rtos/uC-FS/FAT/fs_fat_lfn.c ****     } else if (tail_nbr < 1000u) {
 1371              		.loc 1 2856 12 is_stmt 1 view .LVU535
 1372              		.loc 1 2856 15 is_stmt 0 view .LVU536
 1373 000c B2F57A7F 		cmp	r2, #1000
 1374 0010 48D3     		bcc	.L108
2857:rtos/uC-FS/FAT/fs_fat_lfn.c ****         char_cnt_tail = 3u;
2858:rtos/uC-FS/FAT/fs_fat_lfn.c ****     } else if (tail_nbr < 10000u) {
 1375              		.loc 1 2858 12 is_stmt 1 view .LVU537
ARM GAS  /tmp/ccu2ENwm.s 			page 79


 1376              		.loc 1 2858 15 is_stmt 0 view .LVU538
 1377 0012 42F20F73 		movw	r3, #9999
 1378 0016 9A42     		cmp	r2, r3
 1379 0018 46D9     		bls	.L109
2859:rtos/uC-FS/FAT/fs_fat_lfn.c ****         char_cnt_tail = 4u;
2860:rtos/uC-FS/FAT/fs_fat_lfn.c ****     } else if (tail_nbr < 100000u) {
 1380              		.loc 1 2860 12 is_stmt 1 view .LVU539
 1381              		.loc 1 2860 15 is_stmt 0 view .LVU540
 1382 001a 484B     		ldr	r3, .L113
 1383 001c 9A42     		cmp	r2, r3
 1384 001e 45D9     		bls	.L110
2861:rtos/uC-FS/FAT/fs_fat_lfn.c ****         char_cnt_tail = 5u;
2862:rtos/uC-FS/FAT/fs_fat_lfn.c ****     } else if (tail_nbr < 1000000u) {
 1385              		.loc 1 2862 12 is_stmt 1 view .LVU541
 1386              		.loc 1 2862 15 is_stmt 0 view .LVU542
 1387 0020 474B     		ldr	r3, .L113+4
 1388 0022 9A42     		cmp	r2, r3
 1389 0024 00F28780 		bhi	.L100
2863:rtos/uC-FS/FAT/fs_fat_lfn.c ****         char_cnt_tail = 6u;
 1390              		.loc 1 2863 23 view .LVU543
 1391 0028 0624     		movs	r4, #6
 1392 002a 00E0     		b	.L101
 1393              	.L106:
2853:rtos/uC-FS/FAT/fs_fat_lfn.c ****     } else if (tail_nbr < 100u) {
 1394              		.loc 1 2853 23 view .LVU544
 1395 002c 0124     		movs	r4, #1
 1396              	.L101:
 1397              	.LVL190:
2864:rtos/uC-FS/FAT/fs_fat_lfn.c ****     } else {
2865:rtos/uC-FS/FAT/fs_fat_lfn.c ****         FS_TRACE_DBG(("FS_FAT_LFN_SFN_FmtTail(): Tail nbr %d > 999999.\r\n", tail_nbr));
2866:rtos/uC-FS/FAT/fs_fat_lfn.c ****         return;                                                 /* See Notes #1b.                  
2867:rtos/uC-FS/FAT/fs_fat_lfn.c ****     }
2868:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
2869:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
2870:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                 /* ------------------- FMT TAIL STR
2871:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                 /* See Notes #2.                   
2872:rtos/uC-FS/FAT/fs_fat_lfn.c ****     char_ix = 0u;
 1398              		.loc 1 2872 5 is_stmt 1 view .LVU545
2873:rtos/uC-FS/FAT/fs_fat_lfn.c ****     if (FS_FAT_SFN_NAME_MAX_NBR_CHAR >= char_cnt +  char_cnt_tail + 1u) {
 1399              		.loc 1 2873 5 view .LVU546
 1400              		.loc 1 2873 50 is_stmt 0 view .LVU547
 1401 002e 0B19     		adds	r3, r1, r4
 1402              		.loc 1 2873 67 view .LVU548
 1403 0030 0133     		adds	r3, r3, #1
 1404              		.loc 1 2873 8 view .LVU549
 1405 0032 082B     		cmp	r3, #8
 1406 0034 02D9     		bls	.L103
2874:rtos/uC-FS/FAT/fs_fat_lfn.c ****         char_ix +=  char_cnt;
2875:rtos/uC-FS/FAT/fs_fat_lfn.c ****     } else {
2876:rtos/uC-FS/FAT/fs_fat_lfn.c ****         char_ix += (FS_FAT_SFN_NAME_MAX_NBR_CHAR - 1u) - char_cnt_tail;
 1407              		.loc 1 2876 9 is_stmt 1 view .LVU550
 1408 0036 C4F10701 		rsb	r1, r4, #7
 1409              	.LVL191:
 1410              		.loc 1 2876 9 is_stmt 0 view .LVU551
 1411 003a 89B2     		uxth	r1, r1
 1412              	.LVL192:
 1413              	.L103:
ARM GAS  /tmp/ccu2ENwm.s 			page 80


2877:rtos/uC-FS/FAT/fs_fat_lfn.c ****     }
2878:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
2879:rtos/uC-FS/FAT/fs_fat_lfn.c ****     MEM_VAL_SET_INT32U((void *)&name_8_3_08[0], name_8_3[0]);
 1414              		.loc 1 2879 5 is_stmt 1 view .LVU552
 1415              		.loc 1 2879 5 view .LVU553
 1416 003c 0368     		ldr	r3, [r0]
 1417 003e 8DF80430 		strb	r3, [sp, #4]
 1418              		.loc 1 2879 5 view .LVU554
 1419 0042 C3F30725 		ubfx	r5, r3, #8, #8
 1420 0046 8DF80550 		strb	r5, [sp, #5]
 1421              		.loc 1 2879 5 view .LVU555
 1422 004a C3F30745 		ubfx	r5, r3, #16, #8
 1423 004e 8DF80650 		strb	r5, [sp, #6]
 1424              		.loc 1 2879 5 view .LVU556
 1425 0052 1B0E     		lsrs	r3, r3, #24
 1426 0054 8DF80730 		strb	r3, [sp, #7]
 1427              		.loc 1 2879 5 view .LVU557
2880:rtos/uC-FS/FAT/fs_fat_lfn.c ****     MEM_VAL_SET_INT32U((void *)&name_8_3_08[4], name_8_3[1]);
 1428              		.loc 1 2880 5 view .LVU558
 1429              		.loc 1 2880 5 view .LVU559
 1430 0058 4368     		ldr	r3, [r0, #4]
 1431 005a 8DF80830 		strb	r3, [sp, #8]
 1432              		.loc 1 2880 5 view .LVU560
 1433 005e C3F30725 		ubfx	r5, r3, #8, #8
 1434 0062 8DF80950 		strb	r5, [sp, #9]
 1435              		.loc 1 2880 5 view .LVU561
 1436 0066 C3F30745 		ubfx	r5, r3, #16, #8
 1437 006a 8DF80A50 		strb	r5, [sp, #10]
 1438              		.loc 1 2880 5 view .LVU562
 1439 006e 1B0E     		lsrs	r3, r3, #24
 1440 0070 8DF80B30 		strb	r3, [sp, #11]
 1441              		.loc 1 2880 5 view .LVU563
2881:rtos/uC-FS/FAT/fs_fat_lfn.c ****     MEM_VAL_SET_INT32U((void *)&name_8_3_08[8], name_8_3[2]);
 1442              		.loc 1 2881 5 view .LVU564
 1443              		.loc 1 2881 5 view .LVU565
 1444 0074 8368     		ldr	r3, [r0, #8]
 1445 0076 8DF80C30 		strb	r3, [sp, #12]
 1446              		.loc 1 2881 5 view .LVU566
 1447 007a C3F30725 		ubfx	r5, r3, #8, #8
 1448 007e 8DF80D50 		strb	r5, [sp, #13]
 1449              		.loc 1 2881 5 view .LVU567
 1450 0082 C3F30745 		ubfx	r5, r3, #16, #8
 1451 0086 8DF80E50 		strb	r5, [sp, #14]
 1452              		.loc 1 2881 5 view .LVU568
 1453 008a 1B0E     		lsrs	r3, r3, #24
 1454 008c 8DF80F30 		strb	r3, [sp, #15]
 1455              		.loc 1 2881 5 view .LVU569
2882:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
2883:rtos/uC-FS/FAT/fs_fat_lfn.c ****     name_8_3_08[char_ix] = (CPU_INT08U)ASCII_CHAR_TILDE;
 1456              		.loc 1 2883 5 view .LVU570
 1457              		.loc 1 2883 26 is_stmt 0 view .LVU571
 1458 0090 04AB     		add	r3, sp, #16
 1459 0092 0B44     		add	r3, r3, r1
 1460 0094 7E25     		movs	r5, #126
 1461 0096 03F80C5C 		strb	r5, [r3, #-12]
2884:rtos/uC-FS/FAT/fs_fat_lfn.c ****     char_ix += char_cnt_tail;
 1462              		.loc 1 2884 5 is_stmt 1 view .LVU572
ARM GAS  /tmp/ccu2ENwm.s 			page 81


 1463              		.loc 1 2884 13 is_stmt 0 view .LVU573
 1464 009a 2144     		add	r1, r1, r4
 1465              	.LVL193:
 1466              		.loc 1 2884 13 view .LVU574
 1467 009c 89B2     		uxth	r1, r1
 1468              	.LVL194:
2885:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
2886:rtos/uC-FS/FAT/fs_fat_lfn.c ****     while (char_cnt_tail > 0u) {
 1469              		.loc 1 2886 5 is_stmt 1 view .LVU575
 1470              		.loc 1 2886 11 is_stmt 0 view .LVU576
 1471 009e 1BE0     		b	.L104
 1472              	.LVL195:
 1473              	.L107:
2855:rtos/uC-FS/FAT/fs_fat_lfn.c ****     } else if (tail_nbr < 1000u) {
 1474              		.loc 1 2855 23 view .LVU577
 1475 00a0 0224     		movs	r4, #2
 1476 00a2 C4E7     		b	.L101
 1477              	.L108:
2857:rtos/uC-FS/FAT/fs_fat_lfn.c ****     } else if (tail_nbr < 10000u) {
 1478              		.loc 1 2857 23 view .LVU578
 1479 00a4 0324     		movs	r4, #3
 1480 00a6 C2E7     		b	.L101
 1481              	.L109:
2859:rtos/uC-FS/FAT/fs_fat_lfn.c ****     } else if (tail_nbr < 100000u) {
 1482              		.loc 1 2859 23 view .LVU579
 1483 00a8 0424     		movs	r4, #4
 1484 00aa C0E7     		b	.L101
 1485              	.L110:
2861:rtos/uC-FS/FAT/fs_fat_lfn.c ****     } else if (tail_nbr < 1000000u) {
 1486              		.loc 1 2861 23 view .LVU580
 1487 00ac 0524     		movs	r4, #5
 1488 00ae BEE7     		b	.L101
 1489              	.LVL196:
 1490              	.L105:
2887:rtos/uC-FS/FAT/fs_fat_lfn.c ****         tail_nbr_dig          = (CPU_INT08U)(tail_nbr % 10u);
 1491              		.loc 1 2887 9 is_stmt 1 view .LVU581
 1492              		.loc 1 2887 55 is_stmt 0 view .LVU582
 1493 00b0 244B     		ldr	r3, .L113+8
 1494 00b2 A3FB0253 		umull	r5, r3, r3, r2
 1495 00b6 DB08     		lsrs	r3, r3, #3
 1496 00b8 1D46     		mov	r5, r3
 1497 00ba 03EB8303 		add	r3, r3, r3, lsl #2
 1498 00be A2EB4303 		sub	r3, r2, r3, lsl #1
 1499              		.loc 1 2887 31 view .LVU583
 1500 00c2 DBB2     		uxtb	r3, r3
 1501              	.LVL197:
2888:rtos/uC-FS/FAT/fs_fat_lfn.c ****         name_8_3_08[char_ix]  =  tail_nbr_dig + (CPU_INT08U)ASCII_CHAR_DIGIT_ZERO;
 1502              		.loc 1 2888 9 is_stmt 1 view .LVU584
 1503              		.loc 1 2888 47 is_stmt 0 view .LVU585
 1504 00c4 3033     		adds	r3, r3, #48
 1505              	.LVL198:
 1506              		.loc 1 2888 31 view .LVU586
 1507 00c6 04AA     		add	r2, sp, #16
 1508              	.LVL199:
 1509              		.loc 1 2888 31 view .LVU587
 1510 00c8 0A44     		add	r2, r2, r1
 1511 00ca 02F80C3C 		strb	r3, [r2, #-12]
ARM GAS  /tmp/ccu2ENwm.s 			page 82


2889:rtos/uC-FS/FAT/fs_fat_lfn.c ****         tail_nbr             /=  DEF_NBR_BASE_DEC;
 1512              		.loc 1 2889 9 is_stmt 1 view .LVU588
 1513              		.loc 1 2889 30 is_stmt 0 view .LVU589
 1514 00ce 2A46     		mov	r2, r5
 1515              	.LVL200:
2890:rtos/uC-FS/FAT/fs_fat_lfn.c ****         char_ix--;
 1516              		.loc 1 2890 9 is_stmt 1 view .LVU590
 1517              		.loc 1 2890 16 is_stmt 0 view .LVU591
 1518 00d0 0139     		subs	r1, r1, #1
 1519              	.LVL201:
 1520              		.loc 1 2890 16 view .LVU592
 1521 00d2 89B2     		uxth	r1, r1
 1522              	.LVL202:
2891:rtos/uC-FS/FAT/fs_fat_lfn.c ****         char_cnt_tail--;
 1523              		.loc 1 2891 9 is_stmt 1 view .LVU593
 1524              		.loc 1 2891 22 is_stmt 0 view .LVU594
 1525 00d4 013C     		subs	r4, r4, #1
 1526              	.LVL203:
 1527              		.loc 1 2891 22 view .LVU595
 1528 00d6 A4B2     		uxth	r4, r4
 1529              	.LVL204:
 1530              	.L104:
2886:rtos/uC-FS/FAT/fs_fat_lfn.c ****         tail_nbr_dig          = (CPU_INT08U)(tail_nbr % 10u);
 1531              		.loc 1 2886 11 is_stmt 1 view .LVU596
 1532 00d8 002C     		cmp	r4, #0
 1533 00da E9D1     		bne	.L105
2892:rtos/uC-FS/FAT/fs_fat_lfn.c ****     }
2893:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
2894:rtos/uC-FS/FAT/fs_fat_lfn.c ****     name_8_3[0] = MEM_VAL_GET_INT32U((void *)&name_8_3_08[0]);
 1534              		.loc 1 2894 5 view .LVU597
 1535              		.loc 1 2894 19 is_stmt 0 view .LVU598
 1536 00dc 9DF80430 		ldrb	r3, [sp, #4]	@ zero_extendqisi2
 1537 00e0 9DF80520 		ldrb	r2, [sp, #5]	@ zero_extendqisi2
 1538              	.LVL205:
 1539              		.loc 1 2894 19 view .LVU599
 1540 00e4 03EB0223 		add	r3, r3, r2, lsl #8
 1541 00e8 9DF80620 		ldrb	r2, [sp, #6]	@ zero_extendqisi2
 1542 00ec 03EB0243 		add	r3, r3, r2, lsl #16
 1543 00f0 9DF80720 		ldrb	r2, [sp, #7]	@ zero_extendqisi2
 1544 00f4 03EB0263 		add	r3, r3, r2, lsl #24
 1545              		.loc 1 2894 17 view .LVU600
 1546 00f8 0360     		str	r3, [r0]
2895:rtos/uC-FS/FAT/fs_fat_lfn.c ****     name_8_3[1] = MEM_VAL_GET_INT32U((void *)&name_8_3_08[4]);
 1547              		.loc 1 2895 5 is_stmt 1 view .LVU601
 1548              		.loc 1 2895 19 is_stmt 0 view .LVU602
 1549 00fa 9DF80830 		ldrb	r3, [sp, #8]	@ zero_extendqisi2
 1550 00fe 9DF80920 		ldrb	r2, [sp, #9]	@ zero_extendqisi2
 1551 0102 03EB0223 		add	r3, r3, r2, lsl #8
 1552 0106 9DF80A20 		ldrb	r2, [sp, #10]	@ zero_extendqisi2
 1553 010a 03EB0243 		add	r3, r3, r2, lsl #16
 1554 010e 9DF80B20 		ldrb	r2, [sp, #11]	@ zero_extendqisi2
 1555 0112 03EB0263 		add	r3, r3, r2, lsl #24
 1556              		.loc 1 2895 17 view .LVU603
 1557 0116 4360     		str	r3, [r0, #4]
2896:rtos/uC-FS/FAT/fs_fat_lfn.c ****     name_8_3[2] = MEM_VAL_GET_INT32U((void *)&name_8_3_08[8]);
 1558              		.loc 1 2896 5 is_stmt 1 view .LVU604
 1559              		.loc 1 2896 19 is_stmt 0 view .LVU605
ARM GAS  /tmp/ccu2ENwm.s 			page 83


 1560 0118 9DF80C30 		ldrb	r3, [sp, #12]	@ zero_extendqisi2
 1561 011c 9DF80D20 		ldrb	r2, [sp, #13]	@ zero_extendqisi2
 1562 0120 03EB0223 		add	r3, r3, r2, lsl #8
 1563 0124 9DF80E20 		ldrb	r2, [sp, #14]	@ zero_extendqisi2
 1564 0128 03EB0243 		add	r3, r3, r2, lsl #16
 1565 012c 9DF80F20 		ldrb	r2, [sp, #15]	@ zero_extendqisi2
 1566 0130 03EB0263 		add	r3, r3, r2, lsl #24
 1567              		.loc 1 2896 17 view .LVU606
 1568 0134 8360     		str	r3, [r0, #8]
 1569              	.LVL206:
 1570              	.L100:
2897:rtos/uC-FS/FAT/fs_fat_lfn.c **** }
 1571              		.loc 1 2897 1 view .LVU607
 1572 0136 04B0     		add	sp, sp, #16
 1573              	.LCFI14:
 1574              		.cfi_def_cfa_offset 8
 1575              		@ sp needed
 1576 0138 30BC     		pop	{r4, r5}
 1577              	.LCFI15:
 1578              		.cfi_restore 5
 1579              		.cfi_restore 4
 1580              		.cfi_def_cfa_offset 0
 1581 013a 7047     		bx	lr
 1582              	.L114:
 1583              		.align	2
 1584              	.L113:
 1585 013c 9F860100 		.word	99999
 1586 0140 3F420F00 		.word	999999
 1587 0144 CDCCCCCC 		.word	-858993459
 1588              		.cfi_endproc
 1589              	.LFE15:
 1591              		.section	.text.FS_FAT_LFN_SFN_DirEntryFindMaxInSec,"ax",%progbits
 1592              		.align	1
 1593              		.syntax unified
 1594              		.thumb
 1595              		.thumb_func
 1596              		.fpu fpv4-sp-d16
 1598              	FS_FAT_LFN_SFN_DirEntryFindMaxInSec:
 1599              	.LVL207:
 1600              	.LFB17:
2898:rtos/uC-FS/FAT/fs_fat_lfn.c **** #endif
2899:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
2900:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
2901:rtos/uC-FS/FAT/fs_fat_lfn.c **** /*
2902:rtos/uC-FS/FAT/fs_fat_lfn.c **** ***************************************************************************************************
2903:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                                  FS_FAT_LFN_SFN_DirEntryFindMax()
2904:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
2905:rtos/uC-FS/FAT/fs_fat_lfn.c **** * Description : Search directory for find SFN directory entries with the same stem & return max tai
2906:rtos/uC-FS/FAT/fs_fat_lfn.c **** *               value.
2907:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
2908:rtos/uC-FS/FAT/fs_fat_lfn.c **** * Argument(s) : p_vol           Pointer to volume.
2909:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
2910:rtos/uC-FS/FAT/fs_fat_lfn.c **** *               p_buf           Pointer to temporary buffer.
2911:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
2912:rtos/uC-FS/FAT/fs_fat_lfn.c **** *               name_8_3        Entry SFN.
2913:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
2914:rtos/uC-FS/FAT/fs_fat_lfn.c **** *               dir_start_sec   Directory sector at which search should start.
ARM GAS  /tmp/ccu2ENwm.s 			page 84


2915:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
2916:rtos/uC-FS/FAT/fs_fat_lfn.c **** *               p_err           Pointer to variable that will receive the return error code from th
2917:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
2918:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                                   FS_ERR_NONE                       Directory entry found.
2919:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                                   FS_ERR_DEV                        Device access error.
2920:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                                   FS_ERR_SYS_DIR_ENTRY_NOT_FOUND    Directory entry not found.
2921:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
2922:rtos/uC-FS/FAT/fs_fat_lfn.c **** * Return(s)   : Maximum tail value, if any is found.
2923:rtos/uC-FS/FAT/fs_fat_lfn.c **** *               0,                  otherwise.
2924:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
2925:rtos/uC-FS/FAT/fs_fat_lfn.c **** * Note(s)     : (1) (a) The 'p_temp' pointer is 4-byte aligned since all buffers are 4-byte aligned
2926:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
2927:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                   (b) All pointers to directory entries are 4-byte aligned since all directory en
2928:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                       lie at a offset multiple of 32 (the size of a directory entry) from the beg
2929:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                       of a sector.
2930:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
2931:rtos/uC-FS/FAT/fs_fat_lfn.c **** *               (2) The sector number gotten from the FAT should be valid.  These checks are effect
2932:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                   redundant.
2933:rtos/uC-FS/FAT/fs_fat_lfn.c **** ***************************************************************************************************
2934:rtos/uC-FS/FAT/fs_fat_lfn.c **** */
2935:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
2936:rtos/uC-FS/FAT/fs_fat_lfn.c **** #if (FS_CFG_RD_ONLY_EN == DEF_DISABLED)
2937:rtos/uC-FS/FAT/fs_fat_lfn.c **** static  FS_FAT_SFN_TAIL  FS_FAT_LFN_SFN_DirEntryFindMax (FS_VOL          *p_vol,
2938:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                          FS_BUF          *p_buf,
2939:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                          CPU_INT32U       name_8_3[],
2940:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                          FS_FAT_SEC_NBR   dir_start_sec,
2941:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                          FS_ERR          *p_err)
2942:rtos/uC-FS/FAT/fs_fat_lfn.c **** {
2943:rtos/uC-FS/FAT/fs_fat_lfn.c ****     FS_FAT_SEC_NBR    dir_cur_sec;
2944:rtos/uC-FS/FAT/fs_fat_lfn.c ****     CPU_BOOLEAN       dir_sec_valid;
2945:rtos/uC-FS/FAT/fs_fat_lfn.c ****     FS_FAT_SFN_TAIL   max;
2946:rtos/uC-FS/FAT/fs_fat_lfn.c ****     FS_FAT_SFN_TAIL   max_temp;
2947:rtos/uC-FS/FAT/fs_fat_lfn.c ****     FS_FAT_DATA      *p_fat_data;
2948:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
2949:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
2950:rtos/uC-FS/FAT/fs_fat_lfn.c ****     p_fat_data    = (FS_FAT_DATA *)p_vol->DataPtr;
2951:rtos/uC-FS/FAT/fs_fat_lfn.c ****     dir_cur_sec   =  dir_start_sec;
2952:rtos/uC-FS/FAT/fs_fat_lfn.c ****     dir_sec_valid =  FS_FAT_IS_VALID_SEC(p_fat_data, dir_cur_sec);
2953:rtos/uC-FS/FAT/fs_fat_lfn.c ****     max           =  0u;
2954:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
2955:rtos/uC-FS/FAT/fs_fat_lfn.c ****     while (dir_sec_valid == DEF_YES) {                          /* While sec is valid (see Note #2)
2956:rtos/uC-FS/FAT/fs_fat_lfn.c ****         FSBuf_Set(p_buf,
2957:rtos/uC-FS/FAT/fs_fat_lfn.c ****                   dir_cur_sec,
2958:rtos/uC-FS/FAT/fs_fat_lfn.c ****                   FS_VOL_SEC_TYPE_DIR,
2959:rtos/uC-FS/FAT/fs_fat_lfn.c ****                   DEF_YES,
2960:rtos/uC-FS/FAT/fs_fat_lfn.c ****                   p_err);
2961:rtos/uC-FS/FAT/fs_fat_lfn.c ****         if (*p_err != FS_ERR_NONE) {
2962:rtos/uC-FS/FAT/fs_fat_lfn.c ****             return (0u);
2963:rtos/uC-FS/FAT/fs_fat_lfn.c ****         }
2964:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
2965:rtos/uC-FS/FAT/fs_fat_lfn.c ****         max_temp = FS_FAT_LFN_SFN_DirEntryFindMaxInSec(p_buf->DataPtr,
2966:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                        p_fat_data->SecSize,
2967:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                        name_8_3,
2968:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                        p_err);
2969:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
2970:rtos/uC-FS/FAT/fs_fat_lfn.c ****         max      = DEF_MAX(max, max_temp);
2971:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
ARM GAS  /tmp/ccu2ENwm.s 			page 85


2972:rtos/uC-FS/FAT/fs_fat_lfn.c ****         switch (*p_err) {
2973:rtos/uC-FS/FAT/fs_fat_lfn.c ****             case FS_ERR_SYS_DIR_ENTRY_NOT_FOUND:                /* No entry with matching name exis
2974:rtos/uC-FS/FAT/fs_fat_lfn.c ****                  return (max);
2975:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
2976:rtos/uC-FS/FAT/fs_fat_lfn.c ****             case FS_ERR_SYS_DIR_ENTRY_NOT_FOUND_YET:            /* Entry with matching name MAY exi
2977:rtos/uC-FS/FAT/fs_fat_lfn.c ****                  dir_cur_sec = FS_FAT_SecNextGet(p_vol,
2978:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                  p_buf,
2979:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                  dir_cur_sec,
2980:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                  p_err);
2981:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
2982:rtos/uC-FS/FAT/fs_fat_lfn.c ****                  switch (*p_err) {
2983:rtos/uC-FS/FAT/fs_fat_lfn.c ****                      case FS_ERR_NONE:                          /* More secs exist in dir.         
2984:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                 /* Chk sec validity (see Note #2). 
2985:rtos/uC-FS/FAT/fs_fat_lfn.c ****                           dir_sec_valid = FS_FAT_IS_VALID_SEC(p_fat_data, dir_cur_sec);
2986:rtos/uC-FS/FAT/fs_fat_lfn.c ****                           break;
2987:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
2988:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
2989:rtos/uC-FS/FAT/fs_fat_lfn.c ****                      case FS_ERR_SYS_CLUS_CHAIN_END:            /* No more secs exist in dir.      
2990:rtos/uC-FS/FAT/fs_fat_lfn.c ****                      case FS_ERR_SYS_CLUS_INVALID:
2991:rtos/uC-FS/FAT/fs_fat_lfn.c ****                          *p_err = FS_ERR_NONE;
2992:rtos/uC-FS/FAT/fs_fat_lfn.c ****                           return (max);
2993:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
2994:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
2995:rtos/uC-FS/FAT/fs_fat_lfn.c ****                      case FS_ERR_DEV:
2996:rtos/uC-FS/FAT/fs_fat_lfn.c ****                      default:
2997:rtos/uC-FS/FAT/fs_fat_lfn.c ****                           return (0u);
2998:rtos/uC-FS/FAT/fs_fat_lfn.c ****                  }
2999:rtos/uC-FS/FAT/fs_fat_lfn.c ****                  break;
3000:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
3001:rtos/uC-FS/FAT/fs_fat_lfn.c ****             case FS_ERR_DEV:
3002:rtos/uC-FS/FAT/fs_fat_lfn.c ****                  return (0u);
3003:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
3004:rtos/uC-FS/FAT/fs_fat_lfn.c ****             default:
3005:rtos/uC-FS/FAT/fs_fat_lfn.c ****                  FS_TRACE_DBG(("FS_FAT_LFN_SFN_DirEntryFindMax(): Default case reached.\r\n"));
3006:rtos/uC-FS/FAT/fs_fat_lfn.c ****                  return (0u);
3007:rtos/uC-FS/FAT/fs_fat_lfn.c ****         }
3008:rtos/uC-FS/FAT/fs_fat_lfn.c ****     }
3009:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
3010:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
3011:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                 /* Invalid sec found (see Note #2).
3012:rtos/uC-FS/FAT/fs_fat_lfn.c ****     FS_TRACE_DBG(("FS_FAT_LFN_SFN_DirEntryFindMax(): Invalid sec gotten: %d.\r\n", dir_cur_sec));
3013:rtos/uC-FS/FAT/fs_fat_lfn.c ****    *p_err = FS_ERR_ENTRY_CORRUPT;
3014:rtos/uC-FS/FAT/fs_fat_lfn.c ****     return (0u);
3015:rtos/uC-FS/FAT/fs_fat_lfn.c **** }
3016:rtos/uC-FS/FAT/fs_fat_lfn.c **** #endif
3017:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
3018:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
3019:rtos/uC-FS/FAT/fs_fat_lfn.c **** /*
3020:rtos/uC-FS/FAT/fs_fat_lfn.c **** ***************************************************************************************************
3021:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                                FS_FAT_LFN_SFN_DirEntryFindMaxInSec()
3022:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
3023:rtos/uC-FS/FAT/fs_fat_lfn.c **** * Description : Search directory sector to find SFN directory entry with the same stem & return max
3024:rtos/uC-FS/FAT/fs_fat_lfn.c **** *               value.
3025:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
3026:rtos/uC-FS/FAT/fs_fat_lfn.c **** * Argument(s) : p_temp      Pointer to buffer of directory sector.
3027:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
3028:rtos/uC-FS/FAT/fs_fat_lfn.c **** *               sec_size    Sector size, in octets.
ARM GAS  /tmp/ccu2ENwm.s 			page 86


3029:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
3030:rtos/uC-FS/FAT/fs_fat_lfn.c **** *               name_8_3    Entry SFN.
3031:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
3032:rtos/uC-FS/FAT/fs_fat_lfn.c **** *               p_err       Pointer to variable that will receive the return error code from this f
3033:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
3034:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                               FS_ERR_SYS_DIR_ENTRY_NOT_FOUND        All subsequent entries are fr
3035:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                                                                         (so search SHOULD end).
3036:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                               FS_ERR_SYS_DIR_ENTRY_NOT_FOUND_YET    Non-free subsequent entries m
3037:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
3038:rtos/uC-FS/FAT/fs_fat_lfn.c **** * Return(s)   : Maximum tail value, if any is found.
3039:rtos/uC-FS/FAT/fs_fat_lfn.c **** *               0,                  otherwise.
3040:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
3041:rtos/uC-FS/FAT/fs_fat_lfn.c **** * Note(s)     : (1) (a) The 'p_temp' pointer is 4-byte aligned since all sectors are 4-byte aligned
3042:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
3043:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                   (b) All pointers to directory entries are 4-byte aligned since all directory en
3044:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                       lie at a offset multiple of 32 (the size of a directory entry) from the beg
3045:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                       of a sector.
3046:rtos/uC-FS/FAT/fs_fat_lfn.c **** ***************************************************************************************************
3047:rtos/uC-FS/FAT/fs_fat_lfn.c **** */
3048:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
3049:rtos/uC-FS/FAT/fs_fat_lfn.c **** #if (FS_CFG_RD_ONLY_EN == DEF_DISABLED)
3050:rtos/uC-FS/FAT/fs_fat_lfn.c **** static  FS_FAT_SFN_TAIL  FS_FAT_LFN_SFN_DirEntryFindMaxInSec (void         *p_temp,
3051:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                               FS_SEC_SIZE   sec_size,
3052:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                               CPU_INT32U    name_8_3[],
3053:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                               FS_ERR       *p_err)
3054:rtos/uC-FS/FAT/fs_fat_lfn.c **** {
 1601              		.loc 1 3054 1 is_stmt 1 view -0
 1602              		.cfi_startproc
 1603              		@ args = 0, pretend = 0, frame = 16
 1604              		@ frame_needed = 0, uses_anonymous_args = 0
 1605              		.loc 1 3054 1 is_stmt 0 view .LVU609
 1606 0000 2DE9F043 		push	{r4, r5, r6, r7, r8, r9, lr}
 1607              	.LCFI16:
 1608              		.cfi_def_cfa_offset 28
 1609              		.cfi_offset 4, -28
 1610              		.cfi_offset 5, -24
 1611              		.cfi_offset 6, -20
 1612              		.cfi_offset 7, -16
 1613              		.cfi_offset 8, -12
 1614              		.cfi_offset 9, -8
 1615              		.cfi_offset 14, -4
 1616 0004 85B0     		sub	sp, sp, #20
 1617              	.LCFI17:
 1618              		.cfi_def_cfa_offset 48
 1619 0006 8446     		mov	ip, r0
3055:rtos/uC-FS/FAT/fs_fat_lfn.c ****     CPU_INT08U        cmp_len;
 1620              		.loc 1 3055 5 is_stmt 1 view .LVU610
3056:rtos/uC-FS/FAT/fs_fat_lfn.c ****     CPU_INT08U        data_08;
 1621              		.loc 1 3056 5 view .LVU611
3057:rtos/uC-FS/FAT/fs_fat_lfn.c ****     CPU_BOOLEAN       dig;
 1622              		.loc 1 3057 5 view .LVU612
3058:rtos/uC-FS/FAT/fs_fat_lfn.c ****     CPU_BOOLEAN       space;
 1623              		.loc 1 3058 5 view .LVU613
3059:rtos/uC-FS/FAT/fs_fat_lfn.c ****     FS_FAT_SFN_TAIL   max;
 1624              		.loc 1 3059 5 view .LVU614
3060:rtos/uC-FS/FAT/fs_fat_lfn.c ****     FS_FAT_SFN_TAIL   max_temp;
 1625              		.loc 1 3060 5 view .LVU615
ARM GAS  /tmp/ccu2ENwm.s 			page 87


3061:rtos/uC-FS/FAT/fs_fat_lfn.c ****     CPU_INT08U        name_char;
 1626              		.loc 1 3061 5 view .LVU616
3062:rtos/uC-FS/FAT/fs_fat_lfn.c ****     CPU_INT08U        name_cmp_char;
 1627              		.loc 1 3062 5 view .LVU617
3063:rtos/uC-FS/FAT/fs_fat_lfn.c ****     FS_SEC_SIZE       sec_pos;
 1628              		.loc 1 3063 5 view .LVU618
3064:rtos/uC-FS/FAT/fs_fat_lfn.c ****     CPU_INT08U       *p_buf_08;
 1629              		.loc 1 3064 5 view .LVU619
3065:rtos/uC-FS/FAT/fs_fat_lfn.c ****     CPU_INT08U       *p_name;
 1630              		.loc 1 3065 5 view .LVU620
3066:rtos/uC-FS/FAT/fs_fat_lfn.c ****     CPU_INT08U       *p_name_cmp;
 1631              		.loc 1 3066 5 view .LVU621
3067:rtos/uC-FS/FAT/fs_fat_lfn.c ****     CPU_INT08U        name_8_3_08[12];
 1632              		.loc 1 3067 5 view .LVU622
3068:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
3069:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
3070:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
3071:rtos/uC-FS/FAT/fs_fat_lfn.c ****     MEM_VAL_SET_INT32U((void *)&name_8_3_08[0], name_8_3[0]);
 1633              		.loc 1 3071 5 view .LVU623
 1634              		.loc 1 3071 5 view .LVU624
 1635 0008 1068     		ldr	r0, [r2]
 1636              	.LVL208:
 1637              		.loc 1 3071 5 is_stmt 0 view .LVU625
 1638 000a 5FFA80F8 		uxtb	r8, r0
 1639 000e 8DF80480 		strb	r8, [sp, #4]
 1640              		.loc 1 3071 5 is_stmt 1 view .LVU626
 1641 0012 C0F30724 		ubfx	r4, r0, #8, #8
 1642 0016 8DF80540 		strb	r4, [sp, #5]
 1643              		.loc 1 3071 5 view .LVU627
 1644 001a C0F30744 		ubfx	r4, r0, #16, #8
 1645 001e 8DF80640 		strb	r4, [sp, #6]
 1646              		.loc 1 3071 5 view .LVU628
 1647 0022 000E     		lsrs	r0, r0, #24
 1648 0024 8DF80700 		strb	r0, [sp, #7]
 1649              		.loc 1 3071 5 view .LVU629
3072:rtos/uC-FS/FAT/fs_fat_lfn.c ****     MEM_VAL_SET_INT32U((void *)&name_8_3_08[4], name_8_3[1]);
 1650              		.loc 1 3072 5 view .LVU630
 1651              		.loc 1 3072 5 view .LVU631
 1652 0028 5068     		ldr	r0, [r2, #4]
 1653 002a 8DF80800 		strb	r0, [sp, #8]
 1654              		.loc 1 3072 5 view .LVU632
 1655 002e C0F30724 		ubfx	r4, r0, #8, #8
 1656 0032 8DF80940 		strb	r4, [sp, #9]
 1657              		.loc 1 3072 5 view .LVU633
 1658 0036 C0F30744 		ubfx	r4, r0, #16, #8
 1659 003a 8DF80A40 		strb	r4, [sp, #10]
 1660              		.loc 1 3072 5 view .LVU634
 1661 003e 000E     		lsrs	r0, r0, #24
 1662 0040 8DF80B00 		strb	r0, [sp, #11]
 1663              		.loc 1 3072 5 view .LVU635
3073:rtos/uC-FS/FAT/fs_fat_lfn.c ****     MEM_VAL_SET_INT32U((void *)&name_8_3_08[8], name_8_3[2]);
 1664              		.loc 1 3073 5 view .LVU636
 1665              		.loc 1 3073 5 view .LVU637
 1666 0044 9268     		ldr	r2, [r2, #8]
 1667              	.LVL209:
 1668              		.loc 1 3073 5 is_stmt 0 view .LVU638
 1669 0046 8DF80C20 		strb	r2, [sp, #12]
ARM GAS  /tmp/ccu2ENwm.s 			page 88


 1670              		.loc 1 3073 5 is_stmt 1 view .LVU639
 1671 004a C2F30720 		ubfx	r0, r2, #8, #8
 1672 004e 8DF80D00 		strb	r0, [sp, #13]
 1673              		.loc 1 3073 5 view .LVU640
 1674 0052 C2F30740 		ubfx	r0, r2, #16, #8
 1675 0056 8DF80E00 		strb	r0, [sp, #14]
 1676              		.loc 1 3073 5 view .LVU641
 1677 005a 120E     		lsrs	r2, r2, #24
 1678 005c 8DF80F20 		strb	r2, [sp, #15]
 1679              		.loc 1 3073 5 view .LVU642
3074:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
3075:rtos/uC-FS/FAT/fs_fat_lfn.c ****     p_name   =  name_8_3_08;
 1680              		.loc 1 3075 5 view .LVU643
 1681              	.LVL210:
3076:rtos/uC-FS/FAT/fs_fat_lfn.c ****     max      =  0u;
 1682              		.loc 1 3076 5 view .LVU644
3077:rtos/uC-FS/FAT/fs_fat_lfn.c ****     sec_pos  =  0u;
 1683              		.loc 1 3077 5 view .LVU645
3078:rtos/uC-FS/FAT/fs_fat_lfn.c ****     p_buf_08 = (CPU_INT08U *)p_temp;
 1684              		.loc 1 3078 5 view .LVU646
3079:rtos/uC-FS/FAT/fs_fat_lfn.c ****     while (sec_pos < sec_size) {
 1685              		.loc 1 3079 5 view .LVU647
3077:rtos/uC-FS/FAT/fs_fat_lfn.c ****     sec_pos  =  0u;
 1686              		.loc 1 3077 14 is_stmt 0 view .LVU648
 1687 0060 4FF0000E 		mov	lr, #0
3076:rtos/uC-FS/FAT/fs_fat_lfn.c ****     sec_pos  =  0u;
 1688              		.loc 1 3076 14 view .LVU649
 1689 0064 7046     		mov	r0, lr
 1690              		.loc 1 3079 11 view .LVU650
 1691 0066 0BE0     		b	.L116
 1692              	.LVL211:
 1693              	.L142:
3080:rtos/uC-FS/FAT/fs_fat_lfn.c ****         data_08 = *p_buf_08;
3081:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
3082:rtos/uC-FS/FAT/fs_fat_lfn.c ****         if (data_08 == FS_FAT_DIRENT_NAME_FREE) {               /* If dir entry free & all subseque
3083:rtos/uC-FS/FAT/fs_fat_lfn.c ****            *p_err = FS_ERR_SYS_DIR_ENTRY_NOT_FOUND;
 1694              		.loc 1 3083 12 is_stmt 1 view .LVU651
 1695              		.loc 1 3083 19 is_stmt 0 view .LVU652
 1696 0068 40F23352 		movw	r2, #1331
 1697 006c 1A80     		strh	r2, [r3]	@ movhi
3084:rtos/uC-FS/FAT/fs_fat_lfn.c ****             return (max);                                       /* ... rtn cur max.                
 1698              		.loc 1 3084 13 is_stmt 1 view .LVU653
 1699              		.loc 1 3084 20 is_stmt 0 view .LVU654
 1700 006e 61E0     		b	.L115
 1701              	.LVL212:
 1702              	.L121:
3085:rtos/uC-FS/FAT/fs_fat_lfn.c ****         }
3086:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
3087:rtos/uC-FS/FAT/fs_fat_lfn.c ****         if (data_08 != FS_FAT_DIRENT_NAME_ERASED_AND_FREE) {    /* If dir entry NOT free.          
3088:rtos/uC-FS/FAT/fs_fat_lfn.c ****             p_name_cmp    =  p_buf_08;
3089:rtos/uC-FS/FAT/fs_fat_lfn.c ****             cmp_len       =  0u;
3090:rtos/uC-FS/FAT/fs_fat_lfn.c ****             name_cmp_char = *p_name_cmp;
3091:rtos/uC-FS/FAT/fs_fat_lfn.c ****             name_char     = *p_name;
3092:rtos/uC-FS/FAT/fs_fat_lfn.c ****             while ((name_cmp_char == name_char) &&              /* Cmp first 6 chars of name & dir 
3093:rtos/uC-FS/FAT/fs_fat_lfn.c ****                    ( cmp_len      <  FS_FAT_SFN_MAX_STEM_LEN)) {
3094:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 p_name_cmp   +=  sizeof(CPU_INT08U);
3095:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 p_name       +=  sizeof(CPU_INT08U);
ARM GAS  /tmp/ccu2ENwm.s 			page 89


3096:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 cmp_len      +=  sizeof(CPU_INT08U);
3097:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 name_cmp_char = *p_name_cmp;
3098:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 name_char     = *p_name;
3099:rtos/uC-FS/FAT/fs_fat_lfn.c ****             }
3100:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
3101:rtos/uC-FS/FAT/fs_fat_lfn.c ****             if (cmp_len > 0u) {                                 /* Matching char(s) found.         
 1703              		.loc 1 3101 13 is_stmt 1 view .LVU655
 1704              		.loc 1 3101 16 is_stmt 0 view .LVU656
 1705 0070 12B1     		cbz	r2, .L120
3102:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 name_cmp_char = *p_name_cmp;
 1706              		.loc 1 3102 17 is_stmt 1 view .LVU657
 1707              		.loc 1 3102 31 is_stmt 0 view .LVU658
 1708 0072 3478     		ldrb	r4, [r6]	@ zero_extendqisi2
 1709              	.LVL213:
3103:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 if (name_cmp_char == (CPU_INT08U)ASCII_CHAR_TILDE) {    /* Names match up to tilde.
 1710              		.loc 1 3103 17 is_stmt 1 view .LVU659
 1711              		.loc 1 3103 20 is_stmt 0 view .LVU660
 1712 0074 7E2C     		cmp	r4, #126
 1713 0076 1AD0     		beq	.L140
 1714              	.LVL214:
 1715              	.L120:
3104:rtos/uC-FS/FAT/fs_fat_lfn.c ****                     p_name_cmp++;                                       /* Move past tilde.        
3105:rtos/uC-FS/FAT/fs_fat_lfn.c ****                     max_temp = 0u;
3106:rtos/uC-FS/FAT/fs_fat_lfn.c ****                     while (cmp_len < FS_FAT_SFN_NAME_MAX_NBR_CHAR - 1u) {
3107:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
3108:rtos/uC-FS/FAT/fs_fat_lfn.c ****                         name_cmp_char  = *p_name_cmp;
3109:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                         /* Chk if tail char is dig.
3110:rtos/uC-FS/FAT/fs_fat_lfn.c ****                         dig   = ASCII_IS_DIG((CPU_CHAR)name_cmp_char);
3111:rtos/uC-FS/FAT/fs_fat_lfn.c ****                         space = ASCII_IS_SPACE((CPU_CHAR)name_cmp_char);
3112:rtos/uC-FS/FAT/fs_fat_lfn.c ****                         if (dig == DEF_NO) {
3113:rtos/uC-FS/FAT/fs_fat_lfn.c ****                             if(space == DEF_NO) {
3114:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                 max_temp = 0u;                          /* Invalid tail found.     
3115:rtos/uC-FS/FAT/fs_fat_lfn.c ****                             }
3116:rtos/uC-FS/FAT/fs_fat_lfn.c ****                             break;
3117:rtos/uC-FS/FAT/fs_fat_lfn.c ****                         }
3118:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
3119:rtos/uC-FS/FAT/fs_fat_lfn.c ****                         max_temp   *=  10u;
3120:rtos/uC-FS/FAT/fs_fat_lfn.c ****                         max_temp   += (FS_FAT_SFN_TAIL)name_cmp_char - (FS_FAT_SFN_TAIL)ASCII_CHAR_
3121:rtos/uC-FS/FAT/fs_fat_lfn.c ****                         cmp_len    +=  sizeof(CPU_INT08U);
3122:rtos/uC-FS/FAT/fs_fat_lfn.c ****                         p_name_cmp +=  sizeof(CPU_INT08U);
3123:rtos/uC-FS/FAT/fs_fat_lfn.c ****                     }
3124:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
3125:rtos/uC-FS/FAT/fs_fat_lfn.c ****                     max = DEF_MAX(max, max_temp);
3126:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 }
3127:rtos/uC-FS/FAT/fs_fat_lfn.c ****             }
3128:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
3129:rtos/uC-FS/FAT/fs_fat_lfn.c ****             p_name = name_8_3_08;
3130:rtos/uC-FS/FAT/fs_fat_lfn.c ****         }
3131:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
3132:rtos/uC-FS/FAT/fs_fat_lfn.c ****         p_buf_08 += FS_FAT_SIZE_DIR_ENTRY;
 1716              		.loc 1 3132 9 is_stmt 1 view .LVU661
 1717              		.loc 1 3132 18 is_stmt 0 view .LVU662
 1718 0078 0CF1200C 		add	ip, ip, #32
 1719              	.LVL215:
3133:rtos/uC-FS/FAT/fs_fat_lfn.c ****         sec_pos  += FS_FAT_SIZE_DIR_ENTRY;
 1720              		.loc 1 3133 9 is_stmt 1 view .LVU663
 1721              		.loc 1 3133 18 is_stmt 0 view .LVU664
ARM GAS  /tmp/ccu2ENwm.s 			page 90


 1722 007c 0EF1200E 		add	lr, lr, #32
 1723              	.LVL216:
 1724              	.L116:
3079:rtos/uC-FS/FAT/fs_fat_lfn.c ****         data_08 = *p_buf_08;
 1725              		.loc 1 3079 11 is_stmt 1 view .LVU665
 1726 0080 8E45     		cmp	lr, r1
 1727 0082 54D2     		bcs	.L141
3080:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 1728              		.loc 1 3080 9 view .LVU666
3080:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 1729              		.loc 1 3080 17 is_stmt 0 view .LVU667
 1730 0084 9CF80040 		ldrb	r4, [ip]	@ zero_extendqisi2
 1731              	.LVL217:
3082:rtos/uC-FS/FAT/fs_fat_lfn.c ****            *p_err = FS_ERR_SYS_DIR_ENTRY_NOT_FOUND;
 1732              		.loc 1 3082 9 is_stmt 1 view .LVU668
3082:rtos/uC-FS/FAT/fs_fat_lfn.c ****            *p_err = FS_ERR_SYS_DIR_ENTRY_NOT_FOUND;
 1733              		.loc 1 3082 12 is_stmt 0 view .LVU669
 1734 0088 002C     		cmp	r4, #0
 1735 008a EDD0     		beq	.L142
3087:rtos/uC-FS/FAT/fs_fat_lfn.c ****             p_name_cmp    =  p_buf_08;
 1736              		.loc 1 3087 9 is_stmt 1 view .LVU670
3087:rtos/uC-FS/FAT/fs_fat_lfn.c ****             p_name_cmp    =  p_buf_08;
 1737              		.loc 1 3087 12 is_stmt 0 view .LVU671
 1738 008c E52C     		cmp	r4, #229
 1739 008e F3D0     		beq	.L120
3088:rtos/uC-FS/FAT/fs_fat_lfn.c ****             cmp_len       =  0u;
 1740              		.loc 1 3088 27 view .LVU672
 1741 0090 6646     		mov	r6, ip
3091:rtos/uC-FS/FAT/fs_fat_lfn.c ****             while ((name_cmp_char == name_char) &&              /* Cmp first 6 chars of name & dir 
 1742              		.loc 1 3091 27 view .LVU673
 1743 0092 4546     		mov	r5, r8
 1744 0094 01AF     		add	r7, sp, #4
 1745              	.LVL218:
3089:rtos/uC-FS/FAT/fs_fat_lfn.c ****             name_cmp_char = *p_name_cmp;
 1746              		.loc 1 3089 27 view .LVU674
 1747 0096 0022     		movs	r2, #0
 1748              	.LVL219:
 1749              	.L119:
3092:rtos/uC-FS/FAT/fs_fat_lfn.c ****                    ( cmp_len      <  FS_FAT_SFN_MAX_STEM_LEN)) {
 1750              		.loc 1 3092 19 is_stmt 1 view .LVU675
 1751 0098 A542     		cmp	r5, r4
 1752 009a E9D1     		bne	.L121
3092:rtos/uC-FS/FAT/fs_fat_lfn.c ****                    ( cmp_len      <  FS_FAT_SFN_MAX_STEM_LEN)) {
 1753              		.loc 1 3092 49 is_stmt 0 discriminator 1 view .LVU676
 1754 009c 052A     		cmp	r2, #5
 1755 009e E7D8     		bhi	.L121
3094:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 p_name       +=  sizeof(CPU_INT08U);
 1756              		.loc 1 3094 17 is_stmt 1 view .LVU677
 1757              	.LVL220:
3095:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 cmp_len      +=  sizeof(CPU_INT08U);
 1758              		.loc 1 3095 17 view .LVU678
3096:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 name_cmp_char = *p_name_cmp;
 1759              		.loc 1 3096 17 view .LVU679
3096:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 name_cmp_char = *p_name_cmp;
 1760              		.loc 1 3096 30 is_stmt 0 view .LVU680
 1761 00a0 0132     		adds	r2, r2, #1
 1762              	.LVL221:
ARM GAS  /tmp/ccu2ENwm.s 			page 91


3096:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 name_cmp_char = *p_name_cmp;
 1763              		.loc 1 3096 30 view .LVU681
 1764 00a2 D2B2     		uxtb	r2, r2
 1765              	.LVL222:
3097:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 name_char     = *p_name;
 1766              		.loc 1 3097 17 is_stmt 1 view .LVU682
3097:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 name_char     = *p_name;
 1767              		.loc 1 3097 31 is_stmt 0 view .LVU683
 1768 00a4 16F8014F 		ldrb	r4, [r6, #1]!	@ zero_extendqisi2
 1769              	.LVL223:
3098:rtos/uC-FS/FAT/fs_fat_lfn.c ****             }
 1770              		.loc 1 3098 17 is_stmt 1 view .LVU684
3098:rtos/uC-FS/FAT/fs_fat_lfn.c ****             }
 1771              		.loc 1 3098 31 is_stmt 0 view .LVU685
 1772 00a8 17F8015F 		ldrb	r5, [r7, #1]!	@ zero_extendqisi2
 1773              	.LVL224:
3098:rtos/uC-FS/FAT/fs_fat_lfn.c ****             }
 1774              		.loc 1 3098 31 view .LVU686
 1775 00ac F4E7     		b	.L119
 1776              	.L140:
3104:rtos/uC-FS/FAT/fs_fat_lfn.c ****                     max_temp = 0u;
 1777              		.loc 1 3104 21 is_stmt 1 view .LVU687
3104:rtos/uC-FS/FAT/fs_fat_lfn.c ****                     max_temp = 0u;
 1778              		.loc 1 3104 31 is_stmt 0 view .LVU688
 1779 00ae 0136     		adds	r6, r6, #1
 1780              	.LVL225:
3105:rtos/uC-FS/FAT/fs_fat_lfn.c ****                     while (cmp_len < FS_FAT_SFN_NAME_MAX_NBR_CHAR - 1u) {
 1781              		.loc 1 3105 21 is_stmt 1 view .LVU689
3106:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 1782              		.loc 1 3106 21 view .LVU690
3105:rtos/uC-FS/FAT/fs_fat_lfn.c ****                     while (cmp_len < FS_FAT_SFN_NAME_MAX_NBR_CHAR - 1u) {
 1783              		.loc 1 3105 30 is_stmt 0 view .LVU691
 1784 00b0 0024     		movs	r4, #0
 1785              	.LVL226:
 1786              	.L123:
3106:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 1787              		.loc 1 3106 27 is_stmt 1 view .LVU692
 1788 00b2 062A     		cmp	r2, #6
 1789 00b4 03D9     		bls	.L143
 1790              	.LVL227:
 1791              	.L127:
3125:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 }
 1792              		.loc 1 3125 21 view .LVU693
3125:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 }
 1793              		.loc 1 3125 25 is_stmt 0 view .LVU694
 1794 00b6 A042     		cmp	r0, r4
 1795 00b8 38BF     		it	cc
 1796 00ba 2046     		movcc	r0, r4
 1797              	.LVL228:
3125:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 }
 1798              		.loc 1 3125 25 view .LVU695
 1799 00bc DCE7     		b	.L120
 1800              	.L143:
3108:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                         /* Chk if tail char is dig.
 1801              		.loc 1 3108 25 is_stmt 1 view .LVU696
3108:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                         /* Chk if tail char is dig.
 1802              		.loc 1 3108 40 is_stmt 0 view .LVU697
ARM GAS  /tmp/ccu2ENwm.s 			page 92


 1803 00be 3778     		ldrb	r7, [r6]	@ zero_extendqisi2
 1804              	.LVL229:
3110:rtos/uC-FS/FAT/fs_fat_lfn.c ****                         space = ASCII_IS_SPACE((CPU_CHAR)name_cmp_char);
 1805              		.loc 1 3110 25 is_stmt 1 view .LVU698
3110:rtos/uC-FS/FAT/fs_fat_lfn.c ****                         space = ASCII_IS_SPACE((CPU_CHAR)name_cmp_char);
 1806              		.loc 1 3110 33 is_stmt 0 view .LVU699
 1807 00c0 A7F13005 		sub	r5, r7, #48
 1808 00c4 EDB2     		uxtb	r5, r5
3110:rtos/uC-FS/FAT/fs_fat_lfn.c ****                         space = ASCII_IS_SPACE((CPU_CHAR)name_cmp_char);
 1809              		.loc 1 3110 31 view .LVU700
 1810 00c6 092D     		cmp	r5, #9
 1811 00c8 0FD8     		bhi	.L131
 1812 00ca 0125     		movs	r5, #1
 1813              	.L124:
 1814              	.LVL230:
3111:rtos/uC-FS/FAT/fs_fat_lfn.c ****                         if (dig == DEF_NO) {
 1815              		.loc 1 3111 25 is_stmt 1 discriminator 4 view .LVU701
3111:rtos/uC-FS/FAT/fs_fat_lfn.c ****                         if (dig == DEF_NO) {
 1816              		.loc 1 3111 31 is_stmt 0 discriminator 4 view .LVU702
 1817 00cc 202F     		cmp	r7, #32
 1818 00ce 11D0     		beq	.L132
3111:rtos/uC-FS/FAT/fs_fat_lfn.c ****                         if (dig == DEF_NO) {
 1819              		.loc 1 3111 33 discriminator 2 view .LVU703
 1820 00d0 0D2F     		cmp	r7, #13
 1821 00d2 1BD0     		beq	.L133
3111:rtos/uC-FS/FAT/fs_fat_lfn.c ****                         if (dig == DEF_NO) {
 1822              		.loc 1 3111 33 discriminator 4 view .LVU704
 1823 00d4 0A2F     		cmp	r7, #10
 1824 00d6 1CD0     		beq	.L134
3111:rtos/uC-FS/FAT/fs_fat_lfn.c ****                         if (dig == DEF_NO) {
 1825              		.loc 1 3111 33 discriminator 6 view .LVU705
 1826 00d8 0C2F     		cmp	r7, #12
 1827 00da 1DD0     		beq	.L135
3111:rtos/uC-FS/FAT/fs_fat_lfn.c ****                         if (dig == DEF_NO) {
 1828              		.loc 1 3111 33 discriminator 8 view .LVU706
 1829 00dc 092F     		cmp	r7, #9
 1830 00de 1ED0     		beq	.L136
3111:rtos/uC-FS/FAT/fs_fat_lfn.c ****                         if (dig == DEF_NO) {
 1831              		.loc 1 3111 33 discriminator 10 view .LVU707
 1832 00e0 0B2F     		cmp	r7, #11
 1833 00e2 04D0     		beq	.L144
3111:rtos/uC-FS/FAT/fs_fat_lfn.c ****                         if (dig == DEF_NO) {
 1834              		.loc 1 3111 31 view .LVU708
 1835 00e4 4FF00009 		mov	r9, #0
 1836 00e8 06E0     		b	.L125
 1837              	.LVL231:
 1838              	.L131:
3110:rtos/uC-FS/FAT/fs_fat_lfn.c ****                         space = ASCII_IS_SPACE((CPU_CHAR)name_cmp_char);
 1839              		.loc 1 3110 31 view .LVU709
 1840 00ea 0025     		movs	r5, #0
 1841 00ec EEE7     		b	.L124
 1842              	.LVL232:
 1843              	.L144:
3111:rtos/uC-FS/FAT/fs_fat_lfn.c ****                         if (dig == DEF_NO) {
 1844              		.loc 1 3111 31 view .LVU710
 1845 00ee 4FF00109 		mov	r9, #1
 1846 00f2 01E0     		b	.L125
ARM GAS  /tmp/ccu2ENwm.s 			page 93


 1847              	.L132:
 1848 00f4 4FF00109 		mov	r9, #1
 1849              	.L125:
 1850              	.LVL233:
3112:rtos/uC-FS/FAT/fs_fat_lfn.c ****                             if(space == DEF_NO) {
 1851              		.loc 1 3112 25 is_stmt 1 discriminator 14 view .LVU711
3112:rtos/uC-FS/FAT/fs_fat_lfn.c ****                             if(space == DEF_NO) {
 1852              		.loc 1 3112 28 is_stmt 0 discriminator 14 view .LVU712
 1853 00f8 A5B1     		cbz	r5, .L145
3119:rtos/uC-FS/FAT/fs_fat_lfn.c ****                         max_temp   += (FS_FAT_SFN_TAIL)name_cmp_char - (FS_FAT_SFN_TAIL)ASCII_CHAR_
 1854              		.loc 1 3119 25 is_stmt 1 view .LVU713
3119:rtos/uC-FS/FAT/fs_fat_lfn.c ****                         max_temp   += (FS_FAT_SFN_TAIL)name_cmp_char - (FS_FAT_SFN_TAIL)ASCII_CHAR_
 1855              		.loc 1 3119 36 is_stmt 0 view .LVU714
 1856 00fa 04EB8404 		add	r4, r4, r4, lsl #2
 1857              	.LVL234:
3120:rtos/uC-FS/FAT/fs_fat_lfn.c ****                         cmp_len    +=  sizeof(CPU_INT08U);
 1858              		.loc 1 3120 25 is_stmt 1 view .LVU715
3120:rtos/uC-FS/FAT/fs_fat_lfn.c ****                         cmp_len    +=  sizeof(CPU_INT08U);
 1859              		.loc 1 3120 36 is_stmt 0 view .LVU716
 1860 00fe 07EB4404 		add	r4, r7, r4, lsl #1
 1861              	.LVL235:
3120:rtos/uC-FS/FAT/fs_fat_lfn.c ****                         cmp_len    +=  sizeof(CPU_INT08U);
 1862              		.loc 1 3120 36 view .LVU717
 1863 0102 303C     		subs	r4, r4, #48
 1864              	.LVL236:
3121:rtos/uC-FS/FAT/fs_fat_lfn.c ****                         p_name_cmp +=  sizeof(CPU_INT08U);
 1865              		.loc 1 3121 25 is_stmt 1 view .LVU718
3121:rtos/uC-FS/FAT/fs_fat_lfn.c ****                         p_name_cmp +=  sizeof(CPU_INT08U);
 1866              		.loc 1 3121 36 is_stmt 0 view .LVU719
 1867 0104 0132     		adds	r2, r2, #1
 1868              	.LVL237:
3121:rtos/uC-FS/FAT/fs_fat_lfn.c ****                         p_name_cmp +=  sizeof(CPU_INT08U);
 1869              		.loc 1 3121 36 view .LVU720
 1870 0106 D2B2     		uxtb	r2, r2
 1871              	.LVL238:
3122:rtos/uC-FS/FAT/fs_fat_lfn.c ****                     }
 1872              		.loc 1 3122 25 is_stmt 1 view .LVU721
3122:rtos/uC-FS/FAT/fs_fat_lfn.c ****                     }
 1873              		.loc 1 3122 36 is_stmt 0 view .LVU722
 1874 0108 0136     		adds	r6, r6, #1
 1875              	.LVL239:
3122:rtos/uC-FS/FAT/fs_fat_lfn.c ****                     }
 1876              		.loc 1 3122 36 view .LVU723
 1877 010a D2E7     		b	.L123
 1878              	.LVL240:
 1879              	.L133:
3111:rtos/uC-FS/FAT/fs_fat_lfn.c ****                         if (dig == DEF_NO) {
 1880              		.loc 1 3111 31 view .LVU724
 1881 010c 4FF00109 		mov	r9, #1
 1882 0110 F2E7     		b	.L125
 1883              	.L134:
 1884 0112 4FF00109 		mov	r9, #1
 1885 0116 EFE7     		b	.L125
 1886              	.L135:
 1887 0118 4FF00109 		mov	r9, #1
 1888 011c ECE7     		b	.L125
 1889              	.L136:
ARM GAS  /tmp/ccu2ENwm.s 			page 94


 1890 011e 4FF00109 		mov	r9, #1
 1891 0122 E9E7     		b	.L125
 1892              	.LVL241:
 1893              	.L145:
3113:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                 max_temp = 0u;                          /* Invalid tail found.     
 1894              		.loc 1 3113 29 is_stmt 1 view .LVU725
3113:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                 max_temp = 0u;                          /* Invalid tail found.     
 1895              		.loc 1 3113 31 is_stmt 0 view .LVU726
 1896 0124 B9F1000F 		cmp	r9, #0
 1897 0128 C5D1     		bne	.L127
3114:rtos/uC-FS/FAT/fs_fat_lfn.c ****                             }
 1898              		.loc 1 3114 42 view .LVU727
 1899 012a 0024     		movs	r4, #0
 1900              	.LVL242:
3114:rtos/uC-FS/FAT/fs_fat_lfn.c ****                             }
 1901              		.loc 1 3114 42 view .LVU728
 1902 012c C3E7     		b	.L127
 1903              	.LVL243:
 1904              	.L141:
3134:rtos/uC-FS/FAT/fs_fat_lfn.c ****     }
3135:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
3136:rtos/uC-FS/FAT/fs_fat_lfn.c ****    *p_err = FS_ERR_SYS_DIR_ENTRY_NOT_FOUND_YET;                 /* If dir entry NOT found ... rtn N
 1905              		.loc 1 3136 4 is_stmt 1 view .LVU729
 1906              		.loc 1 3136 11 is_stmt 0 view .LVU730
 1907 012e 40F23452 		movw	r2, #1332
 1908 0132 1A80     		strh	r2, [r3]	@ movhi
3137:rtos/uC-FS/FAT/fs_fat_lfn.c ****     return (max);
 1909              		.loc 1 3137 5 is_stmt 1 view .LVU731
 1910              	.L115:
3138:rtos/uC-FS/FAT/fs_fat_lfn.c **** }
 1911              		.loc 1 3138 1 is_stmt 0 view .LVU732
 1912 0134 05B0     		add	sp, sp, #20
 1913              	.LCFI18:
 1914              		.cfi_def_cfa_offset 28
 1915              		@ sp needed
 1916 0136 BDE8F083 		pop	{r4, r5, r6, r7, r8, r9, pc}
 1917              		.loc 1 3138 1 view .LVU733
 1918              		.cfi_endproc
 1919              	.LFE17:
 1921              		.section	.text.FS_FAT_LFN_SFN_DirEntryFindMax,"ax",%progbits
 1922              		.align	1
 1923              		.syntax unified
 1924              		.thumb
 1925              		.thumb_func
 1926              		.fpu fpv4-sp-d16
 1928              	FS_FAT_LFN_SFN_DirEntryFindMax:
 1929              	.LVL244:
 1930              	.LFB16:
2942:rtos/uC-FS/FAT/fs_fat_lfn.c ****     FS_FAT_SEC_NBR    dir_cur_sec;
 1931              		.loc 1 2942 1 is_stmt 1 view -0
 1932              		.cfi_startproc
 1933              		@ args = 4, pretend = 0, frame = 0
 1934              		@ frame_needed = 0, uses_anonymous_args = 0
2942:rtos/uC-FS/FAT/fs_fat_lfn.c ****     FS_FAT_SEC_NBR    dir_cur_sec;
 1935              		.loc 1 2942 1 is_stmt 0 view .LVU735
 1936 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 1937              	.LCFI19:
ARM GAS  /tmp/ccu2ENwm.s 			page 95


 1938              		.cfi_def_cfa_offset 36
 1939              		.cfi_offset 4, -36
 1940              		.cfi_offset 5, -32
 1941              		.cfi_offset 6, -28
 1942              		.cfi_offset 7, -24
 1943              		.cfi_offset 8, -20
 1944              		.cfi_offset 9, -16
 1945              		.cfi_offset 10, -12
 1946              		.cfi_offset 11, -8
 1947              		.cfi_offset 14, -4
 1948 0004 83B0     		sub	sp, sp, #12
 1949              	.LCFI20:
 1950              		.cfi_def_cfa_offset 48
 1951 0006 8046     		mov	r8, r0
 1952 0008 0E46     		mov	r6, r1
 1953 000a 9246     		mov	r10, r2
 1954 000c 1C46     		mov	r4, r3
 1955 000e 0C9D     		ldr	r5, [sp, #48]
2943:rtos/uC-FS/FAT/fs_fat_lfn.c ****     CPU_BOOLEAN       dir_sec_valid;
 1956              		.loc 1 2943 5 is_stmt 1 view .LVU736
2944:rtos/uC-FS/FAT/fs_fat_lfn.c ****     FS_FAT_SFN_TAIL   max;
 1957              		.loc 1 2944 5 view .LVU737
2945:rtos/uC-FS/FAT/fs_fat_lfn.c ****     FS_FAT_SFN_TAIL   max_temp;
 1958              		.loc 1 2945 5 view .LVU738
2946:rtos/uC-FS/FAT/fs_fat_lfn.c ****     FS_FAT_DATA      *p_fat_data;
 1959              		.loc 1 2946 5 view .LVU739
2947:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 1960              		.loc 1 2947 5 view .LVU740
2950:rtos/uC-FS/FAT/fs_fat_lfn.c ****     dir_cur_sec   =  dir_start_sec;
 1961              		.loc 1 2950 5 view .LVU741
2950:rtos/uC-FS/FAT/fs_fat_lfn.c ****     dir_cur_sec   =  dir_start_sec;
 1962              		.loc 1 2950 19 is_stmt 0 view .LVU742
 1963 0010 D0F83490 		ldr	r9, [r0, #52]
 1964              	.LVL245:
2951:rtos/uC-FS/FAT/fs_fat_lfn.c ****     dir_sec_valid =  FS_FAT_IS_VALID_SEC(p_fat_data, dir_cur_sec);
 1965              		.loc 1 2951 5 is_stmt 1 view .LVU743
2952:rtos/uC-FS/FAT/fs_fat_lfn.c ****     max           =  0u;
 1966              		.loc 1 2952 5 view .LVU744
2952:rtos/uC-FS/FAT/fs_fat_lfn.c ****     max           =  0u;
 1967              		.loc 1 2952 22 is_stmt 0 view .LVU745
 1968 0014 D9F82830 		ldr	r3, [r9, #40]
 1969              	.LVL246:
2952:rtos/uC-FS/FAT/fs_fat_lfn.c ****     max           =  0u;
 1970              		.loc 1 2952 19 view .LVU746
 1971 0018 A342     		cmp	r3, r4
 1972 001a 1CD8     		bhi	.L153
2952:rtos/uC-FS/FAT/fs_fat_lfn.c ****     max           =  0u;
 1973              		.loc 1 2952 22 discriminator 1 view .LVU747
 1974 001c D9F80820 		ldr	r2, [r9, #8]
 1975              	.LVL247:
2952:rtos/uC-FS/FAT/fs_fat_lfn.c ****     max           =  0u;
 1976              		.loc 1 2952 22 discriminator 1 view .LVU748
 1977 0020 1344     		add	r3, r3, r2
 1978 0022 D9F81020 		ldr	r2, [r9, #16]
 1979 0026 1344     		add	r3, r3, r2
 1980 0028 A342     		cmp	r3, r4
 1981 002a 49D2     		bcs	.L154
ARM GAS  /tmp/ccu2ENwm.s 			page 96


2952:rtos/uC-FS/FAT/fs_fat_lfn.c ****     max           =  0u;
 1982              		.loc 1 2952 19 view .LVU749
 1983 002c 4FF0000B 		mov	fp, #0
 1984 0030 13E0     		b	.L147
 1985              	.LVL248:
 1986              	.L161:
2985:rtos/uC-FS/FAT/fs_fat_lfn.c ****                           break;
 1987              		.loc 1 2985 27 is_stmt 1 view .LVU750
2985:rtos/uC-FS/FAT/fs_fat_lfn.c ****                           break;
 1988              		.loc 1 2985 43 is_stmt 0 view .LVU751
 1989 0032 D9F82830 		ldr	r3, [r9, #40]
2985:rtos/uC-FS/FAT/fs_fat_lfn.c ****                           break;
 1990              		.loc 1 2985 41 view .LVU752
 1991 0036 8342     		cmp	r3, r0
 1992 0038 45D8     		bhi	.L158
2985:rtos/uC-FS/FAT/fs_fat_lfn.c ****                           break;
 1993              		.loc 1 2985 43 discriminator 1 view .LVU753
 1994 003a D9F80820 		ldr	r2, [r9, #8]
 1995 003e 1344     		add	r3, r3, r2
 1996 0040 D9F81020 		ldr	r2, [r9, #16]
 1997 0044 1344     		add	r3, r3, r2
 1998 0046 8342     		cmp	r3, r0
 1999 0048 08D2     		bcs	.L151
2985:rtos/uC-FS/FAT/fs_fat_lfn.c ****                           break;
 2000              		.loc 1 2985 41 view .LVU754
 2001 004a 4FF0000B 		mov	fp, #0
 2002              	.LVL249:
2985:rtos/uC-FS/FAT/fs_fat_lfn.c ****                           break;
 2003              		.loc 1 2985 41 view .LVU755
 2004 004e 05E0     		b	.L151
 2005              	.LVL250:
 2006              	.L149:
2991:rtos/uC-FS/FAT/fs_fat_lfn.c ****                           return (max);
 2007              		.loc 1 2991 26 is_stmt 1 view .LVU756
2991:rtos/uC-FS/FAT/fs_fat_lfn.c ****                           return (max);
 2008              		.loc 1 2991 33 is_stmt 0 view .LVU757
 2009 0050 0023     		movs	r3, #0
 2010 0052 2B80     		strh	r3, [r5]	@ movhi
2992:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 2011              		.loc 1 2992 27 is_stmt 1 view .LVU758
2992:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 2012              		.loc 1 2992 34 is_stmt 0 view .LVU759
 2013 0054 42E0     		b	.L146
 2014              	.LVL251:
 2015              	.L153:
2952:rtos/uC-FS/FAT/fs_fat_lfn.c ****     max           =  0u;
 2016              		.loc 1 2952 19 view .LVU760
 2017 0056 4FF0000B 		mov	fp, #0
 2018              	.LVL252:
 2019              	.L147:
2985:rtos/uC-FS/FAT/fs_fat_lfn.c ****                           break;
 2020              		.loc 1 2985 41 view .LVU761
 2021 005a 0027     		movs	r7, #0
 2022              	.LVL253:
 2023              	.L151:
2955:rtos/uC-FS/FAT/fs_fat_lfn.c ****         FSBuf_Set(p_buf,
 2024              		.loc 1 2955 11 is_stmt 1 view .LVU762
ARM GAS  /tmp/ccu2ENwm.s 			page 97


 2025 005c BBF1000F 		cmp	fp, #0
 2026 0060 34D0     		beq	.L160
2956:rtos/uC-FS/FAT/fs_fat_lfn.c ****                   dir_cur_sec,
 2027              		.loc 1 2956 9 view .LVU763
 2028 0062 0095     		str	r5, [sp]
 2029 0064 0123     		movs	r3, #1
 2030 0066 0222     		movs	r2, #2
 2031 0068 2146     		mov	r1, r4
 2032 006a 3046     		mov	r0, r6
 2033 006c FFF7FEFF 		bl	FSBuf_Set
 2034              	.LVL254:
2961:rtos/uC-FS/FAT/fs_fat_lfn.c ****             return (0u);
 2035              		.loc 1 2961 9 view .LVU764
2961:rtos/uC-FS/FAT/fs_fat_lfn.c ****             return (0u);
 2036              		.loc 1 2961 13 is_stmt 0 view .LVU765
 2037 0070 2B88     		ldrh	r3, [r5]
2961:rtos/uC-FS/FAT/fs_fat_lfn.c ****             return (0u);
 2038              		.loc 1 2961 12 view .LVU766
 2039 0072 83BB     		cbnz	r3, .L155
2965:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                        p_fat_data->SecSize,
 2040              		.loc 1 2965 9 is_stmt 1 view .LVU767
2965:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                        p_fat_data->SecSize,
 2041              		.loc 1 2965 20 is_stmt 0 view .LVU768
 2042 0074 2B46     		mov	r3, r5
 2043 0076 5246     		mov	r2, r10
 2044 0078 D9F83410 		ldr	r1, [r9, #52]
 2045 007c 3069     		ldr	r0, [r6, #16]
 2046 007e FFF7FEFF 		bl	FS_FAT_LFN_SFN_DirEntryFindMaxInSec
 2047              	.LVL255:
2970:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 2048              		.loc 1 2970 9 is_stmt 1 view .LVU769
2970:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 2049              		.loc 1 2970 18 is_stmt 0 view .LVU770
 2050 0082 8742     		cmp	r7, r0
 2051 0084 38BF     		it	cc
 2052 0086 0746     		movcc	r7, r0
 2053              	.LVL256:
2972:rtos/uC-FS/FAT/fs_fat_lfn.c ****             case FS_ERR_SYS_DIR_ENTRY_NOT_FOUND:                /* No entry with matching name exis
 2054              		.loc 1 2972 9 is_stmt 1 view .LVU771
2972:rtos/uC-FS/FAT/fs_fat_lfn.c ****             case FS_ERR_SYS_DIR_ENTRY_NOT_FOUND:                /* No entry with matching name exis
 2055              		.loc 1 2972 17 is_stmt 0 view .LVU772
 2056 0088 2B88     		ldrh	r3, [r5]
2972:rtos/uC-FS/FAT/fs_fat_lfn.c ****             case FS_ERR_SYS_DIR_ENTRY_NOT_FOUND:                /* No entry with matching name exis
 2057              		.loc 1 2972 9 view .LVU773
 2058 008a 40F23352 		movw	r2, #1331
 2059 008e 9342     		cmp	r3, r2
 2060 0090 24D0     		beq	.L146
 2061 0092 40F23452 		movw	r2, #1332
 2062 0096 9342     		cmp	r3, r2
 2063 0098 1FD1     		bne	.L156
2977:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                  p_buf,
 2064              		.loc 1 2977 18 is_stmt 1 view .LVU774
2977:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                  p_buf,
 2065              		.loc 1 2977 32 is_stmt 0 view .LVU775
 2066 009a 2B46     		mov	r3, r5
 2067 009c 2246     		mov	r2, r4
 2068 009e 3146     		mov	r1, r6
ARM GAS  /tmp/ccu2ENwm.s 			page 98


 2069 00a0 4046     		mov	r0, r8
 2070              	.LVL257:
2977:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                  p_buf,
 2071              		.loc 1 2977 32 view .LVU776
 2072 00a2 FFF7FEFF 		bl	FS_FAT_SecNextGet
 2073              	.LVL258:
 2074 00a6 0446     		mov	r4, r0
 2075              	.LVL259:
2982:rtos/uC-FS/FAT/fs_fat_lfn.c ****                      case FS_ERR_NONE:                          /* More secs exist in dir.         
 2076              		.loc 1 2982 18 is_stmt 1 view .LVU777
2982:rtos/uC-FS/FAT/fs_fat_lfn.c ****                      case FS_ERR_NONE:                          /* More secs exist in dir.         
 2077              		.loc 1 2982 26 is_stmt 0 view .LVU778
 2078 00a8 2B88     		ldrh	r3, [r5]
 2079 00aa 40F23652 		movw	r2, #1334
 2080 00ae 9342     		cmp	r3, r2
 2081 00b0 CED0     		beq	.L149
 2082 00b2 B3F5A76F 		cmp	r3, #1336
 2083 00b6 CBD0     		beq	.L149
 2084 00b8 002B     		cmp	r3, #0
 2085 00ba BAD0     		beq	.L161
 2086 00bc 0027     		movs	r7, #0
 2087              	.LVL260:
2982:rtos/uC-FS/FAT/fs_fat_lfn.c ****                      case FS_ERR_NONE:                          /* More secs exist in dir.         
 2088              		.loc 1 2982 26 view .LVU779
 2089 00be 0DE0     		b	.L146
 2090              	.LVL261:
 2091              	.L154:
2952:rtos/uC-FS/FAT/fs_fat_lfn.c ****     max           =  0u;
 2092              		.loc 1 2952 19 view .LVU780
 2093 00c0 4FF0010B 		mov	fp, #1
 2094 00c4 C9E7     		b	.L147
 2095              	.LVL262:
 2096              	.L158:
2985:rtos/uC-FS/FAT/fs_fat_lfn.c ****                           break;
 2097              		.loc 1 2985 41 view .LVU781
 2098 00c6 4FF0000B 		mov	fp, #0
 2099              	.LVL263:
2985:rtos/uC-FS/FAT/fs_fat_lfn.c ****                           break;
 2100              		.loc 1 2985 41 view .LVU782
 2101 00ca C7E7     		b	.L151
 2102              	.LVL264:
 2103              	.L160:
3012:rtos/uC-FS/FAT/fs_fat_lfn.c ****    *p_err = FS_ERR_ENTRY_CORRUPT;
 2104              		.loc 1 3012 97 is_stmt 1 view .LVU783
3013:rtos/uC-FS/FAT/fs_fat_lfn.c ****     return (0u);
 2105              		.loc 1 3013 4 view .LVU784
3013:rtos/uC-FS/FAT/fs_fat_lfn.c ****     return (0u);
 2106              		.loc 1 3013 11 is_stmt 0 view .LVU785
 2107 00cc 40F2BF23 		movw	r3, #703
 2108 00d0 2B80     		strh	r3, [r5]	@ movhi
3014:rtos/uC-FS/FAT/fs_fat_lfn.c **** }
 2109              		.loc 1 3014 5 is_stmt 1 view .LVU786
3014:rtos/uC-FS/FAT/fs_fat_lfn.c **** }
 2110              		.loc 1 3014 12 is_stmt 0 view .LVU787
 2111 00d2 0027     		movs	r7, #0
 2112              	.LVL265:
3014:rtos/uC-FS/FAT/fs_fat_lfn.c **** }
ARM GAS  /tmp/ccu2ENwm.s 			page 99


 2113              		.loc 1 3014 12 view .LVU788
 2114 00d4 02E0     		b	.L146
 2115              	.LVL266:
 2116              	.L155:
2962:rtos/uC-FS/FAT/fs_fat_lfn.c ****         }
 2117              		.loc 1 2962 20 view .LVU789
 2118 00d6 0027     		movs	r7, #0
 2119              	.LVL267:
2962:rtos/uC-FS/FAT/fs_fat_lfn.c ****         }
 2120              		.loc 1 2962 20 view .LVU790
 2121 00d8 00E0     		b	.L146
 2122              	.LVL268:
 2123              	.L156:
2972:rtos/uC-FS/FAT/fs_fat_lfn.c ****             case FS_ERR_SYS_DIR_ENTRY_NOT_FOUND:                /* No entry with matching name exis
 2124              		.loc 1 2972 9 view .LVU791
 2125 00da 0027     		movs	r7, #0
 2126              	.LVL269:
 2127              	.L146:
3015:rtos/uC-FS/FAT/fs_fat_lfn.c **** #endif
 2128              		.loc 1 3015 1 view .LVU792
 2129 00dc 3846     		mov	r0, r7
 2130 00de 03B0     		add	sp, sp, #12
 2131              	.LCFI21:
 2132              		.cfi_def_cfa_offset 36
 2133              		@ sp needed
 2134 00e0 BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
3015:rtos/uC-FS/FAT/fs_fat_lfn.c **** #endif
 2135              		.loc 1 3015 1 view .LVU793
 2136              		.cfi_endproc
 2137              	.LFE16:
 2139              		.section	.text.FS_FAT_LFN_NextDirEntryGet,"ax",%progbits
 2140              		.align	1
 2141              		.syntax unified
 2142              		.thumb
 2143              		.thumb_func
 2144              		.fpu fpv4-sp-d16
 2146              	FS_FAT_LFN_NextDirEntryGet:
 2147              	.LVL270:
 2148              	.LFB4:
1296:rtos/uC-FS/FAT/fs_fat_lfn.c ****     CPU_INT08U         attrib;
 2149              		.loc 1 1296 1 is_stmt 1 view -0
 2150              		.cfi_startproc
 2151              		@ args = 8, pretend = 0, frame = 24
 2152              		@ frame_needed = 0, uses_anonymous_args = 0
1296:rtos/uC-FS/FAT/fs_fat_lfn.c ****     CPU_INT08U         attrib;
 2153              		.loc 1 1296 1 is_stmt 0 view .LVU795
 2154 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 2155              	.LCFI22:
 2156              		.cfi_def_cfa_offset 36
 2157              		.cfi_offset 4, -36
 2158              		.cfi_offset 5, -32
 2159              		.cfi_offset 6, -28
 2160              		.cfi_offset 7, -24
 2161              		.cfi_offset 8, -20
 2162              		.cfi_offset 9, -16
 2163              		.cfi_offset 10, -12
 2164              		.cfi_offset 11, -8
ARM GAS  /tmp/ccu2ENwm.s 			page 100


 2165              		.cfi_offset 14, -4
 2166 0004 89B0     		sub	sp, sp, #36
 2167              	.LCFI23:
 2168              		.cfi_def_cfa_offset 72
 2169 0006 0F46     		mov	r7, r1
 2170 0008 0392     		str	r2, [sp, #12]
 2171 000a 1D46     		mov	r5, r3
1297:rtos/uC-FS/FAT/fs_fat_lfn.c ****     CPU_INT08U         chksum;
 2172              		.loc 1 1297 5 is_stmt 1 view .LVU796
1298:rtos/uC-FS/FAT/fs_fat_lfn.c ****     CPU_INT08U         chksum_calc;
 2173              		.loc 1 1298 5 view .LVU797
1299:rtos/uC-FS/FAT/fs_fat_lfn.c ****     FS_FLAGS           chksum_correctly_set;
 2174              		.loc 1 1299 5 view .LVU798
1300:rtos/uC-FS/FAT/fs_fat_lfn.c ****     FS_FAT_DIR_POS     dir_cur_pos;
 2175              		.loc 1 1300 5 view .LVU799
1301:rtos/uC-FS/FAT/fs_fat_lfn.c ****     FS_FAT_SEC_NBR     dir_next_sec;
 2176              		.loc 1 1301 5 view .LVU800
1302:rtos/uC-FS/FAT/fs_fat_lfn.c ****     CPU_BOOLEAN        dir_sec_valid;
 2177              		.loc 1 1302 5 view .LVU801
1303:rtos/uC-FS/FAT/fs_fat_lfn.c ****     CPU_BOOLEAN        ext_lower_case;
 2178              		.loc 1 1303 5 view .LVU802
1304:rtos/uC-FS/FAT/fs_fat_lfn.c ****     CPU_BOOLEAN        has_lfn;
 2179              		.loc 1 1304 5 view .LVU803
1305:rtos/uC-FS/FAT/fs_fat_lfn.c ****     CPU_BOOLEAN        lfn_seq_nbr_invalid;
 2180              		.loc 1 1305 5 view .LVU804
1306:rtos/uC-FS/FAT/fs_fat_lfn.c ****     CPU_INT08U         lfn_entry_cnt;
 2181              		.loc 1 1306 5 view .LVU805
1307:rtos/uC-FS/FAT/fs_fat_lfn.c ****     CPU_BOOLEAN        lfn_entry_first;
 2182              		.loc 1 1307 5 view .LVU806
1308:rtos/uC-FS/FAT/fs_fat_lfn.c ****     CPU_INT08U         lfn_seq_nbr;
 2183              		.loc 1 1308 5 view .LVU807
1309:rtos/uC-FS/FAT/fs_fat_lfn.c ****     FS_FILE_NAME_LEN   lfn_len;
 2184              		.loc 1 1309 5 view .LVU808
1310:rtos/uC-FS/FAT/fs_fat_lfn.c ****     FS_FILE_NAME_LEN   lfn_pos;
 2185              		.loc 1 1310 5 view .LVU809
1311:rtos/uC-FS/FAT/fs_fat_lfn.c ****     CPU_BOOLEAN        long_name;
 2186              		.loc 1 1311 5 view .LVU810
1312:rtos/uC-FS/FAT/fs_fat_lfn.c ****     CPU_INT08U         name_char;
 2187              		.loc 1 1312 5 view .LVU811
1313:rtos/uC-FS/FAT/fs_fat_lfn.c ****     CPU_BOOLEAN        name_lower_case;
 2188              		.loc 1 1313 5 view .LVU812
1314:rtos/uC-FS/FAT/fs_fat_lfn.c ****     CPU_INT08U         ntres;
 2189              		.loc 1 1314 5 view .LVU813
1315:rtos/uC-FS/FAT/fs_fat_lfn.c ****     FS_FAT_LFN_CHAR   *p_name_char;
 2190              		.loc 1 1315 5 view .LVU814
1316:rtos/uC-FS/FAT/fs_fat_lfn.c ****     FS_FAT_DATA       *p_fat_data;
 2191              		.loc 1 1316 5 view .LVU815
1317:rtos/uC-FS/FAT/fs_fat_lfn.c ****     CPU_INT08U        *p_dir_entry;
 2192              		.loc 1 1317 5 view .LVU816
1318:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 2193              		.loc 1 1318 5 view .LVU817
1322:rtos/uC-FS/FAT/fs_fat_lfn.c ****     p_dir_end_pos->SecPos =  0u;
 2194              		.loc 1 1322 5 view .LVU818
1322:rtos/uC-FS/FAT/fs_fat_lfn.c ****     p_dir_end_pos->SecPos =  0u;
 2195              		.loc 1 1322 27 is_stmt 0 view .LVU819
 2196 000c 0023     		movs	r3, #0
 2197              	.LVL271:
ARM GAS  /tmp/ccu2ENwm.s 			page 101


1322:rtos/uC-FS/FAT/fs_fat_lfn.c ****     p_dir_end_pos->SecPos =  0u;
 2198              		.loc 1 1322 27 view .LVU820
 2199 000e 129A     		ldr	r2, [sp, #72]
 2200              	.LVL272:
1322:rtos/uC-FS/FAT/fs_fat_lfn.c ****     p_dir_end_pos->SecPos =  0u;
 2201              		.loc 1 1322 27 view .LVU821
 2202 0010 1360     		str	r3, [r2]
1323:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 2203              		.loc 1 1323 5 is_stmt 1 view .LVU822
1323:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 2204              		.loc 1 1323 27 is_stmt 0 view .LVU823
 2205 0012 5360     		str	r3, [r2, #4]
1325:rtos/uC-FS/FAT/fs_fat_lfn.c ****     chksum_correctly_set  =  DEF_NO;
 2206              		.loc 1 1325 5 is_stmt 1 view .LVU824
 2207              	.LVL273:
1326:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 2208              		.loc 1 1326 5 view .LVU825
1328:rtos/uC-FS/FAT/fs_fat_lfn.c ****     has_lfn               =  DEF_NO;
 2209              		.loc 1 1328 5 view .LVU826
1329:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 2210              		.loc 1 1329 5 view .LVU827
1331:rtos/uC-FS/FAT/fs_fat_lfn.c ****     p_fat_data            = (FS_FAT_DATA     *)p_vol->DataPtr;
 2211              		.loc 1 1331 5 view .LVU828
1332:rtos/uC-FS/FAT/fs_fat_lfn.c ****     p_dir_entry           = (CPU_INT08U      *)p_buf->DataPtr;
 2212              		.loc 1 1332 5 view .LVU829
1332:rtos/uC-FS/FAT/fs_fat_lfn.c ****     p_dir_entry           = (CPU_INT08U      *)p_buf->DataPtr;
 2213              		.loc 1 1332 27 is_stmt 0 view .LVU830
 2214 0014 466B     		ldr	r6, [r0, #52]
 2215              	.LVL274:
1333:rtos/uC-FS/FAT/fs_fat_lfn.c ****     p_dir_entry          +=  p_dir_start_pos->SecPos;
 2216              		.loc 1 1333 5 is_stmt 1 view .LVU831
1333:rtos/uC-FS/FAT/fs_fat_lfn.c ****     p_dir_entry          +=  p_dir_start_pos->SecPos;
 2217              		.loc 1 1333 27 is_stmt 0 view .LVU832
 2218 0016 0C69     		ldr	r4, [r1, #16]
 2219              	.LVL275:
1334:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 2220              		.loc 1 1334 5 is_stmt 1 view .LVU833
1334:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 2221              		.loc 1 1334 45 is_stmt 0 view .LVU834
 2222 0018 6B68     		ldr	r3, [r5, #4]
1334:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 2223              		.loc 1 1334 26 view .LVU835
 2224 001a 1C44     		add	r4, r4, r3
 2225              	.LVL276:
1336:rtos/uC-FS/FAT/fs_fat_lfn.c ****     dir_cur_pos.SecPos    =  p_dir_start_pos->SecPos;
 2226              		.loc 1 1336 5 is_stmt 1 view .LVU836
1336:rtos/uC-FS/FAT/fs_fat_lfn.c ****     dir_cur_pos.SecPos    =  p_dir_start_pos->SecPos;
 2227              		.loc 1 1336 45 is_stmt 0 view .LVU837
 2228 001c 2968     		ldr	r1, [r5]
 2229              	.LVL277:
1336:rtos/uC-FS/FAT/fs_fat_lfn.c ****     dir_cur_pos.SecPos    =  p_dir_start_pos->SecPos;
 2230              		.loc 1 1336 27 view .LVU838
 2231 001e 0691     		str	r1, [sp, #24]
1337:rtos/uC-FS/FAT/fs_fat_lfn.c ****     dir_sec_valid         =  FS_FAT_IS_VALID_SEC(p_fat_data, dir_cur_pos.SecNbr);
 2232              		.loc 1 1337 5 is_stmt 1 view .LVU839
1337:rtos/uC-FS/FAT/fs_fat_lfn.c ****     dir_sec_valid         =  FS_FAT_IS_VALID_SEC(p_fat_data, dir_cur_pos.SecNbr);
 2233              		.loc 1 1337 27 is_stmt 0 view .LVU840
ARM GAS  /tmp/ccu2ENwm.s 			page 102


 2234 0020 0793     		str	r3, [sp, #28]
1338:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 2235              		.loc 1 1338 5 is_stmt 1 view .LVU841
1338:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 2236              		.loc 1 1338 30 is_stmt 0 view .LVU842
 2237 0022 B36A     		ldr	r3, [r6, #40]
1338:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 2238              		.loc 1 1338 27 view .LVU843
 2239 0024 9942     		cmp	r1, r3
 2240 0026 06D3     		bcc	.L163
 2241 0028 8346     		mov	fp, r0
1338:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 2242              		.loc 1 1338 30 discriminator 1 view .LVU844
 2243 002a B268     		ldr	r2, [r6, #8]
 2244 002c 1344     		add	r3, r3, r2
 2245 002e 3269     		ldr	r2, [r6, #16]
 2246 0030 1344     		add	r3, r3, r2
 2247 0032 9942     		cmp	r1, r3
 2248 0034 06D9     		bls	.L193
 2249              	.L163:
 2250              	.LVL278:
1340:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                 /* Invalid sec found (see Note #3).
 2251              		.loc 1 1340 5 is_stmt 1 view .LVU845
1342:rtos/uC-FS/FAT/fs_fat_lfn.c ****        *p_err = FS_ERR_ENTRY_CORRUPT;
 2252              		.loc 1 1342 104 view .LVU846
1343:rtos/uC-FS/FAT/fs_fat_lfn.c ****         return;
 2253              		.loc 1 1343 8 view .LVU847
1343:rtos/uC-FS/FAT/fs_fat_lfn.c ****         return;
 2254              		.loc 1 1343 15 is_stmt 0 view .LVU848
 2255 0036 40F2BF23 		movw	r3, #703
 2256 003a 139A     		ldr	r2, [sp, #76]
 2257 003c 1380     		strh	r3, [r2]	@ movhi
1344:rtos/uC-FS/FAT/fs_fat_lfn.c ****     }
 2258              		.loc 1 1344 9 is_stmt 1 view .LVU849
 2259              	.LVL279:
 2260              	.L162:
1580:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 2261              		.loc 1 1580 1 is_stmt 0 view .LVU850
 2262 003e 09B0     		add	sp, sp, #36
 2263              	.LCFI24:
 2264              		.cfi_remember_state
 2265              		.cfi_def_cfa_offset 36
 2266              		@ sp needed
 2267 0040 BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 2268              	.LVL280:
 2269              	.L193:
 2270              	.LCFI25:
 2271              		.cfi_restore_state
1340:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                 /* Invalid sec found (see Note #3).
 2272              		.loc 1 1340 5 is_stmt 1 view .LVU851
1347:rtos/uC-FS/FAT/fs_fat_lfn.c ****               dir_cur_pos.SecNbr,
 2273              		.loc 1 1347 5 view .LVU852
 2274 0044 139B     		ldr	r3, [sp, #76]
 2275 0046 0093     		str	r3, [sp]
 2276 0048 0123     		movs	r3, #1
 2277 004a 0222     		movs	r2, #2
 2278 004c 3846     		mov	r0, r7
ARM GAS  /tmp/ccu2ENwm.s 			page 103


 2279              	.LVL281:
1347:rtos/uC-FS/FAT/fs_fat_lfn.c ****               dir_cur_pos.SecNbr,
 2280              		.loc 1 1347 5 is_stmt 0 view .LVU853
 2281 004e FFF7FEFF 		bl	FSBuf_Set
 2282              	.LVL282:
1352:rtos/uC-FS/FAT/fs_fat_lfn.c ****          return;
 2283              		.loc 1 1352 5 is_stmt 1 view .LVU854
1352:rtos/uC-FS/FAT/fs_fat_lfn.c ****          return;
 2284              		.loc 1 1352 9 is_stmt 0 view .LVU855
 2285 0052 139B     		ldr	r3, [sp, #76]
 2286 0054 1B88     		ldrh	r3, [r3]
1352:rtos/uC-FS/FAT/fs_fat_lfn.c ****          return;
 2287              		.loc 1 1352 8 view .LVU856
 2288 0056 002B     		cmp	r3, #0
 2289 0058 F1D1     		bne	.L162
1328:rtos/uC-FS/FAT/fs_fat_lfn.c ****     has_lfn               =  DEF_NO;
 2290              		.loc 1 1328 27 view .LVU857
 2291 005a 4FF0000A 		mov	r10, #0
1329:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 2292              		.loc 1 1329 27 view .LVU858
 2293 005e CDF808A0 		str	r10, [sp, #8]
1326:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 2294              		.loc 1 1326 27 view .LVU859
 2295 0062 CDF814A0 		str	r10, [sp, #20]
1325:rtos/uC-FS/FAT/fs_fat_lfn.c ****     chksum_correctly_set  =  DEF_NO;
 2296              		.loc 1 1325 27 view .LVU860
 2297 0066 CDF810A0 		str	r10, [sp, #16]
 2298 006a A946     		mov	r9, r5
 2299 006c E2E0     		b	.L165
 2300              	.LVL283:
 2301              	.L196:
1360:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                              p_buf,
 2302              		.loc 1 1360 13 is_stmt 1 view .LVU861
1360:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                              p_buf,
 2303              		.loc 1 1360 28 is_stmt 0 view .LVU862
 2304 006e 069C     		ldr	r4, [sp, #24]
 2305              	.LVL284:
1360:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                              p_buf,
 2306              		.loc 1 1360 28 view .LVU863
 2307 0070 139B     		ldr	r3, [sp, #76]
 2308 0072 2246     		mov	r2, r4
 2309 0074 3946     		mov	r1, r7
 2310 0076 5846     		mov	r0, fp
 2311 0078 FFF7FEFF 		bl	FS_FAT_SecNextGet
 2312              	.LVL285:
1365:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 case FS_ERR_NONE:
 2313              		.loc 1 1365 13 is_stmt 1 view .LVU864
1365:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 case FS_ERR_NONE:
 2314              		.loc 1 1365 21 is_stmt 0 view .LVU865
 2315 007c 139B     		ldr	r3, [sp, #76]
 2316 007e 1B88     		ldrh	r3, [r3]
1365:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 case FS_ERR_NONE:
 2317              		.loc 1 1365 13 view .LVU866
 2318 0080 B3F5FB7F 		cmp	r3, #502
 2319 0084 1DD0     		beq	.L191
 2320 0086 0CD8     		bhi	.L168
 2321 0088 002B     		cmp	r3, #0
ARM GAS  /tmp/ccu2ENwm.s 			page 104


 2322 008a D8D1     		bne	.L162
1367:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 2323              		.loc 1 1367 22 is_stmt 1 view .LVU867
1383:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 2324              		.loc 1 1383 13 view .LVU868
1383:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 2325              		.loc 1 1383 34 is_stmt 0 view .LVU869
 2326 008c B36A     		ldr	r3, [r6, #40]
1383:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 2327              		.loc 1 1383 32 view .LVU870
 2328 008e 8342     		cmp	r3, r0
 2329 0090 19D8     		bhi	.L183
1383:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 2330              		.loc 1 1383 34 discriminator 1 view .LVU871
 2331 0092 B268     		ldr	r2, [r6, #8]
 2332 0094 1344     		add	r3, r3, r2
 2333 0096 3269     		ldr	r2, [r6, #16]
 2334 0098 1344     		add	r3, r3, r2
 2335 009a 8342     		cmp	r3, r0
 2336 009c 27D2     		bcs	.L184
1383:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 2337              		.loc 1 1383 32 view .LVU872
 2338 009e 0022     		movs	r2, #0
 2339 00a0 12E0     		b	.L170
 2340              	.L168:
1383:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 2341              		.loc 1 1383 32 view .LVU873
 2342 00a2 A846     		mov	r8, r5
1365:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 case FS_ERR_NONE:
 2343              		.loc 1 1365 13 view .LVU874
 2344 00a4 40F23652 		movw	r2, #1334
 2345 00a8 9342     		cmp	r3, r2
 2346 00aa 02D0     		beq	.L167
 2347 00ac B3F5A76F 		cmp	r3, #1336
 2348 00b0 C5D1     		bne	.L162
 2349              	.L167:
1372:rtos/uC-FS/FAT/fs_fat_lfn.c ****                      p_dir_end_pos->SecPos = dir_cur_pos.SecPos;
 2350              		.loc 1 1372 22 is_stmt 1 view .LVU875
1372:rtos/uC-FS/FAT/fs_fat_lfn.c ****                      p_dir_end_pos->SecPos = dir_cur_pos.SecPos;
 2351              		.loc 1 1372 44 is_stmt 0 view .LVU876
 2352 00b2 129B     		ldr	r3, [sp, #72]
 2353 00b4 1C60     		str	r4, [r3]
1373:rtos/uC-FS/FAT/fs_fat_lfn.c ****                     *p_err = FS_ERR_EOF;
 2354              		.loc 1 1373 22 is_stmt 1 view .LVU877
1373:rtos/uC-FS/FAT/fs_fat_lfn.c ****                     *p_err = FS_ERR_EOF;
 2355              		.loc 1 1373 44 is_stmt 0 view .LVU878
 2356 00b6 C3F80480 		str	r8, [r3, #4]
1374:rtos/uC-FS/FAT/fs_fat_lfn.c ****                      return;
 2357              		.loc 1 1374 21 is_stmt 1 view .LVU879
1374:rtos/uC-FS/FAT/fs_fat_lfn.c ****                      return;
 2358              		.loc 1 1374 28 is_stmt 0 view .LVU880
 2359 00ba 1623     		movs	r3, #22
 2360 00bc 139A     		ldr	r2, [sp, #76]
 2361 00be 1380     		strh	r3, [r2]	@ movhi
1375:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 2362              		.loc 1 1375 22 is_stmt 1 view .LVU881
 2363 00c0 BDE7     		b	.L162
ARM GAS  /tmp/ccu2ENwm.s 			page 105


 2364              	.L191:
 2365 00c2 A846     		mov	r8, r5
 2366 00c4 F5E7     		b	.L167
 2367              	.L183:
1383:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 2368              		.loc 1 1383 32 is_stmt 0 view .LVU882
 2369 00c6 0022     		movs	r2, #0
 2370              	.L170:
 2371              	.LVL286:
1385:rtos/uC-FS/FAT/fs_fat_lfn.c ****             dir_cur_pos.SecPos = 0u;
 2372              		.loc 1 1385 13 is_stmt 1 discriminator 6 view .LVU883
1385:rtos/uC-FS/FAT/fs_fat_lfn.c ****             dir_cur_pos.SecPos = 0u;
 2373              		.loc 1 1385 32 is_stmt 0 discriminator 6 view .LVU884
 2374 00c8 0690     		str	r0, [sp, #24]
1386:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 2375              		.loc 1 1386 13 is_stmt 1 discriminator 6 view .LVU885
1386:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 2376              		.loc 1 1386 32 is_stmt 0 discriminator 6 view .LVU886
 2377 00ca 0023     		movs	r3, #0
 2378 00cc 0793     		str	r3, [sp, #28]
1388:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 p_dir_entry = (CPU_INT08U *)p_buf->DataPtr;
 2379              		.loc 1 1388 13 is_stmt 1 discriminator 6 view .LVU887
1388:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 p_dir_entry = (CPU_INT08U *)p_buf->DataPtr;
 2380              		.loc 1 1388 16 is_stmt 0 discriminator 6 view .LVU888
 2381 00ce 82B1     		cbz	r2, .L171
1389:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 2382              		.loc 1 1389 17 is_stmt 1 view .LVU889
1389:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 2383              		.loc 1 1389 29 is_stmt 0 view .LVU890
 2384 00d0 3C69     		ldr	r4, [r7, #16]
 2385              	.LVL287:
1391:rtos/uC-FS/FAT/fs_fat_lfn.c ****                           dir_cur_pos.SecNbr,
 2386              		.loc 1 1391 17 is_stmt 1 view .LVU891
 2387 00d2 139B     		ldr	r3, [sp, #76]
 2388 00d4 0093     		str	r3, [sp]
 2389 00d6 0123     		movs	r3, #1
 2390 00d8 0222     		movs	r2, #2
 2391              	.LVL288:
1391:rtos/uC-FS/FAT/fs_fat_lfn.c ****                           dir_cur_pos.SecNbr,
 2392              		.loc 1 1391 17 is_stmt 0 view .LVU892
 2393 00da 0146     		mov	r1, r0
 2394 00dc 3846     		mov	r0, r7
 2395              	.LVL289:
1391:rtos/uC-FS/FAT/fs_fat_lfn.c ****                           dir_cur_pos.SecNbr,
 2396              		.loc 1 1391 17 view .LVU893
 2397 00de FFF7FEFF 		bl	FSBuf_Set
 2398              	.LVL290:
1397:rtos/uC-FS/FAT/fs_fat_lfn.c ****                     return;
 2399              		.loc 1 1397 17 is_stmt 1 view .LVU894
1397:rtos/uC-FS/FAT/fs_fat_lfn.c ****                     return;
 2400              		.loc 1 1397 21 is_stmt 0 view .LVU895
 2401 00e2 139B     		ldr	r3, [sp, #76]
 2402 00e4 1B88     		ldrh	r3, [r3]
1397:rtos/uC-FS/FAT/fs_fat_lfn.c ****                     return;
 2403              		.loc 1 1397 20 view .LVU896
 2404 00e6 002B     		cmp	r3, #0
 2405 00e8 00F0A980 		beq	.L166
ARM GAS  /tmp/ccu2ENwm.s 			page 106


 2406 00ec A7E7     		b	.L162
 2407              	.LVL291:
 2408              	.L184:
1383:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 2409              		.loc 1 1383 32 view .LVU897
 2410 00ee 0122     		movs	r2, #1
 2411 00f0 EAE7     		b	.L170
 2412              	.LVL292:
 2413              	.L171:
1403:rtos/uC-FS/FAT/fs_fat_lfn.c ****                *p_err = FS_ERR_ENTRY_CORRUPT;
 2414              		.loc 1 1403 112 is_stmt 1 view .LVU898
1404:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 return;
 2415              		.loc 1 1404 16 view .LVU899
1404:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 return;
 2416              		.loc 1 1404 23 is_stmt 0 view .LVU900
 2417 00f2 40F2BF23 		movw	r3, #703
 2418 00f6 139A     		ldr	r2, [sp, #76]
 2419              	.LVL293:
1404:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 return;
 2420              		.loc 1 1404 23 view .LVU901
 2421 00f8 1380     		strh	r3, [r2]	@ movhi
1405:rtos/uC-FS/FAT/fs_fat_lfn.c ****             }
 2422              		.loc 1 1405 17 is_stmt 1 view .LVU902
 2423 00fa A0E7     		b	.L162
 2424              	.LVL294:
 2425              	.L197:
1414:rtos/uC-FS/FAT/fs_fat_lfn.c ****             p_dir_end_pos->SecPos = dir_cur_pos.SecPos;
 2426              		.loc 1 1414 13 view .LVU903
1414:rtos/uC-FS/FAT/fs_fat_lfn.c ****             p_dir_end_pos->SecPos = dir_cur_pos.SecPos;
 2427              		.loc 1 1414 48 is_stmt 0 view .LVU904
 2428 00fc 069B     		ldr	r3, [sp, #24]
 2429              	.LVL295:
1414:rtos/uC-FS/FAT/fs_fat_lfn.c ****             p_dir_end_pos->SecPos = dir_cur_pos.SecPos;
 2430              		.loc 1 1414 35 view .LVU905
 2431 00fe 129A     		ldr	r2, [sp, #72]
 2432 0100 1360     		str	r3, [r2]
 2433              	.LVL296:
1415:rtos/uC-FS/FAT/fs_fat_lfn.c ****            *p_err = FS_ERR_EOF;                                 /* Could not find another entry    
 2434              		.loc 1 1415 13 is_stmt 1 view .LVU906
1415:rtos/uC-FS/FAT/fs_fat_lfn.c ****            *p_err = FS_ERR_EOF;                                 /* Could not find another entry    
 2435              		.loc 1 1415 48 is_stmt 0 view .LVU907
 2436 0102 079B     		ldr	r3, [sp, #28]
1415:rtos/uC-FS/FAT/fs_fat_lfn.c ****            *p_err = FS_ERR_EOF;                                 /* Could not find another entry    
 2437              		.loc 1 1415 35 view .LVU908
 2438 0104 5360     		str	r3, [r2, #4]
1416:rtos/uC-FS/FAT/fs_fat_lfn.c ****             return;                                             /* ... rtn NULL ptr.               
 2439              		.loc 1 1416 12 is_stmt 1 view .LVU909
1416:rtos/uC-FS/FAT/fs_fat_lfn.c ****             return;                                             /* ... rtn NULL ptr.               
 2440              		.loc 1 1416 19 is_stmt 0 view .LVU910
 2441 0106 1623     		movs	r3, #22
 2442 0108 139A     		ldr	r2, [sp, #76]
 2443 010a 1380     		strh	r3, [r2]	@ movhi
1417:rtos/uC-FS/FAT/fs_fat_lfn.c ****         }
 2444              		.loc 1 1417 13 is_stmt 1 view .LVU911
 2445 010c 97E7     		b	.L162
 2446              	.LVL297:
 2447              	.L174:
ARM GAS  /tmp/ccu2ENwm.s 			page 107


1435:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 2448              		.loc 1 1435 13 view .LVU912
1438:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 2449              		.loc 1 1438 17 view .LVU913
1438:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 2450              		.loc 1 1438 29 is_stmt 0 view .LVU914
 2451 010e 03F03F08 		and	r8, r3, #63
 2452              	.LVL298:
1440:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 if (lfn_seq_nbr_invalid == DEF_YES) {           /* If sequence number is not valid 
 2453              		.loc 1 1440 17 is_stmt 1 view .LVU915
1440:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 if (lfn_seq_nbr_invalid == DEF_YES) {           /* If sequence number is not valid 
 2454              		.loc 1 1440 59 is_stmt 0 view .LVU916
 2455 0112 08F1FF35 		add	r5, r8, #-1
 2456 0116 EDB2     		uxtb	r5, r5
 2457              	.LVL299:
1441:rtos/uC-FS/FAT/fs_fat_lfn.c ****                     lfn_entry_cnt = 0u;
 2458              		.loc 1 1441 17 is_stmt 1 view .LVU917
1441:rtos/uC-FS/FAT/fs_fat_lfn.c ****                     lfn_entry_cnt = 0u;
 2459              		.loc 1 1441 20 is_stmt 0 view .LVU918
 2460 0118 132D     		cmp	r5, #19
 2461 011a 00F2A480 		bhi	.L186
1449:rtos/uC-FS/FAT/fs_fat_lfn.c ****                     if (lfn_entry_first == DEF_YES) {
 2462              		.loc 1 1449 21 is_stmt 1 view .LVU919
1449:rtos/uC-FS/FAT/fs_fat_lfn.c ****                     if (lfn_entry_first == DEF_YES) {
 2463              		.loc 1 1449 37 is_stmt 0 view .LVU920
 2464 011e C3F38012 		ubfx	r2, r3, #6, #1
 2465              	.LVL300:
1450:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 2466              		.loc 1 1450 21 is_stmt 1 view .LVU921
1450:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 2467              		.loc 1 1450 24 is_stmt 0 view .LVU922
 2468 0122 13F0400F 		tst	r3, #64
 2469 0126 35D0     		beq	.L176
1452:rtos/uC-FS/FAT/fs_fat_lfn.c ****                         lfn_entry_cnt        =   lfn_seq_nbr;
 2470              		.loc 1 1452 25 is_stmt 1 view .LVU923
 2471              	.LVL301:
1453:rtos/uC-FS/FAT/fs_fat_lfn.c ****                         chksum               = *(p_dir_entry + FS_FAT_LFN_OFF_CHKSUM);
 2472              		.loc 1 1453 25 view .LVU924
1454:rtos/uC-FS/FAT/fs_fat_lfn.c ****                         chksum_correctly_set =   DEF_YES;
 2473              		.loc 1 1454 25 view .LVU925
1454:rtos/uC-FS/FAT/fs_fat_lfn.c ****                         chksum_correctly_set =   DEF_YES;
 2474              		.loc 1 1454 46 is_stmt 0 view .LVU926
 2475 0128 637B     		ldrb	r3, [r4, #13]	@ zero_extendqisi2
 2476              	.LVL302:
1454:rtos/uC-FS/FAT/fs_fat_lfn.c ****                         chksum_correctly_set =   DEF_YES;
 2477              		.loc 1 1454 46 view .LVU927
 2478 012a 0493     		str	r3, [sp, #16]
 2479              	.LVL303:
1455:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 2480              		.loc 1 1455 25 is_stmt 1 view .LVU928
1458:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                 /* Start position of theses charact
 2481              		.loc 1 1458 25 view .LVU929
1458:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                 /* Start position of theses charact
 2482              		.loc 1 1458 35 is_stmt 0 view .LVU930
 2483 012c 2046     		mov	r0, r4
 2484 012e FFF7FEFF 		bl	FS_FAT_LFN_Len
 2485              	.LVL304:
ARM GAS  /tmp/ccu2ENwm.s 			page 108


1460:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 2486              		.loc 1 1460 25 is_stmt 1 view .LVU931
1460:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 2487              		.loc 1 1460 74 is_stmt 0 view .LVU932
 2488 0132 08EB4803 		add	r3, r8, r8, lsl #1
 2489 0136 08EB8308 		add	r8, r8, r3, lsl #2
 2490              	.LVL305:
1460:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 2491              		.loc 1 1460 33 view .LVU933
 2492 013a A8F10D08 		sub	r8, r8, #13
 2493 013e 1FFA88F8 		uxth	r8, r8
 2494              	.LVL306:
1463:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 2495              		.loc 1 1463 25 is_stmt 1 view .LVU934
1463:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 2496              		.loc 1 1463 37 is_stmt 0 view .LVU935
 2497 0142 0290     		str	r0, [sp, #8]
 2498 0144 00EB080A 		add	r10, r0, r8
1463:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 2499              		.loc 1 1463 28 view .LVU936
 2500 0148 BAF1FF0F 		cmp	r10, #255
 2501 014c 00F29080 		bhi	.L187
1466:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                 /* Parse LFN entry into LFN name bu
 2502              		.loc 1 1466 29 is_stmt 1 view .LVU937
1466:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                 /* Parse LFN entry into LFN name bu
 2503              		.loc 1 1466 32 is_stmt 0 view .LVU938
 2504 0150 0398     		ldr	r0, [sp, #12]
 2505              	.LVL307:
1466:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                 /* Parse LFN entry into LFN name bu
 2506              		.loc 1 1466 32 view .LVU939
 2507 0152 68B1     		cbz	r0, .L177
1469:rtos/uC-FS/FAT/fs_fat_lfn.c **** #endif
 2508              		.loc 1 1469 33 is_stmt 1 view .LVU940
 2509 0154 FF21     		movs	r1, #255
 2510 0156 FFF7FEFF 		bl	Mem_Clr
 2511              	.LVL308:
1471:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                          &p_name_char[lfn_pos],
 2512              		.loc 1 1471 33 view .LVU941
 2513 015a 029A     		ldr	r2, [sp, #8]
 2514 015c 039B     		ldr	r3, [sp, #12]
 2515 015e 03EB0801 		add	r1, r3, r8
 2516 0162 2046     		mov	r0, r4
 2517 0164 FFF7FEFF 		bl	FS_FAT_LFN_Parse
 2518              	.LVL309:
1474:rtos/uC-FS/FAT/fs_fat_lfn.c ****                             }
 2519              		.loc 1 1474 33 view .LVU942
1474:rtos/uC-FS/FAT/fs_fat_lfn.c ****                             }
 2520              		.loc 1 1474 64 is_stmt 0 view .LVU943
 2521 0168 0023     		movs	r3, #0
 2522 016a 0398     		ldr	r0, [sp, #12]
 2523 016c 00F80A30 		strb	r3, [r0, r10]
 2524              	.L177:
1476:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 2525              		.loc 1 1476 29 is_stmt 1 view .LVU944
 2526              	.LVL310:
1479:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                 has_lfn = DEF_YES;
 2527              		.loc 1 1479 29 view .LVU945
ARM GAS  /tmp/ccu2ENwm.s 			page 109


1479:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                 has_lfn = DEF_YES;
 2528              		.loc 1 1479 32 is_stmt 0 view .LVU946
 2529 0170 B8F1000F 		cmp	r8, #0
 2530 0174 0BD0     		beq	.L188
1452:rtos/uC-FS/FAT/fs_fat_lfn.c ****                         lfn_entry_cnt        =   lfn_seq_nbr;
 2531              		.loc 1 1452 46 view .LVU947
 2532 0176 0023     		movs	r3, #0
 2533 0178 0293     		str	r3, [sp, #8]
 2534              	.L178:
 2535              	.LVL311:
1482:rtos/uC-FS/FAT/fs_fat_lfn.c ****                             p_dir_start_pos->SecPos = dir_cur_pos.SecPos;
 2536              		.loc 1 1482 29 is_stmt 1 view .LVU948
1482:rtos/uC-FS/FAT/fs_fat_lfn.c ****                             p_dir_start_pos->SecPos = dir_cur_pos.SecPos;
 2537              		.loc 1 1482 66 is_stmt 0 view .LVU949
 2538 017a 069B     		ldr	r3, [sp, #24]
1482:rtos/uC-FS/FAT/fs_fat_lfn.c ****                             p_dir_start_pos->SecPos = dir_cur_pos.SecPos;
 2539              		.loc 1 1482 53 view .LVU950
 2540 017c C9F80030 		str	r3, [r9]
1483:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 2541              		.loc 1 1483 29 is_stmt 1 view .LVU951
1483:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 2542              		.loc 1 1483 66 is_stmt 0 view .LVU952
 2543 0180 079B     		ldr	r3, [sp, #28]
1483:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 2544              		.loc 1 1483 53 view .LVU953
 2545 0182 C9F80430 		str	r3, [r9, #4]
1476:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 2546              		.loc 1 1476 42 view .LVU954
 2547 0186 AA46     		mov	r10, r5
1455:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 2548              		.loc 1 1455 46 view .LVU955
 2549 0188 0123     		movs	r3, #1
 2550 018a 0593     		str	r3, [sp, #20]
 2551 018c 4EE0     		b	.L173
 2552              	.LVL312:
 2553              	.L188:
1480:rtos/uC-FS/FAT/fs_fat_lfn.c ****                             }
 2554              		.loc 1 1480 41 view .LVU956
 2555 018e 0123     		movs	r3, #1
 2556 0190 0293     		str	r3, [sp, #8]
 2557 0192 F2E7     		b	.L178
 2558              	.LVL313:
 2559              	.L176:
1495:rtos/uC-FS/FAT/fs_fat_lfn.c ****                         lfn_pos = ((FS_FILE_NAME_LEN)lfn_entry_cnt - 1u) * FS_FAT_DIRENT_LFN_NBR_CH
 2560              		.loc 1 1495 28 is_stmt 1 view .LVU957
1495:rtos/uC-FS/FAT/fs_fat_lfn.c ****                         lfn_pos = ((FS_FILE_NAME_LEN)lfn_entry_cnt - 1u) * FS_FAT_DIRENT_LFN_NBR_CH
 2561              		.loc 1 1495 31 is_stmt 0 view .LVU958
 2562 0194 C245     		cmp	r10, r8
 2563 0196 02D0     		beq	.L194
1515:rtos/uC-FS/FAT/fs_fat_lfn.c ****                         has_lfn       = DEF_NO;
 2564              		.loc 1 1515 39 view .LVU959
 2565 0198 9246     		mov	r10, r2
 2566              	.LVL314:
1516:rtos/uC-FS/FAT/fs_fat_lfn.c ****                     }
 2567              		.loc 1 1516 39 view .LVU960
 2568 019a 0292     		str	r2, [sp, #8]
 2569              	.LVL315:
ARM GAS  /tmp/ccu2ENwm.s 			page 110


1516:rtos/uC-FS/FAT/fs_fat_lfn.c ****                     }
 2570              		.loc 1 1516 39 view .LVU961
 2571 019c 46E0     		b	.L173
 2572              	.LVL316:
 2573              	.L194:
1496:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 2574              		.loc 1 1496 25 is_stmt 1 view .LVU962
1496:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 2575              		.loc 1 1496 74 is_stmt 0 view .LVU963
 2576 019e 0AEB4A05 		add	r5, r10, r10, lsl #1
 2577              	.LVL317:
1496:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 2578              		.loc 1 1496 74 view .LVU964
 2579 01a2 0AEB8505 		add	r5, r10, r5, lsl #2
 2580 01a6 ADB2     		uxth	r5, r5
1496:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 2581              		.loc 1 1496 33 view .LVU965
 2582 01a8 0D3D     		subs	r5, r5, #13
 2583 01aa ADB2     		uxth	r5, r5
 2584              	.LVL318:
1499:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                 /* Parse LFN entry into LFN name bu
 2585              		.loc 1 1499 25 is_stmt 1 view .LVU966
1499:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                 /* Parse LFN entry into LFN name bu
 2586              		.loc 1 1499 28 is_stmt 0 view .LVU967
 2587 01ac 039B     		ldr	r3, [sp, #12]
 2588              	.LVL319:
1499:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                 /* Parse LFN entry into LFN name bu
 2589              		.loc 1 1499 28 view .LVU968
 2590 01ae 1BB1     		cbz	r3, .L179
1501:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                          &p_name_char[lfn_pos]);
 2591              		.loc 1 1501 29 is_stmt 1 view .LVU969
 2592 01b0 5919     		adds	r1, r3, r5
 2593 01b2 2046     		mov	r0, r4
 2594 01b4 FFF7FEFF 		bl	FS_FAT_LFN_ParseFull
 2595              	.LVL320:
 2596              	.L179:
1504:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 2597              		.loc 1 1504 25 view .LVU970
1504:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 2598              		.loc 1 1504 38 is_stmt 0 view .LVU971
 2599 01b8 0AF1FF3A 		add	r10, r10, #-1
 2600              	.LVL321:
1504:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 2601              		.loc 1 1504 38 view .LVU972
 2602 01bc 5FFA8AFA 		uxtb	r10, r10
 2603              	.LVL322:
1507:rtos/uC-FS/FAT/fs_fat_lfn.c ****                             has_lfn = DEF_YES;
 2604              		.loc 1 1507 25 is_stmt 1 view .LVU973
1507:rtos/uC-FS/FAT/fs_fat_lfn.c ****                             has_lfn = DEF_YES;
 2605              		.loc 1 1507 28 is_stmt 0 view .LVU974
 2606 01c0 002D     		cmp	r5, #0
 2607 01c2 33D1     		bne	.L173
1508:rtos/uC-FS/FAT/fs_fat_lfn.c ****                         }
 2608              		.loc 1 1508 37 view .LVU975
 2609 01c4 0123     		movs	r3, #1
 2610 01c6 0293     		str	r3, [sp, #8]
 2611              	.LVL323:
ARM GAS  /tmp/ccu2ENwm.s 			page 111


1508:rtos/uC-FS/FAT/fs_fat_lfn.c ****                         }
 2612              		.loc 1 1508 37 view .LVU976
 2613 01c8 30E0     		b	.L173
 2614              	.LVL324:
 2615              	.L175:
1508:rtos/uC-FS/FAT/fs_fat_lfn.c ****                         }
 2616              		.loc 1 1508 37 view .LVU977
 2617 01ca 4D46     		mov	r5, r9
1525:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 2618              		.loc 1 1525 17 is_stmt 1 view .LVU978
1525:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 2619              		.loc 1 1525 20 is_stmt 0 view .LVU979
 2620 01cc 029B     		ldr	r3, [sp, #8]
 2621              	.LVL325:
1525:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 2622              		.loc 1 1525 20 view .LVU980
 2623 01ce FBB9     		cbnz	r3, .L195
 2624              	.LVL326:
 2625              	.L180:
1536:rtos/uC-FS/FAT/fs_fat_lfn.c ****                     }
 2626              		.loc 1 1536 160 is_stmt 1 view .LVU981
1541:rtos/uC-FS/FAT/fs_fat_lfn.c ****                     p_dir_start_pos->SecNbr = dir_cur_pos.SecNbr;
 2627              		.loc 1 1541 17 view .LVU982
1541:rtos/uC-FS/FAT/fs_fat_lfn.c ****                     p_dir_start_pos->SecNbr = dir_cur_pos.SecNbr;
 2628              		.loc 1 1541 20 is_stmt 0 view .LVU983
 2629 01d0 029B     		ldr	r3, [sp, #8]
 2630 01d2 A3B9     		cbnz	r3, .L182
 2631              	.L181:
 2632              	.LVL327:
1542:rtos/uC-FS/FAT/fs_fat_lfn.c ****                     p_dir_start_pos->SecPos = dir_cur_pos.SecPos;
 2633              		.loc 1 1542 21 is_stmt 1 view .LVU984
1542:rtos/uC-FS/FAT/fs_fat_lfn.c ****                     p_dir_start_pos->SecPos = dir_cur_pos.SecPos;
 2634              		.loc 1 1542 58 is_stmt 0 view .LVU985
 2635 01d4 069B     		ldr	r3, [sp, #24]
1542:rtos/uC-FS/FAT/fs_fat_lfn.c ****                     p_dir_start_pos->SecPos = dir_cur_pos.SecPos;
 2636              		.loc 1 1542 45 view .LVU986
 2637 01d6 2B60     		str	r3, [r5]
1543:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 2638              		.loc 1 1543 21 is_stmt 1 view .LVU987
1543:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 2639              		.loc 1 1543 58 is_stmt 0 view .LVU988
 2640 01d8 079B     		ldr	r3, [sp, #28]
1543:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 2641              		.loc 1 1543 45 view .LVU989
 2642 01da 6B60     		str	r3, [r5, #4]
1545:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                 /* Apply case (see Note #4).       
 2643              		.loc 1 1545 21 is_stmt 1 view .LVU990
1545:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                 /* Apply case (see Note #4).       
 2644              		.loc 1 1545 24 is_stmt 0 view .LVU991
 2645 01dc 039F     		ldr	r7, [sp, #12]
 2646              	.LVL328:
1545:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                 /* Apply case (see Note #4).       
 2647              		.loc 1 1545 24 view .LVU992
 2648 01de 77B1     		cbz	r7, .L182
1547:rtos/uC-FS/FAT/fs_fat_lfn.c ****                         name_lower_case = DEF_BIT_IS_SET(ntres, FS_FAT_DIRENT_NTRES_NAME_LOWER_CASE
 2649              		.loc 1 1547 25 is_stmt 1 view .LVU993
1547:rtos/uC-FS/FAT/fs_fat_lfn.c ****                         name_lower_case = DEF_BIT_IS_SET(ntres, FS_FAT_DIRENT_NTRES_NAME_LOWER_CASE
ARM GAS  /tmp/ccu2ENwm.s 			page 112


 2650              		.loc 1 1547 41 is_stmt 0 view .LVU994
 2651 01e0 237B     		ldrb	r3, [r4, #12]	@ zero_extendqisi2
 2652              	.LVL329:
1548:rtos/uC-FS/FAT/fs_fat_lfn.c ****                         ext_lower_case  = DEF_BIT_IS_SET(ntres, FS_FAT_DIRENT_NTRES_EXT_LOWER_CASE)
 2653              		.loc 1 1548 25 is_stmt 1 view .LVU995
1548:rtos/uC-FS/FAT/fs_fat_lfn.c ****                         ext_lower_case  = DEF_BIT_IS_SET(ntres, FS_FAT_DIRENT_NTRES_EXT_LOWER_CASE)
 2654              		.loc 1 1548 41 is_stmt 0 view .LVU996
 2655 01e2 C3F3C006 		ubfx	r6, r3, #3, #1
 2656              	.LVL330:
1549:rtos/uC-FS/FAT/fs_fat_lfn.c **** #if (FS_CFG_DBG_MEM_CLR_EN == DEF_ENABLED)
 2657              		.loc 1 1549 25 is_stmt 1 view .LVU997
1549:rtos/uC-FS/FAT/fs_fat_lfn.c **** #if (FS_CFG_DBG_MEM_CLR_EN == DEF_ENABLED)
 2658              		.loc 1 1549 41 is_stmt 0 view .LVU998
 2659 01e6 C3F30015 		ubfx	r5, r3, #4, #1
 2660              	.LVL331:
1551:rtos/uC-FS/FAT/fs_fat_lfn.c **** #endif
 2661              		.loc 1 1551 25 is_stmt 1 view .LVU999
 2662 01ea FF21     		movs	r1, #255
 2663 01ec 3846     		mov	r0, r7
 2664 01ee FFF7FEFF 		bl	Mem_Clr
 2665              	.LVL332:
1553:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                      p_name_char,
 2666              		.loc 1 1553 25 view .LVU1000
 2667 01f2 2B46     		mov	r3, r5
 2668 01f4 3246     		mov	r2, r6
 2669 01f6 3946     		mov	r1, r7
 2670 01f8 2046     		mov	r0, r4
 2671 01fa FFF7FEFF 		bl	FS_FAT_LFN_SFN_Parse
 2672              	.LVL333:
 2673              	.L182:
1559:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 p_dir_end_pos->SecPos = dir_cur_pos.SecPos;
 2674              		.loc 1 1559 17 view .LVU1001
1559:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 p_dir_end_pos->SecPos = dir_cur_pos.SecPos;
 2675              		.loc 1 1559 52 is_stmt 0 view .LVU1002
 2676 01fe 069B     		ldr	r3, [sp, #24]
1559:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 p_dir_end_pos->SecPos = dir_cur_pos.SecPos;
 2677              		.loc 1 1559 39 view .LVU1003
 2678 0200 129A     		ldr	r2, [sp, #72]
 2679 0202 1360     		str	r3, [r2]
1560:rtos/uC-FS/FAT/fs_fat_lfn.c ****                *p_err = FS_ERR_NONE;
 2680              		.loc 1 1560 17 is_stmt 1 view .LVU1004
1560:rtos/uC-FS/FAT/fs_fat_lfn.c ****                *p_err = FS_ERR_NONE;
 2681              		.loc 1 1560 52 is_stmt 0 view .LVU1005
 2682 0204 079B     		ldr	r3, [sp, #28]
1560:rtos/uC-FS/FAT/fs_fat_lfn.c ****                *p_err = FS_ERR_NONE;
 2683              		.loc 1 1560 39 view .LVU1006
 2684 0206 5360     		str	r3, [r2, #4]
1561:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 return;
 2685              		.loc 1 1561 16 is_stmt 1 view .LVU1007
1561:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 return;
 2686              		.loc 1 1561 23 is_stmt 0 view .LVU1008
 2687 0208 0023     		movs	r3, #0
 2688 020a 139A     		ldr	r2, [sp, #76]
 2689 020c 1380     		strh	r3, [r2]	@ movhi
1562:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                 /* If entry is not a file entry    
 2690              		.loc 1 1562 17 is_stmt 1 view .LVU1009
 2691 020e 16E7     		b	.L162
ARM GAS  /tmp/ccu2ENwm.s 			page 113


 2692              	.LVL334:
 2693              	.L195:
1527:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 2694              		.loc 1 1527 21 view .LVU1010
1527:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 2695              		.loc 1 1527 39 is_stmt 0 view .LVU1011
 2696 0210 2046     		mov	r0, r4
 2697 0212 FFF7FEFF 		bl	FS_FAT_LFN_ChkSumCalc
 2698              	.LVL335:
1529:rtos/uC-FS/FAT/fs_fat_lfn.c ****                         if (chksum_calc != chksum) {
 2699              		.loc 1 1529 21 is_stmt 1 view .LVU1012
1529:rtos/uC-FS/FAT/fs_fat_lfn.c ****                         if (chksum_calc != chksum) {
 2700              		.loc 1 1529 24 is_stmt 0 view .LVU1013
 2701 0216 059B     		ldr	r3, [sp, #20]
 2702 0218 002B     		cmp	r3, #0
 2703 021a D9D0     		beq	.L180
1530:rtos/uC-FS/FAT/fs_fat_lfn.c ****                             FS_TRACE_DBG(("FS_FAT_LFN_NextDirEntryGet(): LFN chksum mismatch for LF
 2704              		.loc 1 1530 25 is_stmt 1 view .LVU1014
1530:rtos/uC-FS/FAT/fs_fat_lfn.c ****                             FS_TRACE_DBG(("FS_FAT_LFN_NextDirEntryGet(): LFN chksum mismatch for LF
 2705              		.loc 1 1530 28 is_stmt 0 view .LVU1015
 2706 021c 049B     		ldr	r3, [sp, #16]
 2707 021e 8342     		cmp	r3, r0
 2708 0220 D8D1     		bne	.L181
 2709 0222 D5E7     		b	.L180
 2710              	.LVL336:
 2711              	.L185:
1426:rtos/uC-FS/FAT/fs_fat_lfn.c ****             has_lfn       = DEF_NO;
 2712              		.loc 1 1426 27 view .LVU1016
 2713 0224 4FF0000A 		mov	r10, #0
 2714              	.LVL337:
1427:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 2715              		.loc 1 1427 27 view .LVU1017
 2716 0228 CDF808A0 		str	r10, [sp, #8]
 2717              	.LVL338:
 2718              	.L173:
1574:rtos/uC-FS/FAT/fs_fat_lfn.c ****         p_dir_entry        += FS_FAT_SIZE_DIR_ENTRY;
 2719              		.loc 1 1574 9 is_stmt 1 view .LVU1018
1574:rtos/uC-FS/FAT/fs_fat_lfn.c ****         p_dir_entry        += FS_FAT_SIZE_DIR_ENTRY;
 2720              		.loc 1 1574 28 is_stmt 0 view .LVU1019
 2721 022c 079B     		ldr	r3, [sp, #28]
 2722 022e 2033     		adds	r3, r3, #32
 2723 0230 0793     		str	r3, [sp, #28]
1575:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 2724              		.loc 1 1575 9 is_stmt 1 view .LVU1020
1575:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 2725              		.loc 1 1575 28 is_stmt 0 view .LVU1021
 2726 0232 2034     		adds	r4, r4, #32
 2727              	.LVL339:
1356:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                 /* ------------------ RD NEXT DIR S
 2728              		.loc 1 1356 11 is_stmt 1 view .LVU1022
 2729              	.L165:
1356:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                 /* ------------------ RD NEXT DIR S
 2730              		.loc 1 1356 5 view .LVU1023
1358:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                 /* Get next sector                 
 2731              		.loc 1 1358 9 view .LVU1024
1358:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                 /* Get next sector                 
 2732              		.loc 1 1358 24 is_stmt 0 view .LVU1025
ARM GAS  /tmp/ccu2ENwm.s 			page 114


 2733 0234 079D     		ldr	r5, [sp, #28]
1358:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                 /* Get next sector                 
 2734              		.loc 1 1358 45 view .LVU1026
 2735 0236 736B     		ldr	r3, [r6, #52]
1358:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                 /* Get next sector                 
 2736              		.loc 1 1358 12 view .LVU1027
 2737 0238 9D42     		cmp	r5, r3
 2738 023a 3FF418AF 		beq	.L196
 2739              	.L166:
1412:rtos/uC-FS/FAT/fs_fat_lfn.c ****         if (name_char == FS_FAT_DIRENT_NAME_FREE) {             /* If dir entry free & all subseque
 2740              		.loc 1 1412 9 is_stmt 1 view .LVU1028
1412:rtos/uC-FS/FAT/fs_fat_lfn.c ****         if (name_char == FS_FAT_DIRENT_NAME_FREE) {             /* If dir entry free & all subseque
 2741              		.loc 1 1412 19 is_stmt 0 view .LVU1029
 2742 023e 2378     		ldrb	r3, [r4]	@ zero_extendqisi2
 2743              	.LVL340:
1413:rtos/uC-FS/FAT/fs_fat_lfn.c ****             p_dir_end_pos->SecNbr = dir_cur_pos.SecNbr;
 2744              		.loc 1 1413 9 is_stmt 1 view .LVU1030
1413:rtos/uC-FS/FAT/fs_fat_lfn.c ****             p_dir_end_pos->SecNbr = dir_cur_pos.SecNbr;
 2745              		.loc 1 1413 12 is_stmt 0 view .LVU1031
 2746 0240 002B     		cmp	r3, #0
 2747 0242 3FF45BAF 		beq	.L197
1424:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 2748              		.loc 1 1424 9 is_stmt 1 view .LVU1032
1424:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 2749              		.loc 1 1424 12 is_stmt 0 view .LVU1033
 2750 0246 E52B     		cmp	r3, #229
 2751 0248 ECD0     		beq	.L185
1431:rtos/uC-FS/FAT/fs_fat_lfn.c ****             long_name = FS_FAT_DIRENT_ATTR_IS_LONG_NAME(attrib);/* LFN attribute should always be 0
 2752              		.loc 1 1431 13 is_stmt 1 view .LVU1034
1431:rtos/uC-FS/FAT/fs_fat_lfn.c ****             long_name = FS_FAT_DIRENT_ATTR_IS_LONG_NAME(attrib);/* LFN attribute should always be 0
 2753              		.loc 1 1431 20 is_stmt 0 view .LVU1035
 2754 024a E27A     		ldrb	r2, [r4, #11]	@ zero_extendqisi2
 2755              	.LVL341:
1432:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 2756              		.loc 1 1432 13 is_stmt 1 view .LVU1036
1432:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 2757              		.loc 1 1432 23 is_stmt 0 view .LVU1037
 2758 024c 02F03F01 		and	r1, r2, #63
 2759 0250 0F29     		cmp	r1, #15
 2760 0252 3FF45CAF 		beq	.L174
 2761              	.LVL342:
1435:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 2762              		.loc 1 1435 13 is_stmt 1 view .LVU1038
1524:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 if (has_lfn == DEF_YES) {                       /* If SFN entry has matching LFN en
 2763              		.loc 1 1524 20 view .LVU1039
1524:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 if (has_lfn == DEF_YES) {                       /* If SFN entry has matching LFN en
 2764              		.loc 1 1524 23 is_stmt 0 view .LVU1040
 2765 0256 12F0080F 		tst	r2, #8
 2766 025a B6D0     		beq	.L175
1565:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 has_lfn       = DEF_NO;
 2767              		.loc 1 1565 31 view .LVU1041
 2768 025c 4FF0000A 		mov	r10, #0
 2769              	.LVL343:
1566:rtos/uC-FS/FAT/fs_fat_lfn.c ****             }
 2770              		.loc 1 1566 31 view .LVU1042
 2771 0260 CDF808A0 		str	r10, [sp, #8]
 2772              	.LVL344:
ARM GAS  /tmp/ccu2ENwm.s 			page 115


1566:rtos/uC-FS/FAT/fs_fat_lfn.c ****             }
 2773              		.loc 1 1566 31 view .LVU1043
 2774 0264 E2E7     		b	.L173
 2775              	.LVL345:
 2776              	.L186:
1442:rtos/uC-FS/FAT/fs_fat_lfn.c ****                     has_lfn       = DEF_NO;
 2777              		.loc 1 1442 35 view .LVU1044
 2778 0266 4FF0000A 		mov	r10, #0
 2779              	.LVL346:
1443:rtos/uC-FS/FAT/fs_fat_lfn.c ****                     FS_TRACE_DBG(("FS_FAT_LFN_NextDirEntryGet(): LFN entry has an invalid sequence 
 2780              		.loc 1 1443 35 view .LVU1045
 2781 026a CDF808A0 		str	r10, [sp, #8]
 2782              	.LVL347:
1443:rtos/uC-FS/FAT/fs_fat_lfn.c ****                     FS_TRACE_DBG(("FS_FAT_LFN_NextDirEntryGet(): LFN entry has an invalid sequence 
 2783              		.loc 1 1443 35 view .LVU1046
 2784 026e DDE7     		b	.L173
 2785              	.LVL348:
 2786              	.L187:
1489:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 2787              		.loc 1 1489 43 view .LVU1047
 2788 0270 4FF0000A 		mov	r10, #0
1452:rtos/uC-FS/FAT/fs_fat_lfn.c ****                         lfn_entry_cnt        =   lfn_seq_nbr;
 2789              		.loc 1 1452 46 view .LVU1048
 2790 0274 CDF808A0 		str	r10, [sp, #8]
1455:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 2791              		.loc 1 1455 46 view .LVU1049
 2792 0278 0123     		movs	r3, #1
 2793 027a 0593     		str	r3, [sp, #20]
 2794 027c D6E7     		b	.L173
 2795              		.cfi_endproc
 2796              	.LFE4:
 2798              		.section	.text.FS_FAT_LFN_StrLen_N,"ax",%progbits
 2799              		.align	1
 2800              		.syntax unified
 2801              		.thumb
 2802              		.thumb_func
 2803              		.fpu fpv4-sp-d16
 2805              	FS_FAT_LFN_StrLen_N:
 2806              	.LVL349:
 2807              	.LFB18:
3139:rtos/uC-FS/FAT/fs_fat_lfn.c **** #endif
3140:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
3141:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
3142:rtos/uC-FS/FAT/fs_fat_lfn.c **** /*
3143:rtos/uC-FS/FAT/fs_fat_lfn.c **** ***************************************************************************************************
3144:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                                        FS_FAT_LFN_StrLen_N()
3145:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
3146:rtos/uC-FS/FAT/fs_fat_lfn.c **** * Description : Calculate length of a string, up to a maximum number of characters.
3147:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
3148:rtos/uC-FS/FAT/fs_fat_lfn.c **** * Argument(s) : p_str       Pointer to string.
3149:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
3150:rtos/uC-FS/FAT/fs_fat_lfn.c **** *               len_max     Maximum number of characters to search.
3151:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
3152:rtos/uC-FS/FAT/fs_fat_lfn.c **** * Return(s)   : Length of string; number of characters in string before terminating NULL character.
3153:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
3154:rtos/uC-FS/FAT/fs_fat_lfn.c **** * Note(s)     : none.
3155:rtos/uC-FS/FAT/fs_fat_lfn.c **** ***************************************************************************************************
ARM GAS  /tmp/ccu2ENwm.s 			page 116


3156:rtos/uC-FS/FAT/fs_fat_lfn.c **** */
3157:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
3158:rtos/uC-FS/FAT/fs_fat_lfn.c **** static  FS_FILE_NAME_LEN  FS_FAT_LFN_StrLen_N (FS_FAT_LFN_CHAR   *p_str,
3159:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                FS_FILE_NAME_LEN   len_max)
3160:rtos/uC-FS/FAT/fs_fat_lfn.c **** {
 2808              		.loc 1 3160 1 is_stmt 1 view -0
 2809              		.cfi_startproc
 2810              		@ args = 0, pretend = 0, frame = 0
 2811              		@ frame_needed = 0, uses_anonymous_args = 0
 2812              		.loc 1 3160 1 is_stmt 0 view .LVU1051
 2813 0000 08B5     		push	{r3, lr}
 2814              	.LCFI26:
 2815              		.cfi_def_cfa_offset 8
 2816              		.cfi_offset 3, -8
 2817              		.cfi_offset 14, -4
3161:rtos/uC-FS/FAT/fs_fat_lfn.c **** #if (FS_CFG_UTF8_EN == DEF_ENABLED)
3162:rtos/uC-FS/FAT/fs_fat_lfn.c ****     CPU_SIZE_T  len;
3163:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
3164:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
3165:rtos/uC-FS/FAT/fs_fat_lfn.c ****     len = WC_StrLen_N(p_str, (CPU_SIZE_T)len_max);
3166:rtos/uC-FS/FAT/fs_fat_lfn.c ****     return ((FS_FILE_NAME_LEN)len);
3167:rtos/uC-FS/FAT/fs_fat_lfn.c **** #else
3168:rtos/uC-FS/FAT/fs_fat_lfn.c ****     CPU_SIZE_T  len;
 2818              		.loc 1 3168 5 is_stmt 1 view .LVU1052
3169:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
3170:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
3171:rtos/uC-FS/FAT/fs_fat_lfn.c ****     len = Str_Len_N(p_str, (CPU_SIZE_T)len_max);
 2819              		.loc 1 3171 5 view .LVU1053
 2820              		.loc 1 3171 11 is_stmt 0 view .LVU1054
 2821 0002 FFF7FEFF 		bl	Str_Len_N
 2822              	.LVL350:
3172:rtos/uC-FS/FAT/fs_fat_lfn.c ****     return ((FS_FILE_NAME_LEN)len);
 2823              		.loc 1 3172 5 is_stmt 1 view .LVU1055
3173:rtos/uC-FS/FAT/fs_fat_lfn.c **** #endif
3174:rtos/uC-FS/FAT/fs_fat_lfn.c **** }
 2824              		.loc 1 3174 1 is_stmt 0 view .LVU1056
 2825 0006 80B2     		uxth	r0, r0
 2826              	.LVL351:
 2827              		.loc 1 3174 1 view .LVU1057
 2828 0008 08BD     		pop	{r3, pc}
 2829              		.cfi_endproc
 2830              	.LFE18:
 2832              		.section	.text.FS_FAT_LFN_StrCmpIgnoreCase_N,"ax",%progbits
 2833              		.align	1
 2834              		.syntax unified
 2835              		.thumb
 2836              		.thumb_func
 2837              		.fpu fpv4-sp-d16
 2839              	FS_FAT_LFN_StrCmpIgnoreCase_N:
 2840              	.LVL352:
 2841              	.LFB19:
3175:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
3176:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
3177:rtos/uC-FS/FAT/fs_fat_lfn.c **** /*
3178:rtos/uC-FS/FAT/fs_fat_lfn.c **** ***************************************************************************************************
3179:rtos/uC-FS/FAT/fs_fat_lfn.c **** *                                   FS_FAT_LFN_StrCmpIgnoreCase_N()
3180:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
ARM GAS  /tmp/ccu2ENwm.s 			page 117


3181:rtos/uC-FS/FAT/fs_fat_lfn.c **** * Description : Determine if two strings are identical for up to a maximum number of characters, ig
3182:rtos/uC-FS/FAT/fs_fat_lfn.c **** *               case.
3183:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
3184:rtos/uC-FS/FAT/fs_fat_lfn.c **** * Argument(s) : p1_str      Pointer to first  string.
3185:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
3186:rtos/uC-FS/FAT/fs_fat_lfn.c **** *               p2_str      Pointer to second string (possibly a wide-character string).
3187:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
3188:rtos/uC-FS/FAT/fs_fat_lfn.c **** *               len_max     Maximum number of character octets from 'p1_str' to compare.
3189:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
3190:rtos/uC-FS/FAT/fs_fat_lfn.c **** * Return(s)   : 0,              if strings are identical.
3191:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
3192:rtos/uC-FS/FAT/fs_fat_lfn.c **** *               Negative value, if 'p1_str' is less    than 'p2_str'.
3193:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
3194:rtos/uC-FS/FAT/fs_fat_lfn.c **** *               Positive value, if 'p1_str' is greater than 'p2_str'.
3195:rtos/uC-FS/FAT/fs_fat_lfn.c **** *
3196:rtos/uC-FS/FAT/fs_fat_lfn.c **** * Note(s)     : none.
3197:rtos/uC-FS/FAT/fs_fat_lfn.c **** ***************************************************************************************************
3198:rtos/uC-FS/FAT/fs_fat_lfn.c **** */
3199:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
3200:rtos/uC-FS/FAT/fs_fat_lfn.c **** static  CPU_INT32S  FS_FAT_LFN_StrCmpIgnoreCase_N (CPU_CHAR          *p1_str,
3201:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                    FS_FAT_LFN_CHAR   *p2_str,
3202:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                    FS_FILE_NAME_LEN   len_max)
3203:rtos/uC-FS/FAT/fs_fat_lfn.c **** {
 2842              		.loc 1 3203 1 is_stmt 1 view -0
 2843              		.cfi_startproc
 2844              		@ args = 0, pretend = 0, frame = 0
 2845              		@ frame_needed = 0, uses_anonymous_args = 0
 2846              		.loc 1 3203 1 is_stmt 0 view .LVU1059
 2847 0000 08B5     		push	{r3, lr}
 2848              	.LCFI27:
 2849              		.cfi_def_cfa_offset 8
 2850              		.cfi_offset 3, -8
 2851              		.cfi_offset 14, -4
3204:rtos/uC-FS/FAT/fs_fat_lfn.c **** #if (FS_CFG_UTF8_EN == DEF_ENABLED)
3205:rtos/uC-FS/FAT/fs_fat_lfn.c ****     CPU_WCHAR   char1;
3206:rtos/uC-FS/FAT/fs_fat_lfn.c ****     CPU_WCHAR   char2;
3207:rtos/uC-FS/FAT/fs_fat_lfn.c ****     CPU_INT32S  cmp_val;
3208:rtos/uC-FS/FAT/fs_fat_lfn.c ****     CPU_SIZE_T  cmp_len;
3209:rtos/uC-FS/FAT/fs_fat_lfn.c ****     CPU_SIZE_T  char_len;
3210:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
3211:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
3212:rtos/uC-FS/FAT/fs_fat_lfn.c ****     cmp_len  = 0u;
3213:rtos/uC-FS/FAT/fs_fat_lfn.c ****     char_len = MB_CharToWC(&char1,
3214:rtos/uC-FS/FAT/fs_fat_lfn.c ****                             p1_str,
3215:rtos/uC-FS/FAT/fs_fat_lfn.c ****                             MB_MAX_LEN);
3216:rtos/uC-FS/FAT/fs_fat_lfn.c ****     if (char_len <= MB_MAX_LEN) {
3217:rtos/uC-FS/FAT/fs_fat_lfn.c ****         char1 = WC_CharToCasefold(char1);
3218:rtos/uC-FS/FAT/fs_fat_lfn.c ****     }
3219:rtos/uC-FS/FAT/fs_fat_lfn.c ****     char2 = *p2_str;
3220:rtos/uC-FS/FAT/fs_fat_lfn.c ****     char2 =  WC_CharToCasefold(char2);
3221:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
3222:rtos/uC-FS/FAT/fs_fat_lfn.c ****     while ((char1    ==  char2)        &&                       /* Cmp strs until non-matching char
3223:rtos/uC-FS/FAT/fs_fat_lfn.c ****            (char2    != (CPU_WCHAR )0) &&                       /* ... or NULL chars               
3224:rtos/uC-FS/FAT/fs_fat_lfn.c ****            (char_len != (CPU_SIZE_T)0) &&                       /* ... or NULL ptr(s) found        
3225:rtos/uC-FS/FAT/fs_fat_lfn.c ****            (char_len >  (CPU_SIZE_T)0) &&
3226:rtos/uC-FS/FAT/fs_fat_lfn.c ****            (cmp_len  <  (CPU_SIZE_T)len_max)) {                 /* ... or max nbr chars cmp'd.     
3227:rtos/uC-FS/FAT/fs_fat_lfn.c ****         p1_str  += char_len;
ARM GAS  /tmp/ccu2ENwm.s 			page 118


3228:rtos/uC-FS/FAT/fs_fat_lfn.c ****         p2_str++;
3229:rtos/uC-FS/FAT/fs_fat_lfn.c ****         cmp_len++;
3230:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
3231:rtos/uC-FS/FAT/fs_fat_lfn.c ****         char_len = MB_CharToWC(&char1,
3232:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                 p1_str,
3233:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                 MB_MAX_LEN);
3234:rtos/uC-FS/FAT/fs_fat_lfn.c ****         if (char_len <= MB_MAX_LEN) {
3235:rtos/uC-FS/FAT/fs_fat_lfn.c ****             char1 = WC_CharToCasefold(char1);
3236:rtos/uC-FS/FAT/fs_fat_lfn.c ****         }
3237:rtos/uC-FS/FAT/fs_fat_lfn.c ****         char2 = *p2_str;
3238:rtos/uC-FS/FAT/fs_fat_lfn.c ****         char2 =  WC_CharToCasefold(char2);
3239:rtos/uC-FS/FAT/fs_fat_lfn.c ****     }
3240:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
3241:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
3242:rtos/uC-FS/FAT/fs_fat_lfn.c ****     if (cmp_len == len_max) {                                   /* If strs identical for len nbr of
3243:rtos/uC-FS/FAT/fs_fat_lfn.c ****         return ((CPU_INT32S)0);                                 /* ... rtn 0.                      
3244:rtos/uC-FS/FAT/fs_fat_lfn.c ****     }
3245:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
3246:rtos/uC-FS/FAT/fs_fat_lfn.c ****     if ((char_len == 0u) ||                                     /* If NULL char(s) found, ...      
3247:rtos/uC-FS/FAT/fs_fat_lfn.c ****         (char_len >  MB_MAX_LEN)) {
3248:rtos/uC-FS/FAT/fs_fat_lfn.c ****         if (char2 == (CPU_WCHAR)0) {
3249:rtos/uC-FS/FAT/fs_fat_lfn.c ****             cmp_val = 0;                                        /* ... strs identical; rtn 0.      
3250:rtos/uC-FS/FAT/fs_fat_lfn.c ****         } else {
3251:rtos/uC-FS/FAT/fs_fat_lfn.c ****             cmp_val = (CPU_INT32S)0 - (CPU_INT32S)char2;
3252:rtos/uC-FS/FAT/fs_fat_lfn.c ****         }
3253:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
3254:rtos/uC-FS/FAT/fs_fat_lfn.c ****     }  else if (char1 != char2) {                               /* If strs NOT identical, ...      
3255:rtos/uC-FS/FAT/fs_fat_lfn.c ****          cmp_val = (CPU_INT32S)char1 - (CPU_INT32S)char2;       /* ... calc & rtn char diff.       
3256:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
3257:rtos/uC-FS/FAT/fs_fat_lfn.c ****     } else {                                                    /* Else ...                        
3258:rtos/uC-FS/FAT/fs_fat_lfn.c ****          cmp_val = 0;                                           /* ... strs identical; rtn 0.      
3259:rtos/uC-FS/FAT/fs_fat_lfn.c ****     }
3260:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
3261:rtos/uC-FS/FAT/fs_fat_lfn.c ****     return (cmp_val);
3262:rtos/uC-FS/FAT/fs_fat_lfn.c **** #else
3263:rtos/uC-FS/FAT/fs_fat_lfn.c ****     CPU_INT16S  cmp_val;
 2852              		.loc 1 3263 5 is_stmt 1 view .LVU1060
3264:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
3265:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
3266:rtos/uC-FS/FAT/fs_fat_lfn.c ****     cmp_val = Str_CmpIgnoreCase_N(p1_str, p2_str, (CPU_SIZE_T)len_max);
 2853              		.loc 1 3266 5 view .LVU1061
 2854              		.loc 1 3266 15 is_stmt 0 view .LVU1062
 2855 0002 FFF7FEFF 		bl	Str_CmpIgnoreCase_N
 2856              	.LVL353:
3267:rtos/uC-FS/FAT/fs_fat_lfn.c ****     return ((CPU_INT32S)cmp_val);
 2857              		.loc 1 3267 5 is_stmt 1 view .LVU1063
3268:rtos/uC-FS/FAT/fs_fat_lfn.c **** #endif
3269:rtos/uC-FS/FAT/fs_fat_lfn.c **** }
 2858              		.loc 1 3269 1 is_stmt 0 view .LVU1064
 2859 0006 08BD     		pop	{r3, pc}
 2860              		.cfi_endproc
 2861              	.LFE19:
 2863              		.section	.text.FS_FAT_LFN_DirEntryFind,"ax",%progbits
 2864              		.align	1
 2865              		.syntax unified
 2866              		.thumb
 2867              		.thumb_func
ARM GAS  /tmp/ccu2ENwm.s 			page 119


 2868              		.fpu fpv4-sp-d16
 2870              	FS_FAT_LFN_DirEntryFind:
 2871              	.LVL354:
 2872              	.LFB3:
1097:rtos/uC-FS/FAT/fs_fat_lfn.c ****     CPU_BOOLEAN        chk_sfn;
 2873              		.loc 1 1097 1 is_stmt 1 view -0
 2874              		.cfi_startproc
 2875              		@ args = 12, pretend = 0, frame = 312
 2876              		@ frame_needed = 0, uses_anonymous_args = 0
1097:rtos/uC-FS/FAT/fs_fat_lfn.c ****     CPU_BOOLEAN        chk_sfn;
 2877              		.loc 1 1097 1 is_stmt 0 view .LVU1066
 2878 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 2879              	.LCFI28:
 2880              		.cfi_def_cfa_offset 36
 2881              		.cfi_offset 4, -36
 2882              		.cfi_offset 5, -32
 2883              		.cfi_offset 6, -28
 2884              		.cfi_offset 7, -24
 2885              		.cfi_offset 8, -20
 2886              		.cfi_offset 9, -16
 2887              		.cfi_offset 10, -12
 2888              		.cfi_offset 11, -8
 2889              		.cfi_offset 14, -4
 2890 0004 D1B0     		sub	sp, sp, #324
 2891              	.LCFI29:
 2892              		.cfi_def_cfa_offset 360
 2893 0006 0646     		mov	r6, r0
 2894 0008 8B46     		mov	fp, r1
 2895 000a 1546     		mov	r5, r2
 2896 000c 1F46     		mov	r7, r3
 2897 000e DDF86CA1 		ldr	r10, [sp, #364]
 2898 0012 5C9C     		ldr	r4, [sp, #368]
1098:rtos/uC-FS/FAT/fs_fat_lfn.c ****     FS_FAT_DIR_POS     dir_cur_pos;
 2899              		.loc 1 1098 5 is_stmt 1 view .LVU1067
1099:rtos/uC-FS/FAT/fs_fat_lfn.c ****     FS_FAT_DIR_POS     dir_end_pos;
 2900              		.loc 1 1099 5 view .LVU1068
1100:rtos/uC-FS/FAT/fs_fat_lfn.c ****     CPU_BOOLEAN        dir_sec_valid;
 2901              		.loc 1 1100 5 view .LVU1069
1101:rtos/uC-FS/FAT/fs_fat_lfn.c ****     CPU_BOOLEAN        ext_lower_case;
 2902              		.loc 1 1101 5 view .LVU1070
1102:rtos/uC-FS/FAT/fs_fat_lfn.c ****     CPU_INT32U         name_8_3[3];
 2903              		.loc 1 1102 5 view .LVU1071
1103:rtos/uC-FS/FAT/fs_fat_lfn.c ****     FS_FILE_NAME_LEN   name_len;
 2904              		.loc 1 1103 5 view .LVU1072
1104:rtos/uC-FS/FAT/fs_fat_lfn.c ****     FS_FILE_NAME_LEN   name_len_octet;
 2905              		.loc 1 1104 5 view .LVU1073
1105:rtos/uC-FS/FAT/fs_fat_lfn.c ****     FS_FILE_NAME_LEN   name_len_found;
 2906              		.loc 1 1105 5 view .LVU1074
1106:rtos/uC-FS/FAT/fs_fat_lfn.c ****     FS_FAT_LFN_CHAR    name_lfn[FS_FAT_MAX_FILE_NAME_LEN + 1u];
 2907              		.loc 1 1106 5 view .LVU1075
1107:rtos/uC-FS/FAT/fs_fat_lfn.c ****     CPU_INT32S         name_lfn_cmp;
 2908              		.loc 1 1107 5 view .LVU1076
1108:rtos/uC-FS/FAT/fs_fat_lfn.c ****     CPU_BOOLEAN        name_lower_case;
 2909              		.loc 1 1108 5 view .LVU1077
1109:rtos/uC-FS/FAT/fs_fat_lfn.c ****     CPU_INT32U         name_word;
 2910              		.loc 1 1109 5 view .LVU1078
1110:rtos/uC-FS/FAT/fs_fat_lfn.c ****     CPU_INT08U        *p_dir_entry;
ARM GAS  /tmp/ccu2ENwm.s 			page 120


 2911              		.loc 1 1110 5 view .LVU1079
1111:rtos/uC-FS/FAT/fs_fat_lfn.c ****     FS_FAT_DATA       *p_fat_data;
 2912              		.loc 1 1111 5 view .LVU1080
1112:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 2913              		.loc 1 1112 5 view .LVU1081
1115:rtos/uC-FS/FAT/fs_fat_lfn.c ****     p_dir_end_pos->SecPos = 0u;
 2914              		.loc 1 1115 5 view .LVU1082
1115:rtos/uC-FS/FAT/fs_fat_lfn.c ****     p_dir_end_pos->SecPos = 0u;
 2915              		.loc 1 1115 27 is_stmt 0 view .LVU1083
 2916 0014 0023     		movs	r3, #0
 2917              	.LVL355:
1115:rtos/uC-FS/FAT/fs_fat_lfn.c ****     p_dir_end_pos->SecPos = 0u;
 2918              		.loc 1 1115 27 view .LVU1084
 2919 0016 CAF80030 		str	r3, [r10]
1116:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 2920              		.loc 1 1116 5 is_stmt 1 view .LVU1085
1116:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 2921              		.loc 1 1116 27 is_stmt 0 view .LVU1086
 2922 001a CAF80430 		str	r3, [r10, #4]
1118:rtos/uC-FS/FAT/fs_fat_lfn.c ****                   &name_len,
 2923              		.loc 1 1118 5 is_stmt 1 view .LVU1087
 2924 001e 2246     		mov	r2, r4
 2925              	.LVL356:
1118:rtos/uC-FS/FAT/fs_fat_lfn.c ****                   &name_len,
 2926              		.loc 1 1118 5 is_stmt 0 view .LVU1088
 2927 0020 0DF58F71 		add	r1, sp, #286
 2928              	.LVL357:
1118:rtos/uC-FS/FAT/fs_fat_lfn.c ****                   &name_len,
 2929              		.loc 1 1118 5 view .LVU1089
 2930 0024 2846     		mov	r0, r5
 2931              	.LVL358:
1118:rtos/uC-FS/FAT/fs_fat_lfn.c ****                   &name_len,
 2932              		.loc 1 1118 5 view .LVU1090
 2933 0026 FFF7FEFF 		bl	FS_FAT_SFN_Chk
 2934              	.LVL359:
1122:rtos/uC-FS/FAT/fs_fat_lfn.c **** #if (FS_CFG_DBG_MEM_CLR_EN == DEF_ENABLED)
 2935              		.loc 1 1122 5 is_stmt 1 view .LVU1091
1122:rtos/uC-FS/FAT/fs_fat_lfn.c **** #if (FS_CFG_DBG_MEM_CLR_EN == DEF_ENABLED)
 2936              		.loc 1 1122 9 is_stmt 0 view .LVU1092
 2937 002a 2388     		ldrh	r3, [r4]
1122:rtos/uC-FS/FAT/fs_fat_lfn.c **** #if (FS_CFG_DBG_MEM_CLR_EN == DEF_ENABLED)
 2938              		.loc 1 1122 8 view .LVU1093
 2939 002c 2BB3     		cbz	r3, .L221
 2940              	.L203:
1136:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 2941              		.loc 1 1136 5 is_stmt 1 view .LVU1094
1136:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 2942              		.loc 1 1136 16 is_stmt 0 view .LVU1095
 2943 002e 2388     		ldrh	r3, [r4]
1136:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 2944              		.loc 1 1136 13 view .LVU1096
 2945 0030 002B     		cmp	r3, #0
 2946 0032 36D1     		bne	.L216
 2947 0034 0123     		movs	r3, #1
 2948 0036 0393     		str	r3, [sp, #12]
 2949              	.L204:
 2950              	.LVL360:
ARM GAS  /tmp/ccu2ENwm.s 			page 121


1139:rtos/uC-FS/FAT/fs_fat_lfn.c ****                    &name_len,
 2951              		.loc 1 1139 5 is_stmt 1 discriminator 4 view .LVU1097
 2952 0038 2346     		mov	r3, r4
 2953 003a 47AA     		add	r2, sp, #284
 2954 003c 0DF58F71 		add	r1, sp, #286
 2955 0040 2846     		mov	r0, r5
 2956 0042 FFF7FEFF 		bl	FS_FAT_LFN_Chk
 2957              	.LVL361:
1144:rtos/uC-FS/FAT/fs_fat_lfn.c ****         *p_name_next = name;
 2958              		.loc 1 1144 5 discriminator 4 view .LVU1098
1144:rtos/uC-FS/FAT/fs_fat_lfn.c ****         *p_name_next = name;
 2959              		.loc 1 1144 9 is_stmt 0 discriminator 4 view .LVU1099
 2960 0046 2388     		ldrh	r3, [r4]
1144:rtos/uC-FS/FAT/fs_fat_lfn.c ****         *p_name_next = name;
 2961              		.loc 1 1144 8 discriminator 4 view .LVU1100
 2962 0048 73BB     		cbnz	r3, .L222
1149:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 2963              		.loc 1 1149 4 is_stmt 1 view .LVU1101
1149:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 2964              		.loc 1 1149 32 is_stmt 0 view .LVU1102
 2965 004a BDF81C31 		ldrh	r3, [sp, #284]
 2966 004e 2B44     		add	r3, r3, r5
1149:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 2967              		.loc 1 1149 24 view .LVU1103
 2968 0050 3B60     		str	r3, [r7]
1151:rtos/uC-FS/FAT/fs_fat_lfn.c ****     dir_cur_pos.SecNbr =  p_dir_start_pos->SecNbr;
 2969              		.loc 1 1151 5 is_stmt 1 view .LVU1104
1151:rtos/uC-FS/FAT/fs_fat_lfn.c ****     dir_cur_pos.SecNbr =  p_dir_start_pos->SecNbr;
 2970              		.loc 1 1151 24 is_stmt 0 view .LVU1105
 2971 0052 776B     		ldr	r7, [r6, #52]
 2972              	.LVL362:
1152:rtos/uC-FS/FAT/fs_fat_lfn.c ****     dir_cur_pos.SecPos =  p_dir_start_pos->SecPos;
 2973              		.loc 1 1152 5 is_stmt 1 view .LVU1106
1152:rtos/uC-FS/FAT/fs_fat_lfn.c ****     dir_cur_pos.SecPos =  p_dir_start_pos->SecPos;
 2974              		.loc 1 1152 42 is_stmt 0 view .LVU1107
 2975 0054 5A9B     		ldr	r3, [sp, #360]
 2976 0056 1A68     		ldr	r2, [r3]
1152:rtos/uC-FS/FAT/fs_fat_lfn.c ****     dir_cur_pos.SecPos =  p_dir_start_pos->SecPos;
 2977              		.loc 1 1152 24 view .LVU1108
 2978 0058 4E92     		str	r2, [sp, #312]
1153:rtos/uC-FS/FAT/fs_fat_lfn.c ****     dir_sec_valid      =  FS_FAT_IS_VALID_SEC(p_fat_data, dir_cur_pos.SecNbr);
 2979              		.loc 1 1153 5 is_stmt 1 view .LVU1109
1153:rtos/uC-FS/FAT/fs_fat_lfn.c ****     dir_sec_valid      =  FS_FAT_IS_VALID_SEC(p_fat_data, dir_cur_pos.SecNbr);
 2980              		.loc 1 1153 42 is_stmt 0 view .LVU1110
 2981 005a 5B68     		ldr	r3, [r3, #4]
1153:rtos/uC-FS/FAT/fs_fat_lfn.c ****     dir_sec_valid      =  FS_FAT_IS_VALID_SEC(p_fat_data, dir_cur_pos.SecNbr);
 2982              		.loc 1 1153 24 view .LVU1111
 2983 005c 4F93     		str	r3, [sp, #316]
1154:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 2984              		.loc 1 1154 5 is_stmt 1 view .LVU1112
1154:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 2985              		.loc 1 1154 27 is_stmt 0 view .LVU1113
 2986 005e BB6A     		ldr	r3, [r7, #40]
1154:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 2987              		.loc 1 1154 24 view .LVU1114
 2988 0060 9A42     		cmp	r2, r3
 2989 0062 C0F09880 		bcc	.L217
ARM GAS  /tmp/ccu2ENwm.s 			page 122


1154:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 2990              		.loc 1 1154 27 discriminator 1 view .LVU1115
 2991 0066 B968     		ldr	r1, [r7, #8]
 2992 0068 0B44     		add	r3, r3, r1
 2993 006a 3969     		ldr	r1, [r7, #16]
 2994 006c 0B44     		add	r3, r3, r1
 2995 006e 9A42     		cmp	r2, r3
 2996 0070 40F2AD80 		bls	.L218
1154:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 2997              		.loc 1 1154 24 view .LVU1116
 2998 0074 4FF00008 		mov	r8, #0
 2999 0078 8FE0     		b	.L213
 3000              	.LVL363:
 3001              	.L221:
1124:rtos/uC-FS/FAT/fs_fat_lfn.c **** #endif
 3002              		.loc 1 1124 9 is_stmt 1 view .LVU1117
 3003 007a 0C21     		movs	r1, #12
 3004 007c 48A8     		add	r0, sp, #288
 3005 007e FFF7FEFF 		bl	Mem_Clr
 3006              	.LVL364:
1126:rtos/uC-FS/FAT/fs_fat_lfn.c ****                          &name_8_3[0],
 3007              		.loc 1 1126 9 view .LVU1118
 3008 0082 0094     		str	r4, [sp]
 3009 0084 0DF22F13 		addw	r3, sp, #303
 3010 0088 0DF11B02 		add	r2, sp, #27
 3011 008c 48A9     		add	r1, sp, #288
 3012 008e 2846     		mov	r0, r5
 3013 0090 FFF7FEFF 		bl	FS_FAT_SFN_Create
 3014              	.LVL365:
1132:rtos/uC-FS/FAT/fs_fat_lfn.c ****             *p_err  = FS_ERR_NONE;
 3015              		.loc 1 1132 9 view .LVU1119
1132:rtos/uC-FS/FAT/fs_fat_lfn.c ****             *p_err  = FS_ERR_NONE;
 3016              		.loc 1 1132 13 is_stmt 0 view .LVU1120
 3017 0094 2388     		ldrh	r3, [r4]
1132:rtos/uC-FS/FAT/fs_fat_lfn.c ****             *p_err  = FS_ERR_NONE;
 3018              		.loc 1 1132 12 view .LVU1121
 3019 0096 B3F5627F 		cmp	r3, #904
 3020 009a C8D1     		bne	.L203
1133:rtos/uC-FS/FAT/fs_fat_lfn.c ****         }
 3021              		.loc 1 1133 13 is_stmt 1 view .LVU1122
1133:rtos/uC-FS/FAT/fs_fat_lfn.c ****         }
 3022              		.loc 1 1133 21 is_stmt 0 view .LVU1123
 3023 009c 0023     		movs	r3, #0
 3024 009e 2380     		strh	r3, [r4]	@ movhi
 3025 00a0 C5E7     		b	.L203
 3026              	.L216:
1136:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 3027              		.loc 1 1136 13 view .LVU1124
 3028 00a2 0023     		movs	r3, #0
 3029 00a4 0393     		str	r3, [sp, #12]
 3030 00a6 C7E7     		b	.L204
 3031              	.LVL366:
 3032              	.L222:
1145:rtos/uC-FS/FAT/fs_fat_lfn.c ****          return;
 3033              		.loc 1 1145 9 is_stmt 1 view .LVU1125
1145:rtos/uC-FS/FAT/fs_fat_lfn.c ****          return;
 3034              		.loc 1 1145 22 is_stmt 0 view .LVU1126
ARM GAS  /tmp/ccu2ENwm.s 			page 123


 3035 00a8 3D60     		str	r5, [r7]
1146:rtos/uC-FS/FAT/fs_fat_lfn.c ****     }
 3036              		.loc 1 1146 10 is_stmt 1 view .LVU1127
 3037 00aa 8DE0     		b	.L202
 3038              	.LVL367:
 3039              	.L208:
1170:rtos/uC-FS/FAT/fs_fat_lfn.c ****                  return;
 3040              		.loc 1 1170 17 view .LVU1128
1170:rtos/uC-FS/FAT/fs_fat_lfn.c ****                  return;
 3041              		.loc 1 1170 24 is_stmt 0 view .LVU1129
 3042 00ac 40F23353 		movw	r3, #1331
 3043 00b0 2380     		strh	r3, [r4]	@ movhi
1171:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 3044              		.loc 1 1171 18 is_stmt 1 view .LVU1130
 3045 00b2 89E0     		b	.L202
 3046              	.L226:
1166:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 3047              		.loc 1 1166 18 view .LVU1131
1184:rtos/uC-FS/FAT/fs_fat_lfn.c ****         name_len_found = FS_FAT_LFN_StrLen_N(name_lfn, FS_FAT_MAX_FILE_NAME_LEN);
 3048              		.loc 1 1184 9 view .LVU1132
1184:rtos/uC-FS/FAT/fs_fat_lfn.c ****         name_len_found = FS_FAT_LFN_StrLen_N(name_lfn, FS_FAT_MAX_FILE_NAME_LEN);
 3049              		.loc 1 1184 45 is_stmt 0 view .LVU1133
 3050 00b4 DBF81030 		ldr	r3, [fp, #16]
 3051 00b8 0493     		str	r3, [sp, #16]
1184:rtos/uC-FS/FAT/fs_fat_lfn.c ****         name_len_found = FS_FAT_LFN_StrLen_N(name_lfn, FS_FAT_MAX_FILE_NAME_LEN);
 3052              		.loc 1 1184 68 view .LVU1134
 3053 00ba 4D9A     		ldr	r2, [sp, #308]
 3054 00bc 0592     		str	r2, [sp, #20]
1184:rtos/uC-FS/FAT/fs_fat_lfn.c ****         name_len_found = FS_FAT_LFN_StrLen_N(name_lfn, FS_FAT_MAX_FILE_NAME_LEN);
 3055              		.loc 1 1184 24 view .LVU1135
 3056 00be 03EB0209 		add	r9, r3, r2
 3057              	.LVL368:
1185:rtos/uC-FS/FAT/fs_fat_lfn.c ****         if (name_len == name_len_found) {                       /* See Note #2.                    
 3058              		.loc 1 1185 9 is_stmt 1 view .LVU1136
1185:rtos/uC-FS/FAT/fs_fat_lfn.c ****         if (name_len == name_len_found) {                       /* See Note #2.                    
 3059              		.loc 1 1185 26 is_stmt 0 view .LVU1137
 3060 00c2 FF21     		movs	r1, #255
 3061 00c4 07A8     		add	r0, sp, #28
 3062 00c6 FFF7FEFF 		bl	FS_FAT_LFN_StrLen_N
 3063              	.LVL369:
1186:rtos/uC-FS/FAT/fs_fat_lfn.c ****             name_lfn_cmp = FS_FAT_LFN_StrCmpIgnoreCase_N(name, &name_lfn[0], name_len);
 3064              		.loc 1 1186 9 is_stmt 1 view .LVU1138
1186:rtos/uC-FS/FAT/fs_fat_lfn.c ****             name_lfn_cmp = FS_FAT_LFN_StrCmpIgnoreCase_N(name, &name_lfn[0], name_len);
 3065              		.loc 1 1186 22 is_stmt 0 view .LVU1139
 3066 00ca BDF81E21 		ldrh	r2, [sp, #286]
1186:rtos/uC-FS/FAT/fs_fat_lfn.c ****             name_lfn_cmp = FS_FAT_LFN_StrCmpIgnoreCase_N(name, &name_lfn[0], name_len);
 3067              		.loc 1 1186 12 view .LVU1140
 3068 00ce 8242     		cmp	r2, r0
 3069 00d0 12D0     		beq	.L223
 3070              	.LVL370:
 3071              	.L210:
1200:rtos/uC-FS/FAT/fs_fat_lfn.c ****             name_word = MEM_VAL_GET_INT32U((void *)(p_dir_entry + 0u));
 3072              		.loc 1 1200 9 is_stmt 1 view .LVU1141
1200:rtos/uC-FS/FAT/fs_fat_lfn.c ****             name_word = MEM_VAL_GET_INT32U((void *)(p_dir_entry + 0u));
 3073              		.loc 1 1200 12 is_stmt 0 view .LVU1142
 3074 00d2 039B     		ldr	r3, [sp, #12]
 3075 00d4 13BB     		cbnz	r3, .L224
ARM GAS  /tmp/ccu2ENwm.s 			page 124


 3076              	.L211:
1225:rtos/uC-FS/FAT/fs_fat_lfn.c ****         dir_cur_pos.SecPos = dir_end_pos.SecPos + FS_FAT_SIZE_DIR_ENTRY;
 3077              		.loc 1 1225 9 is_stmt 1 view .LVU1143
1225:rtos/uC-FS/FAT/fs_fat_lfn.c ****         dir_cur_pos.SecPos = dir_end_pos.SecPos + FS_FAT_SIZE_DIR_ENTRY;
 3078              		.loc 1 1225 41 is_stmt 0 view .LVU1144
 3079 00d6 4C9A     		ldr	r2, [sp, #304]
1225:rtos/uC-FS/FAT/fs_fat_lfn.c ****         dir_cur_pos.SecPos = dir_end_pos.SecPos + FS_FAT_SIZE_DIR_ENTRY;
 3080              		.loc 1 1225 28 view .LVU1145
 3081 00d8 4E92     		str	r2, [sp, #312]
1226:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                 /* Chk sec validity (see Note #3). 
 3082              		.loc 1 1226 9 is_stmt 1 view .LVU1146
1226:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                 /* Chk sec validity (see Note #3). 
 3083              		.loc 1 1226 41 is_stmt 0 view .LVU1147
 3084 00da 4D9B     		ldr	r3, [sp, #308]
1226:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                 /* Chk sec validity (see Note #3). 
 3085              		.loc 1 1226 49 view .LVU1148
 3086 00dc 2033     		adds	r3, r3, #32
1226:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                 /* Chk sec validity (see Note #3). 
 3087              		.loc 1 1226 28 view .LVU1149
 3088 00de 4F93     		str	r3, [sp, #316]
1228:rtos/uC-FS/FAT/fs_fat_lfn.c ****     }
 3089              		.loc 1 1228 9 is_stmt 1 view .LVU1150
1228:rtos/uC-FS/FAT/fs_fat_lfn.c ****     }
 3090              		.loc 1 1228 30 is_stmt 0 view .LVU1151
 3091 00e0 BB6A     		ldr	r3, [r7, #40]
1228:rtos/uC-FS/FAT/fs_fat_lfn.c ****     }
 3092              		.loc 1 1228 28 view .LVU1152
 3093 00e2 9A42     		cmp	r2, r3
 3094 00e4 76D3     		bcc	.L219
1228:rtos/uC-FS/FAT/fs_fat_lfn.c ****     }
 3095              		.loc 1 1228 30 discriminator 1 view .LVU1153
 3096 00e6 B968     		ldr	r1, [r7, #8]
 3097 00e8 0B44     		add	r3, r3, r1
 3098 00ea 3969     		ldr	r1, [r7, #16]
 3099 00ec 0B44     		add	r3, r3, r1
 3100 00ee 9A42     		cmp	r2, r3
 3101 00f0 53D9     		bls	.L213
1228:rtos/uC-FS/FAT/fs_fat_lfn.c ****     }
 3102              		.loc 1 1228 28 view .LVU1154
 3103 00f2 4FF00008 		mov	r8, #0
 3104              	.LVL371:
1228:rtos/uC-FS/FAT/fs_fat_lfn.c ****     }
 3105              		.loc 1 1228 28 view .LVU1155
 3106 00f6 50E0     		b	.L213
 3107              	.LVL372:
 3108              	.L223:
1187:rtos/uC-FS/FAT/fs_fat_lfn.c ****             if (name_lfn_cmp == 0) {
 3109              		.loc 1 1187 13 is_stmt 1 view .LVU1156
1187:rtos/uC-FS/FAT/fs_fat_lfn.c ****             if (name_lfn_cmp == 0) {
 3110              		.loc 1 1187 28 is_stmt 0 view .LVU1157
 3111 00f8 07A9     		add	r1, sp, #28
 3112 00fa 2846     		mov	r0, r5
 3113              	.LVL373:
1187:rtos/uC-FS/FAT/fs_fat_lfn.c ****             if (name_lfn_cmp == 0) {
 3114              		.loc 1 1187 28 view .LVU1158
 3115 00fc FFF7FEFF 		bl	FS_FAT_LFN_StrCmpIgnoreCase_N
 3116              	.LVL374:
ARM GAS  /tmp/ccu2ENwm.s 			page 125


1188:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 p_dir_start_pos->SecNbr = dir_cur_pos.SecNbr;
 3117              		.loc 1 1188 13 is_stmt 1 view .LVU1159
1188:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 p_dir_start_pos->SecNbr = dir_cur_pos.SecNbr;
 3118              		.loc 1 1188 16 is_stmt 0 view .LVU1160
 3119 0100 0028     		cmp	r0, #0
 3120 0102 E6D1     		bne	.L210
1189:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 p_dir_start_pos->SecPos = dir_cur_pos.SecPos;
 3121              		.loc 1 1189 17 is_stmt 1 view .LVU1161
1189:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 p_dir_start_pos->SecPos = dir_cur_pos.SecPos;
 3122              		.loc 1 1189 54 is_stmt 0 view .LVU1162
 3123 0104 4E9B     		ldr	r3, [sp, #312]
1189:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 p_dir_start_pos->SecPos = dir_cur_pos.SecPos;
 3124              		.loc 1 1189 41 view .LVU1163
 3125 0106 5A9A     		ldr	r2, [sp, #360]
 3126 0108 1360     		str	r3, [r2]
1190:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 p_dir_end_pos->SecNbr   = dir_end_pos.SecNbr;
 3127              		.loc 1 1190 17 is_stmt 1 view .LVU1164
1190:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 p_dir_end_pos->SecNbr   = dir_end_pos.SecNbr;
 3128              		.loc 1 1190 54 is_stmt 0 view .LVU1165
 3129 010a 4F9B     		ldr	r3, [sp, #316]
1190:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 p_dir_end_pos->SecNbr   = dir_end_pos.SecNbr;
 3130              		.loc 1 1190 41 view .LVU1166
 3131 010c 5360     		str	r3, [r2, #4]
1191:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 p_dir_end_pos->SecPos   = dir_end_pos.SecPos;
 3132              		.loc 1 1191 17 is_stmt 1 view .LVU1167
1191:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 p_dir_end_pos->SecPos   = dir_end_pos.SecPos;
 3133              		.loc 1 1191 54 is_stmt 0 view .LVU1168
 3134 010e 4C9B     		ldr	r3, [sp, #304]
1191:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 p_dir_end_pos->SecPos   = dir_end_pos.SecPos;
 3135              		.loc 1 1191 41 view .LVU1169
 3136 0110 CAF80030 		str	r3, [r10]
1192:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 return;
 3137              		.loc 1 1192 17 is_stmt 1 view .LVU1170
1192:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 return;
 3138              		.loc 1 1192 54 is_stmt 0 view .LVU1171
 3139 0114 4D9B     		ldr	r3, [sp, #308]
1192:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 return;
 3140              		.loc 1 1192 41 view .LVU1172
 3141 0116 CAF80430 		str	r3, [r10, #4]
1193:rtos/uC-FS/FAT/fs_fat_lfn.c ****             }
 3142              		.loc 1 1193 17 is_stmt 1 view .LVU1173
 3143 011a 55E0     		b	.L202
 3144              	.LVL375:
 3145              	.L224:
1201:rtos/uC-FS/FAT/fs_fat_lfn.c ****             if (name_word == name_8_3[0]) {
 3146              		.loc 1 1201 13 view .LVU1174
1201:rtos/uC-FS/FAT/fs_fat_lfn.c ****             if (name_word == name_8_3[0]) {
 3147              		.loc 1 1201 25 is_stmt 0 view .LVU1175
 3148 011c 049B     		ldr	r3, [sp, #16]
 3149 011e 059A     		ldr	r2, [sp, #20]
 3150 0120 9B5C     		ldrb	r3, [r3, r2]	@ zero_extendqisi2
 3151 0122 99F80120 		ldrb	r2, [r9, #1]	@ zero_extendqisi2
 3152 0126 03EB0223 		add	r3, r3, r2, lsl #8
 3153 012a 99F80220 		ldrb	r2, [r9, #2]	@ zero_extendqisi2
 3154 012e 03EB0243 		add	r3, r3, r2, lsl #16
 3155 0132 99F80320 		ldrb	r2, [r9, #3]	@ zero_extendqisi2
1201:rtos/uC-FS/FAT/fs_fat_lfn.c ****             if (name_word == name_8_3[0]) {
ARM GAS  /tmp/ccu2ENwm.s 			page 126


 3156              		.loc 1 1201 23 view .LVU1176
 3157 0136 03EB0263 		add	r3, r3, r2, lsl #24
 3158              	.LVL376:
1202:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 name_word = MEM_VAL_GET_INT32U((void *)(p_dir_entry + 4u));
 3159              		.loc 1 1202 13 is_stmt 1 view .LVU1177
1202:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 name_word = MEM_VAL_GET_INT32U((void *)(p_dir_entry + 4u));
 3160              		.loc 1 1202 38 is_stmt 0 view .LVU1178
 3161 013a 489A     		ldr	r2, [sp, #288]
1202:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 name_word = MEM_VAL_GET_INT32U((void *)(p_dir_entry + 4u));
 3162              		.loc 1 1202 16 view .LVU1179
 3163 013c 9A42     		cmp	r2, r3
 3164 013e CAD1     		bne	.L211
1203:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 if (name_word == name_8_3[1]) {
 3165              		.loc 1 1203 17 is_stmt 1 view .LVU1180
1203:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 if (name_word == name_8_3[1]) {
 3166              		.loc 1 1203 29 is_stmt 0 view .LVU1181
 3167 0140 99F80430 		ldrb	r3, [r9, #4]	@ zero_extendqisi2
 3168              	.LVL377:
1203:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 if (name_word == name_8_3[1]) {
 3169              		.loc 1 1203 29 view .LVU1182
 3170 0144 99F80520 		ldrb	r2, [r9, #5]	@ zero_extendqisi2
 3171 0148 03EB0223 		add	r3, r3, r2, lsl #8
 3172 014c 99F80620 		ldrb	r2, [r9, #6]	@ zero_extendqisi2
 3173 0150 03EB0243 		add	r3, r3, r2, lsl #16
 3174 0154 99F80720 		ldrb	r2, [r9, #7]	@ zero_extendqisi2
1203:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 if (name_word == name_8_3[1]) {
 3175              		.loc 1 1203 27 view .LVU1183
 3176 0158 03EB0263 		add	r3, r3, r2, lsl #24
 3177              	.LVL378:
1204:rtos/uC-FS/FAT/fs_fat_lfn.c ****                     name_word  = MEM_VAL_GET_INT32U((void *)(p_dir_entry + 8u));
 3178              		.loc 1 1204 17 is_stmt 1 view .LVU1184
1204:rtos/uC-FS/FAT/fs_fat_lfn.c ****                     name_word  = MEM_VAL_GET_INT32U((void *)(p_dir_entry + 8u));
 3179              		.loc 1 1204 42 is_stmt 0 view .LVU1185
 3180 015c 499A     		ldr	r2, [sp, #292]
1204:rtos/uC-FS/FAT/fs_fat_lfn.c ****                     name_word  = MEM_VAL_GET_INT32U((void *)(p_dir_entry + 8u));
 3181              		.loc 1 1204 20 view .LVU1186
 3182 015e 9A42     		cmp	r2, r3
 3183 0160 B9D1     		bne	.L211
1205:rtos/uC-FS/FAT/fs_fat_lfn.c ****                    #if (CPU_CFG_ENDIAN_TYPE == CPU_ENDIAN_TYPE_LITTLE)
 3184              		.loc 1 1205 21 is_stmt 1 view .LVU1187
1205:rtos/uC-FS/FAT/fs_fat_lfn.c ****                    #if (CPU_CFG_ENDIAN_TYPE == CPU_ENDIAN_TYPE_LITTLE)
 3185              		.loc 1 1205 34 is_stmt 0 view .LVU1188
 3186 0162 99F80830 		ldrb	r3, [r9, #8]	@ zero_extendqisi2
 3187              	.LVL379:
1205:rtos/uC-FS/FAT/fs_fat_lfn.c ****                    #if (CPU_CFG_ENDIAN_TYPE == CPU_ENDIAN_TYPE_LITTLE)
 3188              		.loc 1 1205 34 view .LVU1189
 3189 0166 99F80920 		ldrb	r2, [r9, #9]	@ zero_extendqisi2
 3190 016a 03EB0223 		add	r3, r3, r2, lsl #8
 3191 016e 99F80A20 		ldrb	r2, [r9, #10]	@ zero_extendqisi2
 3192 0172 03EB0243 		add	r3, r3, r2, lsl #16
 3193              	.LVL380:
1207:rtos/uC-FS/FAT/fs_fat_lfn.c ****                    #else
 3194              		.loc 1 1207 21 is_stmt 1 view .LVU1190
1207:rtos/uC-FS/FAT/fs_fat_lfn.c ****                    #else
 3195              		.loc 1 1207 31 is_stmt 0 view .LVU1191
 3196 0176 23F07F43 		bic	r3, r3, #-16777216
 3197              	.LVL381:
ARM GAS  /tmp/ccu2ENwm.s 			page 127


1211:rtos/uC-FS/FAT/fs_fat_lfn.c ****                         p_dir_start_pos->SecNbr = dir_end_pos.SecNbr;
 3198              		.loc 1 1211 21 is_stmt 1 view .LVU1192
1211:rtos/uC-FS/FAT/fs_fat_lfn.c ****                         p_dir_start_pos->SecNbr = dir_end_pos.SecNbr;
 3199              		.loc 1 1211 46 is_stmt 0 view .LVU1193
 3200 017a 4A9A     		ldr	r2, [sp, #296]
1211:rtos/uC-FS/FAT/fs_fat_lfn.c ****                         p_dir_start_pos->SecNbr = dir_end_pos.SecNbr;
 3201              		.loc 1 1211 24 view .LVU1194
 3202 017c 9A42     		cmp	r2, r3
 3203 017e AAD1     		bne	.L211
1212:rtos/uC-FS/FAT/fs_fat_lfn.c ****                         p_dir_start_pos->SecPos = dir_end_pos.SecPos;
 3204              		.loc 1 1212 25 is_stmt 1 view .LVU1195
1212:rtos/uC-FS/FAT/fs_fat_lfn.c ****                         p_dir_start_pos->SecPos = dir_end_pos.SecPos;
 3205              		.loc 1 1212 62 is_stmt 0 view .LVU1196
 3206 0180 4C9A     		ldr	r2, [sp, #304]
1212:rtos/uC-FS/FAT/fs_fat_lfn.c ****                         p_dir_start_pos->SecPos = dir_end_pos.SecPos;
 3207              		.loc 1 1212 49 view .LVU1197
 3208 0182 5A9B     		ldr	r3, [sp, #360]
 3209              	.LVL382:
1212:rtos/uC-FS/FAT/fs_fat_lfn.c ****                         p_dir_start_pos->SecPos = dir_end_pos.SecPos;
 3210              		.loc 1 1212 49 view .LVU1198
 3211 0184 1A60     		str	r2, [r3]
 3212              	.LVL383:
1213:rtos/uC-FS/FAT/fs_fat_lfn.c ****                         p_dir_end_pos->SecNbr   = dir_end_pos.SecNbr;
 3213              		.loc 1 1213 25 is_stmt 1 view .LVU1199
1213:rtos/uC-FS/FAT/fs_fat_lfn.c ****                         p_dir_end_pos->SecNbr   = dir_end_pos.SecNbr;
 3214              		.loc 1 1213 62 is_stmt 0 view .LVU1200
 3215 0186 4D9B     		ldr	r3, [sp, #308]
1213:rtos/uC-FS/FAT/fs_fat_lfn.c ****                         p_dir_end_pos->SecNbr   = dir_end_pos.SecNbr;
 3216              		.loc 1 1213 49 view .LVU1201
 3217 0188 5A99     		ldr	r1, [sp, #360]
 3218 018a 4B60     		str	r3, [r1, #4]
1214:rtos/uC-FS/FAT/fs_fat_lfn.c ****                         p_dir_end_pos->SecPos   = dir_end_pos.SecPos;
 3219              		.loc 1 1214 25 is_stmt 1 view .LVU1202
1214:rtos/uC-FS/FAT/fs_fat_lfn.c ****                         p_dir_end_pos->SecPos   = dir_end_pos.SecPos;
 3220              		.loc 1 1214 49 is_stmt 0 view .LVU1203
 3221 018c CAF80020 		str	r2, [r10]
1215:rtos/uC-FS/FAT/fs_fat_lfn.c ****                         return;
 3222              		.loc 1 1215 25 is_stmt 1 view .LVU1204
1215:rtos/uC-FS/FAT/fs_fat_lfn.c ****                         return;
 3223              		.loc 1 1215 49 is_stmt 0 view .LVU1205
 3224 0190 CAF80430 		str	r3, [r10, #4]
1216:rtos/uC-FS/FAT/fs_fat_lfn.c ****                     }
 3225              		.loc 1 1216 25 is_stmt 1 view .LVU1206
 3226 0194 18E0     		b	.L202
 3227              	.LVL384:
 3228              	.L217:
1154:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 3229              		.loc 1 1154 24 is_stmt 0 view .LVU1207
 3230 0196 4FF00008 		mov	r8, #0
 3231              	.L213:
 3232              	.LVL385:
1156:rtos/uC-FS/FAT/fs_fat_lfn.c ****         FS_FAT_LFN_NextDirEntryGet(         p_vol,
 3233              		.loc 1 1156 11 is_stmt 1 view .LVU1208
 3234 019a B8F1000F 		cmp	r8, #0
 3235 019e 1CD0     		beq	.L225
1157:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                             p_buf,
 3236              		.loc 1 1157 9 view .LVU1209
ARM GAS  /tmp/ccu2ENwm.s 			page 128


 3237 01a0 0194     		str	r4, [sp, #4]
 3238 01a2 4CAB     		add	r3, sp, #304
 3239 01a4 0093     		str	r3, [sp]
 3240 01a6 4EAB     		add	r3, sp, #312
 3241 01a8 07AA     		add	r2, sp, #28
 3242 01aa 5946     		mov	r1, fp
 3243 01ac 3046     		mov	r0, r6
 3244 01ae FFF7FEFF 		bl	FS_FAT_LFN_NextDirEntryGet
 3245              	.LVL386:
1164:rtos/uC-FS/FAT/fs_fat_lfn.c ****             case FS_ERR_NONE:
 3246              		.loc 1 1164 9 view .LVU1210
1164:rtos/uC-FS/FAT/fs_fat_lfn.c ****             case FS_ERR_NONE:
 3247              		.loc 1 1164 17 is_stmt 0 view .LVU1211
 3248 01b2 2388     		ldrh	r3, [r4]
1164:rtos/uC-FS/FAT/fs_fat_lfn.c ****             case FS_ERR_NONE:
 3249              		.loc 1 1164 9 view .LVU1212
 3250 01b4 162B     		cmp	r3, #22
 3251 01b6 3FF479AF 		beq	.L208
 3252 01ba B3F5FB7F 		cmp	r3, #502
 3253 01be 3FF475AF 		beq	.L208
 3254 01c2 002B     		cmp	r3, #0
 3255 01c4 3FF476AF 		beq	.L226
 3256              	.LVL387:
 3257              	.L202:
1235:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 3258              		.loc 1 1235 1 view .LVU1213
 3259 01c8 51B0     		add	sp, sp, #324
 3260              	.LCFI30:
 3261              		.cfi_remember_state
 3262              		.cfi_def_cfa_offset 36
 3263              		@ sp needed
 3264 01ca BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 3265              	.LVL388:
 3266              	.L218:
 3267              	.LCFI31:
 3268              		.cfi_restore_state
1154:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 3269              		.loc 1 1154 24 view .LVU1214
 3270 01ce 4FF00108 		mov	r8, #1
 3271 01d2 E2E7     		b	.L213
 3272              	.LVL389:
 3273              	.L219:
1228:rtos/uC-FS/FAT/fs_fat_lfn.c ****     }
 3274              		.loc 1 1228 28 view .LVU1215
 3275 01d4 4FF00008 		mov	r8, #0
 3276              	.LVL390:
1228:rtos/uC-FS/FAT/fs_fat_lfn.c ****     }
 3277              		.loc 1 1228 28 view .LVU1216
 3278 01d8 DFE7     		b	.L213
 3279              	.LVL391:
 3280              	.L225:
1233:rtos/uC-FS/FAT/fs_fat_lfn.c ****    *p_err = FS_ERR_ENTRY_CORRUPT;
 3281              		.loc 1 1233 97 is_stmt 1 view .LVU1217
1234:rtos/uC-FS/FAT/fs_fat_lfn.c **** }
 3282              		.loc 1 1234 4 view .LVU1218
1234:rtos/uC-FS/FAT/fs_fat_lfn.c **** }
 3283              		.loc 1 1234 11 is_stmt 0 view .LVU1219
ARM GAS  /tmp/ccu2ENwm.s 			page 129


 3284 01da 40F2BF23 		movw	r3, #703
 3285 01de 2380     		strh	r3, [r4]	@ movhi
 3286 01e0 F2E7     		b	.L202
 3287              		.cfi_endproc
 3288              	.LFE3:
 3290              		.section	.text.FS_FAT_LFN_DirEntryDel,"ax",%progbits
 3291              		.align	1
 3292              		.syntax unified
 3293              		.thumb
 3294              		.thumb_func
 3295              		.fpu fpv4-sp-d16
 3297              	FS_FAT_LFN_DirEntryDel:
 3298              	.LVL392:
 3299              	.LFB2:
 921:rtos/uC-FS/FAT/fs_fat_lfn.c ****     FS_FAT_DATA     *p_fat_data;
 3300              		.loc 1 921 1 is_stmt 1 view -0
 3301              		.cfi_startproc
 3302              		@ args = 4, pretend = 0, frame = 8
 3303              		@ frame_needed = 0, uses_anonymous_args = 0
 921:rtos/uC-FS/FAT/fs_fat_lfn.c ****     FS_FAT_DATA     *p_fat_data;
 3304              		.loc 1 921 1 is_stmt 0 view .LVU1221
 3305 0000 2DE9F047 		push	{r4, r5, r6, r7, r8, r9, r10, lr}
 3306              	.LCFI32:
 3307              		.cfi_def_cfa_offset 32
 3308              		.cfi_offset 4, -32
 3309              		.cfi_offset 5, -28
 3310              		.cfi_offset 6, -24
 3311              		.cfi_offset 7, -20
 3312              		.cfi_offset 8, -16
 3313              		.cfi_offset 9, -12
 3314              		.cfi_offset 10, -8
 3315              		.cfi_offset 14, -4
 3316 0004 84B0     		sub	sp, sp, #16
 3317              	.LCFI33:
 3318              		.cfi_def_cfa_offset 48
 3319 0006 8246     		mov	r10, r0
 3320 0008 0F46     		mov	r7, r1
 3321 000a 1D46     		mov	r5, r3
 3322 000c DDF83080 		ldr	r8, [sp, #48]
 922:rtos/uC-FS/FAT/fs_fat_lfn.c ****     FS_FAT_DIR_POS   dir_cur_pos;
 3323              		.loc 1 922 5 is_stmt 1 view .LVU1222
 923:rtos/uC-FS/FAT/fs_fat_lfn.c ****     CPU_INT08U      *p_dir_entry;
 3324              		.loc 1 923 5 view .LVU1223
 924:rtos/uC-FS/FAT/fs_fat_lfn.c ****     FS_FAT_SEC_NBR   dir_next_sec;
 3325              		.loc 1 924 5 view .LVU1224
 925:rtos/uC-FS/FAT/fs_fat_lfn.c ****     CPU_BOOLEAN      dir_sec_valid;
 3326              		.loc 1 925 5 view .LVU1225
 926:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 3327              		.loc 1 926 5 view .LVU1226
 929:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 3328              		.loc 1 929 5 view .LVU1227
 929:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 3329              		.loc 1 929 16 is_stmt 0 view .LVU1228
 3330 0010 466B     		ldr	r6, [r0, #52]
 3331              	.LVL393:
 946:rtos/uC-FS/FAT/fs_fat_lfn.c ****     p_dir_entry        +=  p_dir_start_pos->SecPos;
 3332              		.loc 1 946 5 is_stmt 1 view .LVU1229
ARM GAS  /tmp/ccu2ENwm.s 			page 130


 946:rtos/uC-FS/FAT/fs_fat_lfn.c ****     p_dir_entry        +=  p_dir_start_pos->SecPos;
 3333              		.loc 1 946 25 is_stmt 0 view .LVU1230
 3334 0012 0969     		ldr	r1, [r1, #16]
 3335              	.LVL394:
 947:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 3336              		.loc 1 947 5 is_stmt 1 view .LVU1231
 947:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 3337              		.loc 1 947 43 is_stmt 0 view .LVU1232
 3338 0014 5368     		ldr	r3, [r2, #4]
 3339              	.LVL395:
 947:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 3340              		.loc 1 947 24 view .LVU1233
 3341 0016 01EB0309 		add	r9, r1, r3
 3342              	.LVL396:
 949:rtos/uC-FS/FAT/fs_fat_lfn.c ****     dir_cur_pos.SecPos  =  p_dir_start_pos->SecPos;
 3343              		.loc 1 949 5 is_stmt 1 view .LVU1234
 949:rtos/uC-FS/FAT/fs_fat_lfn.c ****     dir_cur_pos.SecPos  =  p_dir_start_pos->SecPos;
 3344              		.loc 1 949 43 is_stmt 0 view .LVU1235
 3345 001a 1168     		ldr	r1, [r2]
 949:rtos/uC-FS/FAT/fs_fat_lfn.c ****     dir_cur_pos.SecPos  =  p_dir_start_pos->SecPos;
 3346              		.loc 1 949 25 view .LVU1236
 3347 001c 0291     		str	r1, [sp, #8]
 950:rtos/uC-FS/FAT/fs_fat_lfn.c ****     dir_sec_valid       =  FS_FAT_IS_VALID_SEC(p_fat_data, dir_cur_pos.SecNbr);
 3348              		.loc 1 950 5 is_stmt 1 view .LVU1237
 950:rtos/uC-FS/FAT/fs_fat_lfn.c ****     dir_sec_valid       =  FS_FAT_IS_VALID_SEC(p_fat_data, dir_cur_pos.SecNbr);
 3349              		.loc 1 950 25 is_stmt 0 view .LVU1238
 3350 001e 0393     		str	r3, [sp, #12]
 951:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 3351              		.loc 1 951 5 is_stmt 1 view .LVU1239
 951:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 3352              		.loc 1 951 28 is_stmt 0 view .LVU1240
 3353 0020 B36A     		ldr	r3, [r6, #40]
 951:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 3354              		.loc 1 951 25 view .LVU1241
 3355 0022 9942     		cmp	r1, r3
 3356 0024 07D3     		bcc	.L240
 951:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 3357              		.loc 1 951 28 discriminator 1 view .LVU1242
 3358 0026 B268     		ldr	r2, [r6, #8]
 3359              	.LVL397:
 951:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 3360              		.loc 1 951 28 discriminator 1 view .LVU1243
 3361 0028 1344     		add	r3, r3, r2
 3362 002a 3269     		ldr	r2, [r6, #16]
 3363 002c 1344     		add	r3, r3, r2
 3364 002e 9942     		cmp	r1, r3
 3365 0030 0DD9     		bls	.L241
 951:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 3366              		.loc 1 951 25 view .LVU1244
 3367 0032 0024     		movs	r4, #0
 3368 0034 00E0     		b	.L228
 3369              	.LVL398:
 3370              	.L240:
 951:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 3371              		.loc 1 951 25 view .LVU1245
 3372 0036 0024     		movs	r4, #0
 3373              	.LVL399:
ARM GAS  /tmp/ccu2ENwm.s 			page 131


 3374              	.L228:
 953:rtos/uC-FS/FAT/fs_fat_lfn.c ****               dir_cur_pos.SecNbr,
 3375              		.loc 1 953 5 is_stmt 1 discriminator 6 view .LVU1246
 3376 0038 CDF80080 		str	r8, [sp]
 3377 003c 0123     		movs	r3, #1
 3378 003e 0222     		movs	r2, #2
 3379 0040 3846     		mov	r0, r7
 3380              	.LVL400:
 953:rtos/uC-FS/FAT/fs_fat_lfn.c ****               dir_cur_pos.SecNbr,
 3381              		.loc 1 953 5 is_stmt 0 discriminator 6 view .LVU1247
 3382 0042 FFF7FEFF 		bl	FSBuf_Set
 3383              	.LVL401:
 958:rtos/uC-FS/FAT/fs_fat_lfn.c ****          return;
 3384              		.loc 1 958 5 is_stmt 1 discriminator 6 view .LVU1248
 958:rtos/uC-FS/FAT/fs_fat_lfn.c ****          return;
 3385              		.loc 1 958 9 is_stmt 0 discriminator 6 view .LVU1249
 3386 0046 B8F80030 		ldrh	r3, [r8]
 958:rtos/uC-FS/FAT/fs_fat_lfn.c ****          return;
 3387              		.loc 1 958 8 discriminator 6 view .LVU1250
 3388 004a 43B1     		cbz	r3, .L230
 3389 004c 25E0     		b	.L227
 3390              	.LVL402:
 3391              	.L241:
 951:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 3392              		.loc 1 951 25 view .LVU1251
 3393 004e 0124     		movs	r4, #1
 3394 0050 F2E7     		b	.L228
 3395              	.LVL403:
 3396              	.L237:
 967:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                 /* Get next sec in dir.            
 3397              		.loc 1 967 9 is_stmt 1 view .LVU1252
 967:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                 /* Get next sec in dir.            
 3398              		.loc 1 967 45 is_stmt 0 view .LVU1253
 3399 0052 736B     		ldr	r3, [r6, #52]
 967:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                 /* Get next sec in dir.            
 3400              		.loc 1 967 12 view .LVU1254
 3401 0054 0399     		ldr	r1, [sp, #12]
 3402 0056 9942     		cmp	r1, r3
 3403 0058 10D0     		beq	.L244
 3404              	.L231:
1009:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                 /* ------------------- CLR DIR ENTR
 3405              		.loc 1 1009 9 is_stmt 1 view .LVU1255
1009:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                 /* ------------------- CLR DIR ENTR
 3406              		.loc 1 1009 12 is_stmt 0 view .LVU1256
 3407 005a 002C     		cmp	r4, #0
 3408 005c 45D1     		bne	.L245
 3409              	.L230:
 962:rtos/uC-FS/FAT/fs_fat_lfn.c ****            ((dir_cur_pos.SecNbr != p_dir_end_pos->SecNbr) ||    /* ... &     end sec     not reache
 3410              		.loc 1 962 11 is_stmt 1 view .LVU1257
 3411 005e 3CB1     		cbz	r4, .L236
 963:rtos/uC-FS/FAT/fs_fat_lfn.c ****             (dir_cur_pos.SecPos <= p_dir_end_pos->SecPos))) {   /* ...    OR end sec pos not reache
 3412              		.loc 1 963 25 is_stmt 0 discriminator 1 view .LVU1258
 3413 0060 029A     		ldr	r2, [sp, #8]
 963:rtos/uC-FS/FAT/fs_fat_lfn.c ****             (dir_cur_pos.SecPos <= p_dir_end_pos->SecPos))) {   /* ...    OR end sec pos not reache
 3414              		.loc 1 963 49 discriminator 1 view .LVU1259
 3415 0062 2B68     		ldr	r3, [r5]
 962:rtos/uC-FS/FAT/fs_fat_lfn.c ****            ((dir_cur_pos.SecNbr != p_dir_end_pos->SecNbr) ||    /* ... &     end sec     not reache
ARM GAS  /tmp/ccu2ENwm.s 			page 132


 3416              		.loc 1 962 45 discriminator 1 view .LVU1260
 3417 0064 9A42     		cmp	r2, r3
 3418 0066 F4D1     		bne	.L237
 964:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 3419              		.loc 1 964 49 view .LVU1261
 3420 0068 6B68     		ldr	r3, [r5, #4]
 963:rtos/uC-FS/FAT/fs_fat_lfn.c ****             (dir_cur_pos.SecPos <= p_dir_end_pos->SecPos))) {   /* ...    OR end sec pos not reache
 3421              		.loc 1 963 59 view .LVU1262
 3422 006a 0399     		ldr	r1, [sp, #12]
 3423 006c 9942     		cmp	r1, r3
 3424 006e F0D9     		bls	.L237
 3425              	.L236:
1034:rtos/uC-FS/FAT/fs_fat_lfn.c ****         FS_TRACE_DBG(("FS_FAT_LFN_DirEntryDel(): Invalid sec gotten: %d.\r\n", dir_cur_pos.SecNbr))
 3426              		.loc 1 1034 5 is_stmt 1 view .LVU1263
1034:rtos/uC-FS/FAT/fs_fat_lfn.c ****         FS_TRACE_DBG(("FS_FAT_LFN_DirEntryDel(): Invalid sec gotten: %d.\r\n", dir_cur_pos.SecNbr))
 3427              		.loc 1 1034 8 is_stmt 0 view .LVU1264
 3428 0070 9CB9     		cbnz	r4, .L227
1035:rtos/uC-FS/FAT/fs_fat_lfn.c ****        *p_err = FS_ERR_ENTRY_CORRUPT;
 3429              		.loc 1 1035 100 is_stmt 1 view .LVU1265
1036:rtos/uC-FS/FAT/fs_fat_lfn.c ****     }
 3430              		.loc 1 1036 8 view .LVU1266
1036:rtos/uC-FS/FAT/fs_fat_lfn.c ****     }
 3431              		.loc 1 1036 15 is_stmt 0 view .LVU1267
 3432 0072 40F2BF23 		movw	r3, #703
 3433 0076 A8F80030 		strh	r3, [r8]	@ movhi
 3434 007a 0EE0     		b	.L227
 3435              	.L244:
 969:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                              p_buf,
 3436              		.loc 1 969 13 is_stmt 1 view .LVU1268
 969:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                              p_buf,
 3437              		.loc 1 969 28 is_stmt 0 view .LVU1269
 3438 007c 4346     		mov	r3, r8
 3439 007e 3946     		mov	r1, r7
 3440 0080 5046     		mov	r0, r10
 3441 0082 FFF7FEFF 		bl	FS_FAT_SecNextGet
 3442              	.LVL404:
 974:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 case FS_ERR_NONE:
 3443              		.loc 1 974 13 is_stmt 1 view .LVU1270
 974:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 case FS_ERR_NONE:
 3444              		.loc 1 974 21 is_stmt 0 view .LVU1271
 3445 0086 B8F80030 		ldrh	r3, [r8]
 974:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 case FS_ERR_NONE:
 3446              		.loc 1 974 13 view .LVU1272
 3447 008a 40F23652 		movw	r2, #1334
 3448 008e 9342     		cmp	r3, r2
 3449 0090 06D0     		beq	.L232
 3450 0092 B3F5A76F 		cmp	r3, #1336
 3451 0096 03D0     		beq	.L232
 3452 0098 3BB1     		cbz	r3, .L246
 3453              	.LVL405:
 3454              	.L227:
1038:rtos/uC-FS/FAT/fs_fat_lfn.c **** #endif
 3455              		.loc 1 1038 1 view .LVU1273
 3456 009a 04B0     		add	sp, sp, #16
 3457              	.LCFI34:
 3458              		.cfi_remember_state
 3459              		.cfi_def_cfa_offset 32
ARM GAS  /tmp/ccu2ENwm.s 			page 133


 3460              		@ sp needed
 3461 009c BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, r10, pc}
 3462              	.LVL406:
 3463              	.L232:
 3464              	.LCFI35:
 3465              		.cfi_restore_state
 980:rtos/uC-FS/FAT/fs_fat_lfn.c ****                     *p_err = FS_ERR_ENTRY_CORRUPT;
 3466              		.loc 1 980 142 is_stmt 1 view .LVU1274
 981:rtos/uC-FS/FAT/fs_fat_lfn.c ****                      return;
 3467              		.loc 1 981 21 view .LVU1275
 981:rtos/uC-FS/FAT/fs_fat_lfn.c ****                      return;
 3468              		.loc 1 981 28 is_stmt 0 view .LVU1276
 3469 00a0 40F2BF23 		movw	r3, #703
 3470 00a4 A8F80030 		strh	r3, [r8]	@ movhi
 982:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 3471              		.loc 1 982 22 is_stmt 1 view .LVU1277
 3472 00a8 F7E7     		b	.L227
 3473              	.L246:
 976:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 3474              		.loc 1 976 22 view .LVU1278
 990:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 3475              		.loc 1 990 13 view .LVU1279
 990:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 3476              		.loc 1 990 34 is_stmt 0 view .LVU1280
 3477 00aa B36A     		ldr	r3, [r6, #40]
 990:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 3478              		.loc 1 990 32 view .LVU1281
 3479 00ac 8342     		cmp	r3, r0
 3480 00ae 07D8     		bhi	.L242
 990:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 3481              		.loc 1 990 34 discriminator 1 view .LVU1282
 3482 00b0 B268     		ldr	r2, [r6, #8]
 3483 00b2 1344     		add	r3, r3, r2
 3484 00b4 3269     		ldr	r2, [r6, #16]
 3485 00b6 1344     		add	r3, r3, r2
 3486 00b8 8342     		cmp	r3, r0
 3487 00ba 02D2     		bcs	.L234
 990:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 3488              		.loc 1 990 32 view .LVU1283
 3489 00bc 0024     		movs	r4, #0
 3490              	.LVL407:
 990:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 3491              		.loc 1 990 32 view .LVU1284
 3492 00be 00E0     		b	.L234
 3493              	.LVL408:
 3494              	.L242:
 990:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 3495              		.loc 1 990 32 view .LVU1285
 3496 00c0 0024     		movs	r4, #0
 3497              	.LVL409:
 3498              	.L234:
 992:rtos/uC-FS/FAT/fs_fat_lfn.c ****             dir_cur_pos.SecPos = 0u;
 3499              		.loc 1 992 13 is_stmt 1 discriminator 6 view .LVU1286
 992:rtos/uC-FS/FAT/fs_fat_lfn.c ****             dir_cur_pos.SecPos = 0u;
 3500              		.loc 1 992 32 is_stmt 0 discriminator 6 view .LVU1287
 3501 00c2 0290     		str	r0, [sp, #8]
 993:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
ARM GAS  /tmp/ccu2ENwm.s 			page 134


 3502              		.loc 1 993 13 is_stmt 1 discriminator 6 view .LVU1288
 993:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 3503              		.loc 1 993 32 is_stmt 0 discriminator 6 view .LVU1289
 3504 00c4 0023     		movs	r3, #0
 3505 00c6 0393     		str	r3, [sp, #12]
 995:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 p_dir_entry = (CPU_INT08U *)p_buf->DataPtr;
 3506              		.loc 1 995 13 is_stmt 1 discriminator 6 view .LVU1290
 995:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 p_dir_entry = (CPU_INT08U *)p_buf->DataPtr;
 3507              		.loc 1 995 16 is_stmt 0 discriminator 6 view .LVU1291
 3508 00c8 002C     		cmp	r4, #0
 3509 00ca C6D0     		beq	.L231
 996:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 3510              		.loc 1 996 17 is_stmt 1 view .LVU1292
 996:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 3511              		.loc 1 996 29 is_stmt 0 view .LVU1293
 3512 00cc D7F81090 		ldr	r9, [r7, #16]
 3513              	.LVL410:
 998:rtos/uC-FS/FAT/fs_fat_lfn.c ****                           dir_cur_pos.SecNbr,
 3514              		.loc 1 998 17 is_stmt 1 view .LVU1294
 3515 00d0 CDF80080 		str	r8, [sp]
 3516 00d4 0123     		movs	r3, #1
 3517 00d6 0222     		movs	r2, #2
 3518 00d8 0146     		mov	r1, r0
 3519 00da 3846     		mov	r0, r7
 3520              	.LVL411:
 998:rtos/uC-FS/FAT/fs_fat_lfn.c ****                           dir_cur_pos.SecNbr,
 3521              		.loc 1 998 17 is_stmt 0 view .LVU1295
 3522 00dc FFF7FEFF 		bl	FSBuf_Set
 3523              	.LVL412:
1003:rtos/uC-FS/FAT/fs_fat_lfn.c ****                     return;
 3524              		.loc 1 1003 17 is_stmt 1 view .LVU1296
1003:rtos/uC-FS/FAT/fs_fat_lfn.c ****                     return;
 3525              		.loc 1 1003 21 is_stmt 0 view .LVU1297
 3526 00e0 B8F80030 		ldrh	r3, [r8]
1003:rtos/uC-FS/FAT/fs_fat_lfn.c ****                     return;
 3527              		.loc 1 1003 20 view .LVU1298
 3528 00e4 002B     		cmp	r3, #0
 3529 00e6 B8D0     		beq	.L231
 3530 00e8 D7E7     		b	.L227
 3531              	.LVL413:
 3532              	.L245:
1012:rtos/uC-FS/FAT/fs_fat_lfn.c ****                             FS_FAT_SIZE_DIR_ENTRY);
 3533              		.loc 1 1012 13 is_stmt 1 view .LVU1299
 3534 00ea 2021     		movs	r1, #32
 3535 00ec 4846     		mov	r0, r9
 3536 00ee FFF7FEFF 		bl	Mem_Clr
 3537              	.LVL414:
1015:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 3538              		.loc 1 1015 13 view .LVU1300
1015:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 3539              		.loc 1 1015 28 is_stmt 0 view .LVU1301
 3540 00f2 E523     		movs	r3, #229
 3541 00f4 89F80030 		strb	r3, [r9]
1017:rtos/uC-FS/FAT/fs_fat_lfn.c ****             if (*p_err != FS_ERR_NONE) {
 3542              		.loc 1 1017 13 is_stmt 1 view .LVU1302
 3543 00f8 4146     		mov	r1, r8
 3544 00fa 3846     		mov	r0, r7
ARM GAS  /tmp/ccu2ENwm.s 			page 135


 3545 00fc FFF7FEFF 		bl	FSBuf_MarkDirty
 3546              	.LVL415:
1018:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 return;
 3547              		.loc 1 1018 13 view .LVU1303
1018:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 return;
 3548              		.loc 1 1018 17 is_stmt 0 view .LVU1304
 3549 0100 B8F80030 		ldrh	r3, [r8]
1018:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 return;
 3550              		.loc 1 1018 16 view .LVU1305
 3551 0104 002B     		cmp	r3, #0
 3552 0106 C8D1     		bne	.L227
1025:rtos/uC-FS/FAT/fs_fat_lfn.c ****             p_dir_entry        += FS_FAT_SIZE_DIR_ENTRY;
 3553              		.loc 1 1025 13 is_stmt 1 view .LVU1306
1025:rtos/uC-FS/FAT/fs_fat_lfn.c ****             p_dir_entry        += FS_FAT_SIZE_DIR_ENTRY;
 3554              		.loc 1 1025 32 is_stmt 0 view .LVU1307
 3555 0108 039B     		ldr	r3, [sp, #12]
 3556 010a 2033     		adds	r3, r3, #32
 3557 010c 0393     		str	r3, [sp, #12]
1026:rtos/uC-FS/FAT/fs_fat_lfn.c ****         }
 3558              		.loc 1 1026 13 is_stmt 1 view .LVU1308
1026:rtos/uC-FS/FAT/fs_fat_lfn.c ****         }
 3559              		.loc 1 1026 32 is_stmt 0 view .LVU1309
 3560 010e 09F12009 		add	r9, r9, #32
 3561              	.LVL416:
1026:rtos/uC-FS/FAT/fs_fat_lfn.c ****         }
 3562              		.loc 1 1026 32 view .LVU1310
 3563 0112 A4E7     		b	.L230
 3564              		.cfi_endproc
 3565              	.LFE2:
 3567              		.section	.text.FS_FAT_LFN_DirEntryCreateAt,"ax",%progbits
 3568              		.align	1
 3569              		.syntax unified
 3570              		.thumb
 3571              		.thumb_func
 3572              		.fpu fpv4-sp-d16
 3574              	FS_FAT_LFN_DirEntryCreateAt:
 3575              	.LVL417:
 3576              	.LFB1:
 691:rtos/uC-FS/FAT/fs_fat_lfn.c ****     FS_FAT_DATA           *p_fat_data;
 3577              		.loc 1 691 1 is_stmt 1 view -0
 3578              		.cfi_startproc
 3579              		@ args = 24, pretend = 0, frame = 16
 3580              		@ frame_needed = 0, uses_anonymous_args = 0
 691:rtos/uC-FS/FAT/fs_fat_lfn.c ****     FS_FAT_DATA           *p_fat_data;
 3581              		.loc 1 691 1 is_stmt 0 view .LVU1312
 3582 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 3583              	.LCFI36:
 3584              		.cfi_def_cfa_offset 36
 3585              		.cfi_offset 4, -36
 3586              		.cfi_offset 5, -32
 3587              		.cfi_offset 6, -28
 3588              		.cfi_offset 7, -24
 3589              		.cfi_offset 8, -20
 3590              		.cfi_offset 9, -16
 3591              		.cfi_offset 10, -12
 3592              		.cfi_offset 11, -8
 3593              		.cfi_offset 14, -4
ARM GAS  /tmp/ccu2ENwm.s 			page 136


 3594 0004 87B0     		sub	sp, sp, #28
 3595              	.LCFI37:
 3596              		.cfi_def_cfa_offset 64
 3597 0006 0390     		str	r0, [sp, #12]
 3598 0008 8A46     		mov	r10, r1
 3599 000a 1D46     		mov	r5, r3
 3600 000c DDF85490 		ldr	r9, [sp, #84]
 692:rtos/uC-FS/FAT/fs_fat_lfn.c ****     CPU_INT08U            *p_dir_entry;
 3601              		.loc 1 692 5 is_stmt 1 view .LVU1313
 693:rtos/uC-FS/FAT/fs_fat_lfn.c ****     FS_FILE_NAME_LEN       char_cnt;
 3602              		.loc 1 693 5 view .LVU1314
 694:rtos/uC-FS/FAT/fs_fat_lfn.c ****     FS_FILE_NAME_LEN       char_cnt_wr;
 3603              		.loc 1 694 5 view .LVU1315
 695:rtos/uC-FS/FAT/fs_fat_lfn.c ****     CPU_INT08U             chk_sum;
 3604              		.loc 1 695 5 view .LVU1316
 696:rtos/uC-FS/FAT/fs_fat_lfn.c ****     FS_FAT_DIR_POS         dir_cur_pos;
 3605              		.loc 1 696 5 view .LVU1317
 697:rtos/uC-FS/FAT/fs_fat_lfn.c ****     FS_FAT_DIR_ENTRY_QTY   dir_entry_cnt;
 3606              		.loc 1 697 5 view .LVU1318
 698:rtos/uC-FS/FAT/fs_fat_lfn.c ****     CPU_BOOLEAN            is_final;
 3607              		.loc 1 698 5 view .LVU1319
 699:rtos/uC-FS/FAT/fs_fat_lfn.c **** #if (FS_CFG_UTF8_EN == DEF_ENABLED)
 3608              		.loc 1 699 5 view .LVU1320
 704:rtos/uC-FS/FAT/fs_fat_lfn.c **** #ifdef FS_FAT_JOURNAL_MODULE_PRESENT
 3609              		.loc 1 704 5 view .LVU1321
 710:rtos/uC-FS/FAT/fs_fat_lfn.c ****     p_dir_end_pos->SecPos =  0u;
 3610              		.loc 1 710 5 view .LVU1322
 710:rtos/uC-FS/FAT/fs_fat_lfn.c ****     p_dir_end_pos->SecPos =  0u;
 3611              		.loc 1 710 27 is_stmt 0 view .LVU1323
 3612 0010 0023     		movs	r3, #0
 3613              	.LVL418:
 710:rtos/uC-FS/FAT/fs_fat_lfn.c ****     p_dir_end_pos->SecPos =  0u;
 3614              		.loc 1 710 27 view .LVU1324
 3615 0012 1499     		ldr	r1, [sp, #80]
 3616              	.LVL419:
 710:rtos/uC-FS/FAT/fs_fat_lfn.c ****     p_dir_end_pos->SecPos =  0u;
 3617              		.loc 1 710 27 view .LVU1325
 3618 0014 0B60     		str	r3, [r1]
 711:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 3619              		.loc 1 711 5 is_stmt 1 view .LVU1326
 711:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 3620              		.loc 1 711 27 is_stmt 0 view .LVU1327
 3621 0016 4B60     		str	r3, [r1, #4]
 713:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 3622              		.loc 1 713 5 is_stmt 1 view .LVU1328
 713:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 3623              		.loc 1 713 27 is_stmt 0 view .LVU1329
 3624 0018 D0F834B0 		ldr	fp, [r0, #52]
 3625              	.LVL420:
 717:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 3626              		.loc 1 717 5 is_stmt 1 view .LVU1330
 726:rtos/uC-FS/FAT/fs_fat_lfn.c **** #endif
 3627              		.loc 1 726 5 view .LVU1331
 730:rtos/uC-FS/FAT/fs_fat_lfn.c ****     p_name_create += char_cnt;                                  /* Move to end of file name.       
 3628              		.loc 1 730 5 view .LVU1332
 730:rtos/uC-FS/FAT/fs_fat_lfn.c ****     p_name_create += char_cnt;                                  /* Move to end of file name.       
 3629              		.loc 1 730 85 is_stmt 0 view .LVU1333
ARM GAS  /tmp/ccu2ENwm.s 			page 137


 3630 001c 05F10C04 		add	r4, r5, #12
 730:rtos/uC-FS/FAT/fs_fat_lfn.c ****     p_name_create += char_cnt;                                  /* Move to end of file name.       
 3631              		.loc 1 730 91 view .LVU1334
 3632 0020 404F     		ldr	r7, .L260
 3633 0022 A7FB0434 		umull	r3, r4, r7, r4
 730:rtos/uC-FS/FAT/fs_fat_lfn.c ****     p_name_create += char_cnt;                                  /* Move to end of file name.       
 3634              		.loc 1 730 20 view .LVU1335
 3635 0026 C4F38704 		ubfx	r4, r4, #2, #8
 3636              	.LVL421:
 731:rtos/uC-FS/FAT/fs_fat_lfn.c ****     is_final       = DEF_YES;
 3637              		.loc 1 731 5 is_stmt 1 view .LVU1336
 731:rtos/uC-FS/FAT/fs_fat_lfn.c ****     is_final       = DEF_YES;
 3638              		.loc 1 731 19 is_stmt 0 view .LVU1337
 3639 002a 5619     		adds	r6, r2, r5
 3640              	.LVL422:
 732:rtos/uC-FS/FAT/fs_fat_lfn.c ****     chk_sum        = FS_FAT_LFN_ChkSumCalc((void *)name_8_3);
 3641              		.loc 1 732 5 is_stmt 1 view .LVU1338
 733:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 3642              		.loc 1 733 5 view .LVU1339
 733:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 3643              		.loc 1 733 22 is_stmt 0 view .LVU1340
 3644 002c 1098     		ldr	r0, [sp, #64]
 3645              	.LVL423:
 733:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 3646              		.loc 1 733 22 view .LVU1341
 3647 002e FFF7FEFF 		bl	FS_FAT_LFN_ChkSumCalc
 3648              	.LVL424:
 733:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 3649              		.loc 1 733 22 view .LVU1342
 3650 0032 8046     		mov	r8, r0
 3651              	.LVL425:
 735:rtos/uC-FS/FAT/fs_fat_lfn.c ****     if (char_cnt_wr == 0u) {
 3652              		.loc 1 735 5 is_stmt 1 view .LVU1343
 735:rtos/uC-FS/FAT/fs_fat_lfn.c ****     if (char_cnt_wr == 0u) {
 3653              		.loc 1 735 20 is_stmt 0 view .LVU1344
 3654 0034 A7FB0537 		umull	r3, r7, r7, r5
 3655 0038 BF08     		lsrs	r7, r7, #2
 3656 003a 07EB4703 		add	r3, r7, r7, lsl #1
 3657 003e 07EB8307 		add	r7, r7, r3, lsl #2
 3658 0042 ED1B     		subs	r5, r5, r7
 3659              	.LVL426:
 735:rtos/uC-FS/FAT/fs_fat_lfn.c ****     if (char_cnt_wr == 0u) {
 3660              		.loc 1 735 20 view .LVU1345
 3661 0044 ADB2     		uxth	r5, r5
 3662              	.LVL427:
 736:rtos/uC-FS/FAT/fs_fat_lfn.c ****         char_cnt_wr =  FS_FAT_DIRENT_LFN_NBR_CHARS;
 3663              		.loc 1 736 5 is_stmt 1 view .LVU1346
 736:rtos/uC-FS/FAT/fs_fat_lfn.c ****         char_cnt_wr =  FS_FAT_DIRENT_LFN_NBR_CHARS;
 3664              		.loc 1 736 8 is_stmt 0 view .LVU1347
 3665 0046 05B9     		cbnz	r5, .L248
 737:rtos/uC-FS/FAT/fs_fat_lfn.c ****     }
 3666              		.loc 1 737 21 view .LVU1348
 3667 0048 0D25     		movs	r5, #13
 3668              	.LVL428:
 3669              	.L248:
 789:rtos/uC-FS/FAT/fs_fat_lfn.c ****     dir_cur_pos.SecPos =  p_dir_pos->SecPos;
 3670              		.loc 1 789 5 is_stmt 1 view .LVU1349
ARM GAS  /tmp/ccu2ENwm.s 			page 138


 789:rtos/uC-FS/FAT/fs_fat_lfn.c ****     dir_cur_pos.SecPos =  p_dir_pos->SecPos;
 3671              		.loc 1 789 36 is_stmt 0 view .LVU1350
 3672 004a 139B     		ldr	r3, [sp, #76]
 3673 004c 1968     		ldr	r1, [r3]
 789:rtos/uC-FS/FAT/fs_fat_lfn.c ****     dir_cur_pos.SecPos =  p_dir_pos->SecPos;
 3674              		.loc 1 789 24 view .LVU1351
 3675 004e 0491     		str	r1, [sp, #16]
 790:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 3676              		.loc 1 790 5 is_stmt 1 view .LVU1352
 790:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 3677              		.loc 1 790 36 is_stmt 0 view .LVU1353
 3678 0050 5F68     		ldr	r7, [r3, #4]
 790:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 3679              		.loc 1 790 24 view .LVU1354
 3680 0052 0597     		str	r7, [sp, #20]
 792:rtos/uC-FS/FAT/fs_fat_lfn.c ****               dir_cur_pos.SecNbr,
 3681              		.loc 1 792 5 is_stmt 1 view .LVU1355
 3682 0054 CDF80090 		str	r9, [sp]
 3683 0058 0123     		movs	r3, #1
 3684 005a 0222     		movs	r2, #2
 3685 005c 5046     		mov	r0, r10
 3686 005e FFF7FEFF 		bl	FSBuf_Set
 3687              	.LVL429:
 797:rtos/uC-FS/FAT/fs_fat_lfn.c ****         return;
 3688              		.loc 1 797 5 view .LVU1356
 797:rtos/uC-FS/FAT/fs_fat_lfn.c ****         return;
 3689              		.loc 1 797 9 is_stmt 0 view .LVU1357
 3690 0062 B9F80030 		ldrh	r3, [r9]
 797:rtos/uC-FS/FAT/fs_fat_lfn.c ****         return;
 3691              		.loc 1 797 8 view .LVU1358
 3692 0066 002B     		cmp	r3, #0
 3693 0068 42D1     		bne	.L247
 801:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 3694              		.loc 1 801 5 is_stmt 1 view .LVU1359
 801:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 3695              		.loc 1 801 45 is_stmt 0 view .LVU1360
 3696 006a DAF81030 		ldr	r3, [r10, #16]
 801:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 3697              		.loc 1 801 24 view .LVU1361
 3698 006e 1F44     		add	r7, r7, r3
 3699              	.LVL430:
 803:rtos/uC-FS/FAT/fs_fat_lfn.c ****         p_name_create -= char_cnt_wr;
 3700              		.loc 1 803 5 is_stmt 1 view .LVU1362
 732:rtos/uC-FS/FAT/fs_fat_lfn.c ****     chk_sum        = FS_FAT_LFN_ChkSumCalc((void *)name_8_3);
 3701              		.loc 1 732 20 is_stmt 0 view .LVU1363
 3702 0070 0123     		movs	r3, #1
 3703 0072 2A46     		mov	r2, r5
 3704 0074 4D46     		mov	r5, r9
 3705              	.LVL431:
 803:rtos/uC-FS/FAT/fs_fat_lfn.c ****         p_name_create -= char_cnt_wr;
 3706              		.loc 1 803 11 view .LVU1364
 3707 0076 11E0     		b	.L250
 3708              	.LVL432:
 3709              	.L252:
 845:rtos/uC-FS/FAT/fs_fat_lfn.c ****                      return;
 3710              		.loc 1 845 21 is_stmt 1 view .LVU1365
 845:rtos/uC-FS/FAT/fs_fat_lfn.c ****                      return;
ARM GAS  /tmp/ccu2ENwm.s 			page 139


 3711              		.loc 1 845 28 is_stmt 0 view .LVU1366
 3712 0078 40F2BF23 		movw	r3, #703
 3713 007c 2B80     		strh	r3, [r5]	@ movhi
 846:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 3714              		.loc 1 846 22 is_stmt 1 view .LVU1367
 3715 007e 37E0     		b	.L247
 3716              	.L259:
 836:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 3717              		.loc 1 836 22 view .LVU1368
 853:rtos/uC-FS/FAT/fs_fat_lfn.c ****                       dir_cur_pos.SecNbr,
 3718              		.loc 1 853 13 view .LVU1369
 3719 0080 0095     		str	r5, [sp]
 3720 0082 0123     		movs	r3, #1
 3721 0084 0222     		movs	r2, #2
 3722 0086 0146     		mov	r1, r0
 3723 0088 5046     		mov	r0, r10
 3724 008a FFF7FEFF 		bl	FSBuf_Set
 3725              	.LVL433:
 858:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 return;
 3726              		.loc 1 858 13 view .LVU1370
 858:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 return;
 3727              		.loc 1 858 17 is_stmt 0 view .LVU1371
 3728 008e 2B88     		ldrh	r3, [r5]
 858:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 return;
 3729              		.loc 1 858 16 view .LVU1372
 3730 0090 73BB     		cbnz	r3, .L247
 862:rtos/uC-FS/FAT/fs_fat_lfn.c ****             dir_cur_pos.SecPos = 0u;
 3731              		.loc 1 862 13 is_stmt 1 view .LVU1373
 862:rtos/uC-FS/FAT/fs_fat_lfn.c ****             dir_cur_pos.SecPos = 0u;
 3732              		.loc 1 862 32 is_stmt 0 view .LVU1374
 3733 0092 DAF81070 		ldr	r7, [r10, #16]
 3734              	.LVL434:
 863:rtos/uC-FS/FAT/fs_fat_lfn.c ****         }
 3735              		.loc 1 863 13 is_stmt 1 view .LVU1375
 863:rtos/uC-FS/FAT/fs_fat_lfn.c ****         }
 3736              		.loc 1 863 32 is_stmt 0 view .LVU1376
 3737 0096 0593     		str	r3, [sp, #20]
 3738              	.L251:
 737:rtos/uC-FS/FAT/fs_fat_lfn.c ****     }
 3739              		.loc 1 737 21 view .LVU1377
 3740 0098 0023     		movs	r3, #0
 3741 009a 0D22     		movs	r2, #13
 3742              	.LVL435:
 3743              	.L250:
 803:rtos/uC-FS/FAT/fs_fat_lfn.c ****         p_name_create -= char_cnt_wr;
 3744              		.loc 1 803 11 is_stmt 1 view .LVU1378
 3745 009c 5CB3     		cbz	r4, .L258
 804:rtos/uC-FS/FAT/fs_fat_lfn.c ****         char_cnt      -= char_cnt_wr;
 3746              		.loc 1 804 9 view .LVU1379
 804:rtos/uC-FS/FAT/fs_fat_lfn.c ****         char_cnt      -= char_cnt_wr;
 3747              		.loc 1 804 23 is_stmt 0 view .LVU1380
 3748 009e B61A     		subs	r6, r6, r2
 3749              	.LVL436:
 805:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 3750              		.loc 1 805 9 is_stmt 1 view .LVU1381
 807:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                        p_name_create,
 3751              		.loc 1 807 9 view .LVU1382
ARM GAS  /tmp/ccu2ENwm.s 			page 140


 3752 00a0 0193     		str	r3, [sp, #4]
 3753 00a2 0094     		str	r4, [sp]
 3754 00a4 4346     		mov	r3, r8
 3755              	.LVL437:
 807:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                        p_name_create,
 3756              		.loc 1 807 9 is_stmt 0 view .LVU1383
 3757 00a6 3146     		mov	r1, r6
 3758 00a8 3846     		mov	r0, r7
 3759 00aa FFF7FEFF 		bl	FS_FAT_LFN_DirEntryFmt
 3760              	.LVL438:
 815:rtos/uC-FS/FAT/fs_fat_lfn.c ****         is_final    = DEF_NO;
 3761              		.loc 1 815 9 is_stmt 1 view .LVU1384
 816:rtos/uC-FS/FAT/fs_fat_lfn.c ****         dir_entry_cnt--;
 3762              		.loc 1 816 9 view .LVU1385
 817:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 3763              		.loc 1 817 9 view .LVU1386
 817:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 3764              		.loc 1 817 22 is_stmt 0 view .LVU1387
 3765 00ae 013C     		subs	r4, r4, #1
 3766              	.LVL439:
 817:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 3767              		.loc 1 817 22 view .LVU1388
 3768 00b0 E4B2     		uxtb	r4, r4
 3769              	.LVL440:
 819:rtos/uC-FS/FAT/fs_fat_lfn.c ****         dir_cur_pos.SecPos += FS_FAT_SIZE_DIR_ENTRY;
 3770              		.loc 1 819 9 is_stmt 1 view .LVU1389
 819:rtos/uC-FS/FAT/fs_fat_lfn.c ****         dir_cur_pos.SecPos += FS_FAT_SIZE_DIR_ENTRY;
 3771              		.loc 1 819 28 is_stmt 0 view .LVU1390
 3772 00b2 2037     		adds	r7, r7, #32
 3773              	.LVL441:
 820:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 3774              		.loc 1 820 9 is_stmt 1 view .LVU1391
 820:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 3775              		.loc 1 820 28 is_stmt 0 view .LVU1392
 3776 00b4 059B     		ldr	r3, [sp, #20]
 3777 00b6 2033     		adds	r3, r3, #32
 3778 00b8 0593     		str	r3, [sp, #20]
 822:rtos/uC-FS/FAT/fs_fat_lfn.c ****             FSBuf_MarkDirty(p_buf, p_err);                      /* Wr updated dir sec.             
 3779              		.loc 1 822 9 is_stmt 1 view .LVU1393
 822:rtos/uC-FS/FAT/fs_fat_lfn.c ****             FSBuf_MarkDirty(p_buf, p_err);                      /* Wr updated dir sec.             
 3780              		.loc 1 822 45 is_stmt 0 view .LVU1394
 3781 00ba DBF83420 		ldr	r2, [fp, #52]
 822:rtos/uC-FS/FAT/fs_fat_lfn.c ****             FSBuf_MarkDirty(p_buf, p_err);                      /* Wr updated dir sec.             
 3782              		.loc 1 822 12 view .LVU1395
 3783 00be 9342     		cmp	r3, r2
 3784 00c0 EAD1     		bne	.L251
 823:rtos/uC-FS/FAT/fs_fat_lfn.c ****             if (*p_err != FS_ERR_NONE) {
 3785              		.loc 1 823 13 is_stmt 1 view .LVU1396
 3786 00c2 2946     		mov	r1, r5
 3787 00c4 5046     		mov	r0, r10
 3788 00c6 FFF7FEFF 		bl	FSBuf_MarkDirty
 3789              	.LVL442:
 824:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 return;
 3790              		.loc 1 824 13 view .LVU1397
 824:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 return;
 3791              		.loc 1 824 17 is_stmt 0 view .LVU1398
 3792 00ca 2B88     		ldrh	r3, [r5]
ARM GAS  /tmp/ccu2ENwm.s 			page 141


 824:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 return;
 3793              		.loc 1 824 16 view .LVU1399
 3794 00cc 83B9     		cbnz	r3, .L247
 829:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                    p_buf,
 3795              		.loc 1 829 13 is_stmt 1 view .LVU1400
 829:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                    p_buf,
 3796              		.loc 1 829 34 is_stmt 0 view .LVU1401
 3797 00ce 2B46     		mov	r3, r5
 3798 00d0 049A     		ldr	r2, [sp, #16]
 3799 00d2 5146     		mov	r1, r10
 3800 00d4 0398     		ldr	r0, [sp, #12]
 3801 00d6 FFF7FEFF 		bl	FS_FAT_SecNextGet
 3802              	.LVL443:
 829:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                    p_buf,
 3803              		.loc 1 829 32 view .LVU1402
 3804 00da 0490     		str	r0, [sp, #16]
 834:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 case FS_ERR_NONE:
 3805              		.loc 1 834 13 is_stmt 1 view .LVU1403
 834:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 case FS_ERR_NONE:
 3806              		.loc 1 834 21 is_stmt 0 view .LVU1404
 3807 00dc 2B88     		ldrh	r3, [r5]
 834:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 case FS_ERR_NONE:
 3808              		.loc 1 834 13 view .LVU1405
 3809 00de 40F23652 		movw	r2, #1334
 3810 00e2 9342     		cmp	r3, r2
 3811 00e4 C8D0     		beq	.L252
 3812 00e6 B3F5A76F 		cmp	r3, #1336
 3813 00ea C5D0     		beq	.L252
 3814 00ec 002B     		cmp	r3, #0
 3815 00ee C7D0     		beq	.L259
 3816              	.LVL444:
 3817              	.L247:
 883:rtos/uC-FS/FAT/fs_fat_lfn.c **** #endif
 3818              		.loc 1 883 1 view .LVU1406
 3819 00f0 07B0     		add	sp, sp, #28
 3820              	.LCFI38:
 3821              		.cfi_remember_state
 3822              		.cfi_def_cfa_offset 36
 3823              		@ sp needed
 3824 00f2 BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 3825              	.LVL445:
 3826              	.L258:
 3827              	.LCFI39:
 3828              		.cfi_restore_state
 869:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                    name_8_3,
 3829              		.loc 1 869 5 is_stmt 1 view .LVU1407
 3830 00f6 0023     		movs	r3, #0
 3831              	.LVL446:
 869:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                    name_8_3,
 3832              		.loc 1 869 5 is_stmt 0 view .LVU1408
 3833 00f8 0193     		str	r3, [sp, #4]
 3834 00fa 0093     		str	r3, [sp]
 3835 00fc 129B     		ldr	r3, [sp, #72]
 3836 00fe 9DF84420 		ldrb	r2, [sp, #68]	@ zero_extendqisi2
 3837              	.LVL447:
 869:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                    name_8_3,
 3838              		.loc 1 869 5 view .LVU1409
ARM GAS  /tmp/ccu2ENwm.s 			page 142


 3839 0102 1099     		ldr	r1, [sp, #64]
 3840 0104 3846     		mov	r0, r7
 3841 0106 FFF7FEFF 		bl	FS_FAT_SFN_DirEntryFmt
 3842              	.LVL448:
 876:rtos/uC-FS/FAT/fs_fat_lfn.c ****     if (*p_err != FS_ERR_NONE) {
 3843              		.loc 1 876 5 is_stmt 1 view .LVU1410
 3844 010a 2946     		mov	r1, r5
 3845 010c 5046     		mov	r0, r10
 3846 010e FFF7FEFF 		bl	FSBuf_MarkDirty
 3847              	.LVL449:
 877:rtos/uC-FS/FAT/fs_fat_lfn.c ****         return;
 3848              		.loc 1 877 5 view .LVU1411
 877:rtos/uC-FS/FAT/fs_fat_lfn.c ****         return;
 3849              		.loc 1 877 9 is_stmt 0 view .LVU1412
 3850 0112 2B88     		ldrh	r3, [r5]
 877:rtos/uC-FS/FAT/fs_fat_lfn.c ****         return;
 3851              		.loc 1 877 8 view .LVU1413
 3852 0114 002B     		cmp	r3, #0
 3853 0116 EBD1     		bne	.L247
 881:rtos/uC-FS/FAT/fs_fat_lfn.c ****     p_dir_end_pos->SecPos = dir_cur_pos.SecPos;
 3854              		.loc 1 881 5 is_stmt 1 view .LVU1414
 881:rtos/uC-FS/FAT/fs_fat_lfn.c ****     p_dir_end_pos->SecPos = dir_cur_pos.SecPos;
 3855              		.loc 1 881 40 is_stmt 0 view .LVU1415
 3856 0118 049B     		ldr	r3, [sp, #16]
 881:rtos/uC-FS/FAT/fs_fat_lfn.c ****     p_dir_end_pos->SecPos = dir_cur_pos.SecPos;
 3857              		.loc 1 881 27 view .LVU1416
 3858 011a 149A     		ldr	r2, [sp, #80]
 3859 011c 1360     		str	r3, [r2]
 882:rtos/uC-FS/FAT/fs_fat_lfn.c **** }
 3860              		.loc 1 882 5 is_stmt 1 view .LVU1417
 882:rtos/uC-FS/FAT/fs_fat_lfn.c **** }
 3861              		.loc 1 882 40 is_stmt 0 view .LVU1418
 3862 011e 059B     		ldr	r3, [sp, #20]
 882:rtos/uC-FS/FAT/fs_fat_lfn.c **** }
 3863              		.loc 1 882 27 view .LVU1419
 3864 0120 5360     		str	r3, [r2, #4]
 3865 0122 E5E7     		b	.L247
 3866              	.L261:
 3867              		.align	2
 3868              	.L260:
 3869 0124 4FECC44E 		.word	1321528399
 3870              		.cfi_endproc
 3871              	.LFE1:
 3873              		.section	.text.FS_FAT_LFN_DirEntryPlace,"ax",%progbits
 3874              		.align	1
 3875              		.syntax unified
 3876              		.thumb
 3877              		.thumb_func
 3878              		.fpu fpv4-sp-d16
 3880              	FS_FAT_LFN_DirEntryPlace:
 3881              	.LVL450:
 3882              	.LFB8:
1975:rtos/uC-FS/FAT/fs_fat_lfn.c ****     CPU_BOOLEAN            chk;
 3883              		.loc 1 1975 1 is_stmt 1 view -0
 3884              		.cfi_startproc
 3885              		@ args = 8, pretend = 0, frame = 24
 3886              		@ frame_needed = 0, uses_anonymous_args = 0
ARM GAS  /tmp/ccu2ENwm.s 			page 143


1975:rtos/uC-FS/FAT/fs_fat_lfn.c ****     CPU_BOOLEAN            chk;
 3887              		.loc 1 1975 1 is_stmt 0 view .LVU1421
 3888 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 3889              	.LCFI40:
 3890              		.cfi_def_cfa_offset 36
 3891              		.cfi_offset 4, -36
 3892              		.cfi_offset 5, -32
 3893              		.cfi_offset 6, -28
 3894              		.cfi_offset 7, -24
 3895              		.cfi_offset 8, -20
 3896              		.cfi_offset 9, -16
 3897              		.cfi_offset 10, -12
 3898              		.cfi_offset 11, -8
 3899              		.cfi_offset 14, -4
 3900 0004 89B0     		sub	sp, sp, #36
 3901              	.LCFI41:
 3902              		.cfi_def_cfa_offset 72
 3903 0006 8346     		mov	fp, r0
 3904 0008 8846     		mov	r8, r1
 3905 000a 1646     		mov	r6, r2
 3906 000c DDF848A0 		ldr	r10, [sp, #72]
 3907 0010 DDF84C90 		ldr	r9, [sp, #76]
1976:rtos/uC-FS/FAT/fs_fat_lfn.c ****     FS_FAT_DIR_POS         dir_cur_pos;
 3908              		.loc 1 1976 5 is_stmt 1 view .LVU1422
1977:rtos/uC-FS/FAT/fs_fat_lfn.c ****     FS_FAT_DIR_POS         dir_cur_start_pos;
 3909              		.loc 1 1977 5 view .LVU1423
1978:rtos/uC-FS/FAT/fs_fat_lfn.c ****     FS_FAT_DIR_ENTRY_QTY   dir_entry_free_cnt;
 3910              		.loc 1 1978 5 view .LVU1424
1979:rtos/uC-FS/FAT/fs_fat_lfn.c ****     CPU_BOOLEAN            dir_sec_valid;
 3911              		.loc 1 1979 5 view .LVU1425
1980:rtos/uC-FS/FAT/fs_fat_lfn.c ****     CPU_INT08U            *p_dir_entry;
 3912              		.loc 1 1980 5 view .LVU1426
1981:rtos/uC-FS/FAT/fs_fat_lfn.c ****     FS_FAT_DATA           *p_fat_data;
 3913              		.loc 1 1981 5 view .LVU1427
1982:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 3914              		.loc 1 1982 5 view .LVU1428
1985:rtos/uC-FS/FAT/fs_fat_lfn.c ****     p_dir_end_pos->SecPos    =  0u;
 3915              		.loc 1 1985 5 view .LVU1429
1985:rtos/uC-FS/FAT/fs_fat_lfn.c ****     p_dir_end_pos->SecPos    =  0u;
 3916              		.loc 1 1985 30 is_stmt 0 view .LVU1430
 3917 0014 0022     		movs	r2, #0
 3918              	.LVL451:
1985:rtos/uC-FS/FAT/fs_fat_lfn.c ****     p_dir_end_pos->SecPos    =  0u;
 3919              		.loc 1 1985 30 view .LVU1431
 3920 0016 CAF80020 		str	r2, [r10]
1986:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 3921              		.loc 1 1986 5 is_stmt 1 view .LVU1432
1986:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 3922              		.loc 1 1986 30 is_stmt 0 view .LVU1433
 3923 001a CAF80420 		str	r2, [r10, #4]
1988:rtos/uC-FS/FAT/fs_fat_lfn.c ****     dir_entry_free_cnt       =  0u;
 3924              		.loc 1 1988 5 is_stmt 1 view .LVU1434
1988:rtos/uC-FS/FAT/fs_fat_lfn.c ****     dir_entry_free_cnt       =  0u;
 3925              		.loc 1 1988 30 is_stmt 0 view .LVU1435
 3926 001e 456B     		ldr	r5, [r0, #52]
 3927              	.LVL452:
1989:rtos/uC-FS/FAT/fs_fat_lfn.c ****     dir_cur_pos.SecNbr       =  dir_start_sec;
ARM GAS  /tmp/ccu2ENwm.s 			page 144


 3928              		.loc 1 1989 5 is_stmt 1 view .LVU1436
1990:rtos/uC-FS/FAT/fs_fat_lfn.c ****     dir_cur_pos.SecPos       =  0u;
 3929              		.loc 1 1990 5 view .LVU1437
1990:rtos/uC-FS/FAT/fs_fat_lfn.c ****     dir_cur_pos.SecPos       =  0u;
 3930              		.loc 1 1990 30 is_stmt 0 view .LVU1438
 3931 0020 0693     		str	r3, [sp, #24]
1991:rtos/uC-FS/FAT/fs_fat_lfn.c ****     dir_cur_start_pos.SecNbr =  0u;
 3932              		.loc 1 1991 5 is_stmt 1 view .LVU1439
1992:rtos/uC-FS/FAT/fs_fat_lfn.c ****     dir_cur_start_pos.SecPos =  0u;
 3933              		.loc 1 1992 5 view .LVU1440
1992:rtos/uC-FS/FAT/fs_fat_lfn.c ****     dir_cur_start_pos.SecPos =  0u;
 3934              		.loc 1 1992 30 is_stmt 0 view .LVU1441
 3935 0022 0492     		str	r2, [sp, #16]
1993:rtos/uC-FS/FAT/fs_fat_lfn.c ****     dir_sec_valid            =  FS_FAT_IS_VALID_SEC(p_fat_data, dir_cur_pos.SecNbr);
 3936              		.loc 1 1993 5 is_stmt 1 view .LVU1442
1993:rtos/uC-FS/FAT/fs_fat_lfn.c ****     dir_sec_valid            =  FS_FAT_IS_VALID_SEC(p_fat_data, dir_cur_pos.SecNbr);
 3937              		.loc 1 1993 30 is_stmt 0 view .LVU1443
 3938 0024 0592     		str	r2, [sp, #20]
1994:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 3939              		.loc 1 1994 5 is_stmt 1 view .LVU1444
1994:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 3940              		.loc 1 1994 33 is_stmt 0 view .LVU1445
 3941 0026 AA6A     		ldr	r2, [r5, #40]
1994:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 3942              		.loc 1 1994 30 view .LVU1446
 3943 0028 9A42     		cmp	r2, r3
 3944 002a 4BD8     		bhi	.L274
1994:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 3945              		.loc 1 1994 33 discriminator 1 view .LVU1447
 3946 002c A968     		ldr	r1, [r5, #8]
 3947              	.LVL453:
1994:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 3948              		.loc 1 1994 33 discriminator 1 view .LVU1448
 3949 002e 0A44     		add	r2, r2, r1
 3950 0030 2969     		ldr	r1, [r5, #16]
 3951 0032 0A44     		add	r2, r2, r1
 3952 0034 9A42     		cmp	r2, r3
 3953 0036 5BD2     		bcs	.L275
1994:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 3954              		.loc 1 1994 30 view .LVU1449
 3955 0038 0023     		movs	r3, #0
 3956              	.LVL454:
1994:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 3957              		.loc 1 1994 30 view .LVU1450
 3958 003a 0393     		str	r3, [sp, #12]
 3959 003c 44E0     		b	.L263
 3960              	.LVL455:
 3961              	.L266:
2022:rtos/uC-FS/FAT/fs_fat_lfn.c ****                         dir_cur_start_pos.SecNbr = dir_cur_pos.SecNbr;
 3962              		.loc 1 2022 21 is_stmt 1 view .LVU1451
2022:rtos/uC-FS/FAT/fs_fat_lfn.c ****                         dir_cur_start_pos.SecNbr = dir_cur_pos.SecNbr;
 3963              		.loc 1 2022 24 is_stmt 0 view .LVU1452
 3964 003e 0CB9     		cbnz	r4, .L268
2023:rtos/uC-FS/FAT/fs_fat_lfn.c ****                         dir_cur_start_pos.SecPos = dir_cur_pos.SecPos;
 3965              		.loc 1 2023 25 is_stmt 1 view .LVU1453
2023:rtos/uC-FS/FAT/fs_fat_lfn.c ****                         dir_cur_start_pos.SecPos = dir_cur_pos.SecPos;
 3966              		.loc 1 2023 50 is_stmt 0 view .LVU1454
ARM GAS  /tmp/ccu2ENwm.s 			page 145


 3967 0040 0497     		str	r7, [sp, #16]
2024:rtos/uC-FS/FAT/fs_fat_lfn.c ****                     }
 3968              		.loc 1 2024 25 is_stmt 1 view .LVU1455
2024:rtos/uC-FS/FAT/fs_fat_lfn.c ****                     }
 3969              		.loc 1 2024 50 is_stmt 0 view .LVU1456
 3970 0042 0593     		str	r3, [sp, #20]
 3971              	.L268:
2027:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 3972              		.loc 1 2027 21 is_stmt 1 view .LVU1457
2027:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 3973              		.loc 1 2027 39 is_stmt 0 view .LVU1458
 3974 0044 0134     		adds	r4, r4, #1
 3975              	.LVL456:
2027:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 3976              		.loc 1 2027 39 view .LVU1459
 3977 0046 E4B2     		uxtb	r4, r4
 3978              	.LVL457:
2029:rtos/uC-FS/FAT/fs_fat_lfn.c ****                         p_dir_end_pos->SecNbr = dir_cur_start_pos.SecNbr;
 3979              		.loc 1 2029 21 is_stmt 1 view .LVU1460
2029:rtos/uC-FS/FAT/fs_fat_lfn.c ****                         p_dir_end_pos->SecNbr = dir_cur_start_pos.SecNbr;
 3980              		.loc 1 2029 24 is_stmt 0 view .LVU1461
 3981 0048 B442     		cmp	r4, r6
 3982 004a 0DD2     		bcs	.L279
 3983              	.LVL458:
 3984              	.L267:
2038:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 dir_cur_pos.SecPos += FS_FAT_SIZE_DIR_ENTRY;
 3985              		.loc 1 2038 17 is_stmt 1 view .LVU1462
2038:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 dir_cur_pos.SecPos += FS_FAT_SIZE_DIR_ENTRY;
 3986              		.loc 1 2038 36 is_stmt 0 view .LVU1463
 3987 004c 2032     		adds	r2, r2, #32
 3988              	.LVL459:
2039:rtos/uC-FS/FAT/fs_fat_lfn.c ****             }
 3989              		.loc 1 2039 17 is_stmt 1 view .LVU1464
2039:rtos/uC-FS/FAT/fs_fat_lfn.c ****             }
 3990              		.loc 1 2039 36 is_stmt 0 view .LVU1465
 3991 004e 2033     		adds	r3, r3, #32
 3992 0050 0793     		str	r3, [sp, #28]
 3993              	.LVL460:
 3994              	.L265:
2017:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 3995              		.loc 1 2017 19 is_stmt 1 view .LVU1466
2017:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 3996              		.loc 1 2017 31 is_stmt 0 view .LVU1467
 3997 0052 079B     		ldr	r3, [sp, #28]
2017:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 3998              		.loc 1 2017 51 view .LVU1468
 3999 0054 696B     		ldr	r1, [r5, #52]
2017:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 4000              		.loc 1 2017 19 view .LVU1469
 4001 0056 8B42     		cmp	r3, r1
 4002 0058 0FD2     		bcs	.L280
2019:rtos/uC-FS/FAT/fs_fat_lfn.c ****                     (*p_dir_entry == FS_FAT_DIRENT_NAME_FREE)) {   /* Free entry found ... inc cnt.
 4003              		.loc 1 2019 17 is_stmt 1 view .LVU1470
2019:rtos/uC-FS/FAT/fs_fat_lfn.c ****                     (*p_dir_entry == FS_FAT_DIRENT_NAME_FREE)) {   /* Free entry found ... inc cnt.
 4004              		.loc 1 2019 22 is_stmt 0 view .LVU1471
 4005 005a 1178     		ldrb	r1, [r2]	@ zero_extendqisi2
2019:rtos/uC-FS/FAT/fs_fat_lfn.c ****                     (*p_dir_entry == FS_FAT_DIRENT_NAME_FREE)) {   /* Free entry found ... inc cnt.
ARM GAS  /tmp/ccu2ENwm.s 			page 146


 4006              		.loc 1 2019 20 view .LVU1472
 4007 005c E529     		cmp	r1, #229
 4008 005e EED0     		beq	.L266
2019:rtos/uC-FS/FAT/fs_fat_lfn.c ****                     (*p_dir_entry == FS_FAT_DIRENT_NAME_FREE)) {   /* Free entry found ... inc cnt.
 4009              		.loc 1 2019 74 discriminator 1 view .LVU1473
 4010 0060 0029     		cmp	r1, #0
 4011 0062 ECD0     		beq	.L266
2035:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 }
 4012              		.loc 1 2035 40 view .LVU1474
 4013 0064 0024     		movs	r4, #0
 4014              	.LVL461:
2035:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 }
 4015              		.loc 1 2035 40 view .LVU1475
 4016 0066 F1E7     		b	.L267
 4017              	.LVL462:
 4018              	.L279:
2030:rtos/uC-FS/FAT/fs_fat_lfn.c ****                         p_dir_end_pos->SecPos = dir_cur_start_pos.SecPos;
 4019              		.loc 1 2030 25 is_stmt 1 view .LVU1476
2030:rtos/uC-FS/FAT/fs_fat_lfn.c ****                         p_dir_end_pos->SecPos = dir_cur_start_pos.SecPos;
 4020              		.loc 1 2030 66 is_stmt 0 view .LVU1477
 4021 0068 049B     		ldr	r3, [sp, #16]
2030:rtos/uC-FS/FAT/fs_fat_lfn.c ****                         p_dir_end_pos->SecPos = dir_cur_start_pos.SecPos;
 4022              		.loc 1 2030 47 view .LVU1478
 4023 006a CAF80030 		str	r3, [r10]
2031:rtos/uC-FS/FAT/fs_fat_lfn.c ****                         return;
 4024              		.loc 1 2031 25 is_stmt 1 view .LVU1479
2031:rtos/uC-FS/FAT/fs_fat_lfn.c ****                         return;
 4025              		.loc 1 2031 66 is_stmt 0 view .LVU1480
 4026 006e 059B     		ldr	r3, [sp, #20]
2031:rtos/uC-FS/FAT/fs_fat_lfn.c ****                         return;
 4027              		.loc 1 2031 47 view .LVU1481
 4028 0070 CAF80430 		str	r3, [r10, #4]
2032:rtos/uC-FS/FAT/fs_fat_lfn.c ****                     }
 4029              		.loc 1 2032 25 is_stmt 1 view .LVU1482
 4030              	.LVL463:
 4031              	.L262:
2078:rtos/uC-FS/FAT/fs_fat_lfn.c **** #endif
 4032              		.loc 1 2078 1 is_stmt 0 view .LVU1483
 4033 0074 09B0     		add	sp, sp, #36
 4034              	.LCFI42:
 4035              		.cfi_remember_state
 4036              		.cfi_def_cfa_offset 36
 4037              		@ sp needed
 4038 0076 BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 4039              	.LVL464:
 4040              	.L280:
 4041              	.LCFI43:
 4042              		.cfi_restore_state
2046:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                     p_buf,
 4043              		.loc 1 2046 9 is_stmt 1 view .LVU1484
2046:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                     p_buf,
 4044              		.loc 1 2046 30 is_stmt 0 view .LVU1485
 4045 007a CDF80090 		str	r9, [sp]
 4046 007e 0123     		movs	r3, #1
 4047 0080 3A46     		mov	r2, r7
 4048              	.LVL465:
2046:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                     p_buf,
ARM GAS  /tmp/ccu2ENwm.s 			page 147


 4049              		.loc 1 2046 30 view .LVU1486
 4050 0082 4146     		mov	r1, r8
 4051 0084 5846     		mov	r0, fp
 4052 0086 FFF7FEFF 		bl	FS_FAT_SecNextGetAlloc
 4053              	.LVL466:
2046:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                     p_buf,
 4054              		.loc 1 2046 28 view .LVU1487
 4055 008a 0690     		str	r0, [sp, #24]
2052:rtos/uC-FS/FAT/fs_fat_lfn.c ****             case FS_ERR_NONE:
 4056              		.loc 1 2052 9 is_stmt 1 view .LVU1488
2052:rtos/uC-FS/FAT/fs_fat_lfn.c ****             case FS_ERR_NONE:
 4057              		.loc 1 2052 17 is_stmt 0 view .LVU1489
 4058 008c B9F80030 		ldrh	r3, [r9]
2052:rtos/uC-FS/FAT/fs_fat_lfn.c ****             case FS_ERR_NONE:
 4059              		.loc 1 2052 9 view .LVU1490
 4060 0090 40F23652 		movw	r2, #1334
 4061 0094 9342     		cmp	r3, r2
 4062 0096 10D0     		beq	.L270
 4063 0098 B3F5A76F 		cmp	r3, #1336
 4064 009c 0DD0     		beq	.L270
 4065 009e 002B     		cmp	r3, #0
 4066 00a0 E8D1     		bne	.L262
2055:rtos/uC-FS/FAT/fs_fat_lfn.c ****                  break;
 4067              		.loc 1 2055 18 is_stmt 1 view .LVU1491
2055:rtos/uC-FS/FAT/fs_fat_lfn.c ****                  break;
 4068              		.loc 1 2055 34 is_stmt 0 view .LVU1492
 4069 00a2 AB6A     		ldr	r3, [r5, #40]
2055:rtos/uC-FS/FAT/fs_fat_lfn.c ****                  break;
 4070              		.loc 1 2055 32 view .LVU1493
 4071 00a4 9842     		cmp	r0, r3
 4072 00a6 26D3     		bcc	.L277
2055:rtos/uC-FS/FAT/fs_fat_lfn.c ****                  break;
 4073              		.loc 1 2055 34 discriminator 1 view .LVU1494
 4074 00a8 AA68     		ldr	r2, [r5, #8]
 4075 00aa 1344     		add	r3, r3, r2
 4076 00ac 2A69     		ldr	r2, [r5, #16]
 4077 00ae 1344     		add	r3, r3, r2
 4078 00b0 9842     		cmp	r0, r3
 4079 00b2 0AD9     		bls	.L272
2055:rtos/uC-FS/FAT/fs_fat_lfn.c ****                  break;
 4080              		.loc 1 2055 32 view .LVU1495
 4081 00b4 0023     		movs	r3, #0
 4082 00b6 0393     		str	r3, [sp, #12]
 4083              	.LVL467:
2055:rtos/uC-FS/FAT/fs_fat_lfn.c ****                  break;
 4084              		.loc 1 2055 32 view .LVU1496
 4085 00b8 07E0     		b	.L272
 4086              	.LVL468:
 4087              	.L270:
2064:rtos/uC-FS/FAT/fs_fat_lfn.c ****                  return;
 4088              		.loc 1 2064 17 is_stmt 1 view .LVU1497
2064:rtos/uC-FS/FAT/fs_fat_lfn.c ****                  return;
 4089              		.loc 1 2064 24 is_stmt 0 view .LVU1498
 4090 00ba 40F2BF23 		movw	r3, #703
 4091 00be A9F80030 		strh	r3, [r9]	@ movhi
2065:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 4092              		.loc 1 2065 18 is_stmt 1 view .LVU1499
ARM GAS  /tmp/ccu2ENwm.s 			page 148


 4093 00c2 D7E7     		b	.L262
 4094              	.LVL469:
 4095              	.L274:
1994:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 4096              		.loc 1 1994 30 is_stmt 0 view .LVU1500
 4097 00c4 0023     		movs	r3, #0
 4098              	.LVL470:
1994:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 4099              		.loc 1 1994 30 view .LVU1501
 4100 00c6 0393     		str	r3, [sp, #12]
 4101              	.LVL471:
 4102              	.L263:
2055:rtos/uC-FS/FAT/fs_fat_lfn.c ****                  break;
 4103              		.loc 1 2055 32 view .LVU1502
 4104 00c8 0024     		movs	r4, #0
 4105              	.LVL472:
 4106              	.L272:
1998:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                 /* -------------------- CHK JOURNAL
 4107              		.loc 1 1998 11 is_stmt 1 view .LVU1503
 4108 00ca 039B     		ldr	r3, [sp, #12]
 4109 00cc B3B1     		cbz	r3, .L281
2000:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                                                 /* -------------------- RD DIR SEC 
 4110              		.loc 1 2000 9 view .LVU1504
 4111              	.LVL473:
2002:rtos/uC-FS/FAT/fs_fat_lfn.c ****             FSBuf_Set(p_buf,
 4112              		.loc 1 2002 9 view .LVU1505
2003:rtos/uC-FS/FAT/fs_fat_lfn.c ****                       dir_cur_pos.SecNbr,
 4113              		.loc 1 2003 13 view .LVU1506
 4114 00ce 069F     		ldr	r7, [sp, #24]
 4115 00d0 CDF80090 		str	r9, [sp]
 4116 00d4 0123     		movs	r3, #1
 4117 00d6 0222     		movs	r2, #2
 4118 00d8 3946     		mov	r1, r7
 4119 00da 4046     		mov	r0, r8
 4120 00dc FFF7FEFF 		bl	FSBuf_Set
 4121              	.LVL474:
2008:rtos/uC-FS/FAT/fs_fat_lfn.c ****                  return;
 4122              		.loc 1 2008 13 view .LVU1507
2008:rtos/uC-FS/FAT/fs_fat_lfn.c ****                  return;
 4123              		.loc 1 2008 17 is_stmt 0 view .LVU1508
 4124 00e0 B9F80030 		ldrh	r3, [r9]
2008:rtos/uC-FS/FAT/fs_fat_lfn.c ****                  return;
 4125              		.loc 1 2008 16 view .LVU1509
 4126 00e4 002B     		cmp	r3, #0
 4127 00e6 C5D1     		bne	.L262
2015:rtos/uC-FS/FAT/fs_fat_lfn.c ****             p_dir_entry        = (CPU_INT08U *)p_buf->DataPtr;
 4128              		.loc 1 2015 13 is_stmt 1 view .LVU1510
2015:rtos/uC-FS/FAT/fs_fat_lfn.c ****             p_dir_entry        = (CPU_INT08U *)p_buf->DataPtr;
 4129              		.loc 1 2015 32 is_stmt 0 view .LVU1511
 4130 00e8 0793     		str	r3, [sp, #28]
2016:rtos/uC-FS/FAT/fs_fat_lfn.c ****             while (dir_cur_pos.SecPos < p_fat_data->SecSize) {
 4131              		.loc 1 2016 13 is_stmt 1 view .LVU1512
2016:rtos/uC-FS/FAT/fs_fat_lfn.c ****             while (dir_cur_pos.SecPos < p_fat_data->SecSize) {
 4132              		.loc 1 2016 32 is_stmt 0 view .LVU1513
 4133 00ea D8F81020 		ldr	r2, [r8, #16]
 4134              	.LVL475:
2017:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
ARM GAS  /tmp/ccu2ENwm.s 			page 149


 4135              		.loc 1 2017 13 is_stmt 1 view .LVU1514
2017:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 4136              		.loc 1 2017 19 is_stmt 0 view .LVU1515
 4137 00ee B0E7     		b	.L265
 4138              	.LVL476:
 4139              	.L275:
1994:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 4140              		.loc 1 1994 30 view .LVU1516
 4141 00f0 0123     		movs	r3, #1
 4142              	.LVL477:
1994:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 4143              		.loc 1 1994 30 view .LVU1517
 4144 00f2 0393     		str	r3, [sp, #12]
 4145 00f4 E8E7     		b	.L263
 4146              	.LVL478:
 4147              	.L277:
2055:rtos/uC-FS/FAT/fs_fat_lfn.c ****                  break;
 4148              		.loc 1 2055 32 view .LVU1518
 4149 00f6 0023     		movs	r3, #0
 4150 00f8 0393     		str	r3, [sp, #12]
 4151              	.LVL479:
2055:rtos/uC-FS/FAT/fs_fat_lfn.c ****                  break;
 4152              		.loc 1 2055 32 view .LVU1519
 4153 00fa E6E7     		b	.L272
 4154              	.LVL480:
 4155              	.L281:
2075:rtos/uC-FS/FAT/fs_fat_lfn.c ****    *p_err = FS_ERR_ENTRY_CORRUPT;
 4156              		.loc 1 2075 99 is_stmt 1 view .LVU1520
2076:rtos/uC-FS/FAT/fs_fat_lfn.c ****     return;
 4157              		.loc 1 2076 4 view .LVU1521
2076:rtos/uC-FS/FAT/fs_fat_lfn.c ****     return;
 4158              		.loc 1 2076 11 is_stmt 0 view .LVU1522
 4159 00fc 40F2BF23 		movw	r3, #703
 4160 0100 A9F80030 		strh	r3, [r9]	@ movhi
2077:rtos/uC-FS/FAT/fs_fat_lfn.c **** }
 4161              		.loc 1 2077 5 is_stmt 1 view .LVU1523
 4162 0104 B6E7     		b	.L262
 4163              		.cfi_endproc
 4164              	.LFE8:
 4166              		.section	.text.FS_FAT_LFN_SFN_Fmt,"ax",%progbits
 4167              		.align	1
 4168              		.syntax unified
 4169              		.thumb
 4170              		.thumb_func
 4171              		.fpu fpv4-sp-d16
 4173              	FS_FAT_LFN_SFN_Fmt:
 4174              	.LVL481:
 4175              	.LFB13:
2518:rtos/uC-FS/FAT/fs_fat_lfn.c ****     FS_FILE_NAME_LEN   char_cnt;
 4176              		.loc 1 2518 1 view -0
 4177              		.cfi_startproc
 4178              		@ args = 0, pretend = 0, frame = 16
 4179              		@ frame_needed = 0, uses_anonymous_args = 0
2518:rtos/uC-FS/FAT/fs_fat_lfn.c ****     FS_FILE_NAME_LEN   char_cnt;
 4180              		.loc 1 2518 1 is_stmt 0 view .LVU1525
 4181 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 4182              	.LCFI44:
ARM GAS  /tmp/ccu2ENwm.s 			page 150


 4183              		.cfi_def_cfa_offset 24
 4184              		.cfi_offset 4, -24
 4185              		.cfi_offset 5, -20
 4186              		.cfi_offset 6, -16
 4187              		.cfi_offset 7, -12
 4188              		.cfi_offset 8, -8
 4189              		.cfi_offset 14, -4
 4190 0004 84B0     		sub	sp, sp, #16
 4191              	.LCFI45:
 4192              		.cfi_def_cfa_offset 40
 4193 0006 0646     		mov	r6, r0
 4194 0008 0F46     		mov	r7, r1
 4195 000a 9046     		mov	r8, r2
2519:rtos/uC-FS/FAT/fs_fat_lfn.c ****     FS_FILE_NAME_LEN   char_cnt_ext;
 4196              		.loc 1 2519 5 is_stmt 1 view .LVU1526
2520:rtos/uC-FS/FAT/fs_fat_lfn.c ****     FS_FILE_NAME_LEN   i;
 4197              		.loc 1 2520 5 view .LVU1527
2521:rtos/uC-FS/FAT/fs_fat_lfn.c ****     CPU_BOOLEAN        is_legal;
 4198              		.loc 1 2521 5 view .LVU1528
2522:rtos/uC-FS/FAT/fs_fat_lfn.c ****     CPU_BOOLEAN        is_done;
 4199              		.loc 1 2522 5 view .LVU1529
2523:rtos/uC-FS/FAT/fs_fat_lfn.c **** #if (FS_CFG_UTF8_EN == DEF_ENABLED)
 4200              		.loc 1 2523 5 view .LVU1530
2528:rtos/uC-FS/FAT/fs_fat_lfn.c **** #endif
 4201              		.loc 1 2528 5 view .LVU1531
2530:rtos/uC-FS/FAT/fs_fat_lfn.c ****     CPU_CHAR           name_8_3_08[12];
 4202              		.loc 1 2530 5 view .LVU1532
2531:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 4203              		.loc 1 2531 5 view .LVU1533
2535:rtos/uC-FS/FAT/fs_fat_lfn.c ****         name_8_3_08[i] = (CPU_INT08U)ASCII_CHAR_SPACE;
 4204              		.loc 1 2535 5 view .LVU1534
 4205              	.LVL482:
2535:rtos/uC-FS/FAT/fs_fat_lfn.c ****         name_8_3_08[i] = (CPU_INT08U)ASCII_CHAR_SPACE;
 4206              		.loc 1 2535 12 is_stmt 0 view .LVU1535
 4207 000c 0023     		movs	r3, #0
2535:rtos/uC-FS/FAT/fs_fat_lfn.c ****         name_8_3_08[i] = (CPU_INT08U)ASCII_CHAR_SPACE;
 4208              		.loc 1 2535 5 view .LVU1536
 4209 000e 06E0     		b	.L283
 4210              	.LVL483:
 4211              	.L284:
2536:rtos/uC-FS/FAT/fs_fat_lfn.c ****     }
 4212              		.loc 1 2536 9 is_stmt 1 discriminator 3 view .LVU1537
2536:rtos/uC-FS/FAT/fs_fat_lfn.c ****     }
 4213              		.loc 1 2536 24 is_stmt 0 discriminator 3 view .LVU1538
 4214 0010 04AA     		add	r2, sp, #16
 4215 0012 1A44     		add	r2, r2, r3
 4216 0014 2021     		movs	r1, #32
 4217 0016 02F80C1C 		strb	r1, [r2, #-12]
2535:rtos/uC-FS/FAT/fs_fat_lfn.c ****         name_8_3_08[i] = (CPU_INT08U)ASCII_CHAR_SPACE;
 4218              		.loc 1 2535 27 is_stmt 1 discriminator 3 view .LVU1539
2535:rtos/uC-FS/FAT/fs_fat_lfn.c ****         name_8_3_08[i] = (CPU_INT08U)ASCII_CHAR_SPACE;
 4219              		.loc 1 2535 28 is_stmt 0 discriminator 3 view .LVU1540
 4220 001a 0133     		adds	r3, r3, #1
 4221              	.LVL484:
2535:rtos/uC-FS/FAT/fs_fat_lfn.c ****         name_8_3_08[i] = (CPU_INT08U)ASCII_CHAR_SPACE;
 4222              		.loc 1 2535 28 discriminator 3 view .LVU1541
 4223 001c 9BB2     		uxth	r3, r3
ARM GAS  /tmp/ccu2ENwm.s 			page 151


 4224              	.LVL485:
 4225              	.L283:
2535:rtos/uC-FS/FAT/fs_fat_lfn.c ****         name_8_3_08[i] = (CPU_INT08U)ASCII_CHAR_SPACE;
 4226              		.loc 1 2535 18 is_stmt 1 discriminator 1 view .LVU1542
2535:rtos/uC-FS/FAT/fs_fat_lfn.c ****         name_8_3_08[i] = (CPU_INT08U)ASCII_CHAR_SPACE;
 4227              		.loc 1 2535 5 is_stmt 0 discriminator 1 view .LVU1543
 4228 001e 0A2B     		cmp	r3, #10
 4229 0020 F6D9     		bls	.L284
2538:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 4230              		.loc 1 2538 5 is_stmt 1 view .LVU1544
2538:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 4231              		.loc 1 2538 21 is_stmt 0 view .LVU1545
 4232 0022 0023     		movs	r3, #0
 4233              	.LVL486:
2538:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 4234              		.loc 1 2538 21 view .LVU1546
 4235 0024 8DF80F30 		strb	r3, [sp, #15]
2540:rtos/uC-FS/FAT/fs_fat_lfn.c ****     if (p_period == name) {                                     /* If period not found in name ... 
 4236              		.loc 1 2540 5 is_stmt 1 view .LVU1547
2540:rtos/uC-FS/FAT/fs_fat_lfn.c ****     if (p_period == name) {                                     /* If period not found in name ... 
 4237              		.loc 1 2540 21 is_stmt 0 view .LVU1548
 4238 0028 2E22     		movs	r2, #46
 4239 002a FF21     		movs	r1, #255
 4240 002c 3046     		mov	r0, r6
 4241              	.LVL487:
2540:rtos/uC-FS/FAT/fs_fat_lfn.c ****     if (p_period == name) {                                     /* If period not found in name ... 
 4242              		.loc 1 2540 21 view .LVU1549
 4243 002e FFF7FEFF 		bl	Str_Char_Last_N
 4244              	.LVL488:
 4245 0032 8446     		mov	ip, r0
 4246              	.LVL489:
2541:rtos/uC-FS/FAT/fs_fat_lfn.c ****         p_period = (CPU_CHAR *)0;                               /* ... set ptr to period invalid.  
 4247              		.loc 1 2541 5 is_stmt 1 view .LVU1550
2541:rtos/uC-FS/FAT/fs_fat_lfn.c ****         p_period = (CPU_CHAR *)0;                               /* ... set ptr to period invalid.  
 4248              		.loc 1 2541 8 is_stmt 0 view .LVU1551
 4249 0034 8642     		cmp	r6, r0
 4250 0036 18D0     		beq	.L334
 4251              	.L285:
 4252              	.LVL490:
2548:rtos/uC-FS/FAT/fs_fat_lfn.c ****     char_cnt      =  0u;
 4253              		.loc 1 2548 5 is_stmt 1 view .LVU1552
2549:rtos/uC-FS/FAT/fs_fat_lfn.c ****     is_done       =  DEF_NO;
 4254              		.loc 1 2549 5 view .LVU1553
2550:rtos/uC-FS/FAT/fs_fat_lfn.c ****     is_legal      =  DEF_YES;
 4255              		.loc 1 2550 5 view .LVU1554
2551:rtos/uC-FS/FAT/fs_fat_lfn.c **** #if (FS_CFG_UTF8_EN == DEF_ENABLED)
 4256              		.loc 1 2551 5 view .LVU1555
2560:rtos/uC-FS/FAT/fs_fat_lfn.c **** #endif
 4257              		.loc 1 2560 5 view .LVU1556
2560:rtos/uC-FS/FAT/fs_fat_lfn.c **** #endif
 4258              		.loc 1 2560 19 is_stmt 0 view .LVU1557
 4259 0038 3378     		ldrb	r3, [r6]	@ zero_extendqisi2
 4260              	.LVL491:
2562:rtos/uC-FS/FAT/fs_fat_lfn.c ****            (is_legal == DEF_YES)) {                             /* ... & name is still legal.      
 4261              		.loc 1 2562 5 is_stmt 1 view .LVU1558
2550:rtos/uC-FS/FAT/fs_fat_lfn.c ****     is_legal      =  DEF_YES;
 4262              		.loc 1 2550 19 is_stmt 0 view .LVU1559
ARM GAS  /tmp/ccu2ENwm.s 			page 152


 4263 003a 0025     		movs	r5, #0
2551:rtos/uC-FS/FAT/fs_fat_lfn.c **** #if (FS_CFG_UTF8_EN == DEF_ENABLED)
 4264              		.loc 1 2551 19 view .LVU1560
 4265 003c 0124     		movs	r4, #1
2548:rtos/uC-FS/FAT/fs_fat_lfn.c ****     char_cnt      =  0u;
 4266              		.loc 1 2548 19 view .LVU1561
 4267 003e 2A46     		mov	r2, r5
2549:rtos/uC-FS/FAT/fs_fat_lfn.c ****     is_done       =  DEF_NO;
 4268              		.loc 1 2549 19 view .LVU1562
 4269 0040 2846     		mov	r0, r5
 4270              	.LVL492:
 4271              	.L286:
2562:rtos/uC-FS/FAT/fs_fat_lfn.c ****            (is_legal == DEF_YES)) {                             /* ... & name is still legal.      
 4272              		.loc 1 2562 11 is_stmt 1 view .LVU1563
 4273 0042 002D     		cmp	r5, #0
 4274 0044 6FD1     		bne	.L299
2562:rtos/uC-FS/FAT/fs_fat_lfn.c ****            (is_legal == DEF_YES)) {                             /* ... & name is still legal.      
 4275              		.loc 1 2562 33 is_stmt 0 discriminator 1 view .LVU1564
 4276 0046 012C     		cmp	r4, #1
 4277 0048 6DD1     		bne	.L299
2564:rtos/uC-FS/FAT/fs_fat_lfn.c ****             case ASCII_CHAR_SPACE:                              /* Skip embedded spaces (see Notes 
 4278              		.loc 1 2564 9 is_stmt 1 view .LVU1565
 4279 004a 2E2B     		cmp	r3, #46
 4280 004c 63D0     		beq	.L318
 4281 004e 0FD8     		bhi	.L288
 4282 0050 002B     		cmp	r3, #0
 4283 0052 62D0     		beq	.L319
 4284 0054 202B     		cmp	r3, #32
 4285 0056 0DD1     		bne	.L289
 4286              	.LVL493:
 4287              	.L287:
2603:rtos/uC-FS/FAT/fs_fat_lfn.c ****             (is_legal == DEF_YES)) {                            /* ... & name is still legal.      
 4288              		.loc 1 2603 9 view .LVU1566
2603:rtos/uC-FS/FAT/fs_fat_lfn.c ****             (is_legal == DEF_YES)) {                            /* ... & name is still legal.      
 4289              		.loc 1 2603 12 is_stmt 0 view .LVU1567
 4290 0058 002D     		cmp	r5, #0
 4291 005a F2D1     		bne	.L286
2603:rtos/uC-FS/FAT/fs_fat_lfn.c ****             (is_legal == DEF_YES)) {                            /* ... & name is still legal.      
 4292              		.loc 1 2603 34 discriminator 1 view .LVU1568
 4293 005c 012C     		cmp	r4, #1
 4294 005e F0D1     		bne	.L286
2605:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 is_done = DEF_YES;
 4295              		.loc 1 2605 13 is_stmt 1 view .LVU1569
2605:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 is_done = DEF_YES;
 4296              		.loc 1 2605 16 is_stmt 0 view .LVU1570
 4297 0060 0728     		cmp	r0, #7
 4298 0062 5ED8     		bhi	.L325
2618:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 name_char = *name;
 4299              		.loc 1 2618 17 is_stmt 1 view .LVU1571
 4300              	.LVL494:
2619:rtos/uC-FS/FAT/fs_fat_lfn.c **** #endif
 4301              		.loc 1 2619 17 view .LVU1572
2619:rtos/uC-FS/FAT/fs_fat_lfn.c **** #endif
 4302              		.loc 1 2619 27 is_stmt 0 view .LVU1573
 4303 0064 16F8013F 		ldrb	r3, [r6, #1]!	@ zero_extendqisi2
 4304              	.LVL495:
2619:rtos/uC-FS/FAT/fs_fat_lfn.c **** #endif
ARM GAS  /tmp/ccu2ENwm.s 			page 153


 4305              		.loc 1 2619 27 view .LVU1574
 4306 0068 EBE7     		b	.L286
 4307              	.LVL496:
 4308              	.L334:
2542:rtos/uC-FS/FAT/fs_fat_lfn.c ****     }
 4309              		.loc 1 2542 18 view .LVU1575
 4310 006a 4FF0000C 		mov	ip, #0
 4311 006e E3E7     		b	.L285
 4312              	.LVL497:
 4313              	.L288:
2564:rtos/uC-FS/FAT/fs_fat_lfn.c ****             case ASCII_CHAR_SPACE:                              /* Skip embedded spaces (see Notes 
 4314              		.loc 1 2564 9 view .LVU1576
 4315 0070 5C2B     		cmp	r3, #92
 4316 0072 54D0     		beq	.L320
 4317              	.L289:
2581:rtos/uC-FS/FAT/fs_fat_lfn.c **** #if (FS_CFG_UTF8_EN == DEF_ENABLED)
 4318              		.loc 1 2581 18 is_stmt 1 view .LVU1577
2581:rtos/uC-FS/FAT/fs_fat_lfn.c **** #if (FS_CFG_UTF8_EN == DEF_ENABLED)
 4319              		.loc 1 2581 27 is_stmt 0 view .LVU1578
 4320 0074 5D2B     		cmp	r3, #93
 4321 0076 0CD9     		bls	.L290
2581:rtos/uC-FS/FAT/fs_fat_lfn.c **** #if (FS_CFG_UTF8_EN == DEF_ENABLED)
 4322              		.loc 1 2581 29 discriminator 1 view .LVU1579
 4323 0078 7C2B     		cmp	r3, #124
 4324 007a 0AD0     		beq	.L290
2581:rtos/uC-FS/FAT/fs_fat_lfn.c **** #if (FS_CFG_UTF8_EN == DEF_ENABLED)
 4325              		.loc 1 2581 29 discriminator 3 view .LVU1580
 4326 007c 7F2B     		cmp	r3, #127
 4327 007e 08D0     		beq	.L290
 4328              	.L291:
 4329              	.LVL498:
2588:rtos/uC-FS/FAT/fs_fat_lfn.c ****                      i++;
 4330              		.loc 1 2588 22 is_stmt 1 view .LVU1581
2588:rtos/uC-FS/FAT/fs_fat_lfn.c ****                      i++;
 4331              		.loc 1 2588 39 is_stmt 0 view .LVU1582
 4332 0080 A3F16101 		sub	r1, r3, #97
 4333 0084 C9B2     		uxtb	r1, r1
2588:rtos/uC-FS/FAT/fs_fat_lfn.c ****                      i++;
 4334              		.loc 1 2588 37 view .LVU1583
 4335 0086 1929     		cmp	r1, #25
 4336 0088 27D8     		bhi	.L321
2588:rtos/uC-FS/FAT/fs_fat_lfn.c ****                      i++;
 4337              		.loc 1 2588 37 discriminator 1 view .LVU1584
 4338 008a A3F12001 		sub	r1, r3, #32
 4339 008e C9B2     		uxtb	r1, r1
 4340 0090 24E0     		b	.L295
 4341              	.LVL499:
 4342              	.L290:
2581:rtos/uC-FS/FAT/fs_fat_lfn.c **** #if (FS_CFG_UTF8_EN == DEF_ENABLED)
 4343              		.loc 1 2581 29 discriminator 6 view .LVU1585
 4344 0092 A3F14001 		sub	r1, r3, #64
 4345 0096 C9B2     		uxtb	r1, r1
 4346 0098 1A29     		cmp	r1, #26
 4347 009a F1D9     		bls	.L291
2581:rtos/uC-FS/FAT/fs_fat_lfn.c **** #if (FS_CFG_UTF8_EN == DEF_ENABLED)
 4348              		.loc 1 2581 29 discriminator 8 view .LVU1586
 4349 009c A3F13001 		sub	r1, r3, #48
ARM GAS  /tmp/ccu2ENwm.s 			page 154


 4350 00a0 C9B2     		uxtb	r1, r1
 4351 00a2 0929     		cmp	r1, #9
 4352 00a4 ECD9     		bls	.L291
2581:rtos/uC-FS/FAT/fs_fat_lfn.c **** #if (FS_CFG_UTF8_EN == DEF_ENABLED)
 4353              		.loc 1 2581 29 discriminator 10 view .LVU1587
 4354 00a6 2D2B     		cmp	r3, #45
 4355 00a8 EAD0     		beq	.L291
2581:rtos/uC-FS/FAT/fs_fat_lfn.c **** #if (FS_CFG_UTF8_EN == DEF_ENABLED)
 4356              		.loc 1 2581 29 discriminator 12 view .LVU1588
 4357 00aa A3F12101 		sub	r1, r3, #33
 4358 00ae C9B2     		uxtb	r1, r1
 4359 00b0 0829     		cmp	r1, #8
 4360 00b2 01D8     		bhi	.L292
2581:rtos/uC-FS/FAT/fs_fat_lfn.c **** #if (FS_CFG_UTF8_EN == DEF_ENABLED)
 4361              		.loc 1 2581 29 discriminator 13 view .LVU1589
 4362 00b4 222B     		cmp	r3, #34
 4363 00b6 E3D1     		bne	.L291
 4364              	.L292:
 4365              	.LVL500:
2587:rtos/uC-FS/FAT/fs_fat_lfn.c ****                      name_8_3_08[i] = ASCII_TO_UPPER(name_char);            /* See Notes #2a.      
 4366              		.loc 1 2587 18 is_stmt 1 view .LVU1590
2591:rtos/uC-FS/FAT/fs_fat_lfn.c ****                      if (is_legal == DEF_YES) {
 4367              		.loc 1 2591 22 view .LVU1591
2591:rtos/uC-FS/FAT/fs_fat_lfn.c ****                      if (is_legal == DEF_YES) {
 4368              		.loc 1 2591 31 is_stmt 0 view .LVU1592
 4369 00b8 3F2B     		cmp	r3, #63
 4370 00ba 19D8     		bhi	.L293
 4371              	.L294:
2591:rtos/uC-FS/FAT/fs_fat_lfn.c ****                      if (is_legal == DEF_YES) {
 4372              		.loc 1 2591 33 discriminator 8 view .LVU1593
 4373 00bc 3D2B     		cmp	r3, #61
 4374 00be 1DD0     		beq	.L297
2591:rtos/uC-FS/FAT/fs_fat_lfn.c ****                      if (is_legal == DEF_YES) {
 4375              		.loc 1 2591 33 discriminator 10 view .LVU1594
 4376 00c0 3B2B     		cmp	r3, #59
 4377 00c2 1BD0     		beq	.L297
2591:rtos/uC-FS/FAT/fs_fat_lfn.c ****                      if (is_legal == DEF_YES) {
 4378              		.loc 1 2591 33 discriminator 14 view .LVU1595
 4379 00c4 A3F12001 		sub	r1, r3, #32
 4380 00c8 C9B2     		uxtb	r1, r1
 4381 00ca 0E29     		cmp	r1, #14
 4382 00cc 1FD8     		bhi	.L322
2591:rtos/uC-FS/FAT/fs_fat_lfn.c ****                      if (is_legal == DEF_YES) {
 4383              		.loc 1 2591 33 discriminator 15 view .LVU1596
 4384 00ce 222B     		cmp	r3, #34
 4385 00d0 1FD0     		beq	.L323
2591:rtos/uC-FS/FAT/fs_fat_lfn.c ****                      if (is_legal == DEF_YES) {
 4386              		.loc 1 2591 33 discriminator 17 view .LVU1597
 4387 00d2 2A2B     		cmp	r3, #42
 4388 00d4 12D1     		bne	.L297
2591:rtos/uC-FS/FAT/fs_fat_lfn.c ****                      if (is_legal == DEF_YES) {
 4389              		.loc 1 2591 31 view .LVU1598
 4390 00d6 2C46     		mov	r4, r5
 4391 00d8 07E0     		b	.L296
 4392              	.LVL501:
 4393              	.L321:
2588:rtos/uC-FS/FAT/fs_fat_lfn.c ****                      i++;
ARM GAS  /tmp/ccu2ENwm.s 			page 155


 4394              		.loc 1 2588 37 view .LVU1599
 4395 00da 1946     		mov	r1, r3
 4396              	.L295:
2588:rtos/uC-FS/FAT/fs_fat_lfn.c ****                      i++;
 4397              		.loc 1 2588 37 discriminator 4 view .LVU1600
 4398 00dc 0DF1100E 		add	lr, sp, #16
 4399 00e0 9644     		add	lr, lr, r2
 4400 00e2 0EF80C1C 		strb	r1, [lr, #-12]
2589:rtos/uC-FS/FAT/fs_fat_lfn.c ****                  } else {
 4401              		.loc 1 2589 22 is_stmt 1 discriminator 4 view .LVU1601
2589:rtos/uC-FS/FAT/fs_fat_lfn.c ****                  } else {
 4402              		.loc 1 2589 23 is_stmt 0 discriminator 4 view .LVU1602
 4403 00e6 0132     		adds	r2, r2, #1
 4404              	.LVL502:
2589:rtos/uC-FS/FAT/fs_fat_lfn.c ****                  } else {
 4405              		.loc 1 2589 23 discriminator 4 view .LVU1603
 4406 00e8 92B2     		uxth	r2, r2
 4407              	.LVL503:
 4408              	.L296:
2596:rtos/uC-FS/FAT/fs_fat_lfn.c ****                      }
 4409              		.loc 1 2596 136 is_stmt 1 view .LVU1604
2599:rtos/uC-FS/FAT/fs_fat_lfn.c ****                  break;
 4410              		.loc 1 2599 18 view .LVU1605
2599:rtos/uC-FS/FAT/fs_fat_lfn.c ****                  break;
 4411              		.loc 1 2599 26 is_stmt 0 view .LVU1606
 4412 00ea 0130     		adds	r0, r0, #1
 4413              	.LVL504:
2599:rtos/uC-FS/FAT/fs_fat_lfn.c ****                  break;
 4414              		.loc 1 2599 26 view .LVU1607
 4415 00ec 80B2     		uxth	r0, r0
 4416              	.LVL505:
2600:rtos/uC-FS/FAT/fs_fat_lfn.c ****         }
 4417              		.loc 1 2600 18 is_stmt 1 view .LVU1608
 4418 00ee B3E7     		b	.L287
 4419              	.LVL506:
 4420              	.L293:
2591:rtos/uC-FS/FAT/fs_fat_lfn.c ****                      if (is_legal == DEF_YES) {
 4421              		.loc 1 2591 33 is_stmt 0 discriminator 1 view .LVU1609
 4422 00f0 5C2B     		cmp	r3, #92
 4423 00f2 E3D0     		beq	.L294
2591:rtos/uC-FS/FAT/fs_fat_lfn.c ****                      if (is_legal == DEF_YES) {
 4424              		.loc 1 2591 33 discriminator 3 view .LVU1610
 4425 00f4 7C2B     		cmp	r3, #124
 4426 00f6 E1D0     		beq	.L294
2591:rtos/uC-FS/FAT/fs_fat_lfn.c ****                      if (is_legal == DEF_YES) {
 4427              		.loc 1 2591 33 discriminator 5 view .LVU1611
 4428 00f8 7F2B     		cmp	r3, #127
 4429 00fa DFD0     		beq	.L294
 4430              	.L297:
 4431              	.LVL507:
2593:rtos/uC-FS/FAT/fs_fat_lfn.c ****                         i++;
 4432              		.loc 1 2593 25 is_stmt 1 view .LVU1612
2593:rtos/uC-FS/FAT/fs_fat_lfn.c ****                         i++;
 4433              		.loc 1 2593 40 is_stmt 0 view .LVU1613
 4434 00fc 04A9     		add	r1, sp, #16
 4435 00fe 1144     		add	r1, r1, r2
 4436 0100 4FF05F0E 		mov	lr, #95
ARM GAS  /tmp/ccu2ENwm.s 			page 156


 4437 0104 01F80CEC 		strb	lr, [r1, #-12]
2594:rtos/uC-FS/FAT/fs_fat_lfn.c ****                      } else {
 4438              		.loc 1 2594 25 is_stmt 1 view .LVU1614
2594:rtos/uC-FS/FAT/fs_fat_lfn.c ****                      } else {
 4439              		.loc 1 2594 26 is_stmt 0 view .LVU1615
 4440 0108 0132     		adds	r2, r2, #1
 4441              	.LVL508:
2594:rtos/uC-FS/FAT/fs_fat_lfn.c ****                      } else {
 4442              		.loc 1 2594 26 view .LVU1616
 4443 010a 92B2     		uxth	r2, r2
 4444              	.LVL509:
2594:rtos/uC-FS/FAT/fs_fat_lfn.c ****                      } else {
 4445              		.loc 1 2594 26 view .LVU1617
 4446 010c EDE7     		b	.L296
 4447              	.LVL510:
 4448              	.L322:
2591:rtos/uC-FS/FAT/fs_fat_lfn.c ****                      if (is_legal == DEF_YES) {
 4449              		.loc 1 2591 31 view .LVU1618
 4450 010e 2C46     		mov	r4, r5
 4451 0110 EBE7     		b	.L296
 4452              	.L323:
 4453 0112 2C46     		mov	r4, r5
 4454 0114 E9E7     		b	.L296
 4455              	.LVL511:
 4456              	.L318:
2570:rtos/uC-FS/FAT/fs_fat_lfn.c ****                  break;
 4457              		.loc 1 2570 26 view .LVU1619
 4458 0116 2546     		mov	r5, r4
 4459              	.LVL512:
2570:rtos/uC-FS/FAT/fs_fat_lfn.c ****                  break;
 4460              		.loc 1 2570 26 view .LVU1620
 4461 0118 9EE7     		b	.L287
 4462              	.LVL513:
 4463              	.L319:
2576:rtos/uC-FS/FAT/fs_fat_lfn.c ****                  break;
 4464              		.loc 1 2576 26 view .LVU1621
 4465 011a 2546     		mov	r5, r4
 4466              	.LVL514:
2576:rtos/uC-FS/FAT/fs_fat_lfn.c ****                  break;
 4467              		.loc 1 2576 26 view .LVU1622
 4468 011c 9CE7     		b	.L287
 4469              	.LVL515:
 4470              	.L320:
2576:rtos/uC-FS/FAT/fs_fat_lfn.c ****                  break;
 4471              		.loc 1 2576 26 view .LVU1623
 4472 011e 2546     		mov	r5, r4
 4473              	.LVL516:
2576:rtos/uC-FS/FAT/fs_fat_lfn.c ****                  break;
 4474              		.loc 1 2576 26 view .LVU1624
 4475 0120 9AE7     		b	.L287
 4476              	.LVL517:
 4477              	.L325:
2606:rtos/uC-FS/FAT/fs_fat_lfn.c ****             } else {
 4478              		.loc 1 2606 25 view .LVU1625
 4479 0122 2546     		mov	r5, r4
 4480              	.LVL518:
2606:rtos/uC-FS/FAT/fs_fat_lfn.c ****             } else {
ARM GAS  /tmp/ccu2ENwm.s 			page 157


 4481              		.loc 1 2606 25 view .LVU1626
 4482 0124 8DE7     		b	.L286
 4483              	.LVL519:
 4484              	.L299:
2625:rtos/uC-FS/FAT/fs_fat_lfn.c ****        *p_err = FS_ERR_NAME_INVALID;
 4485              		.loc 1 2625 5 is_stmt 1 view .LVU1627
2625:rtos/uC-FS/FAT/fs_fat_lfn.c ****        *p_err = FS_ERR_NAME_INVALID;
 4486              		.loc 1 2625 8 is_stmt 0 view .LVU1628
 4487 0126 6CB1     		cbz	r4, .L335
2633:rtos/uC-FS/FAT/fs_fat_lfn.c ****     if (p_period != (CPU_CHAR *)0) {                            /* If there is a period in file nam
 4488              		.loc 1 2633 5 is_stmt 1 view .LVU1629
2633:rtos/uC-FS/FAT/fs_fat_lfn.c ****     if (p_period != (CPU_CHAR *)0) {                            /* If there is a period in file nam
 4489              		.loc 1 2633 7 is_stmt 0 view .LVU1630
 4490 0128 121A     		subs	r2, r2, r0
 4491              	.LVL520:
2633:rtos/uC-FS/FAT/fs_fat_lfn.c ****     if (p_period != (CPU_CHAR *)0) {                            /* If there is a period in file nam
 4492              		.loc 1 2633 7 view .LVU1631
 4493 012a 92B2     		uxth	r2, r2
 4494 012c 0832     		adds	r2, r2, #8
 4495 012e 92B2     		uxth	r2, r2
 4496              	.LVL521:
2634:rtos/uC-FS/FAT/fs_fat_lfn.c ****         p_period++;
 4497              		.loc 1 2634 5 is_stmt 1 view .LVU1632
2634:rtos/uC-FS/FAT/fs_fat_lfn.c ****         p_period++;
 4498              		.loc 1 2634 8 is_stmt 0 view .LVU1633
 4499 0130 BCF1000F 		cmp	ip, #0
 4500 0134 74D0     		beq	.L303
2635:rtos/uC-FS/FAT/fs_fat_lfn.c ****         char_cnt_ext  = 0u;
 4501              		.loc 1 2635 9 is_stmt 1 view .LVU1634
2635:rtos/uC-FS/FAT/fs_fat_lfn.c ****         char_cnt_ext  = 0u;
 4502              		.loc 1 2635 17 is_stmt 0 view .LVU1635
 4503 0136 0CF1010E 		add	lr, ip, #1
 4504              	.LVL522:
2636:rtos/uC-FS/FAT/fs_fat_lfn.c ****         is_done       = DEF_NO;
 4505              		.loc 1 2636 9 is_stmt 1 view .LVU1636
2637:rtos/uC-FS/FAT/fs_fat_lfn.c ****         is_legal      = DEF_YES;
 4506              		.loc 1 2637 9 view .LVU1637
2638:rtos/uC-FS/FAT/fs_fat_lfn.c **** #if (FS_CFG_UTF8_EN  == DEF_ENABLED)
 4507              		.loc 1 2638 9 view .LVU1638
2648:rtos/uC-FS/FAT/fs_fat_lfn.c **** #endif
 4508              		.loc 1 2648 9 view .LVU1639
2648:rtos/uC-FS/FAT/fs_fat_lfn.c **** #endif
 4509              		.loc 1 2648 23 is_stmt 0 view .LVU1640
 4510 013a 9CF80130 		ldrb	r3, [ip, #1]	@ zero_extendqisi2
 4511              	.LVL523:
2650:rtos/uC-FS/FAT/fs_fat_lfn.c ****                (is_legal == DEF_YES)) {
 4512              		.loc 1 2650 9 is_stmt 1 view .LVU1641
2637:rtos/uC-FS/FAT/fs_fat_lfn.c ****         is_legal      = DEF_YES;
 4513              		.loc 1 2637 23 is_stmt 0 view .LVU1642
 4514 013e 0021     		movs	r1, #0
2636:rtos/uC-FS/FAT/fs_fat_lfn.c ****         is_done       = DEF_NO;
 4515              		.loc 1 2636 23 view .LVU1643
 4516 0140 0D46     		mov	r5, r1
2650:rtos/uC-FS/FAT/fs_fat_lfn.c ****                (is_legal == DEF_YES)) {
 4517              		.loc 1 2650 15 view .LVU1644
 4518 0142 19E0     		b	.L304
 4519              	.LVL524:
ARM GAS  /tmp/ccu2ENwm.s 			page 158


 4520              	.L335:
2626:rtos/uC-FS/FAT/fs_fat_lfn.c ****         return (0u);
 4521              		.loc 1 2626 8 is_stmt 1 view .LVU1645
2626:rtos/uC-FS/FAT/fs_fat_lfn.c ****         return (0u);
 4522              		.loc 1 2626 15 is_stmt 0 view .LVU1646
 4523 0144 40F28733 		movw	r3, #903
 4524              	.LVL525:
2626:rtos/uC-FS/FAT/fs_fat_lfn.c ****         return (0u);
 4525              		.loc 1 2626 15 view .LVU1647
 4526 0148 A8F80030 		strh	r3, [r8]	@ movhi
2627:rtos/uC-FS/FAT/fs_fat_lfn.c ****     }
 4527              		.loc 1 2627 9 is_stmt 1 view .LVU1648
2627:rtos/uC-FS/FAT/fs_fat_lfn.c ****     }
 4528              		.loc 1 2627 16 is_stmt 0 view .LVU1649
 4529 014c 0020     		movs	r0, #0
 4530              	.LVL526:
2627:rtos/uC-FS/FAT/fs_fat_lfn.c ****     }
 4531              		.loc 1 2627 16 view .LVU1650
 4532 014e 98E0     		b	.L302
 4533              	.LVL527:
 4534              	.L307:
2671:rtos/uC-FS/FAT/fs_fat_lfn.c ****                          i++;
 4535              		.loc 1 2671 26 is_stmt 1 view .LVU1651
2671:rtos/uC-FS/FAT/fs_fat_lfn.c ****                          i++;
 4536              		.loc 1 2671 43 is_stmt 0 view .LVU1652
 4537 0150 A3F16106 		sub	r6, r3, #97
 4538 0154 F6B2     		uxtb	r6, r6
2671:rtos/uC-FS/FAT/fs_fat_lfn.c ****                          i++;
 4539              		.loc 1 2671 41 view .LVU1653
 4540 0156 192E     		cmp	r6, #25
 4541 0158 42D8     		bhi	.L328
2671:rtos/uC-FS/FAT/fs_fat_lfn.c ****                          i++;
 4542              		.loc 1 2671 41 discriminator 1 view .LVU1654
 4543 015a A3F12006 		sub	r6, r3, #32
 4544 015e F6B2     		uxtb	r6, r6
 4545              	.L311:
2671:rtos/uC-FS/FAT/fs_fat_lfn.c ****                          i++;
 4546              		.loc 1 2671 41 discriminator 4 view .LVU1655
 4547 0160 0DF1100C 		add	ip, sp, #16
 4548 0164 9444     		add	ip, ip, r2
 4549 0166 0CF80C6C 		strb	r6, [ip, #-12]
2672:rtos/uC-FS/FAT/fs_fat_lfn.c ****                      } else {
 4550              		.loc 1 2672 26 is_stmt 1 discriminator 4 view .LVU1656
2672:rtos/uC-FS/FAT/fs_fat_lfn.c ****                      } else {
 4551              		.loc 1 2672 27 is_stmt 0 discriminator 4 view .LVU1657
 4552 016a 0132     		adds	r2, r2, #1
 4553              	.LVL528:
2672:rtos/uC-FS/FAT/fs_fat_lfn.c ****                      } else {
 4554              		.loc 1 2672 27 discriminator 4 view .LVU1658
 4555 016c 92B2     		uxth	r2, r2
 4556              	.LVL529:
 4557              	.L312:
2679:rtos/uC-FS/FAT/fs_fat_lfn.c ****                          }
 4558              		.loc 1 2679 138 is_stmt 1 view .LVU1659
2682:rtos/uC-FS/FAT/fs_fat_lfn.c ****                      break;
 4559              		.loc 1 2682 22 view .LVU1660
2682:rtos/uC-FS/FAT/fs_fat_lfn.c ****                      break;
ARM GAS  /tmp/ccu2ENwm.s 			page 159


 4560              		.loc 1 2682 34 is_stmt 0 view .LVU1661
 4561 016e 0135     		adds	r5, r5, #1
 4562              	.LVL530:
2682:rtos/uC-FS/FAT/fs_fat_lfn.c ****                      break;
 4563              		.loc 1 2682 34 view .LVU1662
 4564 0170 ADB2     		uxth	r5, r5
 4565              	.LVL531:
2683:rtos/uC-FS/FAT/fs_fat_lfn.c ****             }
 4566              		.loc 1 2683 22 is_stmt 1 view .LVU1663
 4567              	.L305:
2686:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 (is_legal == DEF_YES)) {                        /* ... & name is still legal.      
 4568              		.loc 1 2686 13 view .LVU1664
2686:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 (is_legal == DEF_YES)) {                        /* ... & name is still legal.      
 4569              		.loc 1 2686 16 is_stmt 0 view .LVU1665
 4570 0172 09B9     		cbnz	r1, .L304
2686:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 (is_legal == DEF_YES)) {                        /* ... & name is still legal.      
 4571              		.loc 1 2686 38 discriminator 1 view .LVU1666
 4572 0174 012C     		cmp	r4, #1
 4573 0176 4CD0     		beq	.L336
 4574              	.LVL532:
 4575              	.L304:
2650:rtos/uC-FS/FAT/fs_fat_lfn.c ****                (is_legal == DEF_YES)) {
 4576              		.loc 1 2650 15 is_stmt 1 view .LVU1667
 4577 0178 0029     		cmp	r1, #0
 4578 017a 51D1     		bne	.L303
2650:rtos/uC-FS/FAT/fs_fat_lfn.c ****                (is_legal == DEF_YES)) {
 4579              		.loc 1 2650 37 is_stmt 0 discriminator 1 view .LVU1668
 4580 017c 012C     		cmp	r4, #1
 4581 017e 4FD1     		bne	.L303
2652:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 case ASCII_CHAR_SPACE:                          /* Skip embedded spaces (see Notes 
 4582              		.loc 1 2652 13 is_stmt 1 view .LVU1669
 4583 0180 202B     		cmp	r3, #32
 4584 0182 F6D0     		beq	.L305
 4585 0184 5C2B     		cmp	r3, #92
 4586 0186 40D0     		beq	.L326
 4587 0188 002B     		cmp	r3, #0
 4588 018a 40D0     		beq	.L327
2664:rtos/uC-FS/FAT/fs_fat_lfn.c **** #if (FS_CFG_UTF8_EN == DEF_ENABLED)
 4589              		.loc 1 2664 22 view .LVU1670
2664:rtos/uC-FS/FAT/fs_fat_lfn.c **** #if (FS_CFG_UTF8_EN == DEF_ENABLED)
 4590              		.loc 1 2664 31 is_stmt 0 view .LVU1671
 4591 018c 5D2B     		cmp	r3, #93
 4592 018e 03D9     		bls	.L306
2664:rtos/uC-FS/FAT/fs_fat_lfn.c **** #if (FS_CFG_UTF8_EN == DEF_ENABLED)
 4593              		.loc 1 2664 33 discriminator 1 view .LVU1672
 4594 0190 7C2B     		cmp	r3, #124
 4595 0192 01D0     		beq	.L306
2664:rtos/uC-FS/FAT/fs_fat_lfn.c **** #if (FS_CFG_UTF8_EN == DEF_ENABLED)
 4596              		.loc 1 2664 33 discriminator 3 view .LVU1673
 4597 0194 7F2B     		cmp	r3, #127
 4598 0196 DBD1     		bne	.L307
 4599              	.L306:
2664:rtos/uC-FS/FAT/fs_fat_lfn.c **** #if (FS_CFG_UTF8_EN == DEF_ENABLED)
 4600              		.loc 1 2664 33 discriminator 6 view .LVU1674
 4601 0198 A3F14006 		sub	r6, r3, #64
 4602 019c F6B2     		uxtb	r6, r6
 4603 019e 1A2E     		cmp	r6, #26
ARM GAS  /tmp/ccu2ENwm.s 			page 160


 4604 01a0 D6D9     		bls	.L307
2664:rtos/uC-FS/FAT/fs_fat_lfn.c **** #if (FS_CFG_UTF8_EN == DEF_ENABLED)
 4605              		.loc 1 2664 33 discriminator 8 view .LVU1675
 4606 01a2 A3F13006 		sub	r6, r3, #48
 4607 01a6 F6B2     		uxtb	r6, r6
 4608 01a8 092E     		cmp	r6, #9
 4609 01aa D1D9     		bls	.L307
2664:rtos/uC-FS/FAT/fs_fat_lfn.c **** #if (FS_CFG_UTF8_EN == DEF_ENABLED)
 4610              		.loc 1 2664 33 discriminator 10 view .LVU1676
 4611 01ac 2D2B     		cmp	r3, #45
 4612 01ae CFD0     		beq	.L307
2664:rtos/uC-FS/FAT/fs_fat_lfn.c **** #if (FS_CFG_UTF8_EN == DEF_ENABLED)
 4613              		.loc 1 2664 33 discriminator 12 view .LVU1677
 4614 01b0 A3F12106 		sub	r6, r3, #33
 4615 01b4 F6B2     		uxtb	r6, r6
 4616 01b6 082E     		cmp	r6, #8
 4617 01b8 01D8     		bhi	.L308
2664:rtos/uC-FS/FAT/fs_fat_lfn.c **** #if (FS_CFG_UTF8_EN == DEF_ENABLED)
 4618              		.loc 1 2664 33 discriminator 13 view .LVU1678
 4619 01ba 222B     		cmp	r3, #34
 4620 01bc C8D1     		bne	.L307
 4621              	.L308:
 4622              	.LVL533:
2670:rtos/uC-FS/FAT/fs_fat_lfn.c ****                          name_8_3_08[i] = ASCII_TO_UPPER(name_char);            /* See Notes #2a.  
 4623              		.loc 1 2670 22 is_stmt 1 view .LVU1679
2674:rtos/uC-FS/FAT/fs_fat_lfn.c ****                          if (is_legal == DEF_YES) {
 4624              		.loc 1 2674 26 view .LVU1680
2674:rtos/uC-FS/FAT/fs_fat_lfn.c ****                          if (is_legal == DEF_YES) {
 4625              		.loc 1 2674 35 is_stmt 0 view .LVU1681
 4626 01be 3F2B     		cmp	r3, #63
 4627 01c0 10D8     		bhi	.L309
 4628              	.L310:
2674:rtos/uC-FS/FAT/fs_fat_lfn.c ****                          if (is_legal == DEF_YES) {
 4629              		.loc 1 2674 37 discriminator 8 view .LVU1682
 4630 01c2 3D2B     		cmp	r3, #61
 4631 01c4 14D0     		beq	.L313
2674:rtos/uC-FS/FAT/fs_fat_lfn.c ****                          if (is_legal == DEF_YES) {
 4632              		.loc 1 2674 37 discriminator 10 view .LVU1683
 4633 01c6 3B2B     		cmp	r3, #59
 4634 01c8 12D0     		beq	.L313
2674:rtos/uC-FS/FAT/fs_fat_lfn.c ****                          if (is_legal == DEF_YES) {
 4635              		.loc 1 2674 37 discriminator 14 view .LVU1684
 4636 01ca A3F12006 		sub	r6, r3, #32
 4637 01ce F6B2     		uxtb	r6, r6
 4638 01d0 0E2E     		cmp	r6, #14
 4639 01d2 16D8     		bhi	.L329
2674:rtos/uC-FS/FAT/fs_fat_lfn.c ****                          if (is_legal == DEF_YES) {
 4640              		.loc 1 2674 37 discriminator 15 view .LVU1685
 4641 01d4 222B     		cmp	r3, #34
 4642 01d6 16D0     		beq	.L330
2674:rtos/uC-FS/FAT/fs_fat_lfn.c ****                          if (is_legal == DEF_YES) {
 4643              		.loc 1 2674 37 discriminator 17 view .LVU1686
 4644 01d8 2A2B     		cmp	r3, #42
 4645 01da 09D1     		bne	.L313
2674:rtos/uC-FS/FAT/fs_fat_lfn.c ****                          if (is_legal == DEF_YES) {
 4646              		.loc 1 2674 35 view .LVU1687
 4647 01dc 0C46     		mov	r4, r1
ARM GAS  /tmp/ccu2ENwm.s 			page 161


 4648 01de C6E7     		b	.L312
 4649              	.LVL534:
 4650              	.L328:
2671:rtos/uC-FS/FAT/fs_fat_lfn.c ****                          i++;
 4651              		.loc 1 2671 41 view .LVU1688
 4652 01e0 1E46     		mov	r6, r3
 4653 01e2 BDE7     		b	.L311
 4654              	.LVL535:
 4655              	.L309:
2674:rtos/uC-FS/FAT/fs_fat_lfn.c ****                          if (is_legal == DEF_YES) {
 4656              		.loc 1 2674 37 discriminator 1 view .LVU1689
 4657 01e4 5C2B     		cmp	r3, #92
 4658 01e6 ECD0     		beq	.L310
2674:rtos/uC-FS/FAT/fs_fat_lfn.c ****                          if (is_legal == DEF_YES) {
 4659              		.loc 1 2674 37 discriminator 3 view .LVU1690
 4660 01e8 7C2B     		cmp	r3, #124
 4661 01ea EAD0     		beq	.L310
2674:rtos/uC-FS/FAT/fs_fat_lfn.c ****                          if (is_legal == DEF_YES) {
 4662              		.loc 1 2674 37 discriminator 5 view .LVU1691
 4663 01ec 7F2B     		cmp	r3, #127
 4664 01ee E8D0     		beq	.L310
 4665              	.L313:
 4666              	.LVL536:
2676:rtos/uC-FS/FAT/fs_fat_lfn.c ****                              i++;
 4667              		.loc 1 2676 30 is_stmt 1 view .LVU1692
2676:rtos/uC-FS/FAT/fs_fat_lfn.c ****                              i++;
 4668              		.loc 1 2676 45 is_stmt 0 view .LVU1693
 4669 01f0 04AE     		add	r6, sp, #16
 4670 01f2 1644     		add	r6, r6, r2
 4671 01f4 4FF05F0C 		mov	ip, #95
 4672 01f8 06F80CCC 		strb	ip, [r6, #-12]
2677:rtos/uC-FS/FAT/fs_fat_lfn.c ****                          } else {
 4673              		.loc 1 2677 30 is_stmt 1 view .LVU1694
2677:rtos/uC-FS/FAT/fs_fat_lfn.c ****                          } else {
 4674              		.loc 1 2677 31 is_stmt 0 view .LVU1695
 4675 01fc 0132     		adds	r2, r2, #1
 4676              	.LVL537:
2677:rtos/uC-FS/FAT/fs_fat_lfn.c ****                          } else {
 4677              		.loc 1 2677 31 view .LVU1696
 4678 01fe 92B2     		uxth	r2, r2
 4679              	.LVL538:
2677:rtos/uC-FS/FAT/fs_fat_lfn.c ****                          } else {
 4680              		.loc 1 2677 31 view .LVU1697
 4681 0200 B5E7     		b	.L312
 4682              	.LVL539:
 4683              	.L329:
2674:rtos/uC-FS/FAT/fs_fat_lfn.c ****                          if (is_legal == DEF_YES) {
 4684              		.loc 1 2674 35 view .LVU1698
 4685 0202 0C46     		mov	r4, r1
 4686 0204 B3E7     		b	.L312
 4687              	.L330:
 4688 0206 0C46     		mov	r4, r1
 4689 0208 B1E7     		b	.L312
 4690              	.LVL540:
 4691              	.L326:
2659:rtos/uC-FS/FAT/fs_fat_lfn.c ****                      break;
 4692              		.loc 1 2659 30 view .LVU1699
ARM GAS  /tmp/ccu2ENwm.s 			page 162


 4693 020a 2146     		mov	r1, r4
 4694              	.LVL541:
2659:rtos/uC-FS/FAT/fs_fat_lfn.c ****                      break;
 4695              		.loc 1 2659 30 view .LVU1700
 4696 020c B1E7     		b	.L305
 4697              	.LVL542:
 4698              	.L327:
2659:rtos/uC-FS/FAT/fs_fat_lfn.c ****                      break;
 4699              		.loc 1 2659 30 view .LVU1701
 4700 020e 2146     		mov	r1, r4
 4701              	.LVL543:
2659:rtos/uC-FS/FAT/fs_fat_lfn.c ****                      break;
 4702              		.loc 1 2659 30 view .LVU1702
 4703 0210 AFE7     		b	.L305
 4704              	.LVL544:
 4705              	.L336:
2688:rtos/uC-FS/FAT/fs_fat_lfn.c ****                     is_done = DEF_YES;
 4706              		.loc 1 2688 17 is_stmt 1 view .LVU1703
2688:rtos/uC-FS/FAT/fs_fat_lfn.c ****                     is_done = DEF_YES;
 4707              		.loc 1 2688 20 is_stmt 0 view .LVU1704
 4708 0212 022D     		cmp	r5, #2
 4709 0214 02D8     		bhi	.L332
2702:rtos/uC-FS/FAT/fs_fat_lfn.c ****                     name_char = *p_period;
 4710              		.loc 1 2702 21 is_stmt 1 view .LVU1705
 4711              	.LVL545:
2703:rtos/uC-FS/FAT/fs_fat_lfn.c **** #endif
 4712              		.loc 1 2703 21 view .LVU1706
2703:rtos/uC-FS/FAT/fs_fat_lfn.c **** #endif
 4713              		.loc 1 2703 31 is_stmt 0 view .LVU1707
 4714 0216 1EF8013F 		ldrb	r3, [lr, #1]!	@ zero_extendqisi2
 4715              	.LVL546:
2703:rtos/uC-FS/FAT/fs_fat_lfn.c **** #endif
 4716              		.loc 1 2703 31 view .LVU1708
 4717 021a ADE7     		b	.L304
 4718              	.L332:
2689:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 } else {
 4719              		.loc 1 2689 29 view .LVU1709
 4720 021c 2146     		mov	r1, r4
 4721              	.LVL547:
2689:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 } else {
 4722              		.loc 1 2689 29 view .LVU1710
 4723 021e ABE7     		b	.L304
 4724              	.LVL548:
 4725              	.L303:
2713:rtos/uC-FS/FAT/fs_fat_lfn.c ****        *p_err = FS_ERR_NAME_INVALID;
 4726              		.loc 1 2713 5 is_stmt 1 view .LVU1711
2713:rtos/uC-FS/FAT/fs_fat_lfn.c ****        *p_err = FS_ERR_NAME_INVALID;
 4727              		.loc 1 2713 8 is_stmt 0 view .LVU1712
 4728 0220 94B3     		cbz	r4, .L337
2718:rtos/uC-FS/FAT/fs_fat_lfn.c ****     name_8_3[1] = MEM_VAL_GET_INT32U((void *)&name_8_3_08[4]);
 4729              		.loc 1 2718 5 is_stmt 1 view .LVU1713
2718:rtos/uC-FS/FAT/fs_fat_lfn.c ****     name_8_3[1] = MEM_VAL_GET_INT32U((void *)&name_8_3_08[4]);
 4730              		.loc 1 2718 19 is_stmt 0 view .LVU1714
 4731 0222 9DF80430 		ldrb	r3, [sp, #4]	@ zero_extendqisi2
 4732              	.LVL549:
2718:rtos/uC-FS/FAT/fs_fat_lfn.c ****     name_8_3[1] = MEM_VAL_GET_INT32U((void *)&name_8_3_08[4]);
 4733              		.loc 1 2718 19 view .LVU1715
ARM GAS  /tmp/ccu2ENwm.s 			page 163


 4734 0226 9DF80520 		ldrb	r2, [sp, #5]	@ zero_extendqisi2
 4735              	.LVL550:
2718:rtos/uC-FS/FAT/fs_fat_lfn.c ****     name_8_3[1] = MEM_VAL_GET_INT32U((void *)&name_8_3_08[4]);
 4736              		.loc 1 2718 19 view .LVU1716
 4737 022a 03EB0223 		add	r3, r3, r2, lsl #8
 4738 022e 9DF80620 		ldrb	r2, [sp, #6]	@ zero_extendqisi2
 4739 0232 03EB0243 		add	r3, r3, r2, lsl #16
 4740 0236 9DF80720 		ldrb	r2, [sp, #7]	@ zero_extendqisi2
 4741 023a 03EB0263 		add	r3, r3, r2, lsl #24
2718:rtos/uC-FS/FAT/fs_fat_lfn.c ****     name_8_3[1] = MEM_VAL_GET_INT32U((void *)&name_8_3_08[4]);
 4742              		.loc 1 2718 17 view .LVU1717
 4743 023e 3B60     		str	r3, [r7]
2719:rtos/uC-FS/FAT/fs_fat_lfn.c ****     name_8_3[2] = MEM_VAL_GET_INT32U((void *)&name_8_3_08[8]);
 4744              		.loc 1 2719 5 is_stmt 1 view .LVU1718
2719:rtos/uC-FS/FAT/fs_fat_lfn.c ****     name_8_3[2] = MEM_VAL_GET_INT32U((void *)&name_8_3_08[8]);
 4745              		.loc 1 2719 19 is_stmt 0 view .LVU1719
 4746 0240 9DF80830 		ldrb	r3, [sp, #8]	@ zero_extendqisi2
 4747 0244 9DF80920 		ldrb	r2, [sp, #9]	@ zero_extendqisi2
 4748 0248 03EB0223 		add	r3, r3, r2, lsl #8
 4749 024c 9DF80A20 		ldrb	r2, [sp, #10]	@ zero_extendqisi2
 4750 0250 03EB0243 		add	r3, r3, r2, lsl #16
 4751 0254 9DF80B20 		ldrb	r2, [sp, #11]	@ zero_extendqisi2
 4752 0258 03EB0263 		add	r3, r3, r2, lsl #24
2719:rtos/uC-FS/FAT/fs_fat_lfn.c ****     name_8_3[2] = MEM_VAL_GET_INT32U((void *)&name_8_3_08[8]);
 4753              		.loc 1 2719 17 view .LVU1720
 4754 025c 7B60     		str	r3, [r7, #4]
2720:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 4755              		.loc 1 2720 5 is_stmt 1 view .LVU1721
2720:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 4756              		.loc 1 2720 19 is_stmt 0 view .LVU1722
 4757 025e 9DF80C30 		ldrb	r3, [sp, #12]	@ zero_extendqisi2
 4758 0262 9DF80D20 		ldrb	r2, [sp, #13]	@ zero_extendqisi2
 4759 0266 03EB0223 		add	r3, r3, r2, lsl #8
 4760 026a 9DF80E20 		ldrb	r2, [sp, #14]	@ zero_extendqisi2
 4761 026e 03EB0243 		add	r3, r3, r2, lsl #16
 4762 0272 9DF80F20 		ldrb	r2, [sp, #15]	@ zero_extendqisi2
 4763 0276 03EB0263 		add	r3, r3, r2, lsl #24
2720:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 4764              		.loc 1 2720 17 view .LVU1723
 4765 027a BB60     		str	r3, [r7, #8]
2722:rtos/uC-FS/FAT/fs_fat_lfn.c ****     return (char_cnt);
 4766              		.loc 1 2722 4 is_stmt 1 view .LVU1724
2722:rtos/uC-FS/FAT/fs_fat_lfn.c ****     return (char_cnt);
 4767              		.loc 1 2722 11 is_stmt 0 view .LVU1725
 4768 027c 0023     		movs	r3, #0
 4769 027e A8F80030 		strh	r3, [r8]	@ movhi
2723:rtos/uC-FS/FAT/fs_fat_lfn.c **** }
 4770              		.loc 1 2723 5 is_stmt 1 view .LVU1726
 4771              	.LVL551:
 4772              	.L302:
2724:rtos/uC-FS/FAT/fs_fat_lfn.c **** #endif
 4773              		.loc 1 2724 1 is_stmt 0 view .LVU1727
 4774 0282 04B0     		add	sp, sp, #16
 4775              	.LCFI46:
 4776              		.cfi_remember_state
 4777              		.cfi_def_cfa_offset 24
 4778              		@ sp needed
ARM GAS  /tmp/ccu2ENwm.s 			page 164


 4779 0284 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 4780              	.LVL552:
 4781              	.L337:
 4782              	.LCFI47:
 4783              		.cfi_restore_state
2714:rtos/uC-FS/FAT/fs_fat_lfn.c ****         return (0u);
 4784              		.loc 1 2714 8 is_stmt 1 view .LVU1728
2714:rtos/uC-FS/FAT/fs_fat_lfn.c ****         return (0u);
 4785              		.loc 1 2714 15 is_stmt 0 view .LVU1729
 4786 0288 40F28733 		movw	r3, #903
 4787              	.LVL553:
2714:rtos/uC-FS/FAT/fs_fat_lfn.c ****         return (0u);
 4788              		.loc 1 2714 15 view .LVU1730
 4789 028c A8F80030 		strh	r3, [r8]	@ movhi
2715:rtos/uC-FS/FAT/fs_fat_lfn.c ****     }
 4790              		.loc 1 2715 9 is_stmt 1 view .LVU1731
2715:rtos/uC-FS/FAT/fs_fat_lfn.c ****     }
 4791              		.loc 1 2715 16 is_stmt 0 view .LVU1732
 4792 0290 0020     		movs	r0, #0
 4793              	.LVL554:
2715:rtos/uC-FS/FAT/fs_fat_lfn.c ****     }
 4794              		.loc 1 2715 16 view .LVU1733
 4795 0292 F6E7     		b	.L302
 4796              		.cfi_endproc
 4797              	.LFE13:
 4799              		.section	.text.FS_FAT_LFN_SFN_Alloc,"ax",%progbits
 4800              		.align	1
 4801              		.syntax unified
 4802              		.thumb
 4803              		.thumb_func
 4804              		.fpu fpv4-sp-d16
 4806              	FS_FAT_LFN_SFN_Alloc:
 4807              	.LVL555:
 4808              	.LFB12:
2387:rtos/uC-FS/FAT/fs_fat_lfn.c ****     CPU_INT16U       char_cnt;
 4809              		.loc 1 2387 1 is_stmt 1 view -0
 4810              		.cfi_startproc
 4811              		@ args = 8, pretend = 0, frame = 16
 4812              		@ frame_needed = 0, uses_anonymous_args = 0
2387:rtos/uC-FS/FAT/fs_fat_lfn.c ****     CPU_INT16U       char_cnt;
 4813              		.loc 1 2387 1 is_stmt 0 view .LVU1735
 4814 0000 2DE9F043 		push	{r4, r5, r6, r7, r8, r9, lr}
 4815              	.LCFI48:
 4816              		.cfi_def_cfa_offset 28
 4817              		.cfi_offset 4, -28
 4818              		.cfi_offset 5, -24
 4819              		.cfi_offset 6, -20
 4820              		.cfi_offset 7, -16
 4821              		.cfi_offset 8, -12
 4822              		.cfi_offset 9, -8
 4823              		.cfi_offset 14, -4
 4824 0004 87B0     		sub	sp, sp, #28
 4825              	.LCFI49:
 4826              		.cfi_def_cfa_offset 56
 4827 0006 0646     		mov	r6, r0
 4828 0008 0F46     		mov	r7, r1
 4829 000a 1046     		mov	r0, r2
ARM GAS  /tmp/ccu2ENwm.s 			page 165


 4830              	.LVL556:
2387:rtos/uC-FS/FAT/fs_fat_lfn.c ****     CPU_INT16U       char_cnt;
 4831              		.loc 1 2387 1 view .LVU1736
 4832 000c 1C46     		mov	r4, r3
 4833 000e 0F9D     		ldr	r5, [sp, #60]
2388:rtos/uC-FS/FAT/fs_fat_lfn.c ****     FS_FAT_DIR_POS   dir_start_pos;
 4834              		.loc 1 2388 5 is_stmt 1 view .LVU1737
2389:rtos/uC-FS/FAT/fs_fat_lfn.c ****     FS_FAT_DIR_POS   dir_end_pos;
 4835              		.loc 1 2389 5 view .LVU1738
2390:rtos/uC-FS/FAT/fs_fat_lfn.c ****     FS_FAT_SFN_TAIL  tail_nbr;
 4836              		.loc 1 2390 5 view .LVU1739
2391:rtos/uC-FS/FAT/fs_fat_lfn.c ****     FS_FAT_SFN_TAIL  tail_max;
 4837              		.loc 1 2391 5 view .LVU1740
2392:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 4838              		.loc 1 2392 5 view .LVU1741
2397:rtos/uC-FS/FAT/fs_fat_lfn.c ****     if (*p_err != FS_ERR_NONE) {
 4839              		.loc 1 2397 5 view .LVU1742
2397:rtos/uC-FS/FAT/fs_fat_lfn.c ****     if (*p_err != FS_ERR_NONE) {
 4840              		.loc 1 2397 16 is_stmt 0 view .LVU1743
 4841 0010 2A46     		mov	r2, r5
 4842              	.LVL557:
2397:rtos/uC-FS/FAT/fs_fat_lfn.c ****     if (*p_err != FS_ERR_NONE) {
 4843              		.loc 1 2397 16 view .LVU1744
 4844 0012 1946     		mov	r1, r3
 4845              	.LVL558:
2397:rtos/uC-FS/FAT/fs_fat_lfn.c ****     if (*p_err != FS_ERR_NONE) {
 4846              		.loc 1 2397 16 view .LVU1745
 4847 0014 FFF7FEFF 		bl	FS_FAT_LFN_SFN_Fmt
 4848              	.LVL559:
2398:rtos/uC-FS/FAT/fs_fat_lfn.c ****         return;
 4849              		.loc 1 2398 5 is_stmt 1 view .LVU1746
2398:rtos/uC-FS/FAT/fs_fat_lfn.c ****         return;
 4850              		.loc 1 2398 9 is_stmt 0 view .LVU1747
 4851 0018 2B88     		ldrh	r3, [r5]
2398:rtos/uC-FS/FAT/fs_fat_lfn.c ****         return;
 4852              		.loc 1 2398 8 view .LVU1748
 4853 001a 13B1     		cbz	r3, .L348
 4854              	.LVL560:
 4855              	.L338:
2469:rtos/uC-FS/FAT/fs_fat_lfn.c **** #endif
 4856              		.loc 1 2469 1 view .LVU1749
 4857 001c 07B0     		add	sp, sp, #28
 4858              	.LCFI50:
 4859              		.cfi_remember_state
 4860              		.cfi_def_cfa_offset 28
 4861              		@ sp needed
 4862 001e BDE8F083 		pop	{r4, r5, r6, r7, r8, r9, pc}
 4863              	.LVL561:
 4864              	.L348:
 4865              	.LCFI51:
 4866              		.cfi_restore_state
2469:rtos/uC-FS/FAT/fs_fat_lfn.c **** #endif
 4867              		.loc 1 2469 1 view .LVU1750
 4868 0022 8146     		mov	r9, r0
2405:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                               p_buf,
 4869              		.loc 1 2405 5 is_stmt 1 view .LVU1751
2405:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                               p_buf,
ARM GAS  /tmp/ccu2ENwm.s 			page 166


 4870              		.loc 1 2405 16 is_stmt 0 view .LVU1752
 4871 0024 0095     		str	r5, [sp]
 4872 0026 0E9B     		ldr	r3, [sp, #56]
 4873 0028 2246     		mov	r2, r4
 4874 002a 3946     		mov	r1, r7
 4875 002c 3046     		mov	r0, r6
 4876              	.LVL562:
2405:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                               p_buf,
 4877              		.loc 1 2405 16 view .LVU1753
 4878 002e FFF7FEFF 		bl	FS_FAT_LFN_SFN_DirEntryFindMax
 4879              	.LVL563:
2410:rtos/uC-FS/FAT/fs_fat_lfn.c ****     if (tail_max == 0u) {
 4880              		.loc 1 2410 5 is_stmt 1 view .LVU1754
2411:rtos/uC-FS/FAT/fs_fat_lfn.c ****         tail_nbr =  1u;
 4881              		.loc 1 2411 5 view .LVU1755
2411:rtos/uC-FS/FAT/fs_fat_lfn.c ****         tail_nbr =  1u;
 4882              		.loc 1 2411 8 is_stmt 0 view .LVU1756
 4883 0032 0028     		cmp	r0, #0
 4884 0034 34D0     		beq	.L345
2414:rtos/uC-FS/FAT/fs_fat_lfn.c ****             tail_nbr = tail_max + 1u;
 4885              		.loc 1 2414 9 is_stmt 1 view .LVU1757
2414:rtos/uC-FS/FAT/fs_fat_lfn.c ****             tail_nbr = tail_max + 1u;
 4886              		.loc 1 2414 12 is_stmt 0 view .LVU1758
 4887 0036 1C4B     		ldr	r3, .L349
 4888 0038 9842     		cmp	r0, r3
 4889 003a 09D8     		bhi	.L346
2415:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 4890              		.loc 1 2415 13 is_stmt 1 view .LVU1759
2415:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 4891              		.loc 1 2415 22 is_stmt 0 view .LVU1760
 4892 003c 00F10108 		add	r8, r0, #1
 4893              	.LVL564:
 4894              	.L340:
2464:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 4895              		.loc 1 2464 5 is_stmt 1 view .LVU1761
 4896 0040 4246     		mov	r2, r8
 4897 0042 4946     		mov	r1, r9
 4898 0044 2046     		mov	r0, r4
 4899 0046 FFF7FEFF 		bl	FS_FAT_LFN_SFN_FmtTail
 4900              	.LVL565:
2466:rtos/uC-FS/FAT/fs_fat_lfn.c ****     FS_TRACE_LOG(("                            %s\r\n",             (CPU_CHAR *)name));
 4901              		.loc 1 2466 91 view .LVU1762
2467:rtos/uC-FS/FAT/fs_fat_lfn.c ****    *p_err = FS_ERR_NONE;
 4902              		.loc 1 2467 87 view .LVU1763
2468:rtos/uC-FS/FAT/fs_fat_lfn.c **** }
 4903              		.loc 1 2468 4 view .LVU1764
2468:rtos/uC-FS/FAT/fs_fat_lfn.c **** }
 4904              		.loc 1 2468 11 is_stmt 0 view .LVU1765
 4905 004a 0023     		movs	r3, #0
 4906 004c 2B80     		strh	r3, [r5]	@ movhi
 4907 004e E5E7     		b	.L338
 4908              	.LVL566:
 4909              	.L346:
2420:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 4910              		.loc 1 2420 22 view .LVU1766
 4911 0050 4FF00108 		mov	r8, #1
 4912              	.LVL567:
ARM GAS  /tmp/ccu2ENwm.s 			page 167


 4913              	.L341:
2422:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 FS_FAT_LFN_SFN_FmtTail(name_8_3, char_cnt, tail_nbr);
 4914              		.loc 1 2422 19 is_stmt 1 view .LVU1767
 4915 0054 154B     		ldr	r3, .L349+4
 4916 0056 9845     		cmp	r8, r3
 4917 0058 1BD8     		bhi	.L342
2423:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 4918              		.loc 1 2423 17 view .LVU1768
 4919 005a 4246     		mov	r2, r8
 4920 005c 4946     		mov	r1, r9
 4921 005e 2046     		mov	r0, r4
 4922 0060 FFF7FEFF 		bl	FS_FAT_LFN_SFN_FmtTail
 4923              	.LVL568:
2426:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 dir_start_pos.SecPos = 0u;
 4924              		.loc 1 2426 17 view .LVU1769
2426:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 dir_start_pos.SecPos = 0u;
 4925              		.loc 1 2426 38 is_stmt 0 view .LVU1770
 4926 0064 0E9B     		ldr	r3, [sp, #56]
 4927 0066 0493     		str	r3, [sp, #16]
2427:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 FS_FAT_SFN_SFN_Find( p_vol,
 4928              		.loc 1 2427 17 is_stmt 1 view .LVU1771
2427:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 FS_FAT_SFN_SFN_Find( p_vol,
 4929              		.loc 1 2427 38 is_stmt 0 view .LVU1772
 4930 0068 0023     		movs	r3, #0
 4931 006a 0593     		str	r3, [sp, #20]
2428:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                      p_buf,
 4932              		.loc 1 2428 17 is_stmt 1 view .LVU1773
 4933 006c 0195     		str	r5, [sp, #4]
 4934 006e 02AB     		add	r3, sp, #8
 4935 0070 0093     		str	r3, [sp]
 4936 0072 04AB     		add	r3, sp, #16
 4937 0074 2246     		mov	r2, r4
 4938 0076 3946     		mov	r1, r7
 4939 0078 3046     		mov	r0, r6
 4940 007a FFF7FEFF 		bl	FS_FAT_SFN_SFN_Find
 4941              	.LVL569:
2435:rtos/uC-FS/FAT/fs_fat_lfn.c ****                     break;
 4942              		.loc 1 2435 17 view .LVU1774
2435:rtos/uC-FS/FAT/fs_fat_lfn.c ****                     break;
 4943              		.loc 1 2435 21 is_stmt 0 view .LVU1775
 4944 007e 2B88     		ldrh	r3, [r5]
2435:rtos/uC-FS/FAT/fs_fat_lfn.c ****                     break;
 4945              		.loc 1 2435 20 view .LVU1776
 4946 0080 40F23352 		movw	r2, #1331
 4947 0084 9342     		cmp	r3, r2
 4948 0086 04D0     		beq	.L342
2439:rtos/uC-FS/FAT/fs_fat_lfn.c ****                     case FS_ERR_NONE:                           /* SFN found, so collision.        
 4949              		.loc 1 2439 17 is_stmt 1 view .LVU1777
 4950 0088 002B     		cmp	r3, #0
 4951 008a C7D1     		bne	.L338
2441:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 4952              		.loc 1 2441 26 view .LVU1778
2451:rtos/uC-FS/FAT/fs_fat_lfn.c ****             }
 4953              		.loc 1 2451 17 view .LVU1779
2451:rtos/uC-FS/FAT/fs_fat_lfn.c ****             }
 4954              		.loc 1 2451 25 is_stmt 0 view .LVU1780
 4955 008c 08F10108 		add	r8, r8, #1
ARM GAS  /tmp/ccu2ENwm.s 			page 168


 4956              	.LVL570:
2451:rtos/uC-FS/FAT/fs_fat_lfn.c ****             }
 4957              		.loc 1 2451 25 view .LVU1781
 4958 0090 E0E7     		b	.L341
 4959              	.L342:
2454:rtos/uC-FS/FAT/fs_fat_lfn.c ****                *p_err = FS_ERR_SYS_SFN_NOT_AVAIL;
 4960              		.loc 1 2454 13 is_stmt 1 view .LVU1782
2454:rtos/uC-FS/FAT/fs_fat_lfn.c ****                *p_err = FS_ERR_SYS_SFN_NOT_AVAIL;
 4961              		.loc 1 2454 16 is_stmt 0 view .LVU1783
 4962 0092 064B     		ldr	r3, .L349+4
 4963 0094 9845     		cmp	r8, r3
 4964 0096 D3D9     		bls	.L340
2455:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 return;
 4965              		.loc 1 2455 16 is_stmt 1 view .LVU1784
2455:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 return;
 4966              		.loc 1 2455 23 is_stmt 0 view .LVU1785
 4967 0098 40F23A53 		movw	r3, #1338
 4968 009c 2B80     		strh	r3, [r5]	@ movhi
2456:rtos/uC-FS/FAT/fs_fat_lfn.c ****             }
 4969              		.loc 1 2456 17 is_stmt 1 view .LVU1786
 4970 009e BDE7     		b	.L338
 4971              	.LVL571:
 4972              	.L345:
2412:rtos/uC-FS/FAT/fs_fat_lfn.c ****     } else {
 4973              		.loc 1 2412 18 is_stmt 0 view .LVU1787
 4974 00a0 4FF00108 		mov	r8, #1
 4975 00a4 CCE7     		b	.L340
 4976              	.L350:
 4977 00a6 00BF     		.align	2
 4978              	.L349:
 4979 00a8 3E420F00 		.word	999998
 4980 00ac 3F420F00 		.word	999999
 4981              		.cfi_endproc
 4982              	.LFE12:
 4984              		.section	.text.FS_FAT_LFN_DirEntryCreate,"ax",%progbits
 4985              		.align	1
 4986              		.syntax unified
 4987              		.thumb
 4988              		.thumb_func
 4989              		.fpu fpv4-sp-d16
 4991              	FS_FAT_LFN_DirEntryCreate:
 4992              	.LVL572:
 4993              	.LFB0:
 518:rtos/uC-FS/FAT/fs_fat_lfn.c ****     FS_FAT_DIR_POS        dir_cur_pos;
 4994              		.loc 1 518 1 is_stmt 1 view -0
 4995              		.cfi_startproc
 4996              		@ args = 16, pretend = 0, frame = 40
 4997              		@ frame_needed = 0, uses_anonymous_args = 0
 518:rtos/uC-FS/FAT/fs_fat_lfn.c ****     FS_FAT_DIR_POS        dir_cur_pos;
 4998              		.loc 1 518 1 is_stmt 0 view .LVU1789
 4999 0000 2DE9F047 		push	{r4, r5, r6, r7, r8, r9, r10, lr}
 5000              	.LCFI52:
 5001              		.cfi_def_cfa_offset 32
 5002              		.cfi_offset 4, -32
 5003              		.cfi_offset 5, -28
 5004              		.cfi_offset 6, -24
 5005              		.cfi_offset 7, -20
ARM GAS  /tmp/ccu2ENwm.s 			page 169


 5006              		.cfi_offset 8, -16
 5007              		.cfi_offset 9, -12
 5008              		.cfi_offset 10, -8
 5009              		.cfi_offset 14, -4
 5010 0004 90B0     		sub	sp, sp, #64
 5011              	.LCFI53:
 5012              		.cfi_def_cfa_offset 96
 5013 0006 8046     		mov	r8, r0
 5014 0008 8946     		mov	r9, r1
 5015 000a 1646     		mov	r6, r2
 5016 000c 9A46     		mov	r10, r3
 5017 000e 1A9F     		ldr	r7, [sp, #104]
 5018 0010 1B9D     		ldr	r5, [sp, #108]
 519:rtos/uC-FS/FAT/fs_fat_lfn.c ****     FS_FAT_DIR_ENTRY_QTY  dir_entry_cnt;
 5019              		.loc 1 519 5 is_stmt 1 view .LVU1790
 520:rtos/uC-FS/FAT/fs_fat_lfn.c ****     CPU_BOOLEAN           ext_lower_case;
 5020              		.loc 1 520 5 view .LVU1791
 521:rtos/uC-FS/FAT/fs_fat_lfn.c ****     CPU_BOOLEAN           formed;
 5021              		.loc 1 521 5 view .LVU1792
 522:rtos/uC-FS/FAT/fs_fat_lfn.c ****     CPU_INT32U            name_8_3[4];
 5022              		.loc 1 522 5 view .LVU1793
 523:rtos/uC-FS/FAT/fs_fat_lfn.c ****     FS_FILE_NAME_LEN      name_len;
 5023              		.loc 1 523 5 view .LVU1794
 524:rtos/uC-FS/FAT/fs_fat_lfn.c ****     FS_FILE_NAME_LEN      name_len_octet;
 5024              		.loc 1 524 5 view .LVU1795
 525:rtos/uC-FS/FAT/fs_fat_lfn.c ****     CPU_BOOLEAN           name_lower_case;
 5025              		.loc 1 525 5 view .LVU1796
 526:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 5026              		.loc 1 526 5 view .LVU1797
 529:rtos/uC-FS/FAT/fs_fat_lfn.c ****     p_dir_end_pos->SecPos = 0u;
 5027              		.loc 1 529 5 view .LVU1798
 529:rtos/uC-FS/FAT/fs_fat_lfn.c ****     p_dir_end_pos->SecPos = 0u;
 5028              		.loc 1 529 27 is_stmt 0 view .LVU1799
 5029 0012 0023     		movs	r3, #0
 5030              	.LVL573:
 529:rtos/uC-FS/FAT/fs_fat_lfn.c ****     p_dir_end_pos->SecPos = 0u;
 5031              		.loc 1 529 27 view .LVU1800
 5032 0014 3B60     		str	r3, [r7]
 530:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 5033              		.loc 1 530 5 is_stmt 1 view .LVU1801
 530:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 5034              		.loc 1 530 27 is_stmt 0 view .LVU1802
 5035 0016 7B60     		str	r3, [r7, #4]
 535:rtos/uC-FS/FAT/fs_fat_lfn.c ****                    &name_len,
 5036              		.loc 1 535 5 is_stmt 1 view .LVU1803
 5037 0018 2B46     		mov	r3, r5
 5038 001a 08AA     		add	r2, sp, #32
 5039              	.LVL574:
 535:rtos/uC-FS/FAT/fs_fat_lfn.c ****                    &name_len,
 5040              		.loc 1 535 5 is_stmt 0 view .LVU1804
 5041 001c 0DF12201 		add	r1, sp, #34
 5042              	.LVL575:
 535:rtos/uC-FS/FAT/fs_fat_lfn.c ****                    &name_len,
 5043              		.loc 1 535 5 view .LVU1805
 5044 0020 3046     		mov	r0, r6
 5045              	.LVL576:
 535:rtos/uC-FS/FAT/fs_fat_lfn.c ****                    &name_len,
ARM GAS  /tmp/ccu2ENwm.s 			page 170


 5046              		.loc 1 535 5 view .LVU1806
 5047 0022 FFF7FEFF 		bl	FS_FAT_LFN_Chk
 5048              	.LVL577:
 540:rtos/uC-FS/FAT/fs_fat_lfn.c ****          return;
 5049              		.loc 1 540 5 is_stmt 1 view .LVU1807
 540:rtos/uC-FS/FAT/fs_fat_lfn.c ****          return;
 5050              		.loc 1 540 9 is_stmt 0 view .LVU1808
 5051 0026 2B88     		ldrh	r3, [r5]
 540:rtos/uC-FS/FAT/fs_fat_lfn.c ****          return;
 5052              		.loc 1 540 8 view .LVU1809
 5053 0028 13B1     		cbz	r3, .L358
 5054              	.L351:
 634:rtos/uC-FS/FAT/fs_fat_lfn.c **** #endif
 5055              		.loc 1 634 1 view .LVU1810
 5056 002a 10B0     		add	sp, sp, #64
 5057              	.LCFI54:
 5058              		.cfi_remember_state
 5059              		.cfi_def_cfa_offset 32
 5060              		@ sp needed
 5061 002c BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, r10, pc}
 5062              	.LVL578:
 5063              	.L358:
 5064              	.LCFI55:
 5065              		.cfi_restore_state
 545:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 5066              		.loc 1 545 5 is_stmt 1 view .LVU1811
 545:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 5067              		.loc 1 545 84 is_stmt 0 view .LVU1812
 5068 0030 BDF82240 		ldrh	r4, [sp, #34]
 5069 0034 0C34     		adds	r4, r4, #12
 545:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 5070              		.loc 1 545 90 view .LVU1813
 5071 0036 2E4A     		ldr	r2, .L361
 5072 0038 A2FB0434 		umull	r3, r4, r2, r4
 545:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 5073              		.loc 1 545 19 view .LVU1814
 5074 003c C4F38704 		ubfx	r4, r4, #2, #8
 5075              	.LVL579:
 547:rtos/uC-FS/FAT/fs_fat_lfn.c ****                               p_buf,
 5076              		.loc 1 547 5 is_stmt 1 view .LVU1815
 5077 0040 0134     		adds	r4, r4, #1
 5078              	.LVL580:
 547:rtos/uC-FS/FAT/fs_fat_lfn.c ****                               p_buf,
 5079              		.loc 1 547 5 is_stmt 0 view .LVU1816
 5080 0042 0195     		str	r5, [sp, #4]
 5081 0044 0EAB     		add	r3, sp, #56
 5082 0046 0093     		str	r3, [sp]
 5083 0048 199B     		ldr	r3, [sp, #100]
 5084 004a 1B68     		ldr	r3, [r3]
 5085 004c E2B2     		uxtb	r2, r4
 5086 004e 4946     		mov	r1, r9
 5087 0050 4046     		mov	r0, r8
 5088 0052 FFF7FEFF 		bl	FS_FAT_LFN_DirEntryPlace
 5089              	.LVL581:
 555:rtos/uC-FS/FAT/fs_fat_lfn.c ****         case FS_ERR_NONE:
 5090              		.loc 1 555 5 is_stmt 1 view .LVU1817
 555:rtos/uC-FS/FAT/fs_fat_lfn.c ****         case FS_ERR_NONE:
ARM GAS  /tmp/ccu2ENwm.s 			page 171


 5091              		.loc 1 555 13 is_stmt 0 view .LVU1818
 5092 0056 2B88     		ldrh	r3, [r5]
 555:rtos/uC-FS/FAT/fs_fat_lfn.c ****         case FS_ERR_NONE:
 5093              		.loc 1 555 5 view .LVU1819
 5094 0058 002B     		cmp	r3, #0
 5095 005a E6D1     		bne	.L351
 557:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 5096              		.loc 1 557 14 is_stmt 1 view .LVU1820
 575:rtos/uC-FS/FAT/fs_fat_lfn.c ****     if (name_len_octet == name_len) {                           /* If name contains only 8-bit char
 5097              		.loc 1 575 5 view .LVU1821
 5098              	.LVL582:
 576:rtos/uC-FS/FAT/fs_fat_lfn.c ****         FS_FAT_SFN_Create( name,                                /* ... try to form SFN directly fro
 5099              		.loc 1 576 5 view .LVU1822
 576:rtos/uC-FS/FAT/fs_fat_lfn.c ****         FS_FAT_SFN_Create( name,                                /* ... try to form SFN directly fro
 5100              		.loc 1 576 24 is_stmt 0 view .LVU1823
 5101 005c BDF82020 		ldrh	r2, [sp, #32]
 5102 0060 BDF82230 		ldrh	r3, [sp, #34]
 576:rtos/uC-FS/FAT/fs_fat_lfn.c ****         FS_FAT_SFN_Create( name,                                /* ... try to form SFN directly fro
 5103              		.loc 1 576 8 view .LVU1824
 5104 0064 9A42     		cmp	r2, r3
 5105 0066 26D0     		beq	.L359
 5106              	.L353:
 5107              	.LVL583:
 602:rtos/uC-FS/FAT/fs_fat_lfn.c ****                               p_buf,
 5108              		.loc 1 602 9 is_stmt 1 view .LVU1825
 5109 0068 0195     		str	r5, [sp, #4]
 5110 006a 199B     		ldr	r3, [sp, #100]
 5111 006c 1B68     		ldr	r3, [r3]
 5112 006e 0093     		str	r3, [sp]
 5113 0070 09AB     		add	r3, sp, #36
 5114 0072 3246     		mov	r2, r6
 5115 0074 4946     		mov	r1, r9
 5116 0076 4046     		mov	r0, r8
 5117 0078 FFF7FEFF 		bl	FS_FAT_LFN_SFN_Alloc
 5118              	.LVL584:
 609:rtos/uC-FS/FAT/fs_fat_lfn.c ****              return;
 5119              		.loc 1 609 9 view .LVU1826
 609:rtos/uC-FS/FAT/fs_fat_lfn.c ****              return;
 5120              		.loc 1 609 13 is_stmt 0 view .LVU1827
 5121 007c 2B88     		ldrh	r3, [r5]
 609:rtos/uC-FS/FAT/fs_fat_lfn.c ****              return;
 5122              		.loc 1 609 12 view .LVU1828
 5123 007e 002B     		cmp	r3, #0
 5124 0080 D3D1     		bne	.L351
 5125              	.L355:
 617:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                  p_buf,
 5126              		.loc 1 617 5 is_stmt 1 view .LVU1829
 5127 0082 0595     		str	r5, [sp, #20]
 5128 0084 0497     		str	r7, [sp, #16]
 5129 0086 0EAB     		add	r3, sp, #56
 5130 0088 0393     		str	r3, [sp, #12]
 5131 008a 189B     		ldr	r3, [sp, #96]
 5132 008c 0293     		str	r3, [sp, #8]
 5133 008e CDF804A0 		str	r10, [sp, #4]
 5134 0092 09AB     		add	r3, sp, #36
 5135 0094 0093     		str	r3, [sp]
 5136 0096 BDF82230 		ldrh	r3, [sp, #34]
ARM GAS  /tmp/ccu2ENwm.s 			page 172


 5137 009a 3246     		mov	r2, r6
 5138 009c 4946     		mov	r1, r9
 5139 009e 4046     		mov	r0, r8
 5140 00a0 FFF7FEFF 		bl	FS_FAT_LFN_DirEntryCreateAt
 5141              	.LVL585:
 628:rtos/uC-FS/FAT/fs_fat_lfn.c ****         return;
 5142              		.loc 1 628 5 view .LVU1830
 628:rtos/uC-FS/FAT/fs_fat_lfn.c ****         return;
 5143              		.loc 1 628 9 is_stmt 0 view .LVU1831
 5144 00a4 2B88     		ldrh	r3, [r5]
 628:rtos/uC-FS/FAT/fs_fat_lfn.c ****         return;
 5145              		.loc 1 628 8 view .LVU1832
 5146 00a6 002B     		cmp	r3, #0
 5147 00a8 BFD1     		bne	.L351
 632:rtos/uC-FS/FAT/fs_fat_lfn.c ****     p_dir_start_pos->SecPos = dir_cur_pos.SecPos;
 5148              		.loc 1 632 5 is_stmt 1 view .LVU1833
 632:rtos/uC-FS/FAT/fs_fat_lfn.c ****     p_dir_start_pos->SecPos = dir_cur_pos.SecPos;
 5149              		.loc 1 632 42 is_stmt 0 view .LVU1834
 5150 00aa 0E9B     		ldr	r3, [sp, #56]
 632:rtos/uC-FS/FAT/fs_fat_lfn.c ****     p_dir_start_pos->SecPos = dir_cur_pos.SecPos;
 5151              		.loc 1 632 29 view .LVU1835
 5152 00ac 199A     		ldr	r2, [sp, #100]
 5153 00ae 1360     		str	r3, [r2]
 633:rtos/uC-FS/FAT/fs_fat_lfn.c **** }
 5154              		.loc 1 633 5 is_stmt 1 view .LVU1836
 633:rtos/uC-FS/FAT/fs_fat_lfn.c **** }
 5155              		.loc 1 633 42 is_stmt 0 view .LVU1837
 5156 00b0 0F9B     		ldr	r3, [sp, #60]
 633:rtos/uC-FS/FAT/fs_fat_lfn.c **** }
 5157              		.loc 1 633 29 view .LVU1838
 5158 00b2 5360     		str	r3, [r2, #4]
 5159 00b4 B9E7     		b	.L351
 5160              	.LVL586:
 5161              	.L359:
 577:rtos/uC-FS/FAT/fs_fat_lfn.c ****                           &name_8_3[0],
 5162              		.loc 1 577 9 is_stmt 1 view .LVU1839
 5163 00b6 0095     		str	r5, [sp]
 5164 00b8 0DF13703 		add	r3, sp, #55
 5165 00bc 0DF11F02 		add	r2, sp, #31
 5166 00c0 09A9     		add	r1, sp, #36
 5167 00c2 3046     		mov	r0, r6
 5168 00c4 FFF7FEFF 		bl	FS_FAT_SFN_Create
 5169              	.LVL587:
 583:rtos/uC-FS/FAT/fs_fat_lfn.c ****             FS_FAT_SFN_API.DirEntryCreate(p_vol,                /* ... create only SFN.            
 5170              		.loc 1 583 9 view .LVU1840
 583:rtos/uC-FS/FAT/fs_fat_lfn.c ****             FS_FAT_SFN_API.DirEntryCreate(p_vol,                /* ... create only SFN.            
 5171              		.loc 1 583 13 is_stmt 0 view .LVU1841
 5172 00c8 2B88     		ldrh	r3, [r5]
 583:rtos/uC-FS/FAT/fs_fat_lfn.c ****             FS_FAT_SFN_API.DirEntryCreate(p_vol,                /* ... create only SFN.            
 5173              		.loc 1 583 12 view .LVU1842
 5174 00ca 1BB1     		cbz	r3, .L360
 595:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 formed = DEF_YES;
 5175              		.loc 1 595 13 is_stmt 1 view .LVU1843
 595:rtos/uC-FS/FAT/fs_fat_lfn.c ****                 formed = DEF_YES;
 5176              		.loc 1 595 16 is_stmt 0 view .LVU1844
 5177 00cc B3F5627F 		cmp	r3, #904
 5178 00d0 CAD1     		bne	.L353
ARM GAS  /tmp/ccu2ENwm.s 			page 173


 5179 00d2 D6E7     		b	.L355
 5180              	.L360:
 584:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                           p_buf,
 5181              		.loc 1 584 13 is_stmt 1 view .LVU1845
 584:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                           p_buf,
 5182              		.loc 1 584 27 is_stmt 0 view .LVU1846
 5183 00d4 074B     		ldr	r3, .L361+4
 5184 00d6 1C68     		ldr	r4, [r3]
 5185              	.LVL588:
 584:rtos/uC-FS/FAT/fs_fat_lfn.c ****                                           p_buf,
 5186              		.loc 1 584 13 view .LVU1847
 5187 00d8 0395     		str	r5, [sp, #12]
 5188 00da 0297     		str	r7, [sp, #8]
 5189 00dc 199B     		ldr	r3, [sp, #100]
 5190 00de 0193     		str	r3, [sp, #4]
 5191 00e0 189B     		ldr	r3, [sp, #96]
 5192 00e2 0093     		str	r3, [sp]
 5193 00e4 5346     		mov	r3, r10
 5194 00e6 3246     		mov	r2, r6
 5195 00e8 4946     		mov	r1, r9
 5196 00ea 4046     		mov	r0, r8
 5197 00ec A047     		blx	r4
 5198              	.LVL589:
 592:rtos/uC-FS/FAT/fs_fat_lfn.c **** 
 5199              		.loc 1 592 13 is_stmt 1 view .LVU1848
 5200 00ee 9CE7     		b	.L351
 5201              	.L362:
 5202              		.align	2
 5203              	.L361:
 5204 00f0 4FECC44E 		.word	1321528399
 5205 00f4 00000000 		.word	FS_FAT_SFN_API
 5206              		.cfi_endproc
 5207              	.LFE0:
 5209              		.global	FS_FAT_LFN_API
 5210              		.section	.rodata.FS_FAT_LFN_API,"a"
 5211              		.align	2
 5214              	FS_FAT_LFN_API:
 5215 0000 00000000 		.word	FS_FAT_LFN_DirEntryCreate
 5216 0004 00000000 		.word	FS_FAT_LFN_DirEntryCreateAt
 5217 0008 00000000 		.word	FS_FAT_LFN_DirEntryDel
 5218 000c 00000000 		.word	FS_FAT_LFN_DirEntryFind
 5219 0010 00000000 		.word	FS_FAT_LFN_NextDirEntryGet
 5220              		.text
 5221              	.Letext0:
 5222              		.file 2 "rtos/uC-CPU/ARM-Cortex-M/ARMv7-M/GNU/cpu.h"
 5223              		.file 3 "rtos/uC-FS/FAT/../Source/fs_type.h"
 5224              		.file 4 "rtos/uC-FS/FAT/../Source/fs_buf.h"
 5225              		.file 5 "rtos/uC-FS/FAT/../Source/fs_vol.h"
 5226              		.file 6 "rtos/uC-FS/FAT/../Source/fs_err.h"
 5227              		.file 7 "rtos/uC-FS/FAT/../Source/fs_ctr.h"
 5228              		.file 8 "rtos/uC-FS/FAT/fs_fat_type.h"
 5229              		.file 9 "rtos/uC-FS/FAT/fs_fat.h"
 5230              		.file 10 "rtos/uC-FS/FAT/fs_fat_lfn.h"
 5231              		.file 11 "rtos/uC-FS/FAT/fs_fat_sfn.h"
 5232              		.file 12 "rtos/uC-LIB/lib_str.h"
 5233              		.file 13 "rtos/uC-LIB/lib_mem.h"
ARM GAS  /tmp/ccu2ENwm.s 			page 174


DEFINED SYMBOLS
                            *ABS*:0000000000000000 fs_fat_lfn.c
     /tmp/ccu2ENwm.s:18     .text.FS_FAT_LFN_Chk:0000000000000000 $t
     /tmp/ccu2ENwm.s:25     .text.FS_FAT_LFN_Chk:0000000000000000 FS_FAT_LFN_Chk
     /tmp/ccu2ENwm.s:225    .text.FS_FAT_LFN_ChkSumCalc:0000000000000000 $t
     /tmp/ccu2ENwm.s:231    .text.FS_FAT_LFN_ChkSumCalc:0000000000000000 FS_FAT_LFN_ChkSumCalc
     /tmp/ccu2ENwm.s:287    .text.FS_FAT_LFN_DirEntryFmt:0000000000000000 $t
     /tmp/ccu2ENwm.s:293    .text.FS_FAT_LFN_DirEntryFmt:0000000000000000 FS_FAT_LFN_DirEntryFmt
     /tmp/ccu2ENwm.s:639    .text.FS_FAT_LFN_Len:0000000000000000 $t
     /tmp/ccu2ENwm.s:645    .text.FS_FAT_LFN_Len:0000000000000000 FS_FAT_LFN_Len
     /tmp/ccu2ENwm.s:839    .text.FS_FAT_LFN_Parse:0000000000000000 $t
     /tmp/ccu2ENwm.s:845    .text.FS_FAT_LFN_Parse:0000000000000000 FS_FAT_LFN_Parse
     /tmp/ccu2ENwm.s:1010   .text.FS_FAT_LFN_ParseFull:0000000000000000 $t
     /tmp/ccu2ENwm.s:1016   .text.FS_FAT_LFN_ParseFull:0000000000000000 FS_FAT_LFN_ParseFull
     /tmp/ccu2ENwm.s:1135   .text.FS_FAT_LFN_SFN_Parse:0000000000000000 $t
     /tmp/ccu2ENwm.s:1141   .text.FS_FAT_LFN_SFN_Parse:0000000000000000 FS_FAT_LFN_SFN_Parse
     /tmp/ccu2ENwm.s:1336   .text.FS_FAT_LFN_SFN_FmtTail:0000000000000000 $t
     /tmp/ccu2ENwm.s:1342   .text.FS_FAT_LFN_SFN_FmtTail:0000000000000000 FS_FAT_LFN_SFN_FmtTail
     /tmp/ccu2ENwm.s:1585   .text.FS_FAT_LFN_SFN_FmtTail:000000000000013c $d
     /tmp/ccu2ENwm.s:1592   .text.FS_FAT_LFN_SFN_DirEntryFindMaxInSec:0000000000000000 $t
     /tmp/ccu2ENwm.s:1598   .text.FS_FAT_LFN_SFN_DirEntryFindMaxInSec:0000000000000000 FS_FAT_LFN_SFN_DirEntryFindMaxInSec
     /tmp/ccu2ENwm.s:1922   .text.FS_FAT_LFN_SFN_DirEntryFindMax:0000000000000000 $t
     /tmp/ccu2ENwm.s:1928   .text.FS_FAT_LFN_SFN_DirEntryFindMax:0000000000000000 FS_FAT_LFN_SFN_DirEntryFindMax
     /tmp/ccu2ENwm.s:2140   .text.FS_FAT_LFN_NextDirEntryGet:0000000000000000 $t
     /tmp/ccu2ENwm.s:2146   .text.FS_FAT_LFN_NextDirEntryGet:0000000000000000 FS_FAT_LFN_NextDirEntryGet
     /tmp/ccu2ENwm.s:2799   .text.FS_FAT_LFN_StrLen_N:0000000000000000 $t
     /tmp/ccu2ENwm.s:2805   .text.FS_FAT_LFN_StrLen_N:0000000000000000 FS_FAT_LFN_StrLen_N
     /tmp/ccu2ENwm.s:2833   .text.FS_FAT_LFN_StrCmpIgnoreCase_N:0000000000000000 $t
     /tmp/ccu2ENwm.s:2839   .text.FS_FAT_LFN_StrCmpIgnoreCase_N:0000000000000000 FS_FAT_LFN_StrCmpIgnoreCase_N
     /tmp/ccu2ENwm.s:2864   .text.FS_FAT_LFN_DirEntryFind:0000000000000000 $t
     /tmp/ccu2ENwm.s:2870   .text.FS_FAT_LFN_DirEntryFind:0000000000000000 FS_FAT_LFN_DirEntryFind
     /tmp/ccu2ENwm.s:3291   .text.FS_FAT_LFN_DirEntryDel:0000000000000000 $t
     /tmp/ccu2ENwm.s:3297   .text.FS_FAT_LFN_DirEntryDel:0000000000000000 FS_FAT_LFN_DirEntryDel
     /tmp/ccu2ENwm.s:3568   .text.FS_FAT_LFN_DirEntryCreateAt:0000000000000000 $t
     /tmp/ccu2ENwm.s:3574   .text.FS_FAT_LFN_DirEntryCreateAt:0000000000000000 FS_FAT_LFN_DirEntryCreateAt
     /tmp/ccu2ENwm.s:3869   .text.FS_FAT_LFN_DirEntryCreateAt:0000000000000124 $d
     /tmp/ccu2ENwm.s:3874   .text.FS_FAT_LFN_DirEntryPlace:0000000000000000 $t
     /tmp/ccu2ENwm.s:3880   .text.FS_FAT_LFN_DirEntryPlace:0000000000000000 FS_FAT_LFN_DirEntryPlace
     /tmp/ccu2ENwm.s:4167   .text.FS_FAT_LFN_SFN_Fmt:0000000000000000 $t
     /tmp/ccu2ENwm.s:4173   .text.FS_FAT_LFN_SFN_Fmt:0000000000000000 FS_FAT_LFN_SFN_Fmt
     /tmp/ccu2ENwm.s:4800   .text.FS_FAT_LFN_SFN_Alloc:0000000000000000 $t
     /tmp/ccu2ENwm.s:4806   .text.FS_FAT_LFN_SFN_Alloc:0000000000000000 FS_FAT_LFN_SFN_Alloc
     /tmp/ccu2ENwm.s:4979   .text.FS_FAT_LFN_SFN_Alloc:00000000000000a8 $d
     /tmp/ccu2ENwm.s:4985   .text.FS_FAT_LFN_DirEntryCreate:0000000000000000 $t
     /tmp/ccu2ENwm.s:4991   .text.FS_FAT_LFN_DirEntryCreate:0000000000000000 FS_FAT_LFN_DirEntryCreate
     /tmp/ccu2ENwm.s:5204   .text.FS_FAT_LFN_DirEntryCreate:00000000000000f0 $d
     /tmp/ccu2ENwm.s:5214   .rodata.FS_FAT_LFN_API:0000000000000000 FS_FAT_LFN_API
     /tmp/ccu2ENwm.s:5211   .rodata.FS_FAT_LFN_API:0000000000000000 $d
                           .group:0000000000000000 wm4.0.0f5aa60db9403f389c005f20ecce4286
                           .group:0000000000000000 wm4.cpu_def.h.46.baa122a2898bdc40bb50d1f21ead1515
                           .group:0000000000000000 wm4.cpu_cfg.h.45.38a6a562da8b04490c382a226238c57e
                           .group:0000000000000000 wm4.cpu.h.171.3cb15ee3ccb812cbfdf76d1fbfb9eda0
                           .group:0000000000000000 wm4.cpu_core.h.51.7b35a59c319673f88ae4a256248776ec
                           .group:0000000000000000 wm4.lib_def.h.66.6ab2a012067a8e1f4289db5765835062
                           .group:0000000000000000 wm4.cpu_core.h.143.d3b700e12b3a14ed3bee14c822b49a7d
                           .group:0000000000000000 wm4.lib_cfg.h.40.b2958733f73e73af70f675ca0f89303e
                           .group:0000000000000000 wm4.lib_mem.h.121.89b942a057fb20091baad8bf6b28b1e6
ARM GAS  /tmp/ccu2ENwm.s 			page 175


                           .group:0000000000000000 wm4.fs.h.42.4f6311a594ee5619f1ee7a9392eb7faa
                           .group:0000000000000000 wm4.lib_ascii.h.84.da234f9d4d202bba866fb26067887eec
                           .group:0000000000000000 wm4.fs_def.h.42.653ad677c23ef93c522ec84af681385d
                           .group:0000000000000000 wm4.fs_cfg.h.116.da4f8e9d0b9040a97ef3bf26c61e90fd
                           .group:0000000000000000 wm4.clk.h.99.39403db6a27321e53b261bbe20b56e1d
                           .group:0000000000000000 wm4.lib_str.h.60.d6fb3a1336db17c586ed26be94929677
                           .group:0000000000000000 wm4.clk_cfg.h.45.428f260ed0fbcfa16fc822c67c85dade
                           .group:0000000000000000 wm4.clk.h.219.c24c7347fcc7691d3157fe73514cb366
                           .group:0000000000000000 wm4.fs_cfg_fs.h.176.c85074fbe881bfa594608376a65f4dc2
                           .group:0000000000000000 wm4.fs_type.h.42.3e681b291920189044ba1da24ae0f22a
                           .group:0000000000000000 wm4.fs_err.h.42.d52bfed31dff3d1419c5cf09952dee67
                           .group:0000000000000000 wm4.fs.h.97.1d629f0ba32b5622ab4e01a254bd98e8
                           .group:0000000000000000 wm4.fs_buf.h.42.0c8ba10968f085926266a27b71b3972d
                           .group:0000000000000000 wm4.fs_unicode.h.42.7187f638062b29b06572d839ddc5f920
                           .group:0000000000000000 wm4.fs_vol.h.42.6f34e6a2e2db310debaffbf0344054a2
                           .group:0000000000000000 wm4.fs_ctr.h.42.9d1398cac157503ac8af114819f7782b
                           .group:0000000000000000 wm4.fs_vol.h.83.fd165084f1d541edeb55ea0b6d9b6170
                           .group:0000000000000000 wm4.fs_util.h.64.fe7812d6ca4c430dea2d2e705fd73c11
                           .group:0000000000000000 wm4.fs_fat_type.h.44.5030ef39a150a8f4f55331616cd38bbd
                           .group:0000000000000000 wm4.fs_fat.h.103.89adf2d396ea9a0dd44def3a42712dd1
                           .group:0000000000000000 wm4.fs_fat_lfn.h.50.b212b5b6a55bb67c38e51e3af4d12bc8
                           .group:0000000000000000 wm4.fs_fat_sfn.h.46.5d51e4dfd288beb475141580db2c7825

UNDEFINED SYMBOLS
FSBuf_Set
FS_FAT_SecNextGet
Mem_Clr
Str_Len_N
Str_CmpIgnoreCase_N
FS_FAT_SFN_Chk
FS_FAT_SFN_Create
FSBuf_MarkDirty
FS_FAT_SFN_DirEntryFmt
FS_FAT_SecNextGetAlloc
Str_Char_Last_N
FS_FAT_SFN_SFN_Find
FS_FAT_SFN_API

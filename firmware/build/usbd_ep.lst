ARM GAS  /tmp/ccuUvpuw.s 			page 1


   1              		.cpu cortex-m4
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"usbd_ep.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.text.USBD_EP_TxAsyncProcess,"ax",%progbits
  18              		.align	1
  19              		.arch armv7e-m
  20              		.syntax unified
  21              		.thumb
  22              		.thumb_func
  23              		.fpu fpv4-sp-d16
  25              	USBD_EP_TxAsyncProcess:
  26              	.LVL0:
  27              	.LFB30:
  28              		.file 1 "rtos/uC-USB-Device/Source/usbd_ep.c"
   1:rtos/uC-USB-Device/Source/usbd_ep.c **** /*
   2:rtos/uC-USB-Device/Source/usbd_ep.c **** ***************************************************************************************************
   3:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                            uC/USB-Device
   4:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                    The Embedded USB Device Stack
   5:rtos/uC-USB-Device/Source/usbd_ep.c **** *
   6:rtos/uC-USB-Device/Source/usbd_ep.c **** *                         (c) Copyright 2004-2019; Silicon Laboratories Inc.,
   7:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                400 W. Cesar Chavez, Austin, TX 78701
   8:rtos/uC-USB-Device/Source/usbd_ep.c **** *
   9:rtos/uC-USB-Device/Source/usbd_ep.c **** *                   All rights reserved. Protected by international copyright laws.
  10:rtos/uC-USB-Device/Source/usbd_ep.c **** *
  11:rtos/uC-USB-Device/Source/usbd_ep.c **** *                  Your use of this software is subject to your acceptance of the terms
  12:rtos/uC-USB-Device/Source/usbd_ep.c **** *                  of a Silicon Labs Micrium software license, which can be obtained by
  13:rtos/uC-USB-Device/Source/usbd_ep.c **** *                  contacting info@micrium.com. If you do not agree to the terms of this
  14:rtos/uC-USB-Device/Source/usbd_ep.c **** *                  license, you may not use this software.
  15:rtos/uC-USB-Device/Source/usbd_ep.c **** *
  16:rtos/uC-USB-Device/Source/usbd_ep.c **** *                  Please help us continue to provide the Embedded community with the finest
  17:rtos/uC-USB-Device/Source/usbd_ep.c **** *                  software available. Your honesty is greatly appreciated.
  18:rtos/uC-USB-Device/Source/usbd_ep.c **** *
  19:rtos/uC-USB-Device/Source/usbd_ep.c **** *                    You can find our product's documentation at: doc.micrium.com
  20:rtos/uC-USB-Device/Source/usbd_ep.c **** *
  21:rtos/uC-USB-Device/Source/usbd_ep.c **** *                          For more information visit us at: www.micrium.com
  22:rtos/uC-USB-Device/Source/usbd_ep.c **** ***************************************************************************************************
  23:rtos/uC-USB-Device/Source/usbd_ep.c **** */
  24:rtos/uC-USB-Device/Source/usbd_ep.c **** 
  25:rtos/uC-USB-Device/Source/usbd_ep.c **** /*
  26:rtos/uC-USB-Device/Source/usbd_ep.c **** ***************************************************************************************************
  27:rtos/uC-USB-Device/Source/usbd_ep.c **** *
  28:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                   USB DEVICE ENDPOINT OPERATIONS
  29:rtos/uC-USB-Device/Source/usbd_ep.c **** *
  30:rtos/uC-USB-Device/Source/usbd_ep.c **** * Filename : usbd_ep.c
ARM GAS  /tmp/ccuUvpuw.s 			page 2


  31:rtos/uC-USB-Device/Source/usbd_ep.c **** * Version  : V4.05.06
  32:rtos/uC-USB-Device/Source/usbd_ep.c **** ***************************************************************************************************
  33:rtos/uC-USB-Device/Source/usbd_ep.c **** * Note(s)  : (1) High-speed isochronous transfer not supported.
  34:rtos/uC-USB-Device/Source/usbd_ep.c **** *
  35:rtos/uC-USB-Device/Source/usbd_ep.c **** *            (2) 'goto' statements were used in this software module. Their usage is restricted to
  36:rtos/uC-USB-Device/Source/usbd_ep.c **** *                 cleanup purposes in exceptional program flow (e.g. error handling), in compliance
  37:rtos/uC-USB-Device/Source/usbd_ep.c **** *                 with CERT MEM12-C and MISRA C:2012 rules 15.2, 15.3 and 15.4.
  38:rtos/uC-USB-Device/Source/usbd_ep.c **** ***************************************************************************************************
  39:rtos/uC-USB-Device/Source/usbd_ep.c **** */
  40:rtos/uC-USB-Device/Source/usbd_ep.c **** 
  41:rtos/uC-USB-Device/Source/usbd_ep.c **** /*
  42:rtos/uC-USB-Device/Source/usbd_ep.c **** ***************************************************************************************************
  43:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                            INCLUDE FILES
  44:rtos/uC-USB-Device/Source/usbd_ep.c **** ***************************************************************************************************
  45:rtos/uC-USB-Device/Source/usbd_ep.c **** */
  46:rtos/uC-USB-Device/Source/usbd_ep.c **** 
  47:rtos/uC-USB-Device/Source/usbd_ep.c **** #define    MICRIUM_SOURCE
  48:rtos/uC-USB-Device/Source/usbd_ep.c **** #include  "usbd_core.h"
  49:rtos/uC-USB-Device/Source/usbd_ep.c **** #include  "usbd_internal.h"
  50:rtos/uC-USB-Device/Source/usbd_ep.c **** 
  51:rtos/uC-USB-Device/Source/usbd_ep.c **** 
  52:rtos/uC-USB-Device/Source/usbd_ep.c **** /*
  53:rtos/uC-USB-Device/Source/usbd_ep.c **** ***************************************************************************************************
  54:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                            LOCAL DEFINES
  55:rtos/uC-USB-Device/Source/usbd_ep.c **** ***************************************************************************************************
  56:rtos/uC-USB-Device/Source/usbd_ep.c **** */
  57:rtos/uC-USB-Device/Source/usbd_ep.c **** 
  58:rtos/uC-USB-Device/Source/usbd_ep.c **** #define  USBD_EP_ADDR_CTRL_OUT                          0x00u
  59:rtos/uC-USB-Device/Source/usbd_ep.c **** #define  USBD_EP_ADDR_CTRL_IN                           0x80u
  60:rtos/uC-USB-Device/Source/usbd_ep.c **** 
  61:rtos/uC-USB-Device/Source/usbd_ep.c **** #define  USBD_URB_MAX_NBR                      (USBD_CFG_MAX_NBR_URB_EXTRA + \
  62:rtos/uC-USB-Device/Source/usbd_ep.c ****                                                 USBD_CFG_MAX_NBR_EP_OPEN)
  63:rtos/uC-USB-Device/Source/usbd_ep.c **** 
  64:rtos/uC-USB-Device/Source/usbd_ep.c **** #define  USBD_URB_FLAG_XFER_END                 DEF_BIT_00      /* Flag indicating if xfer requires
  65:rtos/uC-USB-Device/Source/usbd_ep.c **** #define  USBD_URB_FLAG_EXTRA_URB                DEF_BIT_01      /* Flag indicating if the URB is an
  66:rtos/uC-USB-Device/Source/usbd_ep.c **** 
  67:rtos/uC-USB-Device/Source/usbd_ep.c **** 
  68:rtos/uC-USB-Device/Source/usbd_ep.c **** /*
  69:rtos/uC-USB-Device/Source/usbd_ep.c **** ***************************************************************************************************
  70:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                           LOCAL CONSTANTS
  71:rtos/uC-USB-Device/Source/usbd_ep.c **** ***************************************************************************************************
  72:rtos/uC-USB-Device/Source/usbd_ep.c **** */
  73:rtos/uC-USB-Device/Source/usbd_ep.c **** 
  74:rtos/uC-USB-Device/Source/usbd_ep.c **** 
  75:rtos/uC-USB-Device/Source/usbd_ep.c **** /*
  76:rtos/uC-USB-Device/Source/usbd_ep.c **** ***************************************************************************************************
  77:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                          LOCAL DATA TYPES
  78:rtos/uC-USB-Device/Source/usbd_ep.c **** ***************************************************************************************************
  79:rtos/uC-USB-Device/Source/usbd_ep.c **** */
  80:rtos/uC-USB-Device/Source/usbd_ep.c **** 
  81:rtos/uC-USB-Device/Source/usbd_ep.c **** 
  82:rtos/uC-USB-Device/Source/usbd_ep.c **** /*
  83:rtos/uC-USB-Device/Source/usbd_ep.c **** ***************************************************************************************************
  84:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                           ENDPOINT STATES
  85:rtos/uC-USB-Device/Source/usbd_ep.c **** ***************************************************************************************************
  86:rtos/uC-USB-Device/Source/usbd_ep.c **** */
  87:rtos/uC-USB-Device/Source/usbd_ep.c **** 
ARM GAS  /tmp/ccuUvpuw.s 			page 3


  88:rtos/uC-USB-Device/Source/usbd_ep.c **** typedef  enum  usbd_ep_state {
  89:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_EP_STATE_CLOSE = 0,
  90:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_EP_STATE_OPEN,
  91:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_EP_STATE_STALL
  92:rtos/uC-USB-Device/Source/usbd_ep.c **** } USBD_EP_STATE;
  93:rtos/uC-USB-Device/Source/usbd_ep.c **** 
  94:rtos/uC-USB-Device/Source/usbd_ep.c **** 
  95:rtos/uC-USB-Device/Source/usbd_ep.c **** /*
  96:rtos/uC-USB-Device/Source/usbd_ep.c **** ***************************************************************************************************
  97:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                           TRANSFER STATES
  98:rtos/uC-USB-Device/Source/usbd_ep.c **** *
  99:rtos/uC-USB-Device/Source/usbd_ep.c **** * Note(s): (1) If an asynchronous transfer cannot be fully queued in the driver, no more transfer c
 100:rtos/uC-USB-Device/Source/usbd_ep.c **** *              queued, to respect the transfers sequence.
 101:rtos/uC-USB-Device/Source/usbd_ep.c **** *              For example, if a driver can queue only 512 bytes at once and the class/application 
 102:rtos/uC-USB-Device/Source/usbd_ep.c **** *              to queue 518 bytes, the first 512 bytes will be queued and it will be impossible to 
 103:rtos/uC-USB-Device/Source/usbd_ep.c **** *              another transaction. The remaining 6 bytes will only be queued when the previous (51
 104:rtos/uC-USB-Device/Source/usbd_ep.c **** *              bytes) transaction completes. The state of the endpoint will be changed to
 105:rtos/uC-USB-Device/Source/usbd_ep.c **** *              USBD_EP_XFER_TYPE_ASYNC_PARTIAL and other transfers could be queued after this one.
 106:rtos/uC-USB-Device/Source/usbd_ep.c **** ***************************************************************************************************
 107:rtos/uC-USB-Device/Source/usbd_ep.c **** */
 108:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 109:rtos/uC-USB-Device/Source/usbd_ep.c **** typedef  enum  usbd_xfer_state {
 110:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_XFER_STATE_NONE = 0,                                   /* No            xfer    in progres
 111:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_XFER_STATE_SYNC,                                       /* Sync          xfer    in progres
 112:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_XFER_STATE_ASYNC,                                      /* Async         xfer(s) in progres
 113:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_XFER_STATE_ASYNC_PARTIAL                               /* Partial async xfer(s) in progres
 114:rtos/uC-USB-Device/Source/usbd_ep.c **** } USBD_XFER_STATE;
 115:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 116:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 117:rtos/uC-USB-Device/Source/usbd_ep.c **** /*
 118:rtos/uC-USB-Device/Source/usbd_ep.c **** ***************************************************************************************************
 119:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                              URB STATES
 120:rtos/uC-USB-Device/Source/usbd_ep.c **** ***************************************************************************************************
 121:rtos/uC-USB-Device/Source/usbd_ep.c **** */
 122:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 123:rtos/uC-USB-Device/Source/usbd_ep.c **** typedef  enum  usbd_urb_state {
 124:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_URB_STATE_IDLE = 0,                                    /* URB is in the memory pool, not u
 125:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_URB_STATE_XFER_SYNC,                                   /* URB is used for a   sync xfer.  
 126:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_URB_STATE_XFER_ASYNC                                   /* URB is used for an async xfer.  
 127:rtos/uC-USB-Device/Source/usbd_ep.c **** } USBD_URB_STATE;
 128:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 129:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 130:rtos/uC-USB-Device/Source/usbd_ep.c **** /*
 131:rtos/uC-USB-Device/Source/usbd_ep.c **** ***************************************************************************************************
 132:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                ENDPOINT USB REQUEST BLOCK DATA TYPE
 133:rtos/uC-USB-Device/Source/usbd_ep.c **** *
 134:rtos/uC-USB-Device/Source/usbd_ep.c **** * Note(s): (1) The 'Flags' field is used as a bitmap. The following bits are used:
 135:rtos/uC-USB-Device/Source/usbd_ep.c **** *
 136:rtos/uC-USB-Device/Source/usbd_ep.c **** *                   D7..2 Reserved (reset to zero)
 137:rtos/uC-USB-Device/Source/usbd_ep.c **** *                   D1    End-of-transfer:
 138:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               If this bit is set and transfer length is multiple of maximum packe
 139:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               size, a zero-length packet is transferred to indicate a short trans
 140:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               the host.
 141:rtos/uC-USB-Device/Source/usbd_ep.c **** *                   D0    Extra URB:
 142:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               If this bit is set, it indicates that this URB is considered an 'ex
 143:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               URB, that is shared amongst all endpoints. If this bit is cleared, 
 144:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               indicates that this URB is 'reserved' to allow every endpoint to ha
ARM GAS  /tmp/ccuUvpuw.s 			page 4


 145:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               least one URB available at any time.
 146:rtos/uC-USB-Device/Source/usbd_ep.c **** *
 147:rtos/uC-USB-Device/Source/usbd_ep.c **** ***************************************************************************************************
 148:rtos/uC-USB-Device/Source/usbd_ep.c **** */
 149:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 150:rtos/uC-USB-Device/Source/usbd_ep.c **** typedef  struct  usbd_urb {
 151:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_INT08U        *BufPtr;                                  /* Pointer to buffer.              
 152:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_INT32U         BufLen;                                  /* Buffer length.                  
 153:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_INT32U         XferLen;                                 /* Length that has been transferred
 154:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_INT32U         NextXferLen;                             /* Length of the next transfer.    
 155:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_INT08U         Flags;                                   /* Flags (see Note #1).            
 156:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_URB_STATE     State;                                   /* State of the transaction.       
 157:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_ASYNC_FNCT    AsyncFnct;                               /* Asynchronous notification functi
 158:rtos/uC-USB-Device/Source/usbd_ep.c ****     void              *AsyncFnctArg;                            /* Asynchronous function argument. 
 159:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_ERR           Err;                                     /* Error passed to callback, if any
 160:rtos/uC-USB-Device/Source/usbd_ep.c ****     struct  usbd_urb  *NextPtr;                                 /* Pointer to next     URB in list.
 161:rtos/uC-USB-Device/Source/usbd_ep.c **** } USBD_URB;
 162:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 163:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 164:rtos/uC-USB-Device/Source/usbd_ep.c **** /*
 165:rtos/uC-USB-Device/Source/usbd_ep.c **** ***************************************************************************************************
 166:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                         ENDPOINT DATA TYPE
 167:rtos/uC-USB-Device/Source/usbd_ep.c **** ***************************************************************************************************
 168:rtos/uC-USB-Device/Source/usbd_ep.c **** */
 169:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 170:rtos/uC-USB-Device/Source/usbd_ep.c **** typedef  struct  usbd_ep {
 171:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_EP_STATE     State;                                    /* EP   state.                     
 172:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_XFER_STATE   XferState;                                /* Xfer state.                     
 173:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_INT08U        Addr;                                     /* Address.                        
 174:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_INT08U        Attrib;                                   /* Attributes.                     
 175:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_INT16U        MaxPktSize;                               /* Maximum packet size.            
 176:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_INT08U        Interval;                                 /* Interval.                       
 177:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_INT08U        TransPerFrame;                            /* Transaction per microframe (HS o
 178:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_INT08U        Ix;                                       /* Allocation index.               
 179:rtos/uC-USB-Device/Source/usbd_ep.c **** #if (USBD_CFG_MAX_NBR_URB_EXTRA > 0u)
 180:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_BOOLEAN       URB_MainAvail;                            /* Flag indicating if main URB asso
 181:rtos/uC-USB-Device/Source/usbd_ep.c **** #endif
 182:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_URB         *URB_HeadPtr;                              /* USB request block head of the li
 183:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_URB         *URB_TailPtr;                              /* USB request block tail of the li
 184:rtos/uC-USB-Device/Source/usbd_ep.c **** } USBD_EP;
 185:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 186:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 187:rtos/uC-USB-Device/Source/usbd_ep.c **** /*
 188:rtos/uC-USB-Device/Source/usbd_ep.c **** ***************************************************************************************************
 189:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                            LOCAL MACROS
 190:rtos/uC-USB-Device/Source/usbd_ep.c **** ***************************************************************************************************
 191:rtos/uC-USB-Device/Source/usbd_ep.c **** */
 192:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 193:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 194:rtos/uC-USB-Device/Source/usbd_ep.c **** #if (USBD_CFG_DBG_TRACE_EN == DEF_ENABLED)
 195:rtos/uC-USB-Device/Source/usbd_ep.c **** #define  USBD_DBG_EP(msg, ep_addr)                   USBD_DBG_GENERIC((msg),                       
 196:rtos/uC-USB-Device/Source/usbd_ep.c ****                                                                       (ep_addr),                   
 197:rtos/uC-USB-Device/Source/usbd_ep.c ****                                                                        USBD_IF_NBR_NONE)
 198:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 199:rtos/uC-USB-Device/Source/usbd_ep.c **** #define  USBD_ERR_LINE_0(x)                          #x
 200:rtos/uC-USB-Device/Source/usbd_ep.c **** #define  USBD_ERR_LINE(x)                            USBD_ERR_LINE_0(x)
 201:rtos/uC-USB-Device/Source/usbd_ep.c **** #define  USBD_DBG_EP_ERR(msg, ep_addr, err)          USBD_DBG_GENERIC_ERR( msg " line: "USBD_ERR_LI
ARM GAS  /tmp/ccuUvpuw.s 			page 5


 202:rtos/uC-USB-Device/Source/usbd_ep.c ****                                                                            ep_addr,                
 203:rtos/uC-USB-Device/Source/usbd_ep.c ****                                                                            USBD_IF_NBR_NONE,       
 204:rtos/uC-USB-Device/Source/usbd_ep.c ****                                                                           (err))
 205:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 206:rtos/uC-USB-Device/Source/usbd_ep.c **** #define  USBD_DBG_EP_ARG(msg, ep_addr, arg)          USBD_DBG_GENERIC_ARG((msg),                   
 207:rtos/uC-USB-Device/Source/usbd_ep.c ****                                                                            ep_addr,                
 208:rtos/uC-USB-Device/Source/usbd_ep.c ****                                                                            USBD_IF_NBR_NONE,       
 209:rtos/uC-USB-Device/Source/usbd_ep.c ****                                                                           (arg))
 210:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 211:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 212:rtos/uC-USB-Device/Source/usbd_ep.c **** #else
 213:rtos/uC-USB-Device/Source/usbd_ep.c **** #define  USBD_DBG_EP(msg, ep_addr)
 214:rtos/uC-USB-Device/Source/usbd_ep.c **** #define  USBD_DBG_EP_ERR(msg, ep_addr, err)
 215:rtos/uC-USB-Device/Source/usbd_ep.c **** #define  USBD_DBG_EP_ARG(msg, ep_addr, arg)
 216:rtos/uC-USB-Device/Source/usbd_ep.c **** #endif
 217:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 218:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 219:rtos/uC-USB-Device/Source/usbd_ep.c **** /*
 220:rtos/uC-USB-Device/Source/usbd_ep.c **** ***************************************************************************************************
 221:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                            LOCAL TABLES
 222:rtos/uC-USB-Device/Source/usbd_ep.c **** ***************************************************************************************************
 223:rtos/uC-USB-Device/Source/usbd_ep.c **** */
 224:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 225:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 226:rtos/uC-USB-Device/Source/usbd_ep.c **** /*
 227:rtos/uC-USB-Device/Source/usbd_ep.c **** ***************************************************************************************************
 228:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                       LOCAL GLOBAL VARIABLES
 229:rtos/uC-USB-Device/Source/usbd_ep.c **** ***************************************************************************************************
 230:rtos/uC-USB-Device/Source/usbd_ep.c **** */
 231:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 232:rtos/uC-USB-Device/Source/usbd_ep.c ****                                                                 /* Endpoint structures table.      
 233:rtos/uC-USB-Device/Source/usbd_ep.c **** static  USBD_EP             USBD_EP_Tbl[USBD_CFG_MAX_NBR_DEV][USBD_CFG_MAX_NBR_EP_OPEN];
 234:rtos/uC-USB-Device/Source/usbd_ep.c **** static  USBD_EP            *USBD_EP_TblPtrs[USBD_CFG_MAX_NBR_DEV][USBD_EP_MAX_NBR];
 235:rtos/uC-USB-Device/Source/usbd_ep.c **** static  CPU_INT08U          USBD_EP_OpenCtr[USBD_CFG_MAX_NBR_DEV];
 236:rtos/uC-USB-Device/Source/usbd_ep.c **** static  CPU_INT32U          USBD_EP_OpenBitMap[USBD_CFG_MAX_NBR_DEV];
 237:rtos/uC-USB-Device/Source/usbd_ep.c **** static  USBD_URB            USBD_URB_Tbl[USBD_CFG_MAX_NBR_DEV][USBD_URB_MAX_NBR];
 238:rtos/uC-USB-Device/Source/usbd_ep.c **** static  USBD_URB           *USBD_URB_TblPtr[USBD_CFG_MAX_NBR_DEV];
 239:rtos/uC-USB-Device/Source/usbd_ep.c **** #if (USBD_CFG_MAX_NBR_URB_EXTRA > 0u)
 240:rtos/uC-USB-Device/Source/usbd_ep.c **** static  CPU_INT08U          USBD_URB_ExtraCtr[USBD_CFG_MAX_NBR_DEV];   /* Nbr of extra URB currentl
 241:rtos/uC-USB-Device/Source/usbd_ep.c **** #endif
 242:rtos/uC-USB-Device/Source/usbd_ep.c **** #if (USBD_CFG_DBG_STATS_EN == DEF_ENABLED)
 243:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_DBG_STATS_EP   USBD_DbgStatsEP_Tbl[USBD_CFG_MAX_NBR_DEV][USBD_CFG_MAX_NBR_EP_OPEN];
 244:rtos/uC-USB-Device/Source/usbd_ep.c **** #endif
 245:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 246:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 247:rtos/uC-USB-Device/Source/usbd_ep.c **** /*
 248:rtos/uC-USB-Device/Source/usbd_ep.c **** ***************************************************************************************************
 249:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                      LOCAL FUNCTION PROTOTYPES
 250:rtos/uC-USB-Device/Source/usbd_ep.c **** ***************************************************************************************************
 251:rtos/uC-USB-Device/Source/usbd_ep.c **** */
 252:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 253:rtos/uC-USB-Device/Source/usbd_ep.c **** static  void          USBD_EP_RxStartAsyncProcess(USBD_DRV         *p_drv,
 254:rtos/uC-USB-Device/Source/usbd_ep.c ****                                                   USBD_EP          *p_ep,
 255:rtos/uC-USB-Device/Source/usbd_ep.c ****                                                   USBD_URB         *p_urb,
 256:rtos/uC-USB-Device/Source/usbd_ep.c ****                                                   CPU_INT08U       *p_buf_cur,
 257:rtos/uC-USB-Device/Source/usbd_ep.c ****                                                   CPU_INT32U        len,
 258:rtos/uC-USB-Device/Source/usbd_ep.c ****                                                   USBD_ERR         *p_err);
ARM GAS  /tmp/ccuUvpuw.s 			page 6


 259:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 260:rtos/uC-USB-Device/Source/usbd_ep.c **** static  void          USBD_EP_TxAsyncProcess     (USBD_DRV         *p_drv,
 261:rtos/uC-USB-Device/Source/usbd_ep.c ****                                                   USBD_EP          *p_ep,
 262:rtos/uC-USB-Device/Source/usbd_ep.c ****                                                   USBD_URB         *p_urb,
 263:rtos/uC-USB-Device/Source/usbd_ep.c ****                                                   CPU_INT08U       *p_buf_cur,
 264:rtos/uC-USB-Device/Source/usbd_ep.c ****                                                   CPU_INT32U        len,
 265:rtos/uC-USB-Device/Source/usbd_ep.c ****                                                   USBD_ERR         *p_err);
 266:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 267:rtos/uC-USB-Device/Source/usbd_ep.c **** static  CPU_INT32U    USBD_EP_Rx                 (USBD_DRV         *p_drv,
 268:rtos/uC-USB-Device/Source/usbd_ep.c ****                                                   USBD_EP          *p_ep,
 269:rtos/uC-USB-Device/Source/usbd_ep.c ****                                                   void             *p_buf,
 270:rtos/uC-USB-Device/Source/usbd_ep.c ****                                                   CPU_INT32U        buf_len,
 271:rtos/uC-USB-Device/Source/usbd_ep.c ****                                                   USBD_ASYNC_FNCT   async_fnct,
 272:rtos/uC-USB-Device/Source/usbd_ep.c ****                                                   void             *p_async_arg,
 273:rtos/uC-USB-Device/Source/usbd_ep.c ****                                                   CPU_INT16U        timeout_ms,
 274:rtos/uC-USB-Device/Source/usbd_ep.c ****                                                   USBD_ERR         *p_err);
 275:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 276:rtos/uC-USB-Device/Source/usbd_ep.c **** static  CPU_INT32U    USBD_EP_Tx                 (USBD_DRV         *p_drv,
 277:rtos/uC-USB-Device/Source/usbd_ep.c ****                                                   USBD_EP          *p_ep,
 278:rtos/uC-USB-Device/Source/usbd_ep.c ****                                                   void             *p_buf,
 279:rtos/uC-USB-Device/Source/usbd_ep.c ****                                                   CPU_INT32U        buf_len,
 280:rtos/uC-USB-Device/Source/usbd_ep.c ****                                                   USBD_ASYNC_FNCT   async_fnct,
 281:rtos/uC-USB-Device/Source/usbd_ep.c ****                                                   void             *p_async_arg,
 282:rtos/uC-USB-Device/Source/usbd_ep.c ****                                                   CPU_INT16U        timeout_ms,
 283:rtos/uC-USB-Device/Source/usbd_ep.c ****                                                   CPU_BOOLEAN       end,
 284:rtos/uC-USB-Device/Source/usbd_ep.c ****                                                   USBD_ERR         *p_err);
 285:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 286:rtos/uC-USB-Device/Source/usbd_ep.c **** static  USBD_URB     *USBD_EP_URB_Abort          (USBD_DRV         *p_drv,
 287:rtos/uC-USB-Device/Source/usbd_ep.c ****                                                   USBD_EP          *p_ep,
 288:rtos/uC-USB-Device/Source/usbd_ep.c ****                                                   USBD_ERR         *p_err);
 289:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 290:rtos/uC-USB-Device/Source/usbd_ep.c **** static  USBD_URB     *USBD_URB_AsyncCmpl         (USBD_EP          *p_ep,
 291:rtos/uC-USB-Device/Source/usbd_ep.c ****                                                   USBD_ERR          err);
 292:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 293:rtos/uC-USB-Device/Source/usbd_ep.c **** static  void          USBD_URB_AsyncEnd          (CPU_INT08U        dev_nbr,
 294:rtos/uC-USB-Device/Source/usbd_ep.c ****                                                   USBD_EP          *p_ep,
 295:rtos/uC-USB-Device/Source/usbd_ep.c ****                                                   USBD_URB         *p_urb_head);
 296:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 297:rtos/uC-USB-Device/Source/usbd_ep.c **** static  void          USBD_URB_Free              (CPU_INT08U        dev_nbr,
 298:rtos/uC-USB-Device/Source/usbd_ep.c ****                                                   USBD_EP          *p_ep,
 299:rtos/uC-USB-Device/Source/usbd_ep.c ****                                                   USBD_URB         *p_urb);
 300:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 301:rtos/uC-USB-Device/Source/usbd_ep.c **** static  USBD_URB     *USBD_URB_Get               (CPU_INT08U        dev_nbr,
 302:rtos/uC-USB-Device/Source/usbd_ep.c ****                                                   USBD_EP          *p_ep,
 303:rtos/uC-USB-Device/Source/usbd_ep.c ****                                                   USBD_ERR         *p_err);
 304:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 305:rtos/uC-USB-Device/Source/usbd_ep.c **** static  void          USBD_URB_Queue             (USBD_EP          *p_ep,
 306:rtos/uC-USB-Device/Source/usbd_ep.c ****                                                   USBD_URB         *p_urb);
 307:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 308:rtos/uC-USB-Device/Source/usbd_ep.c **** static  void          USBD_URB_Dequeue           (USBD_EP          *p_ep);
 309:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 310:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 311:rtos/uC-USB-Device/Source/usbd_ep.c **** /*
 312:rtos/uC-USB-Device/Source/usbd_ep.c **** ***************************************************************************************************
 313:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                     LOCAL CONFIGURATION ERRORS
 314:rtos/uC-USB-Device/Source/usbd_ep.c **** ***************************************************************************************************
 315:rtos/uC-USB-Device/Source/usbd_ep.c **** */
ARM GAS  /tmp/ccuUvpuw.s 			page 7


 316:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 317:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 318:rtos/uC-USB-Device/Source/usbd_ep.c **** /*
 319:rtos/uC-USB-Device/Source/usbd_ep.c **** ***************************************************************************************************
 320:rtos/uC-USB-Device/Source/usbd_ep.c **** ***************************************************************************************************
 321:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                       BULK TRANSFER FUNCTIONS
 322:rtos/uC-USB-Device/Source/usbd_ep.c **** ***************************************************************************************************
 323:rtos/uC-USB-Device/Source/usbd_ep.c **** ***************************************************************************************************
 324:rtos/uC-USB-Device/Source/usbd_ep.c **** */
 325:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 326:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 327:rtos/uC-USB-Device/Source/usbd_ep.c **** /*
 328:rtos/uC-USB-Device/Source/usbd_ep.c **** ***************************************************************************************************
 329:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                            USBD_BulkRx()
 330:rtos/uC-USB-Device/Source/usbd_ep.c **** *
 331:rtos/uC-USB-Device/Source/usbd_ep.c **** * Description : Receive data on Bulk OUT endpoint.
 332:rtos/uC-USB-Device/Source/usbd_ep.c **** *
 333:rtos/uC-USB-Device/Source/usbd_ep.c **** * Argument(s) : dev_nbr     Device number.
 334:rtos/uC-USB-Device/Source/usbd_ep.c **** *
 335:rtos/uC-USB-Device/Source/usbd_ep.c **** *               ep_addr     Endpoint address.
 336:rtos/uC-USB-Device/Source/usbd_ep.c **** *
 337:rtos/uC-USB-Device/Source/usbd_ep.c **** *               p_buf       Pointer to destination buffer to receive data (see Note #1).
 338:rtos/uC-USB-Device/Source/usbd_ep.c **** *
 339:rtos/uC-USB-Device/Source/usbd_ep.c **** *               buf_len     Number of octets to receive.
 340:rtos/uC-USB-Device/Source/usbd_ep.c **** *
 341:rtos/uC-USB-Device/Source/usbd_ep.c **** *               timeout_ms  Timeout in milliseconds.
 342:rtos/uC-USB-Device/Source/usbd_ep.c **** *
 343:rtos/uC-USB-Device/Source/usbd_ep.c **** *               p_err       Pointer to variable that will receive return error code from this funct
 344:rtos/uC-USB-Device/Source/usbd_ep.c **** *
 345:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               USBD_ERR_NONE               Data successfully received.
 346:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               USBD_ERR_DEV_INVALID_NBR    Invalid device number.
 347:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               USBD_ERR_DEV_INVALID_STATE  Transfer type only available if device 
 348:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                                           configured state.
 349:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               USBD_ERR_EP_INVALID_ADDR    Invalid endpoint address.
 350:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               USBD_ERR_EP_INVALID_STATE   Invalid endpoint state.
 351:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               USBD_ERR_EP_INVALID_TYPE    Invalid endpoint type.
 352:rtos/uC-USB-Device/Source/usbd_ep.c **** *
 353:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               - RETURNED BY USBD_OS_EP_LockAcquire() -
 354:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               See USBD_OS_EP_LockAcquire() for additional return error codes.
 355:rtos/uC-USB-Device/Source/usbd_ep.c **** *
 356:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               - RETURNED BY USBD_EP_Rx() -
 357:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               See USBD_EP_Rx() for additional return error codes.
 358:rtos/uC-USB-Device/Source/usbd_ep.c **** *
 359:rtos/uC-USB-Device/Source/usbd_ep.c **** * Return(s)   : Number of octets received, if NO error(s).
 360:rtos/uC-USB-Device/Source/usbd_ep.c **** *
 361:rtos/uC-USB-Device/Source/usbd_ep.c **** *               0,                         otherwise.
 362:rtos/uC-USB-Device/Source/usbd_ep.c **** *
 363:rtos/uC-USB-Device/Source/usbd_ep.c **** * Note(s)     : (1) Receive buffer must be at least aligned on a word.
 364:rtos/uC-USB-Device/Source/usbd_ep.c **** ***************************************************************************************************
 365:rtos/uC-USB-Device/Source/usbd_ep.c **** */
 366:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 367:rtos/uC-USB-Device/Source/usbd_ep.c **** CPU_INT32U  USBD_BulkRx (CPU_INT08U   dev_nbr,
 368:rtos/uC-USB-Device/Source/usbd_ep.c ****                          CPU_INT08U   ep_addr,
 369:rtos/uC-USB-Device/Source/usbd_ep.c ****                          void        *p_buf,
 370:rtos/uC-USB-Device/Source/usbd_ep.c ****                          CPU_INT32U   buf_len,
 371:rtos/uC-USB-Device/Source/usbd_ep.c ****                          CPU_INT16U   timeout_ms,
 372:rtos/uC-USB-Device/Source/usbd_ep.c ****                          USBD_ERR    *p_err)
ARM GAS  /tmp/ccuUvpuw.s 			page 8


 373:rtos/uC-USB-Device/Source/usbd_ep.c **** {
 374:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_EP         *p_ep;
 375:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DRV        *p_drv;
 376:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DEV_STATE   state;
 377:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_INT32U       xfer_len;
 378:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_INT08U       ep_phy_nbr;
 379:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 380:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 381:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DBG_STATS_DEV_INC(dev_nbr, BulkRxSyncExecNbr);
 382:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 383:rtos/uC-USB-Device/Source/usbd_ep.c **** #if (USBD_CFG_ERR_ARG_CHK_EXT_EN == DEF_ENABLED)                /* ---------------- VALIDATE ARGUME
 384:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_err == (USBD_ERR *)0) {                               /* Validate error ptr.             
 385:rtos/uC-USB-Device/Source/usbd_ep.c ****         CPU_SW_EXCEPTION(0);
 386:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 387:rtos/uC-USB-Device/Source/usbd_ep.c **** #endif
 388:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 389:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_drv = USBD_DrvRefGet(dev_nbr);                            /* Get dev struct.                 
 390:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_drv == (USBD_DRV *)0) {
 391:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_DEV_INVALID_NBR;
 392:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (0u);
 393:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 394:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 395:rtos/uC-USB-Device/Source/usbd_ep.c ****     state = USBD_DevStateGet(dev_nbr, p_err);
 396:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (state != USBD_DEV_STATE_CONFIGURED) {                   /* EP transfers are ONLY allowed in
 397:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_DEV_INVALID_STATE;
 398:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (0u);
 399:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 400:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 401:rtos/uC-USB-Device/Source/usbd_ep.c ****     ep_phy_nbr = USBD_EP_ADDR_TO_PHY(ep_addr);
 402:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_ep       = USBD_EP_TblPtrs[dev_nbr][ep_phy_nbr];
 403:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 404:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_ep == (USBD_EP *)0) {
 405:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_EP_INVALID_ADDR;
 406:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (0u);
 407:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 408:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 409:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_OS_EP_LockAcquire(p_drv->DevNbr,
 410:rtos/uC-USB-Device/Source/usbd_ep.c ****                            p_ep->Ix,
 411:rtos/uC-USB-Device/Source/usbd_ep.c ****                            0u,
 412:rtos/uC-USB-Device/Source/usbd_ep.c ****                            p_err);
 413:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (*p_err != USBD_ERR_NONE) {
 414:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (0u);
 415:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 416:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 417:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_ep->State != USBD_EP_STATE_OPEN) {
 418:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_OS_EP_LockRelease(p_drv->DevNbr,
 419:rtos/uC-USB-Device/Source/usbd_ep.c ****                                p_ep->Ix);
 420:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_EP_INVALID_STATE;
 421:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (0u);
 422:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 423:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 424:rtos/uC-USB-Device/Source/usbd_ep.c ****                                                                 /* Chk EP attrib.                  
 425:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (((p_ep->Attrib & USBD_EP_TYPE_MASK) != USBD_EP_TYPE_BULK) ||
 426:rtos/uC-USB-Device/Source/usbd_ep.c ****         ((ep_addr      & USBD_EP_DIR_MASK)  != USBD_EP_DIR_OUT)) {
 427:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_OS_EP_LockRelease(p_drv->DevNbr,
 428:rtos/uC-USB-Device/Source/usbd_ep.c ****                                p_ep->Ix);
 429:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_EP_INVALID_TYPE;
ARM GAS  /tmp/ccuUvpuw.s 			page 9


 430:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (0u);
 431:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 432:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 433:rtos/uC-USB-Device/Source/usbd_ep.c ****     xfer_len = USBD_EP_Rx(                 p_drv,               /* Call generic EP rx fnct.        
 434:rtos/uC-USB-Device/Source/usbd_ep.c ****                                            p_ep,
 435:rtos/uC-USB-Device/Source/usbd_ep.c ****                                            p_buf,
 436:rtos/uC-USB-Device/Source/usbd_ep.c ****                                            buf_len,
 437:rtos/uC-USB-Device/Source/usbd_ep.c ****                           (USBD_ASYNC_FNCT)0,
 438:rtos/uC-USB-Device/Source/usbd_ep.c ****                           (void          *)0,
 439:rtos/uC-USB-Device/Source/usbd_ep.c ****                                            timeout_ms,
 440:rtos/uC-USB-Device/Source/usbd_ep.c ****                                            p_err);
 441:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 442:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_OS_EP_LockRelease(p_drv->DevNbr,
 443:rtos/uC-USB-Device/Source/usbd_ep.c ****                            p_ep->Ix);
 444:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 445:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DBG_STATS_DEV_INC_IF_TRUE(dev_nbr, BulkRxSyncSuccessNbr, (*p_err == USBD_ERR_NONE));
 446:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 447:rtos/uC-USB-Device/Source/usbd_ep.c ****     return (xfer_len);
 448:rtos/uC-USB-Device/Source/usbd_ep.c **** }
 449:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 450:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 451:rtos/uC-USB-Device/Source/usbd_ep.c **** /*
 452:rtos/uC-USB-Device/Source/usbd_ep.c **** ***************************************************************************************************
 453:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                         USBD_BulkRxAsync()
 454:rtos/uC-USB-Device/Source/usbd_ep.c **** *
 455:rtos/uC-USB-Device/Source/usbd_ep.c **** * Description : Receive data on Bulk OUT endpoint asynchronously.
 456:rtos/uC-USB-Device/Source/usbd_ep.c **** *
 457:rtos/uC-USB-Device/Source/usbd_ep.c **** * Argument(s) : dev_nbr         Device number.
 458:rtos/uC-USB-Device/Source/usbd_ep.c **** *
 459:rtos/uC-USB-Device/Source/usbd_ep.c **** *               ep_addr         Endpoint address.
 460:rtos/uC-USB-Device/Source/usbd_ep.c **** *
 461:rtos/uC-USB-Device/Source/usbd_ep.c **** *               p_buf           Pointer to destination buffer to receive data (see Note #1).
 462:rtos/uC-USB-Device/Source/usbd_ep.c **** *
 463:rtos/uC-USB-Device/Source/usbd_ep.c **** *               buf_len         Number of octets to receive.
 464:rtos/uC-USB-Device/Source/usbd_ep.c **** *
 465:rtos/uC-USB-Device/Source/usbd_ep.c **** *               async_fnct      Function that will be invoked upon completion of receive operation.
 466:rtos/uC-USB-Device/Source/usbd_ep.c **** *
 467:rtos/uC-USB-Device/Source/usbd_ep.c **** *               p_async_arg     Pointer to argument that will be passed as parameter of 'async_fnct
 468:rtos/uC-USB-Device/Source/usbd_ep.c **** *
 469:rtos/uC-USB-Device/Source/usbd_ep.c **** *               p_err           Pointer to variable that will receive return error code from this f
 470:rtos/uC-USB-Device/Source/usbd_ep.c **** *
 471:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                   USBD_ERR_NONE               Data successfully received.
 472:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                   USBD_ERR_NULL_PTR           Parameter 'async_fnct' is a null po
 473:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                   USBD_ERR_DEV_INVALID_NBR    Invalid device number.
 474:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                   USBD_ERR_DEV_INVALID_STATE  Transfer type only available if dev
 475:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                                               configured state.
 476:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                   USBD_ERR_EP_INVALID_ADDR    Invalid endpoint address.
 477:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                   USBD_ERR_EP_INVALID_STATE   Invalid endpoint state.
 478:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                   USBD_ERR_EP_INVALID_TYPE    Invalid endpoint type.
 479:rtos/uC-USB-Device/Source/usbd_ep.c **** *
 480:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                   - RETURNED BY USBD_OS_EP_LockAcquire() -
 481:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                   See USBD_OS_EP_LockAcquire() for additional return error codes.
 482:rtos/uC-USB-Device/Source/usbd_ep.c **** *
 483:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                   - RETURNED BY USBD_EP_Rx() -
 484:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                   See USBD_EP_Rx() for additional return error codes.
 485:rtos/uC-USB-Device/Source/usbd_ep.c **** *
 486:rtos/uC-USB-Device/Source/usbd_ep.c **** * Return(s)   : none.
ARM GAS  /tmp/ccuUvpuw.s 			page 10


 487:rtos/uC-USB-Device/Source/usbd_ep.c **** *
 488:rtos/uC-USB-Device/Source/usbd_ep.c **** * Note(s)     : (1) Receive buffer must be at least aligned on a word.
 489:rtos/uC-USB-Device/Source/usbd_ep.c **** ***************************************************************************************************
 490:rtos/uC-USB-Device/Source/usbd_ep.c **** */
 491:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 492:rtos/uC-USB-Device/Source/usbd_ep.c **** void  USBD_BulkRxAsync (CPU_INT08U        dev_nbr,
 493:rtos/uC-USB-Device/Source/usbd_ep.c ****                         CPU_INT08U        ep_addr,
 494:rtos/uC-USB-Device/Source/usbd_ep.c ****                         void             *p_buf,
 495:rtos/uC-USB-Device/Source/usbd_ep.c ****                         CPU_INT32U        buf_len,
 496:rtos/uC-USB-Device/Source/usbd_ep.c ****                         USBD_ASYNC_FNCT   async_fnct,
 497:rtos/uC-USB-Device/Source/usbd_ep.c ****                         void             *p_async_arg,
 498:rtos/uC-USB-Device/Source/usbd_ep.c ****                         USBD_ERR         *p_err)
 499:rtos/uC-USB-Device/Source/usbd_ep.c **** {
 500:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_EP         *p_ep;
 501:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DRV        *p_drv;
 502:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DEV_STATE   state;
 503:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_INT08U       ep_phy_nbr;
 504:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 505:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 506:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DBG_STATS_DEV_INC(dev_nbr, BulkRxAsyncExecNbr);
 507:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 508:rtos/uC-USB-Device/Source/usbd_ep.c **** #if (USBD_CFG_ERR_ARG_CHK_EXT_EN == DEF_ENABLED)                /* ---------------- VALIDATE ARGUME
 509:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_err == (USBD_ERR *)0) {                               /* Validate error ptr.             
 510:rtos/uC-USB-Device/Source/usbd_ep.c ****         CPU_SW_EXCEPTION(;);
 511:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 512:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 513:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (async_fnct == (USBD_ASYNC_FNCT)0) {
 514:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_NULL_PTR;
 515:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 516:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 517:rtos/uC-USB-Device/Source/usbd_ep.c **** #endif
 518:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 519:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_drv = USBD_DrvRefGet(dev_nbr);                            /* Get dev struct.                 
 520:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_drv == (USBD_DRV *)0) {
 521:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_DEV_INVALID_NBR;
 522:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 523:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 524:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 525:rtos/uC-USB-Device/Source/usbd_ep.c ****     state = USBD_DevStateGet(dev_nbr, p_err);
 526:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (state != USBD_DEV_STATE_CONFIGURED) {                   /* EP transfers are ONLY allowed in
 527:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_DEV_INVALID_STATE;
 528:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 529:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 530:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 531:rtos/uC-USB-Device/Source/usbd_ep.c ****     ep_phy_nbr = USBD_EP_ADDR_TO_PHY(ep_addr);
 532:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_ep       = USBD_EP_TblPtrs[dev_nbr][ep_phy_nbr];
 533:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 534:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_ep == (USBD_EP *)0) {
 535:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_EP_INVALID_ADDR;
 536:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 537:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 538:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 539:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_OS_EP_LockAcquire(p_drv->DevNbr,
 540:rtos/uC-USB-Device/Source/usbd_ep.c ****                            p_ep->Ix,
 541:rtos/uC-USB-Device/Source/usbd_ep.c ****                            0u,
 542:rtos/uC-USB-Device/Source/usbd_ep.c ****                            p_err);
 543:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (*p_err != USBD_ERR_NONE) {
ARM GAS  /tmp/ccuUvpuw.s 			page 11


 544:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 545:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 546:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 547:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_ep->State != USBD_EP_STATE_OPEN) {
 548:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_OS_EP_LockRelease(p_drv->DevNbr,
 549:rtos/uC-USB-Device/Source/usbd_ep.c ****                                p_ep->Ix);
 550:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_EP_INVALID_STATE;
 551:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 552:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 553:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 554:rtos/uC-USB-Device/Source/usbd_ep.c ****                                                                 /* Chk EP attrib.                  
 555:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (((p_ep->Attrib & USBD_EP_TYPE_MASK) != USBD_EP_TYPE_BULK) ||
 556:rtos/uC-USB-Device/Source/usbd_ep.c ****         ((ep_addr      & USBD_EP_DIR_MASK)  != USBD_EP_DIR_OUT)) {
 557:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_OS_EP_LockRelease(p_drv->DevNbr,
 558:rtos/uC-USB-Device/Source/usbd_ep.c ****                                p_ep->Ix);
 559:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_EP_INVALID_TYPE;
 560:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 561:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 562:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 563:rtos/uC-USB-Device/Source/usbd_ep.c ****     (void)USBD_EP_Rx(p_drv,                                     /* Call generic EP rx fnct.        
 564:rtos/uC-USB-Device/Source/usbd_ep.c ****                      p_ep,
 565:rtos/uC-USB-Device/Source/usbd_ep.c ****                      p_buf,
 566:rtos/uC-USB-Device/Source/usbd_ep.c ****                      buf_len,
 567:rtos/uC-USB-Device/Source/usbd_ep.c ****                      async_fnct,
 568:rtos/uC-USB-Device/Source/usbd_ep.c ****                      p_async_arg,
 569:rtos/uC-USB-Device/Source/usbd_ep.c ****                      0u,
 570:rtos/uC-USB-Device/Source/usbd_ep.c ****                      p_err);
 571:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 572:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_OS_EP_LockRelease(p_drv->DevNbr,
 573:rtos/uC-USB-Device/Source/usbd_ep.c ****                            p_ep->Ix);
 574:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 575:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DBG_STATS_DEV_INC_IF_TRUE(dev_nbr, BulkRxAsyncSuccessNbr, (*p_err == USBD_ERR_NONE));
 576:rtos/uC-USB-Device/Source/usbd_ep.c **** }
 577:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 578:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 579:rtos/uC-USB-Device/Source/usbd_ep.c **** /*
 580:rtos/uC-USB-Device/Source/usbd_ep.c **** ***************************************************************************************************
 581:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                            USBD_BulkTx()
 582:rtos/uC-USB-Device/Source/usbd_ep.c **** *
 583:rtos/uC-USB-Device/Source/usbd_ep.c **** * Description : Send data on Bulk IN endpoint.
 584:rtos/uC-USB-Device/Source/usbd_ep.c **** *
 585:rtos/uC-USB-Device/Source/usbd_ep.c **** * Argument(s) : dev_nbr     Device number.
 586:rtos/uC-USB-Device/Source/usbd_ep.c **** *
 587:rtos/uC-USB-Device/Source/usbd_ep.c **** *               ep_addr     Endpoint address.
 588:rtos/uC-USB-Device/Source/usbd_ep.c **** *
 589:rtos/uC-USB-Device/Source/usbd_ep.c **** *               p_buf       Pointer to buffer of data that will be transmitted (see Note #2).
 590:rtos/uC-USB-Device/Source/usbd_ep.c **** *
 591:rtos/uC-USB-Device/Source/usbd_ep.c **** *               buf_len     Number of octets to transmit.
 592:rtos/uC-USB-Device/Source/usbd_ep.c **** *
 593:rtos/uC-USB-Device/Source/usbd_ep.c **** *               timeout_ms  Timeout in milliseconds.
 594:rtos/uC-USB-Device/Source/usbd_ep.c **** *
 595:rtos/uC-USB-Device/Source/usbd_ep.c **** *               end         End-of-transfer flag (see Note #3).
 596:rtos/uC-USB-Device/Source/usbd_ep.c **** *
 597:rtos/uC-USB-Device/Source/usbd_ep.c **** *               p_err       Pointer to variable that will receive return error code from this funct
 598:rtos/uC-USB-Device/Source/usbd_ep.c **** *
 599:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               USBD_ERR_NONE               Data successfully transmitted.
 600:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               USBD_ERR_DEV_INVALID_NBR    Invalid device number.
ARM GAS  /tmp/ccuUvpuw.s 			page 12


 601:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               USBD_ERR_DEV_INVALID_STATE  Transfer type only available if device 
 602:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                                           configured state.
 603:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               USBD_ERR_EP_INVALID_ADDR    Invalid endpoint address.
 604:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               USBD_ERR_EP_INVALID_STATE   Invalid endpoint state.
 605:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               USBD_ERR_EP_INVALID_TYPE    Invalid endpoint type.
 606:rtos/uC-USB-Device/Source/usbd_ep.c **** *
 607:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               - RETURNED BY USBD_OS_EP_LockAcquire() -
 608:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               See USBD_OS_EP_LockAcquire() for additional return error codes.
 609:rtos/uC-USB-Device/Source/usbd_ep.c **** *
 610:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               - RETURNED BY USBD_EP_Tx() -
 611:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               See USBD_EP_Tx() for additional return error codes.
 612:rtos/uC-USB-Device/Source/usbd_ep.c **** *
 613:rtos/uC-USB-Device/Source/usbd_ep.c **** * Return(s)   : Number of octets transmitted, if NO error(s).
 614:rtos/uC-USB-Device/Source/usbd_ep.c **** *
 615:rtos/uC-USB-Device/Source/usbd_ep.c **** *               0,                            otherwise.
 616:rtos/uC-USB-Device/Source/usbd_ep.c **** *
 617:rtos/uC-USB-Device/Source/usbd_ep.c **** * Note(s)     : (1) This function SHOULD NOT be called from interrupt service routine (ISR).
 618:rtos/uC-USB-Device/Source/usbd_ep.c **** *
 619:rtos/uC-USB-Device/Source/usbd_ep.c **** *               (2) Transmit buffer must be at least aligned on a word.
 620:rtos/uC-USB-Device/Source/usbd_ep.c **** *
 621:rtos/uC-USB-Device/Source/usbd_ep.c **** *               (3) If end-of-transfer is set and transfer length is multiple of maximum packet siz
 622:rtos/uC-USB-Device/Source/usbd_ep.c **** *                   a zero-length packet is transferred to indicate a short transfer to the host.
 623:rtos/uC-USB-Device/Source/usbd_ep.c **** ***************************************************************************************************
 624:rtos/uC-USB-Device/Source/usbd_ep.c **** */
 625:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 626:rtos/uC-USB-Device/Source/usbd_ep.c **** CPU_INT32U  USBD_BulkTx (CPU_INT08U    dev_nbr,
 627:rtos/uC-USB-Device/Source/usbd_ep.c ****                          CPU_INT08U    ep_addr,
 628:rtos/uC-USB-Device/Source/usbd_ep.c ****                          void         *p_buf,
 629:rtos/uC-USB-Device/Source/usbd_ep.c ****                          CPU_INT32U    buf_len,
 630:rtos/uC-USB-Device/Source/usbd_ep.c ****                          CPU_INT16U    timeout_ms,
 631:rtos/uC-USB-Device/Source/usbd_ep.c ****                          CPU_BOOLEAN   end,
 632:rtos/uC-USB-Device/Source/usbd_ep.c ****                          USBD_ERR     *p_err)
 633:rtos/uC-USB-Device/Source/usbd_ep.c **** {
 634:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_EP         *p_ep;
 635:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DRV        *p_drv;
 636:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DEV_STATE   state;
 637:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_INT32U       xfer_len;
 638:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_INT08U       ep_phy_nbr;
 639:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 640:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 641:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DBG_STATS_DEV_INC(dev_nbr, BulkTxSyncExecNbr);
 642:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 643:rtos/uC-USB-Device/Source/usbd_ep.c **** #if (USBD_CFG_ERR_ARG_CHK_EXT_EN == DEF_ENABLED)                /* ---------------- VALIDATE ARGUME
 644:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_err == (USBD_ERR *)0) {                               /* Validate error ptr.             
 645:rtos/uC-USB-Device/Source/usbd_ep.c ****         CPU_SW_EXCEPTION(0);
 646:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 647:rtos/uC-USB-Device/Source/usbd_ep.c **** #endif
 648:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 649:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_drv = USBD_DrvRefGet(dev_nbr);                            /* Get dev struct.                 
 650:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_drv == (USBD_DRV *)0) {
 651:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_DEV_INVALID_NBR;
 652:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (0u);
 653:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 654:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 655:rtos/uC-USB-Device/Source/usbd_ep.c ****     state = USBD_DevStateGet(dev_nbr, p_err);
 656:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (state != USBD_DEV_STATE_CONFIGURED) {                   /* EP transfers are ONLY allowed in
 657:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_DEV_INVALID_STATE;
ARM GAS  /tmp/ccuUvpuw.s 			page 13


 658:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (0u);
 659:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 660:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 661:rtos/uC-USB-Device/Source/usbd_ep.c ****     ep_phy_nbr = USBD_EP_ADDR_TO_PHY(ep_addr);
 662:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_ep       = USBD_EP_TblPtrs[dev_nbr][ep_phy_nbr];
 663:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 664:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_ep == (USBD_EP *)0) {
 665:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_EP_INVALID_ADDR;
 666:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (0u);
 667:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 668:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 669:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_OS_EP_LockAcquire(p_drv->DevNbr,
 670:rtos/uC-USB-Device/Source/usbd_ep.c ****                            p_ep->Ix,
 671:rtos/uC-USB-Device/Source/usbd_ep.c ****                            0u,
 672:rtos/uC-USB-Device/Source/usbd_ep.c ****                            p_err);
 673:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (*p_err != USBD_ERR_NONE) {
 674:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (0u);
 675:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 676:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 677:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_ep->State != USBD_EP_STATE_OPEN) {
 678:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_OS_EP_LockRelease(p_drv->DevNbr,
 679:rtos/uC-USB-Device/Source/usbd_ep.c ****                                p_ep->Ix);
 680:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_EP_INVALID_STATE;
 681:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (0u);
 682:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 683:rtos/uC-USB-Device/Source/usbd_ep.c ****                                                                 /* Chk EP attrib.                  
 684:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (((p_ep->Attrib & USBD_EP_TYPE_MASK) != USBD_EP_TYPE_BULK) ||
 685:rtos/uC-USB-Device/Source/usbd_ep.c ****         ((ep_addr      & USBD_EP_DIR_MASK)  != USBD_EP_DIR_IN)) {
 686:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_OS_EP_LockRelease(p_drv->DevNbr,
 687:rtos/uC-USB-Device/Source/usbd_ep.c ****                                p_ep->Ix);
 688:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_EP_INVALID_TYPE;
 689:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (0u);
 690:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 691:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 692:rtos/uC-USB-Device/Source/usbd_ep.c ****     xfer_len = USBD_EP_Tx(                 p_drv,               /* Call generic EP tx fnct.        
 693:rtos/uC-USB-Device/Source/usbd_ep.c ****                                            p_ep,
 694:rtos/uC-USB-Device/Source/usbd_ep.c ****                                            p_buf,
 695:rtos/uC-USB-Device/Source/usbd_ep.c ****                                            buf_len,
 696:rtos/uC-USB-Device/Source/usbd_ep.c ****                           (USBD_ASYNC_FNCT)0,
 697:rtos/uC-USB-Device/Source/usbd_ep.c ****                           (void          *)0,
 698:rtos/uC-USB-Device/Source/usbd_ep.c ****                                            timeout_ms,
 699:rtos/uC-USB-Device/Source/usbd_ep.c ****                                            end,
 700:rtos/uC-USB-Device/Source/usbd_ep.c ****                                            p_err);
 701:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 702:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_OS_EP_LockRelease(p_drv->DevNbr,
 703:rtos/uC-USB-Device/Source/usbd_ep.c ****                            p_ep->Ix);
 704:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 705:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DBG_STATS_DEV_INC_IF_TRUE(dev_nbr, BulkTxSyncSuccessNbr, (*p_err == USBD_ERR_NONE));
 706:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 707:rtos/uC-USB-Device/Source/usbd_ep.c ****     return (xfer_len);
 708:rtos/uC-USB-Device/Source/usbd_ep.c **** }
 709:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 710:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 711:rtos/uC-USB-Device/Source/usbd_ep.c **** /*
 712:rtos/uC-USB-Device/Source/usbd_ep.c **** ***************************************************************************************************
 713:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                         USBD_BulkTxAsync()
 714:rtos/uC-USB-Device/Source/usbd_ep.c **** *
ARM GAS  /tmp/ccuUvpuw.s 			page 14


 715:rtos/uC-USB-Device/Source/usbd_ep.c **** * Description : Send data on Bulk IN endpoint asynchronously.
 716:rtos/uC-USB-Device/Source/usbd_ep.c **** *
 717:rtos/uC-USB-Device/Source/usbd_ep.c **** * Argument(s) : dev_nbr         Device number.
 718:rtos/uC-USB-Device/Source/usbd_ep.c **** *
 719:rtos/uC-USB-Device/Source/usbd_ep.c **** *               ep_addr         Endpoint address.
 720:rtos/uC-USB-Device/Source/usbd_ep.c **** *
 721:rtos/uC-USB-Device/Source/usbd_ep.c **** *               p_buf           Pointer to buffer of data that will be transmitted (see Note #1).
 722:rtos/uC-USB-Device/Source/usbd_ep.c **** *
 723:rtos/uC-USB-Device/Source/usbd_ep.c **** *               buf_len         Number of octets to transmit.
 724:rtos/uC-USB-Device/Source/usbd_ep.c **** *
 725:rtos/uC-USB-Device/Source/usbd_ep.c **** *               async_fnct      Function that will be invoked upon completion of transmit operation
 726:rtos/uC-USB-Device/Source/usbd_ep.c **** *
 727:rtos/uC-USB-Device/Source/usbd_ep.c **** *               p_async_arg     Pointer to argument that will be passed as parameter of 'async_fnct
 728:rtos/uC-USB-Device/Source/usbd_ep.c **** *
 729:rtos/uC-USB-Device/Source/usbd_ep.c **** *               end             End-of-transfer flag (see Note #2).
 730:rtos/uC-USB-Device/Source/usbd_ep.c **** *
 731:rtos/uC-USB-Device/Source/usbd_ep.c **** *               p_err           Pointer to variable that will receive return error code from this f
 732:rtos/uC-USB-Device/Source/usbd_ep.c **** *
 733:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                   USBD_ERR_NONE               Data successfully transmitted.
 734:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                   USBD_ERR_NULL_PTR           Parameter 'async_fnct' is a null po
 735:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                   USBD_ERR_DEV_INVALID_NBR    Invalid device number.
 736:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                   USBD_ERR_DEV_INVALID_STATE  Transfer type only available if dev
 737:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                                               configured state.
 738:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                   USBD_ERR_EP_INVALID_ADDR    Invalid endpoint address.
 739:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                   USBD_ERR_EP_INVALID_STATE   Invalid endpoint state.
 740:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                   USBD_ERR_EP_INVALID_TYPE    Invalid endpoint type.
 741:rtos/uC-USB-Device/Source/usbd_ep.c **** *
 742:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                   - RETURNED BY USBD_OS_EP_LockAcquire() -
 743:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                   See USBD_OS_EP_LockAcquire() for additional return error codes.
 744:rtos/uC-USB-Device/Source/usbd_ep.c **** *
 745:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                   - RETURNED BY USBD_EP_Tx() -
 746:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                   See USBD_EP_Tx() for additional return error codes.
 747:rtos/uC-USB-Device/Source/usbd_ep.c **** *
 748:rtos/uC-USB-Device/Source/usbd_ep.c **** * Return(s)   : none.
 749:rtos/uC-USB-Device/Source/usbd_ep.c **** *
 750:rtos/uC-USB-Device/Source/usbd_ep.c **** * Note(s)     : (1) Transmit buffer must be at least aligned on a word.
 751:rtos/uC-USB-Device/Source/usbd_ep.c **** *
 752:rtos/uC-USB-Device/Source/usbd_ep.c **** *               (2) If end-of-transfer is set and transfer length is multiple of maximum packet siz
 753:rtos/uC-USB-Device/Source/usbd_ep.c **** *                   a zero-length packet is transferred to indicate a short transfer to the host.
 754:rtos/uC-USB-Device/Source/usbd_ep.c **** ***************************************************************************************************
 755:rtos/uC-USB-Device/Source/usbd_ep.c **** */
 756:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 757:rtos/uC-USB-Device/Source/usbd_ep.c **** void  USBD_BulkTxAsync (CPU_INT08U        dev_nbr,
 758:rtos/uC-USB-Device/Source/usbd_ep.c ****                         CPU_INT08U        ep_addr,
 759:rtos/uC-USB-Device/Source/usbd_ep.c ****                         void             *p_buf,
 760:rtos/uC-USB-Device/Source/usbd_ep.c ****                         CPU_INT32U        buf_len,
 761:rtos/uC-USB-Device/Source/usbd_ep.c ****                         USBD_ASYNC_FNCT   async_fnct,
 762:rtos/uC-USB-Device/Source/usbd_ep.c ****                         void             *p_async_arg,
 763:rtos/uC-USB-Device/Source/usbd_ep.c ****                         CPU_BOOLEAN       end,
 764:rtos/uC-USB-Device/Source/usbd_ep.c ****                         USBD_ERR         *p_err)
 765:rtos/uC-USB-Device/Source/usbd_ep.c **** {
 766:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_EP         *p_ep;
 767:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DRV        *p_drv;
 768:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DEV_STATE   state;
 769:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_INT08U       ep_phy_nbr;
 770:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 771:rtos/uC-USB-Device/Source/usbd_ep.c **** 
ARM GAS  /tmp/ccuUvpuw.s 			page 15


 772:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DBG_STATS_DEV_INC(dev_nbr, BulkTxAsyncExecNbr);
 773:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 774:rtos/uC-USB-Device/Source/usbd_ep.c **** #if (USBD_CFG_ERR_ARG_CHK_EXT_EN == DEF_ENABLED)                /* ---------------- VALIDATE ARGUME
 775:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_err == (USBD_ERR *)0) {                               /* Validate error ptr.             
 776:rtos/uC-USB-Device/Source/usbd_ep.c ****         CPU_SW_EXCEPTION(;);
 777:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 778:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 779:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (async_fnct == (USBD_ASYNC_FNCT)0) {
 780:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_NULL_PTR;
 781:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 782:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 783:rtos/uC-USB-Device/Source/usbd_ep.c **** #endif
 784:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 785:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_drv = USBD_DrvRefGet(dev_nbr);                            /* Get dev struct.                 
 786:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_drv == (USBD_DRV *)0) {
 787:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_DEV_INVALID_NBR;
 788:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 789:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 790:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 791:rtos/uC-USB-Device/Source/usbd_ep.c ****     state = USBD_DevStateGet(dev_nbr, p_err);
 792:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (state != USBD_DEV_STATE_CONFIGURED) {                   /* EP transfers are ONLY allowed in
 793:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_DEV_INVALID_STATE;
 794:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 795:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 796:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 797:rtos/uC-USB-Device/Source/usbd_ep.c ****     ep_phy_nbr = USBD_EP_ADDR_TO_PHY(ep_addr);
 798:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_ep       = USBD_EP_TblPtrs[dev_nbr][ep_phy_nbr];
 799:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 800:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_ep == (USBD_EP *)0) {
 801:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_EP_INVALID_ADDR;
 802:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 803:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 804:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 805:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_OS_EP_LockAcquire(p_drv->DevNbr,
 806:rtos/uC-USB-Device/Source/usbd_ep.c ****                            p_ep->Ix,
 807:rtos/uC-USB-Device/Source/usbd_ep.c ****                            0u,
 808:rtos/uC-USB-Device/Source/usbd_ep.c ****                            p_err);
 809:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (*p_err != USBD_ERR_NONE) {
 810:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 811:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 812:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 813:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_ep->State != USBD_EP_STATE_OPEN) {
 814:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_OS_EP_LockRelease(p_drv->DevNbr,
 815:rtos/uC-USB-Device/Source/usbd_ep.c ****                                p_ep->Ix);
 816:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_EP_INVALID_STATE;
 817:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 818:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 819:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 820:rtos/uC-USB-Device/Source/usbd_ep.c ****                                                                 /* Chk EP attrib.                  
 821:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (((p_ep->Attrib & USBD_EP_TYPE_MASK) != USBD_EP_TYPE_BULK) ||
 822:rtos/uC-USB-Device/Source/usbd_ep.c ****         ((ep_addr      & USBD_EP_DIR_MASK)  != USBD_EP_DIR_IN)) {
 823:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_OS_EP_LockRelease(p_drv->DevNbr,
 824:rtos/uC-USB-Device/Source/usbd_ep.c ****                                p_ep->Ix);
 825:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_EP_INVALID_TYPE;
 826:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 827:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 828:rtos/uC-USB-Device/Source/usbd_ep.c **** 
ARM GAS  /tmp/ccuUvpuw.s 			page 16


 829:rtos/uC-USB-Device/Source/usbd_ep.c ****    (void)USBD_EP_Tx(p_drv,
 830:rtos/uC-USB-Device/Source/usbd_ep.c ****                     p_ep,
 831:rtos/uC-USB-Device/Source/usbd_ep.c ****                     p_buf,
 832:rtos/uC-USB-Device/Source/usbd_ep.c ****                     buf_len,
 833:rtos/uC-USB-Device/Source/usbd_ep.c ****                     async_fnct,
 834:rtos/uC-USB-Device/Source/usbd_ep.c ****                     p_async_arg,
 835:rtos/uC-USB-Device/Source/usbd_ep.c ****                     0u,
 836:rtos/uC-USB-Device/Source/usbd_ep.c ****                     end,
 837:rtos/uC-USB-Device/Source/usbd_ep.c ****                     p_err);
 838:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 839:rtos/uC-USB-Device/Source/usbd_ep.c ****    USBD_OS_EP_LockRelease(p_drv->DevNbr,
 840:rtos/uC-USB-Device/Source/usbd_ep.c ****                           p_ep->Ix);
 841:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 842:rtos/uC-USB-Device/Source/usbd_ep.c ****    USBD_DBG_STATS_DEV_INC_IF_TRUE(dev_nbr, BulkTxAsyncSuccessNbr, (*p_err == USBD_ERR_NONE));
 843:rtos/uC-USB-Device/Source/usbd_ep.c **** }
 844:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 845:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 846:rtos/uC-USB-Device/Source/usbd_ep.c **** /*
 847:rtos/uC-USB-Device/Source/usbd_ep.c **** ***************************************************************************************************
 848:rtos/uC-USB-Device/Source/usbd_ep.c **** ***************************************************************************************************
 849:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                    INTERRUPT TRANSFER FUNCTIONS
 850:rtos/uC-USB-Device/Source/usbd_ep.c **** ***************************************************************************************************
 851:rtos/uC-USB-Device/Source/usbd_ep.c **** ***************************************************************************************************
 852:rtos/uC-USB-Device/Source/usbd_ep.c **** */
 853:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 854:rtos/uC-USB-Device/Source/usbd_ep.c **** /*
 855:rtos/uC-USB-Device/Source/usbd_ep.c **** ***************************************************************************************************
 856:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                            USBD_IntrRx()
 857:rtos/uC-USB-Device/Source/usbd_ep.c **** *
 858:rtos/uC-USB-Device/Source/usbd_ep.c **** * Description : Receive data on Interrupt OUT endpoint.
 859:rtos/uC-USB-Device/Source/usbd_ep.c **** *
 860:rtos/uC-USB-Device/Source/usbd_ep.c **** * Argument(s) : dev_nbr     Device number.
 861:rtos/uC-USB-Device/Source/usbd_ep.c **** *
 862:rtos/uC-USB-Device/Source/usbd_ep.c **** *               ep_addr     Endpoint address.
 863:rtos/uC-USB-Device/Source/usbd_ep.c **** *
 864:rtos/uC-USB-Device/Source/usbd_ep.c **** *               p_buf       Pointer to destination buffer to receive data (see Note #2).
 865:rtos/uC-USB-Device/Source/usbd_ep.c **** *
 866:rtos/uC-USB-Device/Source/usbd_ep.c **** *               buf_len     Number of octets to receive.
 867:rtos/uC-USB-Device/Source/usbd_ep.c **** *
 868:rtos/uC-USB-Device/Source/usbd_ep.c **** *               timeout_ms  Timeout in milliseconds.
 869:rtos/uC-USB-Device/Source/usbd_ep.c **** *
 870:rtos/uC-USB-Device/Source/usbd_ep.c **** *               p_err       Pointer to variable that will receive return error code from this funct
 871:rtos/uC-USB-Device/Source/usbd_ep.c **** *
 872:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               USBD_ERR_NONE               Data successfully received.
 873:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               USBD_ERR_DEV_INVALID_NBR    Invalid device number.
 874:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               USBD_ERR_DEV_INVALID_STATE  Transfer type only available if device 
 875:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                                           configured state.
 876:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               USBD_ERR_EP_INVALID_ADDR    Invalid endpoint address.
 877:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               USBD_ERR_EP_INVALID_STATE   Invalid endpoint state.
 878:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               USBD_ERR_EP_INVALID_TYPE    Invalid endpoint type.
 879:rtos/uC-USB-Device/Source/usbd_ep.c **** *
 880:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               - RETURNED BY USBD_OS_EP_LockAcquire() -
 881:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               See USBD_OS_EP_LockAcquire() for additional return error codes.
 882:rtos/uC-USB-Device/Source/usbd_ep.c **** *
 883:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               - RETURNED BY USBD_EP_Rx() -
 884:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               See USBD_EP_Rx() for additional return error codes.
 885:rtos/uC-USB-Device/Source/usbd_ep.c **** *
ARM GAS  /tmp/ccuUvpuw.s 			page 17


 886:rtos/uC-USB-Device/Source/usbd_ep.c **** * Return(s)   : Number of octets received, if NO error(s).
 887:rtos/uC-USB-Device/Source/usbd_ep.c **** *
 888:rtos/uC-USB-Device/Source/usbd_ep.c **** *               0,                         otherwise.
 889:rtos/uC-USB-Device/Source/usbd_ep.c **** *
 890:rtos/uC-USB-Device/Source/usbd_ep.c **** * Note(s)     : (1) This function SHOULD NOT be called from interrupt service routine (ISR).
 891:rtos/uC-USB-Device/Source/usbd_ep.c **** *
 892:rtos/uC-USB-Device/Source/usbd_ep.c **** *               (2) Receive buffer must be at least aligned on a word.
 893:rtos/uC-USB-Device/Source/usbd_ep.c **** ***************************************************************************************************
 894:rtos/uC-USB-Device/Source/usbd_ep.c **** */
 895:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 896:rtos/uC-USB-Device/Source/usbd_ep.c **** CPU_INT32U  USBD_IntrRx (CPU_INT08U   dev_nbr,
 897:rtos/uC-USB-Device/Source/usbd_ep.c ****                          CPU_INT08U   ep_addr,
 898:rtos/uC-USB-Device/Source/usbd_ep.c ****                          void        *p_buf,
 899:rtos/uC-USB-Device/Source/usbd_ep.c ****                          CPU_INT32U   buf_len,
 900:rtos/uC-USB-Device/Source/usbd_ep.c ****                          CPU_INT16U   timeout_ms,
 901:rtos/uC-USB-Device/Source/usbd_ep.c ****                          USBD_ERR    *p_err)
 902:rtos/uC-USB-Device/Source/usbd_ep.c **** {
 903:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_EP         *p_ep;
 904:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DRV        *p_drv;
 905:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DEV_STATE   state;
 906:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_INT32U       xfer_len;
 907:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_INT08U       ep_phy_nbr;
 908:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 909:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 910:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DBG_STATS_DEV_INC(dev_nbr, IntrRxSyncExecNbr);
 911:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 912:rtos/uC-USB-Device/Source/usbd_ep.c **** #if (USBD_CFG_ERR_ARG_CHK_EXT_EN == DEF_ENABLED)                /* ---------------- VALIDATE ARGUME
 913:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_err == (USBD_ERR *)0) {                               /* Validate error ptr.             
 914:rtos/uC-USB-Device/Source/usbd_ep.c ****         CPU_SW_EXCEPTION(0);
 915:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 916:rtos/uC-USB-Device/Source/usbd_ep.c **** #endif
 917:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 918:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_drv = USBD_DrvRefGet(dev_nbr);                            /* Get dev struct.                 
 919:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_drv == (USBD_DRV *)0) {
 920:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_DEV_INVALID_NBR;
 921:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (0u);
 922:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 923:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 924:rtos/uC-USB-Device/Source/usbd_ep.c ****     state = USBD_DevStateGet(dev_nbr, p_err);
 925:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (state != USBD_DEV_STATE_CONFIGURED) {                   /* EP transfers are ONLY allowed in
 926:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_DEV_INVALID_STATE;
 927:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (0u);
 928:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 929:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 930:rtos/uC-USB-Device/Source/usbd_ep.c ****     ep_phy_nbr = USBD_EP_ADDR_TO_PHY(ep_addr);
 931:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_ep       = USBD_EP_TblPtrs[dev_nbr][ep_phy_nbr];
 932:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 933:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_ep == (USBD_EP *)0) {
 934:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_EP_INVALID_ADDR;
 935:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (0u);
 936:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 937:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 938:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_OS_EP_LockAcquire(p_drv->DevNbr,
 939:rtos/uC-USB-Device/Source/usbd_ep.c ****                            p_ep->Ix,
 940:rtos/uC-USB-Device/Source/usbd_ep.c ****                            0u,
 941:rtos/uC-USB-Device/Source/usbd_ep.c ****                            p_err);
 942:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (*p_err != USBD_ERR_NONE) {
ARM GAS  /tmp/ccuUvpuw.s 			page 18


 943:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (0u);
 944:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 945:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 946:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_ep->State != USBD_EP_STATE_OPEN) {
 947:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_OS_EP_LockRelease(p_drv->DevNbr,
 948:rtos/uC-USB-Device/Source/usbd_ep.c ****                                p_ep->Ix);
 949:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_EP_INVALID_STATE;
 950:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (0u);
 951:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 952:rtos/uC-USB-Device/Source/usbd_ep.c ****                                                                 /* Chk EP attrib.                  
 953:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (((p_ep->Attrib & USBD_EP_TYPE_MASK) != USBD_EP_TYPE_INTR) ||
 954:rtos/uC-USB-Device/Source/usbd_ep.c ****         ((ep_addr      & USBD_EP_DIR_MASK)  != USBD_EP_DIR_OUT)) {
 955:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_OS_EP_LockRelease(p_drv->DevNbr,
 956:rtos/uC-USB-Device/Source/usbd_ep.c ****                                p_ep->Ix);
 957:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_EP_INVALID_TYPE;
 958:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (0u);
 959:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 960:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 961:rtos/uC-USB-Device/Source/usbd_ep.c ****     xfer_len = USBD_EP_Rx(                 p_drv,
 962:rtos/uC-USB-Device/Source/usbd_ep.c ****                                            p_ep,
 963:rtos/uC-USB-Device/Source/usbd_ep.c ****                                            p_buf,
 964:rtos/uC-USB-Device/Source/usbd_ep.c ****                                            buf_len,
 965:rtos/uC-USB-Device/Source/usbd_ep.c ****                           (USBD_ASYNC_FNCT)0,
 966:rtos/uC-USB-Device/Source/usbd_ep.c ****                           (void          *)0,
 967:rtos/uC-USB-Device/Source/usbd_ep.c ****                                            timeout_ms,
 968:rtos/uC-USB-Device/Source/usbd_ep.c ****                                            p_err);
 969:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 970:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_OS_EP_LockRelease(p_drv->DevNbr,
 971:rtos/uC-USB-Device/Source/usbd_ep.c ****                            p_ep->Ix);
 972:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 973:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DBG_STATS_DEV_INC_IF_TRUE(dev_nbr, IntrRxSyncSuccessNbr, (*p_err == USBD_ERR_NONE));
 974:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 975:rtos/uC-USB-Device/Source/usbd_ep.c ****     return (xfer_len);
 976:rtos/uC-USB-Device/Source/usbd_ep.c **** }
 977:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 978:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 979:rtos/uC-USB-Device/Source/usbd_ep.c **** /*
 980:rtos/uC-USB-Device/Source/usbd_ep.c **** ***************************************************************************************************
 981:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                         USBD_IntrRxAsync()
 982:rtos/uC-USB-Device/Source/usbd_ep.c **** *
 983:rtos/uC-USB-Device/Source/usbd_ep.c **** * Description : Receive data on Interrupt OUT endpoint asynchronously.
 984:rtos/uC-USB-Device/Source/usbd_ep.c **** *
 985:rtos/uC-USB-Device/Source/usbd_ep.c **** * Argument(s) : dev_nbr         Device number.
 986:rtos/uC-USB-Device/Source/usbd_ep.c **** *
 987:rtos/uC-USB-Device/Source/usbd_ep.c **** *               ep_addr         Endpoint address.
 988:rtos/uC-USB-Device/Source/usbd_ep.c **** *
 989:rtos/uC-USB-Device/Source/usbd_ep.c **** *               p_buf           Pointer to destination buffer to receive data (see Note #1).
 990:rtos/uC-USB-Device/Source/usbd_ep.c **** *
 991:rtos/uC-USB-Device/Source/usbd_ep.c **** *               buf_len         Number of octets to receive.
 992:rtos/uC-USB-Device/Source/usbd_ep.c **** *
 993:rtos/uC-USB-Device/Source/usbd_ep.c **** *               async_fnct      Function that will be invoked upon completion of receive operation.
 994:rtos/uC-USB-Device/Source/usbd_ep.c **** *
 995:rtos/uC-USB-Device/Source/usbd_ep.c **** *               p_async_arg     Pointer to argument that will be passed as parameter of 'async_fnct
 996:rtos/uC-USB-Device/Source/usbd_ep.c **** *
 997:rtos/uC-USB-Device/Source/usbd_ep.c **** *               p_err           Pointer to variable that will receive return error code from this f
 998:rtos/uC-USB-Device/Source/usbd_ep.c **** *
 999:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                   USBD_ERR_NONE               Data successfully received.
ARM GAS  /tmp/ccuUvpuw.s 			page 19


1000:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                   USBD_ERR_NULL_PTR           Parameter 'async_fnct' is a null po
1001:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                   USBD_ERR_DEV_INVALID_NBR    Invalid device number.
1002:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                   USBD_ERR_DEV_INVALID_STATE  Transfer type only available if dev
1003:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                                               configured state.
1004:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                   USBD_ERR_EP_INVALID_ADDR    Invalid endpoint address.
1005:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                   USBD_ERR_EP_INVALID_STATE   Invalid endpoint state.
1006:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                   USBD_ERR_EP_INVALID_TYPE    Invalid endpoint type.
1007:rtos/uC-USB-Device/Source/usbd_ep.c **** *
1008:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                   - RETURNED BY USBD_OS_EP_LockAcquire() -
1009:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                   See USBD_OS_EP_LockAcquire() for additional return error codes.
1010:rtos/uC-USB-Device/Source/usbd_ep.c **** *
1011:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                   - RETURNED BY USBD_EP_Rx() -
1012:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                   See USBD_EP_Rx() for additional return error codes.
1013:rtos/uC-USB-Device/Source/usbd_ep.c **** *
1014:rtos/uC-USB-Device/Source/usbd_ep.c **** * Return(s)   : none.
1015:rtos/uC-USB-Device/Source/usbd_ep.c **** *
1016:rtos/uC-USB-Device/Source/usbd_ep.c **** * Note(s)     : (1) Receive buffer must be at least aligned on a word.
1017:rtos/uC-USB-Device/Source/usbd_ep.c **** ***************************************************************************************************
1018:rtos/uC-USB-Device/Source/usbd_ep.c **** */
1019:rtos/uC-USB-Device/Source/usbd_ep.c **** 
1020:rtos/uC-USB-Device/Source/usbd_ep.c **** void  USBD_IntrRxAsync (CPU_INT08U        dev_nbr,
1021:rtos/uC-USB-Device/Source/usbd_ep.c ****                         CPU_INT08U        ep_addr,
1022:rtos/uC-USB-Device/Source/usbd_ep.c ****                         void             *p_buf,
1023:rtos/uC-USB-Device/Source/usbd_ep.c ****                         CPU_INT32U        buf_len,
1024:rtos/uC-USB-Device/Source/usbd_ep.c ****                         USBD_ASYNC_FNCT   async_fnct,
1025:rtos/uC-USB-Device/Source/usbd_ep.c ****                         void             *p_async_arg,
1026:rtos/uC-USB-Device/Source/usbd_ep.c ****                         USBD_ERR         *p_err)
1027:rtos/uC-USB-Device/Source/usbd_ep.c **** {
1028:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_EP         *p_ep;
1029:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DRV        *p_drv;
1030:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_INT08U       ep_phy_nbr;
1031:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DEV_STATE   state;
1032:rtos/uC-USB-Device/Source/usbd_ep.c **** 
1033:rtos/uC-USB-Device/Source/usbd_ep.c **** 
1034:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DBG_STATS_DEV_INC(dev_nbr, IntrRxAsyncExecNbr);
1035:rtos/uC-USB-Device/Source/usbd_ep.c **** 
1036:rtos/uC-USB-Device/Source/usbd_ep.c **** #if (USBD_CFG_ERR_ARG_CHK_EXT_EN == DEF_ENABLED)                /* ---------------- VALIDATE ARGUME
1037:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_err == (USBD_ERR *)0) {                               /* Validate error ptr.             
1038:rtos/uC-USB-Device/Source/usbd_ep.c ****         CPU_SW_EXCEPTION(;);
1039:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
1040:rtos/uC-USB-Device/Source/usbd_ep.c **** 
1041:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (async_fnct == (USBD_ASYNC_FNCT)0) {
1042:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_NULL_PTR;
1043:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
1044:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
1045:rtos/uC-USB-Device/Source/usbd_ep.c **** #endif
1046:rtos/uC-USB-Device/Source/usbd_ep.c **** 
1047:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_drv = USBD_DrvRefGet(dev_nbr);                            /* Get dev struct.                 
1048:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_drv == (USBD_DRV *)0) {
1049:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_DEV_INVALID_NBR;
1050:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
1051:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
1052:rtos/uC-USB-Device/Source/usbd_ep.c **** 
1053:rtos/uC-USB-Device/Source/usbd_ep.c ****     state = USBD_DevStateGet(dev_nbr, p_err);
1054:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (state != USBD_DEV_STATE_CONFIGURED) {                   /* EP transfers are ONLY allowed in
1055:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_DEV_INVALID_STATE;
1056:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
ARM GAS  /tmp/ccuUvpuw.s 			page 20


1057:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
1058:rtos/uC-USB-Device/Source/usbd_ep.c **** 
1059:rtos/uC-USB-Device/Source/usbd_ep.c ****     ep_phy_nbr = USBD_EP_ADDR_TO_PHY(ep_addr);
1060:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_ep       = USBD_EP_TblPtrs[dev_nbr][ep_phy_nbr];
1061:rtos/uC-USB-Device/Source/usbd_ep.c **** 
1062:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_ep == (USBD_EP *)0) {
1063:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_EP_INVALID_ADDR;
1064:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
1065:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
1066:rtos/uC-USB-Device/Source/usbd_ep.c **** 
1067:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_OS_EP_LockAcquire(p_drv->DevNbr,
1068:rtos/uC-USB-Device/Source/usbd_ep.c ****                            p_ep->Ix,
1069:rtos/uC-USB-Device/Source/usbd_ep.c ****                            0u,
1070:rtos/uC-USB-Device/Source/usbd_ep.c ****                            p_err);
1071:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (*p_err != USBD_ERR_NONE) {
1072:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
1073:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
1074:rtos/uC-USB-Device/Source/usbd_ep.c **** 
1075:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_ep->State != USBD_EP_STATE_OPEN) {
1076:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_OS_EP_LockRelease(p_drv->DevNbr,
1077:rtos/uC-USB-Device/Source/usbd_ep.c ****                                p_ep->Ix);
1078:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_EP_INVALID_STATE;
1079:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
1080:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
1081:rtos/uC-USB-Device/Source/usbd_ep.c ****                                                                 /* Chk EP attrib.                  
1082:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (((p_ep->Attrib & USBD_EP_TYPE_MASK) != USBD_EP_TYPE_INTR) ||
1083:rtos/uC-USB-Device/Source/usbd_ep.c ****         ((ep_addr      & USBD_EP_DIR_MASK)  != USBD_EP_DIR_OUT)) {
1084:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_OS_EP_LockRelease(p_drv->DevNbr,
1085:rtos/uC-USB-Device/Source/usbd_ep.c ****                                p_ep->Ix);
1086:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_EP_INVALID_TYPE;
1087:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
1088:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
1089:rtos/uC-USB-Device/Source/usbd_ep.c **** 
1090:rtos/uC-USB-Device/Source/usbd_ep.c ****     (void)USBD_EP_Rx(p_drv,                                     /* Call generic EP rx fnct.        
1091:rtos/uC-USB-Device/Source/usbd_ep.c ****                      p_ep,
1092:rtos/uC-USB-Device/Source/usbd_ep.c ****                      p_buf,
1093:rtos/uC-USB-Device/Source/usbd_ep.c ****                      buf_len,
1094:rtos/uC-USB-Device/Source/usbd_ep.c ****                      async_fnct,
1095:rtos/uC-USB-Device/Source/usbd_ep.c ****                      p_async_arg,
1096:rtos/uC-USB-Device/Source/usbd_ep.c ****                      0u,
1097:rtos/uC-USB-Device/Source/usbd_ep.c ****                      p_err);
1098:rtos/uC-USB-Device/Source/usbd_ep.c **** 
1099:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_OS_EP_LockRelease(p_drv->DevNbr,
1100:rtos/uC-USB-Device/Source/usbd_ep.c ****                            p_ep->Ix);
1101:rtos/uC-USB-Device/Source/usbd_ep.c **** 
1102:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DBG_STATS_DEV_INC_IF_TRUE(dev_nbr, IntrRxAsyncSuccessNbr, (*p_err == USBD_ERR_NONE));
1103:rtos/uC-USB-Device/Source/usbd_ep.c **** }
1104:rtos/uC-USB-Device/Source/usbd_ep.c **** 
1105:rtos/uC-USB-Device/Source/usbd_ep.c **** 
1106:rtos/uC-USB-Device/Source/usbd_ep.c **** /*
1107:rtos/uC-USB-Device/Source/usbd_ep.c **** ***************************************************************************************************
1108:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                          USBD_EP_IntrTx()
1109:rtos/uC-USB-Device/Source/usbd_ep.c **** *
1110:rtos/uC-USB-Device/Source/usbd_ep.c **** * Description : Send data on Interrupt IN endpoint.
1111:rtos/uC-USB-Device/Source/usbd_ep.c **** *
1112:rtos/uC-USB-Device/Source/usbd_ep.c **** * Argument(s) : dev_nbr     Device number.
1113:rtos/uC-USB-Device/Source/usbd_ep.c **** *
ARM GAS  /tmp/ccuUvpuw.s 			page 21


1114:rtos/uC-USB-Device/Source/usbd_ep.c **** *               ep_addr     Endpoint address.
1115:rtos/uC-USB-Device/Source/usbd_ep.c **** *
1116:rtos/uC-USB-Device/Source/usbd_ep.c **** *               p_buf       Pointer to buffer of data that will be transmitted (see Note #2).
1117:rtos/uC-USB-Device/Source/usbd_ep.c **** *
1118:rtos/uC-USB-Device/Source/usbd_ep.c **** *               buf_len     Number of octets to transmit.
1119:rtos/uC-USB-Device/Source/usbd_ep.c **** *
1120:rtos/uC-USB-Device/Source/usbd_ep.c **** *               timeout_ms  Timeout in milliseconds.
1121:rtos/uC-USB-Device/Source/usbd_ep.c **** *
1122:rtos/uC-USB-Device/Source/usbd_ep.c **** *               end         End-of-transfer flag (see Note #3).
1123:rtos/uC-USB-Device/Source/usbd_ep.c **** *
1124:rtos/uC-USB-Device/Source/usbd_ep.c **** *               p_err       Pointer to variable that will receive return error code from this funct
1125:rtos/uC-USB-Device/Source/usbd_ep.c **** *
1126:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               USBD_ERR_NONE               Data successfully transmitted.
1127:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               USBD_ERR_DEV_INVALID_NBR    Invalid device number.
1128:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               USBD_ERR_DEV_INVALID_STATE  Transfer type only available if device 
1129:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                                           configured state.
1130:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               USBD_ERR_EP_INVALID_ADDR    Invalid endpoint address.
1131:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               USBD_ERR_EP_INVALID_STATE   Invalid endpoint state.
1132:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               USBD_ERR_EP_INVALID_TYPE    Invalid endpoint type.
1133:rtos/uC-USB-Device/Source/usbd_ep.c **** *
1134:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               - RETURNED BY USBD_OS_EP_LockAcquire() -
1135:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               See USBD_OS_EP_LockAcquire() for additional return error codes.
1136:rtos/uC-USB-Device/Source/usbd_ep.c **** *
1137:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               - RETURNED BY USBD_EP_Tx() -
1138:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               See USBD_EP_Tx() for additional return error codes.
1139:rtos/uC-USB-Device/Source/usbd_ep.c **** *
1140:rtos/uC-USB-Device/Source/usbd_ep.c **** * Return(s)   : Number of octets transmitted, if NO error(s).
1141:rtos/uC-USB-Device/Source/usbd_ep.c **** *
1142:rtos/uC-USB-Device/Source/usbd_ep.c **** *               0,                            otherwise.
1143:rtos/uC-USB-Device/Source/usbd_ep.c **** *
1144:rtos/uC-USB-Device/Source/usbd_ep.c **** * Note(s)     : (1) This function SHOULD NOT be called from interrupt service routine (ISR).
1145:rtos/uC-USB-Device/Source/usbd_ep.c **** *
1146:rtos/uC-USB-Device/Source/usbd_ep.c **** *               (2) Transmit buffer must be at least aligned on a word.
1147:rtos/uC-USB-Device/Source/usbd_ep.c **** *
1148:rtos/uC-USB-Device/Source/usbd_ep.c **** *               (3) If end-of-transfer is set and transfer length is multiple of maximum packet siz
1149:rtos/uC-USB-Device/Source/usbd_ep.c **** *                   a zero-length packet is transferred to indicate a short transfer to the host.
1150:rtos/uC-USB-Device/Source/usbd_ep.c **** ***************************************************************************************************
1151:rtos/uC-USB-Device/Source/usbd_ep.c **** */
1152:rtos/uC-USB-Device/Source/usbd_ep.c **** 
1153:rtos/uC-USB-Device/Source/usbd_ep.c **** CPU_INT32U  USBD_IntrTx (CPU_INT08U    dev_nbr,
1154:rtos/uC-USB-Device/Source/usbd_ep.c ****                          CPU_INT08U    ep_addr,
1155:rtos/uC-USB-Device/Source/usbd_ep.c ****                          void         *p_buf,
1156:rtos/uC-USB-Device/Source/usbd_ep.c ****                          CPU_INT32U    buf_len,
1157:rtos/uC-USB-Device/Source/usbd_ep.c ****                          CPU_INT16U    timeout_ms,
1158:rtos/uC-USB-Device/Source/usbd_ep.c ****                          CPU_BOOLEAN   end,
1159:rtos/uC-USB-Device/Source/usbd_ep.c ****                          USBD_ERR     *p_err)
1160:rtos/uC-USB-Device/Source/usbd_ep.c **** {
1161:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_EP         *p_ep;
1162:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DRV        *p_drv;
1163:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_INT08U       ep_phy_nbr;
1164:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_INT32U       xfer_len;
1165:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DEV_STATE   state;
1166:rtos/uC-USB-Device/Source/usbd_ep.c **** 
1167:rtos/uC-USB-Device/Source/usbd_ep.c **** 
1168:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DBG_STATS_DEV_INC(dev_nbr, IntrTxSyncExecNbr);
1169:rtos/uC-USB-Device/Source/usbd_ep.c **** 
1170:rtos/uC-USB-Device/Source/usbd_ep.c **** #if (USBD_CFG_ERR_ARG_CHK_EXT_EN == DEF_ENABLED)                /* ---------------- VALIDATE ARGUME
ARM GAS  /tmp/ccuUvpuw.s 			page 22


1171:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_err == (USBD_ERR *)0) {                               /* Validate error ptr.             
1172:rtos/uC-USB-Device/Source/usbd_ep.c ****         CPU_SW_EXCEPTION(0);
1173:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
1174:rtos/uC-USB-Device/Source/usbd_ep.c **** #endif
1175:rtos/uC-USB-Device/Source/usbd_ep.c **** 
1176:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_drv = USBD_DrvRefGet(dev_nbr);                            /* Get dev struct.                 
1177:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_drv == (USBD_DRV *)0) {
1178:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_DEV_INVALID_NBR;
1179:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (0u);
1180:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
1181:rtos/uC-USB-Device/Source/usbd_ep.c **** 
1182:rtos/uC-USB-Device/Source/usbd_ep.c ****     state = USBD_DevStateGet(dev_nbr, p_err);
1183:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (state != USBD_DEV_STATE_CONFIGURED) {                   /* EP transfers are ONLY allowed in
1184:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_DEV_INVALID_STATE;
1185:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (0u);
1186:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
1187:rtos/uC-USB-Device/Source/usbd_ep.c **** 
1188:rtos/uC-USB-Device/Source/usbd_ep.c ****     ep_phy_nbr = USBD_EP_ADDR_TO_PHY(ep_addr);
1189:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_ep       = USBD_EP_TblPtrs[dev_nbr][ep_phy_nbr];
1190:rtos/uC-USB-Device/Source/usbd_ep.c **** 
1191:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_ep == (USBD_EP *)0) {
1192:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_EP_INVALID_ADDR;
1193:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (0u);
1194:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
1195:rtos/uC-USB-Device/Source/usbd_ep.c **** 
1196:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_OS_EP_LockAcquire(p_drv->DevNbr,
1197:rtos/uC-USB-Device/Source/usbd_ep.c ****                            p_ep->Ix,
1198:rtos/uC-USB-Device/Source/usbd_ep.c ****                            0u,
1199:rtos/uC-USB-Device/Source/usbd_ep.c ****                            p_err);
1200:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (*p_err != USBD_ERR_NONE) {
1201:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (0u);
1202:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
1203:rtos/uC-USB-Device/Source/usbd_ep.c **** 
1204:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_ep->State != USBD_EP_STATE_OPEN) {
1205:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_OS_EP_LockRelease(p_drv->DevNbr,
1206:rtos/uC-USB-Device/Source/usbd_ep.c ****                                p_ep->Ix);
1207:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_EP_INVALID_STATE;
1208:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (0u);
1209:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
1210:rtos/uC-USB-Device/Source/usbd_ep.c ****                                                                 /* Chk EP attrib.                  
1211:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (((p_ep->Attrib & USBD_EP_TYPE_MASK) != USBD_EP_TYPE_INTR) ||
1212:rtos/uC-USB-Device/Source/usbd_ep.c ****         ((ep_addr      & USBD_EP_DIR_MASK)  != USBD_EP_DIR_IN)) {
1213:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_OS_EP_LockRelease(p_drv->DevNbr,
1214:rtos/uC-USB-Device/Source/usbd_ep.c ****                                p_ep->Ix);
1215:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_EP_INVALID_TYPE;
1216:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (0u);
1217:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
1218:rtos/uC-USB-Device/Source/usbd_ep.c **** 
1219:rtos/uC-USB-Device/Source/usbd_ep.c ****     xfer_len = USBD_EP_Tx(                 p_drv,
1220:rtos/uC-USB-Device/Source/usbd_ep.c ****                                            p_ep,
1221:rtos/uC-USB-Device/Source/usbd_ep.c ****                                            p_buf,
1222:rtos/uC-USB-Device/Source/usbd_ep.c ****                                            buf_len,
1223:rtos/uC-USB-Device/Source/usbd_ep.c ****                           (USBD_ASYNC_FNCT)0,
1224:rtos/uC-USB-Device/Source/usbd_ep.c ****                           (void          *)0,
1225:rtos/uC-USB-Device/Source/usbd_ep.c ****                                            timeout_ms,
1226:rtos/uC-USB-Device/Source/usbd_ep.c ****                                            end,
1227:rtos/uC-USB-Device/Source/usbd_ep.c ****                                            p_err);
ARM GAS  /tmp/ccuUvpuw.s 			page 23


1228:rtos/uC-USB-Device/Source/usbd_ep.c **** 
1229:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_OS_EP_LockRelease(p_drv->DevNbr,
1230:rtos/uC-USB-Device/Source/usbd_ep.c ****                            p_ep->Ix);
1231:rtos/uC-USB-Device/Source/usbd_ep.c **** 
1232:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DBG_STATS_DEV_INC_IF_TRUE(dev_nbr, IntrTxSyncSuccessNbr, (*p_err == USBD_ERR_NONE));
1233:rtos/uC-USB-Device/Source/usbd_ep.c **** 
1234:rtos/uC-USB-Device/Source/usbd_ep.c ****     return (xfer_len);
1235:rtos/uC-USB-Device/Source/usbd_ep.c **** }
1236:rtos/uC-USB-Device/Source/usbd_ep.c **** 
1237:rtos/uC-USB-Device/Source/usbd_ep.c **** 
1238:rtos/uC-USB-Device/Source/usbd_ep.c **** /*
1239:rtos/uC-USB-Device/Source/usbd_ep.c **** ***************************************************************************************************
1240:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                         USBD_IntrTxAsync()
1241:rtos/uC-USB-Device/Source/usbd_ep.c **** *
1242:rtos/uC-USB-Device/Source/usbd_ep.c **** * Description : Send data on Interrupt IN endpoint asynchronously.
1243:rtos/uC-USB-Device/Source/usbd_ep.c **** *
1244:rtos/uC-USB-Device/Source/usbd_ep.c **** * Argument(s) : dev_nbr         Device number.
1245:rtos/uC-USB-Device/Source/usbd_ep.c **** *
1246:rtos/uC-USB-Device/Source/usbd_ep.c **** *               ep_addr         Endpoint address.
1247:rtos/uC-USB-Device/Source/usbd_ep.c **** *
1248:rtos/uC-USB-Device/Source/usbd_ep.c **** *               p_buf           Pointer to buffer of data that will be transmitted (see Note #1).
1249:rtos/uC-USB-Device/Source/usbd_ep.c **** *
1250:rtos/uC-USB-Device/Source/usbd_ep.c **** *               buf_len         Number of octets to transmit.
1251:rtos/uC-USB-Device/Source/usbd_ep.c **** *
1252:rtos/uC-USB-Device/Source/usbd_ep.c **** *               async_fnct      Function that will be invoked upon completion of transmit operation
1253:rtos/uC-USB-Device/Source/usbd_ep.c **** *
1254:rtos/uC-USB-Device/Source/usbd_ep.c **** *               p_async_arg     Pointer to argument that will be passed as parameter of 'async_fnct
1255:rtos/uC-USB-Device/Source/usbd_ep.c **** *
1256:rtos/uC-USB-Device/Source/usbd_ep.c **** *               end             End-of-transfer flag (see Note #2).
1257:rtos/uC-USB-Device/Source/usbd_ep.c **** *
1258:rtos/uC-USB-Device/Source/usbd_ep.c **** *               p_err           Pointer to variable that will receive return error code from this f
1259:rtos/uC-USB-Device/Source/usbd_ep.c **** *
1260:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                   USBD_ERR_NONE               Data successfully transmitted.
1261:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                   USBD_ERR_NULL_PTR           Parameter 'async_fnct' is a null po
1262:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                   USBD_ERR_DEV_INVALID_NBR    Invalid device number.
1263:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                   USBD_ERR_DEV_INVALID_STATE  Transfer type only available if dev
1264:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                                               configured state.
1265:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                   USBD_ERR_EP_INVALID_ADDR    Invalid endpoint address.
1266:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                   USBD_ERR_EP_INVALID_STATE   Invalid endpoint state.
1267:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                   USBD_ERR_EP_INVALID_TYPE    Invalid endpoint type.
1268:rtos/uC-USB-Device/Source/usbd_ep.c **** *
1269:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                   - RETURNED BY USBD_OS_EP_LockAcquire() -
1270:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                   See USBD_OS_EP_LockAcquire() for additional return error codes.
1271:rtos/uC-USB-Device/Source/usbd_ep.c **** *
1272:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                   - RETURNED BY USBD_EP_Tx() -
1273:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                   See USBD_EP_Tx() for additional return error codes.
1274:rtos/uC-USB-Device/Source/usbd_ep.c **** *
1275:rtos/uC-USB-Device/Source/usbd_ep.c **** * Return(s)   : none.
1276:rtos/uC-USB-Device/Source/usbd_ep.c **** *
1277:rtos/uC-USB-Device/Source/usbd_ep.c **** * Note(s)     : (1) Transmit buffer must be at least aligned on a word.
1278:rtos/uC-USB-Device/Source/usbd_ep.c **** *
1279:rtos/uC-USB-Device/Source/usbd_ep.c **** *               (2) If end-of-transfer is set and transfer length is multiple of maximum packet siz
1280:rtos/uC-USB-Device/Source/usbd_ep.c **** *                   a zero-length packet is transferred to indicate a short transfer to the host.
1281:rtos/uC-USB-Device/Source/usbd_ep.c **** ***************************************************************************************************
1282:rtos/uC-USB-Device/Source/usbd_ep.c **** */
1283:rtos/uC-USB-Device/Source/usbd_ep.c **** 
1284:rtos/uC-USB-Device/Source/usbd_ep.c **** void  USBD_IntrTxAsync (CPU_INT08U        dev_nbr,
ARM GAS  /tmp/ccuUvpuw.s 			page 24


1285:rtos/uC-USB-Device/Source/usbd_ep.c ****                         CPU_INT08U        ep_addr,
1286:rtos/uC-USB-Device/Source/usbd_ep.c ****                         void             *p_buf,
1287:rtos/uC-USB-Device/Source/usbd_ep.c ****                         CPU_INT32U        buf_len,
1288:rtos/uC-USB-Device/Source/usbd_ep.c ****                         USBD_ASYNC_FNCT   async_fnct,
1289:rtos/uC-USB-Device/Source/usbd_ep.c ****                         void             *p_async_arg,
1290:rtos/uC-USB-Device/Source/usbd_ep.c ****                         CPU_BOOLEAN       end,
1291:rtos/uC-USB-Device/Source/usbd_ep.c ****                         USBD_ERR         *p_err)
1292:rtos/uC-USB-Device/Source/usbd_ep.c **** {
1293:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_EP         *p_ep;
1294:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DRV        *p_drv;
1295:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_INT08U       ep_phy_nbr;
1296:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DEV_STATE   state;
1297:rtos/uC-USB-Device/Source/usbd_ep.c **** 
1298:rtos/uC-USB-Device/Source/usbd_ep.c **** 
1299:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DBG_STATS_DEV_INC(dev_nbr, IntrTxAsyncExecNbr);
1300:rtos/uC-USB-Device/Source/usbd_ep.c **** 
1301:rtos/uC-USB-Device/Source/usbd_ep.c **** #if (USBD_CFG_ERR_ARG_CHK_EXT_EN == DEF_ENABLED)                /* ---------------- VALIDATE ARGUME
1302:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_err == (USBD_ERR *)0) {                               /* Validate error ptr.             
1303:rtos/uC-USB-Device/Source/usbd_ep.c ****         CPU_SW_EXCEPTION(;);
1304:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
1305:rtos/uC-USB-Device/Source/usbd_ep.c **** 
1306:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (async_fnct == (USBD_ASYNC_FNCT)0) {
1307:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_NULL_PTR;
1308:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
1309:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
1310:rtos/uC-USB-Device/Source/usbd_ep.c **** #endif
1311:rtos/uC-USB-Device/Source/usbd_ep.c **** 
1312:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_drv = USBD_DrvRefGet(dev_nbr);                            /* Get dev struct.                 
1313:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_drv == (USBD_DRV *)0) {
1314:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_DEV_INVALID_NBR;
1315:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
1316:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
1317:rtos/uC-USB-Device/Source/usbd_ep.c **** 
1318:rtos/uC-USB-Device/Source/usbd_ep.c ****     state = USBD_DevStateGet(dev_nbr, p_err);
1319:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (state != USBD_DEV_STATE_CONFIGURED) {                   /* EP transfers are ONLY allowed in
1320:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_DEV_INVALID_STATE;
1321:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
1322:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
1323:rtos/uC-USB-Device/Source/usbd_ep.c **** 
1324:rtos/uC-USB-Device/Source/usbd_ep.c ****     ep_phy_nbr = USBD_EP_ADDR_TO_PHY(ep_addr);
1325:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_ep       = USBD_EP_TblPtrs[dev_nbr][ep_phy_nbr];
1326:rtos/uC-USB-Device/Source/usbd_ep.c **** 
1327:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_ep == (USBD_EP *)0) {
1328:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_EP_INVALID_ADDR;
1329:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
1330:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
1331:rtos/uC-USB-Device/Source/usbd_ep.c **** 
1332:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_OS_EP_LockAcquire(p_drv->DevNbr,
1333:rtos/uC-USB-Device/Source/usbd_ep.c ****                            p_ep->Ix,
1334:rtos/uC-USB-Device/Source/usbd_ep.c ****                            0u,
1335:rtos/uC-USB-Device/Source/usbd_ep.c ****                            p_err);
1336:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (*p_err != USBD_ERR_NONE) {
1337:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
1338:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
1339:rtos/uC-USB-Device/Source/usbd_ep.c **** 
1340:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_ep->State != USBD_EP_STATE_OPEN) {
1341:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_OS_EP_LockRelease(p_drv->DevNbr,
ARM GAS  /tmp/ccuUvpuw.s 			page 25


1342:rtos/uC-USB-Device/Source/usbd_ep.c ****                                p_ep->Ix);
1343:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_EP_INVALID_STATE;
1344:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
1345:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
1346:rtos/uC-USB-Device/Source/usbd_ep.c ****                                                                 /* Chk EP attrib.                  
1347:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (((p_ep->Attrib & USBD_EP_TYPE_MASK) != USBD_EP_TYPE_INTR) ||
1348:rtos/uC-USB-Device/Source/usbd_ep.c ****         ((ep_addr      & USBD_EP_DIR_MASK)  != USBD_EP_DIR_IN)) {
1349:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_OS_EP_LockRelease(p_drv->DevNbr,
1350:rtos/uC-USB-Device/Source/usbd_ep.c ****                                p_ep->Ix);
1351:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_EP_INVALID_TYPE;
1352:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
1353:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
1354:rtos/uC-USB-Device/Source/usbd_ep.c **** 
1355:rtos/uC-USB-Device/Source/usbd_ep.c ****     (void)USBD_EP_Tx(p_drv,
1356:rtos/uC-USB-Device/Source/usbd_ep.c ****                      p_ep,
1357:rtos/uC-USB-Device/Source/usbd_ep.c ****                      p_buf,
1358:rtos/uC-USB-Device/Source/usbd_ep.c ****                      buf_len,
1359:rtos/uC-USB-Device/Source/usbd_ep.c ****                      async_fnct,
1360:rtos/uC-USB-Device/Source/usbd_ep.c ****                      p_async_arg,
1361:rtos/uC-USB-Device/Source/usbd_ep.c ****                      0u,
1362:rtos/uC-USB-Device/Source/usbd_ep.c ****                      end,
1363:rtos/uC-USB-Device/Source/usbd_ep.c ****                      p_err);
1364:rtos/uC-USB-Device/Source/usbd_ep.c **** 
1365:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_OS_EP_LockRelease(p_drv->DevNbr,
1366:rtos/uC-USB-Device/Source/usbd_ep.c ****                            p_ep->Ix);
1367:rtos/uC-USB-Device/Source/usbd_ep.c **** 
1368:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DBG_STATS_DEV_INC_IF_TRUE(dev_nbr, IntrTxAsyncSuccessNbr, (*p_err == USBD_ERR_NONE));
1369:rtos/uC-USB-Device/Source/usbd_ep.c **** }
1370:rtos/uC-USB-Device/Source/usbd_ep.c **** 
1371:rtos/uC-USB-Device/Source/usbd_ep.c **** 
1372:rtos/uC-USB-Device/Source/usbd_ep.c **** /*
1373:rtos/uC-USB-Device/Source/usbd_ep.c **** ***************************************************************************************************
1374:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                         USBD_IsocRxAsync()
1375:rtos/uC-USB-Device/Source/usbd_ep.c **** *
1376:rtos/uC-USB-Device/Source/usbd_ep.c **** * Description : Receive data on isochronous OUT endpoint asynchronously.
1377:rtos/uC-USB-Device/Source/usbd_ep.c **** *
1378:rtos/uC-USB-Device/Source/usbd_ep.c **** * Argument(s) : dev_nbr         Device number.
1379:rtos/uC-USB-Device/Source/usbd_ep.c **** *
1380:rtos/uC-USB-Device/Source/usbd_ep.c **** *               ep_addr         Endpoint address.
1381:rtos/uC-USB-Device/Source/usbd_ep.c **** *
1382:rtos/uC-USB-Device/Source/usbd_ep.c **** *               p_buf           Pointer to destination buffer to receive data (see Note #1).
1383:rtos/uC-USB-Device/Source/usbd_ep.c **** *
1384:rtos/uC-USB-Device/Source/usbd_ep.c **** *               buf_len         Number of octets to receive.
1385:rtos/uC-USB-Device/Source/usbd_ep.c **** *
1386:rtos/uC-USB-Device/Source/usbd_ep.c **** *               async_fnct      Function that will be invoked upon completion of receive operation.
1387:rtos/uC-USB-Device/Source/usbd_ep.c **** *
1388:rtos/uC-USB-Device/Source/usbd_ep.c **** *               p_async_arg     Pointer to argument that will be passed as parameter of 'async_fnct
1389:rtos/uC-USB-Device/Source/usbd_ep.c **** *
1390:rtos/uC-USB-Device/Source/usbd_ep.c **** *               p_err           Pointer to variable that will receive return error code from this f
1391:rtos/uC-USB-Device/Source/usbd_ep.c **** *
1392:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                   USBD_ERR_NONE               Data successfully received.
1393:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                   USBD_ERR_NULL_PTR           Parameter 'async_fnct' is a null po
1394:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                   USBD_ERR_DEV_INVALID_NBR    Invalid device number.
1395:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                   USBD_ERR_DEV_INVALID_STATE  Transfer type only available if dev
1396:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                                               configured state.
1397:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                   USBD_ERR_EP_INVALID_ADDR    Invalid endpoint address.
1398:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                   USBD_ERR_EP_INVALID_STATE   Invalid endpoint state.
ARM GAS  /tmp/ccuUvpuw.s 			page 26


1399:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                   USBD_ERR_EP_INVALID_TYPE    Invalid endpoint type.
1400:rtos/uC-USB-Device/Source/usbd_ep.c **** *
1401:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                   - RETURNED BY USBD_OS_EP_LockAcquire() -
1402:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                   See USBD_OS_EP_LockAcquire() for additional return error codes.
1403:rtos/uC-USB-Device/Source/usbd_ep.c **** *
1404:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                   - RETURNED BY USBD_EP_Rx() -
1405:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                   See USBD_EP_Rx() for additional return error codes.
1406:rtos/uC-USB-Device/Source/usbd_ep.c **** *
1407:rtos/uC-USB-Device/Source/usbd_ep.c **** * Return(s)   : none.
1408:rtos/uC-USB-Device/Source/usbd_ep.c **** *
1409:rtos/uC-USB-Device/Source/usbd_ep.c **** * Note(s)     : (1) Receive buffer must be at least aligned on a word.
1410:rtos/uC-USB-Device/Source/usbd_ep.c **** ***************************************************************************************************
1411:rtos/uC-USB-Device/Source/usbd_ep.c **** */
1412:rtos/uC-USB-Device/Source/usbd_ep.c **** 
1413:rtos/uC-USB-Device/Source/usbd_ep.c **** #if (USBD_CFG_EP_ISOC_EN == DEF_ENABLED)
1414:rtos/uC-USB-Device/Source/usbd_ep.c **** void  USBD_IsocRxAsync (CPU_INT08U        dev_nbr,
1415:rtos/uC-USB-Device/Source/usbd_ep.c ****                         CPU_INT08U        ep_addr,
1416:rtos/uC-USB-Device/Source/usbd_ep.c ****                         void             *p_buf,
1417:rtos/uC-USB-Device/Source/usbd_ep.c ****                         CPU_INT32U        buf_len,
1418:rtos/uC-USB-Device/Source/usbd_ep.c ****                         USBD_ASYNC_FNCT   async_fnct,
1419:rtos/uC-USB-Device/Source/usbd_ep.c ****                         void             *p_async_arg,
1420:rtos/uC-USB-Device/Source/usbd_ep.c ****                         USBD_ERR         *p_err)
1421:rtos/uC-USB-Device/Source/usbd_ep.c **** {
1422:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_EP         *p_ep;
1423:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DRV        *p_drv;
1424:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DEV_STATE   state;
1425:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_INT08U       ep_phy_nbr;
1426:rtos/uC-USB-Device/Source/usbd_ep.c **** 
1427:rtos/uC-USB-Device/Source/usbd_ep.c **** 
1428:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DBG_STATS_DEV_INC(dev_nbr, IsocRxAsyncExecNbr);
1429:rtos/uC-USB-Device/Source/usbd_ep.c **** 
1430:rtos/uC-USB-Device/Source/usbd_ep.c **** #if (USBD_CFG_ERR_ARG_CHK_EXT_EN == DEF_ENABLED)                /* ---------------- VALIDATE ARGUME
1431:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_err == (USBD_ERR *)0) {                               /* Validate error ptr.             
1432:rtos/uC-USB-Device/Source/usbd_ep.c ****         CPU_SW_EXCEPTION(;);
1433:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
1434:rtos/uC-USB-Device/Source/usbd_ep.c **** 
1435:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (async_fnct == (USBD_ASYNC_FNCT)0) {
1436:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_NULL_PTR;
1437:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
1438:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
1439:rtos/uC-USB-Device/Source/usbd_ep.c **** #endif
1440:rtos/uC-USB-Device/Source/usbd_ep.c **** 
1441:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_drv = USBD_DrvRefGet(dev_nbr);                            /* Get dev struct.                 
1442:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_drv == (USBD_DRV *)0) {
1443:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_DEV_INVALID_NBR;
1444:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
1445:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
1446:rtos/uC-USB-Device/Source/usbd_ep.c **** 
1447:rtos/uC-USB-Device/Source/usbd_ep.c ****     state = USBD_DevStateGet(dev_nbr, p_err);
1448:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (state != USBD_DEV_STATE_CONFIGURED) {                   /* EP transfers are ONLY allowed in
1449:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_DEV_INVALID_STATE;
1450:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
1451:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
1452:rtos/uC-USB-Device/Source/usbd_ep.c **** 
1453:rtos/uC-USB-Device/Source/usbd_ep.c ****     ep_phy_nbr = USBD_EP_ADDR_TO_PHY(ep_addr);
1454:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_ep       = USBD_EP_TblPtrs[dev_nbr][ep_phy_nbr];
1455:rtos/uC-USB-Device/Source/usbd_ep.c **** 
ARM GAS  /tmp/ccuUvpuw.s 			page 27


1456:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_ep == (USBD_EP *)0) {
1457:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_EP_INVALID_ADDR;
1458:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
1459:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
1460:rtos/uC-USB-Device/Source/usbd_ep.c **** 
1461:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_OS_EP_LockAcquire(p_drv->DevNbr,
1462:rtos/uC-USB-Device/Source/usbd_ep.c ****                            p_ep->Ix,
1463:rtos/uC-USB-Device/Source/usbd_ep.c ****                            0u,
1464:rtos/uC-USB-Device/Source/usbd_ep.c ****                            p_err);
1465:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (*p_err != USBD_ERR_NONE) {
1466:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
1467:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
1468:rtos/uC-USB-Device/Source/usbd_ep.c **** 
1469:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_ep->State != USBD_EP_STATE_OPEN) {
1470:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_OS_EP_LockRelease(p_drv->DevNbr,
1471:rtos/uC-USB-Device/Source/usbd_ep.c ****                                p_ep->Ix);
1472:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_EP_INVALID_STATE;
1473:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
1474:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
1475:rtos/uC-USB-Device/Source/usbd_ep.c ****                                                                 /* Chk EP attrib.                  
1476:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (((p_ep->Attrib & USBD_EP_TYPE_MASK) != USBD_EP_TYPE_ISOC) ||
1477:rtos/uC-USB-Device/Source/usbd_ep.c ****         ((ep_addr      & USBD_EP_DIR_MASK)  != USBD_EP_DIR_OUT)) {
1478:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_OS_EP_LockRelease(p_drv->DevNbr,
1479:rtos/uC-USB-Device/Source/usbd_ep.c ****                                p_ep->Ix);
1480:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_EP_INVALID_TYPE;
1481:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
1482:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
1483:rtos/uC-USB-Device/Source/usbd_ep.c **** 
1484:rtos/uC-USB-Device/Source/usbd_ep.c ****     (void)USBD_EP_Rx(p_drv,                                     /* Call generic EP rx fnct.        
1485:rtos/uC-USB-Device/Source/usbd_ep.c ****                      p_ep,
1486:rtos/uC-USB-Device/Source/usbd_ep.c ****                      p_buf,
1487:rtos/uC-USB-Device/Source/usbd_ep.c ****                      buf_len,
1488:rtos/uC-USB-Device/Source/usbd_ep.c ****                      async_fnct,
1489:rtos/uC-USB-Device/Source/usbd_ep.c ****                      p_async_arg,
1490:rtos/uC-USB-Device/Source/usbd_ep.c ****                      0u,
1491:rtos/uC-USB-Device/Source/usbd_ep.c ****                      p_err);
1492:rtos/uC-USB-Device/Source/usbd_ep.c **** 
1493:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_OS_EP_LockRelease(p_drv->DevNbr,
1494:rtos/uC-USB-Device/Source/usbd_ep.c ****                            p_ep->Ix);
1495:rtos/uC-USB-Device/Source/usbd_ep.c **** 
1496:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DBG_STATS_DEV_INC_IF_TRUE(dev_nbr, IsocRxAsyncSuccessNbr, (*p_err == USBD_ERR_NONE));
1497:rtos/uC-USB-Device/Source/usbd_ep.c **** }
1498:rtos/uC-USB-Device/Source/usbd_ep.c **** #endif
1499:rtos/uC-USB-Device/Source/usbd_ep.c **** 
1500:rtos/uC-USB-Device/Source/usbd_ep.c **** 
1501:rtos/uC-USB-Device/Source/usbd_ep.c **** /*
1502:rtos/uC-USB-Device/Source/usbd_ep.c **** ***************************************************************************************************
1503:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                         USBD_IsocTxAsync()
1504:rtos/uC-USB-Device/Source/usbd_ep.c **** *
1505:rtos/uC-USB-Device/Source/usbd_ep.c **** * Description : Send data on isochronous IN endpoint asynchronously.
1506:rtos/uC-USB-Device/Source/usbd_ep.c **** *
1507:rtos/uC-USB-Device/Source/usbd_ep.c **** * Argument(s) : dev_nbr         Device number.
1508:rtos/uC-USB-Device/Source/usbd_ep.c **** *
1509:rtos/uC-USB-Device/Source/usbd_ep.c **** *               ep_addr         Endpoint address.
1510:rtos/uC-USB-Device/Source/usbd_ep.c **** *
1511:rtos/uC-USB-Device/Source/usbd_ep.c **** *               p_buf           Pointer to buffer of data that will be transmitted (see Note #1).
1512:rtos/uC-USB-Device/Source/usbd_ep.c **** *
ARM GAS  /tmp/ccuUvpuw.s 			page 28


1513:rtos/uC-USB-Device/Source/usbd_ep.c **** *               buf_len         Number of octets to transmit.
1514:rtos/uC-USB-Device/Source/usbd_ep.c **** *
1515:rtos/uC-USB-Device/Source/usbd_ep.c **** *               async_fnct      Function that will be invoked upon completion of transmit operation
1516:rtos/uC-USB-Device/Source/usbd_ep.c **** *
1517:rtos/uC-USB-Device/Source/usbd_ep.c **** *               p_async_arg     Pointer to argument that will be passed as parameter of 'async_fnct
1518:rtos/uC-USB-Device/Source/usbd_ep.c **** **
1519:rtos/uC-USB-Device/Source/usbd_ep.c **** *               p_err           Pointer to variable that will receive return error code from this f
1520:rtos/uC-USB-Device/Source/usbd_ep.c **** *
1521:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                   USBD_ERR_NONE               Data successfully transmitted.
1522:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                   USBD_ERR_NULL_PTR           Parameter 'async_fnct' is a null po
1523:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                   USBD_ERR_DEV_INVALID_NBR    Invalid device number.
1524:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                   USBD_ERR_DEV_INVALID_STATE  Transfer type only available if dev
1525:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                                               configured state.
1526:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                   USBD_ERR_EP_INVALID_ADDR    Invalid endpoint address.
1527:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                   USBD_ERR_EP_INVALID_STATE   Invalid endpoint state.
1528:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                   USBD_ERR_EP_INVALID_TYPE    Invalid endpoint type.
1529:rtos/uC-USB-Device/Source/usbd_ep.c **** *
1530:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                   - RETURNED BY USBD_OS_EP_LockAcquire() -
1531:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                   See USBD_OS_EP_LockAcquire() for additional return error codes.
1532:rtos/uC-USB-Device/Source/usbd_ep.c **** *
1533:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                   - RETURNED BY USBD_EP_Tx() -
1534:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                   See USBD_EP_Tx() for additional return error codes.
1535:rtos/uC-USB-Device/Source/usbd_ep.c **** *
1536:rtos/uC-USB-Device/Source/usbd_ep.c **** * Return(s)   : none.
1537:rtos/uC-USB-Device/Source/usbd_ep.c **** *
1538:rtos/uC-USB-Device/Source/usbd_ep.c **** * Note(s)     : (1) Transmit buffer must be at least aligned on a word.
1539:rtos/uC-USB-Device/Source/usbd_ep.c **** ***************************************************************************************************
1540:rtos/uC-USB-Device/Source/usbd_ep.c **** */
1541:rtos/uC-USB-Device/Source/usbd_ep.c **** 
1542:rtos/uC-USB-Device/Source/usbd_ep.c **** #if (USBD_CFG_EP_ISOC_EN == DEF_ENABLED)
1543:rtos/uC-USB-Device/Source/usbd_ep.c **** void  USBD_IsocTxAsync (CPU_INT08U        dev_nbr,
1544:rtos/uC-USB-Device/Source/usbd_ep.c ****                         CPU_INT08U        ep_addr,
1545:rtos/uC-USB-Device/Source/usbd_ep.c ****                         void             *p_buf,
1546:rtos/uC-USB-Device/Source/usbd_ep.c ****                         CPU_INT32U        buf_len,
1547:rtos/uC-USB-Device/Source/usbd_ep.c ****                         USBD_ASYNC_FNCT   async_fnct,
1548:rtos/uC-USB-Device/Source/usbd_ep.c ****                         void             *p_async_arg,
1549:rtos/uC-USB-Device/Source/usbd_ep.c ****                         USBD_ERR         *p_err)
1550:rtos/uC-USB-Device/Source/usbd_ep.c **** {
1551:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_EP         *p_ep;
1552:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DRV        *p_drv;
1553:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DEV_STATE   state;
1554:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_INT08U       ep_phy_nbr;
1555:rtos/uC-USB-Device/Source/usbd_ep.c **** 
1556:rtos/uC-USB-Device/Source/usbd_ep.c **** 
1557:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DBG_STATS_DEV_INC(dev_nbr, IsocTxAsyncExecNbr);
1558:rtos/uC-USB-Device/Source/usbd_ep.c **** 
1559:rtos/uC-USB-Device/Source/usbd_ep.c **** #if (USBD_CFG_ERR_ARG_CHK_EXT_EN == DEF_ENABLED)                /* ---------------- VALIDATE ARGUME
1560:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_err == (USBD_ERR *)0) {                               /* Validate error ptr.             
1561:rtos/uC-USB-Device/Source/usbd_ep.c ****         CPU_SW_EXCEPTION(;);
1562:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
1563:rtos/uC-USB-Device/Source/usbd_ep.c **** 
1564:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (async_fnct == (USBD_ASYNC_FNCT)0) {
1565:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_NULL_PTR;
1566:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
1567:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
1568:rtos/uC-USB-Device/Source/usbd_ep.c **** #endif
1569:rtos/uC-USB-Device/Source/usbd_ep.c **** 
ARM GAS  /tmp/ccuUvpuw.s 			page 29


1570:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_drv = USBD_DrvRefGet(dev_nbr);                            /* Get dev struct.                 
1571:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_drv == (USBD_DRV *)0) {
1572:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_DEV_INVALID_NBR;
1573:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
1574:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
1575:rtos/uC-USB-Device/Source/usbd_ep.c **** 
1576:rtos/uC-USB-Device/Source/usbd_ep.c ****     state = USBD_DevStateGet(dev_nbr, p_err);
1577:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (state != USBD_DEV_STATE_CONFIGURED) {                   /* EP transfers are ONLY allowed in
1578:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_DEV_INVALID_STATE;
1579:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
1580:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
1581:rtos/uC-USB-Device/Source/usbd_ep.c **** 
1582:rtos/uC-USB-Device/Source/usbd_ep.c ****     ep_phy_nbr = USBD_EP_ADDR_TO_PHY(ep_addr);
1583:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_ep       = USBD_EP_TblPtrs[dev_nbr][ep_phy_nbr];
1584:rtos/uC-USB-Device/Source/usbd_ep.c **** 
1585:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_ep == (USBD_EP *)0) {
1586:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_EP_INVALID_ADDR;
1587:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
1588:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
1589:rtos/uC-USB-Device/Source/usbd_ep.c **** 
1590:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_OS_EP_LockAcquire(p_drv->DevNbr,
1591:rtos/uC-USB-Device/Source/usbd_ep.c ****                            p_ep->Ix,
1592:rtos/uC-USB-Device/Source/usbd_ep.c ****                            0u,
1593:rtos/uC-USB-Device/Source/usbd_ep.c ****                            p_err);
1594:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (*p_err != USBD_ERR_NONE) {
1595:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
1596:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
1597:rtos/uC-USB-Device/Source/usbd_ep.c **** 
1598:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_ep->State != USBD_EP_STATE_OPEN) {
1599:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_OS_EP_LockRelease(p_drv->DevNbr,
1600:rtos/uC-USB-Device/Source/usbd_ep.c ****                                p_ep->Ix);
1601:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_EP_INVALID_STATE;
1602:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
1603:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
1604:rtos/uC-USB-Device/Source/usbd_ep.c ****                                                                 /* Chk EP attrib.                  
1605:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (((p_ep->Attrib & USBD_EP_TYPE_MASK) != USBD_EP_TYPE_ISOC) ||
1606:rtos/uC-USB-Device/Source/usbd_ep.c ****         ((ep_addr      & USBD_EP_DIR_MASK)  != USBD_EP_DIR_IN)) {
1607:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_OS_EP_LockRelease(p_drv->DevNbr,
1608:rtos/uC-USB-Device/Source/usbd_ep.c ****                                p_ep->Ix);
1609:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_EP_INVALID_TYPE;
1610:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
1611:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
1612:rtos/uC-USB-Device/Source/usbd_ep.c **** 
1613:rtos/uC-USB-Device/Source/usbd_ep.c ****     (void)USBD_EP_Tx(p_drv,
1614:rtos/uC-USB-Device/Source/usbd_ep.c ****                      p_ep,
1615:rtos/uC-USB-Device/Source/usbd_ep.c ****                      p_buf,
1616:rtos/uC-USB-Device/Source/usbd_ep.c ****                      buf_len,
1617:rtos/uC-USB-Device/Source/usbd_ep.c ****                      async_fnct,
1618:rtos/uC-USB-Device/Source/usbd_ep.c ****                      p_async_arg,
1619:rtos/uC-USB-Device/Source/usbd_ep.c ****                      0u,
1620:rtos/uC-USB-Device/Source/usbd_ep.c ****                      DEF_NO,
1621:rtos/uC-USB-Device/Source/usbd_ep.c ****                      p_err);
1622:rtos/uC-USB-Device/Source/usbd_ep.c **** 
1623:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_OS_EP_LockRelease(p_drv->DevNbr,
1624:rtos/uC-USB-Device/Source/usbd_ep.c ****                            p_ep->Ix);
1625:rtos/uC-USB-Device/Source/usbd_ep.c **** 
1626:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DBG_STATS_DEV_INC_IF_TRUE(dev_nbr, IsocTxAsyncSuccessNbr, (*p_err == USBD_ERR_NONE));
ARM GAS  /tmp/ccuUvpuw.s 			page 30


1627:rtos/uC-USB-Device/Source/usbd_ep.c **** }
1628:rtos/uC-USB-Device/Source/usbd_ep.c **** #endif
1629:rtos/uC-USB-Device/Source/usbd_ep.c **** 
1630:rtos/uC-USB-Device/Source/usbd_ep.c **** 
1631:rtos/uC-USB-Device/Source/usbd_ep.c **** /*
1632:rtos/uC-USB-Device/Source/usbd_ep.c **** ***************************************************************************************************
1633:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                         USBD_CtrlTxStatus()
1634:rtos/uC-USB-Device/Source/usbd_ep.c **** *
1635:rtos/uC-USB-Device/Source/usbd_ep.c **** * Description : Handle status stage from host on control (EP0) IN endpoint.
1636:rtos/uC-USB-Device/Source/usbd_ep.c **** *
1637:rtos/uC-USB-Device/Source/usbd_ep.c **** * Argument(s) : dev_nbr     Device number.
1638:rtos/uC-USB-Device/Source/usbd_ep.c **** *
1639:rtos/uC-USB-Device/Source/usbd_ep.c **** *               timeout_ms  Timeout in milliseconds.
1640:rtos/uC-USB-Device/Source/usbd_ep.c **** *
1641:rtos/uC-USB-Device/Source/usbd_ep.c **** *               p_err       Pointer to variable that will receive return error code from this funct
1642:rtos/uC-USB-Device/Source/usbd_ep.c **** *
1643:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               USBD_ERR_NONE               Status stage successfully completed.
1644:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               USBD_ERR_DEV_INVALID_STATE  Transfer type only available if device 
1645:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                                           default/addressed/configured state.
1646:rtos/uC-USB-Device/Source/usbd_ep.c **** *
1647:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               - RETURNED BY USBD_DevStateGet() -
1648:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               See USBD_DevStateGet() for additional return error codes.
1649:rtos/uC-USB-Device/Source/usbd_ep.c **** *
1650:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               - RETURNED BY USBD_EP_TxZLP() -
1651:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               See USBD_EP_TxZLP() for additional return error codes.
1652:rtos/uC-USB-Device/Source/usbd_ep.c **** *
1653:rtos/uC-USB-Device/Source/usbd_ep.c **** * Return(s)   : none.
1654:rtos/uC-USB-Device/Source/usbd_ep.c **** *
1655:rtos/uC-USB-Device/Source/usbd_ep.c **** * Note(s)     : none.
1656:rtos/uC-USB-Device/Source/usbd_ep.c **** ***************************************************************************************************
1657:rtos/uC-USB-Device/Source/usbd_ep.c **** */
1658:rtos/uC-USB-Device/Source/usbd_ep.c **** 
1659:rtos/uC-USB-Device/Source/usbd_ep.c **** void  USBD_CtrlTxStatus (CPU_INT08U   dev_nbr,
1660:rtos/uC-USB-Device/Source/usbd_ep.c ****                          CPU_INT16U   timeout_ms,
1661:rtos/uC-USB-Device/Source/usbd_ep.c ****                          USBD_ERR    *p_err)
1662:rtos/uC-USB-Device/Source/usbd_ep.c **** {
1663:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DEV_STATE  state;
1664:rtos/uC-USB-Device/Source/usbd_ep.c **** 
1665:rtos/uC-USB-Device/Source/usbd_ep.c **** 
1666:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DBG_STATS_DEV_INC(dev_nbr, CtrlTxStatusExecNbr);
1667:rtos/uC-USB-Device/Source/usbd_ep.c **** 
1668:rtos/uC-USB-Device/Source/usbd_ep.c ****     state = USBD_DevStateGet(dev_nbr, p_err);
1669:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (*p_err != USBD_ERR_NONE) {
1670:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
1671:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
1672:rtos/uC-USB-Device/Source/usbd_ep.c **** 
1673:rtos/uC-USB-Device/Source/usbd_ep.c ****     if ((state != USBD_DEV_STATE_DEFAULT)    &&
1674:rtos/uC-USB-Device/Source/usbd_ep.c ****         (state != USBD_DEV_STATE_ADDRESSED)  &&
1675:rtos/uC-USB-Device/Source/usbd_ep.c ****         (state != USBD_DEV_STATE_CONFIGURED)) {
1676:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err  = USBD_ERR_DEV_INVALID_STATE;
1677:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
1678:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
1679:rtos/uC-USB-Device/Source/usbd_ep.c **** 
1680:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_EP_TxZLP(dev_nbr,
1681:rtos/uC-USB-Device/Source/usbd_ep.c ****                   USBD_EP_ADDR_CTRL_IN,
1682:rtos/uC-USB-Device/Source/usbd_ep.c ****                   timeout_ms,
1683:rtos/uC-USB-Device/Source/usbd_ep.c ****                   p_err);
ARM GAS  /tmp/ccuUvpuw.s 			page 31


1684:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DBG_STATS_DEV_INC_IF_TRUE(dev_nbr, CtrlTxStatusSuccessNbr, (*p_err == USBD_ERR_NONE));
1685:rtos/uC-USB-Device/Source/usbd_ep.c **** }
1686:rtos/uC-USB-Device/Source/usbd_ep.c **** 
1687:rtos/uC-USB-Device/Source/usbd_ep.c **** 
1688:rtos/uC-USB-Device/Source/usbd_ep.c **** /*
1689:rtos/uC-USB-Device/Source/usbd_ep.c **** ***************************************************************************************************
1690:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                            USBD_CtrlRx()
1691:rtos/uC-USB-Device/Source/usbd_ep.c **** *
1692:rtos/uC-USB-Device/Source/usbd_ep.c **** * Description : Receive data on Control OUT endpoint.
1693:rtos/uC-USB-Device/Source/usbd_ep.c **** *
1694:rtos/uC-USB-Device/Source/usbd_ep.c **** * Argument(s) : dev_nbr     Device number.
1695:rtos/uC-USB-Device/Source/usbd_ep.c **** *
1696:rtos/uC-USB-Device/Source/usbd_ep.c **** *               p_buf       Pointer to destination buffer to receive data.
1697:rtos/uC-USB-Device/Source/usbd_ep.c **** *
1698:rtos/uC-USB-Device/Source/usbd_ep.c **** *               buf_len     Number of octets to receive.
1699:rtos/uC-USB-Device/Source/usbd_ep.c **** *
1700:rtos/uC-USB-Device/Source/usbd_ep.c **** *               timeout_ms  Timeout in milliseconds.
1701:rtos/uC-USB-Device/Source/usbd_ep.c **** *
1702:rtos/uC-USB-Device/Source/usbd_ep.c **** *               p_err       Pointer to variable that will receive return error code from this funct
1703:rtos/uC-USB-Device/Source/usbd_ep.c **** *
1704:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               USBD_ERR_NONE               Data successfully received.
1705:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               USBD_ERR_DEV_INVALID_NBR    Invalid device number.
1706:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               USBD_ERR_DEV_INVALID_STATE  Transfer type only available if device 
1707:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                                           default/addressed/configured state.
1708:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               USBD_ERR_EP_INVALID_ADDR    Invalid endpoint address.
1709:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               USBD_ERR_EP_INVALID_STATE   Invalid endpoint state.
1710:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               USBD_ERR_EP_INVALID_TYPE    Invalid endpoint type.
1711:rtos/uC-USB-Device/Source/usbd_ep.c **** *
1712:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               - RETURNED BY USBD_OS_EP_LockAcquire() -
1713:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               See USBD_OS_EP_LockAcquire() for additional return error codes.
1714:rtos/uC-USB-Device/Source/usbd_ep.c **** *
1715:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               - RETURNED BY USBD_EP_Rx() -
1716:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               See USBD_EP_Rx() for additional return error codes.
1717:rtos/uC-USB-Device/Source/usbd_ep.c **** *
1718:rtos/uC-USB-Device/Source/usbd_ep.c **** * Return(s)   : Number of octets received, if NO error(s).
1719:rtos/uC-USB-Device/Source/usbd_ep.c **** *
1720:rtos/uC-USB-Device/Source/usbd_ep.c **** *               0,                         otherwise.
1721:rtos/uC-USB-Device/Source/usbd_ep.c **** *
1722:rtos/uC-USB-Device/Source/usbd_ep.c **** * Note(s)     : none.
1723:rtos/uC-USB-Device/Source/usbd_ep.c **** ***************************************************************************************************
1724:rtos/uC-USB-Device/Source/usbd_ep.c **** */
1725:rtos/uC-USB-Device/Source/usbd_ep.c **** 
1726:rtos/uC-USB-Device/Source/usbd_ep.c **** CPU_INT32U  USBD_CtrlRx (CPU_INT08U    dev_nbr,
1727:rtos/uC-USB-Device/Source/usbd_ep.c ****                          void         *p_buf,
1728:rtos/uC-USB-Device/Source/usbd_ep.c ****                          CPU_INT32U    buf_len,
1729:rtos/uC-USB-Device/Source/usbd_ep.c ****                          CPU_INT16U    timeout_ms,
1730:rtos/uC-USB-Device/Source/usbd_ep.c ****                          USBD_ERR     *p_err)
1731:rtos/uC-USB-Device/Source/usbd_ep.c **** {
1732:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DRV        *p_drv;
1733:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_EP         *p_ep;
1734:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_INT08U       ep_phy_nbr;
1735:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DEV_STATE   state;
1736:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_INT32U       xfer_len;
1737:rtos/uC-USB-Device/Source/usbd_ep.c **** 
1738:rtos/uC-USB-Device/Source/usbd_ep.c **** 
1739:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DBG_STATS_DEV_INC(dev_nbr, CtrlRxSyncExecNbr);
1740:rtos/uC-USB-Device/Source/usbd_ep.c **** 
ARM GAS  /tmp/ccuUvpuw.s 			page 32


1741:rtos/uC-USB-Device/Source/usbd_ep.c **** #if (USBD_CFG_ERR_ARG_CHK_EXT_EN == DEF_ENABLED)                /* ---------------- VALIDATE ARGUME
1742:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_err == (USBD_ERR *)0) {                               /* Validate error ptr.             
1743:rtos/uC-USB-Device/Source/usbd_ep.c ****         CPU_SW_EXCEPTION(0);
1744:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
1745:rtos/uC-USB-Device/Source/usbd_ep.c **** #endif
1746:rtos/uC-USB-Device/Source/usbd_ep.c **** 
1747:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_drv = USBD_DrvRefGet(dev_nbr);                            /* Get dev struct.                 
1748:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_drv == (USBD_DRV *)0) {
1749:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_DEV_INVALID_NBR;
1750:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (0u);
1751:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
1752:rtos/uC-USB-Device/Source/usbd_ep.c **** 
1753:rtos/uC-USB-Device/Source/usbd_ep.c ****     state = USBD_DevStateGet(dev_nbr, p_err);
1754:rtos/uC-USB-Device/Source/usbd_ep.c ****     if ((state != USBD_DEV_STATE_DEFAULT)   &&
1755:rtos/uC-USB-Device/Source/usbd_ep.c ****         (state != USBD_DEV_STATE_ADDRESSED) &&
1756:rtos/uC-USB-Device/Source/usbd_ep.c ****         (state != USBD_DEV_STATE_CONFIGURED)) {
1757:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_DEV_INVALID_STATE;
1758:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (0u);
1759:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
1760:rtos/uC-USB-Device/Source/usbd_ep.c **** 
1761:rtos/uC-USB-Device/Source/usbd_ep.c ****     ep_phy_nbr = USBD_EP_ADDR_TO_PHY(USBD_EP_ADDR_CTRL_OUT);
1762:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_ep       = USBD_EP_TblPtrs[dev_nbr][ep_phy_nbr];
1763:rtos/uC-USB-Device/Source/usbd_ep.c **** 
1764:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_ep == (USBD_EP *)0) {
1765:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_EP_INVALID_ADDR;
1766:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (0u);
1767:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
1768:rtos/uC-USB-Device/Source/usbd_ep.c **** 
1769:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_OS_EP_LockAcquire(p_drv->DevNbr,
1770:rtos/uC-USB-Device/Source/usbd_ep.c ****                            p_ep->Ix,
1771:rtos/uC-USB-Device/Source/usbd_ep.c ****                            0u,
1772:rtos/uC-USB-Device/Source/usbd_ep.c ****                            p_err);
1773:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (*p_err != USBD_ERR_NONE) {
1774:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (0u);
1775:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
1776:rtos/uC-USB-Device/Source/usbd_ep.c **** 
1777:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_ep->State != USBD_EP_STATE_OPEN) {
1778:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_OS_EP_LockRelease(p_drv->DevNbr,
1779:rtos/uC-USB-Device/Source/usbd_ep.c ****                                p_ep->Ix);
1780:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_EP_INVALID_STATE;
1781:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (0u);
1782:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
1783:rtos/uC-USB-Device/Source/usbd_ep.c ****                                                                 /* Chk EP attrib.                  
1784:rtos/uC-USB-Device/Source/usbd_ep.c ****     if ((p_ep->Attrib & USBD_EP_TYPE_MASK) != USBD_EP_TYPE_CTRL) {
1785:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_OS_EP_LockRelease(p_drv->DevNbr,
1786:rtos/uC-USB-Device/Source/usbd_ep.c ****                                p_ep->Ix);
1787:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_EP_INVALID_TYPE;
1788:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (0u);
1789:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
1790:rtos/uC-USB-Device/Source/usbd_ep.c **** 
1791:rtos/uC-USB-Device/Source/usbd_ep.c ****     xfer_len = USBD_EP_Rx(                 p_drv,
1792:rtos/uC-USB-Device/Source/usbd_ep.c ****                                            p_ep,
1793:rtos/uC-USB-Device/Source/usbd_ep.c ****                                            p_buf,
1794:rtos/uC-USB-Device/Source/usbd_ep.c ****                                            buf_len,
1795:rtos/uC-USB-Device/Source/usbd_ep.c ****                           (USBD_ASYNC_FNCT)0,
1796:rtos/uC-USB-Device/Source/usbd_ep.c ****                           (void          *)0,
1797:rtos/uC-USB-Device/Source/usbd_ep.c ****                                            timeout_ms,
ARM GAS  /tmp/ccuUvpuw.s 			page 33


1798:rtos/uC-USB-Device/Source/usbd_ep.c ****                                            p_err);
1799:rtos/uC-USB-Device/Source/usbd_ep.c **** 
1800:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_OS_EP_LockRelease(p_drv->DevNbr,
1801:rtos/uC-USB-Device/Source/usbd_ep.c ****                            p_ep->Ix);
1802:rtos/uC-USB-Device/Source/usbd_ep.c **** 
1803:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DBG_STATS_DEV_INC_IF_TRUE(dev_nbr, CtrlRxSyncSuccessNbr, (*p_err == USBD_ERR_NONE));
1804:rtos/uC-USB-Device/Source/usbd_ep.c **** 
1805:rtos/uC-USB-Device/Source/usbd_ep.c ****     return (xfer_len);
1806:rtos/uC-USB-Device/Source/usbd_ep.c **** }
1807:rtos/uC-USB-Device/Source/usbd_ep.c **** 
1808:rtos/uC-USB-Device/Source/usbd_ep.c **** 
1809:rtos/uC-USB-Device/Source/usbd_ep.c **** /*
1810:rtos/uC-USB-Device/Source/usbd_ep.c **** ***************************************************************************************************
1811:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                            USBD_CtrlTx()
1812:rtos/uC-USB-Device/Source/usbd_ep.c **** *
1813:rtos/uC-USB-Device/Source/usbd_ep.c **** * Description : Send data on Control IN endpoint.
1814:rtos/uC-USB-Device/Source/usbd_ep.c **** *
1815:rtos/uC-USB-Device/Source/usbd_ep.c **** * Argument(s) : dev_nbr     Device number.
1816:rtos/uC-USB-Device/Source/usbd_ep.c **** *
1817:rtos/uC-USB-Device/Source/usbd_ep.c **** *               p_buf       Pointer to buffer of data that will be sent.
1818:rtos/uC-USB-Device/Source/usbd_ep.c **** *
1819:rtos/uC-USB-Device/Source/usbd_ep.c **** *               buf_len     Number of octets to transmit.
1820:rtos/uC-USB-Device/Source/usbd_ep.c **** *
1821:rtos/uC-USB-Device/Source/usbd_ep.c **** *               timeout_ms  Timeout in milliseconds.
1822:rtos/uC-USB-Device/Source/usbd_ep.c **** *
1823:rtos/uC-USB-Device/Source/usbd_ep.c **** *               end         End-of-transfer flag (see Note #1).
1824:rtos/uC-USB-Device/Source/usbd_ep.c **** *
1825:rtos/uC-USB-Device/Source/usbd_ep.c **** *               p_err       Pointer to variable that will receive return error code from this funct
1826:rtos/uC-USB-Device/Source/usbd_ep.c **** *
1827:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               USBD_ERR_NONE               Data successfully transmitted.
1828:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               USBD_ERR_DEV_INVALID_NBR    Invalid device number.
1829:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               USBD_ERR_DEV_INVALID_STATE  Transfer type only available if device 
1830:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                                           configured state.
1831:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               USBD_ERR_INVALID_ARG        Invalid argument(s): 'buf_len'.
1832:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               USBD_ERR_EP_INVALID_ADDR    Invalid endpoint address.
1833:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               USBD_ERR_EP_INVALID_STATE   Invalid endpoint state.
1834:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               USBD_ERR_EP_INVALID_TYPE    Invalid endpoint type.
1835:rtos/uC-USB-Device/Source/usbd_ep.c **** *
1836:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               - RETURNED BY USBD_OS_EP_LockAcquire() -
1837:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               See USBD_OS_EP_LockAcquire() for additional return error codes.
1838:rtos/uC-USB-Device/Source/usbd_ep.c **** *
1839:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               - RETURNED BY USBD_EP_Tx() -
1840:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               See USBD_EP_Tx() for additional return error codes.
1841:rtos/uC-USB-Device/Source/usbd_ep.c **** *
1842:rtos/uC-USB-Device/Source/usbd_ep.c **** * Return(s)   : Number of octets transmitted, if NO error(s).
1843:rtos/uC-USB-Device/Source/usbd_ep.c **** *
1844:rtos/uC-USB-Device/Source/usbd_ep.c **** *               0,                            otherwise.
1845:rtos/uC-USB-Device/Source/usbd_ep.c **** *
1846:rtos/uC-USB-Device/Source/usbd_ep.c **** * Note(s)     : (1) If end-of-transfer is set and transfer length is multiple of maximum packet siz
1847:rtos/uC-USB-Device/Source/usbd_ep.c **** *                   a zero-length packet is transferred to indicate a short transfer to the host.
1848:rtos/uC-USB-Device/Source/usbd_ep.c **** ***************************************************************************************************
1849:rtos/uC-USB-Device/Source/usbd_ep.c **** */
1850:rtos/uC-USB-Device/Source/usbd_ep.c **** 
1851:rtos/uC-USB-Device/Source/usbd_ep.c **** CPU_INT32U  USBD_CtrlTx (CPU_INT08U    dev_nbr,
1852:rtos/uC-USB-Device/Source/usbd_ep.c ****                          void         *p_buf,
1853:rtos/uC-USB-Device/Source/usbd_ep.c ****                          CPU_INT32U    buf_len,
1854:rtos/uC-USB-Device/Source/usbd_ep.c ****                          CPU_INT16U    timeout_ms,
ARM GAS  /tmp/ccuUvpuw.s 			page 34


1855:rtos/uC-USB-Device/Source/usbd_ep.c ****                          CPU_BOOLEAN   end,
1856:rtos/uC-USB-Device/Source/usbd_ep.c ****                          USBD_ERR     *p_err)
1857:rtos/uC-USB-Device/Source/usbd_ep.c **** {
1858:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DRV        *p_drv;
1859:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_EP         *p_ep;
1860:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_INT08U       ep_phy_nbr;
1861:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DEV_STATE   state;
1862:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_INT32U       xfer_len;
1863:rtos/uC-USB-Device/Source/usbd_ep.c **** 
1864:rtos/uC-USB-Device/Source/usbd_ep.c **** 
1865:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DBG_STATS_DEV_INC(dev_nbr, CtrlTxSyncExecNbr);
1866:rtos/uC-USB-Device/Source/usbd_ep.c **** 
1867:rtos/uC-USB-Device/Source/usbd_ep.c **** #if (USBD_CFG_ERR_ARG_CHK_EXT_EN == DEF_ENABLED)                /* ---------------- VALIDATE ARGUME
1868:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_err == (USBD_ERR *)0) {                               /* Validate error ptr.             
1869:rtos/uC-USB-Device/Source/usbd_ep.c ****         CPU_SW_EXCEPTION(0);
1870:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
1871:rtos/uC-USB-Device/Source/usbd_ep.c **** #endif
1872:rtos/uC-USB-Device/Source/usbd_ep.c **** 
1873:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_drv = USBD_DrvRefGet(dev_nbr);                            /* Get dev struct.                 
1874:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_drv == (USBD_DRV *)0) {
1875:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_DEV_INVALID_NBR;
1876:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (0u);
1877:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
1878:rtos/uC-USB-Device/Source/usbd_ep.c **** 
1879:rtos/uC-USB-Device/Source/usbd_ep.c ****     state = USBD_DevStateGet(dev_nbr, p_err);
1880:rtos/uC-USB-Device/Source/usbd_ep.c ****     if ((state != USBD_DEV_STATE_DEFAULT)   &&
1881:rtos/uC-USB-Device/Source/usbd_ep.c ****         (state != USBD_DEV_STATE_ADDRESSED) &&
1882:rtos/uC-USB-Device/Source/usbd_ep.c ****         (state != USBD_DEV_STATE_CONFIGURED)) {
1883:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_DEV_INVALID_STATE;
1884:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (0u);
1885:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
1886:rtos/uC-USB-Device/Source/usbd_ep.c **** 
1887:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (buf_len == 0u) {
1888:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_INVALID_ARG;
1889:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (0u);
1890:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
1891:rtos/uC-USB-Device/Source/usbd_ep.c **** 
1892:rtos/uC-USB-Device/Source/usbd_ep.c ****     ep_phy_nbr = USBD_EP_ADDR_TO_PHY(USBD_EP_ADDR_CTRL_IN);
1893:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_ep       = USBD_EP_TblPtrs[dev_nbr][ep_phy_nbr];
1894:rtos/uC-USB-Device/Source/usbd_ep.c **** 
1895:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_ep == (USBD_EP *)0) {
1896:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_EP_INVALID_ADDR;
1897:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (0u);
1898:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
1899:rtos/uC-USB-Device/Source/usbd_ep.c **** 
1900:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_OS_EP_LockAcquire(p_drv->DevNbr,
1901:rtos/uC-USB-Device/Source/usbd_ep.c ****                            p_ep->Ix,
1902:rtos/uC-USB-Device/Source/usbd_ep.c ****                            0u,
1903:rtos/uC-USB-Device/Source/usbd_ep.c ****                            p_err);
1904:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (*p_err != USBD_ERR_NONE) {
1905:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (0u);
1906:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
1907:rtos/uC-USB-Device/Source/usbd_ep.c **** 
1908:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_ep->State != USBD_EP_STATE_OPEN) {
1909:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_OS_EP_LockRelease(p_drv->DevNbr,
1910:rtos/uC-USB-Device/Source/usbd_ep.c ****                                p_ep->Ix);
1911:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_EP_INVALID_STATE;
ARM GAS  /tmp/ccuUvpuw.s 			page 35


1912:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (0u);
1913:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
1914:rtos/uC-USB-Device/Source/usbd_ep.c ****                                                                 /* Chk EP attrib.                  
1915:rtos/uC-USB-Device/Source/usbd_ep.c ****     if ((p_ep->Attrib & USBD_EP_TYPE_MASK) != USBD_EP_TYPE_CTRL) {
1916:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_OS_EP_LockRelease(p_drv->DevNbr,
1917:rtos/uC-USB-Device/Source/usbd_ep.c ****                                p_ep->Ix);
1918:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_EP_INVALID_TYPE;
1919:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (0u);
1920:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
1921:rtos/uC-USB-Device/Source/usbd_ep.c **** 
1922:rtos/uC-USB-Device/Source/usbd_ep.c ****     xfer_len = USBD_EP_Tx(                 p_drv,
1923:rtos/uC-USB-Device/Source/usbd_ep.c ****                                            p_ep,
1924:rtos/uC-USB-Device/Source/usbd_ep.c ****                                            p_buf,
1925:rtos/uC-USB-Device/Source/usbd_ep.c ****                                            buf_len,
1926:rtos/uC-USB-Device/Source/usbd_ep.c ****                           (USBD_ASYNC_FNCT)0,
1927:rtos/uC-USB-Device/Source/usbd_ep.c ****                           (void          *)0,
1928:rtos/uC-USB-Device/Source/usbd_ep.c ****                                            timeout_ms,
1929:rtos/uC-USB-Device/Source/usbd_ep.c ****                                            end,
1930:rtos/uC-USB-Device/Source/usbd_ep.c ****                                            p_err);
1931:rtos/uC-USB-Device/Source/usbd_ep.c **** 
1932:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_OS_EP_LockRelease(p_drv->DevNbr,
1933:rtos/uC-USB-Device/Source/usbd_ep.c ****                            p_ep->Ix);
1934:rtos/uC-USB-Device/Source/usbd_ep.c **** 
1935:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DBG_STATS_DEV_INC_IF_TRUE(dev_nbr, CtrlTxSyncSuccessNbr, (*p_err == USBD_ERR_NONE));
1936:rtos/uC-USB-Device/Source/usbd_ep.c **** 
1937:rtos/uC-USB-Device/Source/usbd_ep.c ****     return (xfer_len);
1938:rtos/uC-USB-Device/Source/usbd_ep.c **** }
1939:rtos/uC-USB-Device/Source/usbd_ep.c **** 
1940:rtos/uC-USB-Device/Source/usbd_ep.c **** 
1941:rtos/uC-USB-Device/Source/usbd_ep.c **** /*
1942:rtos/uC-USB-Device/Source/usbd_ep.c **** ***************************************************************************************************
1943:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                         USBD_CtrlRxStatus()
1944:rtos/uC-USB-Device/Source/usbd_ep.c **** *
1945:rtos/uC-USB-Device/Source/usbd_ep.c **** * Description : Handle status stage from host on control (EP0) OUT endpoint.
1946:rtos/uC-USB-Device/Source/usbd_ep.c **** *
1947:rtos/uC-USB-Device/Source/usbd_ep.c **** * Argument(s) : dev_nbr     Device number.
1948:rtos/uC-USB-Device/Source/usbd_ep.c **** *
1949:rtos/uC-USB-Device/Source/usbd_ep.c **** *               timeout_ms  Timeout in milliseconds.
1950:rtos/uC-USB-Device/Source/usbd_ep.c **** *
1951:rtos/uC-USB-Device/Source/usbd_ep.c **** *               p_err       Pointer to variable that will receive return error code from this funct
1952:rtos/uC-USB-Device/Source/usbd_ep.c **** *
1953:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               USBD_ERR_NONE               Status stage successfully completed.
1954:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               USBD_ERR_DEV_INVALID_STATE  Transfer type only available if device 
1955:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                                           default/addressed/configured state.
1956:rtos/uC-USB-Device/Source/usbd_ep.c **** *
1957:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               - RETURNED BY USBD_DevStateGet() -
1958:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               See USBD_DevStateGet() for additional return error codes.
1959:rtos/uC-USB-Device/Source/usbd_ep.c **** *
1960:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               - RETURNED BY USBD_EP_RxZLP() -
1961:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               See USBD_EP_RxZLP() for additional return error codes.
1962:rtos/uC-USB-Device/Source/usbd_ep.c **** *
1963:rtos/uC-USB-Device/Source/usbd_ep.c **** * Return(s)   : none.
1964:rtos/uC-USB-Device/Source/usbd_ep.c **** *
1965:rtos/uC-USB-Device/Source/usbd_ep.c **** * Note(s)     : none.
1966:rtos/uC-USB-Device/Source/usbd_ep.c **** ***************************************************************************************************
1967:rtos/uC-USB-Device/Source/usbd_ep.c **** */
1968:rtos/uC-USB-Device/Source/usbd_ep.c **** 
ARM GAS  /tmp/ccuUvpuw.s 			page 36


1969:rtos/uC-USB-Device/Source/usbd_ep.c **** void  USBD_CtrlRxStatus (CPU_INT08U   dev_nbr,
1970:rtos/uC-USB-Device/Source/usbd_ep.c ****                          CPU_INT16U   timeout_ms,
1971:rtos/uC-USB-Device/Source/usbd_ep.c ****                          USBD_ERR    *p_err)
1972:rtos/uC-USB-Device/Source/usbd_ep.c **** {
1973:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DEV_STATE  state;
1974:rtos/uC-USB-Device/Source/usbd_ep.c **** 
1975:rtos/uC-USB-Device/Source/usbd_ep.c **** 
1976:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DBG_STATS_DEV_INC(dev_nbr, CtrlRxStatusExecNbr);
1977:rtos/uC-USB-Device/Source/usbd_ep.c **** 
1978:rtos/uC-USB-Device/Source/usbd_ep.c ****     state = USBD_DevStateGet(dev_nbr, p_err);
1979:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (*p_err != USBD_ERR_NONE) {
1980:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
1981:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
1982:rtos/uC-USB-Device/Source/usbd_ep.c **** 
1983:rtos/uC-USB-Device/Source/usbd_ep.c ****     if ((state != USBD_DEV_STATE_DEFAULT)   &&
1984:rtos/uC-USB-Device/Source/usbd_ep.c ****         (state != USBD_DEV_STATE_ADDRESSED) &&
1985:rtos/uC-USB-Device/Source/usbd_ep.c ****         (state != USBD_DEV_STATE_CONFIGURED)) {
1986:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err  = USBD_ERR_DEV_INVALID_STATE;
1987:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
1988:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
1989:rtos/uC-USB-Device/Source/usbd_ep.c **** 
1990:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_EP_RxZLP(dev_nbr,
1991:rtos/uC-USB-Device/Source/usbd_ep.c ****                   USBD_EP_ADDR_CTRL_OUT,
1992:rtos/uC-USB-Device/Source/usbd_ep.c ****                   timeout_ms,
1993:rtos/uC-USB-Device/Source/usbd_ep.c ****                   p_err);
1994:rtos/uC-USB-Device/Source/usbd_ep.c **** 
1995:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DBG_STATS_DEV_INC_IF_TRUE(dev_nbr, CtrlRxStatusSuccessNbr, (*p_err == USBD_ERR_NONE));
1996:rtos/uC-USB-Device/Source/usbd_ep.c **** }
1997:rtos/uC-USB-Device/Source/usbd_ep.c **** 
1998:rtos/uC-USB-Device/Source/usbd_ep.c **** 
1999:rtos/uC-USB-Device/Source/usbd_ep.c **** /*
2000:rtos/uC-USB-Device/Source/usbd_ep.c **** ***************************************************************************************************
2001:rtos/uC-USB-Device/Source/usbd_ep.c **** ***************************************************************************************************
2002:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                     CONTROL ENDPOINT FUNCTIONS
2003:rtos/uC-USB-Device/Source/usbd_ep.c **** ***************************************************************************************************
2004:rtos/uC-USB-Device/Source/usbd_ep.c **** ***************************************************************************************************
2005:rtos/uC-USB-Device/Source/usbd_ep.c **** */
2006:rtos/uC-USB-Device/Source/usbd_ep.c **** 
2007:rtos/uC-USB-Device/Source/usbd_ep.c **** /*
2008:rtos/uC-USB-Device/Source/usbd_ep.c **** ***************************************************************************************************
2009:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                           USBD_CtrlOpen()
2010:rtos/uC-USB-Device/Source/usbd_ep.c **** *
2011:rtos/uC-USB-Device/Source/usbd_ep.c **** * Description : Open control endpoints.
2012:rtos/uC-USB-Device/Source/usbd_ep.c **** *
2013:rtos/uC-USB-Device/Source/usbd_ep.c **** * Argument(s) : dev_nbr         Device number.
2014:rtos/uC-USB-Device/Source/usbd_ep.c **** *
2015:rtos/uC-USB-Device/Source/usbd_ep.c **** *               max_pkt_size    Maximum packet size.
2016:rtos/uC-USB-Device/Source/usbd_ep.c **** *
2017:rtos/uC-USB-Device/Source/usbd_ep.c **** *               p_err           Pointer to variable that will receive return error code from this f
2018:rtos/uC-USB-Device/Source/usbd_ep.c **** *
2019:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                   USBD_ERR_NONE               Control endpoint successfully opene
2020:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                   USBD_ERR_DEV_INVALID_NBR    Invalid device number.
2021:rtos/uC-USB-Device/Source/usbd_ep.c **** *
2022:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                   - RETURNED BY USBD_EP_Open() -
2023:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                   See USBD_EP_Open() for additional return error codes.
2024:rtos/uC-USB-Device/Source/usbd_ep.c **** *
2025:rtos/uC-USB-Device/Source/usbd_ep.c **** * Return(s)   : none.
ARM GAS  /tmp/ccuUvpuw.s 			page 37


2026:rtos/uC-USB-Device/Source/usbd_ep.c **** *
2027:rtos/uC-USB-Device/Source/usbd_ep.c **** * Note(s)     : none.
2028:rtos/uC-USB-Device/Source/usbd_ep.c **** ***************************************************************************************************
2029:rtos/uC-USB-Device/Source/usbd_ep.c **** */
2030:rtos/uC-USB-Device/Source/usbd_ep.c **** 
2031:rtos/uC-USB-Device/Source/usbd_ep.c **** void  USBD_CtrlOpen (CPU_INT08U   dev_nbr,
2032:rtos/uC-USB-Device/Source/usbd_ep.c ****                      CPU_INT16U   max_pkt_size,
2033:rtos/uC-USB-Device/Source/usbd_ep.c ****                      USBD_ERR    *p_err)
2034:rtos/uC-USB-Device/Source/usbd_ep.c **** {
2035:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DRV  *p_drv;
2036:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_ERR   local_err;
2037:rtos/uC-USB-Device/Source/usbd_ep.c **** 
2038:rtos/uC-USB-Device/Source/usbd_ep.c **** 
2039:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_drv = USBD_DrvRefGet(dev_nbr);                            /* Get dev struct.                 
2040:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_drv == (USBD_DRV *)0) {
2041:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_DEV_INVALID_NBR;
2042:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
2043:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
2044:rtos/uC-USB-Device/Source/usbd_ep.c **** 
2045:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_EP_Open(p_drv,
2046:rtos/uC-USB-Device/Source/usbd_ep.c ****                  USBD_EP_ADDR_CTRL_IN,
2047:rtos/uC-USB-Device/Source/usbd_ep.c ****                  max_pkt_size,
2048:rtos/uC-USB-Device/Source/usbd_ep.c ****                  USBD_EP_TYPE_CTRL,
2049:rtos/uC-USB-Device/Source/usbd_ep.c ****                  0u,
2050:rtos/uC-USB-Device/Source/usbd_ep.c ****                  p_err);
2051:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (*p_err != USBD_ERR_NONE) {
2052:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
2053:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
2054:rtos/uC-USB-Device/Source/usbd_ep.c **** 
2055:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_EP_Open(p_drv,
2056:rtos/uC-USB-Device/Source/usbd_ep.c ****                  USBD_EP_ADDR_CTRL_OUT,
2057:rtos/uC-USB-Device/Source/usbd_ep.c ****                  max_pkt_size,
2058:rtos/uC-USB-Device/Source/usbd_ep.c ****                  USBD_EP_TYPE_CTRL,
2059:rtos/uC-USB-Device/Source/usbd_ep.c ****                  0u,
2060:rtos/uC-USB-Device/Source/usbd_ep.c ****                  p_err);
2061:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (*p_err != USBD_ERR_NONE) {
2062:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_EP_Close(p_drv, USBD_EP_ADDR_CTRL_IN,  &local_err);
2063:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
2064:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
2065:rtos/uC-USB-Device/Source/usbd_ep.c **** 
2066:rtos/uC-USB-Device/Source/usbd_ep.c ****    *p_err = USBD_ERR_NONE;
2067:rtos/uC-USB-Device/Source/usbd_ep.c **** }
2068:rtos/uC-USB-Device/Source/usbd_ep.c **** 
2069:rtos/uC-USB-Device/Source/usbd_ep.c **** 
2070:rtos/uC-USB-Device/Source/usbd_ep.c **** /*
2071:rtos/uC-USB-Device/Source/usbd_ep.c **** ***************************************************************************************************
2072:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                          USBD_CtrlClose()
2073:rtos/uC-USB-Device/Source/usbd_ep.c **** *
2074:rtos/uC-USB-Device/Source/usbd_ep.c **** * Description : Close control endpoint.
2075:rtos/uC-USB-Device/Source/usbd_ep.c **** *
2076:rtos/uC-USB-Device/Source/usbd_ep.c **** * Argument(s) : dev_nbr     Device number.
2077:rtos/uC-USB-Device/Source/usbd_ep.c **** *
2078:rtos/uC-USB-Device/Source/usbd_ep.c **** *               p_err       Pointer to variable that will receive return error code from this funct
2079:rtos/uC-USB-Device/Source/usbd_ep.c **** *
2080:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               USBD_ERR_NONE               Control endpoint successfully closed.
2081:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               USBD_ERR_DEV_INVALID_NBR    Invalid device number.
2082:rtos/uC-USB-Device/Source/usbd_ep.c **** *
ARM GAS  /tmp/ccuUvpuw.s 			page 38


2083:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               - RETURNED BY USBD_EP_Close() -
2084:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               See USBD_EP_Close() for additional return error codes.
2085:rtos/uC-USB-Device/Source/usbd_ep.c **** *
2086:rtos/uC-USB-Device/Source/usbd_ep.c **** * Return(s)   : none.
2087:rtos/uC-USB-Device/Source/usbd_ep.c **** *
2088:rtos/uC-USB-Device/Source/usbd_ep.c **** * Note(s)     : none.
2089:rtos/uC-USB-Device/Source/usbd_ep.c **** ***************************************************************************************************
2090:rtos/uC-USB-Device/Source/usbd_ep.c **** */
2091:rtos/uC-USB-Device/Source/usbd_ep.c **** 
2092:rtos/uC-USB-Device/Source/usbd_ep.c **** void  USBD_CtrlClose (CPU_INT08U   dev_nbr,
2093:rtos/uC-USB-Device/Source/usbd_ep.c ****                       USBD_ERR    *p_err)
2094:rtos/uC-USB-Device/Source/usbd_ep.c **** {
2095:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DRV  *p_drv;
2096:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_ERR   err_in;
2097:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_ERR   err_out;
2098:rtos/uC-USB-Device/Source/usbd_ep.c **** 
2099:rtos/uC-USB-Device/Source/usbd_ep.c **** 
2100:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_drv = USBD_DrvRefGet(dev_nbr);                            /* Get dev struct.                 
2101:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_drv == (USBD_DRV *)0) {
2102:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_DEV_INVALID_NBR;
2103:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
2104:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
2105:rtos/uC-USB-Device/Source/usbd_ep.c **** 
2106:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_EP_Close(p_drv, USBD_EP_ADDR_CTRL_IN,  &err_in);
2107:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_EP_Close(p_drv, USBD_EP_ADDR_CTRL_OUT, &err_out);
2108:rtos/uC-USB-Device/Source/usbd_ep.c **** 
2109:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (err_in != USBD_ERR_NONE) {
2110:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = err_in;
2111:rtos/uC-USB-Device/Source/usbd_ep.c ****     } else {
2112:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = err_out;
2113:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
2114:rtos/uC-USB-Device/Source/usbd_ep.c **** }
2115:rtos/uC-USB-Device/Source/usbd_ep.c **** 
2116:rtos/uC-USB-Device/Source/usbd_ep.c **** 
2117:rtos/uC-USB-Device/Source/usbd_ep.c **** /*
2118:rtos/uC-USB-Device/Source/usbd_ep.c **** ***************************************************************************************************
2119:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                          USBD_CtrlStall()
2120:rtos/uC-USB-Device/Source/usbd_ep.c **** *
2121:rtos/uC-USB-Device/Source/usbd_ep.c **** * Description : Stall control endpoint.
2122:rtos/uC-USB-Device/Source/usbd_ep.c **** *
2123:rtos/uC-USB-Device/Source/usbd_ep.c **** * Argument(s) : dev_nbr     Device number.
2124:rtos/uC-USB-Device/Source/usbd_ep.c **** *
2125:rtos/uC-USB-Device/Source/usbd_ep.c **** *               p_err       Pointer to variable that will receive return error code from this funct
2126:rtos/uC-USB-Device/Source/usbd_ep.c **** *
2127:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               USBD_ERR_NONE               Control endpoint successfully stalled.
2128:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               USBD_ERR_DEV_INVALID_NBR    Invalid device number.
2129:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               USBD_ERR_EP_INVALID_ADDR    Invalid endpoint address.
2130:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               USBD_ERR_EP_INVALID_STATE   Invalid endpoint state.
2131:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               USBD_ERR_EP_STALL           Device driver stall endpoint failed.
2132:rtos/uC-USB-Device/Source/usbd_ep.c **** *
2133:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               - RETURNED BY USBD_OS_EP_LockAcquire() -
2134:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               See USBD_OS_EP_LockAcquire() for additional return error codes.
2135:rtos/uC-USB-Device/Source/usbd_ep.c **** *
2136:rtos/uC-USB-Device/Source/usbd_ep.c **** * Return(s)   : none.
2137:rtos/uC-USB-Device/Source/usbd_ep.c **** *
2138:rtos/uC-USB-Device/Source/usbd_ep.c **** * Note(s)     : None.
2139:rtos/uC-USB-Device/Source/usbd_ep.c **** ***************************************************************************************************
ARM GAS  /tmp/ccuUvpuw.s 			page 39


2140:rtos/uC-USB-Device/Source/usbd_ep.c **** */
2141:rtos/uC-USB-Device/Source/usbd_ep.c **** 
2142:rtos/uC-USB-Device/Source/usbd_ep.c **** void  USBD_CtrlStall (CPU_INT08U   dev_nbr,
2143:rtos/uC-USB-Device/Source/usbd_ep.c ****                       USBD_ERR    *p_err)
2144:rtos/uC-USB-Device/Source/usbd_ep.c **** {
2145:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_EP       *p_ep_out;
2146:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_EP       *p_ep_in;
2147:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DRV      *p_drv;
2148:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DRV_API  *p_drv_api;
2149:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_INT08U     ep_phy_nbr;
2150:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_BOOLEAN    stall_in;
2151:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_BOOLEAN    stall_out;
2152:rtos/uC-USB-Device/Source/usbd_ep.c **** 
2153:rtos/uC-USB-Device/Source/usbd_ep.c **** 
2154:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_drv = USBD_DrvRefGet(dev_nbr);                            /* Get dev struct.                 
2155:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_drv == (USBD_DRV *)0) {
2156:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_DEV_INVALID_NBR;
2157:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
2158:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
2159:rtos/uC-USB-Device/Source/usbd_ep.c **** 
2160:rtos/uC-USB-Device/Source/usbd_ep.c ****     ep_phy_nbr = USBD_EP_ADDR_TO_PHY(USBD_EP_ADDR_CTRL_OUT);
2161:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_ep_out   = USBD_EP_TblPtrs[dev_nbr][ep_phy_nbr];
2162:rtos/uC-USB-Device/Source/usbd_ep.c ****     ep_phy_nbr = USBD_EP_ADDR_TO_PHY(USBD_EP_ADDR_CTRL_IN);
2163:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_ep_in    = USBD_EP_TblPtrs[dev_nbr][ep_phy_nbr];
2164:rtos/uC-USB-Device/Source/usbd_ep.c **** 
2165:rtos/uC-USB-Device/Source/usbd_ep.c ****     if ((p_ep_out == (USBD_EP *)0) ||
2166:rtos/uC-USB-Device/Source/usbd_ep.c ****         (p_ep_in  == (USBD_EP *)0)) {
2167:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_EP_INVALID_ADDR;
2168:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
2169:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
2170:rtos/uC-USB-Device/Source/usbd_ep.c **** 
2171:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_OS_EP_LockAcquire(p_drv->DevNbr,
2172:rtos/uC-USB-Device/Source/usbd_ep.c ****                            p_ep_out->Ix,
2173:rtos/uC-USB-Device/Source/usbd_ep.c ****                            0u,
2174:rtos/uC-USB-Device/Source/usbd_ep.c ****                            p_err);
2175:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (*p_err != USBD_ERR_NONE) {
2176:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
2177:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
2178:rtos/uC-USB-Device/Source/usbd_ep.c **** 
2179:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_OS_EP_LockAcquire(p_drv->DevNbr,
2180:rtos/uC-USB-Device/Source/usbd_ep.c ****                            p_ep_in->Ix,
2181:rtos/uC-USB-Device/Source/usbd_ep.c ****                            0u,
2182:rtos/uC-USB-Device/Source/usbd_ep.c ****                            p_err);
2183:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (*p_err != USBD_ERR_NONE) {
2184:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_OS_EP_LockRelease(p_drv->DevNbr,
2185:rtos/uC-USB-Device/Source/usbd_ep.c ****                                p_ep_out->Ix);
2186:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
2187:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
2188:rtos/uC-USB-Device/Source/usbd_ep.c **** 
2189:rtos/uC-USB-Device/Source/usbd_ep.c ****     if ((p_ep_out->State == USBD_EP_STATE_OPEN) &&
2190:rtos/uC-USB-Device/Source/usbd_ep.c ****         (p_ep_in->State  == USBD_EP_STATE_OPEN)) {
2191:rtos/uC-USB-Device/Source/usbd_ep.c **** 
2192:rtos/uC-USB-Device/Source/usbd_ep.c ****         p_drv_api = p_drv->API_Ptr;                             /* Get dev drv API struct.         
2193:rtos/uC-USB-Device/Source/usbd_ep.c ****         stall_in = p_drv_api->EP_Stall(p_drv,
2194:rtos/uC-USB-Device/Source/usbd_ep.c ****                                        USBD_EP_ADDR_CTRL_IN,
2195:rtos/uC-USB-Device/Source/usbd_ep.c ****                                        DEF_SET);
2196:rtos/uC-USB-Device/Source/usbd_ep.c **** 
ARM GAS  /tmp/ccuUvpuw.s 			page 40


2197:rtos/uC-USB-Device/Source/usbd_ep.c ****         stall_out = p_drv_api->EP_Stall(p_drv,
2198:rtos/uC-USB-Device/Source/usbd_ep.c ****                                         USBD_EP_ADDR_CTRL_OUT,
2199:rtos/uC-USB-Device/Source/usbd_ep.c ****                                         DEF_SET);
2200:rtos/uC-USB-Device/Source/usbd_ep.c **** 
2201:rtos/uC-USB-Device/Source/usbd_ep.c ****         if ((stall_in  == DEF_FAIL) ||
2202:rtos/uC-USB-Device/Source/usbd_ep.c ****             (stall_out == DEF_FAIL)) {
2203:rtos/uC-USB-Device/Source/usbd_ep.c ****            *p_err = USBD_ERR_EP_STALL;
2204:rtos/uC-USB-Device/Source/usbd_ep.c ****         } else {
2205:rtos/uC-USB-Device/Source/usbd_ep.c ****            *p_err = USBD_ERR_NONE;
2206:rtos/uC-USB-Device/Source/usbd_ep.c ****         }
2207:rtos/uC-USB-Device/Source/usbd_ep.c **** 
2208:rtos/uC-USB-Device/Source/usbd_ep.c ****     } else {
2209:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_EP_INVALID_STATE;
2210:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
2211:rtos/uC-USB-Device/Source/usbd_ep.c **** 
2212:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_OS_EP_LockRelease(p_drv->DevNbr,
2213:rtos/uC-USB-Device/Source/usbd_ep.c ****                            p_ep_in->Ix);
2214:rtos/uC-USB-Device/Source/usbd_ep.c **** 
2215:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_OS_EP_LockRelease(p_drv->DevNbr,
2216:rtos/uC-USB-Device/Source/usbd_ep.c ****                            p_ep_out->Ix);
2217:rtos/uC-USB-Device/Source/usbd_ep.c **** }
2218:rtos/uC-USB-Device/Source/usbd_ep.c **** 
2219:rtos/uC-USB-Device/Source/usbd_ep.c **** 
2220:rtos/uC-USB-Device/Source/usbd_ep.c **** /*
2221:rtos/uC-USB-Device/Source/usbd_ep.c **** ***************************************************************************************************
2222:rtos/uC-USB-Device/Source/usbd_ep.c **** ***************************************************************************************************
2223:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                     GENERAL ENDPOINT FUNCTIONS
2224:rtos/uC-USB-Device/Source/usbd_ep.c **** ***************************************************************************************************
2225:rtos/uC-USB-Device/Source/usbd_ep.c **** ***************************************************************************************************
2226:rtos/uC-USB-Device/Source/usbd_ep.c **** */
2227:rtos/uC-USB-Device/Source/usbd_ep.c **** 
2228:rtos/uC-USB-Device/Source/usbd_ep.c **** /*
2229:rtos/uC-USB-Device/Source/usbd_ep.c **** ***************************************************************************************************
2230:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                           USBD_EP_Init()
2231:rtos/uC-USB-Device/Source/usbd_ep.c **** *
2232:rtos/uC-USB-Device/Source/usbd_ep.c **** * Description : Initialize endpoint structures.
2233:rtos/uC-USB-Device/Source/usbd_ep.c **** *
2234:rtos/uC-USB-Device/Source/usbd_ep.c **** * Argument(s) : none.
2235:rtos/uC-USB-Device/Source/usbd_ep.c **** *
2236:rtos/uC-USB-Device/Source/usbd_ep.c **** * Return(s)   : none.
2237:rtos/uC-USB-Device/Source/usbd_ep.c **** *
2238:rtos/uC-USB-Device/Source/usbd_ep.c **** * Note(s)     : none.
2239:rtos/uC-USB-Device/Source/usbd_ep.c **** ***************************************************************************************************
2240:rtos/uC-USB-Device/Source/usbd_ep.c **** */
2241:rtos/uC-USB-Device/Source/usbd_ep.c **** 
2242:rtos/uC-USB-Device/Source/usbd_ep.c **** void  USBD_EP_Init (void)
2243:rtos/uC-USB-Device/Source/usbd_ep.c **** {
2244:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_EP     *p_ep;
2245:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_URB    *p_urb;
2246:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_INT08U   ep_ix;
2247:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_INT08U   dev_nbr;
2248:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_INT16U   urb_ix;
2249:rtos/uC-USB-Device/Source/usbd_ep.c **** 
2250:rtos/uC-USB-Device/Source/usbd_ep.c **** 
2251:rtos/uC-USB-Device/Source/usbd_ep.c ****     for (dev_nbr = 0u; dev_nbr < USBD_CFG_MAX_NBR_DEV; dev_nbr++) {
2252:rtos/uC-USB-Device/Source/usbd_ep.c ****         for (ep_ix = 0u; ep_ix < USBD_EP_MAX_NBR; ep_ix++) {
2253:rtos/uC-USB-Device/Source/usbd_ep.c ****             if (ep_ix < USBD_CFG_MAX_NBR_EP_OPEN) {
ARM GAS  /tmp/ccuUvpuw.s 			page 41


2254:rtos/uC-USB-Device/Source/usbd_ep.c ****                 p_ep                = &USBD_EP_Tbl[dev_nbr][ep_ix];
2255:rtos/uC-USB-Device/Source/usbd_ep.c ****                 p_ep->Addr          =  USBD_EP_ADDR_NONE;
2256:rtos/uC-USB-Device/Source/usbd_ep.c ****                 p_ep->Attrib        =  DEF_BIT_NONE;
2257:rtos/uC-USB-Device/Source/usbd_ep.c ****                 p_ep->MaxPktSize    =  0u;
2258:rtos/uC-USB-Device/Source/usbd_ep.c ****                 p_ep->Interval      =  0u;
2259:rtos/uC-USB-Device/Source/usbd_ep.c ****                 p_ep->Ix            =  0u;
2260:rtos/uC-USB-Device/Source/usbd_ep.c **** #if (USBD_CFG_MAX_NBR_URB_EXTRA > 0u)
2261:rtos/uC-USB-Device/Source/usbd_ep.c ****                 p_ep->URB_MainAvail =  DEF_YES;
2262:rtos/uC-USB-Device/Source/usbd_ep.c **** #endif
2263:rtos/uC-USB-Device/Source/usbd_ep.c ****                 p_ep->URB_HeadPtr   = (USBD_URB *)0;
2264:rtos/uC-USB-Device/Source/usbd_ep.c ****                 p_ep->URB_TailPtr   = (USBD_URB *)0;
2265:rtos/uC-USB-Device/Source/usbd_ep.c **** 
2266:rtos/uC-USB-Device/Source/usbd_ep.c ****                 USBD_DBG_STATS_EP_RESET(dev_nbr, ep_ix);
2267:rtos/uC-USB-Device/Source/usbd_ep.c ****             }
2268:rtos/uC-USB-Device/Source/usbd_ep.c ****             USBD_EP_TblPtrs[dev_nbr][ep_ix] = (USBD_EP *)0;
2269:rtos/uC-USB-Device/Source/usbd_ep.c ****         }
2270:rtos/uC-USB-Device/Source/usbd_ep.c **** 
2271:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_URB_TblPtr[dev_nbr] = &USBD_URB_Tbl[dev_nbr][0];
2272:rtos/uC-USB-Device/Source/usbd_ep.c **** 
2273:rtos/uC-USB-Device/Source/usbd_ep.c ****         for (urb_ix = 0u; urb_ix < USBD_URB_MAX_NBR; urb_ix++) {
2274:rtos/uC-USB-Device/Source/usbd_ep.c ****             p_urb               = &USBD_URB_Tbl[dev_nbr][urb_ix];
2275:rtos/uC-USB-Device/Source/usbd_ep.c ****             p_urb->BufPtr       = (CPU_INT08U    *)0;
2276:rtos/uC-USB-Device/Source/usbd_ep.c ****             p_urb->BufLen       =  0u;
2277:rtos/uC-USB-Device/Source/usbd_ep.c ****             p_urb->XferLen      =  0u;
2278:rtos/uC-USB-Device/Source/usbd_ep.c ****             p_urb->NextXferLen  =  0u;
2279:rtos/uC-USB-Device/Source/usbd_ep.c ****             p_urb->Flags        =  0u;
2280:rtos/uC-USB-Device/Source/usbd_ep.c ****             p_urb->State        =  USBD_URB_STATE_IDLE;
2281:rtos/uC-USB-Device/Source/usbd_ep.c ****             p_urb->AsyncFnct    = (USBD_ASYNC_FNCT)0;
2282:rtos/uC-USB-Device/Source/usbd_ep.c ****             p_urb->AsyncFnctArg = (void          *)0;
2283:rtos/uC-USB-Device/Source/usbd_ep.c ****             p_urb->Err          =  USBD_ERR_NONE;
2284:rtos/uC-USB-Device/Source/usbd_ep.c ****             if (urb_ix < (USBD_URB_MAX_NBR - 1)) {
2285:rtos/uC-USB-Device/Source/usbd_ep.c ****                 p_urb->NextPtr  = &USBD_URB_Tbl[dev_nbr][urb_ix + 1];
2286:rtos/uC-USB-Device/Source/usbd_ep.c ****             } else {
2287:rtos/uC-USB-Device/Source/usbd_ep.c ****                 p_urb->NextPtr  = (USBD_URB      *)0;
2288:rtos/uC-USB-Device/Source/usbd_ep.c ****             }
2289:rtos/uC-USB-Device/Source/usbd_ep.c ****         }
2290:rtos/uC-USB-Device/Source/usbd_ep.c **** 
2291:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_EP_OpenCtr[dev_nbr]    = 0u;
2292:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_EP_OpenBitMap[dev_nbr] = DEF_INT_32_MASK;
2293:rtos/uC-USB-Device/Source/usbd_ep.c **** #if (USBD_CFG_MAX_NBR_URB_EXTRA > 0u)
2294:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_URB_ExtraCtr[dev_nbr]  = 0u;
2295:rtos/uC-USB-Device/Source/usbd_ep.c **** #endif
2296:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
2297:rtos/uC-USB-Device/Source/usbd_ep.c **** }
2298:rtos/uC-USB-Device/Source/usbd_ep.c **** 
2299:rtos/uC-USB-Device/Source/usbd_ep.c **** 
2300:rtos/uC-USB-Device/Source/usbd_ep.c **** /*
2301:rtos/uC-USB-Device/Source/usbd_ep.c **** ***************************************************************************************************
2302:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                      USBD_EP_XferAsyncProcess()
2303:rtos/uC-USB-Device/Source/usbd_ep.c **** *
2304:rtos/uC-USB-Device/Source/usbd_ep.c **** * Description : Read/write data asynchronously from/to non-control endpoints.
2305:rtos/uC-USB-Device/Source/usbd_ep.c **** *
2306:rtos/uC-USB-Device/Source/usbd_ep.c **** * Argument(s) : p_drv       Pointer to device driver structure.
2307:rtos/uC-USB-Device/Source/usbd_ep.c **** *               ----        Argument checked by caller.
2308:rtos/uC-USB-Device/Source/usbd_ep.c **** *
2309:rtos/uC-USB-Device/Source/usbd_ep.c **** *               ep_addr     Endpoint address.
2310:rtos/uC-USB-Device/Source/usbd_ep.c **** *
ARM GAS  /tmp/ccuUvpuw.s 			page 42


2311:rtos/uC-USB-Device/Source/usbd_ep.c **** *               xfer_err    Error code returned by the USB device driver.
2312:rtos/uC-USB-Device/Source/usbd_ep.c **** *
2313:rtos/uC-USB-Device/Source/usbd_ep.c **** * Return(s)   : none.
2314:rtos/uC-USB-Device/Source/usbd_ep.c **** *
2315:rtos/uC-USB-Device/Source/usbd_ep.c **** * Note(s)     : (1) A USB device driver can notify the core about the Tx transfer completion using
2316:rtos/uC-USB-Device/Source/usbd_ep.c **** *                   USBD_EP_TxCmpl() or USBD_EP_TxCmplExt(). The latter function allows to report a
2317:rtos/uC-USB-Device/Source/usbd_ep.c **** *                   specific error code whereas USBD_EP_TxCmpl() reports only a successful transfer
2318:rtos/uC-USB-Device/Source/usbd_ep.c **** *                   In the case of an asynchronous transfer, the error code reported by the USB dev
2319:rtos/uC-USB-Device/Source/usbd_ep.c **** *                   driver must be tested. In case of an error condition, the asynchronous transfer
2320:rtos/uC-USB-Device/Source/usbd_ep.c **** *                   is marked as completed and the associated callback is called by the core task.
2321:rtos/uC-USB-Device/Source/usbd_ep.c **** *
2322:rtos/uC-USB-Device/Source/usbd_ep.c **** *               (2) This condition covers also the case where the transfer length is multiple of th
2323:rtos/uC-USB-Device/Source/usbd_ep.c **** *                   maximum packet size. In that case, host sends a zero-length packet considered a
2324:rtos/uC-USB-Device/Source/usbd_ep.c **** *                   a short packet for the condition.
2325:rtos/uC-USB-Device/Source/usbd_ep.c **** ***************************************************************************************************
2326:rtos/uC-USB-Device/Source/usbd_ep.c **** */
2327:rtos/uC-USB-Device/Source/usbd_ep.c **** 
2328:rtos/uC-USB-Device/Source/usbd_ep.c **** void  USBD_EP_XferAsyncProcess (USBD_DRV    *p_drv,
2329:rtos/uC-USB-Device/Source/usbd_ep.c ****                                 CPU_INT08U   ep_addr,
2330:rtos/uC-USB-Device/Source/usbd_ep.c ****                                 USBD_ERR     xfer_err)
2331:rtos/uC-USB-Device/Source/usbd_ep.c **** {
2332:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_INT08U     ep_phy_nbr;
2333:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_EP       *p_ep;
2334:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DRV_API  *p_drv_api;
2335:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_BOOLEAN    ep_dir_in;
2336:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_ERR       local_err;
2337:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_URB      *p_urb;
2338:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_URB      *p_urb_cmpl;
2339:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_INT08U    *p_buf_cur;
2340:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_INT32U     xfer_len;
2341:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_INT32U     xfer_rem;
2342:rtos/uC-USB-Device/Source/usbd_ep.c **** 
2343:rtos/uC-USB-Device/Source/usbd_ep.c **** 
2344:rtos/uC-USB-Device/Source/usbd_ep.c ****     ep_phy_nbr = USBD_EP_ADDR_TO_PHY(ep_addr);
2345:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_ep       = USBD_EP_TblPtrs[p_drv->DevNbr][ep_phy_nbr];
2346:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_ep == (USBD_EP *)0) {
2347:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
2348:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
2349:rtos/uC-USB-Device/Source/usbd_ep.c **** 
2350:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_drv_api = p_drv->API_Ptr;
2351:rtos/uC-USB-Device/Source/usbd_ep.c ****     ep_dir_in = USBD_EP_IS_IN(p_ep->Addr);
2352:rtos/uC-USB-Device/Source/usbd_ep.c **** 
2353:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_OS_EP_LockAcquire(p_drv->DevNbr,
2354:rtos/uC-USB-Device/Source/usbd_ep.c ****                            p_ep->Ix,
2355:rtos/uC-USB-Device/Source/usbd_ep.c ****                            0u,
2356:rtos/uC-USB-Device/Source/usbd_ep.c ****                           &local_err);
2357:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (local_err != USBD_ERR_NONE) {
2358:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
2359:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
2360:rtos/uC-USB-Device/Source/usbd_ep.c **** 
2361:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_ep->XferState == USBD_XFER_STATE_NONE) {
2362:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_OS_EP_LockRelease(p_drv->DevNbr,
2363:rtos/uC-USB-Device/Source/usbd_ep.c ****                                p_ep->Ix);
2364:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
2365:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
2366:rtos/uC-USB-Device/Source/usbd_ep.c **** 
2367:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_urb = p_ep->URB_HeadPtr;
ARM GAS  /tmp/ccuUvpuw.s 			page 43


2368:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_urb == (USBD_URB *)0) {
2369:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_OS_EP_LockRelease(p_drv->DevNbr,
2370:rtos/uC-USB-Device/Source/usbd_ep.c ****                                p_ep->Ix);
2371:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_DBG_EP("USBD_EP_Process(): no URB to process", ep_addr);
2372:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
2373:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
2374:rtos/uC-USB-Device/Source/usbd_ep.c **** 
2375:rtos/uC-USB-Device/Source/usbd_ep.c ****     if ((p_urb->State == USBD_URB_STATE_IDLE) ||
2376:rtos/uC-USB-Device/Source/usbd_ep.c ****         (p_urb->State == USBD_URB_STATE_XFER_SYNC)) {
2377:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_OS_EP_LockRelease(p_drv->DevNbr,
2378:rtos/uC-USB-Device/Source/usbd_ep.c ****                                p_ep->Ix);
2379:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_DBG_EP("USBD_EP_Process(): incorrect URB state", ep_addr);
2380:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
2381:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
2382:rtos/uC-USB-Device/Source/usbd_ep.c **** 
2383:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_urb_cmpl = (USBD_URB *)0;
2384:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (xfer_err == USBD_ERR_NONE) {                            /* See Note #1.                    
2385:rtos/uC-USB-Device/Source/usbd_ep.c ****         xfer_rem   =  p_urb->BufLen - p_urb->XferLen;
2386:rtos/uC-USB-Device/Source/usbd_ep.c ****         p_buf_cur  = &p_urb->BufPtr[p_urb->XferLen];
2387:rtos/uC-USB-Device/Source/usbd_ep.c **** 
2388:rtos/uC-USB-Device/Source/usbd_ep.c ****         if (ep_dir_in == DEF_YES) {                             /* ------------------- IN TRANSFER 
2389:rtos/uC-USB-Device/Source/usbd_ep.c ****             if (xfer_rem > 0u) {                                /* Another transaction must be done
2390:rtos/uC-USB-Device/Source/usbd_ep.c ****                 USBD_EP_TxAsyncProcess(p_drv,
2391:rtos/uC-USB-Device/Source/usbd_ep.c ****                                        p_ep,
2392:rtos/uC-USB-Device/Source/usbd_ep.c ****                                        p_urb,
2393:rtos/uC-USB-Device/Source/usbd_ep.c ****                                        p_buf_cur,
2394:rtos/uC-USB-Device/Source/usbd_ep.c ****                                        xfer_rem,
2395:rtos/uC-USB-Device/Source/usbd_ep.c ****                                       &local_err);
2396:rtos/uC-USB-Device/Source/usbd_ep.c ****                 if (local_err != USBD_ERR_NONE) {
2397:rtos/uC-USB-Device/Source/usbd_ep.c ****                     p_urb_cmpl = USBD_URB_AsyncCmpl(p_ep, local_err);
2398:rtos/uC-USB-Device/Source/usbd_ep.c ****                 }
2399:rtos/uC-USB-Device/Source/usbd_ep.c ****             } else if ((DEF_BIT_IS_SET(p_urb->Flags, USBD_URB_FLAG_XFER_END) == DEF_YES) &&
2400:rtos/uC-USB-Device/Source/usbd_ep.c ****                        (p_urb->XferLen % p_ep->MaxPktSize                    == 0u)      &&
2401:rtos/uC-USB-Device/Source/usbd_ep.c ****                        (p_urb->XferLen                                       != 0u)) {
2402:rtos/uC-USB-Device/Source/usbd_ep.c ****                                                                 /* $$$$ This case should be tested 
2403:rtos/uC-USB-Device/Source/usbd_ep.c ****                                                                 /* Send ZLP if needed, at end of xf
2404:rtos/uC-USB-Device/Source/usbd_ep.c ****                 DEF_BIT_CLR(p_urb->Flags, USBD_URB_FLAG_XFER_END);
2405:rtos/uC-USB-Device/Source/usbd_ep.c **** 
2406:rtos/uC-USB-Device/Source/usbd_ep.c ****                 USBD_DBG_STATS_EP_INC(p_drv->DevNbr, p_ep->Ix, DrvTxZLP_Nbr);
2407:rtos/uC-USB-Device/Source/usbd_ep.c **** 
2408:rtos/uC-USB-Device/Source/usbd_ep.c ****                 p_drv_api->EP_TxZLP(p_drv, p_ep->Addr, &local_err);
2409:rtos/uC-USB-Device/Source/usbd_ep.c ****                 if (local_err != USBD_ERR_NONE) {
2410:rtos/uC-USB-Device/Source/usbd_ep.c ****                     p_urb_cmpl = USBD_URB_AsyncCmpl(p_ep, local_err);
2411:rtos/uC-USB-Device/Source/usbd_ep.c ****                 }
2412:rtos/uC-USB-Device/Source/usbd_ep.c ****                 USBD_DBG_STATS_EP_INC_IF_TRUE(p_drv->DevNbr, p_ep->Ix, DrvTxZLP_Nbr, (local_err == 
2413:rtos/uC-USB-Device/Source/usbd_ep.c ****             } else {                                            /* Xfer is completed.              
2414:rtos/uC-USB-Device/Source/usbd_ep.c ****                 p_urb_cmpl = USBD_URB_AsyncCmpl(p_ep, USBD_ERR_NONE);
2415:rtos/uC-USB-Device/Source/usbd_ep.c ****             }
2416:rtos/uC-USB-Device/Source/usbd_ep.c ****         } else {                                                /* ------------------- OUT TRANSFER
2417:rtos/uC-USB-Device/Source/usbd_ep.c ****             USBD_DBG_STATS_EP_INC(p_drv->DevNbr, p_ep->Ix, DrvRxNbr);
2418:rtos/uC-USB-Device/Source/usbd_ep.c **** 
2419:rtos/uC-USB-Device/Source/usbd_ep.c ****             xfer_len = p_drv_api->EP_Rx(p_drv,
2420:rtos/uC-USB-Device/Source/usbd_ep.c ****                                         p_ep->Addr,
2421:rtos/uC-USB-Device/Source/usbd_ep.c ****                                         p_buf_cur,
2422:rtos/uC-USB-Device/Source/usbd_ep.c ****                                         p_urb->NextXferLen,
2423:rtos/uC-USB-Device/Source/usbd_ep.c ****                                        &local_err);
2424:rtos/uC-USB-Device/Source/usbd_ep.c ****             if (local_err != USBD_ERR_NONE) {
ARM GAS  /tmp/ccuUvpuw.s 			page 44


2425:rtos/uC-USB-Device/Source/usbd_ep.c ****                 p_urb_cmpl = USBD_URB_AsyncCmpl(p_ep, local_err);
2426:rtos/uC-USB-Device/Source/usbd_ep.c ****             } else {
2427:rtos/uC-USB-Device/Source/usbd_ep.c ****                 USBD_DBG_STATS_EP_INC(p_drv->DevNbr, p_ep->Ix, DrvRxSuccessNbr);
2428:rtos/uC-USB-Device/Source/usbd_ep.c **** 
2429:rtos/uC-USB-Device/Source/usbd_ep.c ****                 p_urb->XferLen += xfer_len;
2430:rtos/uC-USB-Device/Source/usbd_ep.c **** 
2431:rtos/uC-USB-Device/Source/usbd_ep.c ****                 if ((xfer_len       == 0u)                 ||   /* Rx'd a ZLP.                     
2432:rtos/uC-USB-Device/Source/usbd_ep.c ****                     (xfer_len       <  p_urb->NextXferLen) ||   /* Rx'd a short pkt (see Note #2). 
2433:rtos/uC-USB-Device/Source/usbd_ep.c ****                     (p_urb->XferLen == p_urb->BufLen)) {        /* All bytes rx'd.                 
2434:rtos/uC-USB-Device/Source/usbd_ep.c ****                                                                 /* Xfer finished.                  
2435:rtos/uC-USB-Device/Source/usbd_ep.c ****                     p_urb_cmpl = USBD_URB_AsyncCmpl(p_ep, USBD_ERR_NONE);
2436:rtos/uC-USB-Device/Source/usbd_ep.c ****                 } else {
2437:rtos/uC-USB-Device/Source/usbd_ep.c ****                     p_buf_cur = &p_urb->BufPtr[p_urb->XferLen]; /* Xfer not finished.              
2438:rtos/uC-USB-Device/Source/usbd_ep.c ****                     xfer_len  =  p_urb->BufLen - p_urb->XferLen;
2439:rtos/uC-USB-Device/Source/usbd_ep.c **** 
2440:rtos/uC-USB-Device/Source/usbd_ep.c ****                     USBD_EP_RxStartAsyncProcess(p_drv,
2441:rtos/uC-USB-Device/Source/usbd_ep.c ****                                                 p_ep,
2442:rtos/uC-USB-Device/Source/usbd_ep.c ****                                                 p_urb,
2443:rtos/uC-USB-Device/Source/usbd_ep.c ****                                                 p_buf_cur,
2444:rtos/uC-USB-Device/Source/usbd_ep.c ****                                                 xfer_len,
2445:rtos/uC-USB-Device/Source/usbd_ep.c ****                                                &local_err);
2446:rtos/uC-USB-Device/Source/usbd_ep.c ****                     if (local_err != USBD_ERR_NONE) {
2447:rtos/uC-USB-Device/Source/usbd_ep.c ****                         p_urb_cmpl = USBD_URB_AsyncCmpl(p_ep, local_err);
2448:rtos/uC-USB-Device/Source/usbd_ep.c ****                     }
2449:rtos/uC-USB-Device/Source/usbd_ep.c ****                 }
2450:rtos/uC-USB-Device/Source/usbd_ep.c ****             }
2451:rtos/uC-USB-Device/Source/usbd_ep.c ****         }
2452:rtos/uC-USB-Device/Source/usbd_ep.c ****     } else {
2453:rtos/uC-USB-Device/Source/usbd_ep.c ****         p_urb_cmpl = USBD_URB_AsyncCmpl(p_ep, xfer_err);
2454:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
2455:rtos/uC-USB-Device/Source/usbd_ep.c **** 
2456:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_OS_EP_LockRelease(p_drv->DevNbr,
2457:rtos/uC-USB-Device/Source/usbd_ep.c ****                            p_ep->Ix);
2458:rtos/uC-USB-Device/Source/usbd_ep.c **** 
2459:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_urb_cmpl != (USBD_URB *)0) {
2460:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_URB_AsyncEnd(p_drv->DevNbr, p_ep, p_urb_cmpl);     /* Execute callback and free aborte
2461:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
2462:rtos/uC-USB-Device/Source/usbd_ep.c **** }
2463:rtos/uC-USB-Device/Source/usbd_ep.c **** 
2464:rtos/uC-USB-Device/Source/usbd_ep.c **** 
2465:rtos/uC-USB-Device/Source/usbd_ep.c **** /*
2466:rtos/uC-USB-Device/Source/usbd_ep.c **** ***************************************************************************************************
2467:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                           USBD_EP_Open()
2468:rtos/uC-USB-Device/Source/usbd_ep.c **** *
2469:rtos/uC-USB-Device/Source/usbd_ep.c **** * Description : Open non-control endpoint.
2470:rtos/uC-USB-Device/Source/usbd_ep.c **** *
2471:rtos/uC-USB-Device/Source/usbd_ep.c **** * Argument(s) : p_drv           Pointer to device driver structure.
2472:rtos/uC-USB-Device/Source/usbd_ep.c **** *
2473:rtos/uC-USB-Device/Source/usbd_ep.c **** *               ep_addr         Endpoint address.
2474:rtos/uC-USB-Device/Source/usbd_ep.c **** *
2475:rtos/uC-USB-Device/Source/usbd_ep.c **** *               max_pkt_size    Maximum packet size.
2476:rtos/uC-USB-Device/Source/usbd_ep.c **** *
2477:rtos/uC-USB-Device/Source/usbd_ep.c **** *               attrib          Endpoint attributes.
2478:rtos/uC-USB-Device/Source/usbd_ep.c **** *
2479:rtos/uC-USB-Device/Source/usbd_ep.c **** *               interval        Endpoint polling interval.
2480:rtos/uC-USB-Device/Source/usbd_ep.c **** *
2481:rtos/uC-USB-Device/Source/usbd_ep.c **** *               p_err           Pointer to variable that will receive return error code from this f
ARM GAS  /tmp/ccuUvpuw.s 			page 45


2482:rtos/uC-USB-Device/Source/usbd_ep.c **** *
2483:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                   USBD_ERR_NONE               Endpoint successfully opened.
2484:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                   USBD_ERR_NULL_PTR           Argument 'p_drv' passed a NULL poin
2485:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                   USBD_ERR_EP_INVALID_ADDR    Invalid endpoint address.
2486:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                   USBD_ERR_EP_NONE_AVAIL      Physical endpoint NOT available.
2487:rtos/uC-USB-Device/Source/usbd_ep.c **** *
2488:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                   - RETURNED BY USBD_OS_EP_SignalCreate() -
2489:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                   See USBD_OS_EP_SignalCreate() for additional return error codes
2490:rtos/uC-USB-Device/Source/usbd_ep.c **** *
2491:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                   - RETURNED BY USBD_OS_EP_LockAcquire() -
2492:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                   See USBD_OS_EP_LockAcquire() for additional return error codes.
2493:rtos/uC-USB-Device/Source/usbd_ep.c **** *
2494:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                   - RETURNED BY 'p_drv_api->EP_Open()' -
2495:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                   See specific driver(s) 'p_drv_api->EP_Open()' for additional re
2496:rtos/uC-USB-Device/Source/usbd_ep.c **** *
2497:rtos/uC-USB-Device/Source/usbd_ep.c **** * Return(s)   : none.
2498:rtos/uC-USB-Device/Source/usbd_ep.c **** *
2499:rtos/uC-USB-Device/Source/usbd_ep.c **** * Note(s)     : none.
2500:rtos/uC-USB-Device/Source/usbd_ep.c **** ***************************************************************************************************
2501:rtos/uC-USB-Device/Source/usbd_ep.c **** */
2502:rtos/uC-USB-Device/Source/usbd_ep.c **** 
2503:rtos/uC-USB-Device/Source/usbd_ep.c **** void  USBD_EP_Open (USBD_DRV    *p_drv,
2504:rtos/uC-USB-Device/Source/usbd_ep.c ****                     CPU_INT08U   ep_addr,
2505:rtos/uC-USB-Device/Source/usbd_ep.c ****                     CPU_INT16U   max_pkt_size,
2506:rtos/uC-USB-Device/Source/usbd_ep.c ****                     CPU_INT08U   attrib,
2507:rtos/uC-USB-Device/Source/usbd_ep.c ****                     CPU_INT08U   interval,
2508:rtos/uC-USB-Device/Source/usbd_ep.c ****                     USBD_ERR    *p_err)
2509:rtos/uC-USB-Device/Source/usbd_ep.c **** {
2510:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DRV_API  *p_drv_api;
2511:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_EP       *p_ep;
2512:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_INT08U     ep_bit;
2513:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_INT08U     ep_ix;
2514:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_INT08U     ep_phy_nbr;
2515:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_INT08U     dev_nbr;
2516:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_INT08U     transaction_frame;
2517:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_SR_ALLOC();
2518:rtos/uC-USB-Device/Source/usbd_ep.c **** 
2519:rtos/uC-USB-Device/Source/usbd_ep.c **** 
2520:rtos/uC-USB-Device/Source/usbd_ep.c **** #if (USBD_CFG_ERR_ARG_CHK_EXT_EN == DEF_ENABLED)
2521:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_drv == (USBD_DRV *)0) {
2522:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_NULL_PTR;
2523:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
2524:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
2525:rtos/uC-USB-Device/Source/usbd_ep.c **** #endif
2526:rtos/uC-USB-Device/Source/usbd_ep.c **** 
2527:rtos/uC-USB-Device/Source/usbd_ep.c ****     dev_nbr    = p_drv->DevNbr;
2528:rtos/uC-USB-Device/Source/usbd_ep.c ****     ep_phy_nbr = USBD_EP_ADDR_TO_PHY(ep_addr);
2529:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_ep       = USBD_EP_TblPtrs[dev_nbr][ep_phy_nbr];
2530:rtos/uC-USB-Device/Source/usbd_ep.c **** 
2531:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_ep != (USBD_EP *)0) {
2532:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err =  USBD_ERR_EP_INVALID_ADDR;
2533:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
2534:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
2535:rtos/uC-USB-Device/Source/usbd_ep.c **** 
2536:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_CRITICAL_ENTER();
2537:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (USBD_EP_OpenCtr[dev_nbr] == USBD_CFG_MAX_NBR_EP_OPEN) {
2538:rtos/uC-USB-Device/Source/usbd_ep.c ****         CPU_CRITICAL_EXIT();
ARM GAS  /tmp/ccuUvpuw.s 			page 46


2539:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_EP_NONE_AVAIL;
2540:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
2541:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
2542:rtos/uC-USB-Device/Source/usbd_ep.c **** 
2543:rtos/uC-USB-Device/Source/usbd_ep.c ****     ep_bit = (CPU_INT08U)(USBD_EP_MAX_NBR - 1u - CPU_CntLeadZeros32(USBD_EP_OpenBitMap[dev_nbr]));
2544:rtos/uC-USB-Device/Source/usbd_ep.c ****     DEF_BIT_CLR(USBD_EP_OpenBitMap[dev_nbr], DEF_BIT32(ep_bit));
2545:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_EP_OpenCtr[dev_nbr]++;
2546:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_CRITICAL_EXIT();
2547:rtos/uC-USB-Device/Source/usbd_ep.c **** 
2548:rtos/uC-USB-Device/Source/usbd_ep.c ****     ep_ix = USBD_EP_MAX_NBR - 1u - ep_bit;
2549:rtos/uC-USB-Device/Source/usbd_ep.c **** 
2550:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_OS_EP_SignalCreate(p_drv->DevNbr, ep_ix, p_err);
2551:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (*p_err != USBD_ERR_NONE) {
2552:rtos/uC-USB-Device/Source/usbd_ep.c ****         goto end_clean;
2553:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
2554:rtos/uC-USB-Device/Source/usbd_ep.c **** 
2555:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_OS_EP_LockCreate(p_drv->DevNbr, ep_ix, p_err);
2556:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (*p_err != USBD_ERR_NONE) {
2557:rtos/uC-USB-Device/Source/usbd_ep.c ****         goto end_signal_clean;
2558:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
2559:rtos/uC-USB-Device/Source/usbd_ep.c **** 
2560:rtos/uC-USB-Device/Source/usbd_ep.c ****     transaction_frame  = (max_pkt_size >> 11u) & 0x3;
2561:rtos/uC-USB-Device/Source/usbd_ep.c ****     transaction_frame +=  1u;
2562:rtos/uC-USB-Device/Source/usbd_ep.c **** 
2563:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_drv_api = p_drv->API_Ptr;
2564:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_drv_api->EP_Open(p_drv,                                   /* Open EP in dev drv.             
2565:rtos/uC-USB-Device/Source/usbd_ep.c ****                        ep_addr,
2566:rtos/uC-USB-Device/Source/usbd_ep.c ****                        attrib & USBD_EP_TYPE_MASK,
2567:rtos/uC-USB-Device/Source/usbd_ep.c ****                        max_pkt_size & 0x7FF,                    /* Mask out transactions per microf
2568:rtos/uC-USB-Device/Source/usbd_ep.c ****                        transaction_frame,
2569:rtos/uC-USB-Device/Source/usbd_ep.c ****                        p_err);
2570:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (*p_err != USBD_ERR_NONE) {
2571:rtos/uC-USB-Device/Source/usbd_ep.c ****         goto end_lock_signal_clean;
2572:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
2573:rtos/uC-USB-Device/Source/usbd_ep.c **** 
2574:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_ep = &USBD_EP_Tbl[dev_nbr][ep_ix];
2575:rtos/uC-USB-Device/Source/usbd_ep.c **** 
2576:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_CRITICAL_ENTER();
2577:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_ep->Addr       = ep_addr;
2578:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_ep->Attrib     = attrib;
2579:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_ep->MaxPktSize = max_pkt_size;
2580:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_ep->Interval   = interval;
2581:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_ep->State      = USBD_EP_STATE_OPEN;
2582:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_ep->XferState  = USBD_XFER_STATE_NONE;
2583:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_ep->Ix         = ep_ix;
2584:rtos/uC-USB-Device/Source/usbd_ep.c **** 
2585:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_EP_TblPtrs[dev_nbr][ep_phy_nbr] = p_ep;
2586:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_CRITICAL_EXIT();
2587:rtos/uC-USB-Device/Source/usbd_ep.c **** 
2588:rtos/uC-USB-Device/Source/usbd_ep.c **** #if (USBD_CFG_DBG_STATS_EN == DEF_ENABLED)
2589:rtos/uC-USB-Device/Source/usbd_ep.c ****                                                                 /* Reset stats only if EP address c
2590:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (ep_addr != USBD_DBG_STATS_EP_GET(dev_nbr, ep_ix, Addr)) {
2591:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_DBG_STATS_EP_RESET(dev_nbr, ep_ix);
2592:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_DBG_STATS_EP_SET_ADDR(dev_nbr, ep_ix, ep_addr);
2593:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
2594:rtos/uC-USB-Device/Source/usbd_ep.c **** #endif
2595:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DBG_STATS_EP_INC(dev_nbr, ep_ix, EP_OpenNbr);
ARM GAS  /tmp/ccuUvpuw.s 			page 47


2596:rtos/uC-USB-Device/Source/usbd_ep.c **** 
2597:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DBG_EP("EP Open", ep_addr);
2598:rtos/uC-USB-Device/Source/usbd_ep.c **** 
2599:rtos/uC-USB-Device/Source/usbd_ep.c ****    *p_err = USBD_ERR_NONE;
2600:rtos/uC-USB-Device/Source/usbd_ep.c ****     return;
2601:rtos/uC-USB-Device/Source/usbd_ep.c **** 
2602:rtos/uC-USB-Device/Source/usbd_ep.c **** end_lock_signal_clean:
2603:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_OS_EP_LockDel(p_drv->DevNbr, ep_ix);
2604:rtos/uC-USB-Device/Source/usbd_ep.c **** 
2605:rtos/uC-USB-Device/Source/usbd_ep.c **** end_signal_clean:
2606:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_OS_EP_SignalDel(p_drv->DevNbr, ep_ix);
2607:rtos/uC-USB-Device/Source/usbd_ep.c **** 
2608:rtos/uC-USB-Device/Source/usbd_ep.c **** end_clean:
2609:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_CRITICAL_ENTER();
2610:rtos/uC-USB-Device/Source/usbd_ep.c ****     DEF_BIT_SET(USBD_EP_OpenBitMap[dev_nbr], DEF_BIT32(ep_bit));
2611:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_EP_OpenCtr[dev_nbr] -= 1u;
2612:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_CRITICAL_EXIT();
2613:rtos/uC-USB-Device/Source/usbd_ep.c **** 
2614:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DBG_EP_ERR("EP Open", ep_addr, *p_err);
2615:rtos/uC-USB-Device/Source/usbd_ep.c **** 
2616:rtos/uC-USB-Device/Source/usbd_ep.c ****     return;
2617:rtos/uC-USB-Device/Source/usbd_ep.c **** }
2618:rtos/uC-USB-Device/Source/usbd_ep.c **** 
2619:rtos/uC-USB-Device/Source/usbd_ep.c **** 
2620:rtos/uC-USB-Device/Source/usbd_ep.c **** /*
2621:rtos/uC-USB-Device/Source/usbd_ep.c **** ***************************************************************************************************
2622:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                       USBD_EP_MaxPktSizeGet()
2623:rtos/uC-USB-Device/Source/usbd_ep.c **** *
2624:rtos/uC-USB-Device/Source/usbd_ep.c **** * Description : Retrieve endpoint maximum packet size.
2625:rtos/uC-USB-Device/Source/usbd_ep.c **** *
2626:rtos/uC-USB-Device/Source/usbd_ep.c **** * Argument(s) : dev_nbr     Device number.
2627:rtos/uC-USB-Device/Source/usbd_ep.c **** *
2628:rtos/uC-USB-Device/Source/usbd_ep.c **** *               ep_addr     Endpoint address.
2629:rtos/uC-USB-Device/Source/usbd_ep.c **** *
2630:rtos/uC-USB-Device/Source/usbd_ep.c **** *               p_err       Pointer to variable that will receive return error code from this funct
2631:rtos/uC-USB-Device/Source/usbd_ep.c **** *
2632:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               USBD_ERR_NONE               Endpoint maximum packet size successful
2633:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               USBD_ERR_DEV_INVALID_NBR    Invalid device number.
2634:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               USBD_ERR_EP_INVALID_ADDR    Invalid endpoint address.
2635:rtos/uC-USB-Device/Source/usbd_ep.c **** *
2636:rtos/uC-USB-Device/Source/usbd_ep.c **** * Return(s)   : Maximum packet size, if NO error(s).
2637:rtos/uC-USB-Device/Source/usbd_ep.c **** *
2638:rtos/uC-USB-Device/Source/usbd_ep.c **** *               0,                   otherwise.
2639:rtos/uC-USB-Device/Source/usbd_ep.c **** *
2640:rtos/uC-USB-Device/Source/usbd_ep.c **** * Note(s)     : none.
2641:rtos/uC-USB-Device/Source/usbd_ep.c **** ***************************************************************************************************
2642:rtos/uC-USB-Device/Source/usbd_ep.c **** */
2643:rtos/uC-USB-Device/Source/usbd_ep.c **** 
2644:rtos/uC-USB-Device/Source/usbd_ep.c **** CPU_INT16U  USBD_EP_MaxPktSizeGet (CPU_INT08U   dev_nbr,
2645:rtos/uC-USB-Device/Source/usbd_ep.c ****                                    CPU_INT08U   ep_addr,
2646:rtos/uC-USB-Device/Source/usbd_ep.c ****                                    USBD_ERR    *p_err)
2647:rtos/uC-USB-Device/Source/usbd_ep.c **** {
2648:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_EP     *p_ep;
2649:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DRV    *p_drv;
2650:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_INT08U   ep_phy_nbr;
2651:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_INT16U   max_pkt_len;
2652:rtos/uC-USB-Device/Source/usbd_ep.c **** 
ARM GAS  /tmp/ccuUvpuw.s 			page 48


2653:rtos/uC-USB-Device/Source/usbd_ep.c **** 
2654:rtos/uC-USB-Device/Source/usbd_ep.c **** #if (USBD_CFG_ERR_ARG_CHK_EXT_EN == DEF_ENABLED)                /* ---------------- VALIDATE ARGUME
2655:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_err == (USBD_ERR *)0) {                               /* Validate error ptr.             
2656:rtos/uC-USB-Device/Source/usbd_ep.c ****         CPU_SW_EXCEPTION(0);
2657:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
2658:rtos/uC-USB-Device/Source/usbd_ep.c **** #endif
2659:rtos/uC-USB-Device/Source/usbd_ep.c **** 
2660:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_drv = USBD_DrvRefGet(dev_nbr);                            /* Get dev struct.                 
2661:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_drv == (USBD_DRV *)0) {
2662:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_DEV_INVALID_NBR;
2663:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (0u);
2664:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
2665:rtos/uC-USB-Device/Source/usbd_ep.c **** 
2666:rtos/uC-USB-Device/Source/usbd_ep.c ****     ep_phy_nbr = USBD_EP_ADDR_TO_PHY(ep_addr);
2667:rtos/uC-USB-Device/Source/usbd_ep.c **** 
2668:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_ep = USBD_EP_TblPtrs[dev_nbr][ep_phy_nbr];
2669:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_ep == (USBD_EP *)0) {
2670:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_EP_INVALID_ADDR;
2671:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (0u);
2672:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
2673:rtos/uC-USB-Device/Source/usbd_ep.c **** 
2674:rtos/uC-USB-Device/Source/usbd_ep.c ****     max_pkt_len = p_ep->MaxPktSize & 0x7FF;                     /* Mask out transactions per microf
2675:rtos/uC-USB-Device/Source/usbd_ep.c **** 
2676:rtos/uC-USB-Device/Source/usbd_ep.c ****     return (max_pkt_len);
2677:rtos/uC-USB-Device/Source/usbd_ep.c **** }
2678:rtos/uC-USB-Device/Source/usbd_ep.c **** 
2679:rtos/uC-USB-Device/Source/usbd_ep.c **** /*
2680:rtos/uC-USB-Device/Source/usbd_ep.c **** ***************************************************************************************************
2681:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                       USBD_EP_MaxNbrOpenGet()
2682:rtos/uC-USB-Device/Source/usbd_ep.c **** *
2683:rtos/uC-USB-Device/Source/usbd_ep.c **** * Description : Retrieve maximum number of opened endpoints.
2684:rtos/uC-USB-Device/Source/usbd_ep.c **** *
2685:rtos/uC-USB-Device/Source/usbd_ep.c **** * Argument(s) : dev_nbr     Device number.
2686:rtos/uC-USB-Device/Source/usbd_ep.c **** *
2687:rtos/uC-USB-Device/Source/usbd_ep.c **** * Return(s)   : Maximum number of opened endpoints, if NO error(s).
2688:rtos/uC-USB-Device/Source/usbd_ep.c **** *
2689:rtos/uC-USB-Device/Source/usbd_ep.c **** *               0,                                  otherwise.
2690:rtos/uC-USB-Device/Source/usbd_ep.c **** *
2691:rtos/uC-USB-Device/Source/usbd_ep.c **** * Note(s)     : none.
2692:rtos/uC-USB-Device/Source/usbd_ep.c **** ***************************************************************************************************
2693:rtos/uC-USB-Device/Source/usbd_ep.c **** */
2694:rtos/uC-USB-Device/Source/usbd_ep.c **** 
2695:rtos/uC-USB-Device/Source/usbd_ep.c **** CPU_INT08U  USBD_EP_MaxNbrOpenGet (CPU_INT08U  dev_nbr)
2696:rtos/uC-USB-Device/Source/usbd_ep.c **** {
2697:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DRV    *p_drv;
2698:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_INT08U   nbr_open;
2699:rtos/uC-USB-Device/Source/usbd_ep.c **** 
2700:rtos/uC-USB-Device/Source/usbd_ep.c **** 
2701:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_drv = USBD_DrvRefGet(dev_nbr);                            /* Get drv struct.                 
2702:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_drv == (USBD_DRV *)0) {
2703:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (0u);
2704:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
2705:rtos/uC-USB-Device/Source/usbd_ep.c **** 
2706:rtos/uC-USB-Device/Source/usbd_ep.c ****     nbr_open = USBD_EP_OpenCtr[dev_nbr];
2707:rtos/uC-USB-Device/Source/usbd_ep.c **** 
2708:rtos/uC-USB-Device/Source/usbd_ep.c ****     return (nbr_open);
2709:rtos/uC-USB-Device/Source/usbd_ep.c **** }
ARM GAS  /tmp/ccuUvpuw.s 			page 49


2710:rtos/uC-USB-Device/Source/usbd_ep.c **** 
2711:rtos/uC-USB-Device/Source/usbd_ep.c **** 
2712:rtos/uC-USB-Device/Source/usbd_ep.c **** /*
2713:rtos/uC-USB-Device/Source/usbd_ep.c **** ***************************************************************************************************
2714:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                           USBD_EP_Abort()
2715:rtos/uC-USB-Device/Source/usbd_ep.c **** *
2716:rtos/uC-USB-Device/Source/usbd_ep.c **** * Description : Abort I/O transfer on endpoint.
2717:rtos/uC-USB-Device/Source/usbd_ep.c **** *
2718:rtos/uC-USB-Device/Source/usbd_ep.c **** * Argument(s) : dev_nbr     Device number.
2719:rtos/uC-USB-Device/Source/usbd_ep.c **** *
2720:rtos/uC-USB-Device/Source/usbd_ep.c **** *               ep_addr     Endpoint address.
2721:rtos/uC-USB-Device/Source/usbd_ep.c **** *
2722:rtos/uC-USB-Device/Source/usbd_ep.c **** *               p_err       Pointer to variable that will receive return error code from this funct
2723:rtos/uC-USB-Device/Source/usbd_ep.c **** *
2724:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               USBD_ERR_NONE               Transfer successfully aborted.
2725:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               USBD_ERR_DEV_INVALID_NBR    Invalid device number.
2726:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               USBD_ERR_EP_INVALID_ADDR    Invalid endpoint address.
2727:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               USBD_ERR_EP_INVALID_STATE   Invalid endpoint state.
2728:rtos/uC-USB-Device/Source/usbd_ep.c **** *
2729:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               - RETURNED BY USBD_OS_EP_LockAcquire() -
2730:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               See USBD_OS_EP_LockAcquire() for additional return error codes.
2731:rtos/uC-USB-Device/Source/usbd_ep.c **** *
2732:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               - RETURNED BY USBD_EP_URB_Abort() -
2733:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               See USBD_EP_URB_Abort() for additional return error codes.
2734:rtos/uC-USB-Device/Source/usbd_ep.c **** *
2735:rtos/uC-USB-Device/Source/usbd_ep.c **** * Return(s)   : none.
2736:rtos/uC-USB-Device/Source/usbd_ep.c **** *
2737:rtos/uC-USB-Device/Source/usbd_ep.c **** * Note(s)     : none.
2738:rtos/uC-USB-Device/Source/usbd_ep.c **** ***************************************************************************************************
2739:rtos/uC-USB-Device/Source/usbd_ep.c **** */
2740:rtos/uC-USB-Device/Source/usbd_ep.c **** 
2741:rtos/uC-USB-Device/Source/usbd_ep.c **** void  USBD_EP_Abort (CPU_INT08U   dev_nbr,
2742:rtos/uC-USB-Device/Source/usbd_ep.c ****                      CPU_INT08U   ep_addr,
2743:rtos/uC-USB-Device/Source/usbd_ep.c ****                      USBD_ERR    *p_err)
2744:rtos/uC-USB-Device/Source/usbd_ep.c **** {
2745:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_EP     *p_ep;
2746:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DRV    *p_drv;
2747:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_INT08U   ep_phy_nbr;
2748:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_URB    *p_urb_head_aborted;
2749:rtos/uC-USB-Device/Source/usbd_ep.c **** 
2750:rtos/uC-USB-Device/Source/usbd_ep.c **** 
2751:rtos/uC-USB-Device/Source/usbd_ep.c **** #if (USBD_CFG_ERR_ARG_CHK_EXT_EN == DEF_ENABLED)                /* ---------------- VALIDATE ARGUME
2752:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_err == (USBD_ERR *)0) {                               /* Validate error ptr.             
2753:rtos/uC-USB-Device/Source/usbd_ep.c ****         CPU_SW_EXCEPTION(;);
2754:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
2755:rtos/uC-USB-Device/Source/usbd_ep.c **** #endif
2756:rtos/uC-USB-Device/Source/usbd_ep.c **** 
2757:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_drv = USBD_DrvRefGet(dev_nbr);                            /* Get dev struct.                 
2758:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_drv == (USBD_DRV *)0) {
2759:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_DEV_INVALID_NBR;
2760:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
2761:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
2762:rtos/uC-USB-Device/Source/usbd_ep.c **** 
2763:rtos/uC-USB-Device/Source/usbd_ep.c ****     ep_phy_nbr = USBD_EP_ADDR_TO_PHY(ep_addr);
2764:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_ep       = USBD_EP_TblPtrs[dev_nbr][ep_phy_nbr];
2765:rtos/uC-USB-Device/Source/usbd_ep.c **** 
2766:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_ep == (USBD_EP *)0) {
ARM GAS  /tmp/ccuUvpuw.s 			page 50


2767:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_EP_INVALID_ADDR;
2768:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
2769:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
2770:rtos/uC-USB-Device/Source/usbd_ep.c **** 
2771:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_OS_EP_LockAcquire(p_drv->DevNbr,
2772:rtos/uC-USB-Device/Source/usbd_ep.c ****                            p_ep->Ix,
2773:rtos/uC-USB-Device/Source/usbd_ep.c ****                            0u,
2774:rtos/uC-USB-Device/Source/usbd_ep.c ****                            p_err);
2775:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (*p_err != USBD_ERR_NONE) {
2776:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
2777:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
2778:rtos/uC-USB-Device/Source/usbd_ep.c **** 
2779:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DBG_STATS_EP_INC(dev_nbr, p_ep->Ix, EP_AbortExecNbr);
2780:rtos/uC-USB-Device/Source/usbd_ep.c **** 
2781:rtos/uC-USB-Device/Source/usbd_ep.c ****     if ((p_ep->State != USBD_EP_STATE_OPEN) &&
2782:rtos/uC-USB-Device/Source/usbd_ep.c ****         (p_ep->State != USBD_EP_STATE_STALL)) {
2783:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_OS_EP_LockRelease(p_drv->DevNbr,
2784:rtos/uC-USB-Device/Source/usbd_ep.c ****                                p_ep->Ix);
2785:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_EP_INVALID_STATE;
2786:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
2787:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
2788:rtos/uC-USB-Device/Source/usbd_ep.c **** 
2789:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_urb_head_aborted = USBD_EP_URB_Abort(p_drv,               /* Abort xfers in progress, keep pt
2790:rtos/uC-USB-Device/Source/usbd_ep.c ****                                            p_ep,
2791:rtos/uC-USB-Device/Source/usbd_ep.c ****                                            p_err);
2792:rtos/uC-USB-Device/Source/usbd_ep.c **** 
2793:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DBG_STATS_EP_INC_IF_TRUE(dev_nbr, p_ep->Ix, EP_AbortSuccessNbr, (*p_err == USBD_ERR_NONE))
2794:rtos/uC-USB-Device/Source/usbd_ep.c **** 
2795:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_OS_EP_LockRelease(p_drv->DevNbr,
2796:rtos/uC-USB-Device/Source/usbd_ep.c ****                            p_ep->Ix);
2797:rtos/uC-USB-Device/Source/usbd_ep.c **** 
2798:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_urb_head_aborted != (USBD_URB *)0) {
2799:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_URB_AsyncEnd(dev_nbr, p_ep, p_urb_head_aborted);   /* Execute callback and free aborte
2800:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
2801:rtos/uC-USB-Device/Source/usbd_ep.c **** }
2802:rtos/uC-USB-Device/Source/usbd_ep.c **** 
2803:rtos/uC-USB-Device/Source/usbd_ep.c **** 
2804:rtos/uC-USB-Device/Source/usbd_ep.c **** /*
2805:rtos/uC-USB-Device/Source/usbd_ep.c **** ***************************************************************************************************
2806:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                           USBD_EP_Close()
2807:rtos/uC-USB-Device/Source/usbd_ep.c **** *
2808:rtos/uC-USB-Device/Source/usbd_ep.c **** * Description : Close non-control endpoint.
2809:rtos/uC-USB-Device/Source/usbd_ep.c **** *
2810:rtos/uC-USB-Device/Source/usbd_ep.c **** * Argument(s) : p_drv       Pointer to device driver structure.
2811:rtos/uC-USB-Device/Source/usbd_ep.c **** *
2812:rtos/uC-USB-Device/Source/usbd_ep.c **** *               ep_addr     Endpoint address.
2813:rtos/uC-USB-Device/Source/usbd_ep.c **** *
2814:rtos/uC-USB-Device/Source/usbd_ep.c **** *               p_err       Pointer to variable that will receive return error code from this funct
2815:rtos/uC-USB-Device/Source/usbd_ep.c **** *
2816:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               USBD_ERR_NONE               Endpoint successfully closed.
2817:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               USBD_ERR_NULL_PTR           Argument 'p_drv' passed a NULL pointer.
2818:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               USBD_ERR_EP_INVALID_ADDR    Invalid endpoint address.
2819:rtos/uC-USB-Device/Source/usbd_ep.c **** *
2820:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               - RETURNED BY USBD_OS_EP_LockAcquire() -
2821:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               See USBD_OS_EP_LockAcquire() for additional return error codes.
2822:rtos/uC-USB-Device/Source/usbd_ep.c **** *
2823:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               - RETURNED BY USBD_EP_URB_Abort() -
ARM GAS  /tmp/ccuUvpuw.s 			page 51


2824:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               See USBD_EP_URB_Abort() for additional return error codes.
2825:rtos/uC-USB-Device/Source/usbd_ep.c **** *
2826:rtos/uC-USB-Device/Source/usbd_ep.c **** * Return(s)   : none.
2827:rtos/uC-USB-Device/Source/usbd_ep.c **** *
2828:rtos/uC-USB-Device/Source/usbd_ep.c **** * Note(s)     : none.
2829:rtos/uC-USB-Device/Source/usbd_ep.c **** ***************************************************************************************************
2830:rtos/uC-USB-Device/Source/usbd_ep.c **** */
2831:rtos/uC-USB-Device/Source/usbd_ep.c **** 
2832:rtos/uC-USB-Device/Source/usbd_ep.c **** void  USBD_EP_Close (USBD_DRV    *p_drv,
2833:rtos/uC-USB-Device/Source/usbd_ep.c ****                      CPU_INT08U   ep_addr,
2834:rtos/uC-USB-Device/Source/usbd_ep.c ****                      USBD_ERR    *p_err)
2835:rtos/uC-USB-Device/Source/usbd_ep.c **** {
2836:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_EP     *p_ep;
2837:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_INT08U   dev_nbr;
2838:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_INT08U   ep_bit;
2839:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_INT08U   ep_phy_nbr;
2840:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_URB    *p_urb_head_aborted;
2841:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_SR_ALLOC();
2842:rtos/uC-USB-Device/Source/usbd_ep.c **** 
2843:rtos/uC-USB-Device/Source/usbd_ep.c **** 
2844:rtos/uC-USB-Device/Source/usbd_ep.c **** #if (USBD_CFG_ERR_ARG_CHK_EXT_EN == DEF_ENABLED)
2845:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_drv == (USBD_DRV *)0) {
2846:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_NULL_PTR;
2847:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
2848:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
2849:rtos/uC-USB-Device/Source/usbd_ep.c **** #endif
2850:rtos/uC-USB-Device/Source/usbd_ep.c **** 
2851:rtos/uC-USB-Device/Source/usbd_ep.c ****     dev_nbr    = p_drv->DevNbr;
2852:rtos/uC-USB-Device/Source/usbd_ep.c ****     ep_phy_nbr = USBD_EP_ADDR_TO_PHY(ep_addr);
2853:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_ep       = USBD_EP_TblPtrs[dev_nbr][ep_phy_nbr];
2854:rtos/uC-USB-Device/Source/usbd_ep.c **** 
2855:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_ep == (USBD_EP *)0) {
2856:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err =  USBD_ERR_EP_INVALID_ADDR;
2857:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
2858:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
2859:rtos/uC-USB-Device/Source/usbd_ep.c **** 
2860:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_OS_EP_LockAcquire(p_drv->DevNbr,
2861:rtos/uC-USB-Device/Source/usbd_ep.c ****                            p_ep->Ix,
2862:rtos/uC-USB-Device/Source/usbd_ep.c ****                            0u,
2863:rtos/uC-USB-Device/Source/usbd_ep.c ****                            p_err);
2864:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (*p_err != USBD_ERR_NONE) {
2865:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
2866:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
2867:rtos/uC-USB-Device/Source/usbd_ep.c **** 
2868:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_ep->State == USBD_EP_STATE_CLOSE) {
2869:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_OS_EP_LockRelease(p_drv->DevNbr,
2870:rtos/uC-USB-Device/Source/usbd_ep.c ****                                p_ep->Ix);
2871:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_NONE;
2872:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
2873:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
2874:rtos/uC-USB-Device/Source/usbd_ep.c **** 
2875:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DBG_STATS_EP_INC(dev_nbr, p_ep->Ix, EP_CloseExecNbr);
2876:rtos/uC-USB-Device/Source/usbd_ep.c **** 
2877:rtos/uC-USB-Device/Source/usbd_ep.c ****     ep_bit = USBD_EP_MAX_NBR - 1u - p_ep->Ix;
2878:rtos/uC-USB-Device/Source/usbd_ep.c **** 
2879:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_urb_head_aborted = USBD_EP_URB_Abort(p_drv,               /* Abort xfers in progress, keep pt
2880:rtos/uC-USB-Device/Source/usbd_ep.c ****                                            p_ep,
ARM GAS  /tmp/ccuUvpuw.s 			page 52


2881:rtos/uC-USB-Device/Source/usbd_ep.c ****                                            p_err);
2882:rtos/uC-USB-Device/Source/usbd_ep.c **** 
2883:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_ep->State = USBD_EP_STATE_CLOSE;
2884:rtos/uC-USB-Device/Source/usbd_ep.c **** 
2885:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_CRITICAL_ENTER();
2886:rtos/uC-USB-Device/Source/usbd_ep.c ****     DEF_BIT_SET(USBD_EP_OpenBitMap[dev_nbr], DEF_BIT32(ep_bit));
2887:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_EP_OpenCtr[dev_nbr]--;
2888:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_CRITICAL_EXIT();
2889:rtos/uC-USB-Device/Source/usbd_ep.c **** 
2890:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_drv->API_Ptr->EP_Close(p_drv, ep_addr);
2891:rtos/uC-USB-Device/Source/usbd_ep.c **** 
2892:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_ep->XferState = USBD_XFER_STATE_NONE;
2893:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_EP_TblPtrs[dev_nbr][ep_phy_nbr] = (USBD_EP *)0;
2894:rtos/uC-USB-Device/Source/usbd_ep.c **** 
2895:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DBG_STATS_EP_INC_IF_TRUE(dev_nbr, p_ep->Ix, EP_CloseSuccessNbr, (*p_err == USBD_ERR_NONE))
2896:rtos/uC-USB-Device/Source/usbd_ep.c **** 
2897:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_OS_EP_LockRelease(p_drv->DevNbr,
2898:rtos/uC-USB-Device/Source/usbd_ep.c ****                            p_ep->Ix);
2899:rtos/uC-USB-Device/Source/usbd_ep.c **** 
2900:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_OS_EP_SignalDel(p_drv->DevNbr, p_ep->Ix);
2901:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_OS_EP_LockDel  (p_drv->DevNbr, p_ep->Ix);
2902:rtos/uC-USB-Device/Source/usbd_ep.c **** 
2903:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_urb_head_aborted != (USBD_URB *)0) {
2904:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_URB_AsyncEnd(dev_nbr, p_ep, p_urb_head_aborted);   /* Execute callback and free aborte
2905:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
2906:rtos/uC-USB-Device/Source/usbd_ep.c **** }
2907:rtos/uC-USB-Device/Source/usbd_ep.c **** 
2908:rtos/uC-USB-Device/Source/usbd_ep.c **** 
2909:rtos/uC-USB-Device/Source/usbd_ep.c **** /*
2910:rtos/uC-USB-Device/Source/usbd_ep.c **** ***************************************************************************************************
2911:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                           USBD_EP_Stall()
2912:rtos/uC-USB-Device/Source/usbd_ep.c **** *
2913:rtos/uC-USB-Device/Source/usbd_ep.c **** * Description : Stall non-control endpoint.
2914:rtos/uC-USB-Device/Source/usbd_ep.c **** *
2915:rtos/uC-USB-Device/Source/usbd_ep.c **** * Argument(s) : dev_nbr     Device number.
2916:rtos/uC-USB-Device/Source/usbd_ep.c **** *
2917:rtos/uC-USB-Device/Source/usbd_ep.c **** *               ep_addr     Endpoint address.
2918:rtos/uC-USB-Device/Source/usbd_ep.c **** *
2919:rtos/uC-USB-Device/Source/usbd_ep.c **** *               state       Endpoint stall state.
2920:rtos/uC-USB-Device/Source/usbd_ep.c **** *
2921:rtos/uC-USB-Device/Source/usbd_ep.c **** *               p_err       Pointer to variable that will receive return error code from this funct
2922:rtos/uC-USB-Device/Source/usbd_ep.c **** *
2923:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               USBD_ERR_NONE               Endpoint successfully stalled.
2924:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               USBD_ERR_DEV_INVALID_NBR    Invalid device number.
2925:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               USBD_ERR_EP_INVALID_ADDR    Invalid endpoint address.
2926:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               USBD_ERR_EP_INVALID_STATE   Invalid endpoint state.
2927:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               USBD_ERR_EP_STALL           Device driver endpoint stall failed.
2928:rtos/uC-USB-Device/Source/usbd_ep.c **** *
2929:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               - RETURNED BY USBD_OS_EP_LockAcquire() -
2930:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               See USBD_OS_EP_LockAcquire() for additional return error codes.
2931:rtos/uC-USB-Device/Source/usbd_ep.c **** *
2932:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               - RETURNED BY USBD_EP_URB_Abort() -
2933:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               See USBD_EP_URB_Abort() for additional return error codes.
2934:rtos/uC-USB-Device/Source/usbd_ep.c **** *
2935:rtos/uC-USB-Device/Source/usbd_ep.c **** * Return(s)   : none.
2936:rtos/uC-USB-Device/Source/usbd_ep.c **** *
2937:rtos/uC-USB-Device/Source/usbd_ep.c **** * Note(s)     : None.
ARM GAS  /tmp/ccuUvpuw.s 			page 53


2938:rtos/uC-USB-Device/Source/usbd_ep.c **** ***************************************************************************************************
2939:rtos/uC-USB-Device/Source/usbd_ep.c **** */
2940:rtos/uC-USB-Device/Source/usbd_ep.c **** 
2941:rtos/uC-USB-Device/Source/usbd_ep.c **** void  USBD_EP_Stall (CPU_INT08U    dev_nbr,
2942:rtos/uC-USB-Device/Source/usbd_ep.c ****                      CPU_INT08U    ep_addr,
2943:rtos/uC-USB-Device/Source/usbd_ep.c ****                      CPU_BOOLEAN   state,
2944:rtos/uC-USB-Device/Source/usbd_ep.c ****                      USBD_ERR     *p_err)
2945:rtos/uC-USB-Device/Source/usbd_ep.c **** {
2946:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DRV     *p_drv;
2947:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_INT08U    ep_phy_nbr;
2948:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_EP      *p_ep;
2949:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_URB     *p_urb_head_aborted;
2950:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_BOOLEAN   valid;
2951:rtos/uC-USB-Device/Source/usbd_ep.c **** 
2952:rtos/uC-USB-Device/Source/usbd_ep.c **** 
2953:rtos/uC-USB-Device/Source/usbd_ep.c **** #if (USBD_CFG_ERR_ARG_CHK_EXT_EN == DEF_ENABLED)                /* ---------------- VALIDATE ARGUME
2954:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_err == (USBD_ERR *)0) {                               /* Validate error ptr.             
2955:rtos/uC-USB-Device/Source/usbd_ep.c ****         CPU_SW_EXCEPTION(;);
2956:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
2957:rtos/uC-USB-Device/Source/usbd_ep.c **** #endif
2958:rtos/uC-USB-Device/Source/usbd_ep.c **** 
2959:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_drv = USBD_DrvRefGet(dev_nbr);                            /* Get dev struct.                 
2960:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_drv == (USBD_DRV *)0) {
2961:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_DEV_INVALID_NBR;
2962:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
2963:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
2964:rtos/uC-USB-Device/Source/usbd_ep.c **** 
2965:rtos/uC-USB-Device/Source/usbd_ep.c ****     ep_phy_nbr = USBD_EP_ADDR_TO_PHY(ep_addr);
2966:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_ep       = USBD_EP_TblPtrs[dev_nbr][ep_phy_nbr];
2967:rtos/uC-USB-Device/Source/usbd_ep.c **** 
2968:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_ep == (USBD_EP *)0) {
2969:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_EP_INVALID_ADDR;
2970:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
2971:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
2972:rtos/uC-USB-Device/Source/usbd_ep.c **** 
2973:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_OS_EP_LockAcquire(p_drv->DevNbr,
2974:rtos/uC-USB-Device/Source/usbd_ep.c ****                            p_ep->Ix,
2975:rtos/uC-USB-Device/Source/usbd_ep.c ****                            0u,
2976:rtos/uC-USB-Device/Source/usbd_ep.c ****                            p_err);
2977:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (*p_err != USBD_ERR_NONE) {
2978:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
2979:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
2980:rtos/uC-USB-Device/Source/usbd_ep.c **** 
2981:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_urb_head_aborted = (USBD_URB *)0;
2982:rtos/uC-USB-Device/Source/usbd_ep.c **** 
2983:rtos/uC-USB-Device/Source/usbd_ep.c ****     switch (p_ep->State) {
2984:rtos/uC-USB-Device/Source/usbd_ep.c ****         case USBD_EP_STATE_OPEN:
2985:rtos/uC-USB-Device/Source/usbd_ep.c ****              if (state == DEF_SET) {
2986:rtos/uC-USB-Device/Source/usbd_ep.c ****                  p_urb_head_aborted = USBD_EP_URB_Abort(p_drv,  /* Abort xfers in progress, keep pt
2987:rtos/uC-USB-Device/Source/usbd_ep.c ****                                                         p_ep,
2988:rtos/uC-USB-Device/Source/usbd_ep.c ****                                                         p_err);
2989:rtos/uC-USB-Device/Source/usbd_ep.c ****                  if (*p_err != USBD_ERR_NONE) {
2990:rtos/uC-USB-Device/Source/usbd_ep.c ****                      break;
2991:rtos/uC-USB-Device/Source/usbd_ep.c ****                  }
2992:rtos/uC-USB-Device/Source/usbd_ep.c ****                  p_ep->State = USBD_EP_STATE_STALL;
2993:rtos/uC-USB-Device/Source/usbd_ep.c ****              }
2994:rtos/uC-USB-Device/Source/usbd_ep.c **** 
ARM GAS  /tmp/ccuUvpuw.s 			page 54


2995:rtos/uC-USB-Device/Source/usbd_ep.c ****              valid = p_drv->API_Ptr->EP_Stall(p_drv, p_ep->Addr, state);
2996:rtos/uC-USB-Device/Source/usbd_ep.c ****              if (valid == DEF_FAIL) {
2997:rtos/uC-USB-Device/Source/usbd_ep.c ****                 *p_err = USBD_ERR_EP_STALL;
2998:rtos/uC-USB-Device/Source/usbd_ep.c ****              } else {
2999:rtos/uC-USB-Device/Source/usbd_ep.c ****                 *p_err = USBD_ERR_NONE;
3000:rtos/uC-USB-Device/Source/usbd_ep.c ****              }
3001:rtos/uC-USB-Device/Source/usbd_ep.c ****              break;
3002:rtos/uC-USB-Device/Source/usbd_ep.c **** 
3003:rtos/uC-USB-Device/Source/usbd_ep.c **** 
3004:rtos/uC-USB-Device/Source/usbd_ep.c ****         case USBD_EP_STATE_STALL:
3005:rtos/uC-USB-Device/Source/usbd_ep.c ****              if (state == DEF_CLR) {
3006:rtos/uC-USB-Device/Source/usbd_ep.c **** 
3007:rtos/uC-USB-Device/Source/usbd_ep.c ****                  valid = p_drv->API_Ptr->EP_Stall(p_drv, p_ep->Addr, DEF_CLR);
3008:rtos/uC-USB-Device/Source/usbd_ep.c ****                  if (valid == DEF_FAIL) {
3009:rtos/uC-USB-Device/Source/usbd_ep.c ****                     *p_err = USBD_ERR_EP_STALL;
3010:rtos/uC-USB-Device/Source/usbd_ep.c ****                  } else {
3011:rtos/uC-USB-Device/Source/usbd_ep.c ****                      p_ep->State = USBD_EP_STATE_OPEN;
3012:rtos/uC-USB-Device/Source/usbd_ep.c ****                     *p_err = USBD_ERR_NONE;
3013:rtos/uC-USB-Device/Source/usbd_ep.c ****                  }
3014:rtos/uC-USB-Device/Source/usbd_ep.c ****              }
3015:rtos/uC-USB-Device/Source/usbd_ep.c ****              break;
3016:rtos/uC-USB-Device/Source/usbd_ep.c **** 
3017:rtos/uC-USB-Device/Source/usbd_ep.c **** 
3018:rtos/uC-USB-Device/Source/usbd_ep.c ****         case USBD_EP_STATE_CLOSE:
3019:rtos/uC-USB-Device/Source/usbd_ep.c ****         default:
3020:rtos/uC-USB-Device/Source/usbd_ep.c ****             *p_err = USBD_ERR_EP_INVALID_STATE;
3021:rtos/uC-USB-Device/Source/usbd_ep.c ****              break;
3022:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
3023:rtos/uC-USB-Device/Source/usbd_ep.c **** 
3024:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_OS_EP_LockRelease(p_drv->DevNbr,
3025:rtos/uC-USB-Device/Source/usbd_ep.c ****                            p_ep->Ix);
3026:rtos/uC-USB-Device/Source/usbd_ep.c **** 
3027:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_urb_head_aborted != (USBD_URB *)0) {
3028:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_URB_AsyncEnd(dev_nbr, p_ep, p_urb_head_aborted);   /* Execute callback and free aborte
3029:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
3030:rtos/uC-USB-Device/Source/usbd_ep.c **** }
3031:rtos/uC-USB-Device/Source/usbd_ep.c **** 
3032:rtos/uC-USB-Device/Source/usbd_ep.c **** 
3033:rtos/uC-USB-Device/Source/usbd_ep.c **** /*
3034:rtos/uC-USB-Device/Source/usbd_ep.c **** ***************************************************************************************************
3035:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                         USBD_EP_IsStalled()
3036:rtos/uC-USB-Device/Source/usbd_ep.c **** *
3037:rtos/uC-USB-Device/Source/usbd_ep.c **** * Description : Get stall status of non-control endpoint.
3038:rtos/uC-USB-Device/Source/usbd_ep.c **** *
3039:rtos/uC-USB-Device/Source/usbd_ep.c **** * Argument(s) : dev_nbr     Device number.
3040:rtos/uC-USB-Device/Source/usbd_ep.c **** *
3041:rtos/uC-USB-Device/Source/usbd_ep.c **** *               ep_addr     Endpoint address.
3042:rtos/uC-USB-Device/Source/usbd_ep.c **** *
3043:rtos/uC-USB-Device/Source/usbd_ep.c **** *               p_err       Pointer to variable that will receive return error code from this funct
3044:rtos/uC-USB-Device/Source/usbd_ep.c **** *
3045:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               USBD_ERR_NONE               Stall state successfully retrieved.
3046:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               USBD_ERR_DEV_INVALID_NBR    Invalid device number.
3047:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               USBD_ERR_EP_INVALID_ADDR    Invalid endpoint address.
3048:rtos/uC-USB-Device/Source/usbd_ep.c **** *
3049:rtos/uC-USB-Device/Source/usbd_ep.c **** * Return(s)   : DEF_TRUE,  if endpoint is stalled.
3050:rtos/uC-USB-Device/Source/usbd_ep.c **** *
3051:rtos/uC-USB-Device/Source/usbd_ep.c **** *               DEF_FALSE, otherwise.
ARM GAS  /tmp/ccuUvpuw.s 			page 55


3052:rtos/uC-USB-Device/Source/usbd_ep.c **** *
3053:rtos/uC-USB-Device/Source/usbd_ep.c **** * Note(s)     : none.
3054:rtos/uC-USB-Device/Source/usbd_ep.c **** ***************************************************************************************************
3055:rtos/uC-USB-Device/Source/usbd_ep.c **** */
3056:rtos/uC-USB-Device/Source/usbd_ep.c **** 
3057:rtos/uC-USB-Device/Source/usbd_ep.c **** CPU_BOOLEAN  USBD_EP_IsStalled (CPU_INT08U   dev_nbr,
3058:rtos/uC-USB-Device/Source/usbd_ep.c ****                                 CPU_INT08U   ep_addr,
3059:rtos/uC-USB-Device/Source/usbd_ep.c ****                                 USBD_ERR    *p_err)
3060:rtos/uC-USB-Device/Source/usbd_ep.c **** {
3061:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DRV    *p_drv;
3062:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_EP     *p_ep;
3063:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_INT08U   ep_phy_nbr;
3064:rtos/uC-USB-Device/Source/usbd_ep.c **** 
3065:rtos/uC-USB-Device/Source/usbd_ep.c **** 
3066:rtos/uC-USB-Device/Source/usbd_ep.c **** #if (USBD_CFG_ERR_ARG_CHK_EXT_EN == DEF_ENABLED)                /* ---------------- VALIDATE ARGUME
3067:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_err == (USBD_ERR *)0) {                               /* Validate error ptr.             
3068:rtos/uC-USB-Device/Source/usbd_ep.c ****         CPU_SW_EXCEPTION(DEF_NO);
3069:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
3070:rtos/uC-USB-Device/Source/usbd_ep.c **** #endif
3071:rtos/uC-USB-Device/Source/usbd_ep.c **** 
3072:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_drv = USBD_DrvRefGet(dev_nbr);                            /* Get dev struct.                 
3073:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_drv == (USBD_DRV *)0) {
3074:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_DEV_INVALID_NBR;
3075:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (DEF_NO);
3076:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
3077:rtos/uC-USB-Device/Source/usbd_ep.c **** 
3078:rtos/uC-USB-Device/Source/usbd_ep.c ****     ep_phy_nbr = USBD_EP_ADDR_TO_PHY(ep_addr);
3079:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_ep       = USBD_EP_TblPtrs[dev_nbr][ep_phy_nbr];
3080:rtos/uC-USB-Device/Source/usbd_ep.c **** 
3081:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_ep == (USBD_EP *)0) {
3082:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_EP_INVALID_ADDR;
3083:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (DEF_NO);
3084:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
3085:rtos/uC-USB-Device/Source/usbd_ep.c **** 
3086:rtos/uC-USB-Device/Source/usbd_ep.c ****    *p_err = USBD_ERR_NONE;
3087:rtos/uC-USB-Device/Source/usbd_ep.c **** 
3088:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_ep->State == USBD_EP_STATE_STALL) {
3089:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (DEF_YES);
3090:rtos/uC-USB-Device/Source/usbd_ep.c ****     } else {
3091:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (DEF_NO);
3092:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
3093:rtos/uC-USB-Device/Source/usbd_ep.c **** }
3094:rtos/uC-USB-Device/Source/usbd_ep.c **** 
3095:rtos/uC-USB-Device/Source/usbd_ep.c **** 
3096:rtos/uC-USB-Device/Source/usbd_ep.c **** /*
3097:rtos/uC-USB-Device/Source/usbd_ep.c **** ***************************************************************************************************
3098:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                          USBD_EP_RxCmpl()
3099:rtos/uC-USB-Device/Source/usbd_ep.c **** *
3100:rtos/uC-USB-Device/Source/usbd_ep.c **** * Description : Notify USB stack that packet receive has completed.
3101:rtos/uC-USB-Device/Source/usbd_ep.c **** *
3102:rtos/uC-USB-Device/Source/usbd_ep.c **** * Argument(s) : p_drv       Pointer to device driver structure.
3103:rtos/uC-USB-Device/Source/usbd_ep.c **** *
3104:rtos/uC-USB-Device/Source/usbd_ep.c **** *               ep_log_nbr  Endpoint logical number.
3105:rtos/uC-USB-Device/Source/usbd_ep.c **** *
3106:rtos/uC-USB-Device/Source/usbd_ep.c **** * Return(s)   : none.
3107:rtos/uC-USB-Device/Source/usbd_ep.c **** *
3108:rtos/uC-USB-Device/Source/usbd_ep.c **** * Note(s)     : none.
ARM GAS  /tmp/ccuUvpuw.s 			page 56


3109:rtos/uC-USB-Device/Source/usbd_ep.c **** ***************************************************************************************************
3110:rtos/uC-USB-Device/Source/usbd_ep.c **** */
3111:rtos/uC-USB-Device/Source/usbd_ep.c **** 
3112:rtos/uC-USB-Device/Source/usbd_ep.c **** void  USBD_EP_RxCmpl (USBD_DRV    *p_drv,
3113:rtos/uC-USB-Device/Source/usbd_ep.c ****                       CPU_INT08U   ep_log_nbr)
3114:rtos/uC-USB-Device/Source/usbd_ep.c **** {
3115:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_EP     *p_ep;
3116:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_INT08U   ep_phy_nbr;
3117:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_ERR     err;
3118:rtos/uC-USB-Device/Source/usbd_ep.c **** 
3119:rtos/uC-USB-Device/Source/usbd_ep.c **** 
3120:rtos/uC-USB-Device/Source/usbd_ep.c **** #if (USBD_CFG_ERR_ARG_CHK_EXT_EN == DEF_ENABLED)
3121:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_drv == (USBD_DRV *)0) {
3122:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
3123:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
3124:rtos/uC-USB-Device/Source/usbd_ep.c **** #endif
3125:rtos/uC-USB-Device/Source/usbd_ep.c **** 
3126:rtos/uC-USB-Device/Source/usbd_ep.c ****     ep_phy_nbr = USBD_EP_ADDR_TO_PHY(USBD_EP_LOG_TO_ADDR_OUT(ep_log_nbr));
3127:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_ep       = USBD_EP_TblPtrs[p_drv->DevNbr][ep_phy_nbr];
3128:rtos/uC-USB-Device/Source/usbd_ep.c **** 
3129:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_ep == (USBD_EP *)0) {
3130:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_DBG_STATS_EP_INC(p_drv->DevNbr, p_ep->Ix, RxCmplErrNbr);
3131:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
3132:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
3133:rtos/uC-USB-Device/Source/usbd_ep.c **** 
3134:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DBG_STATS_EP_INC(p_drv->DevNbr, p_ep->Ix, RxCmplNbr);
3135:rtos/uC-USB-Device/Source/usbd_ep.c **** 
3136:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_ep->XferState == USBD_XFER_STATE_SYNC) {
3137:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_OS_EP_SignalPost(p_drv->DevNbr, p_ep->Ix, &err);
3138:rtos/uC-USB-Device/Source/usbd_ep.c ****     } else if ((p_ep->XferState == USBD_XFER_STATE_ASYNC) ||
3139:rtos/uC-USB-Device/Source/usbd_ep.c ****                (p_ep->XferState == USBD_XFER_STATE_ASYNC_PARTIAL)) {
3140:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_EventEP(p_drv, p_ep->Addr, USBD_ERR_NONE);
3141:rtos/uC-USB-Device/Source/usbd_ep.c ****     } else {
3142:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_DBG_STATS_EP_INC(p_drv->DevNbr, p_ep->Ix, RxCmplErrNbr);
3143:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_DBG_EP("USBD_EP_RxCmpl(): incorrect XferState", p_ep->Addr);
3144:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
3145:rtos/uC-USB-Device/Source/usbd_ep.c **** }
3146:rtos/uC-USB-Device/Source/usbd_ep.c **** 
3147:rtos/uC-USB-Device/Source/usbd_ep.c **** 
3148:rtos/uC-USB-Device/Source/usbd_ep.c **** /*
3149:rtos/uC-USB-Device/Source/usbd_ep.c **** ***************************************************************************************************
3150:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                          USBD_EP_TxCmpl()
3151:rtos/uC-USB-Device/Source/usbd_ep.c **** *
3152:rtos/uC-USB-Device/Source/usbd_ep.c **** * Description : Notify USB stack that packet transmit has completed.
3153:rtos/uC-USB-Device/Source/usbd_ep.c **** *
3154:rtos/uC-USB-Device/Source/usbd_ep.c **** * Argument(s) : p_drv       Pointer to device driver structure.
3155:rtos/uC-USB-Device/Source/usbd_ep.c **** *
3156:rtos/uC-USB-Device/Source/usbd_ep.c **** *               ep_log_nbr  Endpoint logical number.
3157:rtos/uC-USB-Device/Source/usbd_ep.c **** *
3158:rtos/uC-USB-Device/Source/usbd_ep.c **** * Return(s)   : none.
3159:rtos/uC-USB-Device/Source/usbd_ep.c **** *
3160:rtos/uC-USB-Device/Source/usbd_ep.c **** * Note(s)     : none.
3161:rtos/uC-USB-Device/Source/usbd_ep.c **** ***************************************************************************************************
3162:rtos/uC-USB-Device/Source/usbd_ep.c **** */
3163:rtos/uC-USB-Device/Source/usbd_ep.c **** 
3164:rtos/uC-USB-Device/Source/usbd_ep.c **** void  USBD_EP_TxCmpl (USBD_DRV    *p_drv,
3165:rtos/uC-USB-Device/Source/usbd_ep.c ****                       CPU_INT08U   ep_log_nbr)
ARM GAS  /tmp/ccuUvpuw.s 			page 57


3166:rtos/uC-USB-Device/Source/usbd_ep.c **** {
3167:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_EP     *p_ep;
3168:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_INT08U   ep_phy_nbr;
3169:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_ERR     err;
3170:rtos/uC-USB-Device/Source/usbd_ep.c **** 
3171:rtos/uC-USB-Device/Source/usbd_ep.c **** 
3172:rtos/uC-USB-Device/Source/usbd_ep.c **** #if (USBD_CFG_ERR_ARG_CHK_EXT_EN == DEF_ENABLED)
3173:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_drv == (USBD_DRV *)0) {
3174:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
3175:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
3176:rtos/uC-USB-Device/Source/usbd_ep.c **** #endif
3177:rtos/uC-USB-Device/Source/usbd_ep.c **** 
3178:rtos/uC-USB-Device/Source/usbd_ep.c ****     ep_phy_nbr = USBD_EP_ADDR_TO_PHY(USBD_EP_LOG_TO_ADDR_IN(ep_log_nbr));
3179:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_ep       = USBD_EP_TblPtrs[p_drv->DevNbr][ep_phy_nbr];
3180:rtos/uC-USB-Device/Source/usbd_ep.c **** 
3181:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_ep == (USBD_EP *)0) {
3182:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_DBG_STATS_EP_INC(p_drv->DevNbr, p_ep->Ix, TxCmplErrNbr);
3183:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
3184:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
3185:rtos/uC-USB-Device/Source/usbd_ep.c **** 
3186:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DBG_STATS_EP_INC(p_drv->DevNbr, p_ep->Ix, TxCmplNbr);
3187:rtos/uC-USB-Device/Source/usbd_ep.c **** 
3188:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_ep->XferState == USBD_XFER_STATE_SYNC) {
3189:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_OS_EP_SignalPost(p_drv->DevNbr, p_ep->Ix, &err);
3190:rtos/uC-USB-Device/Source/usbd_ep.c ****     } else if ((p_ep->XferState == USBD_XFER_STATE_ASYNC) ||
3191:rtos/uC-USB-Device/Source/usbd_ep.c ****                (p_ep->XferState == USBD_XFER_STATE_ASYNC_PARTIAL)) {
3192:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_EventEP(p_drv, p_ep->Addr, USBD_ERR_NONE);
3193:rtos/uC-USB-Device/Source/usbd_ep.c ****     } else {
3194:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_DBG_STATS_EP_INC(p_drv->DevNbr, p_ep->Ix, TxCmplErrNbr);
3195:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_DBG_EP("USBD_EP_TxCmpl(): incorrect XferState", p_ep->Addr);
3196:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
3197:rtos/uC-USB-Device/Source/usbd_ep.c **** }
3198:rtos/uC-USB-Device/Source/usbd_ep.c **** 
3199:rtos/uC-USB-Device/Source/usbd_ep.c **** 
3200:rtos/uC-USB-Device/Source/usbd_ep.c **** /*
3201:rtos/uC-USB-Device/Source/usbd_ep.c **** ***************************************************************************************************
3202:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                         USBD_EP_TxCmplExt()
3203:rtos/uC-USB-Device/Source/usbd_ep.c **** *
3204:rtos/uC-USB-Device/Source/usbd_ep.c **** * Description : Notify USB stack that packet transmit has completed (see Note #1).
3205:rtos/uC-USB-Device/Source/usbd_ep.c **** *
3206:rtos/uC-USB-Device/Source/usbd_ep.c **** * Argument(s) : p_drv       Pointer to device driver structure.
3207:rtos/uC-USB-Device/Source/usbd_ep.c **** *
3208:rtos/uC-USB-Device/Source/usbd_ep.c **** *               ep_log_nbr  Endpoint logical number.
3209:rtos/uC-USB-Device/Source/usbd_ep.c **** *
3210:rtos/uC-USB-Device/Source/usbd_ep.c **** *               err         Error code returned by the USB driver.
3211:rtos/uC-USB-Device/Source/usbd_ep.c **** *
3212:rtos/uC-USB-Device/Source/usbd_ep.c **** * Return(s)   : none.
3213:rtos/uC-USB-Device/Source/usbd_ep.c **** *
3214:rtos/uC-USB-Device/Source/usbd_ep.c **** * Note(s)     : (1) This function is an alternative to the function USBD_EP_TxCmpl() so that a USB 
3215:rtos/uC-USB-Device/Source/usbd_ep.c **** *                   driver can return to the core an error code upon the Tx transfer completion.
3216:rtos/uC-USB-Device/Source/usbd_ep.c **** ***************************************************************************************************
3217:rtos/uC-USB-Device/Source/usbd_ep.c **** */
3218:rtos/uC-USB-Device/Source/usbd_ep.c **** 
3219:rtos/uC-USB-Device/Source/usbd_ep.c **** void  USBD_EP_TxCmplExt (USBD_DRV    *p_drv,
3220:rtos/uC-USB-Device/Source/usbd_ep.c ****                          CPU_INT08U   ep_log_nbr,
3221:rtos/uC-USB-Device/Source/usbd_ep.c ****                          USBD_ERR     xfer_err)
3222:rtos/uC-USB-Device/Source/usbd_ep.c **** {
ARM GAS  /tmp/ccuUvpuw.s 			page 58


3223:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_EP     *p_ep;
3224:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_INT08U   ep_phy_nbr;
3225:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_ERR     local_err;
3226:rtos/uC-USB-Device/Source/usbd_ep.c **** 
3227:rtos/uC-USB-Device/Source/usbd_ep.c **** 
3228:rtos/uC-USB-Device/Source/usbd_ep.c **** #if (USBD_CFG_ERR_ARG_CHK_EXT_EN == DEF_ENABLED)
3229:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_drv == (USBD_DRV *)0) {
3230:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
3231:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
3232:rtos/uC-USB-Device/Source/usbd_ep.c **** #endif
3233:rtos/uC-USB-Device/Source/usbd_ep.c **** 
3234:rtos/uC-USB-Device/Source/usbd_ep.c ****     ep_phy_nbr = USBD_EP_ADDR_TO_PHY(USBD_EP_LOG_TO_ADDR_IN(ep_log_nbr));
3235:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_ep       = USBD_EP_TblPtrs[p_drv->DevNbr][ep_phy_nbr];
3236:rtos/uC-USB-Device/Source/usbd_ep.c **** 
3237:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_ep == (USBD_EP *)0) {
3238:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_DBG_STATS_EP_INC(p_drv->DevNbr, p_ep->Ix, TxCmplErrNbr);
3239:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
3240:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
3241:rtos/uC-USB-Device/Source/usbd_ep.c **** 
3242:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DBG_STATS_EP_INC(p_drv->DevNbr, p_ep->Ix, TxCmplNbr);
3243:rtos/uC-USB-Device/Source/usbd_ep.c **** 
3244:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_ep->XferState == USBD_XFER_STATE_SYNC) {
3245:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_OS_EP_SignalAbort(p_drv->DevNbr, p_ep->Ix, &local_err);
3246:rtos/uC-USB-Device/Source/usbd_ep.c ****         if (local_err != USBD_ERR_NONE) {
3247:rtos/uC-USB-Device/Source/usbd_ep.c ****             USBD_DBG_EP_ERR("USBD_EP_TxCmplExt()", p_ep->Addr, local_err);
3248:rtos/uC-USB-Device/Source/usbd_ep.c ****         }
3249:rtos/uC-USB-Device/Source/usbd_ep.c ****     } else if ((p_ep->XferState == USBD_XFER_STATE_ASYNC) ||
3250:rtos/uC-USB-Device/Source/usbd_ep.c ****                (p_ep->XferState == USBD_XFER_STATE_ASYNC_PARTIAL)) {
3251:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_EventEP(p_drv, p_ep->Addr, xfer_err);
3252:rtos/uC-USB-Device/Source/usbd_ep.c ****     } else {
3253:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_DBG_STATS_EP_INC(p_drv->DevNbr, p_ep->Ix, TxCmplErrNbr);
3254:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_DBG_EP("USBD_EP_TxCmplExt(): incorrect XferState", p_ep->Addr);
3255:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
3256:rtos/uC-USB-Device/Source/usbd_ep.c **** }
3257:rtos/uC-USB-Device/Source/usbd_ep.c **** 
3258:rtos/uC-USB-Device/Source/usbd_ep.c **** 
3259:rtos/uC-USB-Device/Source/usbd_ep.c **** /*
3260:rtos/uC-USB-Device/Source/usbd_ep.c **** ***************************************************************************************************
3261:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                           USBD_EP_TxZLP()
3262:rtos/uC-USB-Device/Source/usbd_ep.c **** *
3263:rtos/uC-USB-Device/Source/usbd_ep.c **** * Description : Send zero-length packet to the host.
3264:rtos/uC-USB-Device/Source/usbd_ep.c **** *
3265:rtos/uC-USB-Device/Source/usbd_ep.c **** * Argument(s) : dev_nbr     Device number.
3266:rtos/uC-USB-Device/Source/usbd_ep.c **** *
3267:rtos/uC-USB-Device/Source/usbd_ep.c **** *               ep_addr     Endpoint address.
3268:rtos/uC-USB-Device/Source/usbd_ep.c **** *
3269:rtos/uC-USB-Device/Source/usbd_ep.c **** *               timeout_ms  Timeout in milliseconds.
3270:rtos/uC-USB-Device/Source/usbd_ep.c **** *
3271:rtos/uC-USB-Device/Source/usbd_ep.c **** *               p_err       Pointer to variable that will receive return error code from this funct
3272:rtos/uC-USB-Device/Source/usbd_ep.c **** *
3273:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               USBD_ERR_NONE               Data successfully transferred.
3274:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               USBD_ERR_DEV_INVALID_NBR    Invalid device number.
3275:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               USBD_ERR_EP_INVALID_ADDR    Invalid endpoint address.
3276:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               USBD_ERR_EP_INVALID_STATE   Invalid endpoint state.
3277:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               USBD_ERR_EP_INVALID_TYPE    Invalid endpoint type.
3278:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               USBD_ERR_EP_IO_PENDING      Data already queued on this endpoint.
3279:rtos/uC-USB-Device/Source/usbd_ep.c **** *
ARM GAS  /tmp/ccuUvpuw.s 			page 59


3280:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               - RETURNED BY USBD_OS_EP_LockAcquire() -
3281:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               See USBD_OS_EP_LockAcquire() for additional return error codes.
3282:rtos/uC-USB-Device/Source/usbd_ep.c **** *
3283:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               - RETURNED BY USBD_URB_Get() -
3284:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               See USBD_URB_Get() for additional return error codes.
3285:rtos/uC-USB-Device/Source/usbd_ep.c **** *
3286:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               - RETURNED BY 'p_drv_api->EP_TxZLP()' -
3287:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               See specific driver(s) 'p_drv_api->EP_TxZLP()' for additional retur
3288:rtos/uC-USB-Device/Source/usbd_ep.c **** *
3289:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               - RETURNED BY USBD_OS_EP_SignalPend() -
3290:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               See USBD_OS_EP_SignalPend() for additional return error codes.
3291:rtos/uC-USB-Device/Source/usbd_ep.c **** *
3292:rtos/uC-USB-Device/Source/usbd_ep.c **** * Return(s)   : none.
3293:rtos/uC-USB-Device/Source/usbd_ep.c **** *
3294:rtos/uC-USB-Device/Source/usbd_ep.c **** * Note(s)     : (1) This function should only be called during a synchronous transfer.
3295:rtos/uC-USB-Device/Source/usbd_ep.c **** ***************************************************************************************************
3296:rtos/uC-USB-Device/Source/usbd_ep.c **** */
3297:rtos/uC-USB-Device/Source/usbd_ep.c **** 
3298:rtos/uC-USB-Device/Source/usbd_ep.c **** void  USBD_EP_TxZLP (CPU_INT08U   dev_nbr,
3299:rtos/uC-USB-Device/Source/usbd_ep.c ****                      CPU_INT08U   ep_addr,
3300:rtos/uC-USB-Device/Source/usbd_ep.c ****                      CPU_INT16U   timeout_ms,
3301:rtos/uC-USB-Device/Source/usbd_ep.c ****                      USBD_ERR    *p_err)
3302:rtos/uC-USB-Device/Source/usbd_ep.c **** {
3303:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_EP       *p_ep;
3304:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_URB      *p_urb;
3305:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DRV      *p_drv;
3306:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DRV_API  *p_drv_api;
3307:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_INT08U     ep_phy_nbr;
3308:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_ERR       local_err;
3309:rtos/uC-USB-Device/Source/usbd_ep.c **** 
3310:rtos/uC-USB-Device/Source/usbd_ep.c **** 
3311:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_drv = USBD_DrvRefGet(dev_nbr);                            /* Get dev struct.                 
3312:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_drv == (USBD_DRV *)0) {
3313:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_DEV_INVALID_NBR;
3314:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
3315:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
3316:rtos/uC-USB-Device/Source/usbd_ep.c **** 
3317:rtos/uC-USB-Device/Source/usbd_ep.c ****     ep_phy_nbr = USBD_EP_ADDR_TO_PHY(ep_addr);
3318:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_ep       = USBD_EP_TblPtrs[dev_nbr][ep_phy_nbr];
3319:rtos/uC-USB-Device/Source/usbd_ep.c **** 
3320:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_ep == (USBD_EP *)0) {
3321:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_EP_INVALID_ADDR;
3322:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
3323:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
3324:rtos/uC-USB-Device/Source/usbd_ep.c **** 
3325:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_OS_EP_LockAcquire(p_drv->DevNbr,
3326:rtos/uC-USB-Device/Source/usbd_ep.c ****                            p_ep->Ix,
3327:rtos/uC-USB-Device/Source/usbd_ep.c ****                            0u,
3328:rtos/uC-USB-Device/Source/usbd_ep.c ****                            p_err);
3329:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (*p_err != USBD_ERR_NONE) {
3330:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
3331:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
3332:rtos/uC-USB-Device/Source/usbd_ep.c **** 
3333:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DBG_STATS_EP_INC(dev_nbr, p_ep->Ix, TxZLP_ExecNbr);
3334:rtos/uC-USB-Device/Source/usbd_ep.c **** 
3335:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_ep->State != USBD_EP_STATE_OPEN) {
3336:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_EP_INVALID_STATE;
ARM GAS  /tmp/ccuUvpuw.s 			page 60


3337:rtos/uC-USB-Device/Source/usbd_ep.c ****         goto lock_release;
3338:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
3339:rtos/uC-USB-Device/Source/usbd_ep.c ****                                                                 /* Chk EP attrib.                  
3340:rtos/uC-USB-Device/Source/usbd_ep.c ****     if ((p_ep->Attrib & USBD_EP_TYPE_MASK) == USBD_EP_TYPE_ISOC) {
3341:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_EP_INVALID_TYPE;
3342:rtos/uC-USB-Device/Source/usbd_ep.c ****         goto lock_release;
3343:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
3344:rtos/uC-USB-Device/Source/usbd_ep.c **** 
3345:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_ep->XferState != USBD_XFER_STATE_NONE) {
3346:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_EP_IO_PENDING;
3347:rtos/uC-USB-Device/Source/usbd_ep.c ****         goto lock_release;
3348:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
3349:rtos/uC-USB-Device/Source/usbd_ep.c **** 
3350:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_urb = USBD_URB_Get(dev_nbr, p_ep, p_err);
3351:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (*p_err != USBD_ERR_NONE) {
3352:rtos/uC-USB-Device/Source/usbd_ep.c ****         goto lock_release;
3353:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
3354:rtos/uC-USB-Device/Source/usbd_ep.c **** 
3355:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_urb->State    = USBD_URB_STATE_XFER_SYNC;                 /* Only State needs to be set to in
3356:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_ep->XferState = USBD_XFER_STATE_SYNC;                     /* Set XferState before submitting 
3357:rtos/uC-USB-Device/Source/usbd_ep.c **** 
3358:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_URB_Queue(p_ep, p_urb);
3359:rtos/uC-USB-Device/Source/usbd_ep.c **** 
3360:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_drv_api = p_drv->API_Ptr;                                 /* Get dev drv API struct.         
3361:rtos/uC-USB-Device/Source/usbd_ep.c **** 
3362:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DBG_STATS_EP_INC(p_drv->DevNbr, p_ep->Ix, DrvTxZLP_Nbr);
3363:rtos/uC-USB-Device/Source/usbd_ep.c **** 
3364:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_drv_api->EP_TxZLP(p_drv, ep_addr, p_err);
3365:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (*p_err == USBD_ERR_NONE) {
3366:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_DBG_STATS_EP_INC(p_drv->DevNbr, p_ep->Ix, DrvTxZLP_SuccessNbr);
3367:rtos/uC-USB-Device/Source/usbd_ep.c **** 
3368:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_OS_EP_LockRelease(p_drv->DevNbr,                   /* Unlock before pending on complet
3369:rtos/uC-USB-Device/Source/usbd_ep.c ****                                p_ep->Ix);
3370:rtos/uC-USB-Device/Source/usbd_ep.c **** 
3371:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_OS_EP_SignalPend(dev_nbr, p_ep->Ix, timeout_ms, p_err);
3372:rtos/uC-USB-Device/Source/usbd_ep.c **** 
3373:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_OS_EP_LockAcquire(p_drv->DevNbr,                   /* Re-lock EP after xfer completion
3374:rtos/uC-USB-Device/Source/usbd_ep.c ****                                p_ep->Ix,
3375:rtos/uC-USB-Device/Source/usbd_ep.c ****                                0u,
3376:rtos/uC-USB-Device/Source/usbd_ep.c ****                               &local_err);
3377:rtos/uC-USB-Device/Source/usbd_ep.c ****         if (local_err != USBD_ERR_NONE) {
3378:rtos/uC-USB-Device/Source/usbd_ep.c ****            *p_err = USBD_ERR_OS_FAIL;
3379:rtos/uC-USB-Device/Source/usbd_ep.c **** 
3380:rtos/uC-USB-Device/Source/usbd_ep.c ****         } else if (*p_err == USBD_ERR_OS_TIMEOUT) {
3381:rtos/uC-USB-Device/Source/usbd_ep.c ****             p_drv_api->EP_Abort(p_drv, ep_addr);
3382:rtos/uC-USB-Device/Source/usbd_ep.c ****             USBD_DBG_STATS_EP_INC(p_drv->DevNbr, p_ep->Ix, TxSyncTimeoutErrNbr);
3383:rtos/uC-USB-Device/Source/usbd_ep.c ****         }
3384:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
3385:rtos/uC-USB-Device/Source/usbd_ep.c **** 
3386:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_URB_Dequeue(p_ep);
3387:rtos/uC-USB-Device/Source/usbd_ep.c **** 
3388:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_URB_Free(dev_nbr, p_ep, p_urb);
3389:rtos/uC-USB-Device/Source/usbd_ep.c **** 
3390:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DBG_STATS_EP_INC_IF_TRUE(dev_nbr, p_ep->Ix, TxZLP_SuccessNbr, (*p_err == USBD_ERR_NONE));
3391:rtos/uC-USB-Device/Source/usbd_ep.c **** 
3392:rtos/uC-USB-Device/Source/usbd_ep.c **** lock_release:
3393:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_OS_EP_LockRelease(p_drv->DevNbr,
ARM GAS  /tmp/ccuUvpuw.s 			page 61


3394:rtos/uC-USB-Device/Source/usbd_ep.c ****                            p_ep->Ix);
3395:rtos/uC-USB-Device/Source/usbd_ep.c **** }
3396:rtos/uC-USB-Device/Source/usbd_ep.c **** 
3397:rtos/uC-USB-Device/Source/usbd_ep.c **** 
3398:rtos/uC-USB-Device/Source/usbd_ep.c **** /*
3399:rtos/uC-USB-Device/Source/usbd_ep.c **** ***************************************************************************************************
3400:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                           USBD_EP_RxZLP()
3401:rtos/uC-USB-Device/Source/usbd_ep.c **** *
3402:rtos/uC-USB-Device/Source/usbd_ep.c **** * Description : Receive zero-length packet from the host.
3403:rtos/uC-USB-Device/Source/usbd_ep.c **** *
3404:rtos/uC-USB-Device/Source/usbd_ep.c **** * Argument(s) : dev_nbr     Device number.
3405:rtos/uC-USB-Device/Source/usbd_ep.c **** *
3406:rtos/uC-USB-Device/Source/usbd_ep.c **** *               ep_addr     Endpoint address.
3407:rtos/uC-USB-Device/Source/usbd_ep.c **** *
3408:rtos/uC-USB-Device/Source/usbd_ep.c **** *               timeout_ms  Timeout in milliseconds.
3409:rtos/uC-USB-Device/Source/usbd_ep.c **** *
3410:rtos/uC-USB-Device/Source/usbd_ep.c **** *               p_err       Pointer to variable that will receive return error code from this funct
3411:rtos/uC-USB-Device/Source/usbd_ep.c **** *
3412:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               USBD_ERR_NONE               Data successfully transferred.
3413:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               USBD_ERR_DEV_INVALID_NBR    Invalid device number.
3414:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               USBD_ERR_EP_INVALID_ADDR    Invalid endpoint address.
3415:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               USBD_ERR_EP_INVALID_STATE   Invalid endpoint state.
3416:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               USBD_ERR_EP_INVALID_TYPE    Invalid endpoint type.
3417:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               USBD_ERR_EP_IO_PENDING      Data already queued on this endpoint.
3418:rtos/uC-USB-Device/Source/usbd_ep.c **** *
3419:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               - RETURNED BY USBD_OS_EP_LockAcquire() -
3420:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               See USBD_OS_EP_LockAcquire() for additional return error codes.
3421:rtos/uC-USB-Device/Source/usbd_ep.c **** *
3422:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               - RETURNED BY USBD_URB_Get() -
3423:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               See USBD_URB_Get() for additional return error codes.
3424:rtos/uC-USB-Device/Source/usbd_ep.c **** *
3425:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               - RETURNED BY USBD_OS_EP_SignalPend() -
3426:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               See USBD_OS_EP_SignalPend() for additional return error codes.
3427:rtos/uC-USB-Device/Source/usbd_ep.c **** *
3428:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               - RETURNED BY 'p_drv_api->EP_RxStart()' -
3429:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               See specific driver(s) 'p_drv_api->EP_RxStart()' for additional ret
3430:rtos/uC-USB-Device/Source/usbd_ep.c **** *
3431:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               - RETURNED BY 'p_drv_api->EP_RxZLP()' -
3432:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               See specific driver(s) 'p_drv_api->EP_RxZLP()' for additional retur
3433:rtos/uC-USB-Device/Source/usbd_ep.c **** *
3434:rtos/uC-USB-Device/Source/usbd_ep.c **** * Return(s)   : none.
3435:rtos/uC-USB-Device/Source/usbd_ep.c **** *
3436:rtos/uC-USB-Device/Source/usbd_ep.c **** * Note(s)     : (1) This function should only be called during a synchronous transfer.
3437:rtos/uC-USB-Device/Source/usbd_ep.c **** ***************************************************************************************************
3438:rtos/uC-USB-Device/Source/usbd_ep.c **** */
3439:rtos/uC-USB-Device/Source/usbd_ep.c **** 
3440:rtos/uC-USB-Device/Source/usbd_ep.c **** void  USBD_EP_RxZLP (CPU_INT08U   dev_nbr,
3441:rtos/uC-USB-Device/Source/usbd_ep.c ****                      CPU_INT08U   ep_addr,
3442:rtos/uC-USB-Device/Source/usbd_ep.c ****                      CPU_INT16U   timeout_ms,
3443:rtos/uC-USB-Device/Source/usbd_ep.c ****                      USBD_ERR    *p_err)
3444:rtos/uC-USB-Device/Source/usbd_ep.c **** {
3445:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_EP       *p_ep;
3446:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_URB      *p_urb;
3447:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DRV      *p_drv;
3448:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DRV_API  *p_drv_api;
3449:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_INT08U     ep_phy_nbr;
3450:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_ERR       local_err;
ARM GAS  /tmp/ccuUvpuw.s 			page 62


3451:rtos/uC-USB-Device/Source/usbd_ep.c **** 
3452:rtos/uC-USB-Device/Source/usbd_ep.c **** 
3453:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_drv = USBD_DrvRefGet(dev_nbr);                            /* Get dev struct.                 
3454:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_drv == (USBD_DRV *)0) {
3455:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_DEV_INVALID_NBR;
3456:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
3457:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
3458:rtos/uC-USB-Device/Source/usbd_ep.c **** 
3459:rtos/uC-USB-Device/Source/usbd_ep.c ****     ep_phy_nbr = USBD_EP_ADDR_TO_PHY(ep_addr);
3460:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_ep       = USBD_EP_TblPtrs[dev_nbr][ep_phy_nbr];
3461:rtos/uC-USB-Device/Source/usbd_ep.c **** 
3462:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_ep == (USBD_EP *)0) {
3463:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_EP_INVALID_ADDR;
3464:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
3465:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
3466:rtos/uC-USB-Device/Source/usbd_ep.c **** 
3467:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_OS_EP_LockAcquire(p_drv->DevNbr,
3468:rtos/uC-USB-Device/Source/usbd_ep.c ****                            p_ep->Ix,
3469:rtos/uC-USB-Device/Source/usbd_ep.c ****                            0u,
3470:rtos/uC-USB-Device/Source/usbd_ep.c ****                            p_err);
3471:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (*p_err != USBD_ERR_NONE) {
3472:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
3473:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
3474:rtos/uC-USB-Device/Source/usbd_ep.c **** 
3475:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DBG_STATS_EP_INC(dev_nbr, p_ep->Ix, RxZLP_ExecNbr);
3476:rtos/uC-USB-Device/Source/usbd_ep.c **** 
3477:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_ep->State != USBD_EP_STATE_OPEN) {
3478:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_EP_INVALID_STATE;
3479:rtos/uC-USB-Device/Source/usbd_ep.c ****         goto lock_release;
3480:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
3481:rtos/uC-USB-Device/Source/usbd_ep.c **** 
3482:rtos/uC-USB-Device/Source/usbd_ep.c ****     if ((p_ep->Attrib & USBD_EP_TYPE_MASK) == USBD_EP_TYPE_ISOC) {
3483:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_EP_INVALID_TYPE;
3484:rtos/uC-USB-Device/Source/usbd_ep.c ****         goto lock_release;
3485:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
3486:rtos/uC-USB-Device/Source/usbd_ep.c **** 
3487:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_ep->XferState != USBD_XFER_STATE_NONE) {
3488:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_EP_IO_PENDING;
3489:rtos/uC-USB-Device/Source/usbd_ep.c ****         goto lock_release;
3490:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
3491:rtos/uC-USB-Device/Source/usbd_ep.c **** 
3492:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_urb = USBD_URB_Get(dev_nbr, p_ep, p_err);
3493:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (*p_err != USBD_ERR_NONE) {
3494:rtos/uC-USB-Device/Source/usbd_ep.c ****         goto lock_release;
3495:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
3496:rtos/uC-USB-Device/Source/usbd_ep.c **** 
3497:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_urb->State    = USBD_URB_STATE_XFER_SYNC;                 /* Only State needs to be set to in
3498:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_ep->XferState = USBD_XFER_STATE_SYNC;                     /* Set XferState before submitting 
3499:rtos/uC-USB-Device/Source/usbd_ep.c **** 
3500:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_URB_Queue(p_ep, p_urb);
3501:rtos/uC-USB-Device/Source/usbd_ep.c **** 
3502:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_drv_api = p_drv->API_Ptr;                                 /* Get dev drv API struct.         
3503:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DBG_STATS_EP_INC(dev_nbr, p_ep->Ix, DrvRxStartNbr);
3504:rtos/uC-USB-Device/Source/usbd_ep.c ****     (void)p_drv_api->EP_RxStart(              p_drv,
3505:rtos/uC-USB-Device/Source/usbd_ep.c ****                                               ep_addr,
3506:rtos/uC-USB-Device/Source/usbd_ep.c ****                                 (CPU_INT08U *)0u,
3507:rtos/uC-USB-Device/Source/usbd_ep.c ****                                               0u,
ARM GAS  /tmp/ccuUvpuw.s 			page 63


3508:rtos/uC-USB-Device/Source/usbd_ep.c ****                                               p_err);
3509:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (*p_err == USBD_ERR_NONE) {
3510:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_DBG_STATS_EP_INC(dev_nbr, p_ep->Ix, DrvRxStartSuccessNbr);
3511:rtos/uC-USB-Device/Source/usbd_ep.c **** 
3512:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_OS_EP_LockRelease(p_drv->DevNbr,                   /* Unlock before pending on complet
3513:rtos/uC-USB-Device/Source/usbd_ep.c ****                                p_ep->Ix);
3514:rtos/uC-USB-Device/Source/usbd_ep.c **** 
3515:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_OS_EP_SignalPend(dev_nbr, p_ep->Ix, timeout_ms, p_err);
3516:rtos/uC-USB-Device/Source/usbd_ep.c **** 
3517:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_OS_EP_LockAcquire(p_drv->DevNbr,                   /* Re-lock EP after xfer completion
3518:rtos/uC-USB-Device/Source/usbd_ep.c ****                                p_ep->Ix,
3519:rtos/uC-USB-Device/Source/usbd_ep.c ****                                0u,
3520:rtos/uC-USB-Device/Source/usbd_ep.c ****                               &local_err);
3521:rtos/uC-USB-Device/Source/usbd_ep.c ****         if ((*p_err    == USBD_ERR_NONE) &&
3522:rtos/uC-USB-Device/Source/usbd_ep.c ****             (local_err == USBD_ERR_NONE)) {
3523:rtos/uC-USB-Device/Source/usbd_ep.c ****             USBD_DBG_STATS_EP_INC(dev_nbr, p_ep->Ix, DrvRxZLP_Nbr);
3524:rtos/uC-USB-Device/Source/usbd_ep.c **** 
3525:rtos/uC-USB-Device/Source/usbd_ep.c ****             p_drv_api->EP_RxZLP(p_drv,
3526:rtos/uC-USB-Device/Source/usbd_ep.c ****                                 ep_addr,
3527:rtos/uC-USB-Device/Source/usbd_ep.c ****                                 p_err);
3528:rtos/uC-USB-Device/Source/usbd_ep.c ****             USBD_DBG_STATS_EP_INC_IF_TRUE(dev_nbr, p_ep->Ix, DrvRxZLP_SuccessNbr, (*p_err == USBD_E
3529:rtos/uC-USB-Device/Source/usbd_ep.c **** 
3530:rtos/uC-USB-Device/Source/usbd_ep.c ****         } else if (*p_err == USBD_ERR_OS_TIMEOUT) {
3531:rtos/uC-USB-Device/Source/usbd_ep.c **** 
3532:rtos/uC-USB-Device/Source/usbd_ep.c ****             p_drv_api->EP_Abort(p_drv, ep_addr);
3533:rtos/uC-USB-Device/Source/usbd_ep.c ****             USBD_DBG_STATS_EP_INC(p_drv->DevNbr, p_ep->Ix, RxSyncTimeoutErrNbr);
3534:rtos/uC-USB-Device/Source/usbd_ep.c **** 
3535:rtos/uC-USB-Device/Source/usbd_ep.c ****         } else if (local_err != USBD_ERR_NONE) {
3536:rtos/uC-USB-Device/Source/usbd_ep.c ****            *p_err = USBD_ERR_OS_FAIL;
3537:rtos/uC-USB-Device/Source/usbd_ep.c ****         }
3538:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
3539:rtos/uC-USB-Device/Source/usbd_ep.c **** 
3540:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_URB_Dequeue(p_ep);
3541:rtos/uC-USB-Device/Source/usbd_ep.c **** 
3542:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_URB_Free(dev_nbr, p_ep, p_urb);
3543:rtos/uC-USB-Device/Source/usbd_ep.c **** 
3544:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DBG_STATS_EP_INC_IF_TRUE(dev_nbr, p_ep->Ix, RxZLP_SuccessNbr, (*p_err == USBD_ERR_NONE));
3545:rtos/uC-USB-Device/Source/usbd_ep.c **** 
3546:rtos/uC-USB-Device/Source/usbd_ep.c **** lock_release:
3547:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_OS_EP_LockRelease(p_drv->DevNbr,
3548:rtos/uC-USB-Device/Source/usbd_ep.c ****                            p_ep->Ix);
3549:rtos/uC-USB-Device/Source/usbd_ep.c **** }
3550:rtos/uC-USB-Device/Source/usbd_ep.c **** 
3551:rtos/uC-USB-Device/Source/usbd_ep.c **** 
3552:rtos/uC-USB-Device/Source/usbd_ep.c **** /*
3553:rtos/uC-USB-Device/Source/usbd_ep.c **** ***************************************************************************************************
3554:rtos/uC-USB-Device/Source/usbd_ep.c **** ***************************************************************************************************
3555:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                           LOCAL FUNCTIONS
3556:rtos/uC-USB-Device/Source/usbd_ep.c **** ***************************************************************************************************
3557:rtos/uC-USB-Device/Source/usbd_ep.c **** ***************************************************************************************************
3558:rtos/uC-USB-Device/Source/usbd_ep.c **** */
3559:rtos/uC-USB-Device/Source/usbd_ep.c **** 
3560:rtos/uC-USB-Device/Source/usbd_ep.c **** /*
3561:rtos/uC-USB-Device/Source/usbd_ep.c **** ***************************************************************************************************
3562:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                     USBD_EP_RxStartAsyncProcess()
3563:rtos/uC-USB-Device/Source/usbd_ep.c **** *
3564:rtos/uC-USB-Device/Source/usbd_ep.c **** * Description : Process driver's asynchronous RxStart operation.
ARM GAS  /tmp/ccuUvpuw.s 			page 64


3565:rtos/uC-USB-Device/Source/usbd_ep.c **** *
3566:rtos/uC-USB-Device/Source/usbd_ep.c **** * Argument(s) : p_drv       Pointer to device driver structure.
3567:rtos/uC-USB-Device/Source/usbd_ep.c **** *
3568:rtos/uC-USB-Device/Source/usbd_ep.c **** *               p_ep        Pointer to endpoint on which data will be received.
3569:rtos/uC-USB-Device/Source/usbd_ep.c **** *
3570:rtos/uC-USB-Device/Source/usbd_ep.c **** *               p_urb       Pointer to USB request block.
3571:rtos/uC-USB-Device/Source/usbd_ep.c **** *
3572:rtos/uC-USB-Device/Source/usbd_ep.c **** *               p_buf_cur   Pointer to source buffer to receive data.
3573:rtos/uC-USB-Device/Source/usbd_ep.c **** *
3574:rtos/uC-USB-Device/Source/usbd_ep.c **** *               len         Number of octets to receive.
3575:rtos/uC-USB-Device/Source/usbd_ep.c **** *
3576:rtos/uC-USB-Device/Source/usbd_ep.c **** *               p_err       Pointer to variable that will receive return error code from this funct
3577:rtos/uC-USB-Device/Source/usbd_ep.c **** *
3578:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               USBD_ERR_NONE               Receive successfully configured.
3579:rtos/uC-USB-Device/Source/usbd_ep.c **** *
3580:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               - RETURNED BY 'p_drv_api->EP_RxStart()' -
3581:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               See specific driver(s) 'p_drv_api->EP_RxStart()' for additional ret
3582:rtos/uC-USB-Device/Source/usbd_ep.c **** *
3583:rtos/uC-USB-Device/Source/usbd_ep.c **** * Return(s)   : none.
3584:rtos/uC-USB-Device/Source/usbd_ep.c **** *
3585:rtos/uC-USB-Device/Source/usbd_ep.c **** * Note(s)     : (1) Endpoint must be locked when calling this function.
3586:rtos/uC-USB-Device/Source/usbd_ep.c **** ***************************************************************************************************
3587:rtos/uC-USB-Device/Source/usbd_ep.c **** */
3588:rtos/uC-USB-Device/Source/usbd_ep.c **** 
3589:rtos/uC-USB-Device/Source/usbd_ep.c **** static  void  USBD_EP_RxStartAsyncProcess (USBD_DRV    *p_drv,
3590:rtos/uC-USB-Device/Source/usbd_ep.c ****                                            USBD_EP     *p_ep,
3591:rtos/uC-USB-Device/Source/usbd_ep.c ****                                            USBD_URB    *p_urb,
3592:rtos/uC-USB-Device/Source/usbd_ep.c ****                                            CPU_INT08U  *p_buf_cur,
3593:rtos/uC-USB-Device/Source/usbd_ep.c ****                                            CPU_INT32U   len,
3594:rtos/uC-USB-Device/Source/usbd_ep.c ****                                            USBD_ERR    *p_err)
3595:rtos/uC-USB-Device/Source/usbd_ep.c **** {
3596:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DRV_API  *p_drv_api;
3597:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_SR_ALLOC();
3598:rtos/uC-USB-Device/Source/usbd_ep.c **** 
3599:rtos/uC-USB-Device/Source/usbd_ep.c **** 
3600:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_drv_api = p_drv->API_Ptr;                                 /* Get dev drv API struct.         
3601:rtos/uC-USB-Device/Source/usbd_ep.c **** 
3602:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DBG_STATS_EP_INC(p_drv->DevNbr, p_ep->Ix, DrvRxStartNbr);
3603:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_urb->NextXferLen = p_drv_api->EP_RxStart(p_drv,
3604:rtos/uC-USB-Device/Source/usbd_ep.c ****                                                p_ep->Addr,
3605:rtos/uC-USB-Device/Source/usbd_ep.c ****                                                p_buf_cur,
3606:rtos/uC-USB-Device/Source/usbd_ep.c ****                                                len,
3607:rtos/uC-USB-Device/Source/usbd_ep.c ****                                                p_err);
3608:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (*p_err != USBD_ERR_NONE) {
3609:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
3610:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
3611:rtos/uC-USB-Device/Source/usbd_ep.c **** 
3612:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DBG_STATS_EP_INC(p_drv->DevNbr, p_ep->Ix, DrvRxStartSuccessNbr);
3613:rtos/uC-USB-Device/Source/usbd_ep.c **** 
3614:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_urb->NextXferLen != len) {
3615:rtos/uC-USB-Device/Source/usbd_ep.c ****         CPU_CRITICAL_ENTER();
3616:rtos/uC-USB-Device/Source/usbd_ep.c ****         p_ep->XferState = USBD_XFER_STATE_ASYNC_PARTIAL;        /* Xfer will have to be done in man
3617:rtos/uC-USB-Device/Source/usbd_ep.c ****         CPU_CRITICAL_EXIT();
3618:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
3619:rtos/uC-USB-Device/Source/usbd_ep.c **** }
3620:rtos/uC-USB-Device/Source/usbd_ep.c **** 
3621:rtos/uC-USB-Device/Source/usbd_ep.c **** 
ARM GAS  /tmp/ccuUvpuw.s 			page 65


3622:rtos/uC-USB-Device/Source/usbd_ep.c **** /*
3623:rtos/uC-USB-Device/Source/usbd_ep.c **** ***************************************************************************************************
3624:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                       USBD_EP_TxAsyncProcess()
3625:rtos/uC-USB-Device/Source/usbd_ep.c **** *
3626:rtos/uC-USB-Device/Source/usbd_ep.c **** * Description : Process driver's asynchronous Tx operation.
3627:rtos/uC-USB-Device/Source/usbd_ep.c **** *
3628:rtos/uC-USB-Device/Source/usbd_ep.c **** * Argument(s) : p_drv       Pointer to device driver structure.
3629:rtos/uC-USB-Device/Source/usbd_ep.c **** *
3630:rtos/uC-USB-Device/Source/usbd_ep.c **** *               p_ep        Pointer to endpoint on which data will be transmitted.
3631:rtos/uC-USB-Device/Source/usbd_ep.c **** *
3632:rtos/uC-USB-Device/Source/usbd_ep.c **** *               p_urb       Pointer to USB request block.
3633:rtos/uC-USB-Device/Source/usbd_ep.c **** *
3634:rtos/uC-USB-Device/Source/usbd_ep.c **** *               p_buf_cur   Pointer to source buffer to transmit data.
3635:rtos/uC-USB-Device/Source/usbd_ep.c **** *
3636:rtos/uC-USB-Device/Source/usbd_ep.c **** *               len         Number of octets to transmit.
3637:rtos/uC-USB-Device/Source/usbd_ep.c **** *
3638:rtos/uC-USB-Device/Source/usbd_ep.c **** *               p_err       Pointer to variable that will receive return error code from this funct
3639:rtos/uC-USB-Device/Source/usbd_ep.c **** *
3640:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               USBD_ERR_NONE               Transmit successfully configured.
3641:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               USBD_ERR_TX                 Generic Tx error.
3642:rtos/uC-USB-Device/Source/usbd_ep.c **** *
3643:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               - RETURNED BY 'p_drv_api->EP_Tx()' -
3644:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               See specific driver(s) 'p_drv_api->EP_Tx()' for additional return e
3645:rtos/uC-USB-Device/Source/usbd_ep.c **** *
3646:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               - RETURNED BY 'p_drv_api->EP_TxStart()' -
3647:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               See specific driver(s) 'p_drv_api->EP_TxStart()' for additional ret
3648:rtos/uC-USB-Device/Source/usbd_ep.c **** *
3649:rtos/uC-USB-Device/Source/usbd_ep.c **** * Return(s)   : none.
3650:rtos/uC-USB-Device/Source/usbd_ep.c **** *
3651:rtos/uC-USB-Device/Source/usbd_ep.c **** * Note(s)     : (1) Endpoint must be locked when calling this function.
3652:rtos/uC-USB-Device/Source/usbd_ep.c **** ***************************************************************************************************
3653:rtos/uC-USB-Device/Source/usbd_ep.c **** */
3654:rtos/uC-USB-Device/Source/usbd_ep.c **** 
3655:rtos/uC-USB-Device/Source/usbd_ep.c **** static  void  USBD_EP_TxAsyncProcess (USBD_DRV    *p_drv,
3656:rtos/uC-USB-Device/Source/usbd_ep.c ****                                       USBD_EP     *p_ep,
3657:rtos/uC-USB-Device/Source/usbd_ep.c ****                                       USBD_URB    *p_urb,
3658:rtos/uC-USB-Device/Source/usbd_ep.c ****                                       CPU_INT08U  *p_buf_cur,
3659:rtos/uC-USB-Device/Source/usbd_ep.c ****                                       CPU_INT32U   len,
3660:rtos/uC-USB-Device/Source/usbd_ep.c ****                                       USBD_ERR    *p_err)
3661:rtos/uC-USB-Device/Source/usbd_ep.c **** {
  29              		.loc 1 3661 1 view -0
  30              		.cfi_startproc
  31              		@ args = 8, pretend = 0, frame = 0
  32              		@ frame_needed = 0, uses_anonymous_args = 0
  33              		.loc 1 3661 1 is_stmt 0 view .LVU1
  34 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
  35              	.LCFI0:
  36              		.cfi_def_cfa_offset 36
  37              		.cfi_offset 4, -36
  38              		.cfi_offset 5, -32
  39              		.cfi_offset 6, -28
  40              		.cfi_offset 7, -24
  41              		.cfi_offset 8, -20
  42              		.cfi_offset 9, -16
  43              		.cfi_offset 10, -12
  44              		.cfi_offset 11, -8
  45              		.cfi_offset 14, -4
ARM GAS  /tmp/ccuUvpuw.s 			page 66


  46 0004 83B0     		sub	sp, sp, #12
  47              	.LCFI1:
  48              		.cfi_def_cfa_offset 48
  49 0006 0646     		mov	r6, r0
  50 0008 0D46     		mov	r5, r1
  51 000a 1446     		mov	r4, r2
  52 000c 1F46     		mov	r7, r3
  53 000e DDF83090 		ldr	r9, [sp, #48]
  54 0012 DDF83480 		ldr	r8, [sp, #52]
3662:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DRV_API  *p_drv_api;
  55              		.loc 1 3662 5 is_stmt 1 view .LVU2
3663:rtos/uC-USB-Device/Source/usbd_ep.c **** 
3664:rtos/uC-USB-Device/Source/usbd_ep.c **** 
3665:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_drv_api = p_drv->API_Ptr;                                 /* Get dev drv API struct.         
  56              		.loc 1 3665 5 view .LVU3
  57              		.loc 1 3665 15 is_stmt 0 view .LVU4
  58 0016 D0F804A0 		ldr	r10, [r0, #4]
  59              	.LVL1:
3666:rtos/uC-USB-Device/Source/usbd_ep.c **** 
3667:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DBG_STATS_EP_INC(p_drv->DevNbr, p_ep->Ix, DrvTxNbr);
  60              		.loc 1 3667 61 is_stmt 1 view .LVU5
3668:rtos/uC-USB-Device/Source/usbd_ep.c **** 
3669:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_urb->NextXferLen = p_drv_api->EP_Tx(p_drv,
  61              		.loc 1 3669 5 view .LVU6
  62              		.loc 1 3669 35 is_stmt 0 view .LVU7
  63 001a DAF834B0 		ldr	fp, [r10, #52]
  64              		.loc 1 3669 26 view .LVU8
  65 001e CDF80080 		str	r8, [sp]
  66 0022 4B46     		mov	r3, r9
  67              	.LVL2:
  68              		.loc 1 3669 26 view .LVU9
  69 0024 3A46     		mov	r2, r7
  70              	.LVL3:
  71              		.loc 1 3669 26 view .LVU10
  72 0026 8978     		ldrb	r1, [r1, #2]	@ zero_extendqisi2
  73              	.LVL4:
  74              		.loc 1 3669 26 view .LVU11
  75 0028 D847     		blx	fp
  76              	.LVL5:
  77              		.loc 1 3669 24 view .LVU12
  78 002a E060     		str	r0, [r4, #12]
3670:rtos/uC-USB-Device/Source/usbd_ep.c ****                                           p_ep->Addr,
3671:rtos/uC-USB-Device/Source/usbd_ep.c ****                                           p_buf_cur,
3672:rtos/uC-USB-Device/Source/usbd_ep.c ****                                           len,
3673:rtos/uC-USB-Device/Source/usbd_ep.c ****                                           p_err);
3674:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (*p_err != USBD_ERR_NONE) {
  79              		.loc 1 3674 5 is_stmt 1 view .LVU13
  80              		.loc 1 3674 9 is_stmt 0 view .LVU14
  81 002c B8F80030 		ldrh	r3, [r8]
  82              		.loc 1 3674 8 view .LVU15
  83 0030 D3B9     		cbnz	r3, .L1
3675:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
3676:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
3677:rtos/uC-USB-Device/Source/usbd_ep.c **** 
3678:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_urb->NextXferLen == len) {                            /* Xfer can be done is a single tra
  84              		.loc 1 3678 5 is_stmt 1 view .LVU16
  85              		.loc 1 3678 8 is_stmt 0 view .LVU17
ARM GAS  /tmp/ccuUvpuw.s 			page 67


  86 0032 4845     		cmp	r0, r9
  87 0034 1BD0     		beq	.L7
3679:rtos/uC-USB-Device/Source/usbd_ep.c ****         p_ep->XferState = USBD_XFER_STATE_ASYNC;
3680:rtos/uC-USB-Device/Source/usbd_ep.c ****     } else if ((p_ep->Attrib & USBD_EP_TYPE_MASK) != USBD_EP_TYPE_ISOC) {
  88              		.loc 1 3680 12 is_stmt 1 view .LVU18
  89              		.loc 1 3680 21 is_stmt 0 view .LVU19
  90 0036 EB78     		ldrb	r3, [r5, #3]	@ zero_extendqisi2
  91              		.loc 1 3680 15 view .LVU20
  92 0038 03F00303 		and	r3, r3, #3
  93 003c 012B     		cmp	r3, #1
  94 003e 19D0     		beq	.L5
3681:rtos/uC-USB-Device/Source/usbd_ep.c ****         p_ep->XferState = USBD_XFER_STATE_ASYNC_PARTIAL;        /* Xfer will have to be done in man
  95              		.loc 1 3681 9 is_stmt 1 view .LVU21
  96              		.loc 1 3681 25 is_stmt 0 view .LVU22
  97 0040 0323     		movs	r3, #3
  98 0042 6B70     		strb	r3, [r5, #1]
  99              	.L4:
3682:rtos/uC-USB-Device/Source/usbd_ep.c ****     } else {
3683:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_TX;                                    /* Cannot split xfer on isoc EP.   
3684:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
3685:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
3686:rtos/uC-USB-Device/Source/usbd_ep.c **** 
3687:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DBG_STATS_EP_INC(p_drv->DevNbr, p_ep->Ix, DrvTxSuccessNbr);
 100              		.loc 1 3687 68 is_stmt 1 view .LVU23
3688:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DBG_STATS_EP_INC(p_drv->DevNbr, p_ep->Ix, DrvTxStartNbr);
 101              		.loc 1 3688 66 view .LVU24
3689:rtos/uC-USB-Device/Source/usbd_ep.c **** 
3690:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_drv_api->EP_TxStart(p_drv,
 102              		.loc 1 3690 5 view .LVU25
 103              		.loc 1 3690 14 is_stmt 0 view .LVU26
 104 0044 DAF83890 		ldr	r9, [r10, #56]
 105              		.loc 1 3690 5 view .LVU27
 106 0048 CDF80080 		str	r8, [sp]
 107 004c E368     		ldr	r3, [r4, #12]
 108 004e 3A46     		mov	r2, r7
 109 0050 A978     		ldrb	r1, [r5, #2]	@ zero_extendqisi2
 110 0052 3046     		mov	r0, r6
 111 0054 C847     		blx	r9
 112              	.LVL6:
3691:rtos/uC-USB-Device/Source/usbd_ep.c ****                           p_ep->Addr,
3692:rtos/uC-USB-Device/Source/usbd_ep.c ****                           p_buf_cur,
3693:rtos/uC-USB-Device/Source/usbd_ep.c ****                           p_urb->NextXferLen,
3694:rtos/uC-USB-Device/Source/usbd_ep.c ****                           p_err);
3695:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (*p_err == USBD_ERR_NONE) {
 113              		.loc 1 3695 5 is_stmt 1 view .LVU28
 114              		.loc 1 3695 9 is_stmt 0 view .LVU29
 115 0056 B8F80030 		ldrh	r3, [r8]
 116              		.loc 1 3695 8 view .LVU30
 117 005a 2BB9     		cbnz	r3, .L1
3696:rtos/uC-USB-Device/Source/usbd_ep.c ****         p_urb->XferLen     += p_urb->NextXferLen;               /* Error not accounted on total xfe
 118              		.loc 1 3696 9 is_stmt 1 view .LVU31
 119              		.loc 1 3696 36 is_stmt 0 view .LVU32
 120 005c E268     		ldr	r2, [r4, #12]
 121              		.loc 1 3696 28 view .LVU33
 122 005e A368     		ldr	r3, [r4, #8]
 123 0060 1344     		add	r3, r3, r2
 124 0062 A360     		str	r3, [r4, #8]
ARM GAS  /tmp/ccuUvpuw.s 			page 68


3697:rtos/uC-USB-Device/Source/usbd_ep.c ****         p_urb->NextXferLen  = 0u;
 125              		.loc 1 3697 9 is_stmt 1 view .LVU34
 126              		.loc 1 3697 29 is_stmt 0 view .LVU35
 127 0064 0023     		movs	r3, #0
 128 0066 E360     		str	r3, [r4, #12]
 129              	.L1:
3698:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_DBG_STATS_EP_INC(p_drv->DevNbr, p_ep->Ix, DrvTxStartSuccessNbr);
3699:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
3700:rtos/uC-USB-Device/Source/usbd_ep.c **** 
3701:rtos/uC-USB-Device/Source/usbd_ep.c ****     return;
3702:rtos/uC-USB-Device/Source/usbd_ep.c **** }
 130              		.loc 1 3702 1 view .LVU36
 131 0068 03B0     		add	sp, sp, #12
 132              	.LCFI2:
 133              		.cfi_remember_state
 134              		.cfi_def_cfa_offset 36
 135              		@ sp needed
 136 006a BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 137              	.LVL7:
 138              	.L7:
 139              	.LCFI3:
 140              		.cfi_restore_state
3679:rtos/uC-USB-Device/Source/usbd_ep.c ****     } else if ((p_ep->Attrib & USBD_EP_TYPE_MASK) != USBD_EP_TYPE_ISOC) {
 141              		.loc 1 3679 9 is_stmt 1 view .LVU37
3679:rtos/uC-USB-Device/Source/usbd_ep.c ****     } else if ((p_ep->Attrib & USBD_EP_TYPE_MASK) != USBD_EP_TYPE_ISOC) {
 142              		.loc 1 3679 25 is_stmt 0 view .LVU38
 143 006e 0223     		movs	r3, #2
 144 0070 6B70     		strb	r3, [r5, #1]
 145 0072 E7E7     		b	.L4
 146              	.L5:
3683:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 147              		.loc 1 3683 8 is_stmt 1 view .LVU39
3683:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 148              		.loc 1 3683 15 is_stmt 0 view .LVU40
 149 0074 0323     		movs	r3, #3
 150 0076 A8F80030 		strh	r3, [r8]	@ movhi
3684:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 151              		.loc 1 3684 9 is_stmt 1 view .LVU41
 152 007a F5E7     		b	.L1
 153              		.cfi_endproc
 154              	.LFE30:
 156              		.section	.text.USBD_URB_Queue,"ax",%progbits
 157              		.align	1
 158              		.syntax unified
 159              		.thumb
 160              		.thumb_func
 161              		.fpu fpv4-sp-d16
 163              	USBD_URB_Queue:
 164              	.LVL8:
 165              	.LFB38:
3703:rtos/uC-USB-Device/Source/usbd_ep.c **** 
3704:rtos/uC-USB-Device/Source/usbd_ep.c **** 
3705:rtos/uC-USB-Device/Source/usbd_ep.c **** /*
3706:rtos/uC-USB-Device/Source/usbd_ep.c **** ***************************************************************************************************
3707:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                            USBD_EP_Rx()
3708:rtos/uC-USB-Device/Source/usbd_ep.c **** *
3709:rtos/uC-USB-Device/Source/usbd_ep.c **** * Description : Receive data on OUT endpoint.This function should not be called from Interrupt Cont
ARM GAS  /tmp/ccuUvpuw.s 			page 69


3710:rtos/uC-USB-Device/Source/usbd_ep.c **** *
3711:rtos/uC-USB-Device/Source/usbd_ep.c **** * Argument(s) : p_drv           Pointer to device driver structure.
3712:rtos/uC-USB-Device/Source/usbd_ep.c **** *               -----           Argument checked by caller.
3713:rtos/uC-USB-Device/Source/usbd_ep.c **** *
3714:rtos/uC-USB-Device/Source/usbd_ep.c **** *               p_ep            Pointer to endpoint on which data will be received.
3715:rtos/uC-USB-Device/Source/usbd_ep.c **** *               ----            Argument checked by caller.
3716:rtos/uC-USB-Device/Source/usbd_ep.c **** *
3717:rtos/uC-USB-Device/Source/usbd_ep.c **** *               p_buf           Pointer to destination buffer to receive data.
3718:rtos/uC-USB-Device/Source/usbd_ep.c **** *
3719:rtos/uC-USB-Device/Source/usbd_ep.c **** *               buf_len         Number of octets to receive.
3720:rtos/uC-USB-Device/Source/usbd_ep.c **** *
3721:rtos/uC-USB-Device/Source/usbd_ep.c **** *               async_fnct      Function that will be invoked upon completion of receive operation.
3722:rtos/uC-USB-Device/Source/usbd_ep.c **** *
3723:rtos/uC-USB-Device/Source/usbd_ep.c **** *               p_async_arg     Pointer to argument that will be passed as parameter of 'async_fnct
3724:rtos/uC-USB-Device/Source/usbd_ep.c **** *
3725:rtos/uC-USB-Device/Source/usbd_ep.c **** *               timeout_ms      Timeout in milliseconds.
3726:rtos/uC-USB-Device/Source/usbd_ep.c **** *
3727:rtos/uC-USB-Device/Source/usbd_ep.c **** *               p_err           Pointer to variable that will receive return error code from this f
3728:rtos/uC-USB-Device/Source/usbd_ep.c **** *               -----           Argument checked by caller.
3729:rtos/uC-USB-Device/Source/usbd_ep.c **** 
3730:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                   USBD_ERR_NONE               Data successfully received.
3731:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                   USBD_ERR_NULL_PTR           Null pointer passed as argument.
3732:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                   USBD_ERR_EP_IO_PENDING      Transfer already in progress on end
3733:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                   USBD_ERR_OS_FAIL            OS operation failed.
3734:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                   USBD_ERR_RX                 Generic Rx error.
3735:rtos/uC-USB-Device/Source/usbd_ep.c **** *
3736:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                   - RETURNED BY USBD_URB_Get() -
3737:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                   See USBD_URB_Get() for additional return error codes.
3738:rtos/uC-USB-Device/Source/usbd_ep.c **** *
3739:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                   - RETURNED BY USBD_EP_RxStartAsyncProcess() -
3740:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                   See USBD_EP_RxStartAsyncProcess() for additional return error c
3741:rtos/uC-USB-Device/Source/usbd_ep.c **** *
3742:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                   - RETURNED BY USBD_OS_EP_SignalPend() -
3743:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                   See USBD_OS_EP_SignalPend() for additional return error codes.
3744:rtos/uC-USB-Device/Source/usbd_ep.c **** *
3745:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                   - RETURNED BY 'p_drv_api->EP_RxStart()' -
3746:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                   See specific driver(s) 'p_drv_api->EP_RxStart()' for additional
3747:rtos/uC-USB-Device/Source/usbd_ep.c **** *
3748:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                   - RETURNED BY 'p_drv_api->EP_Rx()' -
3749:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                   See specific driver(s) 'p_drv_api->EP_Rx()' for additional retu
3750:rtos/uC-USB-Device/Source/usbd_ep.c **** *
3751:rtos/uC-USB-Device/Source/usbd_ep.c **** * Return(s)   : Number of octets received, if NO error(s).
3752:rtos/uC-USB-Device/Source/usbd_ep.c **** *
3753:rtos/uC-USB-Device/Source/usbd_ep.c **** *               0,                         otherwise.
3754:rtos/uC-USB-Device/Source/usbd_ep.c **** *
3755:rtos/uC-USB-Device/Source/usbd_ep.c **** * Note(s)     : (1) This function SHOULD NOT be called from interrupt service routine (ISR).
3756:rtos/uC-USB-Device/Source/usbd_ep.c **** *
3757:rtos/uC-USB-Device/Source/usbd_ep.c **** *               (2) Endpoint must be locked when calling this function.
3758:rtos/uC-USB-Device/Source/usbd_ep.c **** *
3759:rtos/uC-USB-Device/Source/usbd_ep.c **** *               (3) During a synchronous transfer, endpoint is unlocked before pending on transfer
3760:rtos/uC-USB-Device/Source/usbd_ep.c **** *                   completion to be able to abort. Since the endpoint is already locked when this
3761:rtos/uC-USB-Device/Source/usbd_ep.c **** *                   function is called (see callers functions), it releases the lock before pending
3762:rtos/uC-USB-Device/Source/usbd_ep.c **** *                   re-locks once the transfer completes.
3763:rtos/uC-USB-Device/Source/usbd_ep.c **** *
3764:rtos/uC-USB-Device/Source/usbd_ep.c **** *               (4) This condition covers also the case where the transfer length is multiple of th
3765:rtos/uC-USB-Device/Source/usbd_ep.c **** *                   maximum packet size. In that case, host sends a zero-length packet considered a
3766:rtos/uC-USB-Device/Source/usbd_ep.c **** *                   a short packet for the condition.
ARM GAS  /tmp/ccuUvpuw.s 			page 70


3767:rtos/uC-USB-Device/Source/usbd_ep.c **** ***************************************************************************************************
3768:rtos/uC-USB-Device/Source/usbd_ep.c **** */
3769:rtos/uC-USB-Device/Source/usbd_ep.c **** 
3770:rtos/uC-USB-Device/Source/usbd_ep.c **** static  CPU_INT32U  USBD_EP_Rx (USBD_DRV         *p_drv,
3771:rtos/uC-USB-Device/Source/usbd_ep.c ****                                 USBD_EP          *p_ep,
3772:rtos/uC-USB-Device/Source/usbd_ep.c ****                                 void             *p_buf,
3773:rtos/uC-USB-Device/Source/usbd_ep.c ****                                 CPU_INT32U        buf_len,
3774:rtos/uC-USB-Device/Source/usbd_ep.c ****                                 USBD_ASYNC_FNCT   async_fnct,
3775:rtos/uC-USB-Device/Source/usbd_ep.c ****                                 void             *p_async_arg,
3776:rtos/uC-USB-Device/Source/usbd_ep.c ****                                 CPU_INT16U        timeout_ms,
3777:rtos/uC-USB-Device/Source/usbd_ep.c ****                                 USBD_ERR         *p_err)
3778:rtos/uC-USB-Device/Source/usbd_ep.c **** {
3779:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_URB         *p_urb;
3780:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DRV_API     *p_drv_api;
3781:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_XFER_STATE   prev_xfer_state;
3782:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_INT08U       *p_buf_cur;
3783:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_INT32U        xfer_len;
3784:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_INT32U        xfer_tot;
3785:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_INT32U        prev_xfer_len;
3786:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_ERR          local_err;
3787:rtos/uC-USB-Device/Source/usbd_ep.c **** 
3788:rtos/uC-USB-Device/Source/usbd_ep.c **** 
3789:rtos/uC-USB-Device/Source/usbd_ep.c ****     if ((buf_len !=         0u) &&
3790:rtos/uC-USB-Device/Source/usbd_ep.c ****         (p_buf   == (void *)0)) {
3791:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_NULL_PTR;
3792:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (0u);
3793:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
3794:rtos/uC-USB-Device/Source/usbd_ep.c **** 
3795:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (async_fnct == (USBD_ASYNC_FNCT)0) {
3796:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_DBG_STATS_EP_INC(p_drv->DevNbr, p_ep->Ix, RxSyncExecNbr);
3797:rtos/uC-USB-Device/Source/usbd_ep.c ****         if (p_ep->XferState != USBD_XFER_STATE_NONE) {
3798:rtos/uC-USB-Device/Source/usbd_ep.c ****            *p_err = USBD_ERR_EP_IO_PENDING;
3799:rtos/uC-USB-Device/Source/usbd_ep.c ****             return (0u);
3800:rtos/uC-USB-Device/Source/usbd_ep.c ****         }
3801:rtos/uC-USB-Device/Source/usbd_ep.c ****     } else {
3802:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_DBG_STATS_EP_INC(p_drv->DevNbr, p_ep->Ix, RxAsyncExecNbr);
3803:rtos/uC-USB-Device/Source/usbd_ep.c ****         if ((p_ep->XferState != USBD_XFER_STATE_NONE) &&
3804:rtos/uC-USB-Device/Source/usbd_ep.c ****             (p_ep->XferState != USBD_XFER_STATE_ASYNC)) {
3805:rtos/uC-USB-Device/Source/usbd_ep.c ****            *p_err = USBD_ERR_EP_IO_PENDING;
3806:rtos/uC-USB-Device/Source/usbd_ep.c ****             return (0u);
3807:rtos/uC-USB-Device/Source/usbd_ep.c ****         }
3808:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
3809:rtos/uC-USB-Device/Source/usbd_ep.c **** 
3810:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_urb = USBD_URB_Get(p_drv->DevNbr, p_ep, p_err);
3811:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (*p_err != USBD_ERR_NONE) {
3812:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (0u);
3813:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
3814:rtos/uC-USB-Device/Source/usbd_ep.c **** 
3815:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_urb->BufPtr       = (CPU_INT08U *)p_buf;                  /* Init 'p_urb' fields.            
3816:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_urb->BufLen       =  buf_len;
3817:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_urb->XferLen      =  0u;
3818:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_urb->NextXferLen  =  0u;
3819:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_urb->AsyncFnct    =  async_fnct;
3820:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_urb->AsyncFnctArg =  p_async_arg;
3821:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_urb->Err          =  USBD_ERR_NONE;
3822:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_urb->NextPtr      = (USBD_URB *)0;
3823:rtos/uC-USB-Device/Source/usbd_ep.c **** 
ARM GAS  /tmp/ccuUvpuw.s 			page 71


3824:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (async_fnct != (USBD_ASYNC_FNCT)0) {                     /* -------------------- ASYNC XFER 
3825:rtos/uC-USB-Device/Source/usbd_ep.c ****         p_urb->State    = USBD_URB_STATE_XFER_ASYNC;
3826:rtos/uC-USB-Device/Source/usbd_ep.c ****         prev_xfer_state = p_ep->XferState;                      /* Keep prev XferState, to restore 
3827:rtos/uC-USB-Device/Source/usbd_ep.c ****         p_ep->XferState = USBD_XFER_STATE_ASYNC;                /* Set XferState before submitting 
3828:rtos/uC-USB-Device/Source/usbd_ep.c **** 
3829:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_EP_RxStartAsyncProcess(p_drv,
3830:rtos/uC-USB-Device/Source/usbd_ep.c ****                                     p_ep,
3831:rtos/uC-USB-Device/Source/usbd_ep.c ****                                     p_urb,
3832:rtos/uC-USB-Device/Source/usbd_ep.c ****                                     p_urb->BufPtr,
3833:rtos/uC-USB-Device/Source/usbd_ep.c ****                                     p_urb->BufLen,
3834:rtos/uC-USB-Device/Source/usbd_ep.c ****                                     p_err);
3835:rtos/uC-USB-Device/Source/usbd_ep.c ****         if (*p_err == USBD_ERR_NONE) {
3836:rtos/uC-USB-Device/Source/usbd_ep.c ****             USBD_URB_Queue(p_ep, p_urb);                        /* If no err, queue URB.           
3837:rtos/uC-USB-Device/Source/usbd_ep.c ****             USBD_DBG_STATS_EP_INC(p_drv->DevNbr, p_ep->Ix, RxAsyncSuccessNbr);
3838:rtos/uC-USB-Device/Source/usbd_ep.c ****         } else {
3839:rtos/uC-USB-Device/Source/usbd_ep.c ****             p_ep->XferState = prev_xfer_state;                  /* If an err occured, restore prev 
3840:rtos/uC-USB-Device/Source/usbd_ep.c ****             USBD_URB_Free(p_drv->DevNbr, p_ep, p_urb);          /* Free URB.                       
3841:rtos/uC-USB-Device/Source/usbd_ep.c ****         }
3842:rtos/uC-USB-Device/Source/usbd_ep.c **** 
3843:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (0u);
3844:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
3845:rtos/uC-USB-Device/Source/usbd_ep.c **** 
3846:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_ep->XferState = USBD_XFER_STATE_SYNC;                     /* -------------------- SYNC XFER -
3847:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_urb->State    = USBD_URB_STATE_XFER_SYNC;
3848:rtos/uC-USB-Device/Source/usbd_ep.c **** 
3849:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_URB_Queue(p_ep, p_urb);
3850:rtos/uC-USB-Device/Source/usbd_ep.c **** 
3851:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_drv_api          = p_drv->API_Ptr;                        /* Get dev drv API struct.         
3852:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_urb->NextXferLen = p_urb->BufLen;
3853:rtos/uC-USB-Device/Source/usbd_ep.c ****    *p_err              = USBD_ERR_NONE;
3854:rtos/uC-USB-Device/Source/usbd_ep.c **** 
3855:rtos/uC-USB-Device/Source/usbd_ep.c ****     while ((*p_err              == USBD_ERR_NONE) &&
3856:rtos/uC-USB-Device/Source/usbd_ep.c ****            ( p_urb->NextXferLen >  0u)) {
3857:rtos/uC-USB-Device/Source/usbd_ep.c **** 
3858:rtos/uC-USB-Device/Source/usbd_ep.c ****         p_buf_cur = &p_urb->BufPtr[p_urb->XferLen];
3859:rtos/uC-USB-Device/Source/usbd_ep.c **** 
3860:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_DBG_STATS_EP_INC(p_drv->DevNbr, p_ep->Ix, DrvRxStartNbr);
3861:rtos/uC-USB-Device/Source/usbd_ep.c ****         p_urb->NextXferLen = p_drv_api->EP_RxStart(p_drv,
3862:rtos/uC-USB-Device/Source/usbd_ep.c ****                                                    p_ep->Addr,
3863:rtos/uC-USB-Device/Source/usbd_ep.c ****                                                    p_buf_cur,
3864:rtos/uC-USB-Device/Source/usbd_ep.c ****                                                    p_urb->NextXferLen,
3865:rtos/uC-USB-Device/Source/usbd_ep.c ****                                                    p_err);
3866:rtos/uC-USB-Device/Source/usbd_ep.c ****         if (*p_err != USBD_ERR_NONE) {
3867:rtos/uC-USB-Device/Source/usbd_ep.c ****             break;
3868:rtos/uC-USB-Device/Source/usbd_ep.c ****         }
3869:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_DBG_STATS_EP_INC(p_drv->DevNbr, p_ep->Ix, DrvRxStartSuccessNbr);
3870:rtos/uC-USB-Device/Source/usbd_ep.c **** 
3871:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_OS_EP_LockRelease(p_drv->DevNbr,                   /* Unlock before pending on complet
3872:rtos/uC-USB-Device/Source/usbd_ep.c ****                                p_ep->Ix);
3873:rtos/uC-USB-Device/Source/usbd_ep.c **** 
3874:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_OS_EP_SignalPend(p_drv->DevNbr, p_ep->Ix, timeout_ms, p_err);
3875:rtos/uC-USB-Device/Source/usbd_ep.c **** 
3876:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_OS_EP_LockAcquire(p_drv->DevNbr,                   /* Re-lock EP after xfer completion
3877:rtos/uC-USB-Device/Source/usbd_ep.c ****                                p_ep->Ix,
3878:rtos/uC-USB-Device/Source/usbd_ep.c ****                                0u,
3879:rtos/uC-USB-Device/Source/usbd_ep.c ****                               &local_err);
3880:rtos/uC-USB-Device/Source/usbd_ep.c **** 
ARM GAS  /tmp/ccuUvpuw.s 			page 72


3881:rtos/uC-USB-Device/Source/usbd_ep.c ****         if (*p_err == USBD_ERR_OS_TIMEOUT) {
3882:rtos/uC-USB-Device/Source/usbd_ep.c ****             p_drv_api->EP_Abort(p_drv, p_ep->Addr);
3883:rtos/uC-USB-Device/Source/usbd_ep.c ****             USBD_DBG_STATS_EP_INC(p_drv->DevNbr, p_ep->Ix, RxSyncTimeoutErrNbr);
3884:rtos/uC-USB-Device/Source/usbd_ep.c ****             break;
3885:rtos/uC-USB-Device/Source/usbd_ep.c ****         } else if (*p_err != USBD_ERR_NONE) {
3886:rtos/uC-USB-Device/Source/usbd_ep.c ****             break;
3887:rtos/uC-USB-Device/Source/usbd_ep.c ****         } else if (local_err != USBD_ERR_NONE) {
3888:rtos/uC-USB-Device/Source/usbd_ep.c ****            *p_err = USBD_ERR_OS_FAIL;
3889:rtos/uC-USB-Device/Source/usbd_ep.c ****             break;
3890:rtos/uC-USB-Device/Source/usbd_ep.c ****         }
3891:rtos/uC-USB-Device/Source/usbd_ep.c **** 
3892:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_DBG_STATS_EP_INC(p_drv->DevNbr, p_ep->Ix, DrvRxNbr);
3893:rtos/uC-USB-Device/Source/usbd_ep.c ****         xfer_len = p_drv_api->EP_Rx(p_drv,
3894:rtos/uC-USB-Device/Source/usbd_ep.c ****                                     p_ep->Addr,
3895:rtos/uC-USB-Device/Source/usbd_ep.c ****                                     p_buf_cur,
3896:rtos/uC-USB-Device/Source/usbd_ep.c ****                                     p_urb->NextXferLen,
3897:rtos/uC-USB-Device/Source/usbd_ep.c ****                                     p_err);
3898:rtos/uC-USB-Device/Source/usbd_ep.c ****         if (*p_err != USBD_ERR_NONE) {
3899:rtos/uC-USB-Device/Source/usbd_ep.c ****             break;
3900:rtos/uC-USB-Device/Source/usbd_ep.c ****         }
3901:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_DBG_STATS_EP_INC(p_drv->DevNbr, p_ep->Ix, DrvRxSuccessNbr);
3902:rtos/uC-USB-Device/Source/usbd_ep.c **** 
3903:rtos/uC-USB-Device/Source/usbd_ep.c ****         if (xfer_len > p_urb->NextXferLen) {                    /* Rx'd more data than what was exp
3904:rtos/uC-USB-Device/Source/usbd_ep.c ****             p_urb->XferLen += p_urb->NextXferLen;
3905:rtos/uC-USB-Device/Source/usbd_ep.c ****            *p_err = USBD_ERR_RX;
3906:rtos/uC-USB-Device/Source/usbd_ep.c ****         } else {
3907:rtos/uC-USB-Device/Source/usbd_ep.c ****             p_urb->XferLen     += xfer_len;
3908:rtos/uC-USB-Device/Source/usbd_ep.c ****             prev_xfer_len       = p_urb->NextXferLen;
3909:rtos/uC-USB-Device/Source/usbd_ep.c ****             p_urb->NextXferLen  = p_urb->BufLen - p_urb->XferLen;
3910:rtos/uC-USB-Device/Source/usbd_ep.c ****             if ((xfer_len == 0u) ||                             /* Rx'd a ZLP.                     
3911:rtos/uC-USB-Device/Source/usbd_ep.c ****                 (xfer_len  <  prev_xfer_len)) {                 /* Rx'd a short pkt (see Note #4). 
3912:rtos/uC-USB-Device/Source/usbd_ep.c ****                 p_urb->NextXferLen = 0u;
3913:rtos/uC-USB-Device/Source/usbd_ep.c ****             }
3914:rtos/uC-USB-Device/Source/usbd_ep.c ****         }
3915:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
3916:rtos/uC-USB-Device/Source/usbd_ep.c **** 
3917:rtos/uC-USB-Device/Source/usbd_ep.c ****     xfer_tot = p_urb->XferLen;
3918:rtos/uC-USB-Device/Source/usbd_ep.c **** 
3919:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_URB_Dequeue(p_ep);
3920:rtos/uC-USB-Device/Source/usbd_ep.c **** 
3921:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_URB_Free(p_drv->DevNbr, p_ep, p_urb);
3922:rtos/uC-USB-Device/Source/usbd_ep.c **** 
3923:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DBG_STATS_EP_INC_IF_TRUE(p_drv->DevNbr, p_ep->Ix, RxSyncSuccessNbr, (*p_err == USBD_ERR_NO
3924:rtos/uC-USB-Device/Source/usbd_ep.c **** 
3925:rtos/uC-USB-Device/Source/usbd_ep.c ****     return (xfer_tot);
3926:rtos/uC-USB-Device/Source/usbd_ep.c **** }
3927:rtos/uC-USB-Device/Source/usbd_ep.c **** 
3928:rtos/uC-USB-Device/Source/usbd_ep.c **** 
3929:rtos/uC-USB-Device/Source/usbd_ep.c **** /*
3930:rtos/uC-USB-Device/Source/usbd_ep.c **** ***************************************************************************************************
3931:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                            USBD_EP_Tx()
3932:rtos/uC-USB-Device/Source/usbd_ep.c **** *
3933:rtos/uC-USB-Device/Source/usbd_ep.c **** * Description : Send data on IN endpoints.
3934:rtos/uC-USB-Device/Source/usbd_ep.c **** *
3935:rtos/uC-USB-Device/Source/usbd_ep.c **** * Argument(s) : p_drv           Pointer to device driver structure.
3936:rtos/uC-USB-Device/Source/usbd_ep.c **** *               -----           Argument checked by caller.
3937:rtos/uC-USB-Device/Source/usbd_ep.c **** *
ARM GAS  /tmp/ccuUvpuw.s 			page 73


3938:rtos/uC-USB-Device/Source/usbd_ep.c **** *               p_ep            Pointer to endpoint on which data will be sent.
3939:rtos/uC-USB-Device/Source/usbd_ep.c **** *               ----            Argument checked by caller.
3940:rtos/uC-USB-Device/Source/usbd_ep.c **** *
3941:rtos/uC-USB-Device/Source/usbd_ep.c **** *               p_buf           Pointer to buffer of data that will be sent.
3942:rtos/uC-USB-Device/Source/usbd_ep.c **** *
3943:rtos/uC-USB-Device/Source/usbd_ep.c **** *               buf_len         Number of octets to transmit.
3944:rtos/uC-USB-Device/Source/usbd_ep.c **** *
3945:rtos/uC-USB-Device/Source/usbd_ep.c **** *               async_fnct      Function that will be invoked upon completion of transmit operation
3946:rtos/uC-USB-Device/Source/usbd_ep.c **** *
3947:rtos/uC-USB-Device/Source/usbd_ep.c **** *               p_async_arg     Pointer to argument that will be passed as parameter of 'async_fnct
3948:rtos/uC-USB-Device/Source/usbd_ep.c **** *
3949:rtos/uC-USB-Device/Source/usbd_ep.c **** *               timeout_ms      Timeout in milliseconds.
3950:rtos/uC-USB-Device/Source/usbd_ep.c **** *
3951:rtos/uC-USB-Device/Source/usbd_ep.c **** *               end             End-of-transfer flag (see Note #2).
3952:rtos/uC-USB-Device/Source/usbd_ep.c **** *
3953:rtos/uC-USB-Device/Source/usbd_ep.c **** *               p_err           Pointer to variable that will receive return error code from this f
3954:rtos/uC-USB-Device/Source/usbd_ep.c **** *               -----           Argument checked by caller.
3955:rtos/uC-USB-Device/Source/usbd_ep.c **** *
3956:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                   USBD_ERR_NONE               Data successfully transmitted.
3957:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                   USBD_ERR_NULL_PTR           Null pointer passed as argument.
3958:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                   USBD_ERR_EP_IO_PENDING      Transfer already in progress on end
3959:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                   USBD_ERR_OS_FAIL            OS operation failed.
3960:rtos/uC-USB-Device/Source/usbd_ep.c **** *
3961:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                   - RETURNED BY USBD_URB_Get() -
3962:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                   See USBD_URB_Get() for additional return error codes.
3963:rtos/uC-USB-Device/Source/usbd_ep.c **** *
3964:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                   - RETURNED BY USBD_EP_TxAsyncProcess() -
3965:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                   See USBD_EP_TxAsyncProcess() for additional return error codes.
3966:rtos/uC-USB-Device/Source/usbd_ep.c **** *
3967:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                   - RETURNED BY USBD_OS_EP_SignalPend() -
3968:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                   See USBD_OS_EP_SignalPend() for additional return error codes.
3969:rtos/uC-USB-Device/Source/usbd_ep.c **** *
3970:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                   - RETURNED BY 'p_drv_api->EP_Tx()' -
3971:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                   See specific driver(s) 'p_drv_api->EP_Tx()' for additional retu
3972:rtos/uC-USB-Device/Source/usbd_ep.c **** *
3973:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                   - RETURNED BY 'p_drv_api->EP_TxStart()' -
3974:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                   See specific driver(s) 'p_drv_api->EP_TxStart()' for additional
3975:rtos/uC-USB-Device/Source/usbd_ep.c **** *
3976:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                   - RETURNED BY 'p_drv_api->EP_TxZLP()' -
3977:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                   See specific driver(s) 'p_drv_api->EP_TxZLP()' for additional r
3978:rtos/uC-USB-Device/Source/usbd_ep.c **** *
3979:rtos/uC-USB-Device/Source/usbd_ep.c **** * Return(s)   : Number of octets transmitted, if NO error(s).
3980:rtos/uC-USB-Device/Source/usbd_ep.c **** *
3981:rtos/uC-USB-Device/Source/usbd_ep.c **** *               0,                            otherwise.
3982:rtos/uC-USB-Device/Source/usbd_ep.c **** *
3983:rtos/uC-USB-Device/Source/usbd_ep.c **** * Note(s)     : (1) This function SHOULD NOT be called from interrupt service routine (ISR).
3984:rtos/uC-USB-Device/Source/usbd_ep.c **** *
3985:rtos/uC-USB-Device/Source/usbd_ep.c **** *               (2) If end-of-transfer is set and transfer length is multiple of maximum packet siz
3986:rtos/uC-USB-Device/Source/usbd_ep.c **** *                   a zero-length packet is transferred to indicate a short transfer to the host.
3987:rtos/uC-USB-Device/Source/usbd_ep.c **** *
3988:rtos/uC-USB-Device/Source/usbd_ep.c **** *               (3) Endpoint must be locked when calling this function.
3989:rtos/uC-USB-Device/Source/usbd_ep.c **** *
3990:rtos/uC-USB-Device/Source/usbd_ep.c **** *               (4) During a synchronous transfer, endpoint is unlocked before pending on transfer
3991:rtos/uC-USB-Device/Source/usbd_ep.c **** *                   completion to be able to abort. Since the endpoint is already locked when this
3992:rtos/uC-USB-Device/Source/usbd_ep.c **** *                   function is called (see callers functions), it releases the lock before pending
3993:rtos/uC-USB-Device/Source/usbd_ep.c **** *                   re-locks once the transfer completes.
3994:rtos/uC-USB-Device/Source/usbd_ep.c **** ***************************************************************************************************
ARM GAS  /tmp/ccuUvpuw.s 			page 74


3995:rtos/uC-USB-Device/Source/usbd_ep.c **** */
3996:rtos/uC-USB-Device/Source/usbd_ep.c **** 
3997:rtos/uC-USB-Device/Source/usbd_ep.c **** static  CPU_INT32U  USBD_EP_Tx (USBD_DRV         *p_drv,
3998:rtos/uC-USB-Device/Source/usbd_ep.c ****                                 USBD_EP          *p_ep,
3999:rtos/uC-USB-Device/Source/usbd_ep.c ****                                 void             *p_buf,
4000:rtos/uC-USB-Device/Source/usbd_ep.c ****                                 CPU_INT32U        buf_len,
4001:rtos/uC-USB-Device/Source/usbd_ep.c ****                                 USBD_ASYNC_FNCT   async_fnct,
4002:rtos/uC-USB-Device/Source/usbd_ep.c ****                                 void             *p_async_arg,
4003:rtos/uC-USB-Device/Source/usbd_ep.c ****                                 CPU_INT16U        timeout_ms,
4004:rtos/uC-USB-Device/Source/usbd_ep.c ****                                 CPU_BOOLEAN       end,
4005:rtos/uC-USB-Device/Source/usbd_ep.c ****                                 USBD_ERR         *p_err)
4006:rtos/uC-USB-Device/Source/usbd_ep.c **** {
4007:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_URB         *p_urb;
4008:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DRV_API     *p_drv_api;
4009:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_XFER_STATE   prev_xfer_state;
4010:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_INT08U       *p_buf_cur;
4011:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_INT32U        xfer_rem;
4012:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_INT32U        xfer_tot;
4013:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_ERR          local_err;
4014:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_BOOLEAN       zlp_flag = DEF_NO;
4015:rtos/uC-USB-Device/Source/usbd_ep.c **** 
4016:rtos/uC-USB-Device/Source/usbd_ep.c **** 
4017:rtos/uC-USB-Device/Source/usbd_ep.c ****     if ((buf_len !=         0u) &&
4018:rtos/uC-USB-Device/Source/usbd_ep.c ****         (p_buf   == (void *)0)) {
4019:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_NULL_PTR;
4020:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (0u);
4021:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
4022:rtos/uC-USB-Device/Source/usbd_ep.c **** 
4023:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (async_fnct == (USBD_ASYNC_FNCT)0) {
4024:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_DBG_STATS_EP_INC(p_drv->DevNbr, p_ep->Ix, TxSyncExecNbr);
4025:rtos/uC-USB-Device/Source/usbd_ep.c ****         if (p_ep->XferState != USBD_XFER_STATE_NONE) {
4026:rtos/uC-USB-Device/Source/usbd_ep.c ****            *p_err = USBD_ERR_EP_IO_PENDING;
4027:rtos/uC-USB-Device/Source/usbd_ep.c ****             return (0u);
4028:rtos/uC-USB-Device/Source/usbd_ep.c ****         }
4029:rtos/uC-USB-Device/Source/usbd_ep.c ****     } else {
4030:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_DBG_STATS_EP_INC(p_drv->DevNbr, p_ep->Ix, TxAsyncExecNbr);
4031:rtos/uC-USB-Device/Source/usbd_ep.c ****         if ((p_ep->XferState != USBD_XFER_STATE_NONE) &&
4032:rtos/uC-USB-Device/Source/usbd_ep.c ****             (p_ep->XferState != USBD_XFER_STATE_ASYNC)) {
4033:rtos/uC-USB-Device/Source/usbd_ep.c ****            *p_err = USBD_ERR_EP_IO_PENDING;
4034:rtos/uC-USB-Device/Source/usbd_ep.c ****             return (0u);
4035:rtos/uC-USB-Device/Source/usbd_ep.c ****         }
4036:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
4037:rtos/uC-USB-Device/Source/usbd_ep.c **** 
4038:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (buf_len == 0u) {
4039:rtos/uC-USB-Device/Source/usbd_ep.c ****         zlp_flag = DEF_YES;
4040:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
4041:rtos/uC-USB-Device/Source/usbd_ep.c **** 
4042:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_urb = USBD_URB_Get(p_drv->DevNbr, p_ep, p_err);
4043:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (*p_err != USBD_ERR_NONE) {
4044:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (0u);
4045:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
4046:rtos/uC-USB-Device/Source/usbd_ep.c **** 
4047:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_urb->BufPtr       = (CPU_INT08U *)p_buf;                  /* Init 'p_urb' fields.            
4048:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_urb->BufLen       =  buf_len;
4049:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_urb->XferLen      =  0u;
4050:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_urb->NextXferLen  =  0u;
4051:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_urb->AsyncFnct    =  async_fnct;
ARM GAS  /tmp/ccuUvpuw.s 			page 75


4052:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_urb->AsyncFnctArg =  p_async_arg;
4053:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_urb->Err          =  USBD_ERR_NONE;
4054:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_urb->NextPtr      = (USBD_URB *)0;
4055:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (end == DEF_YES) {
4056:rtos/uC-USB-Device/Source/usbd_ep.c ****         DEF_BIT_SET(p_urb->Flags, USBD_URB_FLAG_XFER_END);
4057:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
4058:rtos/uC-USB-Device/Source/usbd_ep.c **** 
4059:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (async_fnct != (USBD_ASYNC_FNCT)0) {                     /* -------------------- ASYNC XFER 
4060:rtos/uC-USB-Device/Source/usbd_ep.c ****         p_urb->State    = USBD_URB_STATE_XFER_ASYNC;
4061:rtos/uC-USB-Device/Source/usbd_ep.c ****         prev_xfer_state = p_ep->XferState;                      /* Keep prev XferState, to restore 
4062:rtos/uC-USB-Device/Source/usbd_ep.c ****         p_ep->XferState = USBD_XFER_STATE_ASYNC;                /* Set XferState before submitting 
4063:rtos/uC-USB-Device/Source/usbd_ep.c **** 
4064:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_EP_TxAsyncProcess(p_drv,
4065:rtos/uC-USB-Device/Source/usbd_ep.c ****                                p_ep,
4066:rtos/uC-USB-Device/Source/usbd_ep.c ****                                p_urb,
4067:rtos/uC-USB-Device/Source/usbd_ep.c ****                                p_urb->BufPtr,
4068:rtos/uC-USB-Device/Source/usbd_ep.c ****                                p_urb->BufLen,
4069:rtos/uC-USB-Device/Source/usbd_ep.c ****                                p_err);
4070:rtos/uC-USB-Device/Source/usbd_ep.c ****         if (*p_err == USBD_ERR_NONE) {
4071:rtos/uC-USB-Device/Source/usbd_ep.c ****             USBD_URB_Queue(p_ep, p_urb);                        /* If no err, queue URB.           
4072:rtos/uC-USB-Device/Source/usbd_ep.c ****             USBD_DBG_STATS_EP_INC(p_drv->DevNbr, p_ep->Ix, TxAsyncSuccessNbr);
4073:rtos/uC-USB-Device/Source/usbd_ep.c ****         } else {
4074:rtos/uC-USB-Device/Source/usbd_ep.c ****             p_ep->XferState = prev_xfer_state;                  /* If an err occured, restore prev 
4075:rtos/uC-USB-Device/Source/usbd_ep.c ****             USBD_URB_Free(p_drv->DevNbr, p_ep, p_urb);          /* Free URB.                       
4076:rtos/uC-USB-Device/Source/usbd_ep.c ****         }
4077:rtos/uC-USB-Device/Source/usbd_ep.c **** 
4078:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (0u);
4079:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
4080:rtos/uC-USB-Device/Source/usbd_ep.c **** 
4081:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_ep->XferState = USBD_XFER_STATE_SYNC;                     /* -------------------- SYNC XFER -
4082:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_urb->State    = USBD_URB_STATE_XFER_SYNC;
4083:rtos/uC-USB-Device/Source/usbd_ep.c **** 
4084:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_URB_Queue(p_ep, p_urb);
4085:rtos/uC-USB-Device/Source/usbd_ep.c **** 
4086:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_drv_api = p_drv->API_Ptr;                                 /* Get dev drv API struct.         
4087:rtos/uC-USB-Device/Source/usbd_ep.c ****     xfer_rem  = p_urb->BufLen;
4088:rtos/uC-USB-Device/Source/usbd_ep.c ****    *p_err     = USBD_ERR_NONE;
4089:rtos/uC-USB-Device/Source/usbd_ep.c **** 
4090:rtos/uC-USB-Device/Source/usbd_ep.c ****     while ((*p_err     == USBD_ERR_NONE) &&
4091:rtos/uC-USB-Device/Source/usbd_ep.c ****            ((xfer_rem  >  0u)            ||
4092:rtos/uC-USB-Device/Source/usbd_ep.c ****             (zlp_flag  == DEF_YES))) {
4093:rtos/uC-USB-Device/Source/usbd_ep.c **** 
4094:rtos/uC-USB-Device/Source/usbd_ep.c ****         if (zlp_flag == DEF_NO) {
4095:rtos/uC-USB-Device/Source/usbd_ep.c ****             p_buf_cur = &p_urb->BufPtr[p_urb->XferLen];
4096:rtos/uC-USB-Device/Source/usbd_ep.c ****         } else {
4097:rtos/uC-USB-Device/Source/usbd_ep.c ****             p_buf_cur = (CPU_INT08U *)0;
4098:rtos/uC-USB-Device/Source/usbd_ep.c ****             zlp_flag  = DEF_NO;                                 /* If Tx ZLP, loop done only once. 
4099:rtos/uC-USB-Device/Source/usbd_ep.c ****         }
4100:rtos/uC-USB-Device/Source/usbd_ep.c **** 
4101:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_DBG_STATS_EP_INC(p_drv->DevNbr, p_ep->Ix, DrvTxNbr);
4102:rtos/uC-USB-Device/Source/usbd_ep.c ****         p_urb->NextXferLen = p_drv_api->EP_Tx(p_drv,
4103:rtos/uC-USB-Device/Source/usbd_ep.c ****                                               p_ep->Addr,
4104:rtos/uC-USB-Device/Source/usbd_ep.c ****                                               p_buf_cur,
4105:rtos/uC-USB-Device/Source/usbd_ep.c ****                                               xfer_rem,
4106:rtos/uC-USB-Device/Source/usbd_ep.c ****                                               p_err);
4107:rtos/uC-USB-Device/Source/usbd_ep.c ****         if (*p_err != USBD_ERR_NONE) {
4108:rtos/uC-USB-Device/Source/usbd_ep.c ****             break;
ARM GAS  /tmp/ccuUvpuw.s 			page 76


4109:rtos/uC-USB-Device/Source/usbd_ep.c ****         }
4110:rtos/uC-USB-Device/Source/usbd_ep.c **** 
4111:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_DBG_STATS_EP_INC(p_drv->DevNbr, p_ep->Ix, DrvTxSuccessNbr);
4112:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_DBG_STATS_EP_INC(p_drv->DevNbr, p_ep->Ix, DrvTxStartNbr);
4113:rtos/uC-USB-Device/Source/usbd_ep.c **** 
4114:rtos/uC-USB-Device/Source/usbd_ep.c ****         p_drv_api->EP_TxStart(p_drv,
4115:rtos/uC-USB-Device/Source/usbd_ep.c ****                               p_ep->Addr,
4116:rtos/uC-USB-Device/Source/usbd_ep.c ****                               p_buf_cur,
4117:rtos/uC-USB-Device/Source/usbd_ep.c ****                               p_urb->NextXferLen,
4118:rtos/uC-USB-Device/Source/usbd_ep.c ****                               p_err);
4119:rtos/uC-USB-Device/Source/usbd_ep.c ****         if (*p_err != USBD_ERR_NONE) {
4120:rtos/uC-USB-Device/Source/usbd_ep.c ****             break;
4121:rtos/uC-USB-Device/Source/usbd_ep.c ****         }
4122:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_DBG_STATS_EP_INC(p_drv->DevNbr, p_ep->Ix, DrvTxStartSuccessNbr);
4123:rtos/uC-USB-Device/Source/usbd_ep.c **** 
4124:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_OS_EP_LockRelease(p_drv->DevNbr,                   /* Unlock before pending on complet
4125:rtos/uC-USB-Device/Source/usbd_ep.c ****                                p_ep->Ix);
4126:rtos/uC-USB-Device/Source/usbd_ep.c **** 
4127:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_OS_EP_SignalPend(p_drv->DevNbr, p_ep->Ix, timeout_ms, p_err);
4128:rtos/uC-USB-Device/Source/usbd_ep.c **** 
4129:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_OS_EP_LockAcquire(p_drv->DevNbr,                   /* Re-lock EP after xfer completion
4130:rtos/uC-USB-Device/Source/usbd_ep.c ****                                p_ep->Ix,
4131:rtos/uC-USB-Device/Source/usbd_ep.c ****                                0u,
4132:rtos/uC-USB-Device/Source/usbd_ep.c ****                               &local_err);
4133:rtos/uC-USB-Device/Source/usbd_ep.c **** 
4134:rtos/uC-USB-Device/Source/usbd_ep.c ****         if (*p_err == USBD_ERR_OS_TIMEOUT) {
4135:rtos/uC-USB-Device/Source/usbd_ep.c ****             p_drv_api->EP_Abort(p_drv, p_ep->Addr);
4136:rtos/uC-USB-Device/Source/usbd_ep.c ****             USBD_DBG_STATS_EP_INC(p_drv->DevNbr, p_ep->Ix, TxSyncTimeoutErrNbr);
4137:rtos/uC-USB-Device/Source/usbd_ep.c ****             break;
4138:rtos/uC-USB-Device/Source/usbd_ep.c ****         } else if (*p_err != USBD_ERR_NONE) {
4139:rtos/uC-USB-Device/Source/usbd_ep.c ****             break;
4140:rtos/uC-USB-Device/Source/usbd_ep.c ****         } else if (local_err != USBD_ERR_NONE) {
4141:rtos/uC-USB-Device/Source/usbd_ep.c ****            *p_err = USBD_ERR_OS_FAIL;
4142:rtos/uC-USB-Device/Source/usbd_ep.c ****             break;
4143:rtos/uC-USB-Device/Source/usbd_ep.c ****         }
4144:rtos/uC-USB-Device/Source/usbd_ep.c **** 
4145:rtos/uC-USB-Device/Source/usbd_ep.c ****         p_urb->XferLen += p_urb->NextXferLen;
4146:rtos/uC-USB-Device/Source/usbd_ep.c ****         xfer_rem       -= p_urb->NextXferLen;
4147:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
4148:rtos/uC-USB-Device/Source/usbd_ep.c **** 
4149:rtos/uC-USB-Device/Source/usbd_ep.c ****     xfer_tot = p_urb->XferLen;
4150:rtos/uC-USB-Device/Source/usbd_ep.c **** 
4151:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (( end                               == DEF_YES)       &&
4152:rtos/uC-USB-Device/Source/usbd_ep.c ****         (*p_err                             == USBD_ERR_NONE) &&
4153:rtos/uC-USB-Device/Source/usbd_ep.c ****         ((p_urb->BufLen % p_ep->MaxPktSize) == 0u)            &&
4154:rtos/uC-USB-Device/Source/usbd_ep.c ****         ( p_urb->BufLen                     != 0u)) {
4155:rtos/uC-USB-Device/Source/usbd_ep.c ****                                                                 /* $$$$ This case should be tested 
4156:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_DBG_STATS_EP_INC(p_drv->DevNbr, p_ep->Ix, DrvTxZLP_Nbr);
4157:rtos/uC-USB-Device/Source/usbd_ep.c **** 
4158:rtos/uC-USB-Device/Source/usbd_ep.c ****         p_drv_api->EP_TxZLP(p_drv, p_ep->Addr, p_err);
4159:rtos/uC-USB-Device/Source/usbd_ep.c **** 
4160:rtos/uC-USB-Device/Source/usbd_ep.c ****         if (*p_err == USBD_ERR_NONE) {
4161:rtos/uC-USB-Device/Source/usbd_ep.c ****             USBD_DBG_STATS_EP_INC(p_drv->DevNbr, p_ep->Ix, DrvTxZLP_SuccessNbr);
4162:rtos/uC-USB-Device/Source/usbd_ep.c **** 
4163:rtos/uC-USB-Device/Source/usbd_ep.c ****             USBD_OS_EP_LockRelease(p_drv->DevNbr,               /* Unlock before pending on complet
4164:rtos/uC-USB-Device/Source/usbd_ep.c ****                                    p_ep->Ix);
4165:rtos/uC-USB-Device/Source/usbd_ep.c **** 
ARM GAS  /tmp/ccuUvpuw.s 			page 77


4166:rtos/uC-USB-Device/Source/usbd_ep.c ****             USBD_OS_EP_SignalPend(p_drv->DevNbr, p_ep->Ix, timeout_ms, p_err);
4167:rtos/uC-USB-Device/Source/usbd_ep.c **** 
4168:rtos/uC-USB-Device/Source/usbd_ep.c ****             USBD_OS_EP_LockAcquire(p_drv->DevNbr,               /* Re-lock EP after xfer completion
4169:rtos/uC-USB-Device/Source/usbd_ep.c ****                                    p_ep->Ix,
4170:rtos/uC-USB-Device/Source/usbd_ep.c ****                                    0u,
4171:rtos/uC-USB-Device/Source/usbd_ep.c ****                                   &local_err);
4172:rtos/uC-USB-Device/Source/usbd_ep.c ****             if (local_err != USBD_ERR_NONE) {
4173:rtos/uC-USB-Device/Source/usbd_ep.c ****                *p_err = USBD_ERR_OS_FAIL;
4174:rtos/uC-USB-Device/Source/usbd_ep.c ****             }
4175:rtos/uC-USB-Device/Source/usbd_ep.c ****         }
4176:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
4177:rtos/uC-USB-Device/Source/usbd_ep.c **** 
4178:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_URB_Dequeue(p_ep);
4179:rtos/uC-USB-Device/Source/usbd_ep.c **** 
4180:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_URB_Free(p_drv->DevNbr, p_ep, p_urb);
4181:rtos/uC-USB-Device/Source/usbd_ep.c **** 
4182:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DBG_STATS_EP_INC_IF_TRUE(p_drv->DevNbr, p_ep->Ix, TxSyncSuccessNbr, (*p_err == USBD_ERR_NO
4183:rtos/uC-USB-Device/Source/usbd_ep.c **** 
4184:rtos/uC-USB-Device/Source/usbd_ep.c ****     return (xfer_tot);
4185:rtos/uC-USB-Device/Source/usbd_ep.c **** }
4186:rtos/uC-USB-Device/Source/usbd_ep.c **** 
4187:rtos/uC-USB-Device/Source/usbd_ep.c **** 
4188:rtos/uC-USB-Device/Source/usbd_ep.c **** /*
4189:rtos/uC-USB-Device/Source/usbd_ep.c **** ***************************************************************************************************
4190:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                        USBD_EP_URB_Abort()
4191:rtos/uC-USB-Device/Source/usbd_ep.c **** *
4192:rtos/uC-USB-Device/Source/usbd_ep.c **** * Description : Aborts endpoint's URB(s). Does not free the URB(s), see Note #1.
4193:rtos/uC-USB-Device/Source/usbd_ep.c **** *
4194:rtos/uC-USB-Device/Source/usbd_ep.c **** * Argument(s) : p_drv       Pointer to device driver structure.
4195:rtos/uC-USB-Device/Source/usbd_ep.c **** *               ----        Argument checked by caller.
4196:rtos/uC-USB-Device/Source/usbd_ep.c **** *
4197:rtos/uC-USB-Device/Source/usbd_ep.c **** *               p_ep        Pointer to endpoint on which data will be sent.
4198:rtos/uC-USB-Device/Source/usbd_ep.c **** *               ----        Argument checked by caller.
4199:rtos/uC-USB-Device/Source/usbd_ep.c **** 
4200:rtos/uC-USB-Device/Source/usbd_ep.c **** *               p_err       Pointer to variable that will receive return error code from this funct
4201:rtos/uC-USB-Device/Source/usbd_ep.c **** *               ----        Argument checked by caller.
4202:rtos/uC-USB-Device/Source/usbd_ep.c **** *
4203:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               USBD_ERR_NONE               URB successfully aborted.
4204:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               USBD_ERR_EP_ABORT           Device driver abort endpoint failed.
4205:rtos/uC-USB-Device/Source/usbd_ep.c **** *
4206:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               - RETURNED BY USBD_OS_EP_SignalAbort() -
4207:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               See USBD_OS_EP_SignalAbort() for additional return error codes.
4208:rtos/uC-USB-Device/Source/usbd_ep.c **** *
4209:rtos/uC-USB-Device/Source/usbd_ep.c **** * Return(s)   : Pointer to head of completed URB list, if asynchronous transfer in progress.
4210:rtos/uC-USB-Device/Source/usbd_ep.c **** *
4211:rtos/uC-USB-Device/Source/usbd_ep.c **** *               Pointer to NULL,                       otherwise.
4212:rtos/uC-USB-Device/Source/usbd_ep.c **** *
4213:rtos/uC-USB-Device/Source/usbd_ep.c **** * Note(s)     : (1) If a synchronous transfer was in progress, a single URB was aborted and must be
4214:rtos/uC-USB-Device/Source/usbd_ep.c **** *                   freed by calling  USBD_URB_Free(). If an asynchronous transfer was in progress,
4215:rtos/uC-USB-Device/Source/usbd_ep.c **** *                   is possible that multiple URBs were aborted and must be freed by calling
4216:rtos/uC-USB-Device/Source/usbd_ep.c **** *                   USBD_URB_AsyncEnd() with the pointer to the head of the aborted URB(s) list ret
4217:rtos/uC-USB-Device/Source/usbd_ep.c **** *                   by this function as a parameter.
4218:rtos/uC-USB-Device/Source/usbd_ep.c **** *
4219:rtos/uC-USB-Device/Source/usbd_ep.c **** *               (2) Endpoint must be locked when calling this function.
4220:rtos/uC-USB-Device/Source/usbd_ep.c **** ***************************************************************************************************
4221:rtos/uC-USB-Device/Source/usbd_ep.c **** */
4222:rtos/uC-USB-Device/Source/usbd_ep.c **** 
ARM GAS  /tmp/ccuUvpuw.s 			page 78


4223:rtos/uC-USB-Device/Source/usbd_ep.c **** static  USBD_URB  *USBD_EP_URB_Abort (USBD_DRV  *p_drv,
4224:rtos/uC-USB-Device/Source/usbd_ep.c ****                                       USBD_EP   *p_ep,
4225:rtos/uC-USB-Device/Source/usbd_ep.c ****                                       USBD_ERR  *p_err)
4226:rtos/uC-USB-Device/Source/usbd_ep.c **** {
4227:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DRV_API  *p_drv_api;
4228:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_BOOLEAN    abort_ok;
4229:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_URB      *p_urb_head;
4230:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_URB      *p_urb;
4231:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_URB      *p_urb_cur;
4232:rtos/uC-USB-Device/Source/usbd_ep.c **** 
4233:rtos/uC-USB-Device/Source/usbd_ep.c **** 
4234:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_drv_api  =  p_drv->API_Ptr;                               /* Get dev drv API struct.         
4235:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_urb_head = (USBD_URB *)0;
4236:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_urb_cur  = (USBD_URB *)0;
4237:rtos/uC-USB-Device/Source/usbd_ep.c **** 
4238:rtos/uC-USB-Device/Source/usbd_ep.c ****     switch (p_ep->XferState) {
4239:rtos/uC-USB-Device/Source/usbd_ep.c ****         case USBD_XFER_STATE_NONE:
4240:rtos/uC-USB-Device/Source/usbd_ep.c ****              abort_ok = DEF_OK;
4241:rtos/uC-USB-Device/Source/usbd_ep.c ****              break;
4242:rtos/uC-USB-Device/Source/usbd_ep.c **** 
4243:rtos/uC-USB-Device/Source/usbd_ep.c **** 
4244:rtos/uC-USB-Device/Source/usbd_ep.c ****         case USBD_XFER_STATE_ASYNC:
4245:rtos/uC-USB-Device/Source/usbd_ep.c ****         case USBD_XFER_STATE_ASYNC_PARTIAL:
4246:rtos/uC-USB-Device/Source/usbd_ep.c ****              p_urb = p_ep->URB_HeadPtr;
4247:rtos/uC-USB-Device/Source/usbd_ep.c ****              while(p_urb != (USBD_URB *)0) {
4248:rtos/uC-USB-Device/Source/usbd_ep.c ****                  p_urb = USBD_URB_AsyncCmpl(p_ep, USBD_ERR_EP_ABORT);
4249:rtos/uC-USB-Device/Source/usbd_ep.c ****                  if (p_urb_head == (USBD_URB *)0) {
4250:rtos/uC-USB-Device/Source/usbd_ep.c ****                      p_urb_head = p_urb;
4251:rtos/uC-USB-Device/Source/usbd_ep.c ****                  } else {
4252:rtos/uC-USB-Device/Source/usbd_ep.c ****                      p_urb_cur->NextPtr = p_urb;
4253:rtos/uC-USB-Device/Source/usbd_ep.c ****                  }
4254:rtos/uC-USB-Device/Source/usbd_ep.c ****                  p_urb_cur = p_urb;
4255:rtos/uC-USB-Device/Source/usbd_ep.c ****              }
4256:rtos/uC-USB-Device/Source/usbd_ep.c ****              abort_ok = p_drv->API_Ptr->EP_Abort(p_drv, p_ep->Addr); /* Call drv's abort fnct.     
4257:rtos/uC-USB-Device/Source/usbd_ep.c ****              break;
4258:rtos/uC-USB-Device/Source/usbd_ep.c **** 
4259:rtos/uC-USB-Device/Source/usbd_ep.c **** 
4260:rtos/uC-USB-Device/Source/usbd_ep.c ****         case USBD_XFER_STATE_SYNC:
4261:rtos/uC-USB-Device/Source/usbd_ep.c ****              USBD_OS_EP_SignalAbort(p_drv->DevNbr, p_ep->Ix, p_err);
4262:rtos/uC-USB-Device/Source/usbd_ep.c **** 
4263:rtos/uC-USB-Device/Source/usbd_ep.c ****              abort_ok = p_drv_api->EP_Abort(p_drv, p_ep->Addr);
4264:rtos/uC-USB-Device/Source/usbd_ep.c ****              break;
4265:rtos/uC-USB-Device/Source/usbd_ep.c **** 
4266:rtos/uC-USB-Device/Source/usbd_ep.c **** 
4267:rtos/uC-USB-Device/Source/usbd_ep.c ****         default:
4268:rtos/uC-USB-Device/Source/usbd_ep.c ****              abort_ok = DEF_FAIL;
4269:rtos/uC-USB-Device/Source/usbd_ep.c ****              break;
4270:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
4271:rtos/uC-USB-Device/Source/usbd_ep.c **** 
4272:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (abort_ok == DEF_OK) {
4273:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_NONE;
4274:rtos/uC-USB-Device/Source/usbd_ep.c ****     } else {
4275:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_EP_ABORT;
4276:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
4277:rtos/uC-USB-Device/Source/usbd_ep.c **** 
4278:rtos/uC-USB-Device/Source/usbd_ep.c ****     return (p_urb_head);                                        /* See Note #1.                    
4279:rtos/uC-USB-Device/Source/usbd_ep.c **** }
ARM GAS  /tmp/ccuUvpuw.s 			page 79


4280:rtos/uC-USB-Device/Source/usbd_ep.c **** 
4281:rtos/uC-USB-Device/Source/usbd_ep.c **** 
4282:rtos/uC-USB-Device/Source/usbd_ep.c **** /*
4283:rtos/uC-USB-Device/Source/usbd_ep.c **** ***************************************************************************************************
4284:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                         USBD_URB_AsyncCmpl()
4285:rtos/uC-USB-Device/Source/usbd_ep.c **** *
4286:rtos/uC-USB-Device/Source/usbd_ep.c **** * Description : Notify URB completion to asynchronous callback.
4287:rtos/uC-USB-Device/Source/usbd_ep.c **** *
4288:rtos/uC-USB-Device/Source/usbd_ep.c **** * Argument(s) : p_ep        Pointer to endpoint on which transfer has completed.
4289:rtos/uC-USB-Device/Source/usbd_ep.c **** *               ----        Argument checked by caller.
4290:rtos/uC-USB-Device/Source/usbd_ep.c **** *
4291:rtos/uC-USB-Device/Source/usbd_ep.c **** *               err         Error associated with transfer.
4292:rtos/uC-USB-Device/Source/usbd_ep.c **** *
4293:rtos/uC-USB-Device/Source/usbd_ep.c **** * Return(s)   : Pointer to completed URB, if any.
4294:rtos/uC-USB-Device/Source/usbd_ep.c **** *
4295:rtos/uC-USB-Device/Source/usbd_ep.c **** *               Pointer to NULL,          otherwise.
4296:rtos/uC-USB-Device/Source/usbd_ep.c **** *
4297:rtos/uC-USB-Device/Source/usbd_ep.c **** * Note(s)     : (1) Endpoint must be locked when calling this function.
4298:rtos/uC-USB-Device/Source/usbd_ep.c **** *
4299:rtos/uC-USB-Device/Source/usbd_ep.c **** *               (2) Endpoint must have an asynchronous transfer in progress.
4300:rtos/uC-USB-Device/Source/usbd_ep.c **** ***************************************************************************************************
4301:rtos/uC-USB-Device/Source/usbd_ep.c **** */
4302:rtos/uC-USB-Device/Source/usbd_ep.c **** 
4303:rtos/uC-USB-Device/Source/usbd_ep.c **** static  USBD_URB  *USBD_URB_AsyncCmpl (USBD_EP   *p_ep,
4304:rtos/uC-USB-Device/Source/usbd_ep.c ****                                        USBD_ERR   err)
4305:rtos/uC-USB-Device/Source/usbd_ep.c **** {
4306:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_URB  *p_urb;
4307:rtos/uC-USB-Device/Source/usbd_ep.c **** 
4308:rtos/uC-USB-Device/Source/usbd_ep.c **** 
4309:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_urb = p_ep->URB_HeadPtr;                                  /* Get head URB for EP.            
4310:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_urb == (USBD_URB *)0) {
4311:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (p_urb);
4312:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
4313:rtos/uC-USB-Device/Source/usbd_ep.c **** 
4314:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_URB_Dequeue(p_ep);                                     /* Dequeue first URB from EP.      
4315:rtos/uC-USB-Device/Source/usbd_ep.c **** 
4316:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_urb->Err     =  err;                                      /* Set err for curr URB.           
4317:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_urb->NextPtr = (USBD_URB *)0;                             /* Remove links with 'p_ep' URB lin
4318:rtos/uC-USB-Device/Source/usbd_ep.c **** 
4319:rtos/uC-USB-Device/Source/usbd_ep.c ****     return (p_urb);
4320:rtos/uC-USB-Device/Source/usbd_ep.c **** }
4321:rtos/uC-USB-Device/Source/usbd_ep.c **** 
4322:rtos/uC-USB-Device/Source/usbd_ep.c **** 
4323:rtos/uC-USB-Device/Source/usbd_ep.c **** /*
4324:rtos/uC-USB-Device/Source/usbd_ep.c **** ***************************************************************************************************
4325:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                          USBD_URB_AsyncEnd()
4326:rtos/uC-USB-Device/Source/usbd_ep.c **** *
4327:rtos/uC-USB-Device/Source/usbd_ep.c **** * Description : Execute callback associated with each USB request block in the linked list and free
4328:rtos/uC-USB-Device/Source/usbd_ep.c **** *
4329:rtos/uC-USB-Device/Source/usbd_ep.c **** * Argument(s) : dev_nbr     Device number.
4330:rtos/uC-USB-Device/Source/usbd_ep.c **** *               -------     Argument checked by caller.
4331:rtos/uC-USB-Device/Source/usbd_ep.c **** *
4332:rtos/uC-USB-Device/Source/usbd_ep.c **** *               p_ep        Pointer to endpoint structure.
4333:rtos/uC-USB-Device/Source/usbd_ep.c **** *               ----        Argument checked by caller.
4334:rtos/uC-USB-Device/Source/usbd_ep.c **** *
4335:rtos/uC-USB-Device/Source/usbd_ep.c **** *               p_urb_head  Pointer to head of USB request block linked list.
4336:rtos/uC-USB-Device/Source/usbd_ep.c **** *               -----       Argument checked by caller.
ARM GAS  /tmp/ccuUvpuw.s 			page 80


4337:rtos/uC-USB-Device/Source/usbd_ep.c **** *
4338:rtos/uC-USB-Device/Source/usbd_ep.c **** * Return(s)   : none.
4339:rtos/uC-USB-Device/Source/usbd_ep.c **** *
4340:rtos/uC-USB-Device/Source/usbd_ep.c **** * Note(s)     : (1) Endpoint must NOT be locked when calling this function.
4341:rtos/uC-USB-Device/Source/usbd_ep.c **** ***************************************************************************************************
4342:rtos/uC-USB-Device/Source/usbd_ep.c **** */
4343:rtos/uC-USB-Device/Source/usbd_ep.c **** 
4344:rtos/uC-USB-Device/Source/usbd_ep.c **** static  void  USBD_URB_AsyncEnd (CPU_INT08U   dev_nbr,
4345:rtos/uC-USB-Device/Source/usbd_ep.c ****                                  USBD_EP     *p_ep,
4346:rtos/uC-USB-Device/Source/usbd_ep.c ****                                  USBD_URB    *p_urb_head)
4347:rtos/uC-USB-Device/Source/usbd_ep.c **** {
4348:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_URB         *p_urb_cur;
4349:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_URB         *p_urb_next;
4350:rtos/uC-USB-Device/Source/usbd_ep.c ****     void             *p_buf;
4351:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_INT32U        buf_len;
4352:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_INT32U        xfer_len;
4353:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_ASYNC_FNCT   async_fnct;
4354:rtos/uC-USB-Device/Source/usbd_ep.c ****     void             *p_async_arg;
4355:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_ERR          err;
4356:rtos/uC-USB-Device/Source/usbd_ep.c **** 
4357:rtos/uC-USB-Device/Source/usbd_ep.c **** 
4358:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_urb_cur = p_urb_head;
4359:rtos/uC-USB-Device/Source/usbd_ep.c ****     while (p_urb_cur != (USBD_URB *)0) {                        /* Iterate through linked list.    
4360:rtos/uC-USB-Device/Source/usbd_ep.c ****         p_buf       = (void *)p_urb_cur->BufPtr;
4361:rtos/uC-USB-Device/Source/usbd_ep.c ****         buf_len     =  p_urb_cur->BufLen;
4362:rtos/uC-USB-Device/Source/usbd_ep.c ****         xfer_len    =  p_urb_cur->XferLen;
4363:rtos/uC-USB-Device/Source/usbd_ep.c ****         async_fnct  =  p_urb_cur->AsyncFnct;
4364:rtos/uC-USB-Device/Source/usbd_ep.c ****         p_async_arg =  p_urb_cur->AsyncFnctArg;
4365:rtos/uC-USB-Device/Source/usbd_ep.c ****         err         =  p_urb_cur->Err;
4366:rtos/uC-USB-Device/Source/usbd_ep.c ****         p_urb_next  =  p_urb_cur->NextPtr;
4367:rtos/uC-USB-Device/Source/usbd_ep.c **** 
4368:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_URB_Free(dev_nbr, p_ep, p_urb_cur);                /* Free URB to pool.               
4369:rtos/uC-USB-Device/Source/usbd_ep.c **** 
4370:rtos/uC-USB-Device/Source/usbd_ep.c ****         async_fnct(dev_nbr,                                     /* Execute callback fnct.          
4371:rtos/uC-USB-Device/Source/usbd_ep.c ****                    p_ep->Addr,
4372:rtos/uC-USB-Device/Source/usbd_ep.c ****                    p_buf,
4373:rtos/uC-USB-Device/Source/usbd_ep.c ****                    buf_len,
4374:rtos/uC-USB-Device/Source/usbd_ep.c ****                    xfer_len,
4375:rtos/uC-USB-Device/Source/usbd_ep.c ****                    p_async_arg,
4376:rtos/uC-USB-Device/Source/usbd_ep.c ****                    err);
4377:rtos/uC-USB-Device/Source/usbd_ep.c **** 
4378:rtos/uC-USB-Device/Source/usbd_ep.c ****         p_urb_cur = p_urb_next;
4379:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
4380:rtos/uC-USB-Device/Source/usbd_ep.c **** }
4381:rtos/uC-USB-Device/Source/usbd_ep.c **** 
4382:rtos/uC-USB-Device/Source/usbd_ep.c **** 
4383:rtos/uC-USB-Device/Source/usbd_ep.c **** /*
4384:rtos/uC-USB-Device/Source/usbd_ep.c **** ***************************************************************************************************
4385:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                           USBD_URB_Free()
4386:rtos/uC-USB-Device/Source/usbd_ep.c **** *
4387:rtos/uC-USB-Device/Source/usbd_ep.c **** * Description : Free URB to URB pool.
4388:rtos/uC-USB-Device/Source/usbd_ep.c **** *
4389:rtos/uC-USB-Device/Source/usbd_ep.c **** * Argument(s) : dev_nbr     Device number.
4390:rtos/uC-USB-Device/Source/usbd_ep.c **** *               -------     Argument checked by caller.
4391:rtos/uC-USB-Device/Source/usbd_ep.c **** *
4392:rtos/uC-USB-Device/Source/usbd_ep.c **** *               p_ep        Pointer to endpoint structure.
4393:rtos/uC-USB-Device/Source/usbd_ep.c **** *               ----        Argument checked by caller.
ARM GAS  /tmp/ccuUvpuw.s 			page 81


4394:rtos/uC-USB-Device/Source/usbd_ep.c **** *
4395:rtos/uC-USB-Device/Source/usbd_ep.c **** *               p_urb       Pointer to USB request block.
4396:rtos/uC-USB-Device/Source/usbd_ep.c **** *               -----       Argument checked by caller.
4397:rtos/uC-USB-Device/Source/usbd_ep.c **** *
4398:rtos/uC-USB-Device/Source/usbd_ep.c **** * Return(s)   : none.
4399:rtos/uC-USB-Device/Source/usbd_ep.c **** *
4400:rtos/uC-USB-Device/Source/usbd_ep.c **** * Note(s)     : none.
4401:rtos/uC-USB-Device/Source/usbd_ep.c **** ***************************************************************************************************
4402:rtos/uC-USB-Device/Source/usbd_ep.c **** */
4403:rtos/uC-USB-Device/Source/usbd_ep.c **** 
4404:rtos/uC-USB-Device/Source/usbd_ep.c **** static  void  USBD_URB_Free (CPU_INT08U   dev_nbr,
4405:rtos/uC-USB-Device/Source/usbd_ep.c ****                              USBD_EP     *p_ep,
4406:rtos/uC-USB-Device/Source/usbd_ep.c ****                              USBD_URB    *p_urb)
4407:rtos/uC-USB-Device/Source/usbd_ep.c **** {
4408:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_SR_ALLOC();
4409:rtos/uC-USB-Device/Source/usbd_ep.c **** 
4410:rtos/uC-USB-Device/Source/usbd_ep.c **** 
4411:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_CRITICAL_ENTER();
4412:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_urb->State             = USBD_URB_STATE_IDLE;
4413:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_urb->NextPtr           = USBD_URB_TblPtr[dev_nbr];
4414:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_URB_TblPtr[dev_nbr] = p_urb;
4415:rtos/uC-USB-Device/Source/usbd_ep.c **** 
4416:rtos/uC-USB-Device/Source/usbd_ep.c **** #if (USBD_CFG_MAX_NBR_URB_EXTRA > 0u)
4417:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (DEF_BIT_IS_SET(p_urb->Flags, USBD_URB_FLAG_EXTRA_URB)) {
4418:rtos/uC-USB-Device/Source/usbd_ep.c ****                                                                 /* If the URB freed is an 'extra' U
4419:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_URB_ExtraCtr[dev_nbr]--;
4420:rtos/uC-USB-Device/Source/usbd_ep.c ****     } else {
4421:rtos/uC-USB-Device/Source/usbd_ep.c ****         p_ep->URB_MainAvail = DEF_YES;
4422:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
4423:rtos/uC-USB-Device/Source/usbd_ep.c **** #else
4424:rtos/uC-USB-Device/Source/usbd_ep.c ****     (void)p_ep;
4425:rtos/uC-USB-Device/Source/usbd_ep.c **** #endif
4426:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_CRITICAL_EXIT();
4427:rtos/uC-USB-Device/Source/usbd_ep.c **** }
4428:rtos/uC-USB-Device/Source/usbd_ep.c **** 
4429:rtos/uC-USB-Device/Source/usbd_ep.c **** 
4430:rtos/uC-USB-Device/Source/usbd_ep.c **** /*
4431:rtos/uC-USB-Device/Source/usbd_ep.c **** ***************************************************************************************************
4432:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                           USBD_URB_Get()
4433:rtos/uC-USB-Device/Source/usbd_ep.c **** *
4434:rtos/uC-USB-Device/Source/usbd_ep.c **** * Description : Get URB from URB pool.
4435:rtos/uC-USB-Device/Source/usbd_ep.c **** *
4436:rtos/uC-USB-Device/Source/usbd_ep.c **** * Argument(s) : dev_nbr     Device number.
4437:rtos/uC-USB-Device/Source/usbd_ep.c **** *               -------     Argument checked by caller.
4438:rtos/uC-USB-Device/Source/usbd_ep.c **** *
4439:rtos/uC-USB-Device/Source/usbd_ep.c **** *               p_ep        Pointer to endpoint structure.
4440:rtos/uC-USB-Device/Source/usbd_ep.c **** *               ----        Argument checked by caller.
4441:rtos/uC-USB-Device/Source/usbd_ep.c **** *
4442:rtos/uC-USB-Device/Source/usbd_ep.c **** *               p_err       Pointer to variable that will receive return error code from this funct
4443:rtos/uC-USB-Device/Source/usbd_ep.c **** *               ----        Argument checked by caller.
4444:rtos/uC-USB-Device/Source/usbd_ep.c **** *
4445:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               USBD_ERR_NONE               URB successfully returned.
4446:rtos/uC-USB-Device/Source/usbd_ep.c **** *                               USBD_ERR_EP_QUEUING         No URB available in the pool.
4447:rtos/uC-USB-Device/Source/usbd_ep.c **** *
4448:rtos/uC-USB-Device/Source/usbd_ep.c **** * Return(s)   : Pointer to USB request block, if NO error(s).
4449:rtos/uC-USB-Device/Source/usbd_ep.c **** *
4450:rtos/uC-USB-Device/Source/usbd_ep.c **** *               Pointer to NULL,              otherwise.
ARM GAS  /tmp/ccuUvpuw.s 			page 82


4451:rtos/uC-USB-Device/Source/usbd_ep.c **** *
4452:rtos/uC-USB-Device/Source/usbd_ep.c **** * Note(s)     : none.
4453:rtos/uC-USB-Device/Source/usbd_ep.c **** ***************************************************************************************************
4454:rtos/uC-USB-Device/Source/usbd_ep.c **** */
4455:rtos/uC-USB-Device/Source/usbd_ep.c **** 
4456:rtos/uC-USB-Device/Source/usbd_ep.c **** static  USBD_URB  *USBD_URB_Get (CPU_INT08U   dev_nbr,
4457:rtos/uC-USB-Device/Source/usbd_ep.c ****                                  USBD_EP     *p_ep,
4458:rtos/uC-USB-Device/Source/usbd_ep.c ****                                  USBD_ERR    *p_err)
4459:rtos/uC-USB-Device/Source/usbd_ep.c **** {
4460:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_BOOLEAN  ep_empty;
4461:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_URB  *p_urb;
4462:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_SR_ALLOC();
4463:rtos/uC-USB-Device/Source/usbd_ep.c **** 
4464:rtos/uC-USB-Device/Source/usbd_ep.c **** 
4465:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_CRITICAL_ENTER();
4466:rtos/uC-USB-Device/Source/usbd_ep.c ****     ep_empty = ((p_ep->URB_HeadPtr == (USBD_URB *)0) && (p_ep->URB_TailPtr == (USBD_URB *)0)) ? DEF
4467:rtos/uC-USB-Device/Source/usbd_ep.c **** 
4468:rtos/uC-USB-Device/Source/usbd_ep.c **** #if (USBD_CFG_MAX_NBR_URB_EXTRA > 0u)
4469:rtos/uC-USB-Device/Source/usbd_ep.c ****                                                                 /* Check if EP is empty, if enough 
4470:rtos/uC-USB-Device/Source/usbd_ep.c ****                                                                 /* ...URB avail.                   
4471:rtos/uC-USB-Device/Source/usbd_ep.c ****     if ((ep_empty                   == DEF_YES) ||
4472:rtos/uC-USB-Device/Source/usbd_ep.c ****         (USBD_URB_ExtraCtr[dev_nbr] <  USBD_CFG_MAX_NBR_URB_EXTRA) ||
4473:rtos/uC-USB-Device/Source/usbd_ep.c ****         (p_ep->URB_MainAvail        == DEF_YES)) {
4474:rtos/uC-USB-Device/Source/usbd_ep.c **** #else
4475:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (ep_empty == DEF_YES) {                                  /* Check if EP is empty.           
4476:rtos/uC-USB-Device/Source/usbd_ep.c **** #endif
4477:rtos/uC-USB-Device/Source/usbd_ep.c **** 
4478:rtos/uC-USB-Device/Source/usbd_ep.c ****         p_urb = USBD_URB_TblPtr[dev_nbr];
4479:rtos/uC-USB-Device/Source/usbd_ep.c ****         if (p_urb != (USBD_URB *)0) {
4480:rtos/uC-USB-Device/Source/usbd_ep.c ****             USBD_URB_TblPtr[dev_nbr] = p_urb->NextPtr;
4481:rtos/uC-USB-Device/Source/usbd_ep.c **** 
4482:rtos/uC-USB-Device/Source/usbd_ep.c ****             p_urb->NextPtr = (USBD_URB *)0;
4483:rtos/uC-USB-Device/Source/usbd_ep.c ****             p_urb->Flags   =  0u;
4484:rtos/uC-USB-Device/Source/usbd_ep.c **** #if (USBD_CFG_MAX_NBR_URB_EXTRA > 0u)
4485:rtos/uC-USB-Device/Source/usbd_ep.c ****             if ((ep_empty            == DEF_NO) &&
4486:rtos/uC-USB-Device/Source/usbd_ep.c ****                 (p_ep->URB_MainAvail == DEF_NO)) {
4487:rtos/uC-USB-Device/Source/usbd_ep.c ****                                                                 /* If the EP already has an URB in 
4488:rtos/uC-USB-Device/Source/usbd_ep.c ****                 USBD_URB_ExtraCtr[dev_nbr]++;                   /* ... ctr and mark the URB as an '
4489:rtos/uC-USB-Device/Source/usbd_ep.c ****                 DEF_BIT_SET(p_urb->Flags, USBD_URB_FLAG_EXTRA_URB);
4490:rtos/uC-USB-Device/Source/usbd_ep.c ****             } else if (p_ep->URB_MainAvail == DEF_YES) {
4491:rtos/uC-USB-Device/Source/usbd_ep.c ****                 p_ep->URB_MainAvail = DEF_NO;
4492:rtos/uC-USB-Device/Source/usbd_ep.c ****             }
4493:rtos/uC-USB-Device/Source/usbd_ep.c **** #endif
4494:rtos/uC-USB-Device/Source/usbd_ep.c ****            *p_err = USBD_ERR_NONE;
4495:rtos/uC-USB-Device/Source/usbd_ep.c ****         } else {
4496:rtos/uC-USB-Device/Source/usbd_ep.c ****            *p_err =  USBD_ERR_EP_QUEUING;
4497:rtos/uC-USB-Device/Source/usbd_ep.c ****             p_urb = (USBD_URB *)0;
4498:rtos/uC-USB-Device/Source/usbd_ep.c ****         }
4499:rtos/uC-USB-Device/Source/usbd_ep.c ****     } else {
4500:rtos/uC-USB-Device/Source/usbd_ep.c **** 
4501:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err =  USBD_ERR_EP_QUEUING;
4502:rtos/uC-USB-Device/Source/usbd_ep.c ****         p_urb = (USBD_URB *)0;
4503:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
4504:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_CRITICAL_EXIT();
4505:rtos/uC-USB-Device/Source/usbd_ep.c **** 
4506:rtos/uC-USB-Device/Source/usbd_ep.c ****     return (p_urb);
4507:rtos/uC-USB-Device/Source/usbd_ep.c **** }
ARM GAS  /tmp/ccuUvpuw.s 			page 83


4508:rtos/uC-USB-Device/Source/usbd_ep.c **** 
4509:rtos/uC-USB-Device/Source/usbd_ep.c **** 
4510:rtos/uC-USB-Device/Source/usbd_ep.c **** /*
4511:rtos/uC-USB-Device/Source/usbd_ep.c **** ***************************************************************************************************
4512:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                          USBD_URB_Queue()
4513:rtos/uC-USB-Device/Source/usbd_ep.c **** *
4514:rtos/uC-USB-Device/Source/usbd_ep.c **** * Description : Queue USB request block into endpoint.
4515:rtos/uC-USB-Device/Source/usbd_ep.c **** *
4516:rtos/uC-USB-Device/Source/usbd_ep.c **** * Argument(s) : p_ep        Pointer to endpoint structure.
4517:rtos/uC-USB-Device/Source/usbd_ep.c **** *               ----        Argument checked by caller.
4518:rtos/uC-USB-Device/Source/usbd_ep.c **** *
4519:rtos/uC-USB-Device/Source/usbd_ep.c **** *               p_urb       Pointer to USB request block.
4520:rtos/uC-USB-Device/Source/usbd_ep.c **** *               -----       Argument checked by caller.
4521:rtos/uC-USB-Device/Source/usbd_ep.c **** *
4522:rtos/uC-USB-Device/Source/usbd_ep.c **** * Return(s)   : none.
4523:rtos/uC-USB-Device/Source/usbd_ep.c **** *
4524:rtos/uC-USB-Device/Source/usbd_ep.c **** * Note(s)     : (1) Endpoint must be locked when calling this function.
4525:rtos/uC-USB-Device/Source/usbd_ep.c **** ***************************************************************************************************
4526:rtos/uC-USB-Device/Source/usbd_ep.c **** */
4527:rtos/uC-USB-Device/Source/usbd_ep.c **** 
4528:rtos/uC-USB-Device/Source/usbd_ep.c **** static  void  USBD_URB_Queue (USBD_EP   *p_ep,
4529:rtos/uC-USB-Device/Source/usbd_ep.c ****                               USBD_URB  *p_urb)
4530:rtos/uC-USB-Device/Source/usbd_ep.c **** {
 166              		.loc 1 4530 1 view -0
 167              		.cfi_startproc
 168              		@ args = 0, pretend = 0, frame = 0
 169              		@ frame_needed = 0, uses_anonymous_args = 0
 170              		@ link register save eliminated.
4531:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_urb->NextPtr = (USBD_URB *)0;
 171              		.loc 1 4531 5 view .LVU43
 172              		.loc 1 4531 20 is_stmt 0 view .LVU44
 173 0000 0023     		movs	r3, #0
 174 0002 0B62     		str	r3, [r1, #32]
4532:rtos/uC-USB-Device/Source/usbd_ep.c **** 
4533:rtos/uC-USB-Device/Source/usbd_ep.c **** 
4534:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_ep->URB_TailPtr == (USBD_URB *)0) {                   /* Q is empty.                     
 175              		.loc 1 4534 5 is_stmt 1 view .LVU45
 176              		.loc 1 4534 13 is_stmt 0 view .LVU46
 177 0004 0369     		ldr	r3, [r0, #16]
 178              		.loc 1 4534 8 view .LVU47
 179 0006 13B1     		cbz	r3, .L11
4535:rtos/uC-USB-Device/Source/usbd_ep.c ****         p_ep->URB_HeadPtr = p_urb;
4536:rtos/uC-USB-Device/Source/usbd_ep.c ****         p_ep->URB_TailPtr = p_urb;
4537:rtos/uC-USB-Device/Source/usbd_ep.c ****     } else {                                                    /* Q is not empty.                 
4538:rtos/uC-USB-Device/Source/usbd_ep.c ****         p_ep->URB_TailPtr->NextPtr = p_urb;
 180              		.loc 1 4538 9 is_stmt 1 view .LVU48
 181              		.loc 1 4538 36 is_stmt 0 view .LVU49
 182 0008 1962     		str	r1, [r3, #32]
4539:rtos/uC-USB-Device/Source/usbd_ep.c ****         p_ep->URB_TailPtr          = p_urb;
 183              		.loc 1 4539 9 is_stmt 1 view .LVU50
 184              		.loc 1 4539 36 is_stmt 0 view .LVU51
 185 000a 0161     		str	r1, [r0, #16]
4540:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
4541:rtos/uC-USB-Device/Source/usbd_ep.c **** 
4542:rtos/uC-USB-Device/Source/usbd_ep.c ****     return;
 186              		.loc 1 4542 5 is_stmt 1 view .LVU52
4543:rtos/uC-USB-Device/Source/usbd_ep.c **** }
ARM GAS  /tmp/ccuUvpuw.s 			page 84


 187              		.loc 1 4543 1 is_stmt 0 view .LVU53
 188 000c 7047     		bx	lr
 189              	.L11:
4535:rtos/uC-USB-Device/Source/usbd_ep.c ****         p_ep->URB_TailPtr = p_urb;
 190              		.loc 1 4535 9 is_stmt 1 view .LVU54
4535:rtos/uC-USB-Device/Source/usbd_ep.c ****         p_ep->URB_TailPtr = p_urb;
 191              		.loc 1 4535 27 is_stmt 0 view .LVU55
 192 000e C160     		str	r1, [r0, #12]
4536:rtos/uC-USB-Device/Source/usbd_ep.c ****     } else {                                                    /* Q is not empty.                 
 193              		.loc 1 4536 9 is_stmt 1 view .LVU56
4536:rtos/uC-USB-Device/Source/usbd_ep.c ****     } else {                                                    /* Q is not empty.                 
 194              		.loc 1 4536 27 is_stmt 0 view .LVU57
 195 0010 0161     		str	r1, [r0, #16]
 196 0012 7047     		bx	lr
 197              		.cfi_endproc
 198              	.LFE38:
 200              		.section	.text.USBD_URB_Dequeue,"ax",%progbits
 201              		.align	1
 202              		.syntax unified
 203              		.thumb
 204              		.thumb_func
 205              		.fpu fpv4-sp-d16
 207              	USBD_URB_Dequeue:
 208              	.LVL9:
 209              	.LFB39:
4544:rtos/uC-USB-Device/Source/usbd_ep.c **** 
4545:rtos/uC-USB-Device/Source/usbd_ep.c **** 
4546:rtos/uC-USB-Device/Source/usbd_ep.c **** /*
4547:rtos/uC-USB-Device/Source/usbd_ep.c **** ***************************************************************************************************
4548:rtos/uC-USB-Device/Source/usbd_ep.c **** *                                         USBD_URB_Dequeue()
4549:rtos/uC-USB-Device/Source/usbd_ep.c **** *
4550:rtos/uC-USB-Device/Source/usbd_ep.c **** * Description : Dequeue head USB request block from endpoint.
4551:rtos/uC-USB-Device/Source/usbd_ep.c **** *
4552:rtos/uC-USB-Device/Source/usbd_ep.c **** * Argument(s) : p_ep        Pointer to endpoint structure.
4553:rtos/uC-USB-Device/Source/usbd_ep.c **** *               ----        Argument checked by caller.
4554:rtos/uC-USB-Device/Source/usbd_ep.c **** *
4555:rtos/uC-USB-Device/Source/usbd_ep.c **** * Return(s)   : none.
4556:rtos/uC-USB-Device/Source/usbd_ep.c **** *
4557:rtos/uC-USB-Device/Source/usbd_ep.c **** * Note(s)     : (1) Endpoint must be locked when calling this function.
4558:rtos/uC-USB-Device/Source/usbd_ep.c **** ***************************************************************************************************
4559:rtos/uC-USB-Device/Source/usbd_ep.c **** */
4560:rtos/uC-USB-Device/Source/usbd_ep.c **** 
4561:rtos/uC-USB-Device/Source/usbd_ep.c **** static  void  USBD_URB_Dequeue (USBD_EP  *p_ep)
4562:rtos/uC-USB-Device/Source/usbd_ep.c **** {
 210              		.loc 1 4562 1 is_stmt 1 view -0
 211              		.cfi_startproc
 212              		@ args = 0, pretend = 0, frame = 0
 213              		@ frame_needed = 0, uses_anonymous_args = 0
 214              		@ link register save eliminated.
4563:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_URB  *p_urb;
 215              		.loc 1 4563 5 view .LVU59
4564:rtos/uC-USB-Device/Source/usbd_ep.c **** 
4565:rtos/uC-USB-Device/Source/usbd_ep.c **** 
4566:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_urb = p_ep->URB_HeadPtr;
 216              		.loc 1 4566 5 view .LVU60
 217              		.loc 1 4566 11 is_stmt 0 view .LVU61
 218 0000 C368     		ldr	r3, [r0, #12]
ARM GAS  /tmp/ccuUvpuw.s 			page 85


 219              	.LVL10:
4567:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_urb == (USBD_URB *)0) {
 220              		.loc 1 4567 5 is_stmt 1 view .LVU62
 221              		.loc 1 4567 8 is_stmt 0 view .LVU63
 222 0002 13B1     		cbz	r3, .L12
4568:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
4569:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
4570:rtos/uC-USB-Device/Source/usbd_ep.c **** 
4571:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_urb->NextPtr == (USBD_URB *)0) {                      /* Only one URB is queued.         
 223              		.loc 1 4571 5 is_stmt 1 view .LVU64
 224              		.loc 1 4571 14 is_stmt 0 view .LVU65
 225 0004 1B6A     		ldr	r3, [r3, #32]
 226              	.LVL11:
 227              		.loc 1 4571 8 view .LVU66
 228 0006 0BB1     		cbz	r3, .L15
4572:rtos/uC-USB-Device/Source/usbd_ep.c ****         p_ep->URB_HeadPtr = (USBD_URB *)0;
4573:rtos/uC-USB-Device/Source/usbd_ep.c ****         p_ep->URB_TailPtr = (USBD_URB *)0;
4574:rtos/uC-USB-Device/Source/usbd_ep.c ****         p_ep->XferState   =  USBD_XFER_STATE_NONE;
4575:rtos/uC-USB-Device/Source/usbd_ep.c ****     } else {
4576:rtos/uC-USB-Device/Source/usbd_ep.c ****         p_ep->URB_HeadPtr = p_urb->NextPtr;
 229              		.loc 1 4576 9 is_stmt 1 view .LVU67
 230              		.loc 1 4576 27 is_stmt 0 view .LVU68
 231 0008 C360     		str	r3, [r0, #12]
 232              	.LVL12:
 233              	.L12:
4577:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
4578:rtos/uC-USB-Device/Source/usbd_ep.c **** }
 234              		.loc 1 4578 1 view .LVU69
 235 000a 7047     		bx	lr
 236              	.LVL13:
 237              	.L15:
4572:rtos/uC-USB-Device/Source/usbd_ep.c ****         p_ep->URB_HeadPtr = (USBD_URB *)0;
 238              		.loc 1 4572 9 is_stmt 1 view .LVU70
4572:rtos/uC-USB-Device/Source/usbd_ep.c ****         p_ep->URB_HeadPtr = (USBD_URB *)0;
 239              		.loc 1 4572 27 is_stmt 0 view .LVU71
 240 000c C360     		str	r3, [r0, #12]
 241              	.LVL14:
4573:rtos/uC-USB-Device/Source/usbd_ep.c ****         p_ep->XferState   =  USBD_XFER_STATE_NONE;
 242              		.loc 1 4573 9 is_stmt 1 view .LVU72
4573:rtos/uC-USB-Device/Source/usbd_ep.c ****         p_ep->XferState   =  USBD_XFER_STATE_NONE;
 243              		.loc 1 4573 27 is_stmt 0 view .LVU73
 244 000e 0361     		str	r3, [r0, #16]
4574:rtos/uC-USB-Device/Source/usbd_ep.c ****     } else {
 245              		.loc 1 4574 9 is_stmt 1 view .LVU74
4574:rtos/uC-USB-Device/Source/usbd_ep.c ****     } else {
 246              		.loc 1 4574 27 is_stmt 0 view .LVU75
 247 0010 4370     		strb	r3, [r0, #1]
 248 0012 7047     		bx	lr
 249              		.cfi_endproc
 250              	.LFE39:
 252              		.section	.text.USBD_URB_AsyncCmpl,"ax",%progbits
 253              		.align	1
 254              		.syntax unified
 255              		.thumb
 256              		.thumb_func
 257              		.fpu fpv4-sp-d16
 259              	USBD_URB_AsyncCmpl:
ARM GAS  /tmp/ccuUvpuw.s 			page 86


 260              	.LVL15:
 261              	.LFB34:
4305:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_URB  *p_urb;
 262              		.loc 1 4305 1 is_stmt 1 view -0
 263              		.cfi_startproc
 264              		@ args = 0, pretend = 0, frame = 0
 265              		@ frame_needed = 0, uses_anonymous_args = 0
4305:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_URB  *p_urb;
 266              		.loc 1 4305 1 is_stmt 0 view .LVU77
 267 0000 38B5     		push	{r3, r4, r5, lr}
 268              	.LCFI4:
 269              		.cfi_def_cfa_offset 16
 270              		.cfi_offset 3, -16
 271              		.cfi_offset 4, -12
 272              		.cfi_offset 5, -8
 273              		.cfi_offset 14, -4
4306:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 274              		.loc 1 4306 5 is_stmt 1 view .LVU78
4309:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_urb == (USBD_URB *)0) {
 275              		.loc 1 4309 5 view .LVU79
4309:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_urb == (USBD_URB *)0) {
 276              		.loc 1 4309 11 is_stmt 0 view .LVU80
 277 0002 C468     		ldr	r4, [r0, #12]
 278              	.LVL16:
4310:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (p_urb);
 279              		.loc 1 4310 5 is_stmt 1 view .LVU81
4310:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (p_urb);
 280              		.loc 1 4310 8 is_stmt 0 view .LVU82
 281 0004 2CB1     		cbz	r4, .L16
 282 0006 0D46     		mov	r5, r1
4314:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 283              		.loc 1 4314 5 is_stmt 1 view .LVU83
 284 0008 FFF7FEFF 		bl	USBD_URB_Dequeue
 285              	.LVL17:
4316:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_urb->NextPtr = (USBD_URB *)0;                             /* Remove links with 'p_ep' URB lin
 286              		.loc 1 4316 5 view .LVU84
4316:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_urb->NextPtr = (USBD_URB *)0;                             /* Remove links with 'p_ep' URB lin
 287              		.loc 1 4316 20 is_stmt 0 view .LVU85
 288 000c A583     		strh	r5, [r4, #28]	@ movhi
4317:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 289              		.loc 1 4317 5 is_stmt 1 view .LVU86
4317:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 290              		.loc 1 4317 20 is_stmt 0 view .LVU87
 291 000e 0023     		movs	r3, #0
 292 0010 2362     		str	r3, [r4, #32]
4319:rtos/uC-USB-Device/Source/usbd_ep.c **** }
 293              		.loc 1 4319 5 is_stmt 1 view .LVU88
 294              	.L16:
4320:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 295              		.loc 1 4320 1 is_stmt 0 view .LVU89
 296 0012 2046     		mov	r0, r4
 297 0014 38BD     		pop	{r3, r4, r5, pc}
4320:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 298              		.loc 1 4320 1 view .LVU90
 299              		.cfi_endproc
 300              	.LFE34:
 302              		.section	.text.USBD_URB_Get,"ax",%progbits
ARM GAS  /tmp/ccuUvpuw.s 			page 87


 303              		.align	1
 304              		.syntax unified
 305              		.thumb
 306              		.thumb_func
 307              		.fpu fpv4-sp-d16
 309              	USBD_URB_Get:
 310              	.LVL18:
 311              	.LFB37:
4459:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_BOOLEAN  ep_empty;
 312              		.loc 1 4459 1 is_stmt 1 view -0
 313              		.cfi_startproc
 314              		@ args = 0, pretend = 0, frame = 0
 315              		@ frame_needed = 0, uses_anonymous_args = 0
4459:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_BOOLEAN  ep_empty;
 316              		.loc 1 4459 1 is_stmt 0 view .LVU92
 317 0000 70B5     		push	{r4, r5, r6, lr}
 318              	.LCFI5:
 319              		.cfi_def_cfa_offset 16
 320              		.cfi_offset 4, -16
 321              		.cfi_offset 5, -12
 322              		.cfi_offset 6, -8
 323              		.cfi_offset 14, -4
 324 0002 0546     		mov	r5, r0
 325 0004 0C46     		mov	r4, r1
 326 0006 1646     		mov	r6, r2
4460:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_URB  *p_urb;
 327              		.loc 1 4460 5 is_stmt 1 view .LVU93
4461:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_SR_ALLOC();
 328              		.loc 1 4461 5 view .LVU94
4462:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 329              		.loc 1 4462 5 view .LVU95
 330              	.LVL19:
4465:rtos/uC-USB-Device/Source/usbd_ep.c ****     ep_empty = ((p_ep->URB_HeadPtr == (USBD_URB *)0) && (p_ep->URB_TailPtr == (USBD_URB *)0)) ? DEF
 331              		.loc 1 4465 5 view .LVU96
4465:rtos/uC-USB-Device/Source/usbd_ep.c ****     ep_empty = ((p_ep->URB_HeadPtr == (USBD_URB *)0) && (p_ep->URB_TailPtr == (USBD_URB *)0)) ? DEF
 332              		.loc 1 4465 5 view .LVU97
4465:rtos/uC-USB-Device/Source/usbd_ep.c ****     ep_empty = ((p_ep->URB_HeadPtr == (USBD_URB *)0) && (p_ep->URB_TailPtr == (USBD_URB *)0)) ? DEF
 333              		.loc 1 4465 5 view .LVU98
 334 0008 4020     		movs	r0, #64
 335              	.LVL20:
4465:rtos/uC-USB-Device/Source/usbd_ep.c ****     ep_empty = ((p_ep->URB_HeadPtr == (USBD_URB *)0) && (p_ep->URB_TailPtr == (USBD_URB *)0)) ? DEF
 336              		.loc 1 4465 5 is_stmt 0 view .LVU99
 337 000a FFF7FEFF 		bl	CPU_SR_Save
 338              	.LVL21:
4465:rtos/uC-USB-Device/Source/usbd_ep.c ****     ep_empty = ((p_ep->URB_HeadPtr == (USBD_URB *)0) && (p_ep->URB_TailPtr == (USBD_URB *)0)) ? DEF
 339              		.loc 1 4465 5 is_stmt 1 view .LVU100
4465:rtos/uC-USB-Device/Source/usbd_ep.c ****     ep_empty = ((p_ep->URB_HeadPtr == (USBD_URB *)0) && (p_ep->URB_TailPtr == (USBD_URB *)0)) ? DEF
 340              		.loc 1 4465 5 view .LVU101
4466:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 341              		.loc 1 4466 5 view .LVU102
4466:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 342              		.loc 1 4466 22 is_stmt 0 view .LVU103
 343 000e E368     		ldr	r3, [r4, #12]
4466:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 344              		.loc 1 4466 14 view .LVU104
 345 0010 73B9     		cbnz	r3, .L20
4466:rtos/uC-USB-Device/Source/usbd_ep.c **** 
ARM GAS  /tmp/ccuUvpuw.s 			page 88


 346              		.loc 1 4466 62 discriminator 1 view .LVU105
 347 0012 2369     		ldr	r3, [r4, #16]
4466:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 348              		.loc 1 4466 54 discriminator 1 view .LVU106
 349 0014 63B9     		cbnz	r3, .L20
 350              	.LVL22:
4475:rtos/uC-USB-Device/Source/usbd_ep.c **** #endif
 351              		.loc 1 4475 5 is_stmt 1 view .LVU107
4478:rtos/uC-USB-Device/Source/usbd_ep.c ****         if (p_urb != (USBD_URB *)0) {
 352              		.loc 1 4478 9 view .LVU108
4478:rtos/uC-USB-Device/Source/usbd_ep.c ****         if (p_urb != (USBD_URB *)0) {
 353              		.loc 1 4478 15 is_stmt 0 view .LVU109
 354 0016 0C4B     		ldr	r3, .L27
 355 0018 53F82540 		ldr	r4, [r3, r5, lsl #2]
 356              	.LVL23:
4479:rtos/uC-USB-Device/Source/usbd_ep.c ****             USBD_URB_TblPtr[dev_nbr] = p_urb->NextPtr;
 357              		.loc 1 4479 9 is_stmt 1 view .LVU110
4479:rtos/uC-USB-Device/Source/usbd_ep.c ****             USBD_URB_TblPtr[dev_nbr] = p_urb->NextPtr;
 358              		.loc 1 4479 12 is_stmt 0 view .LVU111
 359 001c 84B1     		cbz	r4, .L26
4480:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 360              		.loc 1 4480 13 is_stmt 1 view .LVU112
4480:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 361              		.loc 1 4480 45 is_stmt 0 view .LVU113
 362 001e 226A     		ldr	r2, [r4, #32]
4480:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 363              		.loc 1 4480 38 view .LVU114
 364 0020 094B     		ldr	r3, .L27
 365 0022 43F82520 		str	r2, [r3, r5, lsl #2]
4482:rtos/uC-USB-Device/Source/usbd_ep.c ****             p_urb->Flags   =  0u;
 366              		.loc 1 4482 13 is_stmt 1 view .LVU115
4482:rtos/uC-USB-Device/Source/usbd_ep.c ****             p_urb->Flags   =  0u;
 367              		.loc 1 4482 28 is_stmt 0 view .LVU116
 368 0026 0023     		movs	r3, #0
 369 0028 2362     		str	r3, [r4, #32]
4483:rtos/uC-USB-Device/Source/usbd_ep.c **** #if (USBD_CFG_MAX_NBR_URB_EXTRA > 0u)
 370              		.loc 1 4483 13 is_stmt 1 view .LVU117
4483:rtos/uC-USB-Device/Source/usbd_ep.c **** #if (USBD_CFG_MAX_NBR_URB_EXTRA > 0u)
 371              		.loc 1 4483 28 is_stmt 0 view .LVU118
 372 002a 2374     		strb	r3, [r4, #16]
4494:rtos/uC-USB-Device/Source/usbd_ep.c ****         } else {
 373              		.loc 1 4494 12 is_stmt 1 view .LVU119
4494:rtos/uC-USB-Device/Source/usbd_ep.c ****         } else {
 374              		.loc 1 4494 19 is_stmt 0 view .LVU120
 375 002c 3380     		strh	r3, [r6]	@ movhi
 376 002e 03E0     		b	.L23
 377              	.LVL24:
 378              	.L20:
4475:rtos/uC-USB-Device/Source/usbd_ep.c **** #endif
 379              		.loc 1 4475 5 is_stmt 1 view .LVU121
4501:rtos/uC-USB-Device/Source/usbd_ep.c ****         p_urb = (USBD_URB *)0;
 380              		.loc 1 4501 8 view .LVU122
4501:rtos/uC-USB-Device/Source/usbd_ep.c ****         p_urb = (USBD_URB *)0;
 381              		.loc 1 4501 15 is_stmt 0 view .LVU123
 382 0030 4FF4CC73 		mov	r3, #408
 383 0034 3380     		strh	r3, [r6]	@ movhi
4502:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
ARM GAS  /tmp/ccuUvpuw.s 			page 89


 384              		.loc 1 4502 9 is_stmt 1 view .LVU124
 385              	.LVL25:
4502:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 386              		.loc 1 4502 15 is_stmt 0 view .LVU125
 387 0036 0024     		movs	r4, #0
 388              	.LVL26:
 389              	.L23:
4504:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 390              		.loc 1 4504 5 is_stmt 1 view .LVU126
4504:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 391              		.loc 1 4504 5 view .LVU127
4504:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 392              		.loc 1 4504 5 view .LVU128
 393 0038 FFF7FEFF 		bl	CPU_SR_Restore
 394              	.LVL27:
4504:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 395              		.loc 1 4504 5 view .LVU129
4504:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 396              		.loc 1 4504 5 view .LVU130
4506:rtos/uC-USB-Device/Source/usbd_ep.c **** }
 397              		.loc 1 4506 5 view .LVU131
4507:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 398              		.loc 1 4507 1 is_stmt 0 view .LVU132
 399 003c 2046     		mov	r0, r4
 400 003e 70BD     		pop	{r4, r5, r6, pc}
 401              	.LVL28:
 402              	.L26:
4496:rtos/uC-USB-Device/Source/usbd_ep.c ****             p_urb = (USBD_URB *)0;
 403              		.loc 1 4496 12 is_stmt 1 view .LVU133
4496:rtos/uC-USB-Device/Source/usbd_ep.c ****             p_urb = (USBD_URB *)0;
 404              		.loc 1 4496 19 is_stmt 0 view .LVU134
 405 0040 4FF4CC73 		mov	r3, #408
 406 0044 3380     		strh	r3, [r6]	@ movhi
4497:rtos/uC-USB-Device/Source/usbd_ep.c ****         }
 407              		.loc 1 4497 13 is_stmt 1 view .LVU135
 408              	.LVL29:
4497:rtos/uC-USB-Device/Source/usbd_ep.c ****         }
 409              		.loc 1 4497 13 is_stmt 0 view .LVU136
 410 0046 F7E7     		b	.L23
 411              	.L28:
 412              		.align	2
 413              	.L27:
 414 0048 00000000 		.word	.LANCHOR0
 415              		.cfi_endproc
 416              	.LFE37:
 418              		.section	.text.USBD_EP_RxStartAsyncProcess,"ax",%progbits
 419              		.align	1
 420              		.syntax unified
 421              		.thumb
 422              		.thumb_func
 423              		.fpu fpv4-sp-d16
 425              	USBD_EP_RxStartAsyncProcess:
 426              	.LVL30:
 427              	.LFB29:
3595:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DRV_API  *p_drv_api;
 428              		.loc 1 3595 1 is_stmt 1 view -0
 429              		.cfi_startproc
ARM GAS  /tmp/ccuUvpuw.s 			page 90


 430              		@ args = 8, pretend = 0, frame = 0
 431              		@ frame_needed = 0, uses_anonymous_args = 0
3595:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DRV_API  *p_drv_api;
 432              		.loc 1 3595 1 is_stmt 0 view .LVU138
 433 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 434              	.LCFI6:
 435              		.cfi_def_cfa_offset 24
 436              		.cfi_offset 4, -24
 437              		.cfi_offset 5, -20
 438              		.cfi_offset 6, -16
 439              		.cfi_offset 7, -12
 440              		.cfi_offset 8, -8
 441              		.cfi_offset 14, -4
 442 0004 82B0     		sub	sp, sp, #8
 443              	.LCFI7:
 444              		.cfi_def_cfa_offset 32
 445 0006 0C46     		mov	r4, r1
 446 0008 1546     		mov	r5, r2
 447 000a 1A46     		mov	r2, r3
 448              	.LVL31:
3595:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DRV_API  *p_drv_api;
 449              		.loc 1 3595 1 view .LVU139
 450 000c 089F     		ldr	r7, [sp, #32]
 451 000e 099E     		ldr	r6, [sp, #36]
3596:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_SR_ALLOC();
 452              		.loc 1 3596 5 is_stmt 1 view .LVU140
3597:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 453              		.loc 1 3597 5 view .LVU141
 454              	.LVL32:
3600:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 455              		.loc 1 3600 5 view .LVU142
3600:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 456              		.loc 1 3600 15 is_stmt 0 view .LVU143
 457 0010 4368     		ldr	r3, [r0, #4]
 458              	.LVL33:
3602:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_urb->NextXferLen = p_drv_api->EP_RxStart(p_drv,
 459              		.loc 1 3602 66 is_stmt 1 view .LVU144
3603:rtos/uC-USB-Device/Source/usbd_ep.c ****                                                p_ep->Addr,
 460              		.loc 1 3603 5 view .LVU145
3603:rtos/uC-USB-Device/Source/usbd_ep.c ****                                                p_ep->Addr,
 461              		.loc 1 3603 35 is_stmt 0 view .LVU146
 462 0012 D3F82880 		ldr	r8, [r3, #40]
3603:rtos/uC-USB-Device/Source/usbd_ep.c ****                                                p_ep->Addr,
 463              		.loc 1 3603 26 view .LVU147
 464 0016 0096     		str	r6, [sp]
 465 0018 3B46     		mov	r3, r7
 466              	.LVL34:
3603:rtos/uC-USB-Device/Source/usbd_ep.c ****                                                p_ep->Addr,
 467              		.loc 1 3603 26 view .LVU148
 468 001a 8978     		ldrb	r1, [r1, #2]	@ zero_extendqisi2
 469              	.LVL35:
3603:rtos/uC-USB-Device/Source/usbd_ep.c ****                                                p_ep->Addr,
 470              		.loc 1 3603 26 view .LVU149
 471 001c C047     		blx	r8
 472              	.LVL36:
3603:rtos/uC-USB-Device/Source/usbd_ep.c ****                                                p_ep->Addr,
 473              		.loc 1 3603 24 view .LVU150
ARM GAS  /tmp/ccuUvpuw.s 			page 91


 474 001e E860     		str	r0, [r5, #12]
3608:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 475              		.loc 1 3608 5 is_stmt 1 view .LVU151
3608:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 476              		.loc 1 3608 9 is_stmt 0 view .LVU152
 477 0020 3388     		ldrh	r3, [r6]
3608:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 478              		.loc 1 3608 8 view .LVU153
 479 0022 0BB9     		cbnz	r3, .L29
3612:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 480              		.loc 1 3612 73 is_stmt 1 view .LVU154
3614:rtos/uC-USB-Device/Source/usbd_ep.c ****         CPU_CRITICAL_ENTER();
 481              		.loc 1 3614 5 view .LVU155
3614:rtos/uC-USB-Device/Source/usbd_ep.c ****         CPU_CRITICAL_ENTER();
 482              		.loc 1 3614 8 is_stmt 0 view .LVU156
 483 0024 B842     		cmp	r0, r7
 484 0026 02D1     		bne	.L32
 485              	.LVL37:
 486              	.L29:
3619:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 487              		.loc 1 3619 1 view .LVU157
 488 0028 02B0     		add	sp, sp, #8
 489              	.LCFI8:
 490              		.cfi_remember_state
 491              		.cfi_def_cfa_offset 24
 492              		@ sp needed
 493 002a BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 494              	.LVL38:
 495              	.L32:
 496              	.LCFI9:
 497              		.cfi_restore_state
3615:rtos/uC-USB-Device/Source/usbd_ep.c ****         p_ep->XferState = USBD_XFER_STATE_ASYNC_PARTIAL;        /* Xfer will have to be done in man
 498              		.loc 1 3615 9 is_stmt 1 view .LVU158
3615:rtos/uC-USB-Device/Source/usbd_ep.c ****         p_ep->XferState = USBD_XFER_STATE_ASYNC_PARTIAL;        /* Xfer will have to be done in man
 499              		.loc 1 3615 9 view .LVU159
3615:rtos/uC-USB-Device/Source/usbd_ep.c ****         p_ep->XferState = USBD_XFER_STATE_ASYNC_PARTIAL;        /* Xfer will have to be done in man
 500              		.loc 1 3615 9 view .LVU160
 501 002e 4020     		movs	r0, #64
 502 0030 FFF7FEFF 		bl	CPU_SR_Save
 503              	.LVL39:
3615:rtos/uC-USB-Device/Source/usbd_ep.c ****         p_ep->XferState = USBD_XFER_STATE_ASYNC_PARTIAL;        /* Xfer will have to be done in man
 504              		.loc 1 3615 9 view .LVU161
3615:rtos/uC-USB-Device/Source/usbd_ep.c ****         p_ep->XferState = USBD_XFER_STATE_ASYNC_PARTIAL;        /* Xfer will have to be done in man
 505              		.loc 1 3615 9 view .LVU162
3616:rtos/uC-USB-Device/Source/usbd_ep.c ****         CPU_CRITICAL_EXIT();
 506              		.loc 1 3616 9 view .LVU163
3616:rtos/uC-USB-Device/Source/usbd_ep.c ****         CPU_CRITICAL_EXIT();
 507              		.loc 1 3616 25 is_stmt 0 view .LVU164
 508 0034 0323     		movs	r3, #3
 509 0036 6370     		strb	r3, [r4, #1]
3617:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 510              		.loc 1 3617 9 is_stmt 1 view .LVU165
3617:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 511              		.loc 1 3617 9 view .LVU166
3617:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 512              		.loc 1 3617 9 view .LVU167
 513 0038 FFF7FEFF 		bl	CPU_SR_Restore
ARM GAS  /tmp/ccuUvpuw.s 			page 92


 514              	.LVL40:
3617:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 515              		.loc 1 3617 9 view .LVU168
3617:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 516              		.loc 1 3617 9 view .LVU169
 517 003c F4E7     		b	.L29
 518              		.cfi_endproc
 519              	.LFE29:
 521              		.section	.text.USBD_URB_Free,"ax",%progbits
 522              		.align	1
 523              		.syntax unified
 524              		.thumb
 525              		.thumb_func
 526              		.fpu fpv4-sp-d16
 528              	USBD_URB_Free:
 529              	.LVL41:
 530              	.LFB36:
4407:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_SR_ALLOC();
 531              		.loc 1 4407 1 view -0
 532              		.cfi_startproc
 533              		@ args = 0, pretend = 0, frame = 0
 534              		@ frame_needed = 0, uses_anonymous_args = 0
4407:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_SR_ALLOC();
 535              		.loc 1 4407 1 is_stmt 0 view .LVU171
 536 0000 38B5     		push	{r3, r4, r5, lr}
 537              	.LCFI10:
 538              		.cfi_def_cfa_offset 16
 539              		.cfi_offset 3, -16
 540              		.cfi_offset 4, -12
 541              		.cfi_offset 5, -8
 542              		.cfi_offset 14, -4
 543 0002 0546     		mov	r5, r0
 544 0004 1446     		mov	r4, r2
4408:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 545              		.loc 1 4408 5 is_stmt 1 view .LVU172
 546              	.LVL42:
4411:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_urb->State             = USBD_URB_STATE_IDLE;
 547              		.loc 1 4411 5 view .LVU173
4411:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_urb->State             = USBD_URB_STATE_IDLE;
 548              		.loc 1 4411 5 view .LVU174
4411:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_urb->State             = USBD_URB_STATE_IDLE;
 549              		.loc 1 4411 5 view .LVU175
 550 0006 4020     		movs	r0, #64
 551              	.LVL43:
4411:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_urb->State             = USBD_URB_STATE_IDLE;
 552              		.loc 1 4411 5 is_stmt 0 view .LVU176
 553 0008 FFF7FEFF 		bl	CPU_SR_Save
 554              	.LVL44:
4411:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_urb->State             = USBD_URB_STATE_IDLE;
 555              		.loc 1 4411 5 is_stmt 1 view .LVU177
4411:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_urb->State             = USBD_URB_STATE_IDLE;
 556              		.loc 1 4411 5 view .LVU178
4412:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_urb->NextPtr           = USBD_URB_TblPtr[dev_nbr];
 557              		.loc 1 4412 5 view .LVU179
4412:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_urb->NextPtr           = USBD_URB_TblPtr[dev_nbr];
 558              		.loc 1 4412 30 is_stmt 0 view .LVU180
 559 000c 0023     		movs	r3, #0
ARM GAS  /tmp/ccuUvpuw.s 			page 93


 560 000e 6374     		strb	r3, [r4, #17]
4413:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_URB_TblPtr[dev_nbr] = p_urb;
 561              		.loc 1 4413 5 is_stmt 1 view .LVU181
4413:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_URB_TblPtr[dev_nbr] = p_urb;
 562              		.loc 1 4413 47 is_stmt 0 view .LVU182
 563 0010 044B     		ldr	r3, .L35
 564 0012 53F82520 		ldr	r2, [r3, r5, lsl #2]
4413:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_URB_TblPtr[dev_nbr] = p_urb;
 565              		.loc 1 4413 30 view .LVU183
 566 0016 2262     		str	r2, [r4, #32]
4414:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 567              		.loc 1 4414 5 is_stmt 1 view .LVU184
4414:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 568              		.loc 1 4414 30 is_stmt 0 view .LVU185
 569 0018 43F82540 		str	r4, [r3, r5, lsl #2]
4424:rtos/uC-USB-Device/Source/usbd_ep.c **** #endif
 570              		.loc 1 4424 5 is_stmt 1 view .LVU186
4426:rtos/uC-USB-Device/Source/usbd_ep.c **** }
 571              		.loc 1 4426 5 view .LVU187
4426:rtos/uC-USB-Device/Source/usbd_ep.c **** }
 572              		.loc 1 4426 5 view .LVU188
4426:rtos/uC-USB-Device/Source/usbd_ep.c **** }
 573              		.loc 1 4426 5 view .LVU189
 574 001c FFF7FEFF 		bl	CPU_SR_Restore
 575              	.LVL45:
4426:rtos/uC-USB-Device/Source/usbd_ep.c **** }
 576              		.loc 1 4426 5 view .LVU190
4426:rtos/uC-USB-Device/Source/usbd_ep.c **** }
 577              		.loc 1 4426 5 view .LVU191
4427:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 578              		.loc 1 4427 1 is_stmt 0 view .LVU192
 579 0020 38BD     		pop	{r3, r4, r5, pc}
 580              	.LVL46:
 581              	.L36:
4427:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 582              		.loc 1 4427 1 view .LVU193
 583 0022 00BF     		.align	2
 584              	.L35:
 585 0024 00000000 		.word	.LANCHOR0
 586              		.cfi_endproc
 587              	.LFE36:
 589              		.section	.text.USBD_EP_Rx,"ax",%progbits
 590              		.align	1
 591              		.syntax unified
 592              		.thumb
 593              		.thumb_func
 594              		.fpu fpv4-sp-d16
 596              	USBD_EP_Rx:
 597              	.LVL47:
 598              	.LFB31:
3778:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_URB         *p_urb;
 599              		.loc 1 3778 1 is_stmt 1 view -0
 600              		.cfi_startproc
 601              		@ args = 16, pretend = 0, frame = 8
 602              		@ frame_needed = 0, uses_anonymous_args = 0
3778:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_URB         *p_urb;
 603              		.loc 1 3778 1 is_stmt 0 view .LVU195
ARM GAS  /tmp/ccuUvpuw.s 			page 94


 604 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 605              	.LCFI11:
 606              		.cfi_def_cfa_offset 36
 607              		.cfi_offset 4, -36
 608              		.cfi_offset 5, -32
 609              		.cfi_offset 6, -28
 610              		.cfi_offset 7, -24
 611              		.cfi_offset 8, -20
 612              		.cfi_offset 9, -16
 613              		.cfi_offset 10, -12
 614              		.cfi_offset 11, -8
 615              		.cfi_offset 14, -4
 616 0004 85B0     		sub	sp, sp, #20
 617              	.LCFI12:
 618              		.cfi_def_cfa_offset 56
 619 0006 0746     		mov	r7, r0
 620 0008 0E46     		mov	r6, r1
 621 000a 9046     		mov	r8, r2
 622 000c DDF83890 		ldr	r9, [sp, #56]
 623 0010 BDF840A0 		ldrh	r10, [sp, #64]
 624 0014 119D     		ldr	r5, [sp, #68]
3779:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DRV_API     *p_drv_api;
 625              		.loc 1 3779 5 is_stmt 1 view .LVU196
3780:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_XFER_STATE   prev_xfer_state;
 626              		.loc 1 3780 5 view .LVU197
3781:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_INT08U       *p_buf_cur;
 627              		.loc 1 3781 5 view .LVU198
3782:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_INT32U        xfer_len;
 628              		.loc 1 3782 5 view .LVU199
3783:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_INT32U        xfer_tot;
 629              		.loc 1 3783 5 view .LVU200
3784:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_INT32U        prev_xfer_len;
 630              		.loc 1 3784 5 view .LVU201
3785:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_ERR          local_err;
 631              		.loc 1 3785 5 view .LVU202
3786:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 632              		.loc 1 3786 5 view .LVU203
3789:rtos/uC-USB-Device/Source/usbd_ep.c ****         (p_buf   == (void *)0)) {
 633              		.loc 1 3789 5 view .LVU204
3789:rtos/uC-USB-Device/Source/usbd_ep.c ****         (p_buf   == (void *)0)) {
 634              		.loc 1 3789 8 is_stmt 0 view .LVU205
 635 0016 9B46     		mov	fp, r3
 636 0018 03B1     		cbz	r3, .L38
3789:rtos/uC-USB-Device/Source/usbd_ep.c ****         (p_buf   == (void *)0)) {
 637              		.loc 1 3789 33 discriminator 1 view .LVU206
 638 001a 5AB1     		cbz	r2, .L55
 639              	.L38:
3795:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_DBG_STATS_EP_INC(p_drv->DevNbr, p_ep->Ix, RxSyncExecNbr);
 640              		.loc 1 3795 5 is_stmt 1 view .LVU207
3795:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_DBG_STATS_EP_INC(p_drv->DevNbr, p_ep->Ix, RxSyncExecNbr);
 641              		.loc 1 3795 8 is_stmt 0 view .LVU208
 642 001c B9F1000F 		cmp	r9, #0
 643 0020 0CD0     		beq	.L56
3802:rtos/uC-USB-Device/Source/usbd_ep.c ****         if ((p_ep->XferState != USBD_XFER_STATE_NONE) &&
 644              		.loc 1 3802 71 is_stmt 1 view .LVU209
3803:rtos/uC-USB-Device/Source/usbd_ep.c ****             (p_ep->XferState != USBD_XFER_STATE_ASYNC)) {
 645              		.loc 1 3803 9 view .LVU210
ARM GAS  /tmp/ccuUvpuw.s 			page 95


3803:rtos/uC-USB-Device/Source/usbd_ep.c ****             (p_ep->XferState != USBD_XFER_STATE_ASYNC)) {
 646              		.loc 1 3803 18 is_stmt 0 view .LVU211
 647 0022 7378     		ldrb	r3, [r6, #1]	@ zero_extendqisi2
 648              	.LVL48:
3803:rtos/uC-USB-Device/Source/usbd_ep.c ****             (p_ep->XferState != USBD_XFER_STATE_ASYNC)) {
 649              		.loc 1 3803 12 view .LVU212
 650 0024 6BB1     		cbz	r3, .L41
3803:rtos/uC-USB-Device/Source/usbd_ep.c ****             (p_ep->XferState != USBD_XFER_STATE_ASYNC)) {
 651              		.loc 1 3803 55 discriminator 1 view .LVU213
 652 0026 022B     		cmp	r3, #2
 653 0028 0BD0     		beq	.L41
3805:rtos/uC-USB-Device/Source/usbd_ep.c ****             return (0u);
 654              		.loc 1 3805 12 is_stmt 1 view .LVU214
3805:rtos/uC-USB-Device/Source/usbd_ep.c ****             return (0u);
 655              		.loc 1 3805 19 is_stmt 0 view .LVU215
 656 002a 40F29713 		movw	r3, #407
 657 002e 2B80     		strh	r3, [r5]	@ movhi
3806:rtos/uC-USB-Device/Source/usbd_ep.c ****         }
 658              		.loc 1 3806 13 is_stmt 1 view .LVU216
3806:rtos/uC-USB-Device/Source/usbd_ep.c ****         }
 659              		.loc 1 3806 20 is_stmt 0 view .LVU217
 660 0030 0025     		movs	r5, #0
 661 0032 34E0     		b	.L37
 662              	.LVL49:
 663              	.L55:
3791:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (0u);
 664              		.loc 1 3791 8 is_stmt 1 view .LVU218
3791:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (0u);
 665              		.loc 1 3791 15 is_stmt 0 view .LVU219
 666 0034 0523     		movs	r3, #5
 667              	.LVL50:
3791:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (0u);
 668              		.loc 1 3791 15 view .LVU220
 669 0036 2B80     		strh	r3, [r5]	@ movhi
3792:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 670              		.loc 1 3792 9 is_stmt 1 view .LVU221
3792:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 671              		.loc 1 3792 16 is_stmt 0 view .LVU222
 672 0038 0025     		movs	r5, #0
 673 003a 30E0     		b	.L37
 674              	.LVL51:
 675              	.L56:
3796:rtos/uC-USB-Device/Source/usbd_ep.c ****         if (p_ep->XferState != USBD_XFER_STATE_NONE) {
 676              		.loc 1 3796 70 is_stmt 1 view .LVU223
3797:rtos/uC-USB-Device/Source/usbd_ep.c ****            *p_err = USBD_ERR_EP_IO_PENDING;
 677              		.loc 1 3797 9 view .LVU224
3797:rtos/uC-USB-Device/Source/usbd_ep.c ****            *p_err = USBD_ERR_EP_IO_PENDING;
 678              		.loc 1 3797 17 is_stmt 0 view .LVU225
 679 003c 7378     		ldrb	r3, [r6, #1]	@ zero_extendqisi2
 680              	.LVL52:
3797:rtos/uC-USB-Device/Source/usbd_ep.c ****            *p_err = USBD_ERR_EP_IO_PENDING;
 681              		.loc 1 3797 12 view .LVU226
 682 003e 002B     		cmp	r3, #0
 683 0040 31D1     		bne	.L57
 684              	.L41:
3810:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (*p_err != USBD_ERR_NONE) {
 685              		.loc 1 3810 5 is_stmt 1 view .LVU227
ARM GAS  /tmp/ccuUvpuw.s 			page 96


3810:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (*p_err != USBD_ERR_NONE) {
 686              		.loc 1 3810 13 is_stmt 0 view .LVU228
 687 0042 2A46     		mov	r2, r5
 688              	.LVL53:
3810:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (*p_err != USBD_ERR_NONE) {
 689              		.loc 1 3810 13 view .LVU229
 690 0044 3146     		mov	r1, r6
 691              	.LVL54:
3810:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (*p_err != USBD_ERR_NONE) {
 692              		.loc 1 3810 13 view .LVU230
 693 0046 3878     		ldrb	r0, [r7]	@ zero_extendqisi2
 694              	.LVL55:
3810:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (*p_err != USBD_ERR_NONE) {
 695              		.loc 1 3810 13 view .LVU231
 696 0048 FFF7FEFF 		bl	USBD_URB_Get
 697              	.LVL56:
 698 004c 0446     		mov	r4, r0
 699              	.LVL57:
3811:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (0u);
 700              		.loc 1 3811 5 is_stmt 1 view .LVU232
3811:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (0u);
 701              		.loc 1 3811 9 is_stmt 0 view .LVU233
 702 004e 2B88     		ldrh	r3, [r5]
3811:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (0u);
 703              		.loc 1 3811 8 view .LVU234
 704 0050 002B     		cmp	r3, #0
 705 0052 40F0A680 		bne	.L53
3815:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_urb->BufLen       =  buf_len;
 706              		.loc 1 3815 5 is_stmt 1 view .LVU235
3815:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_urb->BufLen       =  buf_len;
 707              		.loc 1 3815 25 is_stmt 0 view .LVU236
 708 0056 C0F80080 		str	r8, [r0]
3816:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_urb->XferLen      =  0u;
 709              		.loc 1 3816 5 is_stmt 1 view .LVU237
3816:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_urb->XferLen      =  0u;
 710              		.loc 1 3816 25 is_stmt 0 view .LVU238
 711 005a C0F804B0 		str	fp, [r0, #4]
3817:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_urb->NextXferLen  =  0u;
 712              		.loc 1 3817 5 is_stmt 1 view .LVU239
3817:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_urb->NextXferLen  =  0u;
 713              		.loc 1 3817 25 is_stmt 0 view .LVU240
 714 005e 8360     		str	r3, [r0, #8]
3818:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_urb->AsyncFnct    =  async_fnct;
 715              		.loc 1 3818 5 is_stmt 1 view .LVU241
3818:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_urb->AsyncFnct    =  async_fnct;
 716              		.loc 1 3818 25 is_stmt 0 view .LVU242
 717 0060 C360     		str	r3, [r0, #12]
3819:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_urb->AsyncFnctArg =  p_async_arg;
 718              		.loc 1 3819 5 is_stmt 1 view .LVU243
3819:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_urb->AsyncFnctArg =  p_async_arg;
 719              		.loc 1 3819 25 is_stmt 0 view .LVU244
 720 0062 C0F81490 		str	r9, [r0, #20]
3820:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_urb->Err          =  USBD_ERR_NONE;
 721              		.loc 1 3820 5 is_stmt 1 view .LVU245
3820:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_urb->Err          =  USBD_ERR_NONE;
 722              		.loc 1 3820 25 is_stmt 0 view .LVU246
 723 0066 0F9A     		ldr	r2, [sp, #60]
ARM GAS  /tmp/ccuUvpuw.s 			page 97


 724 0068 8261     		str	r2, [r0, #24]
3821:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_urb->NextPtr      = (USBD_URB *)0;
 725              		.loc 1 3821 5 is_stmt 1 view .LVU247
3821:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_urb->NextPtr      = (USBD_URB *)0;
 726              		.loc 1 3821 25 is_stmt 0 view .LVU248
 727 006a 8383     		strh	r3, [r0, #28]	@ movhi
3822:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 728              		.loc 1 3822 5 is_stmt 1 view .LVU249
3822:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 729              		.loc 1 3822 25 is_stmt 0 view .LVU250
 730 006c 0362     		str	r3, [r0, #32]
3824:rtos/uC-USB-Device/Source/usbd_ep.c ****         p_urb->State    = USBD_URB_STATE_XFER_ASYNC;
 731              		.loc 1 3824 5 is_stmt 1 view .LVU251
3824:rtos/uC-USB-Device/Source/usbd_ep.c ****         p_urb->State    = USBD_URB_STATE_XFER_ASYNC;
 732              		.loc 1 3824 8 is_stmt 0 view .LVU252
 733 006e B9F1000F 		cmp	r9, #0
 734 0072 25D0     		beq	.L42
3825:rtos/uC-USB-Device/Source/usbd_ep.c ****         prev_xfer_state = p_ep->XferState;                      /* Keep prev XferState, to restore 
 735              		.loc 1 3825 9 is_stmt 1 view .LVU253
3825:rtos/uC-USB-Device/Source/usbd_ep.c ****         prev_xfer_state = p_ep->XferState;                      /* Keep prev XferState, to restore 
 736              		.loc 1 3825 25 is_stmt 0 view .LVU254
 737 0074 0223     		movs	r3, #2
 738 0076 4374     		strb	r3, [r0, #17]
3826:rtos/uC-USB-Device/Source/usbd_ep.c ****         p_ep->XferState = USBD_XFER_STATE_ASYNC;                /* Set XferState before submitting 
 739              		.loc 1 3826 9 is_stmt 1 view .LVU255
3826:rtos/uC-USB-Device/Source/usbd_ep.c ****         p_ep->XferState = USBD_XFER_STATE_ASYNC;                /* Set XferState before submitting 
 740              		.loc 1 3826 25 is_stmt 0 view .LVU256
 741 0078 96F80180 		ldrb	r8, [r6, #1]	@ zero_extendqisi2
 742              	.LVL58:
3827:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 743              		.loc 1 3827 9 is_stmt 1 view .LVU257
3827:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 744              		.loc 1 3827 25 is_stmt 0 view .LVU258
 745 007c 7370     		strb	r3, [r6, #1]
 746              	.LVL59:
3829:rtos/uC-USB-Device/Source/usbd_ep.c ****                                     p_ep,
 747              		.loc 1 3829 9 is_stmt 1 view .LVU259
 748 007e 0368     		ldr	r3, [r0]
 749 0080 0195     		str	r5, [sp, #4]
 750 0082 4268     		ldr	r2, [r0, #4]
 751 0084 0092     		str	r2, [sp]
 752 0086 0246     		mov	r2, r0
 753 0088 3146     		mov	r1, r6
 754 008a 3846     		mov	r0, r7
 755              	.LVL60:
3829:rtos/uC-USB-Device/Source/usbd_ep.c ****                                     p_ep,
 756              		.loc 1 3829 9 is_stmt 0 view .LVU260
 757 008c FFF7FEFF 		bl	USBD_EP_RxStartAsyncProcess
 758              	.LVL61:
3835:rtos/uC-USB-Device/Source/usbd_ep.c ****             USBD_URB_Queue(p_ep, p_urb);                        /* If no err, queue URB.           
 759              		.loc 1 3835 9 is_stmt 1 view .LVU261
3835:rtos/uC-USB-Device/Source/usbd_ep.c ****             USBD_URB_Queue(p_ep, p_urb);                        /* If no err, queue URB.           
 760              		.loc 1 3835 13 is_stmt 0 view .LVU262
 761 0090 2B88     		ldrh	r3, [r5]
3835:rtos/uC-USB-Device/Source/usbd_ep.c ****             USBD_URB_Queue(p_ep, p_urb);                        /* If no err, queue URB.           
 762              		.loc 1 3835 12 view .LVU263
 763 0092 6BB9     		cbnz	r3, .L43
ARM GAS  /tmp/ccuUvpuw.s 			page 98


3836:rtos/uC-USB-Device/Source/usbd_ep.c ****             USBD_DBG_STATS_EP_INC(p_drv->DevNbr, p_ep->Ix, RxAsyncSuccessNbr);
 764              		.loc 1 3836 13 is_stmt 1 view .LVU264
 765 0094 2146     		mov	r1, r4
 766 0096 3046     		mov	r0, r6
 767 0098 FFF7FEFF 		bl	USBD_URB_Queue
 768              	.LVL62:
3837:rtos/uC-USB-Device/Source/usbd_ep.c ****         } else {
 769              		.loc 1 3837 78 view .LVU265
 770              	.L44:
3843:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 771              		.loc 1 3843 9 view .LVU266
3843:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 772              		.loc 1 3843 16 is_stmt 0 view .LVU267
 773 009c 0025     		movs	r5, #0
 774              	.LVL63:
 775              	.L37:
3926:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 776              		.loc 1 3926 1 view .LVU268
 777 009e 2846     		mov	r0, r5
 778 00a0 05B0     		add	sp, sp, #20
 779              	.LCFI13:
 780              		.cfi_remember_state
 781              		.cfi_def_cfa_offset 36
 782              		@ sp needed
 783 00a2 BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 784              	.LVL64:
 785              	.L57:
 786              	.LCFI14:
 787              		.cfi_restore_state
3798:rtos/uC-USB-Device/Source/usbd_ep.c ****             return (0u);
 788              		.loc 1 3798 12 is_stmt 1 view .LVU269
3798:rtos/uC-USB-Device/Source/usbd_ep.c ****             return (0u);
 789              		.loc 1 3798 19 is_stmt 0 view .LVU270
 790 00a6 40F29713 		movw	r3, #407
 791 00aa 2B80     		strh	r3, [r5]	@ movhi
3799:rtos/uC-USB-Device/Source/usbd_ep.c ****         }
 792              		.loc 1 3799 13 is_stmt 1 view .LVU271
3799:rtos/uC-USB-Device/Source/usbd_ep.c ****         }
 793              		.loc 1 3799 20 is_stmt 0 view .LVU272
 794 00ac 0025     		movs	r5, #0
 795 00ae F6E7     		b	.L37
 796              	.LVL65:
 797              	.L43:
3839:rtos/uC-USB-Device/Source/usbd_ep.c ****             USBD_URB_Free(p_drv->DevNbr, p_ep, p_urb);          /* Free URB.                       
 798              		.loc 1 3839 13 is_stmt 1 view .LVU273
3839:rtos/uC-USB-Device/Source/usbd_ep.c ****             USBD_URB_Free(p_drv->DevNbr, p_ep, p_urb);          /* Free URB.                       
 799              		.loc 1 3839 29 is_stmt 0 view .LVU274
 800 00b0 86F80180 		strb	r8, [r6, #1]
3840:rtos/uC-USB-Device/Source/usbd_ep.c ****         }
 801              		.loc 1 3840 13 is_stmt 1 view .LVU275
 802 00b4 2246     		mov	r2, r4
 803 00b6 3146     		mov	r1, r6
 804 00b8 3878     		ldrb	r0, [r7]	@ zero_extendqisi2
 805 00ba FFF7FEFF 		bl	USBD_URB_Free
 806              	.LVL66:
 807 00be EDE7     		b	.L44
 808              	.LVL67:
ARM GAS  /tmp/ccuUvpuw.s 			page 99


 809              	.L42:
3846:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_urb->State    = USBD_URB_STATE_XFER_SYNC;
 810              		.loc 1 3846 5 view .LVU276
3846:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_urb->State    = USBD_URB_STATE_XFER_SYNC;
 811              		.loc 1 3846 21 is_stmt 0 view .LVU277
 812 00c0 0123     		movs	r3, #1
 813 00c2 7370     		strb	r3, [r6, #1]
3847:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 814              		.loc 1 3847 5 is_stmt 1 view .LVU278
3847:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 815              		.loc 1 3847 21 is_stmt 0 view .LVU279
 816 00c4 4374     		strb	r3, [r0, #17]
3849:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 817              		.loc 1 3849 5 is_stmt 1 view .LVU280
 818 00c6 0146     		mov	r1, r0
 819 00c8 3046     		mov	r0, r6
 820              	.LVL68:
3849:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 821              		.loc 1 3849 5 is_stmt 0 view .LVU281
 822 00ca FFF7FEFF 		bl	USBD_URB_Queue
 823              	.LVL69:
3851:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_urb->NextXferLen = p_urb->BufLen;
 824              		.loc 1 3851 5 is_stmt 1 view .LVU282
3851:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_urb->NextXferLen = p_urb->BufLen;
 825              		.loc 1 3851 24 is_stmt 0 view .LVU283
 826 00ce D7F80490 		ldr	r9, [r7, #4]
 827              	.LVL70:
3852:rtos/uC-USB-Device/Source/usbd_ep.c ****    *p_err              = USBD_ERR_NONE;
 828              		.loc 1 3852 5 is_stmt 1 view .LVU284
3852:rtos/uC-USB-Device/Source/usbd_ep.c ****    *p_err              = USBD_ERR_NONE;
 829              		.loc 1 3852 31 is_stmt 0 view .LVU285
 830 00d2 6368     		ldr	r3, [r4, #4]
3852:rtos/uC-USB-Device/Source/usbd_ep.c ****    *p_err              = USBD_ERR_NONE;
 831              		.loc 1 3852 24 view .LVU286
 832 00d4 E360     		str	r3, [r4, #12]
3853:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 833              		.loc 1 3853 4 is_stmt 1 view .LVU287
3853:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 834              		.loc 1 3853 24 is_stmt 0 view .LVU288
 835 00d6 0023     		movs	r3, #0
 836 00d8 2B80     		strh	r3, [r5]	@ movhi
3855:rtos/uC-USB-Device/Source/usbd_ep.c ****            ( p_urb->NextXferLen >  0u)) {
 837              		.loc 1 3855 5 is_stmt 1 view .LVU289
3855:rtos/uC-USB-Device/Source/usbd_ep.c ****            ( p_urb->NextXferLen >  0u)) {
 838              		.loc 1 3855 11 is_stmt 0 view .LVU290
 839 00da 1DE0     		b	.L45
 840              	.LVL71:
 841              	.L58:
3882:rtos/uC-USB-Device/Source/usbd_ep.c ****             USBD_DBG_STATS_EP_INC(p_drv->DevNbr, p_ep->Ix, RxSyncTimeoutErrNbr);
 842              		.loc 1 3882 13 is_stmt 1 view .LVU291
3882:rtos/uC-USB-Device/Source/usbd_ep.c ****             USBD_DBG_STATS_EP_INC(p_drv->DevNbr, p_ep->Ix, RxSyncTimeoutErrNbr);
 843              		.loc 1 3882 22 is_stmt 0 view .LVU292
 844 00dc D9F84030 		ldr	r3, [r9, #64]
3882:rtos/uC-USB-Device/Source/usbd_ep.c ****             USBD_DBG_STATS_EP_INC(p_drv->DevNbr, p_ep->Ix, RxSyncTimeoutErrNbr);
 845              		.loc 1 3882 13 view .LVU293
 846 00e0 B178     		ldrb	r1, [r6, #2]	@ zero_extendqisi2
 847 00e2 3846     		mov	r0, r7
ARM GAS  /tmp/ccuUvpuw.s 			page 100


 848 00e4 9847     		blx	r3
 849              	.LVL72:
3883:rtos/uC-USB-Device/Source/usbd_ep.c ****             break;
 850              		.loc 1 3883 80 is_stmt 1 view .LVU294
3884:rtos/uC-USB-Device/Source/usbd_ep.c ****         } else if (*p_err != USBD_ERR_NONE) {
 851              		.loc 1 3884 13 view .LVU295
 852              	.L46:
3917:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 853              		.loc 1 3917 5 view .LVU296
3917:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 854              		.loc 1 3917 14 is_stmt 0 view .LVU297
 855 00e6 A568     		ldr	r5, [r4, #8]
 856              	.LVL73:
3919:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 857              		.loc 1 3919 5 is_stmt 1 view .LVU298
 858 00e8 3046     		mov	r0, r6
 859 00ea FFF7FEFF 		bl	USBD_URB_Dequeue
 860              	.LVL74:
3921:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 861              		.loc 1 3921 5 view .LVU299
 862 00ee 2246     		mov	r2, r4
 863 00f0 3146     		mov	r1, r6
 864 00f2 3878     		ldrb	r0, [r7]	@ zero_extendqisi2
 865 00f4 FFF7FEFF 		bl	USBD_URB_Free
 866              	.LVL75:
3923:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 867              		.loc 1 3923 104 view .LVU300
3925:rtos/uC-USB-Device/Source/usbd_ep.c **** }
 868              		.loc 1 3925 5 view .LVU301
3925:rtos/uC-USB-Device/Source/usbd_ep.c **** }
 869              		.loc 1 3925 12 is_stmt 0 view .LVU302
 870 00f8 D1E7     		b	.L37
 871              	.LVL76:
 872              	.L59:
3888:rtos/uC-USB-Device/Source/usbd_ep.c ****             break;
 873              		.loc 1 3888 12 is_stmt 1 view .LVU303
3888:rtos/uC-USB-Device/Source/usbd_ep.c ****             break;
 874              		.loc 1 3888 19 is_stmt 0 view .LVU304
 875 00fa 4FF4FB73 		mov	r3, #502
 876 00fe 2B80     		strh	r3, [r5]	@ movhi
3889:rtos/uC-USB-Device/Source/usbd_ep.c ****         }
 877              		.loc 1 3889 13 is_stmt 1 view .LVU305
 878 0100 F1E7     		b	.L46
 879              	.LVL77:
 880              	.L49:
3907:rtos/uC-USB-Device/Source/usbd_ep.c ****             prev_xfer_len       = p_urb->NextXferLen;
 881              		.loc 1 3907 13 view .LVU306
3907:rtos/uC-USB-Device/Source/usbd_ep.c ****             prev_xfer_len       = p_urb->NextXferLen;
 882              		.loc 1 3907 32 is_stmt 0 view .LVU307
 883 0102 A268     		ldr	r2, [r4, #8]
 884 0104 0244     		add	r2, r2, r0
 885 0106 A260     		str	r2, [r4, #8]
3908:rtos/uC-USB-Device/Source/usbd_ep.c ****             p_urb->NextXferLen  = p_urb->BufLen - p_urb->XferLen;
 886              		.loc 1 3908 13 is_stmt 1 view .LVU308
 887              	.LVL78:
3909:rtos/uC-USB-Device/Source/usbd_ep.c ****             if ((xfer_len == 0u) ||                             /* Rx'd a ZLP.                     
 888              		.loc 1 3909 13 view .LVU309
ARM GAS  /tmp/ccuUvpuw.s 			page 101


3909:rtos/uC-USB-Device/Source/usbd_ep.c ****             if ((xfer_len == 0u) ||                             /* Rx'd a ZLP.                     
 889              		.loc 1 3909 40 is_stmt 0 view .LVU310
 890 0108 6168     		ldr	r1, [r4, #4]
3909:rtos/uC-USB-Device/Source/usbd_ep.c ****             if ((xfer_len == 0u) ||                             /* Rx'd a ZLP.                     
 891              		.loc 1 3909 49 view .LVU311
 892 010a 8A1A     		subs	r2, r1, r2
3909:rtos/uC-USB-Device/Source/usbd_ep.c ****             if ((xfer_len == 0u) ||                             /* Rx'd a ZLP.                     
 893              		.loc 1 3909 33 view .LVU312
 894 010c E260     		str	r2, [r4, #12]
3910:rtos/uC-USB-Device/Source/usbd_ep.c ****                 (xfer_len  <  prev_xfer_len)) {                 /* Rx'd a short pkt (see Note #4). 
 895              		.loc 1 3910 13 is_stmt 1 view .LVU313
3910:rtos/uC-USB-Device/Source/usbd_ep.c ****                 (xfer_len  <  prev_xfer_len)) {                 /* Rx'd a short pkt (see Note #4). 
 896              		.loc 1 3910 16 is_stmt 0 view .LVU314
 897 010e 08B1     		cbz	r0, .L51
3910:rtos/uC-USB-Device/Source/usbd_ep.c ****                 (xfer_len  <  prev_xfer_len)) {                 /* Rx'd a short pkt (see Note #4). 
 898              		.loc 1 3910 34 discriminator 1 view .LVU315
 899 0110 8342     		cmp	r3, r0
 900 0112 01D9     		bls	.L45
 901              	.L51:
3912:rtos/uC-USB-Device/Source/usbd_ep.c ****             }
 902              		.loc 1 3912 17 is_stmt 1 view .LVU316
3912:rtos/uC-USB-Device/Source/usbd_ep.c ****             }
 903              		.loc 1 3912 36 is_stmt 0 view .LVU317
 904 0114 0023     		movs	r3, #0
 905              	.LVL79:
3912:rtos/uC-USB-Device/Source/usbd_ep.c ****             }
 906              		.loc 1 3912 36 view .LVU318
 907 0116 E360     		str	r3, [r4, #12]
 908              	.LVL80:
 909              	.L45:
3855:rtos/uC-USB-Device/Source/usbd_ep.c ****            ( p_urb->NextXferLen >  0u)) {
 910              		.loc 1 3855 11 is_stmt 1 view .LVU319
3855:rtos/uC-USB-Device/Source/usbd_ep.c ****            ( p_urb->NextXferLen >  0u)) {
 911              		.loc 1 3855 13 is_stmt 0 view .LVU320
 912 0118 2B88     		ldrh	r3, [r5]
3855:rtos/uC-USB-Device/Source/usbd_ep.c ****            ( p_urb->NextXferLen >  0u)) {
 913              		.loc 1 3855 11 view .LVU321
 914 011a 002B     		cmp	r3, #0
 915 011c E3D1     		bne	.L46
3856:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 916              		.loc 1 3856 19 discriminator 1 view .LVU322
 917 011e E368     		ldr	r3, [r4, #12]
3855:rtos/uC-USB-Device/Source/usbd_ep.c ****            ( p_urb->NextXferLen >  0u)) {
 918              		.loc 1 3855 51 discriminator 1 view .LVU323
 919 0120 002B     		cmp	r3, #0
 920 0122 E0D0     		beq	.L46
3858:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 921              		.loc 1 3858 9 is_stmt 1 view .LVU324
3858:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 922              		.loc 1 3858 27 is_stmt 0 view .LVU325
 923 0124 2168     		ldr	r1, [r4]
3858:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 924              		.loc 1 3858 41 view .LVU326
 925 0126 A268     		ldr	r2, [r4, #8]
3858:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 926              		.loc 1 3858 19 view .LVU327
 927 0128 01EB0208 		add	r8, r1, r2
ARM GAS  /tmp/ccuUvpuw.s 			page 102


 928              	.LVL81:
3860:rtos/uC-USB-Device/Source/usbd_ep.c ****         p_urb->NextXferLen = p_drv_api->EP_RxStart(p_drv,
 929              		.loc 1 3860 70 is_stmt 1 view .LVU328
3861:rtos/uC-USB-Device/Source/usbd_ep.c ****                                                    p_ep->Addr,
 930              		.loc 1 3861 9 view .LVU329
3861:rtos/uC-USB-Device/Source/usbd_ep.c ****                                                    p_ep->Addr,
 931              		.loc 1 3861 39 is_stmt 0 view .LVU330
 932 012c D9F828B0 		ldr	fp, [r9, #40]
3861:rtos/uC-USB-Device/Source/usbd_ep.c ****                                                    p_ep->Addr,
 933              		.loc 1 3861 30 view .LVU331
 934 0130 0095     		str	r5, [sp]
 935 0132 4246     		mov	r2, r8
 936 0134 B178     		ldrb	r1, [r6, #2]	@ zero_extendqisi2
 937 0136 3846     		mov	r0, r7
 938 0138 D847     		blx	fp
 939              	.LVL82:
3861:rtos/uC-USB-Device/Source/usbd_ep.c ****                                                    p_ep->Addr,
 940              		.loc 1 3861 28 view .LVU332
 941 013a E060     		str	r0, [r4, #12]
3866:rtos/uC-USB-Device/Source/usbd_ep.c ****             break;
 942              		.loc 1 3866 9 is_stmt 1 view .LVU333
3866:rtos/uC-USB-Device/Source/usbd_ep.c ****             break;
 943              		.loc 1 3866 13 is_stmt 0 view .LVU334
 944 013c 2B88     		ldrh	r3, [r5]
3866:rtos/uC-USB-Device/Source/usbd_ep.c ****             break;
 945              		.loc 1 3866 12 view .LVU335
 946 013e 002B     		cmp	r3, #0
 947 0140 D1D1     		bne	.L46
3869:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 948              		.loc 1 3869 77 is_stmt 1 view .LVU336
3871:rtos/uC-USB-Device/Source/usbd_ep.c ****                                p_ep->Ix);
 949              		.loc 1 3871 9 view .LVU337
 950 0142 317A     		ldrb	r1, [r6, #8]	@ zero_extendqisi2
 951 0144 3878     		ldrb	r0, [r7]	@ zero_extendqisi2
 952 0146 FFF7FEFF 		bl	USBD_OS_EP_LockRelease
 953              	.LVL83:
3874:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 954              		.loc 1 3874 9 view .LVU338
 955 014a 2B46     		mov	r3, r5
 956 014c 5246     		mov	r2, r10
 957 014e 317A     		ldrb	r1, [r6, #8]	@ zero_extendqisi2
 958 0150 3878     		ldrb	r0, [r7]	@ zero_extendqisi2
 959 0152 FFF7FEFF 		bl	USBD_OS_EP_SignalPend
 960              	.LVL84:
3876:rtos/uC-USB-Device/Source/usbd_ep.c ****                                p_ep->Ix,
 961              		.loc 1 3876 9 view .LVU339
 962 0156 0DF10E03 		add	r3, sp, #14
 963 015a 0022     		movs	r2, #0
 964 015c 317A     		ldrb	r1, [r6, #8]	@ zero_extendqisi2
 965 015e 3878     		ldrb	r0, [r7]	@ zero_extendqisi2
 966 0160 FFF7FEFF 		bl	USBD_OS_EP_LockAcquire
 967              	.LVL85:
3881:rtos/uC-USB-Device/Source/usbd_ep.c ****             p_drv_api->EP_Abort(p_drv, p_ep->Addr);
 968              		.loc 1 3881 9 view .LVU340
3881:rtos/uC-USB-Device/Source/usbd_ep.c ****             p_drv_api->EP_Abort(p_drv, p_ep->Addr);
 969              		.loc 1 3881 13 is_stmt 0 view .LVU341
 970 0164 2B88     		ldrh	r3, [r5]
ARM GAS  /tmp/ccuUvpuw.s 			page 103


3881:rtos/uC-USB-Device/Source/usbd_ep.c ****             p_drv_api->EP_Abort(p_drv, p_ep->Addr);
 971              		.loc 1 3881 12 view .LVU342
 972 0166 40F2F712 		movw	r2, #503
 973 016a 9342     		cmp	r3, r2
 974 016c B6D0     		beq	.L58
3885:rtos/uC-USB-Device/Source/usbd_ep.c ****             break;
 975              		.loc 1 3885 16 is_stmt 1 view .LVU343
3885:rtos/uC-USB-Device/Source/usbd_ep.c ****             break;
 976              		.loc 1 3885 19 is_stmt 0 view .LVU344
 977 016e 002B     		cmp	r3, #0
 978 0170 B9D1     		bne	.L46
3887:rtos/uC-USB-Device/Source/usbd_ep.c ****            *p_err = USBD_ERR_OS_FAIL;
 979              		.loc 1 3887 16 is_stmt 1 view .LVU345
3887:rtos/uC-USB-Device/Source/usbd_ep.c ****            *p_err = USBD_ERR_OS_FAIL;
 980              		.loc 1 3887 30 is_stmt 0 view .LVU346
 981 0172 BDF80E30 		ldrh	r3, [sp, #14]
3887:rtos/uC-USB-Device/Source/usbd_ep.c ****            *p_err = USBD_ERR_OS_FAIL;
 982              		.loc 1 3887 19 view .LVU347
 983 0176 002B     		cmp	r3, #0
 984 0178 BFD1     		bne	.L59
3892:rtos/uC-USB-Device/Source/usbd_ep.c ****         xfer_len = p_drv_api->EP_Rx(p_drv,
 985              		.loc 1 3892 65 is_stmt 1 view .LVU348
3893:rtos/uC-USB-Device/Source/usbd_ep.c ****                                     p_ep->Addr,
 986              		.loc 1 3893 9 view .LVU349
3893:rtos/uC-USB-Device/Source/usbd_ep.c ****                                     p_ep->Addr,
 987              		.loc 1 3893 29 is_stmt 0 view .LVU350
 988 017a D9F82CB0 		ldr	fp, [r9, #44]
3893:rtos/uC-USB-Device/Source/usbd_ep.c ****                                     p_ep->Addr,
 989              		.loc 1 3893 20 view .LVU351
 990 017e E368     		ldr	r3, [r4, #12]
 991 0180 0095     		str	r5, [sp]
 992 0182 4246     		mov	r2, r8
 993 0184 B178     		ldrb	r1, [r6, #2]	@ zero_extendqisi2
 994 0186 3846     		mov	r0, r7
 995 0188 D847     		blx	fp
 996              	.LVL86:
3898:rtos/uC-USB-Device/Source/usbd_ep.c ****             break;
 997              		.loc 1 3898 9 is_stmt 1 view .LVU352
3898:rtos/uC-USB-Device/Source/usbd_ep.c ****             break;
 998              		.loc 1 3898 13 is_stmt 0 view .LVU353
 999 018a 2B88     		ldrh	r3, [r5]
3898:rtos/uC-USB-Device/Source/usbd_ep.c ****             break;
 1000              		.loc 1 3898 12 view .LVU354
 1001 018c 002B     		cmp	r3, #0
 1002 018e AAD1     		bne	.L46
3901:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 1003              		.loc 1 3901 72 is_stmt 1 view .LVU355
3903:rtos/uC-USB-Device/Source/usbd_ep.c ****             p_urb->XferLen += p_urb->NextXferLen;
 1004              		.loc 1 3903 9 view .LVU356
3903:rtos/uC-USB-Device/Source/usbd_ep.c ****             p_urb->XferLen += p_urb->NextXferLen;
 1005              		.loc 1 3903 29 is_stmt 0 view .LVU357
 1006 0190 E368     		ldr	r3, [r4, #12]
3903:rtos/uC-USB-Device/Source/usbd_ep.c ****             p_urb->XferLen += p_urb->NextXferLen;
 1007              		.loc 1 3903 12 view .LVU358
 1008 0192 8342     		cmp	r3, r0
 1009 0194 B5D2     		bcs	.L49
3904:rtos/uC-USB-Device/Source/usbd_ep.c ****            *p_err = USBD_ERR_RX;
ARM GAS  /tmp/ccuUvpuw.s 			page 104


 1010              		.loc 1 3904 13 is_stmt 1 view .LVU359
3904:rtos/uC-USB-Device/Source/usbd_ep.c ****            *p_err = USBD_ERR_RX;
 1011              		.loc 1 3904 28 is_stmt 0 view .LVU360
 1012 0196 A268     		ldr	r2, [r4, #8]
 1013 0198 1344     		add	r3, r3, r2
 1014 019a A360     		str	r3, [r4, #8]
3905:rtos/uC-USB-Device/Source/usbd_ep.c ****         } else {
 1015              		.loc 1 3905 12 is_stmt 1 view .LVU361
3905:rtos/uC-USB-Device/Source/usbd_ep.c ****         } else {
 1016              		.loc 1 3905 19 is_stmt 0 view .LVU362
 1017 019c 0223     		movs	r3, #2
 1018 019e 2B80     		strh	r3, [r5]	@ movhi
 1019 01a0 BAE7     		b	.L45
 1020              	.LVL87:
 1021              	.L53:
3812:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 1022              		.loc 1 3812 16 view .LVU363
 1023 01a2 0025     		movs	r5, #0
 1024 01a4 7BE7     		b	.L37
 1025              		.cfi_endproc
 1026              	.LFE31:
 1028              		.section	.text.USBD_EP_Tx,"ax",%progbits
 1029              		.align	1
 1030              		.syntax unified
 1031              		.thumb
 1032              		.thumb_func
 1033              		.fpu fpv4-sp-d16
 1035              	USBD_EP_Tx:
 1036              	.LVL88:
 1037              	.LFB32:
4006:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_URB         *p_urb;
 1038              		.loc 1 4006 1 is_stmt 1 view -0
 1039              		.cfi_startproc
 1040              		@ args = 20, pretend = 0, frame = 24
 1041              		@ frame_needed = 0, uses_anonymous_args = 0
4006:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_URB         *p_urb;
 1042              		.loc 1 4006 1 is_stmt 0 view .LVU365
 1043 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 1044              	.LCFI15:
 1045              		.cfi_def_cfa_offset 36
 1046              		.cfi_offset 4, -36
 1047              		.cfi_offset 5, -32
 1048              		.cfi_offset 6, -28
 1049              		.cfi_offset 7, -24
 1050              		.cfi_offset 8, -20
 1051              		.cfi_offset 9, -16
 1052              		.cfi_offset 10, -12
 1053              		.cfi_offset 11, -8
 1054              		.cfi_offset 14, -4
 1055 0004 89B0     		sub	sp, sp, #36
 1056              	.LCFI16:
 1057              		.cfi_def_cfa_offset 72
 1058 0006 0746     		mov	r7, r0
 1059 0008 0E46     		mov	r6, r1
 1060 000a 9046     		mov	r8, r2
 1061 000c DDF84890 		ldr	r9, [sp, #72]
 1062 0010 BDF85020 		ldrh	r2, [sp, #80]
ARM GAS  /tmp/ccuUvpuw.s 			page 105


 1063              	.LVL89:
4006:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_URB         *p_urb;
 1064              		.loc 1 4006 1 view .LVU366
 1065 0014 0492     		str	r2, [sp, #16]
 1066 0016 9DF85420 		ldrb	r2, [sp, #84]	@ zero_extendqisi2
 1067 001a 0592     		str	r2, [sp, #20]
 1068 001c 169D     		ldr	r5, [sp, #88]
4007:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DRV_API     *p_drv_api;
 1069              		.loc 1 4007 5 is_stmt 1 view .LVU367
4008:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_XFER_STATE   prev_xfer_state;
 1070              		.loc 1 4008 5 view .LVU368
4009:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_INT08U       *p_buf_cur;
 1071              		.loc 1 4009 5 view .LVU369
4010:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_INT32U        xfer_rem;
 1072              		.loc 1 4010 5 view .LVU370
4011:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_INT32U        xfer_tot;
 1073              		.loc 1 4011 5 view .LVU371
4012:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_ERR          local_err;
 1074              		.loc 1 4012 5 view .LVU372
4013:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_BOOLEAN       zlp_flag = DEF_NO;
 1075              		.loc 1 4013 5 view .LVU373
4014:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 1076              		.loc 1 4014 5 view .LVU374
 1077              	.LVL90:
4017:rtos/uC-USB-Device/Source/usbd_ep.c ****         (p_buf   == (void *)0)) {
 1078              		.loc 1 4017 5 view .LVU375
4017:rtos/uC-USB-Device/Source/usbd_ep.c ****         (p_buf   == (void *)0)) {
 1079              		.loc 1 4017 8 is_stmt 0 view .LVU376
 1080 001e 9A46     		mov	r10, r3
 1081 0020 13B1     		cbz	r3, .L61
4017:rtos/uC-USB-Device/Source/usbd_ep.c ****         (p_buf   == (void *)0)) {
 1082              		.loc 1 4017 33 discriminator 1 view .LVU377
 1083 0022 B8F1000F 		cmp	r8, #0
 1084 0026 0CD0     		beq	.L85
 1085              	.L61:
4023:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_DBG_STATS_EP_INC(p_drv->DevNbr, p_ep->Ix, TxSyncExecNbr);
 1086              		.loc 1 4023 5 is_stmt 1 view .LVU378
4023:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_DBG_STATS_EP_INC(p_drv->DevNbr, p_ep->Ix, TxSyncExecNbr);
 1087              		.loc 1 4023 8 is_stmt 0 view .LVU379
 1088 0028 B9F1000F 		cmp	r9, #0
 1089 002c 0CD0     		beq	.L86
4030:rtos/uC-USB-Device/Source/usbd_ep.c ****         if ((p_ep->XferState != USBD_XFER_STATE_NONE) &&
 1090              		.loc 1 4030 71 is_stmt 1 view .LVU380
4031:rtos/uC-USB-Device/Source/usbd_ep.c ****             (p_ep->XferState != USBD_XFER_STATE_ASYNC)) {
 1091              		.loc 1 4031 9 view .LVU381
4031:rtos/uC-USB-Device/Source/usbd_ep.c ****             (p_ep->XferState != USBD_XFER_STATE_ASYNC)) {
 1092              		.loc 1 4031 18 is_stmt 0 view .LVU382
 1093 002e 7378     		ldrb	r3, [r6, #1]	@ zero_extendqisi2
 1094              	.LVL91:
4031:rtos/uC-USB-Device/Source/usbd_ep.c ****             (p_ep->XferState != USBD_XFER_STATE_ASYNC)) {
 1095              		.loc 1 4031 12 view .LVU383
 1096 0030 6BB1     		cbz	r3, .L64
4031:rtos/uC-USB-Device/Source/usbd_ep.c ****             (p_ep->XferState != USBD_XFER_STATE_ASYNC)) {
 1097              		.loc 1 4031 55 discriminator 1 view .LVU384
 1098 0032 022B     		cmp	r3, #2
 1099 0034 0BD0     		beq	.L64
4033:rtos/uC-USB-Device/Source/usbd_ep.c ****             return (0u);
ARM GAS  /tmp/ccuUvpuw.s 			page 106


 1100              		.loc 1 4033 12 is_stmt 1 view .LVU385
4033:rtos/uC-USB-Device/Source/usbd_ep.c ****             return (0u);
 1101              		.loc 1 4033 19 is_stmt 0 view .LVU386
 1102 0036 40F29713 		movw	r3, #407
 1103 003a 2B80     		strh	r3, [r5]	@ movhi
4034:rtos/uC-USB-Device/Source/usbd_ep.c ****         }
 1104              		.loc 1 4034 13 is_stmt 1 view .LVU387
4034:rtos/uC-USB-Device/Source/usbd_ep.c ****         }
 1105              		.loc 1 4034 20 is_stmt 0 view .LVU388
 1106 003c 4FF00008 		mov	r8, #0
 1107              	.LVL92:
4034:rtos/uC-USB-Device/Source/usbd_ep.c ****         }
 1108              		.loc 1 4034 20 view .LVU389
 1109 0040 3CE0     		b	.L60
 1110              	.LVL93:
 1111              	.L85:
4019:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (0u);
 1112              		.loc 1 4019 8 is_stmt 1 view .LVU390
4019:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (0u);
 1113              		.loc 1 4019 15 is_stmt 0 view .LVU391
 1114 0042 0523     		movs	r3, #5
 1115              	.LVL94:
4019:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (0u);
 1116              		.loc 1 4019 15 view .LVU392
 1117 0044 2B80     		strh	r3, [r5]	@ movhi
4020:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 1118              		.loc 1 4020 9 is_stmt 1 view .LVU393
4020:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 1119              		.loc 1 4020 16 is_stmt 0 view .LVU394
 1120 0046 39E0     		b	.L60
 1121              	.LVL95:
 1122              	.L86:
4024:rtos/uC-USB-Device/Source/usbd_ep.c ****         if (p_ep->XferState != USBD_XFER_STATE_NONE) {
 1123              		.loc 1 4024 70 is_stmt 1 view .LVU395
4025:rtos/uC-USB-Device/Source/usbd_ep.c ****            *p_err = USBD_ERR_EP_IO_PENDING;
 1124              		.loc 1 4025 9 view .LVU396
4025:rtos/uC-USB-Device/Source/usbd_ep.c ****            *p_err = USBD_ERR_EP_IO_PENDING;
 1125              		.loc 1 4025 17 is_stmt 0 view .LVU397
 1126 0048 7378     		ldrb	r3, [r6, #1]	@ zero_extendqisi2
 1127              	.LVL96:
4025:rtos/uC-USB-Device/Source/usbd_ep.c ****            *p_err = USBD_ERR_EP_IO_PENDING;
 1128              		.loc 1 4025 12 view .LVU398
 1129 004a 002B     		cmp	r3, #0
 1130 004c 3AD1     		bne	.L87
 1131              	.L64:
4038:rtos/uC-USB-Device/Source/usbd_ep.c ****         zlp_flag = DEF_YES;
 1132              		.loc 1 4038 5 is_stmt 1 view .LVU399
4038:rtos/uC-USB-Device/Source/usbd_ep.c ****         zlp_flag = DEF_YES;
 1133              		.loc 1 4038 8 is_stmt 0 view .LVU400
 1134 004e BAF1000F 		cmp	r10, #0
 1135 0052 3DD0     		beq	.L77
4014:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 1136              		.loc 1 4014 23 view .LVU401
 1137 0054 0023     		movs	r3, #0
 1138 0056 0393     		str	r3, [sp, #12]
 1139              	.L65:
 1140              	.LVL97:
ARM GAS  /tmp/ccuUvpuw.s 			page 107


4042:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (*p_err != USBD_ERR_NONE) {
 1141              		.loc 1 4042 5 is_stmt 1 view .LVU402
4042:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (*p_err != USBD_ERR_NONE) {
 1142              		.loc 1 4042 13 is_stmt 0 view .LVU403
 1143 0058 2A46     		mov	r2, r5
 1144 005a 3146     		mov	r1, r6
 1145              	.LVL98:
4042:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (*p_err != USBD_ERR_NONE) {
 1146              		.loc 1 4042 13 view .LVU404
 1147 005c 3878     		ldrb	r0, [r7]	@ zero_extendqisi2
 1148              	.LVL99:
4042:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (*p_err != USBD_ERR_NONE) {
 1149              		.loc 1 4042 13 view .LVU405
 1150 005e FFF7FEFF 		bl	USBD_URB_Get
 1151              	.LVL100:
 1152 0062 0446     		mov	r4, r0
 1153              	.LVL101:
4043:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (0u);
 1154              		.loc 1 4043 5 is_stmt 1 view .LVU406
4043:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (0u);
 1155              		.loc 1 4043 9 is_stmt 0 view .LVU407
 1156 0064 2B88     		ldrh	r3, [r5]
4043:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (0u);
 1157              		.loc 1 4043 8 view .LVU408
 1158 0066 002B     		cmp	r3, #0
 1159 0068 40F0E180 		bne	.L78
4047:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_urb->BufLen       =  buf_len;
 1160              		.loc 1 4047 5 is_stmt 1 view .LVU409
4047:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_urb->BufLen       =  buf_len;
 1161              		.loc 1 4047 25 is_stmt 0 view .LVU410
 1162 006c C0F80080 		str	r8, [r0]
4048:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_urb->XferLen      =  0u;
 1163              		.loc 1 4048 5 is_stmt 1 view .LVU411
4048:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_urb->XferLen      =  0u;
 1164              		.loc 1 4048 25 is_stmt 0 view .LVU412
 1165 0070 C0F804A0 		str	r10, [r0, #4]
4049:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_urb->NextXferLen  =  0u;
 1166              		.loc 1 4049 5 is_stmt 1 view .LVU413
4049:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_urb->NextXferLen  =  0u;
 1167              		.loc 1 4049 25 is_stmt 0 view .LVU414
 1168 0074 8360     		str	r3, [r0, #8]
4050:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_urb->AsyncFnct    =  async_fnct;
 1169              		.loc 1 4050 5 is_stmt 1 view .LVU415
4050:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_urb->AsyncFnct    =  async_fnct;
 1170              		.loc 1 4050 25 is_stmt 0 view .LVU416
 1171 0076 C360     		str	r3, [r0, #12]
4051:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_urb->AsyncFnctArg =  p_async_arg;
 1172              		.loc 1 4051 5 is_stmt 1 view .LVU417
4051:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_urb->AsyncFnctArg =  p_async_arg;
 1173              		.loc 1 4051 25 is_stmt 0 view .LVU418
 1174 0078 C0F81490 		str	r9, [r0, #20]
4052:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_urb->Err          =  USBD_ERR_NONE;
 1175              		.loc 1 4052 5 is_stmt 1 view .LVU419
4052:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_urb->Err          =  USBD_ERR_NONE;
 1176              		.loc 1 4052 25 is_stmt 0 view .LVU420
 1177 007c 139A     		ldr	r2, [sp, #76]
 1178 007e 8261     		str	r2, [r0, #24]
ARM GAS  /tmp/ccuUvpuw.s 			page 108


4053:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_urb->NextPtr      = (USBD_URB *)0;
 1179              		.loc 1 4053 5 is_stmt 1 view .LVU421
4053:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_urb->NextPtr      = (USBD_URB *)0;
 1180              		.loc 1 4053 25 is_stmt 0 view .LVU422
 1181 0080 8383     		strh	r3, [r0, #28]	@ movhi
4054:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (end == DEF_YES) {
 1182              		.loc 1 4054 5 is_stmt 1 view .LVU423
4054:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (end == DEF_YES) {
 1183              		.loc 1 4054 25 is_stmt 0 view .LVU424
 1184 0082 0362     		str	r3, [r0, #32]
4055:rtos/uC-USB-Device/Source/usbd_ep.c ****         DEF_BIT_SET(p_urb->Flags, USBD_URB_FLAG_XFER_END);
 1185              		.loc 1 4055 5 is_stmt 1 view .LVU425
4055:rtos/uC-USB-Device/Source/usbd_ep.c ****         DEF_BIT_SET(p_urb->Flags, USBD_URB_FLAG_XFER_END);
 1186              		.loc 1 4055 8 is_stmt 0 view .LVU426
 1187 0084 059B     		ldr	r3, [sp, #20]
 1188 0086 012B     		cmp	r3, #1
 1189 0088 25D0     		beq	.L88
 1190              	.L66:
4059:rtos/uC-USB-Device/Source/usbd_ep.c ****         p_urb->State    = USBD_URB_STATE_XFER_ASYNC;
 1191              		.loc 1 4059 5 is_stmt 1 view .LVU427
4059:rtos/uC-USB-Device/Source/usbd_ep.c ****         p_urb->State    = USBD_URB_STATE_XFER_ASYNC;
 1192              		.loc 1 4059 8 is_stmt 0 view .LVU428
 1193 008a B9F1000F 		cmp	r9, #0
 1194 008e 2FD0     		beq	.L67
4060:rtos/uC-USB-Device/Source/usbd_ep.c ****         prev_xfer_state = p_ep->XferState;                      /* Keep prev XferState, to restore 
 1195              		.loc 1 4060 9 is_stmt 1 view .LVU429
4060:rtos/uC-USB-Device/Source/usbd_ep.c ****         prev_xfer_state = p_ep->XferState;                      /* Keep prev XferState, to restore 
 1196              		.loc 1 4060 25 is_stmt 0 view .LVU430
 1197 0090 0223     		movs	r3, #2
 1198 0092 6374     		strb	r3, [r4, #17]
4061:rtos/uC-USB-Device/Source/usbd_ep.c ****         p_ep->XferState = USBD_XFER_STATE_ASYNC;                /* Set XferState before submitting 
 1199              		.loc 1 4061 9 is_stmt 1 view .LVU431
4061:rtos/uC-USB-Device/Source/usbd_ep.c ****         p_ep->XferState = USBD_XFER_STATE_ASYNC;                /* Set XferState before submitting 
 1200              		.loc 1 4061 25 is_stmt 0 view .LVU432
 1201 0094 96F80180 		ldrb	r8, [r6, #1]	@ zero_extendqisi2
 1202              	.LVL102:
4062:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 1203              		.loc 1 4062 9 is_stmt 1 view .LVU433
4062:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 1204              		.loc 1 4062 25 is_stmt 0 view .LVU434
 1205 0098 7370     		strb	r3, [r6, #1]
 1206              	.LVL103:
4064:rtos/uC-USB-Device/Source/usbd_ep.c ****                                p_ep,
 1207              		.loc 1 4064 9 is_stmt 1 view .LVU435
 1208 009a 2368     		ldr	r3, [r4]
 1209 009c 0195     		str	r5, [sp, #4]
 1210 009e 6268     		ldr	r2, [r4, #4]
 1211 00a0 0092     		str	r2, [sp]
 1212 00a2 2246     		mov	r2, r4
 1213 00a4 3146     		mov	r1, r6
 1214 00a6 3846     		mov	r0, r7
 1215              	.LVL104:
4064:rtos/uC-USB-Device/Source/usbd_ep.c ****                                p_ep,
 1216              		.loc 1 4064 9 is_stmt 0 view .LVU436
 1217 00a8 FFF7FEFF 		bl	USBD_EP_TxAsyncProcess
 1218              	.LVL105:
4070:rtos/uC-USB-Device/Source/usbd_ep.c ****             USBD_URB_Queue(p_ep, p_urb);                        /* If no err, queue URB.           
ARM GAS  /tmp/ccuUvpuw.s 			page 109


 1219              		.loc 1 4070 9 is_stmt 1 view .LVU437
4070:rtos/uC-USB-Device/Source/usbd_ep.c ****             USBD_URB_Queue(p_ep, p_urb);                        /* If no err, queue URB.           
 1220              		.loc 1 4070 13 is_stmt 0 view .LVU438
 1221 00ac 2B88     		ldrh	r3, [r5]
4070:rtos/uC-USB-Device/Source/usbd_ep.c ****             USBD_URB_Queue(p_ep, p_urb);                        /* If no err, queue URB.           
 1222              		.loc 1 4070 12 view .LVU439
 1223 00ae BBB9     		cbnz	r3, .L68
4071:rtos/uC-USB-Device/Source/usbd_ep.c ****             USBD_DBG_STATS_EP_INC(p_drv->DevNbr, p_ep->Ix, TxAsyncSuccessNbr);
 1224              		.loc 1 4071 13 is_stmt 1 view .LVU440
 1225 00b0 2146     		mov	r1, r4
 1226 00b2 3046     		mov	r0, r6
 1227 00b4 FFF7FEFF 		bl	USBD_URB_Queue
 1228              	.LVL106:
4072:rtos/uC-USB-Device/Source/usbd_ep.c ****         } else {
 1229              		.loc 1 4072 78 view .LVU441
 1230              	.L69:
4078:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 1231              		.loc 1 4078 9 view .LVU442
4078:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 1232              		.loc 1 4078 16 is_stmt 0 view .LVU443
 1233 00b8 4FF00008 		mov	r8, #0
 1234              	.LVL107:
 1235              	.L60:
4185:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 1236              		.loc 1 4185 1 view .LVU444
 1237 00bc 4046     		mov	r0, r8
 1238 00be 09B0     		add	sp, sp, #36
 1239              	.LCFI17:
 1240              		.cfi_remember_state
 1241              		.cfi_def_cfa_offset 36
 1242              		@ sp needed
 1243 00c0 BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 1244              	.LVL108:
 1245              	.L87:
 1246              	.LCFI18:
 1247              		.cfi_restore_state
4026:rtos/uC-USB-Device/Source/usbd_ep.c ****             return (0u);
 1248              		.loc 1 4026 12 is_stmt 1 view .LVU445
4026:rtos/uC-USB-Device/Source/usbd_ep.c ****             return (0u);
 1249              		.loc 1 4026 19 is_stmt 0 view .LVU446
 1250 00c4 40F29713 		movw	r3, #407
 1251 00c8 2B80     		strh	r3, [r5]	@ movhi
4027:rtos/uC-USB-Device/Source/usbd_ep.c ****         }
 1252              		.loc 1 4027 13 is_stmt 1 view .LVU447
4027:rtos/uC-USB-Device/Source/usbd_ep.c ****         }
 1253              		.loc 1 4027 20 is_stmt 0 view .LVU448
 1254 00ca 4FF00008 		mov	r8, #0
 1255              	.LVL109:
4027:rtos/uC-USB-Device/Source/usbd_ep.c ****         }
 1256              		.loc 1 4027 20 view .LVU449
 1257 00ce F5E7     		b	.L60
 1258              	.LVL110:
 1259              	.L77:
4039:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 1260              		.loc 1 4039 18 view .LVU450
 1261 00d0 0123     		movs	r3, #1
 1262 00d2 0393     		str	r3, [sp, #12]
ARM GAS  /tmp/ccuUvpuw.s 			page 110


 1263 00d4 C0E7     		b	.L65
 1264              	.LVL111:
 1265              	.L88:
4056:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 1266              		.loc 1 4056 9 is_stmt 1 view .LVU451
 1267 00d6 037C     		ldrb	r3, [r0, #16]	@ zero_extendqisi2
 1268 00d8 43F00103 		orr	r3, r3, #1
 1269 00dc 0374     		strb	r3, [r0, #16]
 1270 00de D4E7     		b	.L66
 1271              	.LVL112:
 1272              	.L68:
4074:rtos/uC-USB-Device/Source/usbd_ep.c ****             USBD_URB_Free(p_drv->DevNbr, p_ep, p_urb);          /* Free URB.                       
 1273              		.loc 1 4074 13 view .LVU452
4074:rtos/uC-USB-Device/Source/usbd_ep.c ****             USBD_URB_Free(p_drv->DevNbr, p_ep, p_urb);          /* Free URB.                       
 1274              		.loc 1 4074 29 is_stmt 0 view .LVU453
 1275 00e0 86F80180 		strb	r8, [r6, #1]
4075:rtos/uC-USB-Device/Source/usbd_ep.c ****         }
 1276              		.loc 1 4075 13 is_stmt 1 view .LVU454
 1277 00e4 2246     		mov	r2, r4
 1278 00e6 3146     		mov	r1, r6
 1279 00e8 3878     		ldrb	r0, [r7]	@ zero_extendqisi2
 1280 00ea FFF7FEFF 		bl	USBD_URB_Free
 1281              	.LVL113:
 1282 00ee E3E7     		b	.L69
 1283              	.LVL114:
 1284              	.L67:
4081:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_urb->State    = USBD_URB_STATE_XFER_SYNC;
 1285              		.loc 1 4081 5 view .LVU455
4081:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_urb->State    = USBD_URB_STATE_XFER_SYNC;
 1286              		.loc 1 4081 21 is_stmt 0 view .LVU456
 1287 00f0 0123     		movs	r3, #1
 1288 00f2 7370     		strb	r3, [r6, #1]
4082:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 1289              		.loc 1 4082 5 is_stmt 1 view .LVU457
4082:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 1290              		.loc 1 4082 21 is_stmt 0 view .LVU458
 1291 00f4 6374     		strb	r3, [r4, #17]
4084:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 1292              		.loc 1 4084 5 is_stmt 1 view .LVU459
 1293 00f6 2146     		mov	r1, r4
 1294 00f8 3046     		mov	r0, r6
 1295              	.LVL115:
4084:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 1296              		.loc 1 4084 5 is_stmt 0 view .LVU460
 1297 00fa FFF7FEFF 		bl	USBD_URB_Queue
 1298              	.LVL116:
4086:rtos/uC-USB-Device/Source/usbd_ep.c ****     xfer_rem  = p_urb->BufLen;
 1299              		.loc 1 4086 5 is_stmt 1 view .LVU461
4086:rtos/uC-USB-Device/Source/usbd_ep.c ****     xfer_rem  = p_urb->BufLen;
 1300              		.loc 1 4086 15 is_stmt 0 view .LVU462
 1301 00fe D7F804A0 		ldr	r10, [r7, #4]
 1302              	.LVL117:
4087:rtos/uC-USB-Device/Source/usbd_ep.c ****    *p_err     = USBD_ERR_NONE;
 1303              		.loc 1 4087 5 is_stmt 1 view .LVU463
4087:rtos/uC-USB-Device/Source/usbd_ep.c ****    *p_err     = USBD_ERR_NONE;
 1304              		.loc 1 4087 15 is_stmt 0 view .LVU464
 1305 0102 D4F80490 		ldr	r9, [r4, #4]
ARM GAS  /tmp/ccuUvpuw.s 			page 111


 1306              	.LVL118:
4088:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 1307              		.loc 1 4088 4 is_stmt 1 view .LVU465
4088:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 1308              		.loc 1 4088 15 is_stmt 0 view .LVU466
 1309 0106 0023     		movs	r3, #0
 1310 0108 2B80     		strh	r3, [r5]	@ movhi
4090:rtos/uC-USB-Device/Source/usbd_ep.c ****            ((xfer_rem  >  0u)            ||
 1311              		.loc 1 4090 5 is_stmt 1 view .LVU467
4090:rtos/uC-USB-Device/Source/usbd_ep.c ****            ((xfer_rem  >  0u)            ||
 1312              		.loc 1 4090 11 is_stmt 0 view .LVU468
 1313 010a 3DE0     		b	.L70
 1314              	.LVL119:
 1315              	.L75:
4094:rtos/uC-USB-Device/Source/usbd_ep.c ****             p_buf_cur = &p_urb->BufPtr[p_urb->XferLen];
 1316              		.loc 1 4094 9 is_stmt 1 view .LVU469
4094:rtos/uC-USB-Device/Source/usbd_ep.c ****             p_buf_cur = &p_urb->BufPtr[p_urb->XferLen];
 1317              		.loc 1 4094 12 is_stmt 0 view .LVU470
 1318 010c 039B     		ldr	r3, [sp, #12]
 1319 010e 002B     		cmp	r3, #0
 1320 0110 43D1     		bne	.L79
4095:rtos/uC-USB-Device/Source/usbd_ep.c ****         } else {
 1321              		.loc 1 4095 13 is_stmt 1 view .LVU471
4095:rtos/uC-USB-Device/Source/usbd_ep.c ****         } else {
 1322              		.loc 1 4095 31 is_stmt 0 view .LVU472
 1323 0112 2268     		ldr	r2, [r4]
4095:rtos/uC-USB-Device/Source/usbd_ep.c ****         } else {
 1324              		.loc 1 4095 45 view .LVU473
 1325 0114 A368     		ldr	r3, [r4, #8]
4095:rtos/uC-USB-Device/Source/usbd_ep.c ****         } else {
 1326              		.loc 1 4095 23 view .LVU474
 1327 0116 02EB0308 		add	r8, r2, r3
 1328              	.LVL120:
 1329              	.L71:
4101:rtos/uC-USB-Device/Source/usbd_ep.c ****         p_urb->NextXferLen = p_drv_api->EP_Tx(p_drv,
 1330              		.loc 1 4101 65 is_stmt 1 view .LVU475
4102:rtos/uC-USB-Device/Source/usbd_ep.c ****                                               p_ep->Addr,
 1331              		.loc 1 4102 9 view .LVU476
4102:rtos/uC-USB-Device/Source/usbd_ep.c ****                                               p_ep->Addr,
 1332              		.loc 1 4102 39 is_stmt 0 view .LVU477
 1333 011a DAF834B0 		ldr	fp, [r10, #52]
4102:rtos/uC-USB-Device/Source/usbd_ep.c ****                                               p_ep->Addr,
 1334              		.loc 1 4102 30 view .LVU478
 1335 011e 0095     		str	r5, [sp]
 1336 0120 4B46     		mov	r3, r9
 1337 0122 4246     		mov	r2, r8
 1338 0124 B178     		ldrb	r1, [r6, #2]	@ zero_extendqisi2
 1339 0126 3846     		mov	r0, r7
 1340 0128 D847     		blx	fp
 1341              	.LVL121:
 1342 012a 0346     		mov	r3, r0
4102:rtos/uC-USB-Device/Source/usbd_ep.c ****                                               p_ep->Addr,
 1343              		.loc 1 4102 28 view .LVU479
 1344 012c E060     		str	r0, [r4, #12]
4107:rtos/uC-USB-Device/Source/usbd_ep.c ****             break;
 1345              		.loc 1 4107 9 is_stmt 1 view .LVU480
4107:rtos/uC-USB-Device/Source/usbd_ep.c ****             break;
ARM GAS  /tmp/ccuUvpuw.s 			page 112


 1346              		.loc 1 4107 13 is_stmt 0 view .LVU481
 1347 012e 2A88     		ldrh	r2, [r5]
4107:rtos/uC-USB-Device/Source/usbd_ep.c ****             break;
 1348              		.loc 1 4107 12 view .LVU482
 1349 0130 002A     		cmp	r2, #0
 1350 0132 3BD1     		bne	.L72
4111:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_DBG_STATS_EP_INC(p_drv->DevNbr, p_ep->Ix, DrvTxStartNbr);
 1351              		.loc 1 4111 72 is_stmt 1 view .LVU483
4112:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 1352              		.loc 1 4112 70 view .LVU484
4114:rtos/uC-USB-Device/Source/usbd_ep.c ****                               p_ep->Addr,
 1353              		.loc 1 4114 9 view .LVU485
4114:rtos/uC-USB-Device/Source/usbd_ep.c ****                               p_ep->Addr,
 1354              		.loc 1 4114 18 is_stmt 0 view .LVU486
 1355 0134 DAF838B0 		ldr	fp, [r10, #56]
4114:rtos/uC-USB-Device/Source/usbd_ep.c ****                               p_ep->Addr,
 1356              		.loc 1 4114 9 view .LVU487
 1357 0138 0095     		str	r5, [sp]
 1358 013a 4246     		mov	r2, r8
 1359 013c B178     		ldrb	r1, [r6, #2]	@ zero_extendqisi2
 1360 013e 3846     		mov	r0, r7
 1361 0140 D847     		blx	fp
 1362              	.LVL122:
4119:rtos/uC-USB-Device/Source/usbd_ep.c ****             break;
 1363              		.loc 1 4119 9 is_stmt 1 view .LVU488
4119:rtos/uC-USB-Device/Source/usbd_ep.c ****             break;
 1364              		.loc 1 4119 13 is_stmt 0 view .LVU489
 1365 0142 2B88     		ldrh	r3, [r5]
4119:rtos/uC-USB-Device/Source/usbd_ep.c ****             break;
 1366              		.loc 1 4119 12 view .LVU490
 1367 0144 002B     		cmp	r3, #0
 1368 0146 31D1     		bne	.L72
4122:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 1369              		.loc 1 4122 77 is_stmt 1 view .LVU491
4124:rtos/uC-USB-Device/Source/usbd_ep.c ****                                p_ep->Ix);
 1370              		.loc 1 4124 9 view .LVU492
 1371 0148 317A     		ldrb	r1, [r6, #8]	@ zero_extendqisi2
 1372 014a 3878     		ldrb	r0, [r7]	@ zero_extendqisi2
 1373 014c FFF7FEFF 		bl	USBD_OS_EP_LockRelease
 1374              	.LVL123:
4127:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 1375              		.loc 1 4127 9 view .LVU493
 1376 0150 2B46     		mov	r3, r5
 1377 0152 049A     		ldr	r2, [sp, #16]
 1378 0154 317A     		ldrb	r1, [r6, #8]	@ zero_extendqisi2
 1379 0156 3878     		ldrb	r0, [r7]	@ zero_extendqisi2
 1380 0158 FFF7FEFF 		bl	USBD_OS_EP_SignalPend
 1381              	.LVL124:
4129:rtos/uC-USB-Device/Source/usbd_ep.c ****                                p_ep->Ix,
 1382              		.loc 1 4129 9 view .LVU494
 1383 015c 0DF11E03 		add	r3, sp, #30
 1384 0160 0022     		movs	r2, #0
 1385 0162 317A     		ldrb	r1, [r6, #8]	@ zero_extendqisi2
 1386 0164 3878     		ldrb	r0, [r7]	@ zero_extendqisi2
 1387 0166 FFF7FEFF 		bl	USBD_OS_EP_LockAcquire
 1388              	.LVL125:
4134:rtos/uC-USB-Device/Source/usbd_ep.c ****             p_drv_api->EP_Abort(p_drv, p_ep->Addr);
ARM GAS  /tmp/ccuUvpuw.s 			page 113


 1389              		.loc 1 4134 9 view .LVU495
4134:rtos/uC-USB-Device/Source/usbd_ep.c ****             p_drv_api->EP_Abort(p_drv, p_ep->Addr);
 1390              		.loc 1 4134 13 is_stmt 0 view .LVU496
 1391 016a 2B88     		ldrh	r3, [r5]
4134:rtos/uC-USB-Device/Source/usbd_ep.c ****             p_drv_api->EP_Abort(p_drv, p_ep->Addr);
 1392              		.loc 1 4134 12 view .LVU497
 1393 016c 40F2F712 		movw	r2, #503
 1394 0170 9342     		cmp	r3, r2
 1395 0172 16D0     		beq	.L89
4138:rtos/uC-USB-Device/Source/usbd_ep.c ****             break;
 1396              		.loc 1 4138 16 is_stmt 1 view .LVU498
4138:rtos/uC-USB-Device/Source/usbd_ep.c ****             break;
 1397              		.loc 1 4138 19 is_stmt 0 view .LVU499
 1398 0174 D3B9     		cbnz	r3, .L72
4140:rtos/uC-USB-Device/Source/usbd_ep.c ****            *p_err = USBD_ERR_OS_FAIL;
 1399              		.loc 1 4140 16 is_stmt 1 view .LVU500
4140:rtos/uC-USB-Device/Source/usbd_ep.c ****            *p_err = USBD_ERR_OS_FAIL;
 1400              		.loc 1 4140 30 is_stmt 0 view .LVU501
 1401 0176 BDF81E30 		ldrh	r3, [sp, #30]
4140:rtos/uC-USB-Device/Source/usbd_ep.c ****            *p_err = USBD_ERR_OS_FAIL;
 1402              		.loc 1 4140 19 view .LVU502
 1403 017a 2BBB     		cbnz	r3, .L90
4145:rtos/uC-USB-Device/Source/usbd_ep.c ****         xfer_rem       -= p_urb->NextXferLen;
 1404              		.loc 1 4145 9 is_stmt 1 view .LVU503
4145:rtos/uC-USB-Device/Source/usbd_ep.c ****         xfer_rem       -= p_urb->NextXferLen;
 1405              		.loc 1 4145 32 is_stmt 0 view .LVU504
 1406 017c E268     		ldr	r2, [r4, #12]
4145:rtos/uC-USB-Device/Source/usbd_ep.c ****         xfer_rem       -= p_urb->NextXferLen;
 1407              		.loc 1 4145 24 view .LVU505
 1408 017e A368     		ldr	r3, [r4, #8]
 1409 0180 1344     		add	r3, r3, r2
 1410 0182 A360     		str	r3, [r4, #8]
4146:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 1411              		.loc 1 4146 9 is_stmt 1 view .LVU506
4146:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 1412              		.loc 1 4146 24 is_stmt 0 view .LVU507
 1413 0184 A9EB0209 		sub	r9, r9, r2
 1414              	.LVL126:
 1415              	.L70:
4090:rtos/uC-USB-Device/Source/usbd_ep.c ****            ((xfer_rem  >  0u)            ||
 1416              		.loc 1 4090 11 is_stmt 1 view .LVU508
4090:rtos/uC-USB-Device/Source/usbd_ep.c ****            ((xfer_rem  >  0u)            ||
 1417              		.loc 1 4090 13 is_stmt 0 view .LVU509
 1418 0188 2B88     		ldrh	r3, [r5]
4090:rtos/uC-USB-Device/Source/usbd_ep.c ****            ((xfer_rem  >  0u)            ||
 1419              		.loc 1 4090 11 view .LVU510
 1420 018a 7BB9     		cbnz	r3, .L72
4090:rtos/uC-USB-Device/Source/usbd_ep.c ****            ((xfer_rem  >  0u)            ||
 1421              		.loc 1 4090 42 discriminator 1 view .LVU511
 1422 018c B9F1000F 		cmp	r9, #0
 1423 0190 BCD1     		bne	.L75
4091:rtos/uC-USB-Device/Source/usbd_ep.c ****             (zlp_flag  == DEF_YES))) {
 1424              		.loc 1 4091 42 view .LVU512
 1425 0192 039B     		ldr	r3, [sp, #12]
 1426 0194 002B     		cmp	r3, #0
 1427 0196 B9D1     		bne	.L75
 1428 0198 08E0     		b	.L72
ARM GAS  /tmp/ccuUvpuw.s 			page 114


 1429              	.L79:
4098:rtos/uC-USB-Device/Source/usbd_ep.c ****         }
 1430              		.loc 1 4098 23 view .LVU513
 1431 019a 0023     		movs	r3, #0
 1432 019c 0393     		str	r3, [sp, #12]
 1433              	.LVL127:
4097:rtos/uC-USB-Device/Source/usbd_ep.c ****             zlp_flag  = DEF_NO;                                 /* If Tx ZLP, loop done only once. 
 1434              		.loc 1 4097 23 view .LVU514
 1435 019e 9846     		mov	r8, r3
 1436 01a0 BBE7     		b	.L71
 1437              	.LVL128:
 1438              	.L89:
4135:rtos/uC-USB-Device/Source/usbd_ep.c ****             USBD_DBG_STATS_EP_INC(p_drv->DevNbr, p_ep->Ix, TxSyncTimeoutErrNbr);
 1439              		.loc 1 4135 13 is_stmt 1 view .LVU515
4135:rtos/uC-USB-Device/Source/usbd_ep.c ****             USBD_DBG_STATS_EP_INC(p_drv->DevNbr, p_ep->Ix, TxSyncTimeoutErrNbr);
 1440              		.loc 1 4135 22 is_stmt 0 view .LVU516
 1441 01a2 DAF84030 		ldr	r3, [r10, #64]
4135:rtos/uC-USB-Device/Source/usbd_ep.c ****             USBD_DBG_STATS_EP_INC(p_drv->DevNbr, p_ep->Ix, TxSyncTimeoutErrNbr);
 1442              		.loc 1 4135 13 view .LVU517
 1443 01a6 B178     		ldrb	r1, [r6, #2]	@ zero_extendqisi2
 1444 01a8 3846     		mov	r0, r7
 1445 01aa 9847     		blx	r3
 1446              	.LVL129:
4136:rtos/uC-USB-Device/Source/usbd_ep.c ****             break;
 1447              		.loc 1 4136 80 is_stmt 1 view .LVU518
4137:rtos/uC-USB-Device/Source/usbd_ep.c ****         } else if (*p_err != USBD_ERR_NONE) {
 1448              		.loc 1 4137 13 view .LVU519
 1449              	.L72:
4149:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 1450              		.loc 1 4149 5 view .LVU520
4149:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 1451              		.loc 1 4149 14 is_stmt 0 view .LVU521
 1452 01ac D4F80880 		ldr	r8, [r4, #8]
 1453              	.LVL130:
4151:rtos/uC-USB-Device/Source/usbd_ep.c ****         (*p_err                             == USBD_ERR_NONE) &&
 1454              		.loc 1 4151 5 is_stmt 1 view .LVU522
4151:rtos/uC-USB-Device/Source/usbd_ep.c ****         (*p_err                             == USBD_ERR_NONE) &&
 1455              		.loc 1 4151 8 is_stmt 0 view .LVU523
 1456 01b0 059B     		ldr	r3, [sp, #20]
 1457 01b2 012B     		cmp	r3, #1
 1458 01b4 0CD0     		beq	.L91
 1459              	.L76:
4178:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 1460              		.loc 1 4178 5 is_stmt 1 view .LVU524
 1461 01b6 3046     		mov	r0, r6
 1462 01b8 FFF7FEFF 		bl	USBD_URB_Dequeue
 1463              	.LVL131:
4180:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 1464              		.loc 1 4180 5 view .LVU525
 1465 01bc 2246     		mov	r2, r4
 1466 01be 3146     		mov	r1, r6
 1467 01c0 3878     		ldrb	r0, [r7]	@ zero_extendqisi2
 1468 01c2 FFF7FEFF 		bl	USBD_URB_Free
 1469              	.LVL132:
4182:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 1470              		.loc 1 4182 104 view .LVU526
4184:rtos/uC-USB-Device/Source/usbd_ep.c **** }
ARM GAS  /tmp/ccuUvpuw.s 			page 115


 1471              		.loc 1 4184 5 view .LVU527
4184:rtos/uC-USB-Device/Source/usbd_ep.c **** }
 1472              		.loc 1 4184 12 is_stmt 0 view .LVU528
 1473 01c6 79E7     		b	.L60
 1474              	.LVL133:
 1475              	.L90:
4141:rtos/uC-USB-Device/Source/usbd_ep.c ****             break;
 1476              		.loc 1 4141 12 is_stmt 1 view .LVU529
4141:rtos/uC-USB-Device/Source/usbd_ep.c ****             break;
 1477              		.loc 1 4141 19 is_stmt 0 view .LVU530
 1478 01c8 4FF4FB73 		mov	r3, #502
 1479 01cc 2B80     		strh	r3, [r5]	@ movhi
4142:rtos/uC-USB-Device/Source/usbd_ep.c ****         }
 1480              		.loc 1 4142 13 is_stmt 1 view .LVU531
 1481 01ce EDE7     		b	.L72
 1482              	.LVL134:
 1483              	.L91:
4152:rtos/uC-USB-Device/Source/usbd_ep.c ****         ((p_urb->BufLen % p_ep->MaxPktSize) == 0u)            &&
 1484              		.loc 1 4152 10 is_stmt 0 discriminator 1 view .LVU532
 1485 01d0 2B88     		ldrh	r3, [r5]
4151:rtos/uC-USB-Device/Source/usbd_ep.c ****         (*p_err                             == USBD_ERR_NONE) &&
 1486              		.loc 1 4151 63 discriminator 1 view .LVU533
 1487 01d2 002B     		cmp	r3, #0
 1488 01d4 EFD1     		bne	.L76
4153:rtos/uC-USB-Device/Source/usbd_ep.c ****         ( p_urb->BufLen                     != 0u)) {
 1489              		.loc 1 4153 16 view .LVU534
 1490 01d6 6268     		ldr	r2, [r4, #4]
4153:rtos/uC-USB-Device/Source/usbd_ep.c ****         ( p_urb->BufLen                     != 0u)) {
 1491              		.loc 1 4153 31 view .LVU535
 1492 01d8 B188     		ldrh	r1, [r6, #4]
4153:rtos/uC-USB-Device/Source/usbd_ep.c ****         ( p_urb->BufLen                     != 0u)) {
 1493              		.loc 1 4153 25 view .LVU536
 1494 01da B2FBF1F3 		udiv	r3, r2, r1
 1495 01de 01FB1323 		mls	r3, r1, r3, r2
4152:rtos/uC-USB-Device/Source/usbd_ep.c ****         ((p_urb->BufLen % p_ep->MaxPktSize) == 0u)            &&
 1496              		.loc 1 4152 63 view .LVU537
 1497 01e2 002B     		cmp	r3, #0
 1498 01e4 E7D1     		bne	.L76
4153:rtos/uC-USB-Device/Source/usbd_ep.c ****         ( p_urb->BufLen                     != 0u)) {
 1499              		.loc 1 4153 63 view .LVU538
 1500 01e6 002A     		cmp	r2, #0
 1501 01e8 E5D0     		beq	.L76
4156:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 1502              		.loc 1 4156 69 is_stmt 1 view .LVU539
4158:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 1503              		.loc 1 4158 9 view .LVU540
4158:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 1504              		.loc 1 4158 18 is_stmt 0 view .LVU541
 1505 01ea DAF83C30 		ldr	r3, [r10, #60]
4158:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 1506              		.loc 1 4158 9 view .LVU542
 1507 01ee 2A46     		mov	r2, r5
 1508 01f0 B178     		ldrb	r1, [r6, #2]	@ zero_extendqisi2
 1509 01f2 3846     		mov	r0, r7
 1510 01f4 9847     		blx	r3
 1511              	.LVL135:
4160:rtos/uC-USB-Device/Source/usbd_ep.c ****             USBD_DBG_STATS_EP_INC(p_drv->DevNbr, p_ep->Ix, DrvTxZLP_SuccessNbr);
ARM GAS  /tmp/ccuUvpuw.s 			page 116


 1512              		.loc 1 4160 9 is_stmt 1 view .LVU543
4160:rtos/uC-USB-Device/Source/usbd_ep.c ****             USBD_DBG_STATS_EP_INC(p_drv->DevNbr, p_ep->Ix, DrvTxZLP_SuccessNbr);
 1513              		.loc 1 4160 13 is_stmt 0 view .LVU544
 1514 01f6 2B88     		ldrh	r3, [r5]
4160:rtos/uC-USB-Device/Source/usbd_ep.c ****             USBD_DBG_STATS_EP_INC(p_drv->DevNbr, p_ep->Ix, DrvTxZLP_SuccessNbr);
 1515              		.loc 1 4160 12 view .LVU545
 1516 01f8 002B     		cmp	r3, #0
 1517 01fa DCD1     		bne	.L76
4161:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 1518              		.loc 1 4161 80 is_stmt 1 view .LVU546
4163:rtos/uC-USB-Device/Source/usbd_ep.c ****                                    p_ep->Ix);
 1519              		.loc 1 4163 13 view .LVU547
 1520 01fc 317A     		ldrb	r1, [r6, #8]	@ zero_extendqisi2
 1521 01fe 3878     		ldrb	r0, [r7]	@ zero_extendqisi2
 1522 0200 FFF7FEFF 		bl	USBD_OS_EP_LockRelease
 1523              	.LVL136:
4166:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 1524              		.loc 1 4166 13 view .LVU548
 1525 0204 2B46     		mov	r3, r5
 1526 0206 049A     		ldr	r2, [sp, #16]
 1527 0208 317A     		ldrb	r1, [r6, #8]	@ zero_extendqisi2
 1528 020a 3878     		ldrb	r0, [r7]	@ zero_extendqisi2
 1529 020c FFF7FEFF 		bl	USBD_OS_EP_SignalPend
 1530              	.LVL137:
4168:rtos/uC-USB-Device/Source/usbd_ep.c ****                                    p_ep->Ix,
 1531              		.loc 1 4168 13 view .LVU549
 1532 0210 0DF11E03 		add	r3, sp, #30
 1533 0214 0022     		movs	r2, #0
 1534 0216 317A     		ldrb	r1, [r6, #8]	@ zero_extendqisi2
 1535 0218 3878     		ldrb	r0, [r7]	@ zero_extendqisi2
 1536 021a FFF7FEFF 		bl	USBD_OS_EP_LockAcquire
 1537              	.LVL138:
4172:rtos/uC-USB-Device/Source/usbd_ep.c ****                *p_err = USBD_ERR_OS_FAIL;
 1538              		.loc 1 4172 13 view .LVU550
4172:rtos/uC-USB-Device/Source/usbd_ep.c ****                *p_err = USBD_ERR_OS_FAIL;
 1539              		.loc 1 4172 27 is_stmt 0 view .LVU551
 1540 021e BDF81E30 		ldrh	r3, [sp, #30]
4172:rtos/uC-USB-Device/Source/usbd_ep.c ****                *p_err = USBD_ERR_OS_FAIL;
 1541              		.loc 1 4172 16 view .LVU552
 1542 0222 002B     		cmp	r3, #0
 1543 0224 C7D0     		beq	.L76
4173:rtos/uC-USB-Device/Source/usbd_ep.c ****             }
 1544              		.loc 1 4173 16 is_stmt 1 view .LVU553
4173:rtos/uC-USB-Device/Source/usbd_ep.c ****             }
 1545              		.loc 1 4173 23 is_stmt 0 view .LVU554
 1546 0226 4FF4FB73 		mov	r3, #502
 1547 022a 2B80     		strh	r3, [r5]	@ movhi
 1548 022c C3E7     		b	.L76
 1549              	.LVL139:
 1550              	.L78:
4044:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 1551              		.loc 1 4044 16 view .LVU555
 1552 022e 4FF00008 		mov	r8, #0
 1553              	.LVL140:
4044:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 1554              		.loc 1 4044 16 view .LVU556
 1555 0232 43E7     		b	.L60
ARM GAS  /tmp/ccuUvpuw.s 			page 117


 1556              		.cfi_endproc
 1557              	.LFE32:
 1559              		.section	.text.USBD_URB_AsyncEnd,"ax",%progbits
 1560              		.align	1
 1561              		.syntax unified
 1562              		.thumb
 1563              		.thumb_func
 1564              		.fpu fpv4-sp-d16
 1566              	USBD_URB_AsyncEnd:
 1567              	.LVL141:
 1568              	.LFB35:
4347:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_URB         *p_urb_cur;
 1569              		.loc 1 4347 1 is_stmt 1 view -0
 1570              		.cfi_startproc
 1571              		@ args = 0, pretend = 0, frame = 8
 1572              		@ frame_needed = 0, uses_anonymous_args = 0
4347:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_URB         *p_urb_cur;
 1573              		.loc 1 4347 1 is_stmt 0 view .LVU558
 1574 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 1575              	.LCFI19:
 1576              		.cfi_def_cfa_offset 36
 1577              		.cfi_offset 4, -36
 1578              		.cfi_offset 5, -32
 1579              		.cfi_offset 6, -28
 1580              		.cfi_offset 7, -24
 1581              		.cfi_offset 8, -20
 1582              		.cfi_offset 9, -16
 1583              		.cfi_offset 10, -12
 1584              		.cfi_offset 11, -8
 1585              		.cfi_offset 14, -4
 1586 0004 87B0     		sub	sp, sp, #28
 1587              	.LCFI20:
 1588              		.cfi_def_cfa_offset 64
 1589 0006 0546     		mov	r5, r0
 1590 0008 0C46     		mov	r4, r1
4348:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_URB         *p_urb_next;
 1591              		.loc 1 4348 5 is_stmt 1 view .LVU559
4349:rtos/uC-USB-Device/Source/usbd_ep.c ****     void             *p_buf;
 1592              		.loc 1 4349 5 view .LVU560
4350:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_INT32U        buf_len;
 1593              		.loc 1 4350 5 view .LVU561
4351:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_INT32U        xfer_len;
 1594              		.loc 1 4351 5 view .LVU562
4352:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_ASYNC_FNCT   async_fnct;
 1595              		.loc 1 4352 5 view .LVU563
4353:rtos/uC-USB-Device/Source/usbd_ep.c ****     void             *p_async_arg;
 1596              		.loc 1 4353 5 view .LVU564
4354:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_ERR          err;
 1597              		.loc 1 4354 5 view .LVU565
4355:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 1598              		.loc 1 4355 5 view .LVU566
4358:rtos/uC-USB-Device/Source/usbd_ep.c ****     while (p_urb_cur != (USBD_URB *)0) {                        /* Iterate through linked list.    
 1599              		.loc 1 4358 5 view .LVU567
 1600              	.LVL142:
4359:rtos/uC-USB-Device/Source/usbd_ep.c ****         p_buf       = (void *)p_urb_cur->BufPtr;
 1601              		.loc 1 4359 5 view .LVU568
 1602              	.L93:
ARM GAS  /tmp/ccuUvpuw.s 			page 118


4359:rtos/uC-USB-Device/Source/usbd_ep.c ****         p_buf       = (void *)p_urb_cur->BufPtr;
 1603              		.loc 1 4359 11 view .LVU569
 1604 000a E2B1     		cbz	r2, .L96
4360:rtos/uC-USB-Device/Source/usbd_ep.c ****         buf_len     =  p_urb_cur->BufLen;
 1605              		.loc 1 4360 9 view .LVU570
4360:rtos/uC-USB-Device/Source/usbd_ep.c ****         buf_len     =  p_urb_cur->BufLen;
 1606              		.loc 1 4360 21 is_stmt 0 view .LVU571
 1607 000c 1768     		ldr	r7, [r2]
 1608              	.LVL143:
4361:rtos/uC-USB-Device/Source/usbd_ep.c ****         xfer_len    =  p_urb_cur->XferLen;
 1609              		.loc 1 4361 9 is_stmt 1 view .LVU572
4361:rtos/uC-USB-Device/Source/usbd_ep.c ****         xfer_len    =  p_urb_cur->XferLen;
 1610              		.loc 1 4361 21 is_stmt 0 view .LVU573
 1611 000e D2F80480 		ldr	r8, [r2, #4]
 1612              	.LVL144:
4362:rtos/uC-USB-Device/Source/usbd_ep.c ****         async_fnct  =  p_urb_cur->AsyncFnct;
 1613              		.loc 1 4362 9 is_stmt 1 view .LVU574
4362:rtos/uC-USB-Device/Source/usbd_ep.c ****         async_fnct  =  p_urb_cur->AsyncFnct;
 1614              		.loc 1 4362 21 is_stmt 0 view .LVU575
 1615 0012 D2F80890 		ldr	r9, [r2, #8]
 1616              	.LVL145:
4363:rtos/uC-USB-Device/Source/usbd_ep.c ****         p_async_arg =  p_urb_cur->AsyncFnctArg;
 1617              		.loc 1 4363 9 is_stmt 1 view .LVU576
4363:rtos/uC-USB-Device/Source/usbd_ep.c ****         p_async_arg =  p_urb_cur->AsyncFnctArg;
 1618              		.loc 1 4363 21 is_stmt 0 view .LVU577
 1619 0016 5669     		ldr	r6, [r2, #20]
 1620              	.LVL146:
4364:rtos/uC-USB-Device/Source/usbd_ep.c ****         err         =  p_urb_cur->Err;
 1621              		.loc 1 4364 9 is_stmt 1 view .LVU578
4364:rtos/uC-USB-Device/Source/usbd_ep.c ****         err         =  p_urb_cur->Err;
 1622              		.loc 1 4364 21 is_stmt 0 view .LVU579
 1623 0018 D2F818A0 		ldr	r10, [r2, #24]
 1624              	.LVL147:
4365:rtos/uC-USB-Device/Source/usbd_ep.c ****         p_urb_next  =  p_urb_cur->NextPtr;
 1625              		.loc 1 4365 9 is_stmt 1 view .LVU580
4365:rtos/uC-USB-Device/Source/usbd_ep.c ****         p_urb_next  =  p_urb_cur->NextPtr;
 1626              		.loc 1 4365 21 is_stmt 0 view .LVU581
 1627 001c B2F81CB0 		ldrh	fp, [r2, #28]
 1628              	.LVL148:
4366:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 1629              		.loc 1 4366 9 is_stmt 1 view .LVU582
4366:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 1630              		.loc 1 4366 21 is_stmt 0 view .LVU583
 1631 0020 136A     		ldr	r3, [r2, #32]
 1632 0022 0593     		str	r3, [sp, #20]
 1633              	.LVL149:
4368:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 1634              		.loc 1 4368 9 is_stmt 1 view .LVU584
 1635 0024 2146     		mov	r1, r4
 1636 0026 2846     		mov	r0, r5
 1637 0028 FFF7FEFF 		bl	USBD_URB_Free
 1638              	.LVL150:
4370:rtos/uC-USB-Device/Source/usbd_ep.c ****                    p_ep->Addr,
 1639              		.loc 1 4370 9 view .LVU585
 1640 002c CDF808B0 		str	fp, [sp, #8]
 1641 0030 CDF804A0 		str	r10, [sp, #4]
 1642 0034 CDF80090 		str	r9, [sp]
ARM GAS  /tmp/ccuUvpuw.s 			page 119


 1643 0038 4346     		mov	r3, r8
 1644 003a 3A46     		mov	r2, r7
 1645 003c A178     		ldrb	r1, [r4, #2]	@ zero_extendqisi2
 1646 003e 2846     		mov	r0, r5
 1647 0040 B047     		blx	r6
 1648              	.LVL151:
4378:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 1649              		.loc 1 4378 9 view .LVU586
4378:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 1650              		.loc 1 4378 19 is_stmt 0 view .LVU587
 1651 0042 059A     		ldr	r2, [sp, #20]
 1652 0044 E1E7     		b	.L93
 1653              	.LVL152:
 1654              	.L96:
4380:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 1655              		.loc 1 4380 1 view .LVU588
 1656 0046 07B0     		add	sp, sp, #28
 1657              	.LCFI21:
 1658              		.cfi_def_cfa_offset 36
 1659              		@ sp needed
 1660 0048 BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
4380:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 1661              		.loc 1 4380 1 view .LVU589
 1662              		.cfi_endproc
 1663              	.LFE35:
 1665              		.section	.text.USBD_EP_URB_Abort,"ax",%progbits
 1666              		.align	1
 1667              		.syntax unified
 1668              		.thumb
 1669              		.thumb_func
 1670              		.fpu fpv4-sp-d16
 1672              	USBD_EP_URB_Abort:
 1673              	.LVL153:
 1674              	.LFB33:
4226:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DRV_API  *p_drv_api;
 1675              		.loc 1 4226 1 is_stmt 1 view -0
 1676              		.cfi_startproc
 1677              		@ args = 0, pretend = 0, frame = 0
 1678              		@ frame_needed = 0, uses_anonymous_args = 0
4226:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DRV_API  *p_drv_api;
 1679              		.loc 1 4226 1 is_stmt 0 view .LVU591
 1680 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 1681              	.LCFI22:
 1682              		.cfi_def_cfa_offset 24
 1683              		.cfi_offset 4, -24
 1684              		.cfi_offset 5, -20
 1685              		.cfi_offset 6, -16
 1686              		.cfi_offset 7, -12
 1687              		.cfi_offset 8, -8
 1688              		.cfi_offset 14, -4
 1689 0004 0546     		mov	r5, r0
 1690 0006 0C46     		mov	r4, r1
 1691 0008 1646     		mov	r6, r2
4227:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_BOOLEAN    abort_ok;
 1692              		.loc 1 4227 5 is_stmt 1 view .LVU592
4228:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_URB      *p_urb_head;
 1693              		.loc 1 4228 5 view .LVU593
ARM GAS  /tmp/ccuUvpuw.s 			page 120


4229:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_URB      *p_urb;
 1694              		.loc 1 4229 5 view .LVU594
4230:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_URB      *p_urb_cur;
 1695              		.loc 1 4230 5 view .LVU595
4231:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 1696              		.loc 1 4231 5 view .LVU596
4234:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_urb_head = (USBD_URB *)0;
 1697              		.loc 1 4234 5 view .LVU597
4234:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_urb_head = (USBD_URB *)0;
 1698              		.loc 1 4234 16 is_stmt 0 view .LVU598
 1699 000a 4768     		ldr	r7, [r0, #4]
 1700              	.LVL154:
4235:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_urb_cur  = (USBD_URB *)0;
 1701              		.loc 1 4235 5 is_stmt 1 view .LVU599
4236:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 1702              		.loc 1 4236 5 view .LVU600
4238:rtos/uC-USB-Device/Source/usbd_ep.c ****         case USBD_XFER_STATE_NONE:
 1703              		.loc 1 4238 5 view .LVU601
4238:rtos/uC-USB-Device/Source/usbd_ep.c ****         case USBD_XFER_STATE_NONE:
 1704              		.loc 1 4238 17 is_stmt 0 view .LVU602
 1705 000c 4B78     		ldrb	r3, [r1, #1]	@ zero_extendqisi2
4238:rtos/uC-USB-Device/Source/usbd_ep.c ****         case USBD_XFER_STATE_NONE:
 1706              		.loc 1 4238 5 view .LVU603
 1707 000e 012B     		cmp	r3, #1
 1708 0010 2AD0     		beq	.L98
 1709 0012 0BD8     		bhi	.L99
 1710 0014 1BB9     		cbnz	r3, .L111
 1711 0016 0027     		movs	r7, #0
 1712              	.LVL155:
 1713              	.L100:
4273:rtos/uC-USB-Device/Source/usbd_ep.c ****     } else {
 1714              		.loc 1 4273 8 is_stmt 1 view .LVU604
4273:rtos/uC-USB-Device/Source/usbd_ep.c ****     } else {
 1715              		.loc 1 4273 15 is_stmt 0 view .LVU605
 1716 0018 0023     		movs	r3, #0
 1717 001a 3380     		strh	r3, [r6]	@ movhi
 1718 001c 03E0     		b	.L97
 1719              	.LVL156:
 1720              	.L111:
4238:rtos/uC-USB-Device/Source/usbd_ep.c ****         case USBD_XFER_STATE_NONE:
 1721              		.loc 1 4238 5 view .LVU606
 1722 001e 0027     		movs	r7, #0
 1723              	.LVL157:
 1724              	.L101:
4275:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 1725              		.loc 1 4275 8 is_stmt 1 view .LVU607
4275:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 1726              		.loc 1 4275 15 is_stmt 0 view .LVU608
 1727 0020 40F29513 		movw	r3, #405
 1728 0024 3380     		strh	r3, [r6]	@ movhi
4278:rtos/uC-USB-Device/Source/usbd_ep.c **** }
 1729              		.loc 1 4278 5 is_stmt 1 view .LVU609
 1730              	.L97:
4279:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 1731              		.loc 1 4279 1 is_stmt 0 view .LVU610
 1732 0026 3846     		mov	r0, r7
 1733 0028 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
ARM GAS  /tmp/ccuUvpuw.s 			page 121


 1734              	.LVL158:
 1735              	.L99:
4238:rtos/uC-USB-Device/Source/usbd_ep.c ****         case USBD_XFER_STATE_NONE:
 1736              		.loc 1 4238 5 view .LVU611
 1737 002c 023B     		subs	r3, r3, #2
 1738 002e DBB2     		uxtb	r3, r3
 1739 0030 012B     		cmp	r3, #1
 1740 0032 23D8     		bhi	.L108
4246:rtos/uC-USB-Device/Source/usbd_ep.c ****              while(p_urb != (USBD_URB *)0) {
 1741              		.loc 1 4246 14 is_stmt 1 view .LVU612
4246:rtos/uC-USB-Device/Source/usbd_ep.c ****              while(p_urb != (USBD_URB *)0) {
 1742              		.loc 1 4246 20 is_stmt 0 view .LVU613
 1743 0034 C868     		ldr	r0, [r1, #12]
 1744              	.LVL159:
4247:rtos/uC-USB-Device/Source/usbd_ep.c ****                  p_urb = USBD_URB_AsyncCmpl(p_ep, USBD_ERR_EP_ABORT);
 1745              		.loc 1 4247 14 is_stmt 1 view .LVU614
4236:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 1746              		.loc 1 4236 16 is_stmt 0 view .LVU615
 1747 0036 4FF00008 		mov	r8, #0
4235:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_urb_cur  = (USBD_URB *)0;
 1748              		.loc 1 4235 16 view .LVU616
 1749 003a 4746     		mov	r7, r8
 1750              	.LVL160:
4247:rtos/uC-USB-Device/Source/usbd_ep.c ****                  p_urb = USBD_URB_AsyncCmpl(p_ep, USBD_ERR_EP_ABORT);
 1751              		.loc 1 4247 19 view .LVU617
 1752 003c 01E0     		b	.L102
 1753              	.LVL161:
 1754              	.L109:
4250:rtos/uC-USB-Device/Source/usbd_ep.c ****                  } else {
 1755              		.loc 1 4250 33 view .LVU618
 1756 003e 0746     		mov	r7, r0
 1757              	.LVL162:
 1758              	.L103:
4250:rtos/uC-USB-Device/Source/usbd_ep.c ****                  } else {
 1759              		.loc 1 4250 33 view .LVU619
 1760 0040 8046     		mov	r8, r0
 1761              	.LVL163:
 1762              	.L102:
4247:rtos/uC-USB-Device/Source/usbd_ep.c ****                  p_urb = USBD_URB_AsyncCmpl(p_ep, USBD_ERR_EP_ABORT);
 1763              		.loc 1 4247 19 is_stmt 1 view .LVU620
 1764 0042 48B1     		cbz	r0, .L112
4248:rtos/uC-USB-Device/Source/usbd_ep.c ****                  if (p_urb_head == (USBD_URB *)0) {
 1765              		.loc 1 4248 18 view .LVU621
4248:rtos/uC-USB-Device/Source/usbd_ep.c ****                  if (p_urb_head == (USBD_URB *)0) {
 1766              		.loc 1 4248 26 is_stmt 0 view .LVU622
 1767 0044 40F29511 		movw	r1, #405
 1768 0048 2046     		mov	r0, r4
 1769              	.LVL164:
4248:rtos/uC-USB-Device/Source/usbd_ep.c ****                  if (p_urb_head == (USBD_URB *)0) {
 1770              		.loc 1 4248 26 view .LVU623
 1771 004a FFF7FEFF 		bl	USBD_URB_AsyncCmpl
 1772              	.LVL165:
4249:rtos/uC-USB-Device/Source/usbd_ep.c ****                      p_urb_head = p_urb;
 1773              		.loc 1 4249 18 is_stmt 1 view .LVU624
4249:rtos/uC-USB-Device/Source/usbd_ep.c ****                      p_urb_head = p_urb;
 1774              		.loc 1 4249 21 is_stmt 0 view .LVU625
 1775 004e 002F     		cmp	r7, #0
ARM GAS  /tmp/ccuUvpuw.s 			page 122


 1776 0050 F5D0     		beq	.L109
4252:rtos/uC-USB-Device/Source/usbd_ep.c ****                  }
 1777              		.loc 1 4252 22 is_stmt 1 view .LVU626
4252:rtos/uC-USB-Device/Source/usbd_ep.c ****                  }
 1778              		.loc 1 4252 41 is_stmt 0 view .LVU627
 1779 0052 C8F82000 		str	r0, [r8, #32]
 1780 0056 F3E7     		b	.L103
 1781              	.L112:
4256:rtos/uC-USB-Device/Source/usbd_ep.c ****              break;
 1782              		.loc 1 4256 14 is_stmt 1 view .LVU628
4256:rtos/uC-USB-Device/Source/usbd_ep.c ****              break;
 1783              		.loc 1 4256 30 is_stmt 0 view .LVU629
 1784 0058 6B68     		ldr	r3, [r5, #4]
4256:rtos/uC-USB-Device/Source/usbd_ep.c ****              break;
 1785              		.loc 1 4256 39 view .LVU630
 1786 005a 1B6C     		ldr	r3, [r3, #64]
4256:rtos/uC-USB-Device/Source/usbd_ep.c ****              break;
 1787              		.loc 1 4256 25 view .LVU631
 1788 005c A178     		ldrb	r1, [r4, #2]	@ zero_extendqisi2
 1789 005e 2846     		mov	r0, r5
 1790              	.LVL166:
4256:rtos/uC-USB-Device/Source/usbd_ep.c ****              break;
 1791              		.loc 1 4256 25 view .LVU632
 1792 0060 9847     		blx	r3
 1793              	.LVL167:
4257:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 1794              		.loc 1 4257 14 is_stmt 1 view .LVU633
 1795              	.L105:
4272:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_NONE;
 1796              		.loc 1 4272 5 view .LVU634
4272:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_NONE;
 1797              		.loc 1 4272 8 is_stmt 0 view .LVU635
 1798 0062 0128     		cmp	r0, #1
 1799 0064 DCD1     		bne	.L101
4272:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_NONE;
 1800              		.loc 1 4272 8 view .LVU636
 1801 0066 D7E7     		b	.L100
 1802              	.LVL168:
 1803              	.L98:
4261:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 1804              		.loc 1 4261 14 is_stmt 1 view .LVU637
 1805 0068 097A     		ldrb	r1, [r1, #8]	@ zero_extendqisi2
 1806              	.LVL169:
4261:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 1807              		.loc 1 4261 14 is_stmt 0 view .LVU638
 1808 006a 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 1809              	.LVL170:
4261:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 1810              		.loc 1 4261 14 view .LVU639
 1811 006c FFF7FEFF 		bl	USBD_OS_EP_SignalAbort
 1812              	.LVL171:
4263:rtos/uC-USB-Device/Source/usbd_ep.c ****              break;
 1813              		.loc 1 4263 14 is_stmt 1 view .LVU640
4263:rtos/uC-USB-Device/Source/usbd_ep.c ****              break;
 1814              		.loc 1 4263 34 is_stmt 0 view .LVU641
 1815 0070 3B6C     		ldr	r3, [r7, #64]
4263:rtos/uC-USB-Device/Source/usbd_ep.c ****              break;
ARM GAS  /tmp/ccuUvpuw.s 			page 123


 1816              		.loc 1 4263 25 view .LVU642
 1817 0072 A178     		ldrb	r1, [r4, #2]	@ zero_extendqisi2
 1818 0074 2846     		mov	r0, r5
 1819 0076 9847     		blx	r3
 1820              	.LVL172:
4264:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 1821              		.loc 1 4264 14 is_stmt 1 view .LVU643
4235:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_urb_cur  = (USBD_URB *)0;
 1822              		.loc 1 4235 16 is_stmt 0 view .LVU644
 1823 0078 0027     		movs	r7, #0
 1824              	.LVL173:
4264:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 1825              		.loc 1 4264 14 view .LVU645
 1826 007a F2E7     		b	.L105
 1827              	.LVL174:
 1828              	.L108:
4238:rtos/uC-USB-Device/Source/usbd_ep.c ****         case USBD_XFER_STATE_NONE:
 1829              		.loc 1 4238 5 view .LVU646
 1830 007c 0027     		movs	r7, #0
 1831              	.LVL175:
4238:rtos/uC-USB-Device/Source/usbd_ep.c ****         case USBD_XFER_STATE_NONE:
 1832              		.loc 1 4238 5 view .LVU647
 1833 007e CFE7     		b	.L101
 1834              		.cfi_endproc
 1835              	.LFE33:
 1837              		.section	.text.USBD_BulkRx,"ax",%progbits
 1838              		.align	1
 1839              		.global	USBD_BulkRx
 1840              		.syntax unified
 1841              		.thumb
 1842              		.thumb_func
 1843              		.fpu fpv4-sp-d16
 1845              	USBD_BulkRx:
 1846              	.LVL176:
 1847              	.LFB0:
 373:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_EP         *p_ep;
 1848              		.loc 1 373 1 is_stmt 1 view -0
 1849              		.cfi_startproc
 1850              		@ args = 8, pretend = 0, frame = 0
 1851              		@ frame_needed = 0, uses_anonymous_args = 0
 373:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_EP         *p_ep;
 1852              		.loc 1 373 1 is_stmt 0 view .LVU649
 1853 0000 2DE9F047 		push	{r4, r5, r6, r7, r8, r9, r10, lr}
 1854              	.LCFI23:
 1855              		.cfi_def_cfa_offset 32
 1856              		.cfi_offset 4, -32
 1857              		.cfi_offset 5, -28
 1858              		.cfi_offset 6, -24
 1859              		.cfi_offset 7, -20
 1860              		.cfi_offset 8, -16
 1861              		.cfi_offset 9, -12
 1862              		.cfi_offset 10, -8
 1863              		.cfi_offset 14, -4
 1864 0004 84B0     		sub	sp, sp, #16
 1865              	.LCFI24:
 1866              		.cfi_def_cfa_offset 48
 1867 0006 0446     		mov	r4, r0
ARM GAS  /tmp/ccuUvpuw.s 			page 124


 1868 0008 0E46     		mov	r6, r1
 1869 000a 9246     		mov	r10, r2
 1870 000c 9846     		mov	r8, r3
 1871 000e 0D9D     		ldr	r5, [sp, #52]
 374:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DRV        *p_drv;
 1872              		.loc 1 374 5 is_stmt 1 view .LVU650
 375:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DEV_STATE   state;
 1873              		.loc 1 375 5 view .LVU651
 376:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_INT32U       xfer_len;
 1874              		.loc 1 376 5 view .LVU652
 377:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_INT08U       ep_phy_nbr;
 1875              		.loc 1 377 5 view .LVU653
 378:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 1876              		.loc 1 378 5 view .LVU654
 381:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 1877              		.loc 1 381 55 view .LVU655
 384:rtos/uC-USB-Device/Source/usbd_ep.c ****         CPU_SW_EXCEPTION(0);
 1878              		.loc 1 384 5 view .LVU656
 384:rtos/uC-USB-Device/Source/usbd_ep.c ****         CPU_SW_EXCEPTION(0);
 1879              		.loc 1 384 8 is_stmt 0 view .LVU657
 1880 0010 8DB1     		cbz	r5, .L124
 1881              	.LVL177:
 1882              	.L114:
 385:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 1883              		.loc 1 385 9 is_stmt 1 discriminator 1 view .LVU658
 389:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_drv == (USBD_DRV *)0) {
 1884              		.loc 1 389 5 discriminator 1 view .LVU659
 389:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_drv == (USBD_DRV *)0) {
 1885              		.loc 1 389 13 is_stmt 0 discriminator 1 view .LVU660
 1886 0012 2046     		mov	r0, r4
 1887 0014 FFF7FEFF 		bl	USBD_DrvRefGet
 1888              	.LVL178:
 390:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_DEV_INVALID_NBR;
 1889              		.loc 1 390 5 is_stmt 1 discriminator 1 view .LVU661
 390:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_DEV_INVALID_NBR;
 1890              		.loc 1 390 8 is_stmt 0 discriminator 1 view .LVU662
 1891 0018 8146     		mov	r9, r0
 1892 001a 78B1     		cbz	r0, .L125
 395:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (state != USBD_DEV_STATE_CONFIGURED) {                   /* EP transfers are ONLY allowed in
 1893              		.loc 1 395 5 is_stmt 1 view .LVU663
 395:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (state != USBD_DEV_STATE_CONFIGURED) {                   /* EP transfers are ONLY allowed in
 1894              		.loc 1 395 13 is_stmt 0 view .LVU664
 1895 001c 2946     		mov	r1, r5
 1896 001e 2046     		mov	r0, r4
 1897              	.LVL179:
 395:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (state != USBD_DEV_STATE_CONFIGURED) {                   /* EP transfers are ONLY allowed in
 1898              		.loc 1 395 13 view .LVU665
 1899 0020 FFF7FEFF 		bl	USBD_DevStateGet
 1900              	.LVL180:
 396:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_DEV_INVALID_STATE;
 1901              		.loc 1 396 5 is_stmt 1 view .LVU666
 396:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_DEV_INVALID_STATE;
 1902              		.loc 1 396 8 is_stmt 0 view .LVU667
 1903 0024 0528     		cmp	r0, #5
 1904 0026 0DD0     		beq	.L117
 397:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (0u);
 1905              		.loc 1 397 8 is_stmt 1 view .LVU668
ARM GAS  /tmp/ccuUvpuw.s 			page 125


 397:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (0u);
 1906              		.loc 1 397 15 is_stmt 0 view .LVU669
 1907 0028 6623     		movs	r3, #102
 1908 002a 2B80     		strh	r3, [r5]	@ movhi
 398:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 1909              		.loc 1 398 9 is_stmt 1 view .LVU670
 398:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 1910              		.loc 1 398 16 is_stmt 0 view .LVU671
 1911 002c 0024     		movs	r4, #0
 1912              	.LVL181:
 1913              	.L113:
 448:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 1914              		.loc 1 448 1 view .LVU672
 1915 002e 2046     		mov	r0, r4
 1916 0030 04B0     		add	sp, sp, #16
 1917              	.LCFI25:
 1918              		.cfi_remember_state
 1919              		.cfi_def_cfa_offset 32
 1920              		@ sp needed
 1921 0032 BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, r10, pc}
 1922              	.LVL182:
 1923              	.L124:
 1924              	.LCFI26:
 1925              		.cfi_restore_state
 385:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 1926              		.loc 1 385 9 is_stmt 1 view .LVU673
 385:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 1927              		.loc 1 385 9 view .LVU674
 1928 0036 FFF7FEFF 		bl	CPU_SW_Exception
 1929              	.LVL183:
 385:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 1930              		.loc 1 385 9 is_stmt 0 view .LVU675
 1931 003a EAE7     		b	.L114
 1932              	.LVL184:
 1933              	.L125:
 391:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (0u);
 1934              		.loc 1 391 8 is_stmt 1 view .LVU676
 391:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (0u);
 1935              		.loc 1 391 15 is_stmt 0 view .LVU677
 1936 003c 6523     		movs	r3, #101
 1937 003e 2B80     		strh	r3, [r5]	@ movhi
 392:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 1938              		.loc 1 392 9 is_stmt 1 view .LVU678
 392:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 1939              		.loc 1 392 16 is_stmt 0 view .LVU679
 1940 0040 0024     		movs	r4, #0
 1941 0042 F4E7     		b	.L113
 1942              	.LVL185:
 1943              	.L117:
 401:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_ep       = USBD_EP_TblPtrs[dev_nbr][ep_phy_nbr];
 1944              		.loc 1 401 5 is_stmt 1 view .LVU680
 401:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_ep       = USBD_EP_TblPtrs[dev_nbr][ep_phy_nbr];
 1945              		.loc 1 401 18 is_stmt 0 view .LVU681
 1946 0044 06F00F00 		and	r0, r6, #15
 1947              	.LVL186:
 401:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_ep       = USBD_EP_TblPtrs[dev_nbr][ep_phy_nbr];
 1948              		.loc 1 401 18 view .LVU682
ARM GAS  /tmp/ccuUvpuw.s 			page 126


 1949 0048 F309     		lsrs	r3, r6, #7
 401:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_ep       = USBD_EP_TblPtrs[dev_nbr][ep_phy_nbr];
 1950              		.loc 1 401 16 view .LVU683
 1951 004a 03EB4000 		add	r0, r3, r0, lsl #1
 1952              	.LVL187:
 402:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 1953              		.loc 1 402 5 is_stmt 1 view .LVU684
 402:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 1954              		.loc 1 402 16 is_stmt 0 view .LVU685
 1955 004e 00EB4414 		add	r4, r0, r4, lsl #5
 1956 0052 244B     		ldr	r3, .L128
 1957 0054 53F82470 		ldr	r7, [r3, r4, lsl #2]
 1958              	.LVL188:
 404:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_EP_INVALID_ADDR;
 1959              		.loc 1 404 5 is_stmt 1 view .LVU686
 404:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_EP_INVALID_ADDR;
 1960              		.loc 1 404 8 is_stmt 0 view .LVU687
 1961 0058 47B3     		cbz	r7, .L126
 409:rtos/uC-USB-Device/Source/usbd_ep.c ****                            p_ep->Ix,
 1962              		.loc 1 409 5 is_stmt 1 view .LVU688
 1963 005a 2B46     		mov	r3, r5
 1964 005c 0022     		movs	r2, #0
 1965 005e 397A     		ldrb	r1, [r7, #8]	@ zero_extendqisi2
 1966 0060 99F80000 		ldrb	r0, [r9]	@ zero_extendqisi2
 1967              	.LVL189:
 409:rtos/uC-USB-Device/Source/usbd_ep.c ****                            p_ep->Ix,
 1968              		.loc 1 409 5 is_stmt 0 view .LVU689
 1969 0064 FFF7FEFF 		bl	USBD_OS_EP_LockAcquire
 1970              	.LVL190:
 413:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (0u);
 1971              		.loc 1 413 5 is_stmt 1 view .LVU690
 413:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (0u);
 1972              		.loc 1 413 9 is_stmt 0 view .LVU691
 1973 0068 2B88     		ldrh	r3, [r5]
 413:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (0u);
 1974              		.loc 1 413 8 view .LVU692
 1975 006a 002B     		cmp	r3, #0
 1976 006c 37D1     		bne	.L122
 417:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_OS_EP_LockRelease(p_drv->DevNbr,
 1977              		.loc 1 417 5 is_stmt 1 view .LVU693
 417:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_OS_EP_LockRelease(p_drv->DevNbr,
 1978              		.loc 1 417 13 is_stmt 0 view .LVU694
 1979 006e 3B78     		ldrb	r3, [r7]	@ zero_extendqisi2
 417:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_OS_EP_LockRelease(p_drv->DevNbr,
 1980              		.loc 1 417 8 view .LVU695
 1981 0070 012B     		cmp	r3, #1
 1982 0072 20D1     		bne	.L127
 425:rtos/uC-USB-Device/Source/usbd_ep.c ****         ((ep_addr      & USBD_EP_DIR_MASK)  != USBD_EP_DIR_OUT)) {
 1983              		.loc 1 425 5 is_stmt 1 view .LVU696
 425:rtos/uC-USB-Device/Source/usbd_ep.c ****         ((ep_addr      & USBD_EP_DIR_MASK)  != USBD_EP_DIR_OUT)) {
 1984              		.loc 1 425 15 is_stmt 0 view .LVU697
 1985 0074 FB78     		ldrb	r3, [r7, #3]	@ zero_extendqisi2
 425:rtos/uC-USB-Device/Source/usbd_ep.c ****         ((ep_addr      & USBD_EP_DIR_MASK)  != USBD_EP_DIR_OUT)) {
 1986              		.loc 1 425 8 view .LVU698
 1987 0076 03F00303 		and	r3, r3, #3
 1988 007a 022B     		cmp	r3, #2
 1989 007c 25D1     		bne	.L120
ARM GAS  /tmp/ccuUvpuw.s 			page 127


 425:rtos/uC-USB-Device/Source/usbd_ep.c ****         ((ep_addr      & USBD_EP_DIR_MASK)  != USBD_EP_DIR_OUT)) {
 1990              		.loc 1 425 67 discriminator 1 view .LVU699
 1991 007e 16F0800F 		tst	r6, #128
 1992 0082 22D1     		bne	.L120
 433:rtos/uC-USB-Device/Source/usbd_ep.c ****                                            p_ep,
 1993              		.loc 1 433 5 is_stmt 1 view .LVU700
 433:rtos/uC-USB-Device/Source/usbd_ep.c ****                                            p_ep,
 1994              		.loc 1 433 16 is_stmt 0 view .LVU701
 1995 0084 0395     		str	r5, [sp, #12]
 1996 0086 BDF83030 		ldrh	r3, [sp, #48]
 1997 008a 0293     		str	r3, [sp, #8]
 1998 008c 0023     		movs	r3, #0
 1999 008e 0193     		str	r3, [sp, #4]
 2000 0090 0093     		str	r3, [sp]
 2001 0092 4346     		mov	r3, r8
 2002 0094 5246     		mov	r2, r10
 2003 0096 3946     		mov	r1, r7
 2004 0098 4846     		mov	r0, r9
 2005 009a FFF7FEFF 		bl	USBD_EP_Rx
 2006              	.LVL191:
 2007 009e 0446     		mov	r4, r0
 2008              	.LVL192:
 442:rtos/uC-USB-Device/Source/usbd_ep.c ****                            p_ep->Ix);
 2009              		.loc 1 442 5 is_stmt 1 view .LVU702
 2010 00a0 397A     		ldrb	r1, [r7, #8]	@ zero_extendqisi2
 2011 00a2 99F80000 		ldrb	r0, [r9]	@ zero_extendqisi2
 2012              	.LVL193:
 442:rtos/uC-USB-Device/Source/usbd_ep.c ****                            p_ep->Ix);
 2013              		.loc 1 442 5 is_stmt 0 view .LVU703
 2014 00a6 FFF7FEFF 		bl	USBD_OS_EP_LockRelease
 2015              	.LVL194:
 445:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 2016              		.loc 1 445 93 is_stmt 1 view .LVU704
 447:rtos/uC-USB-Device/Source/usbd_ep.c **** }
 2017              		.loc 1 447 5 view .LVU705
 447:rtos/uC-USB-Device/Source/usbd_ep.c **** }
 2018              		.loc 1 447 12 is_stmt 0 view .LVU706
 2019 00aa C0E7     		b	.L113
 2020              	.LVL195:
 2021              	.L126:
 405:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (0u);
 2022              		.loc 1 405 8 is_stmt 1 view .LVU707
 405:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (0u);
 2023              		.loc 1 405 15 is_stmt 0 view .LVU708
 2024 00ac 40F29113 		movw	r3, #401
 2025 00b0 2B80     		strh	r3, [r5]	@ movhi
 406:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 2026              		.loc 1 406 9 is_stmt 1 view .LVU709
 406:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 2027              		.loc 1 406 16 is_stmt 0 view .LVU710
 2028 00b2 0024     		movs	r4, #0
 2029 00b4 BBE7     		b	.L113
 2030              	.LVL196:
 2031              	.L127:
 418:rtos/uC-USB-Device/Source/usbd_ep.c ****                                p_ep->Ix);
 2032              		.loc 1 418 9 is_stmt 1 view .LVU711
 2033 00b6 397A     		ldrb	r1, [r7, #8]	@ zero_extendqisi2
ARM GAS  /tmp/ccuUvpuw.s 			page 128


 2034 00b8 99F80000 		ldrb	r0, [r9]	@ zero_extendqisi2
 2035 00bc FFF7FEFF 		bl	USBD_OS_EP_LockRelease
 2036              	.LVL197:
 420:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (0u);
 2037              		.loc 1 420 8 view .LVU712
 420:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (0u);
 2038              		.loc 1 420 15 is_stmt 0 view .LVU713
 2039 00c0 4FF4C973 		mov	r3, #402
 2040 00c4 2B80     		strh	r3, [r5]	@ movhi
 421:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 2041              		.loc 1 421 9 is_stmt 1 view .LVU714
 421:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 2042              		.loc 1 421 16 is_stmt 0 view .LVU715
 2043 00c6 0024     		movs	r4, #0
 2044 00c8 B1E7     		b	.L113
 2045              	.L120:
 427:rtos/uC-USB-Device/Source/usbd_ep.c ****                                p_ep->Ix);
 2046              		.loc 1 427 9 is_stmt 1 view .LVU716
 2047 00ca 397A     		ldrb	r1, [r7, #8]	@ zero_extendqisi2
 2048 00cc 99F80000 		ldrb	r0, [r9]	@ zero_extendqisi2
 2049 00d0 FFF7FEFF 		bl	USBD_OS_EP_LockRelease
 2050              	.LVL198:
 429:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (0u);
 2051              		.loc 1 429 8 view .LVU717
 429:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (0u);
 2052              		.loc 1 429 15 is_stmt 0 view .LVU718
 2053 00d4 40F29313 		movw	r3, #403
 2054 00d8 2B80     		strh	r3, [r5]	@ movhi
 430:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 2055              		.loc 1 430 9 is_stmt 1 view .LVU719
 430:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 2056              		.loc 1 430 16 is_stmt 0 view .LVU720
 2057 00da 0024     		movs	r4, #0
 2058 00dc A7E7     		b	.L113
 2059              	.L122:
 414:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 2060              		.loc 1 414 16 view .LVU721
 2061 00de 0024     		movs	r4, #0
 2062 00e0 A5E7     		b	.L113
 2063              	.L129:
 2064 00e2 00BF     		.align	2
 2065              	.L128:
 2066 00e4 00000000 		.word	.LANCHOR1
 2067              		.cfi_endproc
 2068              	.LFE0:
 2070              		.section	.text.USBD_BulkRxAsync,"ax",%progbits
 2071              		.align	1
 2072              		.global	USBD_BulkRxAsync
 2073              		.syntax unified
 2074              		.thumb
 2075              		.thumb_func
 2076              		.fpu fpv4-sp-d16
 2078              	USBD_BulkRxAsync:
 2079              	.LVL199:
 2080              	.LFB1:
 499:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_EP         *p_ep;
 2081              		.loc 1 499 1 is_stmt 1 view -0
ARM GAS  /tmp/ccuUvpuw.s 			page 129


 2082              		.cfi_startproc
 2083              		@ args = 12, pretend = 0, frame = 0
 2084              		@ frame_needed = 0, uses_anonymous_args = 0
 499:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_EP         *p_ep;
 2085              		.loc 1 499 1 is_stmt 0 view .LVU723
 2086 0000 2DE9F047 		push	{r4, r5, r6, r7, r8, r9, r10, lr}
 2087              	.LCFI27:
 2088              		.cfi_def_cfa_offset 32
 2089              		.cfi_offset 4, -32
 2090              		.cfi_offset 5, -28
 2091              		.cfi_offset 6, -24
 2092              		.cfi_offset 7, -20
 2093              		.cfi_offset 8, -16
 2094              		.cfi_offset 9, -12
 2095              		.cfi_offset 10, -8
 2096              		.cfi_offset 14, -4
 2097 0004 84B0     		sub	sp, sp, #16
 2098              	.LCFI28:
 2099              		.cfi_def_cfa_offset 48
 2100 0006 0446     		mov	r4, r0
 2101 0008 0E46     		mov	r6, r1
 2102 000a 9146     		mov	r9, r2
 2103 000c 9846     		mov	r8, r3
 2104 000e 0C9F     		ldr	r7, [sp, #48]
 2105 0010 0E9D     		ldr	r5, [sp, #56]
 500:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DRV        *p_drv;
 2106              		.loc 1 500 5 is_stmt 1 view .LVU724
 501:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DEV_STATE   state;
 2107              		.loc 1 501 5 view .LVU725
 502:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_INT08U       ep_phy_nbr;
 2108              		.loc 1 502 5 view .LVU726
 503:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 2109              		.loc 1 503 5 view .LVU727
 506:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 2110              		.loc 1 506 56 view .LVU728
 509:rtos/uC-USB-Device/Source/usbd_ep.c ****         CPU_SW_EXCEPTION(;);
 2111              		.loc 1 509 5 view .LVU729
 509:rtos/uC-USB-Device/Source/usbd_ep.c ****         CPU_SW_EXCEPTION(;);
 2112              		.loc 1 509 8 is_stmt 0 view .LVU730
 2113 0012 75B1     		cbz	r5, .L141
 2114              	.LVL200:
 2115              	.L131:
 510:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 2116              		.loc 1 510 9 is_stmt 1 discriminator 1 view .LVU731
 513:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_NULL_PTR;
 2117              		.loc 1 513 5 discriminator 1 view .LVU732
 513:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_NULL_PTR;
 2118              		.loc 1 513 8 is_stmt 0 discriminator 1 view .LVU733
 2119 0014 87B1     		cbz	r7, .L142
 519:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_drv == (USBD_DRV *)0) {
 2120              		.loc 1 519 5 is_stmt 1 view .LVU734
 519:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_drv == (USBD_DRV *)0) {
 2121              		.loc 1 519 13 is_stmt 0 view .LVU735
 2122 0016 2046     		mov	r0, r4
 2123 0018 FFF7FEFF 		bl	USBD_DrvRefGet
 2124              	.LVL201:
 520:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_DEV_INVALID_NBR;
ARM GAS  /tmp/ccuUvpuw.s 			page 130


 2125              		.loc 1 520 5 is_stmt 1 view .LVU736
 520:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_DEV_INVALID_NBR;
 2126              		.loc 1 520 8 is_stmt 0 view .LVU737
 2127 001c 8246     		mov	r10, r0
 2128 001e 80B1     		cbz	r0, .L143
 525:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (state != USBD_DEV_STATE_CONFIGURED) {                   /* EP transfers are ONLY allowed in
 2129              		.loc 1 525 5 is_stmt 1 view .LVU738
 525:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (state != USBD_DEV_STATE_CONFIGURED) {                   /* EP transfers are ONLY allowed in
 2130              		.loc 1 525 13 is_stmt 0 view .LVU739
 2131 0020 2946     		mov	r1, r5
 2132 0022 2046     		mov	r0, r4
 2133              	.LVL202:
 525:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (state != USBD_DEV_STATE_CONFIGURED) {                   /* EP transfers are ONLY allowed in
 2134              		.loc 1 525 13 view .LVU740
 2135 0024 FFF7FEFF 		bl	USBD_DevStateGet
 2136              	.LVL203:
 526:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_DEV_INVALID_STATE;
 2137              		.loc 1 526 5 is_stmt 1 view .LVU741
 526:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_DEV_INVALID_STATE;
 2138              		.loc 1 526 8 is_stmt 0 view .LVU742
 2139 0028 0528     		cmp	r0, #5
 2140 002a 0DD0     		beq	.L135
 527:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 2141              		.loc 1 527 8 is_stmt 1 view .LVU743
 527:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 2142              		.loc 1 527 15 is_stmt 0 view .LVU744
 2143 002c 6623     		movs	r3, #102
 2144 002e 2B80     		strh	r3, [r5]	@ movhi
 528:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 2145              		.loc 1 528 9 is_stmt 1 view .LVU745
 2146 0030 04E0     		b	.L130
 2147              	.LVL204:
 2148              	.L141:
 510:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 2149              		.loc 1 510 9 view .LVU746
 510:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 2150              		.loc 1 510 9 view .LVU747
 2151 0032 FFF7FEFF 		bl	CPU_SW_Exception
 2152              	.LVL205:
 510:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 2153              		.loc 1 510 9 is_stmt 0 view .LVU748
 2154 0036 EDE7     		b	.L131
 2155              	.L142:
 514:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 2156              		.loc 1 514 8 is_stmt 1 view .LVU749
 514:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 2157              		.loc 1 514 15 is_stmt 0 view .LVU750
 2158 0038 0523     		movs	r3, #5
 2159 003a 2B80     		strh	r3, [r5]	@ movhi
 515:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 2160              		.loc 1 515 9 is_stmt 1 view .LVU751
 2161              	.L130:
 576:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 2162              		.loc 1 576 1 is_stmt 0 view .LVU752
 2163 003c 04B0     		add	sp, sp, #16
 2164              	.LCFI29:
 2165              		.cfi_remember_state
ARM GAS  /tmp/ccuUvpuw.s 			page 131


 2166              		.cfi_def_cfa_offset 32
 2167              		@ sp needed
 2168 003e BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, r10, pc}
 2169              	.LVL206:
 2170              	.L143:
 2171              	.LCFI30:
 2172              		.cfi_restore_state
 521:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 2173              		.loc 1 521 8 is_stmt 1 view .LVU753
 521:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 2174              		.loc 1 521 15 is_stmt 0 view .LVU754
 2175 0042 6523     		movs	r3, #101
 2176 0044 2B80     		strh	r3, [r5]	@ movhi
 522:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 2177              		.loc 1 522 9 is_stmt 1 view .LVU755
 2178 0046 F9E7     		b	.L130
 2179              	.LVL207:
 2180              	.L135:
 531:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_ep       = USBD_EP_TblPtrs[dev_nbr][ep_phy_nbr];
 2181              		.loc 1 531 5 view .LVU756
 531:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_ep       = USBD_EP_TblPtrs[dev_nbr][ep_phy_nbr];
 2182              		.loc 1 531 18 is_stmt 0 view .LVU757
 2183 0048 06F00F00 		and	r0, r6, #15
 2184              	.LVL208:
 531:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_ep       = USBD_EP_TblPtrs[dev_nbr][ep_phy_nbr];
 2185              		.loc 1 531 18 view .LVU758
 2186 004c F309     		lsrs	r3, r6, #7
 531:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_ep       = USBD_EP_TblPtrs[dev_nbr][ep_phy_nbr];
 2187              		.loc 1 531 16 view .LVU759
 2188 004e 03EB4000 		add	r0, r3, r0, lsl #1
 2189              	.LVL209:
 532:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 2190              		.loc 1 532 5 is_stmt 1 view .LVU760
 532:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 2191              		.loc 1 532 16 is_stmt 0 view .LVU761
 2192 0052 00EB4414 		add	r4, r0, r4, lsl #5
 2193 0056 204B     		ldr	r3, .L146
 2194 0058 53F82440 		ldr	r4, [r3, r4, lsl #2]
 2195              	.LVL210:
 534:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_EP_INVALID_ADDR;
 2196              		.loc 1 534 5 is_stmt 1 view .LVU762
 534:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_EP_INVALID_ADDR;
 2197              		.loc 1 534 8 is_stmt 0 view .LVU763
 2198 005c 34B3     		cbz	r4, .L144
 539:rtos/uC-USB-Device/Source/usbd_ep.c ****                            p_ep->Ix,
 2199              		.loc 1 539 5 is_stmt 1 view .LVU764
 2200 005e 2B46     		mov	r3, r5
 2201 0060 0022     		movs	r2, #0
 2202 0062 217A     		ldrb	r1, [r4, #8]	@ zero_extendqisi2
 2203 0064 9AF80000 		ldrb	r0, [r10]	@ zero_extendqisi2
 2204              	.LVL211:
 539:rtos/uC-USB-Device/Source/usbd_ep.c ****                            p_ep->Ix,
 2205              		.loc 1 539 5 is_stmt 0 view .LVU765
 2206 0068 FFF7FEFF 		bl	USBD_OS_EP_LockAcquire
 2207              	.LVL212:
 543:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 2208              		.loc 1 543 5 is_stmt 1 view .LVU766
ARM GAS  /tmp/ccuUvpuw.s 			page 132


 543:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 2209              		.loc 1 543 9 is_stmt 0 view .LVU767
 2210 006c 2B88     		ldrh	r3, [r5]
 543:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 2211              		.loc 1 543 8 view .LVU768
 2212 006e 002B     		cmp	r3, #0
 2213 0070 E4D1     		bne	.L130
 547:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_OS_EP_LockRelease(p_drv->DevNbr,
 2214              		.loc 1 547 5 is_stmt 1 view .LVU769
 547:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_OS_EP_LockRelease(p_drv->DevNbr,
 2215              		.loc 1 547 13 is_stmt 0 view .LVU770
 2216 0072 2378     		ldrb	r3, [r4]	@ zero_extendqisi2
 547:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_OS_EP_LockRelease(p_drv->DevNbr,
 2217              		.loc 1 547 8 view .LVU771
 2218 0074 012B     		cmp	r3, #1
 2219 0076 1DD1     		bne	.L145
 555:rtos/uC-USB-Device/Source/usbd_ep.c ****         ((ep_addr      & USBD_EP_DIR_MASK)  != USBD_EP_DIR_OUT)) {
 2220              		.loc 1 555 5 is_stmt 1 view .LVU772
 555:rtos/uC-USB-Device/Source/usbd_ep.c ****         ((ep_addr      & USBD_EP_DIR_MASK)  != USBD_EP_DIR_OUT)) {
 2221              		.loc 1 555 15 is_stmt 0 view .LVU773
 2222 0078 E378     		ldrb	r3, [r4, #3]	@ zero_extendqisi2
 555:rtos/uC-USB-Device/Source/usbd_ep.c ****         ((ep_addr      & USBD_EP_DIR_MASK)  != USBD_EP_DIR_OUT)) {
 2223              		.loc 1 555 8 view .LVU774
 2224 007a 03F00303 		and	r3, r3, #3
 2225 007e 022B     		cmp	r3, #2
 2226 0080 21D1     		bne	.L138
 555:rtos/uC-USB-Device/Source/usbd_ep.c ****         ((ep_addr      & USBD_EP_DIR_MASK)  != USBD_EP_DIR_OUT)) {
 2227              		.loc 1 555 67 discriminator 1 view .LVU775
 2228 0082 16F0800F 		tst	r6, #128
 2229 0086 1ED1     		bne	.L138
 563:rtos/uC-USB-Device/Source/usbd_ep.c ****                      p_ep,
 2230              		.loc 1 563 5 is_stmt 1 view .LVU776
 563:rtos/uC-USB-Device/Source/usbd_ep.c ****                      p_ep,
 2231              		.loc 1 563 11 is_stmt 0 view .LVU777
 2232 0088 0395     		str	r5, [sp, #12]
 2233 008a 0023     		movs	r3, #0
 2234 008c 0293     		str	r3, [sp, #8]
 2235 008e 0D9B     		ldr	r3, [sp, #52]
 2236 0090 0193     		str	r3, [sp, #4]
 2237 0092 0097     		str	r7, [sp]
 2238 0094 4346     		mov	r3, r8
 2239 0096 4A46     		mov	r2, r9
 2240 0098 2146     		mov	r1, r4
 2241 009a 5046     		mov	r0, r10
 2242 009c FFF7FEFF 		bl	USBD_EP_Rx
 2243              	.LVL213:
 572:rtos/uC-USB-Device/Source/usbd_ep.c ****                            p_ep->Ix);
 2244              		.loc 1 572 5 is_stmt 1 view .LVU778
 2245 00a0 217A     		ldrb	r1, [r4, #8]	@ zero_extendqisi2
 2246 00a2 9AF80000 		ldrb	r0, [r10]	@ zero_extendqisi2
 2247 00a6 FFF7FEFF 		bl	USBD_OS_EP_LockRelease
 2248              	.LVL214:
 575:rtos/uC-USB-Device/Source/usbd_ep.c **** }
 2249              		.loc 1 575 94 view .LVU779
 2250 00aa C7E7     		b	.L130
 2251              	.LVL215:
 2252              	.L144:
ARM GAS  /tmp/ccuUvpuw.s 			page 133


 535:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 2253              		.loc 1 535 8 view .LVU780
 535:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 2254              		.loc 1 535 15 is_stmt 0 view .LVU781
 2255 00ac 40F29113 		movw	r3, #401
 2256 00b0 2B80     		strh	r3, [r5]	@ movhi
 536:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 2257              		.loc 1 536 9 is_stmt 1 view .LVU782
 2258 00b2 C3E7     		b	.L130
 2259              	.LVL216:
 2260              	.L145:
 548:rtos/uC-USB-Device/Source/usbd_ep.c ****                                p_ep->Ix);
 2261              		.loc 1 548 9 view .LVU783
 2262 00b4 217A     		ldrb	r1, [r4, #8]	@ zero_extendqisi2
 2263 00b6 9AF80000 		ldrb	r0, [r10]	@ zero_extendqisi2
 2264 00ba FFF7FEFF 		bl	USBD_OS_EP_LockRelease
 2265              	.LVL217:
 550:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 2266              		.loc 1 550 8 view .LVU784
 550:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 2267              		.loc 1 550 15 is_stmt 0 view .LVU785
 2268 00be 4FF4C973 		mov	r3, #402
 2269 00c2 2B80     		strh	r3, [r5]	@ movhi
 551:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 2270              		.loc 1 551 9 is_stmt 1 view .LVU786
 2271 00c4 BAE7     		b	.L130
 2272              	.L138:
 557:rtos/uC-USB-Device/Source/usbd_ep.c ****                                p_ep->Ix);
 2273              		.loc 1 557 9 view .LVU787
 2274 00c6 217A     		ldrb	r1, [r4, #8]	@ zero_extendqisi2
 2275 00c8 9AF80000 		ldrb	r0, [r10]	@ zero_extendqisi2
 2276 00cc FFF7FEFF 		bl	USBD_OS_EP_LockRelease
 2277              	.LVL218:
 559:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 2278              		.loc 1 559 8 view .LVU788
 559:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 2279              		.loc 1 559 15 is_stmt 0 view .LVU789
 2280 00d0 40F29313 		movw	r3, #403
 2281 00d4 2B80     		strh	r3, [r5]	@ movhi
 560:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 2282              		.loc 1 560 9 is_stmt 1 view .LVU790
 2283 00d6 B1E7     		b	.L130
 2284              	.L147:
 2285              		.align	2
 2286              	.L146:
 2287 00d8 00000000 		.word	.LANCHOR1
 2288              		.cfi_endproc
 2289              	.LFE1:
 2291              		.section	.text.USBD_BulkTx,"ax",%progbits
 2292              		.align	1
 2293              		.global	USBD_BulkTx
 2294              		.syntax unified
 2295              		.thumb
 2296              		.thumb_func
 2297              		.fpu fpv4-sp-d16
 2299              	USBD_BulkTx:
 2300              	.LVL219:
ARM GAS  /tmp/ccuUvpuw.s 			page 134


 2301              	.LFB2:
 633:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_EP         *p_ep;
 2302              		.loc 1 633 1 view -0
 2303              		.cfi_startproc
 2304              		@ args = 12, pretend = 0, frame = 0
 2305              		@ frame_needed = 0, uses_anonymous_args = 0
 633:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_EP         *p_ep;
 2306              		.loc 1 633 1 is_stmt 0 view .LVU792
 2307 0000 2DE9F047 		push	{r4, r5, r6, r7, r8, r9, r10, lr}
 2308              	.LCFI31:
 2309              		.cfi_def_cfa_offset 32
 2310              		.cfi_offset 4, -32
 2311              		.cfi_offset 5, -28
 2312              		.cfi_offset 6, -24
 2313              		.cfi_offset 7, -20
 2314              		.cfi_offset 8, -16
 2315              		.cfi_offset 9, -12
 2316              		.cfi_offset 10, -8
 2317              		.cfi_offset 14, -4
 2318 0004 86B0     		sub	sp, sp, #24
 2319              	.LCFI32:
 2320              		.cfi_def_cfa_offset 56
 2321 0006 0446     		mov	r4, r0
 2322 0008 0E46     		mov	r6, r1
 2323 000a 9246     		mov	r10, r2
 2324 000c 9846     		mov	r8, r3
 2325 000e 109D     		ldr	r5, [sp, #64]
 634:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DRV        *p_drv;
 2326              		.loc 1 634 5 is_stmt 1 view .LVU793
 635:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DEV_STATE   state;
 2327              		.loc 1 635 5 view .LVU794
 636:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_INT32U       xfer_len;
 2328              		.loc 1 636 5 view .LVU795
 637:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_INT08U       ep_phy_nbr;
 2329              		.loc 1 637 5 view .LVU796
 638:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 2330              		.loc 1 638 5 view .LVU797
 641:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 2331              		.loc 1 641 55 view .LVU798
 644:rtos/uC-USB-Device/Source/usbd_ep.c ****         CPU_SW_EXCEPTION(0);
 2332              		.loc 1 644 5 view .LVU799
 644:rtos/uC-USB-Device/Source/usbd_ep.c ****         CPU_SW_EXCEPTION(0);
 2333              		.loc 1 644 8 is_stmt 0 view .LVU800
 2334 0010 8DB1     		cbz	r5, .L159
 2335              	.LVL220:
 2336              	.L149:
 645:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 2337              		.loc 1 645 9 is_stmt 1 discriminator 1 view .LVU801
 649:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_drv == (USBD_DRV *)0) {
 2338              		.loc 1 649 5 discriminator 1 view .LVU802
 649:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_drv == (USBD_DRV *)0) {
 2339              		.loc 1 649 13 is_stmt 0 discriminator 1 view .LVU803
 2340 0012 2046     		mov	r0, r4
 2341 0014 FFF7FEFF 		bl	USBD_DrvRefGet
 2342              	.LVL221:
 650:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_DEV_INVALID_NBR;
 2343              		.loc 1 650 5 is_stmt 1 discriminator 1 view .LVU804
ARM GAS  /tmp/ccuUvpuw.s 			page 135


 650:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_DEV_INVALID_NBR;
 2344              		.loc 1 650 8 is_stmt 0 discriminator 1 view .LVU805
 2345 0018 8146     		mov	r9, r0
 2346 001a 78B1     		cbz	r0, .L160
 655:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (state != USBD_DEV_STATE_CONFIGURED) {                   /* EP transfers are ONLY allowed in
 2347              		.loc 1 655 5 is_stmt 1 view .LVU806
 655:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (state != USBD_DEV_STATE_CONFIGURED) {                   /* EP transfers are ONLY allowed in
 2348              		.loc 1 655 13 is_stmt 0 view .LVU807
 2349 001c 2946     		mov	r1, r5
 2350 001e 2046     		mov	r0, r4
 2351              	.LVL222:
 655:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (state != USBD_DEV_STATE_CONFIGURED) {                   /* EP transfers are ONLY allowed in
 2352              		.loc 1 655 13 view .LVU808
 2353 0020 FFF7FEFF 		bl	USBD_DevStateGet
 2354              	.LVL223:
 656:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_DEV_INVALID_STATE;
 2355              		.loc 1 656 5 is_stmt 1 view .LVU809
 656:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_DEV_INVALID_STATE;
 2356              		.loc 1 656 8 is_stmt 0 view .LVU810
 2357 0024 0528     		cmp	r0, #5
 2358 0026 0DD0     		beq	.L152
 657:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (0u);
 2359              		.loc 1 657 8 is_stmt 1 view .LVU811
 657:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (0u);
 2360              		.loc 1 657 15 is_stmt 0 view .LVU812
 2361 0028 6623     		movs	r3, #102
 2362 002a 2B80     		strh	r3, [r5]	@ movhi
 658:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 2363              		.loc 1 658 9 is_stmt 1 view .LVU813
 658:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 2364              		.loc 1 658 16 is_stmt 0 view .LVU814
 2365 002c 0024     		movs	r4, #0
 2366              	.LVL224:
 2367              	.L148:
 708:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 2368              		.loc 1 708 1 view .LVU815
 2369 002e 2046     		mov	r0, r4
 2370 0030 06B0     		add	sp, sp, #24
 2371              	.LCFI33:
 2372              		.cfi_remember_state
 2373              		.cfi_def_cfa_offset 32
 2374              		@ sp needed
 2375 0032 BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, r10, pc}
 2376              	.LVL225:
 2377              	.L159:
 2378              	.LCFI34:
 2379              		.cfi_restore_state
 645:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 2380              		.loc 1 645 9 is_stmt 1 view .LVU816
 645:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 2381              		.loc 1 645 9 view .LVU817
 2382 0036 FFF7FEFF 		bl	CPU_SW_Exception
 2383              	.LVL226:
 645:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 2384              		.loc 1 645 9 is_stmt 0 view .LVU818
 2385 003a EAE7     		b	.L149
 2386              	.LVL227:
ARM GAS  /tmp/ccuUvpuw.s 			page 136


 2387              	.L160:
 651:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (0u);
 2388              		.loc 1 651 8 is_stmt 1 view .LVU819
 651:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (0u);
 2389              		.loc 1 651 15 is_stmt 0 view .LVU820
 2390 003c 6523     		movs	r3, #101
 2391 003e 2B80     		strh	r3, [r5]	@ movhi
 652:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 2392              		.loc 1 652 9 is_stmt 1 view .LVU821
 652:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 2393              		.loc 1 652 16 is_stmt 0 view .LVU822
 2394 0040 0024     		movs	r4, #0
 2395 0042 F4E7     		b	.L148
 2396              	.LVL228:
 2397              	.L152:
 661:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_ep       = USBD_EP_TblPtrs[dev_nbr][ep_phy_nbr];
 2398              		.loc 1 661 5 is_stmt 1 view .LVU823
 661:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_ep       = USBD_EP_TblPtrs[dev_nbr][ep_phy_nbr];
 2399              		.loc 1 661 18 is_stmt 0 view .LVU824
 2400 0044 06F00F00 		and	r0, r6, #15
 2401              	.LVL229:
 661:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_ep       = USBD_EP_TblPtrs[dev_nbr][ep_phy_nbr];
 2402              		.loc 1 661 18 view .LVU825
 2403 0048 F309     		lsrs	r3, r6, #7
 661:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_ep       = USBD_EP_TblPtrs[dev_nbr][ep_phy_nbr];
 2404              		.loc 1 661 16 view .LVU826
 2405 004a 03EB4000 		add	r0, r3, r0, lsl #1
 2406              	.LVL230:
 662:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 2407              		.loc 1 662 5 is_stmt 1 view .LVU827
 662:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 2408              		.loc 1 662 16 is_stmt 0 view .LVU828
 2409 004e 00EB4414 		add	r4, r0, r4, lsl #5
 2410 0052 254B     		ldr	r3, .L163
 2411 0054 53F82470 		ldr	r7, [r3, r4, lsl #2]
 2412              	.LVL231:
 664:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_EP_INVALID_ADDR;
 2413              		.loc 1 664 5 is_stmt 1 view .LVU829
 664:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_EP_INVALID_ADDR;
 2414              		.loc 1 664 8 is_stmt 0 view .LVU830
 2415 0058 F7B1     		cbz	r7, .L161
 669:rtos/uC-USB-Device/Source/usbd_ep.c ****                            p_ep->Ix,
 2416              		.loc 1 669 5 is_stmt 1 view .LVU831
 2417 005a 2B46     		mov	r3, r5
 2418 005c 0022     		movs	r2, #0
 2419 005e 397A     		ldrb	r1, [r7, #8]	@ zero_extendqisi2
 2420 0060 99F80000 		ldrb	r0, [r9]	@ zero_extendqisi2
 2421              	.LVL232:
 669:rtos/uC-USB-Device/Source/usbd_ep.c ****                            p_ep->Ix,
 2422              		.loc 1 669 5 is_stmt 0 view .LVU832
 2423 0064 FFF7FEFF 		bl	USBD_OS_EP_LockAcquire
 2424              	.LVL233:
 673:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (0u);
 2425              		.loc 1 673 5 is_stmt 1 view .LVU833
 673:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (0u);
 2426              		.loc 1 673 9 is_stmt 0 view .LVU834
 2427 0068 2B88     		ldrh	r3, [r5]
ARM GAS  /tmp/ccuUvpuw.s 			page 137


 673:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (0u);
 2428              		.loc 1 673 8 view .LVU835
 2429 006a 002B     		cmp	r3, #0
 2430 006c 3AD1     		bne	.L157
 677:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_OS_EP_LockRelease(p_drv->DevNbr,
 2431              		.loc 1 677 5 is_stmt 1 view .LVU836
 677:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_OS_EP_LockRelease(p_drv->DevNbr,
 2432              		.loc 1 677 13 is_stmt 0 view .LVU837
 2433 006e 3B78     		ldrb	r3, [r7]	@ zero_extendqisi2
 677:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_OS_EP_LockRelease(p_drv->DevNbr,
 2434              		.loc 1 677 8 view .LVU838
 2435 0070 012B     		cmp	r3, #1
 2436 0072 16D1     		bne	.L162
 684:rtos/uC-USB-Device/Source/usbd_ep.c ****         ((ep_addr      & USBD_EP_DIR_MASK)  != USBD_EP_DIR_IN)) {
 2437              		.loc 1 684 5 is_stmt 1 view .LVU839
 684:rtos/uC-USB-Device/Source/usbd_ep.c ****         ((ep_addr      & USBD_EP_DIR_MASK)  != USBD_EP_DIR_IN)) {
 2438              		.loc 1 684 15 is_stmt 0 view .LVU840
 2439 0074 FB78     		ldrb	r3, [r7, #3]	@ zero_extendqisi2
 684:rtos/uC-USB-Device/Source/usbd_ep.c ****         ((ep_addr      & USBD_EP_DIR_MASK)  != USBD_EP_DIR_IN)) {
 2440              		.loc 1 684 8 view .LVU841
 2441 0076 03F00303 		and	r3, r3, #3
 2442 007a 022B     		cmp	r3, #2
 2443 007c 02D1     		bne	.L155
 684:rtos/uC-USB-Device/Source/usbd_ep.c ****         ((ep_addr      & USBD_EP_DIR_MASK)  != USBD_EP_DIR_IN)) {
 2444              		.loc 1 684 67 discriminator 1 view .LVU842
 2445 007e 16F0800F 		tst	r6, #128
 2446 0082 18D1     		bne	.L156
 2447              	.L155:
 686:rtos/uC-USB-Device/Source/usbd_ep.c ****                                p_ep->Ix);
 2448              		.loc 1 686 9 is_stmt 1 view .LVU843
 2449 0084 397A     		ldrb	r1, [r7, #8]	@ zero_extendqisi2
 2450 0086 99F80000 		ldrb	r0, [r9]	@ zero_extendqisi2
 2451 008a FFF7FEFF 		bl	USBD_OS_EP_LockRelease
 2452              	.LVL234:
 688:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (0u);
 2453              		.loc 1 688 8 view .LVU844
 688:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (0u);
 2454              		.loc 1 688 15 is_stmt 0 view .LVU845
 2455 008e 40F29313 		movw	r3, #403
 2456 0092 2B80     		strh	r3, [r5]	@ movhi
 689:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 2457              		.loc 1 689 9 is_stmt 1 view .LVU846
 689:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 2458              		.loc 1 689 16 is_stmt 0 view .LVU847
 2459 0094 0024     		movs	r4, #0
 2460 0096 CAE7     		b	.L148
 2461              	.LVL235:
 2462              	.L161:
 665:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (0u);
 2463              		.loc 1 665 8 is_stmt 1 view .LVU848
 665:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (0u);
 2464              		.loc 1 665 15 is_stmt 0 view .LVU849
 2465 0098 40F29113 		movw	r3, #401
 2466 009c 2B80     		strh	r3, [r5]	@ movhi
 666:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 2467              		.loc 1 666 9 is_stmt 1 view .LVU850
 666:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
ARM GAS  /tmp/ccuUvpuw.s 			page 138


 2468              		.loc 1 666 16 is_stmt 0 view .LVU851
 2469 009e 0024     		movs	r4, #0
 2470 00a0 C5E7     		b	.L148
 2471              	.LVL236:
 2472              	.L162:
 678:rtos/uC-USB-Device/Source/usbd_ep.c ****                                p_ep->Ix);
 2473              		.loc 1 678 9 is_stmt 1 view .LVU852
 2474 00a2 397A     		ldrb	r1, [r7, #8]	@ zero_extendqisi2
 2475 00a4 99F80000 		ldrb	r0, [r9]	@ zero_extendqisi2
 2476 00a8 FFF7FEFF 		bl	USBD_OS_EP_LockRelease
 2477              	.LVL237:
 680:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (0u);
 2478              		.loc 1 680 8 view .LVU853
 680:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (0u);
 2479              		.loc 1 680 15 is_stmt 0 view .LVU854
 2480 00ac 4FF4C973 		mov	r3, #402
 2481 00b0 2B80     		strh	r3, [r5]	@ movhi
 681:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 2482              		.loc 1 681 9 is_stmt 1 view .LVU855
 681:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 2483              		.loc 1 681 16 is_stmt 0 view .LVU856
 2484 00b2 0024     		movs	r4, #0
 2485 00b4 BBE7     		b	.L148
 2486              	.L156:
 692:rtos/uC-USB-Device/Source/usbd_ep.c ****                                            p_ep,
 2487              		.loc 1 692 5 is_stmt 1 view .LVU857
 692:rtos/uC-USB-Device/Source/usbd_ep.c ****                                            p_ep,
 2488              		.loc 1 692 16 is_stmt 0 view .LVU858
 2489 00b6 0495     		str	r5, [sp, #16]
 2490 00b8 9DF83C30 		ldrb	r3, [sp, #60]	@ zero_extendqisi2
 2491 00bc 0393     		str	r3, [sp, #12]
 2492 00be BDF83830 		ldrh	r3, [sp, #56]
 2493 00c2 0293     		str	r3, [sp, #8]
 2494 00c4 0023     		movs	r3, #0
 2495 00c6 0193     		str	r3, [sp, #4]
 2496 00c8 0093     		str	r3, [sp]
 2497 00ca 4346     		mov	r3, r8
 2498 00cc 5246     		mov	r2, r10
 2499 00ce 3946     		mov	r1, r7
 2500 00d0 4846     		mov	r0, r9
 2501 00d2 FFF7FEFF 		bl	USBD_EP_Tx
 2502              	.LVL238:
 2503 00d6 0446     		mov	r4, r0
 2504              	.LVL239:
 702:rtos/uC-USB-Device/Source/usbd_ep.c ****                            p_ep->Ix);
 2505              		.loc 1 702 5 is_stmt 1 view .LVU859
 2506 00d8 397A     		ldrb	r1, [r7, #8]	@ zero_extendqisi2
 2507 00da 99F80000 		ldrb	r0, [r9]	@ zero_extendqisi2
 2508              	.LVL240:
 702:rtos/uC-USB-Device/Source/usbd_ep.c ****                            p_ep->Ix);
 2509              		.loc 1 702 5 is_stmt 0 view .LVU860
 2510 00de FFF7FEFF 		bl	USBD_OS_EP_LockRelease
 2511              	.LVL241:
 705:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 2512              		.loc 1 705 93 is_stmt 1 view .LVU861
 707:rtos/uC-USB-Device/Source/usbd_ep.c **** }
 2513              		.loc 1 707 5 view .LVU862
ARM GAS  /tmp/ccuUvpuw.s 			page 139


 707:rtos/uC-USB-Device/Source/usbd_ep.c **** }
 2514              		.loc 1 707 12 is_stmt 0 view .LVU863
 2515 00e2 A4E7     		b	.L148
 2516              	.LVL242:
 2517              	.L157:
 674:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 2518              		.loc 1 674 16 view .LVU864
 2519 00e4 0024     		movs	r4, #0
 2520 00e6 A2E7     		b	.L148
 2521              	.L164:
 2522              		.align	2
 2523              	.L163:
 2524 00e8 00000000 		.word	.LANCHOR1
 2525              		.cfi_endproc
 2526              	.LFE2:
 2528              		.section	.text.USBD_BulkTxAsync,"ax",%progbits
 2529              		.align	1
 2530              		.global	USBD_BulkTxAsync
 2531              		.syntax unified
 2532              		.thumb
 2533              		.thumb_func
 2534              		.fpu fpv4-sp-d16
 2536              	USBD_BulkTxAsync:
 2537              	.LVL243:
 2538              	.LFB3:
 765:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_EP         *p_ep;
 2539              		.loc 1 765 1 is_stmt 1 view -0
 2540              		.cfi_startproc
 2541              		@ args = 16, pretend = 0, frame = 0
 2542              		@ frame_needed = 0, uses_anonymous_args = 0
 765:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_EP         *p_ep;
 2543              		.loc 1 765 1 is_stmt 0 view .LVU866
 2544 0000 2DE9F047 		push	{r4, r5, r6, r7, r8, r9, r10, lr}
 2545              	.LCFI35:
 2546              		.cfi_def_cfa_offset 32
 2547              		.cfi_offset 4, -32
 2548              		.cfi_offset 5, -28
 2549              		.cfi_offset 6, -24
 2550              		.cfi_offset 7, -20
 2551              		.cfi_offset 8, -16
 2552              		.cfi_offset 9, -12
 2553              		.cfi_offset 10, -8
 2554              		.cfi_offset 14, -4
 2555 0004 86B0     		sub	sp, sp, #24
 2556              	.LCFI36:
 2557              		.cfi_def_cfa_offset 56
 2558 0006 0446     		mov	r4, r0
 2559 0008 0E46     		mov	r6, r1
 2560 000a 9146     		mov	r9, r2
 2561 000c 9846     		mov	r8, r3
 2562 000e 0E9F     		ldr	r7, [sp, #56]
 2563 0010 119D     		ldr	r5, [sp, #68]
 766:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DRV        *p_drv;
 2564              		.loc 1 766 5 is_stmt 1 view .LVU867
 767:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DEV_STATE   state;
 2565              		.loc 1 767 5 view .LVU868
 768:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_INT08U       ep_phy_nbr;
ARM GAS  /tmp/ccuUvpuw.s 			page 140


 2566              		.loc 1 768 5 view .LVU869
 769:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 2567              		.loc 1 769 5 view .LVU870
 772:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 2568              		.loc 1 772 56 view .LVU871
 775:rtos/uC-USB-Device/Source/usbd_ep.c ****         CPU_SW_EXCEPTION(;);
 2569              		.loc 1 775 5 view .LVU872
 775:rtos/uC-USB-Device/Source/usbd_ep.c ****         CPU_SW_EXCEPTION(;);
 2570              		.loc 1 775 8 is_stmt 0 view .LVU873
 2571 0012 75B1     		cbz	r5, .L176
 2572              	.LVL244:
 2573              	.L166:
 776:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 2574              		.loc 1 776 9 is_stmt 1 discriminator 1 view .LVU874
 779:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_NULL_PTR;
 2575              		.loc 1 779 5 discriminator 1 view .LVU875
 779:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_NULL_PTR;
 2576              		.loc 1 779 8 is_stmt 0 discriminator 1 view .LVU876
 2577 0014 87B1     		cbz	r7, .L177
 785:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_drv == (USBD_DRV *)0) {
 2578              		.loc 1 785 5 is_stmt 1 view .LVU877
 785:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_drv == (USBD_DRV *)0) {
 2579              		.loc 1 785 13 is_stmt 0 view .LVU878
 2580 0016 2046     		mov	r0, r4
 2581 0018 FFF7FEFF 		bl	USBD_DrvRefGet
 2582              	.LVL245:
 786:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_DEV_INVALID_NBR;
 2583              		.loc 1 786 5 is_stmt 1 view .LVU879
 786:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_DEV_INVALID_NBR;
 2584              		.loc 1 786 8 is_stmt 0 view .LVU880
 2585 001c 8246     		mov	r10, r0
 2586 001e 80B1     		cbz	r0, .L178
 791:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (state != USBD_DEV_STATE_CONFIGURED) {                   /* EP transfers are ONLY allowed in
 2587              		.loc 1 791 5 is_stmt 1 view .LVU881
 791:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (state != USBD_DEV_STATE_CONFIGURED) {                   /* EP transfers are ONLY allowed in
 2588              		.loc 1 791 13 is_stmt 0 view .LVU882
 2589 0020 2946     		mov	r1, r5
 2590 0022 2046     		mov	r0, r4
 2591              	.LVL246:
 791:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (state != USBD_DEV_STATE_CONFIGURED) {                   /* EP transfers are ONLY allowed in
 2592              		.loc 1 791 13 view .LVU883
 2593 0024 FFF7FEFF 		bl	USBD_DevStateGet
 2594              	.LVL247:
 792:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_DEV_INVALID_STATE;
 2595              		.loc 1 792 5 is_stmt 1 view .LVU884
 792:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_DEV_INVALID_STATE;
 2596              		.loc 1 792 8 is_stmt 0 view .LVU885
 2597 0028 0528     		cmp	r0, #5
 2598 002a 0DD0     		beq	.L170
 793:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 2599              		.loc 1 793 8 is_stmt 1 view .LVU886
 793:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 2600              		.loc 1 793 15 is_stmt 0 view .LVU887
 2601 002c 6623     		movs	r3, #102
 2602 002e 2B80     		strh	r3, [r5]	@ movhi
 794:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 2603              		.loc 1 794 9 is_stmt 1 view .LVU888
ARM GAS  /tmp/ccuUvpuw.s 			page 141


 2604 0030 04E0     		b	.L165
 2605              	.LVL248:
 2606              	.L176:
 776:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 2607              		.loc 1 776 9 view .LVU889
 776:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 2608              		.loc 1 776 9 view .LVU890
 2609 0032 FFF7FEFF 		bl	CPU_SW_Exception
 2610              	.LVL249:
 776:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 2611              		.loc 1 776 9 is_stmt 0 view .LVU891
 2612 0036 EDE7     		b	.L166
 2613              	.L177:
 780:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 2614              		.loc 1 780 8 is_stmt 1 view .LVU892
 780:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 2615              		.loc 1 780 15 is_stmt 0 view .LVU893
 2616 0038 0523     		movs	r3, #5
 2617 003a 2B80     		strh	r3, [r5]	@ movhi
 781:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 2618              		.loc 1 781 9 is_stmt 1 view .LVU894
 2619              	.L165:
 843:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 2620              		.loc 1 843 1 is_stmt 0 view .LVU895
 2621 003c 06B0     		add	sp, sp, #24
 2622              	.LCFI37:
 2623              		.cfi_remember_state
 2624              		.cfi_def_cfa_offset 32
 2625              		@ sp needed
 2626 003e BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, r10, pc}
 2627              	.LVL250:
 2628              	.L178:
 2629              	.LCFI38:
 2630              		.cfi_restore_state
 787:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 2631              		.loc 1 787 8 is_stmt 1 view .LVU896
 787:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 2632              		.loc 1 787 15 is_stmt 0 view .LVU897
 2633 0042 6523     		movs	r3, #101
 2634 0044 2B80     		strh	r3, [r5]	@ movhi
 788:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 2635              		.loc 1 788 9 is_stmt 1 view .LVU898
 2636 0046 F9E7     		b	.L165
 2637              	.LVL251:
 2638              	.L170:
 797:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_ep       = USBD_EP_TblPtrs[dev_nbr][ep_phy_nbr];
 2639              		.loc 1 797 5 view .LVU899
 797:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_ep       = USBD_EP_TblPtrs[dev_nbr][ep_phy_nbr];
 2640              		.loc 1 797 18 is_stmt 0 view .LVU900
 2641 0048 06F00F00 		and	r0, r6, #15
 2642              	.LVL252:
 797:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_ep       = USBD_EP_TblPtrs[dev_nbr][ep_phy_nbr];
 2643              		.loc 1 797 18 view .LVU901
 2644 004c F309     		lsrs	r3, r6, #7
 797:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_ep       = USBD_EP_TblPtrs[dev_nbr][ep_phy_nbr];
 2645              		.loc 1 797 16 view .LVU902
 2646 004e 03EB4000 		add	r0, r3, r0, lsl #1
ARM GAS  /tmp/ccuUvpuw.s 			page 142


 2647              	.LVL253:
 798:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 2648              		.loc 1 798 5 is_stmt 1 view .LVU903
 798:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 2649              		.loc 1 798 16 is_stmt 0 view .LVU904
 2650 0052 00EB4414 		add	r4, r0, r4, lsl #5
 2651 0056 224B     		ldr	r3, .L181
 2652 0058 53F82440 		ldr	r4, [r3, r4, lsl #2]
 2653              	.LVL254:
 800:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_EP_INVALID_ADDR;
 2654              		.loc 1 800 5 is_stmt 1 view .LVU905
 800:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_EP_INVALID_ADDR;
 2655              		.loc 1 800 8 is_stmt 0 view .LVU906
 2656 005c ECB1     		cbz	r4, .L179
 805:rtos/uC-USB-Device/Source/usbd_ep.c ****                            p_ep->Ix,
 2657              		.loc 1 805 5 is_stmt 1 view .LVU907
 2658 005e 2B46     		mov	r3, r5
 2659 0060 0022     		movs	r2, #0
 2660 0062 217A     		ldrb	r1, [r4, #8]	@ zero_extendqisi2
 2661 0064 9AF80000 		ldrb	r0, [r10]	@ zero_extendqisi2
 2662              	.LVL255:
 805:rtos/uC-USB-Device/Source/usbd_ep.c ****                            p_ep->Ix,
 2663              		.loc 1 805 5 is_stmt 0 view .LVU908
 2664 0068 FFF7FEFF 		bl	USBD_OS_EP_LockAcquire
 2665              	.LVL256:
 809:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 2666              		.loc 1 809 5 is_stmt 1 view .LVU909
 809:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 2667              		.loc 1 809 9 is_stmt 0 view .LVU910
 2668 006c 2B88     		ldrh	r3, [r5]
 809:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 2669              		.loc 1 809 8 view .LVU911
 2670 006e 002B     		cmp	r3, #0
 2671 0070 E4D1     		bne	.L165
 813:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_OS_EP_LockRelease(p_drv->DevNbr,
 2672              		.loc 1 813 5 is_stmt 1 view .LVU912
 813:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_OS_EP_LockRelease(p_drv->DevNbr,
 2673              		.loc 1 813 13 is_stmt 0 view .LVU913
 2674 0072 2378     		ldrb	r3, [r4]	@ zero_extendqisi2
 813:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_OS_EP_LockRelease(p_drv->DevNbr,
 2675              		.loc 1 813 8 view .LVU914
 2676 0074 012B     		cmp	r3, #1
 2677 0076 14D1     		bne	.L180
 821:rtos/uC-USB-Device/Source/usbd_ep.c ****         ((ep_addr      & USBD_EP_DIR_MASK)  != USBD_EP_DIR_IN)) {
 2678              		.loc 1 821 5 is_stmt 1 view .LVU915
 821:rtos/uC-USB-Device/Source/usbd_ep.c ****         ((ep_addr      & USBD_EP_DIR_MASK)  != USBD_EP_DIR_IN)) {
 2679              		.loc 1 821 15 is_stmt 0 view .LVU916
 2680 0078 E378     		ldrb	r3, [r4, #3]	@ zero_extendqisi2
 821:rtos/uC-USB-Device/Source/usbd_ep.c ****         ((ep_addr      & USBD_EP_DIR_MASK)  != USBD_EP_DIR_IN)) {
 2681              		.loc 1 821 8 view .LVU917
 2682 007a 03F00303 		and	r3, r3, #3
 2683 007e 022B     		cmp	r3, #2
 2684 0080 02D1     		bne	.L173
 821:rtos/uC-USB-Device/Source/usbd_ep.c ****         ((ep_addr      & USBD_EP_DIR_MASK)  != USBD_EP_DIR_IN)) {
 2685              		.loc 1 821 67 discriminator 1 view .LVU918
 2686 0082 16F0800F 		tst	r6, #128
 2687 0086 15D1     		bne	.L174
ARM GAS  /tmp/ccuUvpuw.s 			page 143


 2688              	.L173:
 823:rtos/uC-USB-Device/Source/usbd_ep.c ****                                p_ep->Ix);
 2689              		.loc 1 823 9 is_stmt 1 view .LVU919
 2690 0088 217A     		ldrb	r1, [r4, #8]	@ zero_extendqisi2
 2691 008a 9AF80000 		ldrb	r0, [r10]	@ zero_extendqisi2
 2692 008e FFF7FEFF 		bl	USBD_OS_EP_LockRelease
 2693              	.LVL257:
 825:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 2694              		.loc 1 825 8 view .LVU920
 825:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 2695              		.loc 1 825 15 is_stmt 0 view .LVU921
 2696 0092 40F29313 		movw	r3, #403
 2697 0096 2B80     		strh	r3, [r5]	@ movhi
 826:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 2698              		.loc 1 826 9 is_stmt 1 view .LVU922
 2699 0098 D0E7     		b	.L165
 2700              	.LVL258:
 2701              	.L179:
 801:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 2702              		.loc 1 801 8 view .LVU923
 801:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 2703              		.loc 1 801 15 is_stmt 0 view .LVU924
 2704 009a 40F29113 		movw	r3, #401
 2705 009e 2B80     		strh	r3, [r5]	@ movhi
 802:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 2706              		.loc 1 802 9 is_stmt 1 view .LVU925
 2707 00a0 CCE7     		b	.L165
 2708              	.LVL259:
 2709              	.L180:
 814:rtos/uC-USB-Device/Source/usbd_ep.c ****                                p_ep->Ix);
 2710              		.loc 1 814 9 view .LVU926
 2711 00a2 217A     		ldrb	r1, [r4, #8]	@ zero_extendqisi2
 2712 00a4 9AF80000 		ldrb	r0, [r10]	@ zero_extendqisi2
 2713 00a8 FFF7FEFF 		bl	USBD_OS_EP_LockRelease
 2714              	.LVL260:
 816:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 2715              		.loc 1 816 8 view .LVU927
 816:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 2716              		.loc 1 816 15 is_stmt 0 view .LVU928
 2717 00ac 4FF4C973 		mov	r3, #402
 2718 00b0 2B80     		strh	r3, [r5]	@ movhi
 817:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 2719              		.loc 1 817 9 is_stmt 1 view .LVU929
 2720 00b2 C3E7     		b	.L165
 2721              	.L174:
 829:rtos/uC-USB-Device/Source/usbd_ep.c ****                     p_ep,
 2722              		.loc 1 829 4 view .LVU930
 829:rtos/uC-USB-Device/Source/usbd_ep.c ****                     p_ep,
 2723              		.loc 1 829 10 is_stmt 0 view .LVU931
 2724 00b4 0495     		str	r5, [sp, #16]
 2725 00b6 9DF84030 		ldrb	r3, [sp, #64]	@ zero_extendqisi2
 2726 00ba 0393     		str	r3, [sp, #12]
 2727 00bc 0023     		movs	r3, #0
 2728 00be 0293     		str	r3, [sp, #8]
 2729 00c0 0F9B     		ldr	r3, [sp, #60]
 2730 00c2 0193     		str	r3, [sp, #4]
 2731 00c4 0097     		str	r7, [sp]
ARM GAS  /tmp/ccuUvpuw.s 			page 144


 2732 00c6 4346     		mov	r3, r8
 2733 00c8 4A46     		mov	r2, r9
 2734 00ca 2146     		mov	r1, r4
 2735 00cc 5046     		mov	r0, r10
 2736 00ce FFF7FEFF 		bl	USBD_EP_Tx
 2737              	.LVL261:
 839:rtos/uC-USB-Device/Source/usbd_ep.c ****                           p_ep->Ix);
 2738              		.loc 1 839 4 is_stmt 1 view .LVU932
 2739 00d2 217A     		ldrb	r1, [r4, #8]	@ zero_extendqisi2
 2740 00d4 9AF80000 		ldrb	r0, [r10]	@ zero_extendqisi2
 2741 00d8 FFF7FEFF 		bl	USBD_OS_EP_LockRelease
 2742              	.LVL262:
 842:rtos/uC-USB-Device/Source/usbd_ep.c **** }
 2743              		.loc 1 842 93 view .LVU933
 2744 00dc AEE7     		b	.L165
 2745              	.L182:
 2746 00de 00BF     		.align	2
 2747              	.L181:
 2748 00e0 00000000 		.word	.LANCHOR1
 2749              		.cfi_endproc
 2750              	.LFE3:
 2752              		.section	.text.USBD_IntrRx,"ax",%progbits
 2753              		.align	1
 2754              		.global	USBD_IntrRx
 2755              		.syntax unified
 2756              		.thumb
 2757              		.thumb_func
 2758              		.fpu fpv4-sp-d16
 2760              	USBD_IntrRx:
 2761              	.LVL263:
 2762              	.LFB4:
 902:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_EP         *p_ep;
 2763              		.loc 1 902 1 view -0
 2764              		.cfi_startproc
 2765              		@ args = 8, pretend = 0, frame = 0
 2766              		@ frame_needed = 0, uses_anonymous_args = 0
 902:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_EP         *p_ep;
 2767              		.loc 1 902 1 is_stmt 0 view .LVU935
 2768 0000 2DE9F047 		push	{r4, r5, r6, r7, r8, r9, r10, lr}
 2769              	.LCFI39:
 2770              		.cfi_def_cfa_offset 32
 2771              		.cfi_offset 4, -32
 2772              		.cfi_offset 5, -28
 2773              		.cfi_offset 6, -24
 2774              		.cfi_offset 7, -20
 2775              		.cfi_offset 8, -16
 2776              		.cfi_offset 9, -12
 2777              		.cfi_offset 10, -8
 2778              		.cfi_offset 14, -4
 2779 0004 84B0     		sub	sp, sp, #16
 2780              	.LCFI40:
 2781              		.cfi_def_cfa_offset 48
 2782 0006 0446     		mov	r4, r0
 2783 0008 0E46     		mov	r6, r1
 2784 000a 9246     		mov	r10, r2
 2785 000c 9846     		mov	r8, r3
 2786 000e 0D9D     		ldr	r5, [sp, #52]
ARM GAS  /tmp/ccuUvpuw.s 			page 145


 903:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DRV        *p_drv;
 2787              		.loc 1 903 5 is_stmt 1 view .LVU936
 904:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DEV_STATE   state;
 2788              		.loc 1 904 5 view .LVU937
 905:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_INT32U       xfer_len;
 2789              		.loc 1 905 5 view .LVU938
 906:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_INT08U       ep_phy_nbr;
 2790              		.loc 1 906 5 view .LVU939
 907:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 2791              		.loc 1 907 5 view .LVU940
 910:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 2792              		.loc 1 910 55 view .LVU941
 913:rtos/uC-USB-Device/Source/usbd_ep.c ****         CPU_SW_EXCEPTION(0);
 2793              		.loc 1 913 5 view .LVU942
 913:rtos/uC-USB-Device/Source/usbd_ep.c ****         CPU_SW_EXCEPTION(0);
 2794              		.loc 1 913 8 is_stmt 0 view .LVU943
 2795 0010 8DB1     		cbz	r5, .L194
 2796              	.LVL264:
 2797              	.L184:
 914:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 2798              		.loc 1 914 9 is_stmt 1 discriminator 1 view .LVU944
 918:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_drv == (USBD_DRV *)0) {
 2799              		.loc 1 918 5 discriminator 1 view .LVU945
 918:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_drv == (USBD_DRV *)0) {
 2800              		.loc 1 918 13 is_stmt 0 discriminator 1 view .LVU946
 2801 0012 2046     		mov	r0, r4
 2802 0014 FFF7FEFF 		bl	USBD_DrvRefGet
 2803              	.LVL265:
 919:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_DEV_INVALID_NBR;
 2804              		.loc 1 919 5 is_stmt 1 discriminator 1 view .LVU947
 919:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_DEV_INVALID_NBR;
 2805              		.loc 1 919 8 is_stmt 0 discriminator 1 view .LVU948
 2806 0018 8146     		mov	r9, r0
 2807 001a 78B1     		cbz	r0, .L195
 924:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (state != USBD_DEV_STATE_CONFIGURED) {                   /* EP transfers are ONLY allowed in
 2808              		.loc 1 924 5 is_stmt 1 view .LVU949
 924:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (state != USBD_DEV_STATE_CONFIGURED) {                   /* EP transfers are ONLY allowed in
 2809              		.loc 1 924 13 is_stmt 0 view .LVU950
 2810 001c 2946     		mov	r1, r5
 2811 001e 2046     		mov	r0, r4
 2812              	.LVL266:
 924:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (state != USBD_DEV_STATE_CONFIGURED) {                   /* EP transfers are ONLY allowed in
 2813              		.loc 1 924 13 view .LVU951
 2814 0020 FFF7FEFF 		bl	USBD_DevStateGet
 2815              	.LVL267:
 925:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_DEV_INVALID_STATE;
 2816              		.loc 1 925 5 is_stmt 1 view .LVU952
 925:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_DEV_INVALID_STATE;
 2817              		.loc 1 925 8 is_stmt 0 view .LVU953
 2818 0024 0528     		cmp	r0, #5
 2819 0026 0DD0     		beq	.L187
 926:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (0u);
 2820              		.loc 1 926 8 is_stmt 1 view .LVU954
 926:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (0u);
 2821              		.loc 1 926 15 is_stmt 0 view .LVU955
 2822 0028 6623     		movs	r3, #102
 2823 002a 2B80     		strh	r3, [r5]	@ movhi
ARM GAS  /tmp/ccuUvpuw.s 			page 146


 927:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 2824              		.loc 1 927 9 is_stmt 1 view .LVU956
 927:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 2825              		.loc 1 927 16 is_stmt 0 view .LVU957
 2826 002c 0024     		movs	r4, #0
 2827              	.LVL268:
 2828              	.L183:
 976:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 2829              		.loc 1 976 1 view .LVU958
 2830 002e 2046     		mov	r0, r4
 2831 0030 04B0     		add	sp, sp, #16
 2832              	.LCFI41:
 2833              		.cfi_remember_state
 2834              		.cfi_def_cfa_offset 32
 2835              		@ sp needed
 2836 0032 BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, r10, pc}
 2837              	.LVL269:
 2838              	.L194:
 2839              	.LCFI42:
 2840              		.cfi_restore_state
 914:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 2841              		.loc 1 914 9 is_stmt 1 view .LVU959
 914:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 2842              		.loc 1 914 9 view .LVU960
 2843 0036 FFF7FEFF 		bl	CPU_SW_Exception
 2844              	.LVL270:
 914:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 2845              		.loc 1 914 9 is_stmt 0 view .LVU961
 2846 003a EAE7     		b	.L184
 2847              	.LVL271:
 2848              	.L195:
 920:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (0u);
 2849              		.loc 1 920 8 is_stmt 1 view .LVU962
 920:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (0u);
 2850              		.loc 1 920 15 is_stmt 0 view .LVU963
 2851 003c 6523     		movs	r3, #101
 2852 003e 2B80     		strh	r3, [r5]	@ movhi
 921:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 2853              		.loc 1 921 9 is_stmt 1 view .LVU964
 921:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 2854              		.loc 1 921 16 is_stmt 0 view .LVU965
 2855 0040 0024     		movs	r4, #0
 2856 0042 F4E7     		b	.L183
 2857              	.LVL272:
 2858              	.L187:
 930:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_ep       = USBD_EP_TblPtrs[dev_nbr][ep_phy_nbr];
 2859              		.loc 1 930 5 is_stmt 1 view .LVU966
 930:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_ep       = USBD_EP_TblPtrs[dev_nbr][ep_phy_nbr];
 2860              		.loc 1 930 18 is_stmt 0 view .LVU967
 2861 0044 06F00F00 		and	r0, r6, #15
 2862              	.LVL273:
 930:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_ep       = USBD_EP_TblPtrs[dev_nbr][ep_phy_nbr];
 2863              		.loc 1 930 18 view .LVU968
 2864 0048 F309     		lsrs	r3, r6, #7
 930:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_ep       = USBD_EP_TblPtrs[dev_nbr][ep_phy_nbr];
 2865              		.loc 1 930 16 view .LVU969
 2866 004a 03EB4000 		add	r0, r3, r0, lsl #1
ARM GAS  /tmp/ccuUvpuw.s 			page 147


 2867              	.LVL274:
 931:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 2868              		.loc 1 931 5 is_stmt 1 view .LVU970
 931:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 2869              		.loc 1 931 16 is_stmt 0 view .LVU971
 2870 004e 00EB4414 		add	r4, r0, r4, lsl #5
 2871 0052 244B     		ldr	r3, .L198
 2872 0054 53F82470 		ldr	r7, [r3, r4, lsl #2]
 2873              	.LVL275:
 933:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_EP_INVALID_ADDR;
 2874              		.loc 1 933 5 is_stmt 1 view .LVU972
 933:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_EP_INVALID_ADDR;
 2875              		.loc 1 933 8 is_stmt 0 view .LVU973
 2876 0058 47B3     		cbz	r7, .L196
 938:rtos/uC-USB-Device/Source/usbd_ep.c ****                            p_ep->Ix,
 2877              		.loc 1 938 5 is_stmt 1 view .LVU974
 2878 005a 2B46     		mov	r3, r5
 2879 005c 0022     		movs	r2, #0
 2880 005e 397A     		ldrb	r1, [r7, #8]	@ zero_extendqisi2
 2881 0060 99F80000 		ldrb	r0, [r9]	@ zero_extendqisi2
 2882              	.LVL276:
 938:rtos/uC-USB-Device/Source/usbd_ep.c ****                            p_ep->Ix,
 2883              		.loc 1 938 5 is_stmt 0 view .LVU975
 2884 0064 FFF7FEFF 		bl	USBD_OS_EP_LockAcquire
 2885              	.LVL277:
 942:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (0u);
 2886              		.loc 1 942 5 is_stmt 1 view .LVU976
 942:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (0u);
 2887              		.loc 1 942 9 is_stmt 0 view .LVU977
 2888 0068 2B88     		ldrh	r3, [r5]
 942:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (0u);
 2889              		.loc 1 942 8 view .LVU978
 2890 006a 002B     		cmp	r3, #0
 2891 006c 37D1     		bne	.L192
 946:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_OS_EP_LockRelease(p_drv->DevNbr,
 2892              		.loc 1 946 5 is_stmt 1 view .LVU979
 946:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_OS_EP_LockRelease(p_drv->DevNbr,
 2893              		.loc 1 946 13 is_stmt 0 view .LVU980
 2894 006e 3B78     		ldrb	r3, [r7]	@ zero_extendqisi2
 946:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_OS_EP_LockRelease(p_drv->DevNbr,
 2895              		.loc 1 946 8 view .LVU981
 2896 0070 012B     		cmp	r3, #1
 2897 0072 20D1     		bne	.L197
 953:rtos/uC-USB-Device/Source/usbd_ep.c ****         ((ep_addr      & USBD_EP_DIR_MASK)  != USBD_EP_DIR_OUT)) {
 2898              		.loc 1 953 5 is_stmt 1 view .LVU982
 953:rtos/uC-USB-Device/Source/usbd_ep.c ****         ((ep_addr      & USBD_EP_DIR_MASK)  != USBD_EP_DIR_OUT)) {
 2899              		.loc 1 953 15 is_stmt 0 view .LVU983
 2900 0074 FB78     		ldrb	r3, [r7, #3]	@ zero_extendqisi2
 953:rtos/uC-USB-Device/Source/usbd_ep.c ****         ((ep_addr      & USBD_EP_DIR_MASK)  != USBD_EP_DIR_OUT)) {
 2901              		.loc 1 953 8 view .LVU984
 2902 0076 03F00303 		and	r3, r3, #3
 2903 007a 032B     		cmp	r3, #3
 2904 007c 25D1     		bne	.L190
 953:rtos/uC-USB-Device/Source/usbd_ep.c ****         ((ep_addr      & USBD_EP_DIR_MASK)  != USBD_EP_DIR_OUT)) {
 2905              		.loc 1 953 67 discriminator 1 view .LVU985
 2906 007e 16F0800F 		tst	r6, #128
 2907 0082 22D1     		bne	.L190
ARM GAS  /tmp/ccuUvpuw.s 			page 148


 961:rtos/uC-USB-Device/Source/usbd_ep.c ****                                            p_ep,
 2908              		.loc 1 961 5 is_stmt 1 view .LVU986
 961:rtos/uC-USB-Device/Source/usbd_ep.c ****                                            p_ep,
 2909              		.loc 1 961 16 is_stmt 0 view .LVU987
 2910 0084 0395     		str	r5, [sp, #12]
 2911 0086 BDF83030 		ldrh	r3, [sp, #48]
 2912 008a 0293     		str	r3, [sp, #8]
 2913 008c 0023     		movs	r3, #0
 2914 008e 0193     		str	r3, [sp, #4]
 2915 0090 0093     		str	r3, [sp]
 2916 0092 4346     		mov	r3, r8
 2917 0094 5246     		mov	r2, r10
 2918 0096 3946     		mov	r1, r7
 2919 0098 4846     		mov	r0, r9
 2920 009a FFF7FEFF 		bl	USBD_EP_Rx
 2921              	.LVL278:
 2922 009e 0446     		mov	r4, r0
 2923              	.LVL279:
 970:rtos/uC-USB-Device/Source/usbd_ep.c ****                            p_ep->Ix);
 2924              		.loc 1 970 5 is_stmt 1 view .LVU988
 2925 00a0 397A     		ldrb	r1, [r7, #8]	@ zero_extendqisi2
 2926 00a2 99F80000 		ldrb	r0, [r9]	@ zero_extendqisi2
 2927              	.LVL280:
 970:rtos/uC-USB-Device/Source/usbd_ep.c ****                            p_ep->Ix);
 2928              		.loc 1 970 5 is_stmt 0 view .LVU989
 2929 00a6 FFF7FEFF 		bl	USBD_OS_EP_LockRelease
 2930              	.LVL281:
 973:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 2931              		.loc 1 973 93 is_stmt 1 view .LVU990
 975:rtos/uC-USB-Device/Source/usbd_ep.c **** }
 2932              		.loc 1 975 5 view .LVU991
 975:rtos/uC-USB-Device/Source/usbd_ep.c **** }
 2933              		.loc 1 975 12 is_stmt 0 view .LVU992
 2934 00aa C0E7     		b	.L183
 2935              	.LVL282:
 2936              	.L196:
 934:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (0u);
 2937              		.loc 1 934 8 is_stmt 1 view .LVU993
 934:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (0u);
 2938              		.loc 1 934 15 is_stmt 0 view .LVU994
 2939 00ac 40F29113 		movw	r3, #401
 2940 00b0 2B80     		strh	r3, [r5]	@ movhi
 935:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 2941              		.loc 1 935 9 is_stmt 1 view .LVU995
 935:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 2942              		.loc 1 935 16 is_stmt 0 view .LVU996
 2943 00b2 0024     		movs	r4, #0
 2944 00b4 BBE7     		b	.L183
 2945              	.LVL283:
 2946              	.L197:
 947:rtos/uC-USB-Device/Source/usbd_ep.c ****                                p_ep->Ix);
 2947              		.loc 1 947 9 is_stmt 1 view .LVU997
 2948 00b6 397A     		ldrb	r1, [r7, #8]	@ zero_extendqisi2
 2949 00b8 99F80000 		ldrb	r0, [r9]	@ zero_extendqisi2
 2950 00bc FFF7FEFF 		bl	USBD_OS_EP_LockRelease
 2951              	.LVL284:
 949:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (0u);
ARM GAS  /tmp/ccuUvpuw.s 			page 149


 2952              		.loc 1 949 8 view .LVU998
 949:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (0u);
 2953              		.loc 1 949 15 is_stmt 0 view .LVU999
 2954 00c0 4FF4C973 		mov	r3, #402
 2955 00c4 2B80     		strh	r3, [r5]	@ movhi
 950:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 2956              		.loc 1 950 9 is_stmt 1 view .LVU1000
 950:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 2957              		.loc 1 950 16 is_stmt 0 view .LVU1001
 2958 00c6 0024     		movs	r4, #0
 2959 00c8 B1E7     		b	.L183
 2960              	.L190:
 955:rtos/uC-USB-Device/Source/usbd_ep.c ****                                p_ep->Ix);
 2961              		.loc 1 955 9 is_stmt 1 view .LVU1002
 2962 00ca 397A     		ldrb	r1, [r7, #8]	@ zero_extendqisi2
 2963 00cc 99F80000 		ldrb	r0, [r9]	@ zero_extendqisi2
 2964 00d0 FFF7FEFF 		bl	USBD_OS_EP_LockRelease
 2965              	.LVL285:
 957:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (0u);
 2966              		.loc 1 957 8 view .LVU1003
 957:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (0u);
 2967              		.loc 1 957 15 is_stmt 0 view .LVU1004
 2968 00d4 40F29313 		movw	r3, #403
 2969 00d8 2B80     		strh	r3, [r5]	@ movhi
 958:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 2970              		.loc 1 958 9 is_stmt 1 view .LVU1005
 958:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 2971              		.loc 1 958 16 is_stmt 0 view .LVU1006
 2972 00da 0024     		movs	r4, #0
 2973 00dc A7E7     		b	.L183
 2974              	.L192:
 943:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 2975              		.loc 1 943 16 view .LVU1007
 2976 00de 0024     		movs	r4, #0
 2977 00e0 A5E7     		b	.L183
 2978              	.L199:
 2979 00e2 00BF     		.align	2
 2980              	.L198:
 2981 00e4 00000000 		.word	.LANCHOR1
 2982              		.cfi_endproc
 2983              	.LFE4:
 2985              		.section	.text.USBD_IntrRxAsync,"ax",%progbits
 2986              		.align	1
 2987              		.global	USBD_IntrRxAsync
 2988              		.syntax unified
 2989              		.thumb
 2990              		.thumb_func
 2991              		.fpu fpv4-sp-d16
 2993              	USBD_IntrRxAsync:
 2994              	.LVL286:
 2995              	.LFB5:
1027:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_EP         *p_ep;
 2996              		.loc 1 1027 1 is_stmt 1 view -0
 2997              		.cfi_startproc
 2998              		@ args = 12, pretend = 0, frame = 0
 2999              		@ frame_needed = 0, uses_anonymous_args = 0
1027:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_EP         *p_ep;
ARM GAS  /tmp/ccuUvpuw.s 			page 150


 3000              		.loc 1 1027 1 is_stmt 0 view .LVU1009
 3001 0000 2DE9F047 		push	{r4, r5, r6, r7, r8, r9, r10, lr}
 3002              	.LCFI43:
 3003              		.cfi_def_cfa_offset 32
 3004              		.cfi_offset 4, -32
 3005              		.cfi_offset 5, -28
 3006              		.cfi_offset 6, -24
 3007              		.cfi_offset 7, -20
 3008              		.cfi_offset 8, -16
 3009              		.cfi_offset 9, -12
 3010              		.cfi_offset 10, -8
 3011              		.cfi_offset 14, -4
 3012 0004 84B0     		sub	sp, sp, #16
 3013              	.LCFI44:
 3014              		.cfi_def_cfa_offset 48
 3015 0006 0446     		mov	r4, r0
 3016 0008 0E46     		mov	r6, r1
 3017 000a 9146     		mov	r9, r2
 3018 000c 9846     		mov	r8, r3
 3019 000e 0C9F     		ldr	r7, [sp, #48]
 3020 0010 0E9D     		ldr	r5, [sp, #56]
1028:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DRV        *p_drv;
 3021              		.loc 1 1028 5 is_stmt 1 view .LVU1010
1029:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_INT08U       ep_phy_nbr;
 3022              		.loc 1 1029 5 view .LVU1011
1030:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DEV_STATE   state;
 3023              		.loc 1 1030 5 view .LVU1012
1031:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 3024              		.loc 1 1031 5 view .LVU1013
1034:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 3025              		.loc 1 1034 56 view .LVU1014
1037:rtos/uC-USB-Device/Source/usbd_ep.c ****         CPU_SW_EXCEPTION(;);
 3026              		.loc 1 1037 5 view .LVU1015
1037:rtos/uC-USB-Device/Source/usbd_ep.c ****         CPU_SW_EXCEPTION(;);
 3027              		.loc 1 1037 8 is_stmt 0 view .LVU1016
 3028 0012 75B1     		cbz	r5, .L211
 3029              	.LVL287:
 3030              	.L201:
1038:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 3031              		.loc 1 1038 9 is_stmt 1 discriminator 1 view .LVU1017
1041:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_NULL_PTR;
 3032              		.loc 1 1041 5 discriminator 1 view .LVU1018
1041:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_NULL_PTR;
 3033              		.loc 1 1041 8 is_stmt 0 discriminator 1 view .LVU1019
 3034 0014 87B1     		cbz	r7, .L212
1047:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_drv == (USBD_DRV *)0) {
 3035              		.loc 1 1047 5 is_stmt 1 view .LVU1020
1047:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_drv == (USBD_DRV *)0) {
 3036              		.loc 1 1047 13 is_stmt 0 view .LVU1021
 3037 0016 2046     		mov	r0, r4
 3038 0018 FFF7FEFF 		bl	USBD_DrvRefGet
 3039              	.LVL288:
1048:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_DEV_INVALID_NBR;
 3040              		.loc 1 1048 5 is_stmt 1 view .LVU1022
1048:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_DEV_INVALID_NBR;
 3041              		.loc 1 1048 8 is_stmt 0 view .LVU1023
 3042 001c 8246     		mov	r10, r0
ARM GAS  /tmp/ccuUvpuw.s 			page 151


 3043 001e 80B1     		cbz	r0, .L213
1053:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (state != USBD_DEV_STATE_CONFIGURED) {                   /* EP transfers are ONLY allowed in
 3044              		.loc 1 1053 5 is_stmt 1 view .LVU1024
1053:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (state != USBD_DEV_STATE_CONFIGURED) {                   /* EP transfers are ONLY allowed in
 3045              		.loc 1 1053 13 is_stmt 0 view .LVU1025
 3046 0020 2946     		mov	r1, r5
 3047 0022 2046     		mov	r0, r4
 3048              	.LVL289:
1053:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (state != USBD_DEV_STATE_CONFIGURED) {                   /* EP transfers are ONLY allowed in
 3049              		.loc 1 1053 13 view .LVU1026
 3050 0024 FFF7FEFF 		bl	USBD_DevStateGet
 3051              	.LVL290:
1054:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_DEV_INVALID_STATE;
 3052              		.loc 1 1054 5 is_stmt 1 view .LVU1027
1054:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_DEV_INVALID_STATE;
 3053              		.loc 1 1054 8 is_stmt 0 view .LVU1028
 3054 0028 0528     		cmp	r0, #5
 3055 002a 0DD0     		beq	.L205
1055:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 3056              		.loc 1 1055 8 is_stmt 1 view .LVU1029
1055:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 3057              		.loc 1 1055 15 is_stmt 0 view .LVU1030
 3058 002c 6623     		movs	r3, #102
 3059 002e 2B80     		strh	r3, [r5]	@ movhi
1056:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 3060              		.loc 1 1056 9 is_stmt 1 view .LVU1031
 3061 0030 04E0     		b	.L200
 3062              	.LVL291:
 3063              	.L211:
1038:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 3064              		.loc 1 1038 9 view .LVU1032
1038:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 3065              		.loc 1 1038 9 view .LVU1033
 3066 0032 FFF7FEFF 		bl	CPU_SW_Exception
 3067              	.LVL292:
1038:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 3068              		.loc 1 1038 9 is_stmt 0 view .LVU1034
 3069 0036 EDE7     		b	.L201
 3070              	.L212:
1042:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 3071              		.loc 1 1042 8 is_stmt 1 view .LVU1035
1042:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 3072              		.loc 1 1042 15 is_stmt 0 view .LVU1036
 3073 0038 0523     		movs	r3, #5
 3074 003a 2B80     		strh	r3, [r5]	@ movhi
1043:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 3075              		.loc 1 1043 9 is_stmt 1 view .LVU1037
 3076              	.L200:
1103:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 3077              		.loc 1 1103 1 is_stmt 0 view .LVU1038
 3078 003c 04B0     		add	sp, sp, #16
 3079              	.LCFI45:
 3080              		.cfi_remember_state
 3081              		.cfi_def_cfa_offset 32
 3082              		@ sp needed
 3083 003e BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, r10, pc}
 3084              	.LVL293:
ARM GAS  /tmp/ccuUvpuw.s 			page 152


 3085              	.L213:
 3086              	.LCFI46:
 3087              		.cfi_restore_state
1049:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 3088              		.loc 1 1049 8 is_stmt 1 view .LVU1039
1049:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 3089              		.loc 1 1049 15 is_stmt 0 view .LVU1040
 3090 0042 6523     		movs	r3, #101
 3091 0044 2B80     		strh	r3, [r5]	@ movhi
1050:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 3092              		.loc 1 1050 9 is_stmt 1 view .LVU1041
 3093 0046 F9E7     		b	.L200
 3094              	.LVL294:
 3095              	.L205:
1059:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_ep       = USBD_EP_TblPtrs[dev_nbr][ep_phy_nbr];
 3096              		.loc 1 1059 5 view .LVU1042
1059:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_ep       = USBD_EP_TblPtrs[dev_nbr][ep_phy_nbr];
 3097              		.loc 1 1059 18 is_stmt 0 view .LVU1043
 3098 0048 06F00F00 		and	r0, r6, #15
 3099              	.LVL295:
1059:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_ep       = USBD_EP_TblPtrs[dev_nbr][ep_phy_nbr];
 3100              		.loc 1 1059 18 view .LVU1044
 3101 004c F309     		lsrs	r3, r6, #7
1059:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_ep       = USBD_EP_TblPtrs[dev_nbr][ep_phy_nbr];
 3102              		.loc 1 1059 16 view .LVU1045
 3103 004e 03EB4000 		add	r0, r3, r0, lsl #1
 3104              	.LVL296:
1060:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 3105              		.loc 1 1060 5 is_stmt 1 view .LVU1046
1060:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 3106              		.loc 1 1060 16 is_stmt 0 view .LVU1047
 3107 0052 00EB4414 		add	r4, r0, r4, lsl #5
 3108 0056 204B     		ldr	r3, .L216
 3109 0058 53F82440 		ldr	r4, [r3, r4, lsl #2]
 3110              	.LVL297:
1062:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_EP_INVALID_ADDR;
 3111              		.loc 1 1062 5 is_stmt 1 view .LVU1048
1062:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_EP_INVALID_ADDR;
 3112              		.loc 1 1062 8 is_stmt 0 view .LVU1049
 3113 005c 34B3     		cbz	r4, .L214
1067:rtos/uC-USB-Device/Source/usbd_ep.c ****                            p_ep->Ix,
 3114              		.loc 1 1067 5 is_stmt 1 view .LVU1050
 3115 005e 2B46     		mov	r3, r5
 3116 0060 0022     		movs	r2, #0
 3117 0062 217A     		ldrb	r1, [r4, #8]	@ zero_extendqisi2
 3118 0064 9AF80000 		ldrb	r0, [r10]	@ zero_extendqisi2
 3119              	.LVL298:
1067:rtos/uC-USB-Device/Source/usbd_ep.c ****                            p_ep->Ix,
 3120              		.loc 1 1067 5 is_stmt 0 view .LVU1051
 3121 0068 FFF7FEFF 		bl	USBD_OS_EP_LockAcquire
 3122              	.LVL299:
1071:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 3123              		.loc 1 1071 5 is_stmt 1 view .LVU1052
1071:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 3124              		.loc 1 1071 9 is_stmt 0 view .LVU1053
 3125 006c 2B88     		ldrh	r3, [r5]
1071:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
ARM GAS  /tmp/ccuUvpuw.s 			page 153


 3126              		.loc 1 1071 8 view .LVU1054
 3127 006e 002B     		cmp	r3, #0
 3128 0070 E4D1     		bne	.L200
1075:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_OS_EP_LockRelease(p_drv->DevNbr,
 3129              		.loc 1 1075 5 is_stmt 1 view .LVU1055
1075:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_OS_EP_LockRelease(p_drv->DevNbr,
 3130              		.loc 1 1075 13 is_stmt 0 view .LVU1056
 3131 0072 2378     		ldrb	r3, [r4]	@ zero_extendqisi2
1075:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_OS_EP_LockRelease(p_drv->DevNbr,
 3132              		.loc 1 1075 8 view .LVU1057
 3133 0074 012B     		cmp	r3, #1
 3134 0076 1DD1     		bne	.L215
1082:rtos/uC-USB-Device/Source/usbd_ep.c ****         ((ep_addr      & USBD_EP_DIR_MASK)  != USBD_EP_DIR_OUT)) {
 3135              		.loc 1 1082 5 is_stmt 1 view .LVU1058
1082:rtos/uC-USB-Device/Source/usbd_ep.c ****         ((ep_addr      & USBD_EP_DIR_MASK)  != USBD_EP_DIR_OUT)) {
 3136              		.loc 1 1082 15 is_stmt 0 view .LVU1059
 3137 0078 E378     		ldrb	r3, [r4, #3]	@ zero_extendqisi2
1082:rtos/uC-USB-Device/Source/usbd_ep.c ****         ((ep_addr      & USBD_EP_DIR_MASK)  != USBD_EP_DIR_OUT)) {
 3138              		.loc 1 1082 8 view .LVU1060
 3139 007a 03F00303 		and	r3, r3, #3
 3140 007e 032B     		cmp	r3, #3
 3141 0080 21D1     		bne	.L208
1082:rtos/uC-USB-Device/Source/usbd_ep.c ****         ((ep_addr      & USBD_EP_DIR_MASK)  != USBD_EP_DIR_OUT)) {
 3142              		.loc 1 1082 67 discriminator 1 view .LVU1061
 3143 0082 16F0800F 		tst	r6, #128
 3144 0086 1ED1     		bne	.L208
1090:rtos/uC-USB-Device/Source/usbd_ep.c ****                      p_ep,
 3145              		.loc 1 1090 5 is_stmt 1 view .LVU1062
1090:rtos/uC-USB-Device/Source/usbd_ep.c ****                      p_ep,
 3146              		.loc 1 1090 11 is_stmt 0 view .LVU1063
 3147 0088 0395     		str	r5, [sp, #12]
 3148 008a 0023     		movs	r3, #0
 3149 008c 0293     		str	r3, [sp, #8]
 3150 008e 0D9B     		ldr	r3, [sp, #52]
 3151 0090 0193     		str	r3, [sp, #4]
 3152 0092 0097     		str	r7, [sp]
 3153 0094 4346     		mov	r3, r8
 3154 0096 4A46     		mov	r2, r9
 3155 0098 2146     		mov	r1, r4
 3156 009a 5046     		mov	r0, r10
 3157 009c FFF7FEFF 		bl	USBD_EP_Rx
 3158              	.LVL300:
1099:rtos/uC-USB-Device/Source/usbd_ep.c ****                            p_ep->Ix);
 3159              		.loc 1 1099 5 is_stmt 1 view .LVU1064
 3160 00a0 217A     		ldrb	r1, [r4, #8]	@ zero_extendqisi2
 3161 00a2 9AF80000 		ldrb	r0, [r10]	@ zero_extendqisi2
 3162 00a6 FFF7FEFF 		bl	USBD_OS_EP_LockRelease
 3163              	.LVL301:
1102:rtos/uC-USB-Device/Source/usbd_ep.c **** }
 3164              		.loc 1 1102 94 view .LVU1065
 3165 00aa C7E7     		b	.L200
 3166              	.LVL302:
 3167              	.L214:
1063:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 3168              		.loc 1 1063 8 view .LVU1066
1063:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 3169              		.loc 1 1063 15 is_stmt 0 view .LVU1067
ARM GAS  /tmp/ccuUvpuw.s 			page 154


 3170 00ac 40F29113 		movw	r3, #401
 3171 00b0 2B80     		strh	r3, [r5]	@ movhi
1064:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 3172              		.loc 1 1064 9 is_stmt 1 view .LVU1068
 3173 00b2 C3E7     		b	.L200
 3174              	.LVL303:
 3175              	.L215:
1076:rtos/uC-USB-Device/Source/usbd_ep.c ****                                p_ep->Ix);
 3176              		.loc 1 1076 9 view .LVU1069
 3177 00b4 217A     		ldrb	r1, [r4, #8]	@ zero_extendqisi2
 3178 00b6 9AF80000 		ldrb	r0, [r10]	@ zero_extendqisi2
 3179 00ba FFF7FEFF 		bl	USBD_OS_EP_LockRelease
 3180              	.LVL304:
1078:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 3181              		.loc 1 1078 8 view .LVU1070
1078:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 3182              		.loc 1 1078 15 is_stmt 0 view .LVU1071
 3183 00be 4FF4C973 		mov	r3, #402
 3184 00c2 2B80     		strh	r3, [r5]	@ movhi
1079:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 3185              		.loc 1 1079 9 is_stmt 1 view .LVU1072
 3186 00c4 BAE7     		b	.L200
 3187              	.L208:
1084:rtos/uC-USB-Device/Source/usbd_ep.c ****                                p_ep->Ix);
 3188              		.loc 1 1084 9 view .LVU1073
 3189 00c6 217A     		ldrb	r1, [r4, #8]	@ zero_extendqisi2
 3190 00c8 9AF80000 		ldrb	r0, [r10]	@ zero_extendqisi2
 3191 00cc FFF7FEFF 		bl	USBD_OS_EP_LockRelease
 3192              	.LVL305:
1086:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 3193              		.loc 1 1086 8 view .LVU1074
1086:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 3194              		.loc 1 1086 15 is_stmt 0 view .LVU1075
 3195 00d0 40F29313 		movw	r3, #403
 3196 00d4 2B80     		strh	r3, [r5]	@ movhi
1087:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 3197              		.loc 1 1087 9 is_stmt 1 view .LVU1076
 3198 00d6 B1E7     		b	.L200
 3199              	.L217:
 3200              		.align	2
 3201              	.L216:
 3202 00d8 00000000 		.word	.LANCHOR1
 3203              		.cfi_endproc
 3204              	.LFE5:
 3206              		.section	.text.USBD_IntrTx,"ax",%progbits
 3207              		.align	1
 3208              		.global	USBD_IntrTx
 3209              		.syntax unified
 3210              		.thumb
 3211              		.thumb_func
 3212              		.fpu fpv4-sp-d16
 3214              	USBD_IntrTx:
 3215              	.LVL306:
 3216              	.LFB6:
1160:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_EP         *p_ep;
 3217              		.loc 1 1160 1 view -0
 3218              		.cfi_startproc
ARM GAS  /tmp/ccuUvpuw.s 			page 155


 3219              		@ args = 12, pretend = 0, frame = 0
 3220              		@ frame_needed = 0, uses_anonymous_args = 0
1160:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_EP         *p_ep;
 3221              		.loc 1 1160 1 is_stmt 0 view .LVU1078
 3222 0000 2DE9F047 		push	{r4, r5, r6, r7, r8, r9, r10, lr}
 3223              	.LCFI47:
 3224              		.cfi_def_cfa_offset 32
 3225              		.cfi_offset 4, -32
 3226              		.cfi_offset 5, -28
 3227              		.cfi_offset 6, -24
 3228              		.cfi_offset 7, -20
 3229              		.cfi_offset 8, -16
 3230              		.cfi_offset 9, -12
 3231              		.cfi_offset 10, -8
 3232              		.cfi_offset 14, -4
 3233 0004 86B0     		sub	sp, sp, #24
 3234              	.LCFI48:
 3235              		.cfi_def_cfa_offset 56
 3236 0006 0446     		mov	r4, r0
 3237 0008 0E46     		mov	r6, r1
 3238 000a 9246     		mov	r10, r2
 3239 000c 9846     		mov	r8, r3
 3240 000e 109D     		ldr	r5, [sp, #64]
1161:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DRV        *p_drv;
 3241              		.loc 1 1161 5 is_stmt 1 view .LVU1079
1162:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_INT08U       ep_phy_nbr;
 3242              		.loc 1 1162 5 view .LVU1080
1163:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_INT32U       xfer_len;
 3243              		.loc 1 1163 5 view .LVU1081
1164:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DEV_STATE   state;
 3244              		.loc 1 1164 5 view .LVU1082
1165:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 3245              		.loc 1 1165 5 view .LVU1083
1168:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 3246              		.loc 1 1168 55 view .LVU1084
1171:rtos/uC-USB-Device/Source/usbd_ep.c ****         CPU_SW_EXCEPTION(0);
 3247              		.loc 1 1171 5 view .LVU1085
1171:rtos/uC-USB-Device/Source/usbd_ep.c ****         CPU_SW_EXCEPTION(0);
 3248              		.loc 1 1171 8 is_stmt 0 view .LVU1086
 3249 0010 8DB1     		cbz	r5, .L229
 3250              	.LVL307:
 3251              	.L219:
1172:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 3252              		.loc 1 1172 9 is_stmt 1 discriminator 1 view .LVU1087
1176:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_drv == (USBD_DRV *)0) {
 3253              		.loc 1 1176 5 discriminator 1 view .LVU1088
1176:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_drv == (USBD_DRV *)0) {
 3254              		.loc 1 1176 13 is_stmt 0 discriminator 1 view .LVU1089
 3255 0012 2046     		mov	r0, r4
 3256 0014 FFF7FEFF 		bl	USBD_DrvRefGet
 3257              	.LVL308:
1177:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_DEV_INVALID_NBR;
 3258              		.loc 1 1177 5 is_stmt 1 discriminator 1 view .LVU1090
1177:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_DEV_INVALID_NBR;
 3259              		.loc 1 1177 8 is_stmt 0 discriminator 1 view .LVU1091
 3260 0018 8146     		mov	r9, r0
 3261 001a 78B1     		cbz	r0, .L230
ARM GAS  /tmp/ccuUvpuw.s 			page 156


1182:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (state != USBD_DEV_STATE_CONFIGURED) {                   /* EP transfers are ONLY allowed in
 3262              		.loc 1 1182 5 is_stmt 1 view .LVU1092
1182:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (state != USBD_DEV_STATE_CONFIGURED) {                   /* EP transfers are ONLY allowed in
 3263              		.loc 1 1182 13 is_stmt 0 view .LVU1093
 3264 001c 2946     		mov	r1, r5
 3265 001e 2046     		mov	r0, r4
 3266              	.LVL309:
1182:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (state != USBD_DEV_STATE_CONFIGURED) {                   /* EP transfers are ONLY allowed in
 3267              		.loc 1 1182 13 view .LVU1094
 3268 0020 FFF7FEFF 		bl	USBD_DevStateGet
 3269              	.LVL310:
1183:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_DEV_INVALID_STATE;
 3270              		.loc 1 1183 5 is_stmt 1 view .LVU1095
1183:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_DEV_INVALID_STATE;
 3271              		.loc 1 1183 8 is_stmt 0 view .LVU1096
 3272 0024 0528     		cmp	r0, #5
 3273 0026 0DD0     		beq	.L222
1184:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (0u);
 3274              		.loc 1 1184 8 is_stmt 1 view .LVU1097
1184:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (0u);
 3275              		.loc 1 1184 15 is_stmt 0 view .LVU1098
 3276 0028 6623     		movs	r3, #102
 3277 002a 2B80     		strh	r3, [r5]	@ movhi
1185:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 3278              		.loc 1 1185 9 is_stmt 1 view .LVU1099
1185:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 3279              		.loc 1 1185 16 is_stmt 0 view .LVU1100
 3280 002c 0024     		movs	r4, #0
 3281              	.LVL311:
 3282              	.L218:
1235:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 3283              		.loc 1 1235 1 view .LVU1101
 3284 002e 2046     		mov	r0, r4
 3285 0030 06B0     		add	sp, sp, #24
 3286              	.LCFI49:
 3287              		.cfi_remember_state
 3288              		.cfi_def_cfa_offset 32
 3289              		@ sp needed
 3290 0032 BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, r10, pc}
 3291              	.LVL312:
 3292              	.L229:
 3293              	.LCFI50:
 3294              		.cfi_restore_state
1172:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 3295              		.loc 1 1172 9 is_stmt 1 view .LVU1102
1172:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 3296              		.loc 1 1172 9 view .LVU1103
 3297 0036 FFF7FEFF 		bl	CPU_SW_Exception
 3298              	.LVL313:
1172:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 3299              		.loc 1 1172 9 is_stmt 0 view .LVU1104
 3300 003a EAE7     		b	.L219
 3301              	.LVL314:
 3302              	.L230:
1178:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (0u);
 3303              		.loc 1 1178 8 is_stmt 1 view .LVU1105
1178:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (0u);
ARM GAS  /tmp/ccuUvpuw.s 			page 157


 3304              		.loc 1 1178 15 is_stmt 0 view .LVU1106
 3305 003c 6523     		movs	r3, #101
 3306 003e 2B80     		strh	r3, [r5]	@ movhi
1179:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 3307              		.loc 1 1179 9 is_stmt 1 view .LVU1107
1179:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 3308              		.loc 1 1179 16 is_stmt 0 view .LVU1108
 3309 0040 0024     		movs	r4, #0
 3310 0042 F4E7     		b	.L218
 3311              	.LVL315:
 3312              	.L222:
1188:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_ep       = USBD_EP_TblPtrs[dev_nbr][ep_phy_nbr];
 3313              		.loc 1 1188 5 is_stmt 1 view .LVU1109
1188:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_ep       = USBD_EP_TblPtrs[dev_nbr][ep_phy_nbr];
 3314              		.loc 1 1188 18 is_stmt 0 view .LVU1110
 3315 0044 06F00F00 		and	r0, r6, #15
 3316              	.LVL316:
1188:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_ep       = USBD_EP_TblPtrs[dev_nbr][ep_phy_nbr];
 3317              		.loc 1 1188 18 view .LVU1111
 3318 0048 F309     		lsrs	r3, r6, #7
1188:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_ep       = USBD_EP_TblPtrs[dev_nbr][ep_phy_nbr];
 3319              		.loc 1 1188 16 view .LVU1112
 3320 004a 03EB4000 		add	r0, r3, r0, lsl #1
 3321              	.LVL317:
1189:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 3322              		.loc 1 1189 5 is_stmt 1 view .LVU1113
1189:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 3323              		.loc 1 1189 16 is_stmt 0 view .LVU1114
 3324 004e 00EB4414 		add	r4, r0, r4, lsl #5
 3325 0052 254B     		ldr	r3, .L233
 3326 0054 53F82470 		ldr	r7, [r3, r4, lsl #2]
 3327              	.LVL318:
1191:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_EP_INVALID_ADDR;
 3328              		.loc 1 1191 5 is_stmt 1 view .LVU1115
1191:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_EP_INVALID_ADDR;
 3329              		.loc 1 1191 8 is_stmt 0 view .LVU1116
 3330 0058 F7B1     		cbz	r7, .L231
1196:rtos/uC-USB-Device/Source/usbd_ep.c ****                            p_ep->Ix,
 3331              		.loc 1 1196 5 is_stmt 1 view .LVU1117
 3332 005a 2B46     		mov	r3, r5
 3333 005c 0022     		movs	r2, #0
 3334 005e 397A     		ldrb	r1, [r7, #8]	@ zero_extendqisi2
 3335 0060 99F80000 		ldrb	r0, [r9]	@ zero_extendqisi2
 3336              	.LVL319:
1196:rtos/uC-USB-Device/Source/usbd_ep.c ****                            p_ep->Ix,
 3337              		.loc 1 1196 5 is_stmt 0 view .LVU1118
 3338 0064 FFF7FEFF 		bl	USBD_OS_EP_LockAcquire
 3339              	.LVL320:
1200:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (0u);
 3340              		.loc 1 1200 5 is_stmt 1 view .LVU1119
1200:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (0u);
 3341              		.loc 1 1200 9 is_stmt 0 view .LVU1120
 3342 0068 2B88     		ldrh	r3, [r5]
1200:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (0u);
 3343              		.loc 1 1200 8 view .LVU1121
 3344 006a 002B     		cmp	r3, #0
 3345 006c 3AD1     		bne	.L227
ARM GAS  /tmp/ccuUvpuw.s 			page 158


1204:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_OS_EP_LockRelease(p_drv->DevNbr,
 3346              		.loc 1 1204 5 is_stmt 1 view .LVU1122
1204:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_OS_EP_LockRelease(p_drv->DevNbr,
 3347              		.loc 1 1204 13 is_stmt 0 view .LVU1123
 3348 006e 3B78     		ldrb	r3, [r7]	@ zero_extendqisi2
1204:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_OS_EP_LockRelease(p_drv->DevNbr,
 3349              		.loc 1 1204 8 view .LVU1124
 3350 0070 012B     		cmp	r3, #1
 3351 0072 16D1     		bne	.L232
1211:rtos/uC-USB-Device/Source/usbd_ep.c ****         ((ep_addr      & USBD_EP_DIR_MASK)  != USBD_EP_DIR_IN)) {
 3352              		.loc 1 1211 5 is_stmt 1 view .LVU1125
1211:rtos/uC-USB-Device/Source/usbd_ep.c ****         ((ep_addr      & USBD_EP_DIR_MASK)  != USBD_EP_DIR_IN)) {
 3353              		.loc 1 1211 15 is_stmt 0 view .LVU1126
 3354 0074 FB78     		ldrb	r3, [r7, #3]	@ zero_extendqisi2
1211:rtos/uC-USB-Device/Source/usbd_ep.c ****         ((ep_addr      & USBD_EP_DIR_MASK)  != USBD_EP_DIR_IN)) {
 3355              		.loc 1 1211 8 view .LVU1127
 3356 0076 03F00303 		and	r3, r3, #3
 3357 007a 032B     		cmp	r3, #3
 3358 007c 02D1     		bne	.L225
1211:rtos/uC-USB-Device/Source/usbd_ep.c ****         ((ep_addr      & USBD_EP_DIR_MASK)  != USBD_EP_DIR_IN)) {
 3359              		.loc 1 1211 67 discriminator 1 view .LVU1128
 3360 007e 16F0800F 		tst	r6, #128
 3361 0082 18D1     		bne	.L226
 3362              	.L225:
1213:rtos/uC-USB-Device/Source/usbd_ep.c ****                                p_ep->Ix);
 3363              		.loc 1 1213 9 is_stmt 1 view .LVU1129
 3364 0084 397A     		ldrb	r1, [r7, #8]	@ zero_extendqisi2
 3365 0086 99F80000 		ldrb	r0, [r9]	@ zero_extendqisi2
 3366 008a FFF7FEFF 		bl	USBD_OS_EP_LockRelease
 3367              	.LVL321:
1215:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (0u);
 3368              		.loc 1 1215 8 view .LVU1130
1215:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (0u);
 3369              		.loc 1 1215 15 is_stmt 0 view .LVU1131
 3370 008e 40F29313 		movw	r3, #403
 3371 0092 2B80     		strh	r3, [r5]	@ movhi
1216:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 3372              		.loc 1 1216 9 is_stmt 1 view .LVU1132
1216:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 3373              		.loc 1 1216 16 is_stmt 0 view .LVU1133
 3374 0094 0024     		movs	r4, #0
 3375 0096 CAE7     		b	.L218
 3376              	.LVL322:
 3377              	.L231:
1192:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (0u);
 3378              		.loc 1 1192 8 is_stmt 1 view .LVU1134
1192:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (0u);
 3379              		.loc 1 1192 15 is_stmt 0 view .LVU1135
 3380 0098 40F29113 		movw	r3, #401
 3381 009c 2B80     		strh	r3, [r5]	@ movhi
1193:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 3382              		.loc 1 1193 9 is_stmt 1 view .LVU1136
1193:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 3383              		.loc 1 1193 16 is_stmt 0 view .LVU1137
 3384 009e 0024     		movs	r4, #0
 3385 00a0 C5E7     		b	.L218
 3386              	.LVL323:
ARM GAS  /tmp/ccuUvpuw.s 			page 159


 3387              	.L232:
1205:rtos/uC-USB-Device/Source/usbd_ep.c ****                                p_ep->Ix);
 3388              		.loc 1 1205 9 is_stmt 1 view .LVU1138
 3389 00a2 397A     		ldrb	r1, [r7, #8]	@ zero_extendqisi2
 3390 00a4 99F80000 		ldrb	r0, [r9]	@ zero_extendqisi2
 3391 00a8 FFF7FEFF 		bl	USBD_OS_EP_LockRelease
 3392              	.LVL324:
1207:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (0u);
 3393              		.loc 1 1207 8 view .LVU1139
1207:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (0u);
 3394              		.loc 1 1207 15 is_stmt 0 view .LVU1140
 3395 00ac 4FF4C973 		mov	r3, #402
 3396 00b0 2B80     		strh	r3, [r5]	@ movhi
1208:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 3397              		.loc 1 1208 9 is_stmt 1 view .LVU1141
1208:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 3398              		.loc 1 1208 16 is_stmt 0 view .LVU1142
 3399 00b2 0024     		movs	r4, #0
 3400 00b4 BBE7     		b	.L218
 3401              	.L226:
1219:rtos/uC-USB-Device/Source/usbd_ep.c ****                                            p_ep,
 3402              		.loc 1 1219 5 is_stmt 1 view .LVU1143
1219:rtos/uC-USB-Device/Source/usbd_ep.c ****                                            p_ep,
 3403              		.loc 1 1219 16 is_stmt 0 view .LVU1144
 3404 00b6 0495     		str	r5, [sp, #16]
 3405 00b8 9DF83C30 		ldrb	r3, [sp, #60]	@ zero_extendqisi2
 3406 00bc 0393     		str	r3, [sp, #12]
 3407 00be BDF83830 		ldrh	r3, [sp, #56]
 3408 00c2 0293     		str	r3, [sp, #8]
 3409 00c4 0023     		movs	r3, #0
 3410 00c6 0193     		str	r3, [sp, #4]
 3411 00c8 0093     		str	r3, [sp]
 3412 00ca 4346     		mov	r3, r8
 3413 00cc 5246     		mov	r2, r10
 3414 00ce 3946     		mov	r1, r7
 3415 00d0 4846     		mov	r0, r9
 3416 00d2 FFF7FEFF 		bl	USBD_EP_Tx
 3417              	.LVL325:
 3418 00d6 0446     		mov	r4, r0
 3419              	.LVL326:
1229:rtos/uC-USB-Device/Source/usbd_ep.c ****                            p_ep->Ix);
 3420              		.loc 1 1229 5 is_stmt 1 view .LVU1145
 3421 00d8 397A     		ldrb	r1, [r7, #8]	@ zero_extendqisi2
 3422 00da 99F80000 		ldrb	r0, [r9]	@ zero_extendqisi2
 3423              	.LVL327:
1229:rtos/uC-USB-Device/Source/usbd_ep.c ****                            p_ep->Ix);
 3424              		.loc 1 1229 5 is_stmt 0 view .LVU1146
 3425 00de FFF7FEFF 		bl	USBD_OS_EP_LockRelease
 3426              	.LVL328:
1232:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 3427              		.loc 1 1232 93 is_stmt 1 view .LVU1147
1234:rtos/uC-USB-Device/Source/usbd_ep.c **** }
 3428              		.loc 1 1234 5 view .LVU1148
1234:rtos/uC-USB-Device/Source/usbd_ep.c **** }
 3429              		.loc 1 1234 12 is_stmt 0 view .LVU1149
 3430 00e2 A4E7     		b	.L218
 3431              	.LVL329:
ARM GAS  /tmp/ccuUvpuw.s 			page 160


 3432              	.L227:
1201:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 3433              		.loc 1 1201 16 view .LVU1150
 3434 00e4 0024     		movs	r4, #0
 3435 00e6 A2E7     		b	.L218
 3436              	.L234:
 3437              		.align	2
 3438              	.L233:
 3439 00e8 00000000 		.word	.LANCHOR1
 3440              		.cfi_endproc
 3441              	.LFE6:
 3443              		.section	.text.USBD_IntrTxAsync,"ax",%progbits
 3444              		.align	1
 3445              		.global	USBD_IntrTxAsync
 3446              		.syntax unified
 3447              		.thumb
 3448              		.thumb_func
 3449              		.fpu fpv4-sp-d16
 3451              	USBD_IntrTxAsync:
 3452              	.LVL330:
 3453              	.LFB7:
1292:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_EP         *p_ep;
 3454              		.loc 1 1292 1 is_stmt 1 view -0
 3455              		.cfi_startproc
 3456              		@ args = 16, pretend = 0, frame = 0
 3457              		@ frame_needed = 0, uses_anonymous_args = 0
1292:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_EP         *p_ep;
 3458              		.loc 1 1292 1 is_stmt 0 view .LVU1152
 3459 0000 2DE9F047 		push	{r4, r5, r6, r7, r8, r9, r10, lr}
 3460              	.LCFI51:
 3461              		.cfi_def_cfa_offset 32
 3462              		.cfi_offset 4, -32
 3463              		.cfi_offset 5, -28
 3464              		.cfi_offset 6, -24
 3465              		.cfi_offset 7, -20
 3466              		.cfi_offset 8, -16
 3467              		.cfi_offset 9, -12
 3468              		.cfi_offset 10, -8
 3469              		.cfi_offset 14, -4
 3470 0004 86B0     		sub	sp, sp, #24
 3471              	.LCFI52:
 3472              		.cfi_def_cfa_offset 56
 3473 0006 0446     		mov	r4, r0
 3474 0008 0E46     		mov	r6, r1
 3475 000a 9146     		mov	r9, r2
 3476 000c 9846     		mov	r8, r3
 3477 000e 0E9F     		ldr	r7, [sp, #56]
 3478 0010 119D     		ldr	r5, [sp, #68]
1293:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DRV        *p_drv;
 3479              		.loc 1 1293 5 is_stmt 1 view .LVU1153
1294:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_INT08U       ep_phy_nbr;
 3480              		.loc 1 1294 5 view .LVU1154
1295:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DEV_STATE   state;
 3481              		.loc 1 1295 5 view .LVU1155
1296:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 3482              		.loc 1 1296 5 view .LVU1156
1299:rtos/uC-USB-Device/Source/usbd_ep.c **** 
ARM GAS  /tmp/ccuUvpuw.s 			page 161


 3483              		.loc 1 1299 56 view .LVU1157
1302:rtos/uC-USB-Device/Source/usbd_ep.c ****         CPU_SW_EXCEPTION(;);
 3484              		.loc 1 1302 5 view .LVU1158
1302:rtos/uC-USB-Device/Source/usbd_ep.c ****         CPU_SW_EXCEPTION(;);
 3485              		.loc 1 1302 8 is_stmt 0 view .LVU1159
 3486 0012 75B1     		cbz	r5, .L246
 3487              	.LVL331:
 3488              	.L236:
1303:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 3489              		.loc 1 1303 9 is_stmt 1 discriminator 1 view .LVU1160
1306:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_NULL_PTR;
 3490              		.loc 1 1306 5 discriminator 1 view .LVU1161
1306:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_NULL_PTR;
 3491              		.loc 1 1306 8 is_stmt 0 discriminator 1 view .LVU1162
 3492 0014 87B1     		cbz	r7, .L247
1312:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_drv == (USBD_DRV *)0) {
 3493              		.loc 1 1312 5 is_stmt 1 view .LVU1163
1312:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_drv == (USBD_DRV *)0) {
 3494              		.loc 1 1312 13 is_stmt 0 view .LVU1164
 3495 0016 2046     		mov	r0, r4
 3496 0018 FFF7FEFF 		bl	USBD_DrvRefGet
 3497              	.LVL332:
1313:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_DEV_INVALID_NBR;
 3498              		.loc 1 1313 5 is_stmt 1 view .LVU1165
1313:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_DEV_INVALID_NBR;
 3499              		.loc 1 1313 8 is_stmt 0 view .LVU1166
 3500 001c 8246     		mov	r10, r0
 3501 001e 80B1     		cbz	r0, .L248
1318:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (state != USBD_DEV_STATE_CONFIGURED) {                   /* EP transfers are ONLY allowed in
 3502              		.loc 1 1318 5 is_stmt 1 view .LVU1167
1318:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (state != USBD_DEV_STATE_CONFIGURED) {                   /* EP transfers are ONLY allowed in
 3503              		.loc 1 1318 13 is_stmt 0 view .LVU1168
 3504 0020 2946     		mov	r1, r5
 3505 0022 2046     		mov	r0, r4
 3506              	.LVL333:
1318:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (state != USBD_DEV_STATE_CONFIGURED) {                   /* EP transfers are ONLY allowed in
 3507              		.loc 1 1318 13 view .LVU1169
 3508 0024 FFF7FEFF 		bl	USBD_DevStateGet
 3509              	.LVL334:
1319:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_DEV_INVALID_STATE;
 3510              		.loc 1 1319 5 is_stmt 1 view .LVU1170
1319:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_DEV_INVALID_STATE;
 3511              		.loc 1 1319 8 is_stmt 0 view .LVU1171
 3512 0028 0528     		cmp	r0, #5
 3513 002a 0DD0     		beq	.L240
1320:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 3514              		.loc 1 1320 8 is_stmt 1 view .LVU1172
1320:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 3515              		.loc 1 1320 15 is_stmt 0 view .LVU1173
 3516 002c 6623     		movs	r3, #102
 3517 002e 2B80     		strh	r3, [r5]	@ movhi
1321:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 3518              		.loc 1 1321 9 is_stmt 1 view .LVU1174
 3519 0030 04E0     		b	.L235
 3520              	.LVL335:
 3521              	.L246:
1303:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
ARM GAS  /tmp/ccuUvpuw.s 			page 162


 3522              		.loc 1 1303 9 view .LVU1175
1303:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 3523              		.loc 1 1303 9 view .LVU1176
 3524 0032 FFF7FEFF 		bl	CPU_SW_Exception
 3525              	.LVL336:
1303:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 3526              		.loc 1 1303 9 is_stmt 0 view .LVU1177
 3527 0036 EDE7     		b	.L236
 3528              	.L247:
1307:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 3529              		.loc 1 1307 8 is_stmt 1 view .LVU1178
1307:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 3530              		.loc 1 1307 15 is_stmt 0 view .LVU1179
 3531 0038 0523     		movs	r3, #5
 3532 003a 2B80     		strh	r3, [r5]	@ movhi
1308:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 3533              		.loc 1 1308 9 is_stmt 1 view .LVU1180
 3534              	.L235:
1369:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 3535              		.loc 1 1369 1 is_stmt 0 view .LVU1181
 3536 003c 06B0     		add	sp, sp, #24
 3537              	.LCFI53:
 3538              		.cfi_remember_state
 3539              		.cfi_def_cfa_offset 32
 3540              		@ sp needed
 3541 003e BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, r10, pc}
 3542              	.LVL337:
 3543              	.L248:
 3544              	.LCFI54:
 3545              		.cfi_restore_state
1314:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 3546              		.loc 1 1314 8 is_stmt 1 view .LVU1182
1314:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 3547              		.loc 1 1314 15 is_stmt 0 view .LVU1183
 3548 0042 6523     		movs	r3, #101
 3549 0044 2B80     		strh	r3, [r5]	@ movhi
1315:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 3550              		.loc 1 1315 9 is_stmt 1 view .LVU1184
 3551 0046 F9E7     		b	.L235
 3552              	.LVL338:
 3553              	.L240:
1324:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_ep       = USBD_EP_TblPtrs[dev_nbr][ep_phy_nbr];
 3554              		.loc 1 1324 5 view .LVU1185
1324:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_ep       = USBD_EP_TblPtrs[dev_nbr][ep_phy_nbr];
 3555              		.loc 1 1324 18 is_stmt 0 view .LVU1186
 3556 0048 06F00F00 		and	r0, r6, #15
 3557              	.LVL339:
1324:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_ep       = USBD_EP_TblPtrs[dev_nbr][ep_phy_nbr];
 3558              		.loc 1 1324 18 view .LVU1187
 3559 004c F309     		lsrs	r3, r6, #7
1324:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_ep       = USBD_EP_TblPtrs[dev_nbr][ep_phy_nbr];
 3560              		.loc 1 1324 16 view .LVU1188
 3561 004e 03EB4000 		add	r0, r3, r0, lsl #1
 3562              	.LVL340:
1325:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 3563              		.loc 1 1325 5 is_stmt 1 view .LVU1189
1325:rtos/uC-USB-Device/Source/usbd_ep.c **** 
ARM GAS  /tmp/ccuUvpuw.s 			page 163


 3564              		.loc 1 1325 16 is_stmt 0 view .LVU1190
 3565 0052 00EB4414 		add	r4, r0, r4, lsl #5
 3566 0056 224B     		ldr	r3, .L251
 3567 0058 53F82440 		ldr	r4, [r3, r4, lsl #2]
 3568              	.LVL341:
1327:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_EP_INVALID_ADDR;
 3569              		.loc 1 1327 5 is_stmt 1 view .LVU1191
1327:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_EP_INVALID_ADDR;
 3570              		.loc 1 1327 8 is_stmt 0 view .LVU1192
 3571 005c ECB1     		cbz	r4, .L249
1332:rtos/uC-USB-Device/Source/usbd_ep.c ****                            p_ep->Ix,
 3572              		.loc 1 1332 5 is_stmt 1 view .LVU1193
 3573 005e 2B46     		mov	r3, r5
 3574 0060 0022     		movs	r2, #0
 3575 0062 217A     		ldrb	r1, [r4, #8]	@ zero_extendqisi2
 3576 0064 9AF80000 		ldrb	r0, [r10]	@ zero_extendqisi2
 3577              	.LVL342:
1332:rtos/uC-USB-Device/Source/usbd_ep.c ****                            p_ep->Ix,
 3578              		.loc 1 1332 5 is_stmt 0 view .LVU1194
 3579 0068 FFF7FEFF 		bl	USBD_OS_EP_LockAcquire
 3580              	.LVL343:
1336:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 3581              		.loc 1 1336 5 is_stmt 1 view .LVU1195
1336:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 3582              		.loc 1 1336 9 is_stmt 0 view .LVU1196
 3583 006c 2B88     		ldrh	r3, [r5]
1336:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 3584              		.loc 1 1336 8 view .LVU1197
 3585 006e 002B     		cmp	r3, #0
 3586 0070 E4D1     		bne	.L235
1340:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_OS_EP_LockRelease(p_drv->DevNbr,
 3587              		.loc 1 1340 5 is_stmt 1 view .LVU1198
1340:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_OS_EP_LockRelease(p_drv->DevNbr,
 3588              		.loc 1 1340 13 is_stmt 0 view .LVU1199
 3589 0072 2378     		ldrb	r3, [r4]	@ zero_extendqisi2
1340:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_OS_EP_LockRelease(p_drv->DevNbr,
 3590              		.loc 1 1340 8 view .LVU1200
 3591 0074 012B     		cmp	r3, #1
 3592 0076 14D1     		bne	.L250
1347:rtos/uC-USB-Device/Source/usbd_ep.c ****         ((ep_addr      & USBD_EP_DIR_MASK)  != USBD_EP_DIR_IN)) {
 3593              		.loc 1 1347 5 is_stmt 1 view .LVU1201
1347:rtos/uC-USB-Device/Source/usbd_ep.c ****         ((ep_addr      & USBD_EP_DIR_MASK)  != USBD_EP_DIR_IN)) {
 3594              		.loc 1 1347 15 is_stmt 0 view .LVU1202
 3595 0078 E378     		ldrb	r3, [r4, #3]	@ zero_extendqisi2
1347:rtos/uC-USB-Device/Source/usbd_ep.c ****         ((ep_addr      & USBD_EP_DIR_MASK)  != USBD_EP_DIR_IN)) {
 3596              		.loc 1 1347 8 view .LVU1203
 3597 007a 03F00303 		and	r3, r3, #3
 3598 007e 032B     		cmp	r3, #3
 3599 0080 02D1     		bne	.L243
1347:rtos/uC-USB-Device/Source/usbd_ep.c ****         ((ep_addr      & USBD_EP_DIR_MASK)  != USBD_EP_DIR_IN)) {
 3600              		.loc 1 1347 67 discriminator 1 view .LVU1204
 3601 0082 16F0800F 		tst	r6, #128
 3602 0086 15D1     		bne	.L244
 3603              	.L243:
1349:rtos/uC-USB-Device/Source/usbd_ep.c ****                                p_ep->Ix);
 3604              		.loc 1 1349 9 is_stmt 1 view .LVU1205
 3605 0088 217A     		ldrb	r1, [r4, #8]	@ zero_extendqisi2
ARM GAS  /tmp/ccuUvpuw.s 			page 164


 3606 008a 9AF80000 		ldrb	r0, [r10]	@ zero_extendqisi2
 3607 008e FFF7FEFF 		bl	USBD_OS_EP_LockRelease
 3608              	.LVL344:
1351:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 3609              		.loc 1 1351 8 view .LVU1206
1351:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 3610              		.loc 1 1351 15 is_stmt 0 view .LVU1207
 3611 0092 40F29313 		movw	r3, #403
 3612 0096 2B80     		strh	r3, [r5]	@ movhi
1352:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 3613              		.loc 1 1352 9 is_stmt 1 view .LVU1208
 3614 0098 D0E7     		b	.L235
 3615              	.LVL345:
 3616              	.L249:
1328:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 3617              		.loc 1 1328 8 view .LVU1209
1328:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 3618              		.loc 1 1328 15 is_stmt 0 view .LVU1210
 3619 009a 40F29113 		movw	r3, #401
 3620 009e 2B80     		strh	r3, [r5]	@ movhi
1329:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 3621              		.loc 1 1329 9 is_stmt 1 view .LVU1211
 3622 00a0 CCE7     		b	.L235
 3623              	.LVL346:
 3624              	.L250:
1341:rtos/uC-USB-Device/Source/usbd_ep.c ****                                p_ep->Ix);
 3625              		.loc 1 1341 9 view .LVU1212
 3626 00a2 217A     		ldrb	r1, [r4, #8]	@ zero_extendqisi2
 3627 00a4 9AF80000 		ldrb	r0, [r10]	@ zero_extendqisi2
 3628 00a8 FFF7FEFF 		bl	USBD_OS_EP_LockRelease
 3629              	.LVL347:
1343:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 3630              		.loc 1 1343 8 view .LVU1213
1343:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 3631              		.loc 1 1343 15 is_stmt 0 view .LVU1214
 3632 00ac 4FF4C973 		mov	r3, #402
 3633 00b0 2B80     		strh	r3, [r5]	@ movhi
1344:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 3634              		.loc 1 1344 9 is_stmt 1 view .LVU1215
 3635 00b2 C3E7     		b	.L235
 3636              	.L244:
1355:rtos/uC-USB-Device/Source/usbd_ep.c ****                      p_ep,
 3637              		.loc 1 1355 5 view .LVU1216
1355:rtos/uC-USB-Device/Source/usbd_ep.c ****                      p_ep,
 3638              		.loc 1 1355 11 is_stmt 0 view .LVU1217
 3639 00b4 0495     		str	r5, [sp, #16]
 3640 00b6 9DF84030 		ldrb	r3, [sp, #64]	@ zero_extendqisi2
 3641 00ba 0393     		str	r3, [sp, #12]
 3642 00bc 0023     		movs	r3, #0
 3643 00be 0293     		str	r3, [sp, #8]
 3644 00c0 0F9B     		ldr	r3, [sp, #60]
 3645 00c2 0193     		str	r3, [sp, #4]
 3646 00c4 0097     		str	r7, [sp]
 3647 00c6 4346     		mov	r3, r8
 3648 00c8 4A46     		mov	r2, r9
 3649 00ca 2146     		mov	r1, r4
 3650 00cc 5046     		mov	r0, r10
ARM GAS  /tmp/ccuUvpuw.s 			page 165


 3651 00ce FFF7FEFF 		bl	USBD_EP_Tx
 3652              	.LVL348:
1365:rtos/uC-USB-Device/Source/usbd_ep.c ****                            p_ep->Ix);
 3653              		.loc 1 1365 5 is_stmt 1 view .LVU1218
 3654 00d2 217A     		ldrb	r1, [r4, #8]	@ zero_extendqisi2
 3655 00d4 9AF80000 		ldrb	r0, [r10]	@ zero_extendqisi2
 3656 00d8 FFF7FEFF 		bl	USBD_OS_EP_LockRelease
 3657              	.LVL349:
1368:rtos/uC-USB-Device/Source/usbd_ep.c **** }
 3658              		.loc 1 1368 94 view .LVU1219
 3659 00dc AEE7     		b	.L235
 3660              	.L252:
 3661 00de 00BF     		.align	2
 3662              	.L251:
 3663 00e0 00000000 		.word	.LANCHOR1
 3664              		.cfi_endproc
 3665              	.LFE7:
 3667              		.section	.text.USBD_CtrlRx,"ax",%progbits
 3668              		.align	1
 3669              		.global	USBD_CtrlRx
 3670              		.syntax unified
 3671              		.thumb
 3672              		.thumb_func
 3673              		.fpu fpv4-sp-d16
 3675              	USBD_CtrlRx:
 3676              	.LVL350:
 3677              	.LFB9:
1731:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DRV        *p_drv;
 3678              		.loc 1 1731 1 view -0
 3679              		.cfi_startproc
 3680              		@ args = 4, pretend = 0, frame = 0
 3681              		@ frame_needed = 0, uses_anonymous_args = 0
1731:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DRV        *p_drv;
 3682              		.loc 1 1731 1 is_stmt 0 view .LVU1221
 3683 0000 2DE9F047 		push	{r4, r5, r6, r7, r8, r9, r10, lr}
 3684              	.LCFI55:
 3685              		.cfi_def_cfa_offset 32
 3686              		.cfi_offset 4, -32
 3687              		.cfi_offset 5, -28
 3688              		.cfi_offset 6, -24
 3689              		.cfi_offset 7, -20
 3690              		.cfi_offset 8, -16
 3691              		.cfi_offset 9, -12
 3692              		.cfi_offset 10, -8
 3693              		.cfi_offset 14, -4
 3694 0004 84B0     		sub	sp, sp, #16
 3695              	.LCFI56:
 3696              		.cfi_def_cfa_offset 48
 3697 0006 0446     		mov	r4, r0
 3698 0008 8A46     		mov	r10, r1
 3699 000a 1746     		mov	r7, r2
 3700 000c 9846     		mov	r8, r3
 3701 000e 0C9D     		ldr	r5, [sp, #48]
1732:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_EP         *p_ep;
 3702              		.loc 1 1732 5 is_stmt 1 view .LVU1222
1733:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_INT08U       ep_phy_nbr;
 3703              		.loc 1 1733 5 view .LVU1223
ARM GAS  /tmp/ccuUvpuw.s 			page 166


1734:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DEV_STATE   state;
 3704              		.loc 1 1734 5 view .LVU1224
1735:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_INT32U       xfer_len;
 3705              		.loc 1 1735 5 view .LVU1225
1736:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 3706              		.loc 1 1736 5 view .LVU1226
1739:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 3707              		.loc 1 1739 55 view .LVU1227
1742:rtos/uC-USB-Device/Source/usbd_ep.c ****         CPU_SW_EXCEPTION(0);
 3708              		.loc 1 1742 5 view .LVU1228
1742:rtos/uC-USB-Device/Source/usbd_ep.c ****         CPU_SW_EXCEPTION(0);
 3709              		.loc 1 1742 8 is_stmt 0 view .LVU1229
 3710 0010 002D     		cmp	r5, #0
 3711 0012 34D0     		beq	.L263
 3712              	.LVL351:
 3713              	.L254:
1743:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 3714              		.loc 1 1743 9 is_stmt 1 discriminator 1 view .LVU1230
1747:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_drv == (USBD_DRV *)0) {
 3715              		.loc 1 1747 5 discriminator 1 view .LVU1231
1747:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_drv == (USBD_DRV *)0) {
 3716              		.loc 1 1747 13 is_stmt 0 discriminator 1 view .LVU1232
 3717 0014 2046     		mov	r0, r4
 3718 0016 FFF7FEFF 		bl	USBD_DrvRefGet
 3719              	.LVL352:
1748:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_DEV_INVALID_NBR;
 3720              		.loc 1 1748 5 is_stmt 1 discriminator 1 view .LVU1233
1748:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_DEV_INVALID_NBR;
 3721              		.loc 1 1748 8 is_stmt 0 discriminator 1 view .LVU1234
 3722 001a 8146     		mov	r9, r0
 3723 001c 90B3     		cbz	r0, .L264
1753:rtos/uC-USB-Device/Source/usbd_ep.c ****     if ((state != USBD_DEV_STATE_DEFAULT)   &&
 3724              		.loc 1 1753 5 is_stmt 1 view .LVU1235
1753:rtos/uC-USB-Device/Source/usbd_ep.c ****     if ((state != USBD_DEV_STATE_DEFAULT)   &&
 3725              		.loc 1 1753 13 is_stmt 0 view .LVU1236
 3726 001e 2946     		mov	r1, r5
 3727 0020 2046     		mov	r0, r4
 3728              	.LVL353:
1753:rtos/uC-USB-Device/Source/usbd_ep.c ****     if ((state != USBD_DEV_STATE_DEFAULT)   &&
 3729              		.loc 1 1753 13 view .LVU1237
 3730 0022 FFF7FEFF 		bl	USBD_DevStateGet
 3731              	.LVL354:
1754:rtos/uC-USB-Device/Source/usbd_ep.c ****         (state != USBD_DEV_STATE_ADDRESSED) &&
 3732              		.loc 1 1754 5 is_stmt 1 view .LVU1238
1755:rtos/uC-USB-Device/Source/usbd_ep.c ****         (state != USBD_DEV_STATE_CONFIGURED)) {
 3733              		.loc 1 1755 45 is_stmt 0 view .LVU1239
 3734 0026 0338     		subs	r0, r0, #3
 3735              	.LVL355:
1755:rtos/uC-USB-Device/Source/usbd_ep.c ****         (state != USBD_DEV_STATE_CONFIGURED)) {
 3736              		.loc 1 1755 45 view .LVU1240
 3737 0028 C0B2     		uxtb	r0, r0
1754:rtos/uC-USB-Device/Source/usbd_ep.c ****         (state != USBD_DEV_STATE_ADDRESSED) &&
 3738              		.loc 1 1754 8 view .LVU1241
 3739 002a 0228     		cmp	r0, #2
 3740 002c 31D8     		bhi	.L265
1761:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_ep       = USBD_EP_TblPtrs[dev_nbr][ep_phy_nbr];
 3741              		.loc 1 1761 5 is_stmt 1 view .LVU1242
ARM GAS  /tmp/ccuUvpuw.s 			page 167


 3742              	.LVL356:
1762:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 3743              		.loc 1 1762 5 view .LVU1243
1762:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 3744              		.loc 1 1762 16 is_stmt 0 view .LVU1244
 3745 002e E401     		lsls	r4, r4, #7
 3746 0030 274B     		ldr	r3, .L269
 3747 0032 1E59     		ldr	r6, [r3, r4]
 3748              	.LVL357:
1764:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_EP_INVALID_ADDR;
 3749              		.loc 1 1764 5 is_stmt 1 view .LVU1245
1764:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_EP_INVALID_ADDR;
 3750              		.loc 1 1764 8 is_stmt 0 view .LVU1246
 3751 0034 8EB3     		cbz	r6, .L266
1769:rtos/uC-USB-Device/Source/usbd_ep.c ****                            p_ep->Ix,
 3752              		.loc 1 1769 5 is_stmt 1 view .LVU1247
 3753 0036 2B46     		mov	r3, r5
 3754 0038 0022     		movs	r2, #0
 3755 003a 317A     		ldrb	r1, [r6, #8]	@ zero_extendqisi2
 3756 003c 99F80000 		ldrb	r0, [r9]	@ zero_extendqisi2
 3757 0040 FFF7FEFF 		bl	USBD_OS_EP_LockAcquire
 3758              	.LVL358:
1773:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (0u);
 3759              		.loc 1 1773 5 view .LVU1248
1773:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (0u);
 3760              		.loc 1 1773 9 is_stmt 0 view .LVU1249
 3761 0044 2B88     		ldrh	r3, [r5]
1773:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (0u);
 3762              		.loc 1 1773 8 view .LVU1250
 3763 0046 002B     		cmp	r3, #0
 3764 0048 40D1     		bne	.L261
1777:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_OS_EP_LockRelease(p_drv->DevNbr,
 3765              		.loc 1 1777 5 is_stmt 1 view .LVU1251
1777:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_OS_EP_LockRelease(p_drv->DevNbr,
 3766              		.loc 1 1777 13 is_stmt 0 view .LVU1252
 3767 004a 3378     		ldrb	r3, [r6]	@ zero_extendqisi2
1777:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_OS_EP_LockRelease(p_drv->DevNbr,
 3768              		.loc 1 1777 8 view .LVU1253
 3769 004c 012B     		cmp	r3, #1
 3770 004e 29D1     		bne	.L267
1784:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_OS_EP_LockRelease(p_drv->DevNbr,
 3771              		.loc 1 1784 5 is_stmt 1 view .LVU1254
1784:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_OS_EP_LockRelease(p_drv->DevNbr,
 3772              		.loc 1 1784 14 is_stmt 0 view .LVU1255
 3773 0050 F378     		ldrb	r3, [r6, #3]	@ zero_extendqisi2
1784:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_OS_EP_LockRelease(p_drv->DevNbr,
 3774              		.loc 1 1784 8 view .LVU1256
 3775 0052 13F0030F 		tst	r3, #3
 3776 0056 2FD1     		bne	.L268
1791:rtos/uC-USB-Device/Source/usbd_ep.c ****                                            p_ep,
 3777              		.loc 1 1791 5 is_stmt 1 view .LVU1257
1791:rtos/uC-USB-Device/Source/usbd_ep.c ****                                            p_ep,
 3778              		.loc 1 1791 16 is_stmt 0 view .LVU1258
 3779 0058 0395     		str	r5, [sp, #12]
 3780 005a CDF80880 		str	r8, [sp, #8]
 3781 005e 0023     		movs	r3, #0
 3782 0060 0193     		str	r3, [sp, #4]
ARM GAS  /tmp/ccuUvpuw.s 			page 168


 3783 0062 0093     		str	r3, [sp]
 3784 0064 3B46     		mov	r3, r7
 3785 0066 5246     		mov	r2, r10
 3786 0068 3146     		mov	r1, r6
 3787 006a 4846     		mov	r0, r9
 3788 006c FFF7FEFF 		bl	USBD_EP_Rx
 3789              	.LVL359:
 3790 0070 0446     		mov	r4, r0
 3791              	.LVL360:
1800:rtos/uC-USB-Device/Source/usbd_ep.c ****                            p_ep->Ix);
 3792              		.loc 1 1800 5 is_stmt 1 view .LVU1259
 3793 0072 317A     		ldrb	r1, [r6, #8]	@ zero_extendqisi2
 3794 0074 99F80000 		ldrb	r0, [r9]	@ zero_extendqisi2
 3795              	.LVL361:
1800:rtos/uC-USB-Device/Source/usbd_ep.c ****                            p_ep->Ix);
 3796              		.loc 1 1800 5 is_stmt 0 view .LVU1260
 3797 0078 FFF7FEFF 		bl	USBD_OS_EP_LockRelease
 3798              	.LVL362:
1803:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 3799              		.loc 1 1803 93 is_stmt 1 view .LVU1261
1805:rtos/uC-USB-Device/Source/usbd_ep.c **** }
 3800              		.loc 1 1805 5 view .LVU1262
1805:rtos/uC-USB-Device/Source/usbd_ep.c **** }
 3801              		.loc 1 1805 12 is_stmt 0 view .LVU1263
 3802 007c 05E0     		b	.L253
 3803              	.LVL363:
 3804              	.L263:
1743:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 3805              		.loc 1 1743 9 is_stmt 1 view .LVU1264
1743:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 3806              		.loc 1 1743 9 view .LVU1265
 3807 007e FFF7FEFF 		bl	CPU_SW_Exception
 3808              	.LVL364:
1743:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 3809              		.loc 1 1743 9 is_stmt 0 view .LVU1266
 3810 0082 C7E7     		b	.L254
 3811              	.LVL365:
 3812              	.L264:
1749:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (0u);
 3813              		.loc 1 1749 8 is_stmt 1 view .LVU1267
1749:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (0u);
 3814              		.loc 1 1749 15 is_stmt 0 view .LVU1268
 3815 0084 6523     		movs	r3, #101
 3816 0086 2B80     		strh	r3, [r5]	@ movhi
1750:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 3817              		.loc 1 1750 9 is_stmt 1 view .LVU1269
1750:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 3818              		.loc 1 1750 16 is_stmt 0 view .LVU1270
 3819 0088 0024     		movs	r4, #0
 3820              	.LVL366:
 3821              	.L253:
1806:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 3822              		.loc 1 1806 1 view .LVU1271
 3823 008a 2046     		mov	r0, r4
 3824 008c 04B0     		add	sp, sp, #16
 3825              	.LCFI57:
 3826              		.cfi_remember_state
ARM GAS  /tmp/ccuUvpuw.s 			page 169


 3827              		.cfi_def_cfa_offset 32
 3828              		@ sp needed
 3829 008e BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, r10, pc}
 3830              	.LVL367:
 3831              	.L265:
 3832              	.LCFI58:
 3833              		.cfi_restore_state
1757:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (0u);
 3834              		.loc 1 1757 8 is_stmt 1 view .LVU1272
1757:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (0u);
 3835              		.loc 1 1757 15 is_stmt 0 view .LVU1273
 3836 0092 6623     		movs	r3, #102
 3837 0094 2B80     		strh	r3, [r5]	@ movhi
1758:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 3838              		.loc 1 1758 9 is_stmt 1 view .LVU1274
1758:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 3839              		.loc 1 1758 16 is_stmt 0 view .LVU1275
 3840 0096 0024     		movs	r4, #0
 3841 0098 F7E7     		b	.L253
 3842              	.LVL368:
 3843              	.L266:
1765:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (0u);
 3844              		.loc 1 1765 8 is_stmt 1 view .LVU1276
1765:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (0u);
 3845              		.loc 1 1765 15 is_stmt 0 view .LVU1277
 3846 009a 40F29113 		movw	r3, #401
 3847 009e 2B80     		strh	r3, [r5]	@ movhi
1766:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 3848              		.loc 1 1766 9 is_stmt 1 view .LVU1278
1766:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 3849              		.loc 1 1766 16 is_stmt 0 view .LVU1279
 3850 00a0 0024     		movs	r4, #0
 3851 00a2 F2E7     		b	.L253
 3852              	.L267:
1778:rtos/uC-USB-Device/Source/usbd_ep.c ****                                p_ep->Ix);
 3853              		.loc 1 1778 9 is_stmt 1 view .LVU1280
 3854 00a4 317A     		ldrb	r1, [r6, #8]	@ zero_extendqisi2
 3855 00a6 99F80000 		ldrb	r0, [r9]	@ zero_extendqisi2
 3856 00aa FFF7FEFF 		bl	USBD_OS_EP_LockRelease
 3857              	.LVL369:
1780:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (0u);
 3858              		.loc 1 1780 8 view .LVU1281
1780:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (0u);
 3859              		.loc 1 1780 15 is_stmt 0 view .LVU1282
 3860 00ae 4FF4C973 		mov	r3, #402
 3861 00b2 2B80     		strh	r3, [r5]	@ movhi
1781:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 3862              		.loc 1 1781 9 is_stmt 1 view .LVU1283
1781:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 3863              		.loc 1 1781 16 is_stmt 0 view .LVU1284
 3864 00b4 0024     		movs	r4, #0
 3865 00b6 E8E7     		b	.L253
 3866              	.L268:
1785:rtos/uC-USB-Device/Source/usbd_ep.c ****                                p_ep->Ix);
 3867              		.loc 1 1785 9 is_stmt 1 view .LVU1285
 3868 00b8 317A     		ldrb	r1, [r6, #8]	@ zero_extendqisi2
 3869 00ba 99F80000 		ldrb	r0, [r9]	@ zero_extendqisi2
ARM GAS  /tmp/ccuUvpuw.s 			page 170


 3870 00be FFF7FEFF 		bl	USBD_OS_EP_LockRelease
 3871              	.LVL370:
1787:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (0u);
 3872              		.loc 1 1787 8 view .LVU1286
1787:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (0u);
 3873              		.loc 1 1787 15 is_stmt 0 view .LVU1287
 3874 00c2 40F29313 		movw	r3, #403
 3875 00c6 2B80     		strh	r3, [r5]	@ movhi
1788:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 3876              		.loc 1 1788 9 is_stmt 1 view .LVU1288
1788:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 3877              		.loc 1 1788 16 is_stmt 0 view .LVU1289
 3878 00c8 0024     		movs	r4, #0
 3879 00ca DEE7     		b	.L253
 3880              	.L261:
1774:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 3881              		.loc 1 1774 16 view .LVU1290
 3882 00cc 0024     		movs	r4, #0
 3883 00ce DCE7     		b	.L253
 3884              	.L270:
 3885              		.align	2
 3886              	.L269:
 3887 00d0 00000000 		.word	.LANCHOR1
 3888              		.cfi_endproc
 3889              	.LFE9:
 3891              		.section	.text.USBD_CtrlTx,"ax",%progbits
 3892              		.align	1
 3893              		.global	USBD_CtrlTx
 3894              		.syntax unified
 3895              		.thumb
 3896              		.thumb_func
 3897              		.fpu fpv4-sp-d16
 3899              	USBD_CtrlTx:
 3900              	.LVL371:
 3901              	.LFB10:
1857:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DRV        *p_drv;
 3902              		.loc 1 1857 1 is_stmt 1 view -0
 3903              		.cfi_startproc
 3904              		@ args = 8, pretend = 0, frame = 0
 3905              		@ frame_needed = 0, uses_anonymous_args = 0
1857:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DRV        *p_drv;
 3906              		.loc 1 1857 1 is_stmt 0 view .LVU1292
 3907 0000 2DE9F043 		push	{r4, r5, r6, r7, r8, r9, lr}
 3908              	.LCFI59:
 3909              		.cfi_def_cfa_offset 28
 3910              		.cfi_offset 4, -28
 3911              		.cfi_offset 5, -24
 3912              		.cfi_offset 6, -20
 3913              		.cfi_offset 7, -16
 3914              		.cfi_offset 8, -12
 3915              		.cfi_offset 9, -8
 3916              		.cfi_offset 14, -4
 3917 0004 87B0     		sub	sp, sp, #28
 3918              	.LCFI60:
 3919              		.cfi_def_cfa_offset 56
 3920 0006 0546     		mov	r5, r0
 3921 0008 0F46     		mov	r7, r1
ARM GAS  /tmp/ccuUvpuw.s 			page 171


 3922 000a 1446     		mov	r4, r2
 3923 000c 9846     		mov	r8, r3
 3924 000e 0F9E     		ldr	r6, [sp, #60]
1858:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_EP         *p_ep;
 3925              		.loc 1 1858 5 is_stmt 1 view .LVU1293
1859:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_INT08U       ep_phy_nbr;
 3926              		.loc 1 1859 5 view .LVU1294
1860:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DEV_STATE   state;
 3927              		.loc 1 1860 5 view .LVU1295
1861:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_INT32U       xfer_len;
 3928              		.loc 1 1861 5 view .LVU1296
1862:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 3929              		.loc 1 1862 5 view .LVU1297
1865:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 3930              		.loc 1 1865 55 view .LVU1298
1868:rtos/uC-USB-Device/Source/usbd_ep.c ****         CPU_SW_EXCEPTION(0);
 3931              		.loc 1 1868 5 view .LVU1299
1868:rtos/uC-USB-Device/Source/usbd_ep.c ****         CPU_SW_EXCEPTION(0);
 3932              		.loc 1 1868 8 is_stmt 0 view .LVU1300
 3933 0010 002E     		cmp	r6, #0
 3934 0012 3CD0     		beq	.L282
 3935              	.LVL372:
 3936              	.L272:
1869:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 3937              		.loc 1 1869 9 is_stmt 1 discriminator 1 view .LVU1301
1873:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_drv == (USBD_DRV *)0) {
 3938              		.loc 1 1873 5 discriminator 1 view .LVU1302
1873:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_drv == (USBD_DRV *)0) {
 3939              		.loc 1 1873 13 is_stmt 0 discriminator 1 view .LVU1303
 3940 0014 2846     		mov	r0, r5
 3941 0016 FFF7FEFF 		bl	USBD_DrvRefGet
 3942              	.LVL373:
1874:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_DEV_INVALID_NBR;
 3943              		.loc 1 1874 5 is_stmt 1 discriminator 1 view .LVU1304
1874:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_DEV_INVALID_NBR;
 3944              		.loc 1 1874 8 is_stmt 0 discriminator 1 view .LVU1305
 3945 001a 8146     		mov	r9, r0
 3946 001c 0028     		cmp	r0, #0
 3947 001e 39D0     		beq	.L283
1879:rtos/uC-USB-Device/Source/usbd_ep.c ****     if ((state != USBD_DEV_STATE_DEFAULT)   &&
 3948              		.loc 1 1879 5 is_stmt 1 view .LVU1306
1879:rtos/uC-USB-Device/Source/usbd_ep.c ****     if ((state != USBD_DEV_STATE_DEFAULT)   &&
 3949              		.loc 1 1879 13 is_stmt 0 view .LVU1307
 3950 0020 3146     		mov	r1, r6
 3951 0022 2846     		mov	r0, r5
 3952              	.LVL374:
1879:rtos/uC-USB-Device/Source/usbd_ep.c ****     if ((state != USBD_DEV_STATE_DEFAULT)   &&
 3953              		.loc 1 1879 13 view .LVU1308
 3954 0024 FFF7FEFF 		bl	USBD_DevStateGet
 3955              	.LVL375:
1880:rtos/uC-USB-Device/Source/usbd_ep.c ****         (state != USBD_DEV_STATE_ADDRESSED) &&
 3956              		.loc 1 1880 5 is_stmt 1 view .LVU1309
1881:rtos/uC-USB-Device/Source/usbd_ep.c ****         (state != USBD_DEV_STATE_CONFIGURED)) {
 3957              		.loc 1 1881 45 is_stmt 0 view .LVU1310
 3958 0028 0338     		subs	r0, r0, #3
 3959              	.LVL376:
1881:rtos/uC-USB-Device/Source/usbd_ep.c ****         (state != USBD_DEV_STATE_CONFIGURED)) {
ARM GAS  /tmp/ccuUvpuw.s 			page 172


 3960              		.loc 1 1881 45 view .LVU1311
 3961 002a C0B2     		uxtb	r0, r0
1880:rtos/uC-USB-Device/Source/usbd_ep.c ****         (state != USBD_DEV_STATE_ADDRESSED) &&
 3962              		.loc 1 1880 8 view .LVU1312
 3963 002c 0228     		cmp	r0, #2
 3964 002e 38D8     		bhi	.L284
1887:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_INVALID_ARG;
 3965              		.loc 1 1887 5 is_stmt 1 view .LVU1313
1887:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_INVALID_ARG;
 3966              		.loc 1 1887 8 is_stmt 0 view .LVU1314
 3967 0030 002C     		cmp	r4, #0
 3968 0032 3AD0     		beq	.L285
1892:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_ep       = USBD_EP_TblPtrs[dev_nbr][ep_phy_nbr];
 3969              		.loc 1 1892 5 is_stmt 1 view .LVU1315
 3970              	.LVL377:
1893:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 3971              		.loc 1 1893 5 view .LVU1316
1893:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 3972              		.loc 1 1893 16 is_stmt 0 view .LVU1317
 3973 0034 2C48     		ldr	r0, .L289
 3974 0036 00EBC515 		add	r5, r0, r5, lsl #7
 3975 003a 6D68     		ldr	r5, [r5, #4]
 3976              	.LVL378:
1895:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_EP_INVALID_ADDR;
 3977              		.loc 1 1895 5 is_stmt 1 view .LVU1318
1895:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_EP_INVALID_ADDR;
 3978              		.loc 1 1895 8 is_stmt 0 view .LVU1319
 3979 003c 002D     		cmp	r5, #0
 3980 003e 37D0     		beq	.L286
1900:rtos/uC-USB-Device/Source/usbd_ep.c ****                            p_ep->Ix,
 3981              		.loc 1 1900 5 is_stmt 1 view .LVU1320
 3982 0040 3346     		mov	r3, r6
 3983 0042 0022     		movs	r2, #0
 3984 0044 297A     		ldrb	r1, [r5, #8]	@ zero_extendqisi2
 3985 0046 99F80000 		ldrb	r0, [r9]	@ zero_extendqisi2
 3986 004a FFF7FEFF 		bl	USBD_OS_EP_LockAcquire
 3987              	.LVL379:
1904:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (0u);
 3988              		.loc 1 1904 5 view .LVU1321
1904:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (0u);
 3989              		.loc 1 1904 9 is_stmt 0 view .LVU1322
 3990 004e 3388     		ldrh	r3, [r6]
1904:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (0u);
 3991              		.loc 1 1904 8 view .LVU1323
 3992 0050 002B     		cmp	r3, #0
 3993 0052 46D1     		bne	.L280
1908:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_OS_EP_LockRelease(p_drv->DevNbr,
 3994              		.loc 1 1908 5 is_stmt 1 view .LVU1324
1908:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_OS_EP_LockRelease(p_drv->DevNbr,
 3995              		.loc 1 1908 13 is_stmt 0 view .LVU1325
 3996 0054 2B78     		ldrb	r3, [r5]	@ zero_extendqisi2
1908:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_OS_EP_LockRelease(p_drv->DevNbr,
 3997              		.loc 1 1908 8 view .LVU1326
 3998 0056 012B     		cmp	r3, #1
 3999 0058 2FD1     		bne	.L287
1915:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_OS_EP_LockRelease(p_drv->DevNbr,
 4000              		.loc 1 1915 5 is_stmt 1 view .LVU1327
ARM GAS  /tmp/ccuUvpuw.s 			page 173


1915:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_OS_EP_LockRelease(p_drv->DevNbr,
 4001              		.loc 1 1915 14 is_stmt 0 view .LVU1328
 4002 005a EB78     		ldrb	r3, [r5, #3]	@ zero_extendqisi2
1915:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_OS_EP_LockRelease(p_drv->DevNbr,
 4003              		.loc 1 1915 8 view .LVU1329
 4004 005c 13F0030F 		tst	r3, #3
 4005 0060 35D1     		bne	.L288
1922:rtos/uC-USB-Device/Source/usbd_ep.c ****                                            p_ep,
 4006              		.loc 1 1922 5 is_stmt 1 view .LVU1330
1922:rtos/uC-USB-Device/Source/usbd_ep.c ****                                            p_ep,
 4007              		.loc 1 1922 16 is_stmt 0 view .LVU1331
 4008 0062 0496     		str	r6, [sp, #16]
 4009 0064 9DF83830 		ldrb	r3, [sp, #56]	@ zero_extendqisi2
 4010 0068 0393     		str	r3, [sp, #12]
 4011 006a CDF80880 		str	r8, [sp, #8]
 4012 006e 0023     		movs	r3, #0
 4013 0070 0193     		str	r3, [sp, #4]
 4014 0072 0093     		str	r3, [sp]
 4015 0074 2346     		mov	r3, r4
 4016 0076 3A46     		mov	r2, r7
 4017 0078 2946     		mov	r1, r5
 4018 007a 4846     		mov	r0, r9
 4019 007c FFF7FEFF 		bl	USBD_EP_Tx
 4020              	.LVL380:
 4021 0080 0446     		mov	r4, r0
 4022              	.LVL381:
1932:rtos/uC-USB-Device/Source/usbd_ep.c ****                            p_ep->Ix);
 4023              		.loc 1 1932 5 is_stmt 1 view .LVU1332
 4024 0082 297A     		ldrb	r1, [r5, #8]	@ zero_extendqisi2
 4025 0084 99F80000 		ldrb	r0, [r9]	@ zero_extendqisi2
 4026              	.LVL382:
1932:rtos/uC-USB-Device/Source/usbd_ep.c ****                            p_ep->Ix);
 4027              		.loc 1 1932 5 is_stmt 0 view .LVU1333
 4028 0088 FFF7FEFF 		bl	USBD_OS_EP_LockRelease
 4029              	.LVL383:
1935:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 4030              		.loc 1 1935 93 is_stmt 1 view .LVU1334
1937:rtos/uC-USB-Device/Source/usbd_ep.c **** }
 4031              		.loc 1 1937 5 view .LVU1335
1937:rtos/uC-USB-Device/Source/usbd_ep.c **** }
 4032              		.loc 1 1937 12 is_stmt 0 view .LVU1336
 4033 008c 05E0     		b	.L271
 4034              	.LVL384:
 4035              	.L282:
1869:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 4036              		.loc 1 1869 9 is_stmt 1 view .LVU1337
1869:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 4037              		.loc 1 1869 9 view .LVU1338
 4038 008e FFF7FEFF 		bl	CPU_SW_Exception
 4039              	.LVL385:
1869:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 4040              		.loc 1 1869 9 is_stmt 0 view .LVU1339
 4041 0092 BFE7     		b	.L272
 4042              	.LVL386:
 4043              	.L283:
1875:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (0u);
 4044              		.loc 1 1875 8 is_stmt 1 view .LVU1340
ARM GAS  /tmp/ccuUvpuw.s 			page 174


1875:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (0u);
 4045              		.loc 1 1875 15 is_stmt 0 view .LVU1341
 4046 0094 6523     		movs	r3, #101
 4047 0096 3380     		strh	r3, [r6]	@ movhi
1876:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 4048              		.loc 1 1876 9 is_stmt 1 view .LVU1342
1876:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 4049              		.loc 1 1876 16 is_stmt 0 view .LVU1343
 4050 0098 0024     		movs	r4, #0
 4051              	.LVL387:
 4052              	.L271:
1938:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 4053              		.loc 1 1938 1 view .LVU1344
 4054 009a 2046     		mov	r0, r4
 4055 009c 07B0     		add	sp, sp, #28
 4056              	.LCFI61:
 4057              		.cfi_remember_state
 4058              		.cfi_def_cfa_offset 28
 4059              		@ sp needed
 4060 009e BDE8F083 		pop	{r4, r5, r6, r7, r8, r9, pc}
 4061              	.LVL388:
 4062              	.L284:
 4063              	.LCFI62:
 4064              		.cfi_restore_state
1883:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (0u);
 4065              		.loc 1 1883 8 is_stmt 1 view .LVU1345
1883:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (0u);
 4066              		.loc 1 1883 15 is_stmt 0 view .LVU1346
 4067 00a2 6623     		movs	r3, #102
 4068 00a4 3380     		strh	r3, [r6]	@ movhi
1884:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 4069              		.loc 1 1884 9 is_stmt 1 view .LVU1347
1884:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 4070              		.loc 1 1884 16 is_stmt 0 view .LVU1348
 4071 00a6 0024     		movs	r4, #0
 4072              	.LVL389:
1884:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 4073              		.loc 1 1884 16 view .LVU1349
 4074 00a8 F7E7     		b	.L271
 4075              	.LVL390:
 4076              	.L285:
1888:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (0u);
 4077              		.loc 1 1888 8 is_stmt 1 view .LVU1350
1888:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (0u);
 4078              		.loc 1 1888 15 is_stmt 0 view .LVU1351
 4079 00aa 0623     		movs	r3, #6
 4080 00ac 3380     		strh	r3, [r6]	@ movhi
1889:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 4081              		.loc 1 1889 9 is_stmt 1 view .LVU1352
1889:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 4082              		.loc 1 1889 16 is_stmt 0 view .LVU1353
 4083 00ae F4E7     		b	.L271
 4084              	.LVL391:
 4085              	.L286:
1896:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (0u);
 4086              		.loc 1 1896 8 is_stmt 1 view .LVU1354
1896:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (0u);
ARM GAS  /tmp/ccuUvpuw.s 			page 175


 4087              		.loc 1 1896 15 is_stmt 0 view .LVU1355
 4088 00b0 40F29113 		movw	r3, #401
 4089 00b4 3380     		strh	r3, [r6]	@ movhi
1897:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 4090              		.loc 1 1897 9 is_stmt 1 view .LVU1356
1897:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 4091              		.loc 1 1897 16 is_stmt 0 view .LVU1357
 4092 00b6 0024     		movs	r4, #0
 4093              	.LVL392:
1897:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 4094              		.loc 1 1897 16 view .LVU1358
 4095 00b8 EFE7     		b	.L271
 4096              	.LVL393:
 4097              	.L287:
1909:rtos/uC-USB-Device/Source/usbd_ep.c ****                                p_ep->Ix);
 4098              		.loc 1 1909 9 is_stmt 1 view .LVU1359
 4099 00ba 297A     		ldrb	r1, [r5, #8]	@ zero_extendqisi2
 4100 00bc 99F80000 		ldrb	r0, [r9]	@ zero_extendqisi2
 4101 00c0 FFF7FEFF 		bl	USBD_OS_EP_LockRelease
 4102              	.LVL394:
1911:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (0u);
 4103              		.loc 1 1911 8 view .LVU1360
1911:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (0u);
 4104              		.loc 1 1911 15 is_stmt 0 view .LVU1361
 4105 00c4 4FF4C973 		mov	r3, #402
 4106 00c8 3380     		strh	r3, [r6]	@ movhi
1912:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 4107              		.loc 1 1912 9 is_stmt 1 view .LVU1362
1912:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 4108              		.loc 1 1912 16 is_stmt 0 view .LVU1363
 4109 00ca 0024     		movs	r4, #0
 4110              	.LVL395:
1912:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 4111              		.loc 1 1912 16 view .LVU1364
 4112 00cc E5E7     		b	.L271
 4113              	.LVL396:
 4114              	.L288:
1916:rtos/uC-USB-Device/Source/usbd_ep.c ****                                p_ep->Ix);
 4115              		.loc 1 1916 9 is_stmt 1 view .LVU1365
 4116 00ce 297A     		ldrb	r1, [r5, #8]	@ zero_extendqisi2
 4117 00d0 99F80000 		ldrb	r0, [r9]	@ zero_extendqisi2
 4118 00d4 FFF7FEFF 		bl	USBD_OS_EP_LockRelease
 4119              	.LVL397:
1918:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (0u);
 4120              		.loc 1 1918 8 view .LVU1366
1918:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (0u);
 4121              		.loc 1 1918 15 is_stmt 0 view .LVU1367
 4122 00d8 40F29313 		movw	r3, #403
 4123 00dc 3380     		strh	r3, [r6]	@ movhi
1919:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 4124              		.loc 1 1919 9 is_stmt 1 view .LVU1368
1919:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 4125              		.loc 1 1919 16 is_stmt 0 view .LVU1369
 4126 00de 0024     		movs	r4, #0
 4127              	.LVL398:
1919:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 4128              		.loc 1 1919 16 view .LVU1370
ARM GAS  /tmp/ccuUvpuw.s 			page 176


 4129 00e0 DBE7     		b	.L271
 4130              	.LVL399:
 4131              	.L280:
1905:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 4132              		.loc 1 1905 16 view .LVU1371
 4133 00e2 0024     		movs	r4, #0
 4134              	.LVL400:
1905:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 4135              		.loc 1 1905 16 view .LVU1372
 4136 00e4 D9E7     		b	.L271
 4137              	.L290:
 4138 00e6 00BF     		.align	2
 4139              	.L289:
 4140 00e8 00000000 		.word	.LANCHOR1
 4141              		.cfi_endproc
 4142              	.LFE10:
 4144              		.section	.text.USBD_CtrlStall,"ax",%progbits
 4145              		.align	1
 4146              		.global	USBD_CtrlStall
 4147              		.syntax unified
 4148              		.thumb
 4149              		.thumb_func
 4150              		.fpu fpv4-sp-d16
 4152              	USBD_CtrlStall:
 4153              	.LVL401:
 4154              	.LFB14:
2144:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_EP       *p_ep_out;
 4155              		.loc 1 2144 1 is_stmt 1 view -0
 4156              		.cfi_startproc
 4157              		@ args = 0, pretend = 0, frame = 0
 4158              		@ frame_needed = 0, uses_anonymous_args = 0
2144:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_EP       *p_ep_out;
 4159              		.loc 1 2144 1 is_stmt 0 view .LVU1374
 4160 0000 2DE9F843 		push	{r3, r4, r5, r6, r7, r8, r9, lr}
 4161              	.LCFI63:
 4162              		.cfi_def_cfa_offset 32
 4163              		.cfi_offset 3, -32
 4164              		.cfi_offset 4, -28
 4165              		.cfi_offset 5, -24
 4166              		.cfi_offset 6, -20
 4167              		.cfi_offset 7, -16
 4168              		.cfi_offset 8, -12
 4169              		.cfi_offset 9, -8
 4170              		.cfi_offset 14, -4
 4171 0004 0446     		mov	r4, r0
 4172 0006 0D46     		mov	r5, r1
2145:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_EP       *p_ep_in;
 4173              		.loc 1 2145 5 is_stmt 1 view .LVU1375
2146:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DRV      *p_drv;
 4174              		.loc 1 2146 5 view .LVU1376
2147:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DRV_API  *p_drv_api;
 4175              		.loc 1 2147 5 view .LVU1377
2148:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_INT08U     ep_phy_nbr;
 4176              		.loc 1 2148 5 view .LVU1378
2149:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_BOOLEAN    stall_in;
 4177              		.loc 1 2149 5 view .LVU1379
2150:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_BOOLEAN    stall_out;
ARM GAS  /tmp/ccuUvpuw.s 			page 177


 4178              		.loc 1 2150 5 view .LVU1380
2151:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 4179              		.loc 1 2151 5 view .LVU1381
2154:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_drv == (USBD_DRV *)0) {
 4180              		.loc 1 2154 5 view .LVU1382
2154:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_drv == (USBD_DRV *)0) {
 4181              		.loc 1 2154 13 is_stmt 0 view .LVU1383
 4182 0008 FFF7FEFF 		bl	USBD_DrvRefGet
 4183              	.LVL402:
2155:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_DEV_INVALID_NBR;
 4184              		.loc 1 2155 5 is_stmt 1 view .LVU1384
2155:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_DEV_INVALID_NBR;
 4185              		.loc 1 2155 8 is_stmt 0 view .LVU1385
 4186 000c 38B3     		cbz	r0, .L302
 4187 000e 0746     		mov	r7, r0
2160:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_ep_out   = USBD_EP_TblPtrs[dev_nbr][ep_phy_nbr];
 4188              		.loc 1 2160 5 is_stmt 1 view .LVU1386
 4189              	.LVL403:
2161:rtos/uC-USB-Device/Source/usbd_ep.c ****     ep_phy_nbr = USBD_EP_ADDR_TO_PHY(USBD_EP_ADDR_CTRL_IN);
 4190              		.loc 1 2161 5 view .LVU1387
2161:rtos/uC-USB-Device/Source/usbd_ep.c ****     ep_phy_nbr = USBD_EP_ADDR_TO_PHY(USBD_EP_ADDR_CTRL_IN);
 4191              		.loc 1 2161 16 is_stmt 0 view .LVU1388
 4192 0010 284B     		ldr	r3, .L305
 4193 0012 E201     		lsls	r2, r4, #7
 4194 0014 03EBC414 		add	r4, r3, r4, lsl #7
 4195 0018 9E58     		ldr	r6, [r3, r2]
 4196              	.LVL404:
2162:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_ep_in    = USBD_EP_TblPtrs[dev_nbr][ep_phy_nbr];
 4197              		.loc 1 2162 5 is_stmt 1 view .LVU1389
2163:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 4198              		.loc 1 2163 5 view .LVU1390
2163:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 4199              		.loc 1 2163 16 is_stmt 0 view .LVU1391
 4200 001a 6468     		ldr	r4, [r4, #4]
 4201              	.LVL405:
2165:rtos/uC-USB-Device/Source/usbd_ep.c ****         (p_ep_in  == (USBD_EP *)0)) {
 4202              		.loc 1 2165 5 is_stmt 1 view .LVU1392
2165:rtos/uC-USB-Device/Source/usbd_ep.c ****         (p_ep_in  == (USBD_EP *)0)) {
 4203              		.loc 1 2165 8 is_stmt 0 view .LVU1393
 4204 001c 16B3     		cbz	r6, .L294
2165:rtos/uC-USB-Device/Source/usbd_ep.c ****         (p_ep_in  == (USBD_EP *)0)) {
 4205              		.loc 1 2165 36 discriminator 1 view .LVU1394
 4206 001e 0CB3     		cbz	r4, .L294
2171:rtos/uC-USB-Device/Source/usbd_ep.c ****                            p_ep_out->Ix,
 4207              		.loc 1 2171 5 is_stmt 1 view .LVU1395
 4208 0020 2B46     		mov	r3, r5
 4209 0022 0022     		movs	r2, #0
 4210 0024 317A     		ldrb	r1, [r6, #8]	@ zero_extendqisi2
 4211 0026 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 4212              	.LVL406:
2171:rtos/uC-USB-Device/Source/usbd_ep.c ****                            p_ep_out->Ix,
 4213              		.loc 1 2171 5 is_stmt 0 view .LVU1396
 4214 0028 FFF7FEFF 		bl	USBD_OS_EP_LockAcquire
 4215              	.LVL407:
2175:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 4216              		.loc 1 2175 5 is_stmt 1 view .LVU1397
2175:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
ARM GAS  /tmp/ccuUvpuw.s 			page 178


 4217              		.loc 1 2175 9 is_stmt 0 view .LVU1398
 4218 002c 2B88     		ldrh	r3, [r5]
2175:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 4219              		.loc 1 2175 8 view .LVU1399
 4220 002e E3B9     		cbnz	r3, .L291
2179:rtos/uC-USB-Device/Source/usbd_ep.c ****                            p_ep_in->Ix,
 4221              		.loc 1 2179 5 is_stmt 1 view .LVU1400
 4222 0030 2B46     		mov	r3, r5
 4223 0032 0022     		movs	r2, #0
 4224 0034 217A     		ldrb	r1, [r4, #8]	@ zero_extendqisi2
 4225 0036 3878     		ldrb	r0, [r7]	@ zero_extendqisi2
 4226 0038 FFF7FEFF 		bl	USBD_OS_EP_LockAcquire
 4227              	.LVL408:
2183:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_OS_EP_LockRelease(p_drv->DevNbr,
 4228              		.loc 1 2183 5 view .LVU1401
2183:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_OS_EP_LockRelease(p_drv->DevNbr,
 4229              		.loc 1 2183 9 is_stmt 0 view .LVU1402
 4230 003c 2B88     		ldrh	r3, [r5]
2183:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_OS_EP_LockRelease(p_drv->DevNbr,
 4231              		.loc 1 2183 8 view .LVU1403
 4232 003e B3B9     		cbnz	r3, .L303
2189:rtos/uC-USB-Device/Source/usbd_ep.c ****         (p_ep_in->State  == USBD_EP_STATE_OPEN)) {
 4233              		.loc 1 2189 5 is_stmt 1 view .LVU1404
2189:rtos/uC-USB-Device/Source/usbd_ep.c ****         (p_ep_in->State  == USBD_EP_STATE_OPEN)) {
 4234              		.loc 1 2189 18 is_stmt 0 view .LVU1405
 4235 0040 3378     		ldrb	r3, [r6]	@ zero_extendqisi2
2189:rtos/uC-USB-Device/Source/usbd_ep.c ****         (p_ep_in->State  == USBD_EP_STATE_OPEN)) {
 4236              		.loc 1 2189 8 view .LVU1406
 4237 0042 012B     		cmp	r3, #1
 4238 0044 18D0     		beq	.L304
 4239              	.L297:
2209:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 4240              		.loc 1 2209 8 is_stmt 1 view .LVU1407
2209:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 4241              		.loc 1 2209 15 is_stmt 0 view .LVU1408
 4242 0046 4FF4C973 		mov	r3, #402
 4243 004a 2B80     		strh	r3, [r5]	@ movhi
 4244              	.L300:
2212:rtos/uC-USB-Device/Source/usbd_ep.c ****                            p_ep_in->Ix);
 4245              		.loc 1 2212 5 is_stmt 1 view .LVU1409
 4246 004c 217A     		ldrb	r1, [r4, #8]	@ zero_extendqisi2
 4247 004e 3878     		ldrb	r0, [r7]	@ zero_extendqisi2
 4248 0050 FFF7FEFF 		bl	USBD_OS_EP_LockRelease
 4249              	.LVL409:
2215:rtos/uC-USB-Device/Source/usbd_ep.c ****                            p_ep_out->Ix);
 4250              		.loc 1 2215 5 view .LVU1410
 4251 0054 317A     		ldrb	r1, [r6, #8]	@ zero_extendqisi2
 4252 0056 3878     		ldrb	r0, [r7]	@ zero_extendqisi2
 4253 0058 FFF7FEFF 		bl	USBD_OS_EP_LockRelease
 4254              	.LVL410:
 4255 005c 05E0     		b	.L291
 4256              	.LVL411:
 4257              	.L302:
2156:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 4258              		.loc 1 2156 8 view .LVU1411
2156:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 4259              		.loc 1 2156 15 is_stmt 0 view .LVU1412
ARM GAS  /tmp/ccuUvpuw.s 			page 179


 4260 005e 6523     		movs	r3, #101
 4261 0060 2B80     		strh	r3, [r5]	@ movhi
2157:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 4262              		.loc 1 2157 9 is_stmt 1 view .LVU1413
 4263 0062 02E0     		b	.L291
 4264              	.LVL412:
 4265              	.L294:
2167:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 4266              		.loc 1 2167 8 view .LVU1414
2167:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 4267              		.loc 1 2167 15 is_stmt 0 view .LVU1415
 4268 0064 40F29113 		movw	r3, #401
 4269 0068 2B80     		strh	r3, [r5]	@ movhi
2168:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 4270              		.loc 1 2168 9 is_stmt 1 view .LVU1416
 4271              	.LVL413:
 4272              	.L291:
2217:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 4273              		.loc 1 2217 1 is_stmt 0 view .LVU1417
 4274 006a BDE8F883 		pop	{r3, r4, r5, r6, r7, r8, r9, pc}
 4275              	.LVL414:
 4276              	.L303:
2184:rtos/uC-USB-Device/Source/usbd_ep.c ****                                p_ep_out->Ix);
 4277              		.loc 1 2184 9 is_stmt 1 view .LVU1418
 4278 006e 317A     		ldrb	r1, [r6, #8]	@ zero_extendqisi2
 4279 0070 3878     		ldrb	r0, [r7]	@ zero_extendqisi2
 4280 0072 FFF7FEFF 		bl	USBD_OS_EP_LockRelease
 4281              	.LVL415:
2186:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 4282              		.loc 1 2186 9 view .LVU1419
 4283 0076 F8E7     		b	.L291
 4284              	.L304:
2190:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 4285              		.loc 1 2190 17 is_stmt 0 discriminator 1 view .LVU1420
 4286 0078 2378     		ldrb	r3, [r4]	@ zero_extendqisi2
2189:rtos/uC-USB-Device/Source/usbd_ep.c ****         (p_ep_in->State  == USBD_EP_STATE_OPEN)) {
 4287              		.loc 1 2189 49 discriminator 1 view .LVU1421
 4288 007a 012B     		cmp	r3, #1
 4289 007c E3D1     		bne	.L297
2192:rtos/uC-USB-Device/Source/usbd_ep.c ****         stall_in = p_drv_api->EP_Stall(p_drv,
 4290              		.loc 1 2192 9 is_stmt 1 view .LVU1422
2192:rtos/uC-USB-Device/Source/usbd_ep.c ****         stall_in = p_drv_api->EP_Stall(p_drv,
 4291              		.loc 1 2192 19 is_stmt 0 view .LVU1423
 4292 007e D7F80490 		ldr	r9, [r7, #4]
 4293              	.LVL416:
2193:rtos/uC-USB-Device/Source/usbd_ep.c ****                                        USBD_EP_ADDR_CTRL_IN,
 4294              		.loc 1 2193 9 is_stmt 1 view .LVU1424
2193:rtos/uC-USB-Device/Source/usbd_ep.c ****                                        USBD_EP_ADDR_CTRL_IN,
 4295              		.loc 1 2193 29 is_stmt 0 view .LVU1425
 4296 0082 D9F84430 		ldr	r3, [r9, #68]
2193:rtos/uC-USB-Device/Source/usbd_ep.c ****                                        USBD_EP_ADDR_CTRL_IN,
 4297              		.loc 1 2193 20 view .LVU1426
 4298 0086 0122     		movs	r2, #1
 4299 0088 8021     		movs	r1, #128
 4300 008a 3846     		mov	r0, r7
 4301 008c 9847     		blx	r3
 4302              	.LVL417:
ARM GAS  /tmp/ccuUvpuw.s 			page 180


 4303 008e 8046     		mov	r8, r0
 4304              	.LVL418:
2197:rtos/uC-USB-Device/Source/usbd_ep.c ****                                         USBD_EP_ADDR_CTRL_OUT,
 4305              		.loc 1 2197 9 is_stmt 1 view .LVU1427
2197:rtos/uC-USB-Device/Source/usbd_ep.c ****                                         USBD_EP_ADDR_CTRL_OUT,
 4306              		.loc 1 2197 30 is_stmt 0 view .LVU1428
 4307 0090 D9F84430 		ldr	r3, [r9, #68]
2197:rtos/uC-USB-Device/Source/usbd_ep.c ****                                         USBD_EP_ADDR_CTRL_OUT,
 4308              		.loc 1 2197 21 view .LVU1429
 4309 0094 0122     		movs	r2, #1
 4310 0096 0021     		movs	r1, #0
 4311 0098 3846     		mov	r0, r7
 4312 009a 9847     		blx	r3
 4313              	.LVL419:
2201:rtos/uC-USB-Device/Source/usbd_ep.c ****             (stall_out == DEF_FAIL)) {
 4314              		.loc 1 2201 9 is_stmt 1 view .LVU1430
2201:rtos/uC-USB-Device/Source/usbd_ep.c ****             (stall_out == DEF_FAIL)) {
 4315              		.loc 1 2201 12 is_stmt 0 view .LVU1431
 4316 009c B8F1000F 		cmp	r8, #0
 4317 00a0 00D0     		beq	.L298
2201:rtos/uC-USB-Device/Source/usbd_ep.c ****             (stall_out == DEF_FAIL)) {
 4318              		.loc 1 2201 37 discriminator 1 view .LVU1432
 4319 00a2 18B9     		cbnz	r0, .L299
 4320              	.L298:
2203:rtos/uC-USB-Device/Source/usbd_ep.c ****         } else {
 4321              		.loc 1 2203 12 is_stmt 1 view .LVU1433
2203:rtos/uC-USB-Device/Source/usbd_ep.c ****         } else {
 4322              		.loc 1 2203 19 is_stmt 0 view .LVU1434
 4323 00a4 4FF4CB73 		mov	r3, #406
 4324 00a8 2B80     		strh	r3, [r5]	@ movhi
 4325 00aa CFE7     		b	.L300
 4326              	.L299:
2205:rtos/uC-USB-Device/Source/usbd_ep.c ****         }
 4327              		.loc 1 2205 12 is_stmt 1 view .LVU1435
2205:rtos/uC-USB-Device/Source/usbd_ep.c ****         }
 4328              		.loc 1 2205 19 is_stmt 0 view .LVU1436
 4329 00ac 0023     		movs	r3, #0
 4330 00ae 2B80     		strh	r3, [r5]	@ movhi
 4331 00b0 CCE7     		b	.L300
 4332              	.L306:
 4333 00b2 00BF     		.align	2
 4334              	.L305:
 4335 00b4 00000000 		.word	.LANCHOR1
 4336              		.cfi_endproc
 4337              	.LFE14:
 4339              		.section	.text.USBD_EP_Init,"ax",%progbits
 4340              		.align	1
 4341              		.global	USBD_EP_Init
 4342              		.syntax unified
 4343              		.thumb
 4344              		.thumb_func
 4345              		.fpu fpv4-sp-d16
 4347              	USBD_EP_Init:
 4348              	.LFB15:
2243:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_EP     *p_ep;
 4349              		.loc 1 2243 1 is_stmt 1 view -0
 4350              		.cfi_startproc
ARM GAS  /tmp/ccuUvpuw.s 			page 181


 4351              		@ args = 0, pretend = 0, frame = 0
 4352              		@ frame_needed = 0, uses_anonymous_args = 0
 4353              		@ link register save eliminated.
 4354 0000 F0B4     		push	{r4, r5, r6, r7}
 4355              	.LCFI64:
 4356              		.cfi_def_cfa_offset 16
 4357              		.cfi_offset 4, -16
 4358              		.cfi_offset 5, -12
 4359              		.cfi_offset 6, -8
 4360              		.cfi_offset 7, -4
2244:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_URB    *p_urb;
 4361              		.loc 1 2244 5 view .LVU1438
2245:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_INT08U   ep_ix;
 4362              		.loc 1 2245 5 view .LVU1439
2246:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_INT08U   dev_nbr;
 4363              		.loc 1 2246 5 view .LVU1440
2247:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_INT16U   urb_ix;
 4364              		.loc 1 2247 5 view .LVU1441
2248:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 4365              		.loc 1 2248 5 view .LVU1442
2251:rtos/uC-USB-Device/Source/usbd_ep.c ****         for (ep_ix = 0u; ep_ix < USBD_EP_MAX_NBR; ep_ix++) {
 4366              		.loc 1 2251 5 view .LVU1443
 4367              	.LVL420:
2251:rtos/uC-USB-Device/Source/usbd_ep.c ****         for (ep_ix = 0u; ep_ix < USBD_EP_MAX_NBR; ep_ix++) {
 4368              		.loc 1 2251 18 is_stmt 0 view .LVU1444
 4369 0002 0024     		movs	r4, #0
 4370              	.LVL421:
 4371              	.L308:
2251:rtos/uC-USB-Device/Source/usbd_ep.c ****         for (ep_ix = 0u; ep_ix < USBD_EP_MAX_NBR; ep_ix++) {
 4372              		.loc 1 2251 24 is_stmt 1 discriminator 1 view .LVU1445
2251:rtos/uC-USB-Device/Source/usbd_ep.c ****         for (ep_ix = 0u; ep_ix < USBD_EP_MAX_NBR; ep_ix++) {
 4373              		.loc 1 2251 5 is_stmt 0 discriminator 1 view .LVU1446
 4374 0004 44B3     		cbz	r4, .L316
2297:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 4375              		.loc 1 2297 1 view .LVU1447
 4376 0006 F0BC     		pop	{r4, r5, r6, r7}
 4377              	.LCFI65:
 4378              		.cfi_remember_state
 4379              		.cfi_restore 7
 4380              		.cfi_restore 6
 4381              		.cfi_restore 5
 4382              		.cfi_restore 4
 4383              		.cfi_def_cfa_offset 0
 4384              	.LVL422:
2297:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 4385              		.loc 1 2297 1 view .LVU1448
 4386 0008 7047     		bx	lr
 4387              	.LVL423:
 4388              	.L309:
 4389              	.LCFI66:
 4390              		.cfi_restore_state
2266:rtos/uC-USB-Device/Source/usbd_ep.c ****             }
 4391              		.loc 1 2266 56 is_stmt 1 discriminator 2 view .LVU1449
2268:rtos/uC-USB-Device/Source/usbd_ep.c ****         }
 4392              		.loc 1 2268 13 discriminator 2 view .LVU1450
2268:rtos/uC-USB-Device/Source/usbd_ep.c ****         }
 4393              		.loc 1 2268 45 is_stmt 0 discriminator 2 view .LVU1451
ARM GAS  /tmp/ccuUvpuw.s 			page 182


 4394 000a 03EB4411 		add	r1, r3, r4, lsl #5
 4395 000e 3A4A     		ldr	r2, .L320
 4396 0010 0020     		movs	r0, #0
 4397 0012 42F82100 		str	r0, [r2, r1, lsl #2]
2252:rtos/uC-USB-Device/Source/usbd_ep.c ****             if (ep_ix < USBD_CFG_MAX_NBR_EP_OPEN) {
 4398              		.loc 1 2252 51 is_stmt 1 discriminator 2 view .LVU1452
2252:rtos/uC-USB-Device/Source/usbd_ep.c ****             if (ep_ix < USBD_CFG_MAX_NBR_EP_OPEN) {
 4399              		.loc 1 2252 56 is_stmt 0 discriminator 2 view .LVU1453
 4400 0016 0133     		adds	r3, r3, #1
 4401              	.LVL424:
2252:rtos/uC-USB-Device/Source/usbd_ep.c ****             if (ep_ix < USBD_CFG_MAX_NBR_EP_OPEN) {
 4402              		.loc 1 2252 56 discriminator 2 view .LVU1454
 4403 0018 DBB2     		uxtb	r3, r3
 4404              	.LVL425:
 4405              	.L315:
2252:rtos/uC-USB-Device/Source/usbd_ep.c ****             if (ep_ix < USBD_CFG_MAX_NBR_EP_OPEN) {
 4406              		.loc 1 2252 26 is_stmt 1 discriminator 1 view .LVU1455
2252:rtos/uC-USB-Device/Source/usbd_ep.c ****             if (ep_ix < USBD_CFG_MAX_NBR_EP_OPEN) {
 4407              		.loc 1 2252 9 is_stmt 0 discriminator 1 view .LVU1456
 4408 001a 1F2B     		cmp	r3, #31
 4409 001c 1ED8     		bhi	.L318
2253:rtos/uC-USB-Device/Source/usbd_ep.c ****                 p_ep                = &USBD_EP_Tbl[dev_nbr][ep_ix];
 4410              		.loc 1 2253 13 is_stmt 1 view .LVU1457
2253:rtos/uC-USB-Device/Source/usbd_ep.c ****                 p_ep                = &USBD_EP_Tbl[dev_nbr][ep_ix];
 4411              		.loc 1 2253 16 is_stmt 0 view .LVU1458
 4412 001e 032B     		cmp	r3, #3
 4413 0020 F3D8     		bhi	.L309
2254:rtos/uC-USB-Device/Source/usbd_ep.c ****                 p_ep->Addr          =  USBD_EP_ADDR_NONE;
 4414              		.loc 1 2254 17 is_stmt 1 view .LVU1459
 4415              	.LVL426:
2255:rtos/uC-USB-Device/Source/usbd_ep.c ****                 p_ep->Attrib        =  DEF_BIT_NONE;
 4416              		.loc 1 2255 17 view .LVU1460
2255:rtos/uC-USB-Device/Source/usbd_ep.c ****                 p_ep->Attrib        =  DEF_BIT_NONE;
 4417              		.loc 1 2255 37 is_stmt 0 view .LVU1461
 4418 0022 3648     		ldr	r0, .L320+4
 4419 0024 03EB8301 		add	r1, r3, r3, lsl #2
 4420 0028 8A00     		lsls	r2, r1, #2
 4421 002a 04EB8405 		add	r5, r4, r4, lsl #2
 4422 002e 2901     		lsls	r1, r5, #4
 4423 0030 0A44     		add	r2, r2, r1
 4424 0032 0244     		add	r2, r2, r0
 4425 0034 FF21     		movs	r1, #255
 4426 0036 9170     		strb	r1, [r2, #2]
2256:rtos/uC-USB-Device/Source/usbd_ep.c ****                 p_ep->MaxPktSize    =  0u;
 4427              		.loc 1 2256 17 is_stmt 1 view .LVU1462
2256:rtos/uC-USB-Device/Source/usbd_ep.c ****                 p_ep->MaxPktSize    =  0u;
 4428              		.loc 1 2256 37 is_stmt 0 view .LVU1463
 4429 0038 0021     		movs	r1, #0
 4430 003a D170     		strb	r1, [r2, #3]
2257:rtos/uC-USB-Device/Source/usbd_ep.c ****                 p_ep->Interval      =  0u;
 4431              		.loc 1 2257 17 is_stmt 1 view .LVU1464
2257:rtos/uC-USB-Device/Source/usbd_ep.c ****                 p_ep->Interval      =  0u;
 4432              		.loc 1 2257 37 is_stmt 0 view .LVU1465
 4433 003c 9180     		strh	r1, [r2, #4]	@ movhi
2258:rtos/uC-USB-Device/Source/usbd_ep.c ****                 p_ep->Ix            =  0u;
 4434              		.loc 1 2258 17 is_stmt 1 view .LVU1466
2258:rtos/uC-USB-Device/Source/usbd_ep.c ****                 p_ep->Ix            =  0u;
ARM GAS  /tmp/ccuUvpuw.s 			page 183


 4435              		.loc 1 2258 37 is_stmt 0 view .LVU1467
 4436 003e 9171     		strb	r1, [r2, #6]
2259:rtos/uC-USB-Device/Source/usbd_ep.c **** #if (USBD_CFG_MAX_NBR_URB_EXTRA > 0u)
 4437              		.loc 1 2259 17 is_stmt 1 view .LVU1468
2259:rtos/uC-USB-Device/Source/usbd_ep.c **** #if (USBD_CFG_MAX_NBR_URB_EXTRA > 0u)
 4438              		.loc 1 2259 37 is_stmt 0 view .LVU1469
 4439 0040 1172     		strb	r1, [r2, #8]
2263:rtos/uC-USB-Device/Source/usbd_ep.c ****                 p_ep->URB_TailPtr   = (USBD_URB *)0;
 4440              		.loc 1 2263 17 is_stmt 1 view .LVU1470
2263:rtos/uC-USB-Device/Source/usbd_ep.c ****                 p_ep->URB_TailPtr   = (USBD_URB *)0;
 4441              		.loc 1 2263 37 is_stmt 0 view .LVU1471
 4442 0042 D160     		str	r1, [r2, #12]
2264:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 4443              		.loc 1 2264 17 is_stmt 1 view .LVU1472
2264:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 4444              		.loc 1 2264 37 is_stmt 0 view .LVU1473
 4445 0044 03EB8305 		add	r5, r3, r3, lsl #2
 4446 0048 AA00     		lsls	r2, r5, #2
 4447 004a 04EB8406 		add	r6, r4, r4, lsl #2
 4448 004e 3501     		lsls	r5, r6, #4
 4449 0050 2A44     		add	r2, r2, r5
 4450 0052 1044     		add	r0, r0, r2
 4451 0054 0161     		str	r1, [r0, #16]
 4452 0056 D8E7     		b	.L309
 4453              	.LVL427:
 4454              	.L316:
2252:rtos/uC-USB-Device/Source/usbd_ep.c ****             if (ep_ix < USBD_CFG_MAX_NBR_EP_OPEN) {
 4455              		.loc 1 2252 20 view .LVU1474
 4456 0058 2346     		mov	r3, r4
 4457 005a DEE7     		b	.L315
 4458              	.LVL428:
 4459              	.L318:
2271:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 4460              		.loc 1 2271 9 is_stmt 1 view .LVU1475
2271:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 4461              		.loc 1 2271 58 is_stmt 0 view .LVU1476
 4462 005c 2046     		mov	r0, r4
2271:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 4463              		.loc 1 2271 36 view .LVU1477
 4464 005e 04EBC403 		add	r3, r4, r4, lsl #3
 4465              	.LVL429:
2271:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 4466              		.loc 1 2271 36 view .LVU1478
 4467 0062 1A01     		lsls	r2, r3, #4
 4468 0064 264B     		ldr	r3, .L320+8
 4469 0066 1344     		add	r3, r3, r2
2271:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 4470              		.loc 1 2271 34 view .LVU1479
 4471 0068 264A     		ldr	r2, .L320+12
 4472 006a 42F82430 		str	r3, [r2, r4, lsl #2]
2273:rtos/uC-USB-Device/Source/usbd_ep.c ****             p_urb               = &USBD_URB_Tbl[dev_nbr][urb_ix];
 4473              		.loc 1 2273 9 is_stmt 1 view .LVU1480
 4474              	.LVL430:
2273:rtos/uC-USB-Device/Source/usbd_ep.c ****             p_urb               = &USBD_URB_Tbl[dev_nbr][urb_ix];
 4475              		.loc 1 2273 21 is_stmt 0 view .LVU1481
 4476 006e 0023     		movs	r3, #0
2273:rtos/uC-USB-Device/Source/usbd_ep.c ****             p_urb               = &USBD_URB_Tbl[dev_nbr][urb_ix];
ARM GAS  /tmp/ccuUvpuw.s 			page 184


 4477              		.loc 1 2273 9 view .LVU1482
 4478 0070 0CE0     		b	.L311
 4479              	.LVL431:
 4480              	.L312:
2287:rtos/uC-USB-Device/Source/usbd_ep.c ****             }
 4481              		.loc 1 2287 17 is_stmt 1 view .LVU1483
2287:rtos/uC-USB-Device/Source/usbd_ep.c ****             }
 4482              		.loc 1 2287 33 is_stmt 0 view .LVU1484
 4483 0072 03EBC301 		add	r1, r3, r3, lsl #3
 4484 0076 8A00     		lsls	r2, r1, #2
 4485 0078 00EBC005 		add	r5, r0, r0, lsl #3
 4486 007c 2901     		lsls	r1, r5, #4
 4487 007e 0A44     		add	r2, r2, r1
 4488 0080 1F49     		ldr	r1, .L320+8
 4489 0082 0A44     		add	r2, r2, r1
 4490 0084 0021     		movs	r1, #0
 4491 0086 1162     		str	r1, [r2, #32]
 4492              	.L313:
2273:rtos/uC-USB-Device/Source/usbd_ep.c ****             p_urb               = &USBD_URB_Tbl[dev_nbr][urb_ix];
 4493              		.loc 1 2273 54 is_stmt 1 discriminator 2 view .LVU1485
2273:rtos/uC-USB-Device/Source/usbd_ep.c ****             p_urb               = &USBD_URB_Tbl[dev_nbr][urb_ix];
 4494              		.loc 1 2273 60 is_stmt 0 discriminator 2 view .LVU1486
 4495 0088 0133     		adds	r3, r3, #1
 4496              	.LVL432:
2273:rtos/uC-USB-Device/Source/usbd_ep.c ****             p_urb               = &USBD_URB_Tbl[dev_nbr][urb_ix];
 4497              		.loc 1 2273 60 discriminator 2 view .LVU1487
 4498 008a 9BB2     		uxth	r3, r3
 4499              	.LVL433:
 4500              	.L311:
2273:rtos/uC-USB-Device/Source/usbd_ep.c ****             p_urb               = &USBD_URB_Tbl[dev_nbr][urb_ix];
 4501              		.loc 1 2273 27 is_stmt 1 discriminator 1 view .LVU1488
2273:rtos/uC-USB-Device/Source/usbd_ep.c ****             p_urb               = &USBD_URB_Tbl[dev_nbr][urb_ix];
 4502              		.loc 1 2273 9 is_stmt 0 discriminator 1 view .LVU1489
 4503 008c 032B     		cmp	r3, #3
 4504 008e 28D8     		bhi	.L319
2274:rtos/uC-USB-Device/Source/usbd_ep.c ****             p_urb->BufPtr       = (CPU_INT08U    *)0;
 4505              		.loc 1 2274 13 is_stmt 1 view .LVU1490
 4506              	.LVL434:
2275:rtos/uC-USB-Device/Source/usbd_ep.c ****             p_urb->BufLen       =  0u;
 4507              		.loc 1 2275 13 view .LVU1491
2275:rtos/uC-USB-Device/Source/usbd_ep.c ****             p_urb->BufLen       =  0u;
 4508              		.loc 1 2275 33 is_stmt 0 view .LVU1492
 4509 0090 1B4E     		ldr	r6, .L320+8
 4510 0092 03EBC302 		add	r2, r3, r3, lsl #3
 4511 0096 9500     		lsls	r5, r2, #2
 4512 0098 00EBC001 		add	r1, r0, r0, lsl #3
 4513 009c 0A01     		lsls	r2, r1, #4
 4514 009e 1544     		add	r5, r5, r2
 4515 00a0 7119     		adds	r1, r6, r5
 4516 00a2 0022     		movs	r2, #0
 4517 00a4 7251     		str	r2, [r6, r5]
2276:rtos/uC-USB-Device/Source/usbd_ep.c ****             p_urb->XferLen      =  0u;
 4518              		.loc 1 2276 13 is_stmt 1 view .LVU1493
2276:rtos/uC-USB-Device/Source/usbd_ep.c ****             p_urb->XferLen      =  0u;
 4519              		.loc 1 2276 33 is_stmt 0 view .LVU1494
 4520 00a6 4A60     		str	r2, [r1, #4]
2277:rtos/uC-USB-Device/Source/usbd_ep.c ****             p_urb->NextXferLen  =  0u;
ARM GAS  /tmp/ccuUvpuw.s 			page 185


 4521              		.loc 1 2277 13 is_stmt 1 view .LVU1495
2277:rtos/uC-USB-Device/Source/usbd_ep.c ****             p_urb->NextXferLen  =  0u;
 4522              		.loc 1 2277 33 is_stmt 0 view .LVU1496
 4523 00a8 8A60     		str	r2, [r1, #8]
2278:rtos/uC-USB-Device/Source/usbd_ep.c ****             p_urb->Flags        =  0u;
 4524              		.loc 1 2278 13 is_stmt 1 view .LVU1497
2278:rtos/uC-USB-Device/Source/usbd_ep.c ****             p_urb->Flags        =  0u;
 4525              		.loc 1 2278 33 is_stmt 0 view .LVU1498
 4526 00aa CA60     		str	r2, [r1, #12]
2279:rtos/uC-USB-Device/Source/usbd_ep.c ****             p_urb->State        =  USBD_URB_STATE_IDLE;
 4527              		.loc 1 2279 13 is_stmt 1 view .LVU1499
2279:rtos/uC-USB-Device/Source/usbd_ep.c ****             p_urb->State        =  USBD_URB_STATE_IDLE;
 4528              		.loc 1 2279 33 is_stmt 0 view .LVU1500
 4529 00ac 0A74     		strb	r2, [r1, #16]
2280:rtos/uC-USB-Device/Source/usbd_ep.c ****             p_urb->AsyncFnct    = (USBD_ASYNC_FNCT)0;
 4530              		.loc 1 2280 13 is_stmt 1 view .LVU1501
2280:rtos/uC-USB-Device/Source/usbd_ep.c ****             p_urb->AsyncFnct    = (USBD_ASYNC_FNCT)0;
 4531              		.loc 1 2280 33 is_stmt 0 view .LVU1502
 4532 00ae 4A74     		strb	r2, [r1, #17]
2281:rtos/uC-USB-Device/Source/usbd_ep.c ****             p_urb->AsyncFnctArg = (void          *)0;
 4533              		.loc 1 2281 13 is_stmt 1 view .LVU1503
2281:rtos/uC-USB-Device/Source/usbd_ep.c ****             p_urb->AsyncFnctArg = (void          *)0;
 4534              		.loc 1 2281 33 is_stmt 0 view .LVU1504
 4535 00b0 4A61     		str	r2, [r1, #20]
2282:rtos/uC-USB-Device/Source/usbd_ep.c ****             p_urb->Err          =  USBD_ERR_NONE;
 4536              		.loc 1 2282 13 is_stmt 1 view .LVU1505
2282:rtos/uC-USB-Device/Source/usbd_ep.c ****             p_urb->Err          =  USBD_ERR_NONE;
 4537              		.loc 1 2282 33 is_stmt 0 view .LVU1506
 4538 00b2 8A61     		str	r2, [r1, #24]
2283:rtos/uC-USB-Device/Source/usbd_ep.c ****             if (urb_ix < (USBD_URB_MAX_NBR - 1)) {
 4539              		.loc 1 2283 13 is_stmt 1 view .LVU1507
2283:rtos/uC-USB-Device/Source/usbd_ep.c ****             if (urb_ix < (USBD_URB_MAX_NBR - 1)) {
 4540              		.loc 1 2283 33 is_stmt 0 view .LVU1508
 4541 00b4 8A83     		strh	r2, [r1, #28]	@ movhi
2284:rtos/uC-USB-Device/Source/usbd_ep.c ****                 p_urb->NextPtr  = &USBD_URB_Tbl[dev_nbr][urb_ix + 1];
 4542              		.loc 1 2284 13 is_stmt 1 view .LVU1509
2284:rtos/uC-USB-Device/Source/usbd_ep.c ****                 p_urb->NextPtr  = &USBD_URB_Tbl[dev_nbr][urb_ix + 1];
 4543              		.loc 1 2284 16 is_stmt 0 view .LVU1510
 4544 00b6 022B     		cmp	r3, #2
 4545 00b8 DBD8     		bhi	.L312
2285:rtos/uC-USB-Device/Source/usbd_ep.c ****             } else {
 4546              		.loc 1 2285 17 is_stmt 1 view .LVU1511
2285:rtos/uC-USB-Device/Source/usbd_ep.c ****             } else {
 4547              		.loc 1 2285 65 is_stmt 0 view .LVU1512
 4548 00ba 5A1C     		adds	r2, r3, #1
2285:rtos/uC-USB-Device/Source/usbd_ep.c ****             } else {
 4549              		.loc 1 2285 35 view .LVU1513
 4550 00bc 3546     		mov	r5, r6
 4551 00be 02EBC202 		add	r2, r2, r2, lsl #3
 4552 00c2 9100     		lsls	r1, r2, #2
 4553 00c4 00EBC006 		add	r6, r0, r0, lsl #3
 4554 00c8 3201     		lsls	r2, r6, #4
 4555 00ca 1144     		add	r1, r1, r2
 4556 00cc 2944     		add	r1, r1, r5
2285:rtos/uC-USB-Device/Source/usbd_ep.c ****             } else {
 4557              		.loc 1 2285 33 view .LVU1514
 4558 00ce 03EBC306 		add	r6, r3, r3, lsl #3
ARM GAS  /tmp/ccuUvpuw.s 			page 186


 4559 00d2 B200     		lsls	r2, r6, #2
 4560 00d4 00EBC007 		add	r7, r0, r0, lsl #3
 4561 00d8 3E01     		lsls	r6, r7, #4
 4562 00da 3244     		add	r2, r2, r6
 4563 00dc 1544     		add	r5, r5, r2
 4564 00de 2962     		str	r1, [r5, #32]
 4565 00e0 D2E7     		b	.L313
 4566              	.LVL435:
 4567              	.L319:
2291:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_EP_OpenBitMap[dev_nbr] = DEF_INT_32_MASK;
 4568              		.loc 1 2291 9 is_stmt 1 discriminator 2 view .LVU1515
2291:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_EP_OpenBitMap[dev_nbr] = DEF_INT_32_MASK;
 4569              		.loc 1 2291 37 is_stmt 0 discriminator 2 view .LVU1516
 4570 00e2 094B     		ldr	r3, .L320+16
 4571              	.LVL436:
2291:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_EP_OpenBitMap[dev_nbr] = DEF_INT_32_MASK;
 4572              		.loc 1 2291 37 discriminator 2 view .LVU1517
 4573 00e4 0022     		movs	r2, #0
 4574 00e6 1A54     		strb	r2, [r3, r0]
2292:rtos/uC-USB-Device/Source/usbd_ep.c **** #if (USBD_CFG_MAX_NBR_URB_EXTRA > 0u)
 4575              		.loc 1 2292 9 is_stmt 1 discriminator 2 view .LVU1518
2292:rtos/uC-USB-Device/Source/usbd_ep.c **** #if (USBD_CFG_MAX_NBR_URB_EXTRA > 0u)
 4576              		.loc 1 2292 37 is_stmt 0 discriminator 2 view .LVU1519
 4577 00e8 084B     		ldr	r3, .L320+20
 4578 00ea 4FF0FF32 		mov	r2, #-1
 4579 00ee 43F82020 		str	r2, [r3, r0, lsl #2]
2251:rtos/uC-USB-Device/Source/usbd_ep.c ****         for (ep_ix = 0u; ep_ix < USBD_EP_MAX_NBR; ep_ix++) {
 4580              		.loc 1 2251 56 is_stmt 1 discriminator 2 view .LVU1520
2251:rtos/uC-USB-Device/Source/usbd_ep.c ****         for (ep_ix = 0u; ep_ix < USBD_EP_MAX_NBR; ep_ix++) {
 4581              		.loc 1 2251 63 is_stmt 0 discriminator 2 view .LVU1521
 4582 00f2 0134     		adds	r4, r4, #1
 4583              	.LVL437:
2251:rtos/uC-USB-Device/Source/usbd_ep.c ****         for (ep_ix = 0u; ep_ix < USBD_EP_MAX_NBR; ep_ix++) {
 4584              		.loc 1 2251 63 discriminator 2 view .LVU1522
 4585 00f4 E4B2     		uxtb	r4, r4
 4586              	.LVL438:
2251:rtos/uC-USB-Device/Source/usbd_ep.c ****         for (ep_ix = 0u; ep_ix < USBD_EP_MAX_NBR; ep_ix++) {
 4587              		.loc 1 2251 63 discriminator 2 view .LVU1523
 4588 00f6 85E7     		b	.L308
 4589              	.L321:
 4590              		.align	2
 4591              	.L320:
 4592 00f8 00000000 		.word	.LANCHOR1
 4593 00fc 00000000 		.word	.LANCHOR2
 4594 0100 00000000 		.word	.LANCHOR3
 4595 0104 00000000 		.word	.LANCHOR0
 4596 0108 00000000 		.word	.LANCHOR4
 4597 010c 00000000 		.word	.LANCHOR5
 4598              		.cfi_endproc
 4599              	.LFE15:
 4601              		.section	.text.USBD_EP_XferAsyncProcess,"ax",%progbits
 4602              		.align	1
 4603              		.global	USBD_EP_XferAsyncProcess
 4604              		.syntax unified
 4605              		.thumb
 4606              		.thumb_func
 4607              		.fpu fpv4-sp-d16
ARM GAS  /tmp/ccuUvpuw.s 			page 187


 4609              	USBD_EP_XferAsyncProcess:
 4610              	.LVL439:
 4611              	.LFB16:
2331:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_INT08U     ep_phy_nbr;
 4612              		.loc 1 2331 1 is_stmt 1 view -0
 4613              		.cfi_startproc
 4614              		@ args = 0, pretend = 0, frame = 8
 4615              		@ frame_needed = 0, uses_anonymous_args = 0
2331:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_INT08U     ep_phy_nbr;
 4616              		.loc 1 2331 1 is_stmt 0 view .LVU1525
 4617 0000 2DE9F043 		push	{r4, r5, r6, r7, r8, r9, lr}
 4618              	.LCFI67:
 4619              		.cfi_def_cfa_offset 28
 4620              		.cfi_offset 4, -28
 4621              		.cfi_offset 5, -24
 4622              		.cfi_offset 6, -20
 4623              		.cfi_offset 7, -16
 4624              		.cfi_offset 8, -12
 4625              		.cfi_offset 9, -8
 4626              		.cfi_offset 14, -4
 4627 0004 85B0     		sub	sp, sp, #20
 4628              	.LCFI68:
 4629              		.cfi_def_cfa_offset 48
 4630 0006 0446     		mov	r4, r0
2332:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_EP       *p_ep;
 4631              		.loc 1 2332 5 is_stmt 1 view .LVU1526
2333:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DRV_API  *p_drv_api;
 4632              		.loc 1 2333 5 view .LVU1527
2334:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_BOOLEAN    ep_dir_in;
 4633              		.loc 1 2334 5 view .LVU1528
2335:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_ERR       local_err;
 4634              		.loc 1 2335 5 view .LVU1529
2336:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_URB      *p_urb;
 4635              		.loc 1 2336 5 view .LVU1530
2337:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_URB      *p_urb_cmpl;
 4636              		.loc 1 2337 5 view .LVU1531
2338:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_INT08U    *p_buf_cur;
 4637              		.loc 1 2338 5 view .LVU1532
2339:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_INT32U     xfer_len;
 4638              		.loc 1 2339 5 view .LVU1533
2340:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_INT32U     xfer_rem;
 4639              		.loc 1 2340 5 view .LVU1534
2341:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 4640              		.loc 1 2341 5 view .LVU1535
2344:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_ep       = USBD_EP_TblPtrs[p_drv->DevNbr][ep_phy_nbr];
 4641              		.loc 1 2344 5 view .LVU1536
2344:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_ep       = USBD_EP_TblPtrs[p_drv->DevNbr][ep_phy_nbr];
 4642              		.loc 1 2344 18 is_stmt 0 view .LVU1537
 4643 0008 01F00F03 		and	r3, r1, #15
 4644 000c C909     		lsrs	r1, r1, #7
 4645              	.LVL440:
2344:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_ep       = USBD_EP_TblPtrs[p_drv->DevNbr][ep_phy_nbr];
 4646              		.loc 1 2344 16 view .LVU1538
 4647 000e 01EB4301 		add	r1, r1, r3, lsl #1
 4648              	.LVL441:
2345:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_ep == (USBD_EP *)0) {
 4649              		.loc 1 2345 5 is_stmt 1 view .LVU1539
ARM GAS  /tmp/ccuUvpuw.s 			page 188


2345:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_ep == (USBD_EP *)0) {
 4650              		.loc 1 2345 39 is_stmt 0 view .LVU1540
 4651 0012 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 4652              	.LVL442:
2345:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_ep == (USBD_EP *)0) {
 4653              		.loc 1 2345 16 view .LVU1541
 4654 0014 01EB4011 		add	r1, r1, r0, lsl #5
 4655              	.LVL443:
2345:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_ep == (USBD_EP *)0) {
 4656              		.loc 1 2345 16 view .LVU1542
 4657 0018 5E4B     		ldr	r3, .L350
2345:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_ep == (USBD_EP *)0) {
 4658              		.loc 1 2345 16 view .LVU1543
 4659 001a 53F82150 		ldr	r5, [r3, r1, lsl #2]
 4660              	.LVL444:
2346:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 4661              		.loc 1 2346 5 is_stmt 1 view .LVU1544
2346:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 4662              		.loc 1 2346 8 is_stmt 0 view .LVU1545
 4663 001e 002D     		cmp	r5, #0
 4664 0020 00F0B580 		beq	.L322
 4665 0024 1646     		mov	r6, r2
2350:rtos/uC-USB-Device/Source/usbd_ep.c ****     ep_dir_in = USBD_EP_IS_IN(p_ep->Addr);
 4666              		.loc 1 2350 5 is_stmt 1 view .LVU1546
2350:rtos/uC-USB-Device/Source/usbd_ep.c ****     ep_dir_in = USBD_EP_IS_IN(p_ep->Addr);
 4667              		.loc 1 2350 15 is_stmt 0 view .LVU1547
 4668 0026 D4F80480 		ldr	r8, [r4, #4]
 4669              	.LVL445:
2351:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 4670              		.loc 1 2351 5 is_stmt 1 view .LVU1548
2351:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 4671              		.loc 1 2351 17 is_stmt 0 view .LVU1549
 4672 002a AB78     		ldrb	r3, [r5, #2]	@ zero_extendqisi2
2351:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 4673              		.loc 1 2351 15 view .LVU1550
 4674 002c 4FEAD319 		lsr	r9, r3, #7
 4675              	.LVL446:
2353:rtos/uC-USB-Device/Source/usbd_ep.c ****                            p_ep->Ix,
 4676              		.loc 1 2353 5 is_stmt 1 view .LVU1551
 4677 0030 0DF10E03 		add	r3, sp, #14
 4678 0034 0022     		movs	r2, #0
 4679              	.LVL447:
2353:rtos/uC-USB-Device/Source/usbd_ep.c ****                            p_ep->Ix,
 4680              		.loc 1 2353 5 is_stmt 0 view .LVU1552
 4681 0036 297A     		ldrb	r1, [r5, #8]	@ zero_extendqisi2
 4682 0038 FFF7FEFF 		bl	USBD_OS_EP_LockAcquire
 4683              	.LVL448:
2357:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 4684              		.loc 1 2357 5 is_stmt 1 view .LVU1553
2357:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 4685              		.loc 1 2357 19 is_stmt 0 view .LVU1554
 4686 003c BDF80E30 		ldrh	r3, [sp, #14]
2357:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 4687              		.loc 1 2357 8 view .LVU1555
 4688 0040 002B     		cmp	r3, #0
 4689 0042 40F0A480 		bne	.L322
2361:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_OS_EP_LockRelease(p_drv->DevNbr,
ARM GAS  /tmp/ccuUvpuw.s 			page 189


 4690              		.loc 1 2361 5 is_stmt 1 view .LVU1556
2361:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_OS_EP_LockRelease(p_drv->DevNbr,
 4691              		.loc 1 2361 13 is_stmt 0 view .LVU1557
 4692 0046 6B78     		ldrb	r3, [r5, #1]	@ zero_extendqisi2
2361:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_OS_EP_LockRelease(p_drv->DevNbr,
 4693              		.loc 1 2361 8 view .LVU1558
 4694 0048 002B     		cmp	r3, #0
 4695 004a 2DD0     		beq	.L341
2367:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_urb == (USBD_URB *)0) {
 4696              		.loc 1 2367 5 is_stmt 1 view .LVU1559
2367:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_urb == (USBD_URB *)0) {
 4697              		.loc 1 2367 11 is_stmt 0 view .LVU1560
 4698 004c EF68     		ldr	r7, [r5, #12]
 4699              	.LVL449:
2368:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_OS_EP_LockRelease(p_drv->DevNbr,
 4700              		.loc 1 2368 5 is_stmt 1 view .LVU1561
2368:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_OS_EP_LockRelease(p_drv->DevNbr,
 4701              		.loc 1 2368 8 is_stmt 0 view .LVU1562
 4702 004e 002F     		cmp	r7, #0
 4703 0050 2FD0     		beq	.L342
2375:rtos/uC-USB-Device/Source/usbd_ep.c ****         (p_urb->State == USBD_URB_STATE_XFER_SYNC)) {
 4704              		.loc 1 2375 5 is_stmt 1 view .LVU1563
2375:rtos/uC-USB-Device/Source/usbd_ep.c ****         (p_urb->State == USBD_URB_STATE_XFER_SYNC)) {
 4705              		.loc 1 2375 15 is_stmt 0 view .LVU1564
 4706 0052 7B7C     		ldrb	r3, [r7, #17]	@ zero_extendqisi2
2375:rtos/uC-USB-Device/Source/usbd_ep.c ****         (p_urb->State == USBD_URB_STATE_XFER_SYNC)) {
 4707              		.loc 1 2375 8 view .LVU1565
 4708 0054 012B     		cmp	r3, #1
 4709 0056 31D9     		bls	.L343
2383:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (xfer_err == USBD_ERR_NONE) {                            /* See Note #1.                    
 4710              		.loc 1 2383 5 is_stmt 1 view .LVU1566
 4711              	.LVL450:
2384:rtos/uC-USB-Device/Source/usbd_ep.c ****         xfer_rem   =  p_urb->BufLen - p_urb->XferLen;
 4712              		.loc 1 2384 5 view .LVU1567
2384:rtos/uC-USB-Device/Source/usbd_ep.c ****         xfer_rem   =  p_urb->BufLen - p_urb->XferLen;
 4713              		.loc 1 2384 8 is_stmt 0 view .LVU1568
 4714 0058 002E     		cmp	r6, #0
 4715 005a 40F08980 		bne	.L327
2385:rtos/uC-USB-Device/Source/usbd_ep.c ****         p_buf_cur  = &p_urb->BufPtr[p_urb->XferLen];
 4716              		.loc 1 2385 9 is_stmt 1 view .LVU1569
2385:rtos/uC-USB-Device/Source/usbd_ep.c ****         p_buf_cur  = &p_urb->BufPtr[p_urb->XferLen];
 4717              		.loc 1 2385 28 is_stmt 0 view .LVU1570
 4718 005e 7B68     		ldr	r3, [r7, #4]
2385:rtos/uC-USB-Device/Source/usbd_ep.c ****         p_buf_cur  = &p_urb->BufPtr[p_urb->XferLen];
 4719              		.loc 1 2385 44 view .LVU1571
 4720 0060 B968     		ldr	r1, [r7, #8]
2385:rtos/uC-USB-Device/Source/usbd_ep.c ****         p_buf_cur  = &p_urb->BufPtr[p_urb->XferLen];
 4721              		.loc 1 2385 20 view .LVU1572
 4722 0062 5B1A     		subs	r3, r3, r1
 4723              	.LVL451:
2386:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 4724              		.loc 1 2386 9 is_stmt 1 view .LVU1573
2386:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 4725              		.loc 1 2386 28 is_stmt 0 view .LVU1574
 4726 0064 3A68     		ldr	r2, [r7]
2386:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 4727              		.loc 1 2386 20 view .LVU1575
ARM GAS  /tmp/ccuUvpuw.s 			page 190


 4728 0066 0A44     		add	r2, r2, r1
 4729              	.LVL452:
2388:rtos/uC-USB-Device/Source/usbd_ep.c ****             if (xfer_rem > 0u) {                                /* Another transaction must be done
 4730              		.loc 1 2388 9 is_stmt 1 view .LVU1576
2388:rtos/uC-USB-Device/Source/usbd_ep.c ****             if (xfer_rem > 0u) {                                /* Another transaction must be done
 4731              		.loc 1 2388 12 is_stmt 0 view .LVU1577
 4732 0068 B9F1000F 		cmp	r9, #0
 4733 006c 2BD1     		bne	.L344
2417:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 4734              		.loc 1 2417 69 is_stmt 1 view .LVU1578
2419:rtos/uC-USB-Device/Source/usbd_ep.c ****                                         p_ep->Addr,
 4735              		.loc 1 2419 13 view .LVU1579
2419:rtos/uC-USB-Device/Source/usbd_ep.c ****                                         p_ep->Addr,
 4736              		.loc 1 2419 33 is_stmt 0 view .LVU1580
 4737 006e D8F82C60 		ldr	r6, [r8, #44]
2419:rtos/uC-USB-Device/Source/usbd_ep.c ****                                         p_ep->Addr,
 4738              		.loc 1 2419 24 view .LVU1581
 4739 0072 FB68     		ldr	r3, [r7, #12]
 4740              	.LVL453:
2419:rtos/uC-USB-Device/Source/usbd_ep.c ****                                         p_ep->Addr,
 4741              		.loc 1 2419 24 view .LVU1582
 4742 0074 A978     		ldrb	r1, [r5, #2]	@ zero_extendqisi2
 4743              	.LVL454:
2419:rtos/uC-USB-Device/Source/usbd_ep.c ****                                         p_ep->Addr,
 4744              		.loc 1 2419 24 view .LVU1583
 4745 0076 0DF10E00 		add	r0, sp, #14
 4746 007a 0090     		str	r0, [sp]
 4747              	.LVL455:
2419:rtos/uC-USB-Device/Source/usbd_ep.c ****                                         p_ep->Addr,
 4748              		.loc 1 2419 24 view .LVU1584
 4749 007c 2046     		mov	r0, r4
 4750 007e B047     		blx	r6
 4751              	.LVL456:
2424:rtos/uC-USB-Device/Source/usbd_ep.c ****                 p_urb_cmpl = USBD_URB_AsyncCmpl(p_ep, local_err);
 4752              		.loc 1 2424 13 is_stmt 1 view .LVU1585
2424:rtos/uC-USB-Device/Source/usbd_ep.c ****                 p_urb_cmpl = USBD_URB_AsyncCmpl(p_ep, local_err);
 4753              		.loc 1 2424 27 is_stmt 0 view .LVU1586
 4754 0080 BDF80E10 		ldrh	r1, [sp, #14]
2424:rtos/uC-USB-Device/Source/usbd_ep.c ****                 p_urb_cmpl = USBD_URB_AsyncCmpl(p_ep, local_err);
 4755              		.loc 1 2424 16 view .LVU1587
 4756 0084 0029     		cmp	r1, #0
 4757 0086 58D1     		bne	.L345
2427:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 4758              		.loc 1 2427 80 is_stmt 1 view .LVU1588
2429:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 4759              		.loc 1 2429 17 view .LVU1589
2429:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 4760              		.loc 1 2429 32 is_stmt 0 view .LVU1590
 4761 0088 BB68     		ldr	r3, [r7, #8]
 4762 008a 0344     		add	r3, r3, r0
 4763 008c BB60     		str	r3, [r7, #8]
2431:rtos/uC-USB-Device/Source/usbd_ep.c ****                     (xfer_len       <  p_urb->NextXferLen) ||   /* Rx'd a short pkt (see Note #2). 
 4764              		.loc 1 2431 17 is_stmt 1 view .LVU1591
2431:rtos/uC-USB-Device/Source/usbd_ep.c ****                     (xfer_len       <  p_urb->NextXferLen) ||   /* Rx'd a short pkt (see Note #2). 
 4765              		.loc 1 2431 20 is_stmt 0 view .LVU1592
 4766 008e 28B1     		cbz	r0, .L333
2432:rtos/uC-USB-Device/Source/usbd_ep.c ****                     (p_urb->XferLen == p_urb->BufLen)) {        /* All bytes rx'd.                 
ARM GAS  /tmp/ccuUvpuw.s 			page 191


 4767              		.loc 1 2432 45 discriminator 1 view .LVU1593
 4768 0090 FA68     		ldr	r2, [r7, #12]
2431:rtos/uC-USB-Device/Source/usbd_ep.c ****                     (xfer_len       <  p_urb->NextXferLen) ||   /* Rx'd a short pkt (see Note #2). 
 4769              		.loc 1 2431 60 discriminator 1 view .LVU1594
 4770 0092 8242     		cmp	r2, r0
 4771 0094 02D8     		bhi	.L333
2433:rtos/uC-USB-Device/Source/usbd_ep.c ****                                                                 /* Xfer finished.                  
 4772              		.loc 1 2433 45 view .LVU1595
 4773 0096 7A68     		ldr	r2, [r7, #4]
2432:rtos/uC-USB-Device/Source/usbd_ep.c ****                     (p_urb->XferLen == p_urb->BufLen)) {        /* All bytes rx'd.                 
 4774              		.loc 1 2432 60 view .LVU1596
 4775 0098 9342     		cmp	r3, r2
 4776 009a 53D1     		bne	.L334
 4777              	.L333:
2435:rtos/uC-USB-Device/Source/usbd_ep.c ****                 } else {
 4778              		.loc 1 2435 21 is_stmt 1 view .LVU1597
2435:rtos/uC-USB-Device/Source/usbd_ep.c ****                 } else {
 4779              		.loc 1 2435 34 is_stmt 0 view .LVU1598
 4780 009c 0021     		movs	r1, #0
 4781 009e 2846     		mov	r0, r5
 4782              	.LVL457:
2435:rtos/uC-USB-Device/Source/usbd_ep.c ****                 } else {
 4783              		.loc 1 2435 34 view .LVU1599
 4784 00a0 FFF7FEFF 		bl	USBD_URB_AsyncCmpl
 4785              	.LVL458:
 4786 00a4 0646     		mov	r6, r0
 4787              	.LVL459:
2435:rtos/uC-USB-Device/Source/usbd_ep.c ****                 } else {
 4788              		.loc 1 2435 32 view .LVU1600
 4789 00a6 68E0     		b	.L330
 4790              	.LVL460:
 4791              	.L341:
2362:rtos/uC-USB-Device/Source/usbd_ep.c ****                                p_ep->Ix);
 4792              		.loc 1 2362 9 is_stmt 1 view .LVU1601
 4793 00a8 297A     		ldrb	r1, [r5, #8]	@ zero_extendqisi2
 4794 00aa 2078     		ldrb	r0, [r4]	@ zero_extendqisi2
 4795 00ac FFF7FEFF 		bl	USBD_OS_EP_LockRelease
 4796              	.LVL461:
2364:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 4797              		.loc 1 2364 9 view .LVU1602
 4798 00b0 6DE0     		b	.L322
 4799              	.LVL462:
 4800              	.L342:
2369:rtos/uC-USB-Device/Source/usbd_ep.c ****                                p_ep->Ix);
 4801              		.loc 1 2369 9 view .LVU1603
 4802 00b2 297A     		ldrb	r1, [r5, #8]	@ zero_extendqisi2
 4803 00b4 2078     		ldrb	r0, [r4]	@ zero_extendqisi2
 4804 00b6 FFF7FEFF 		bl	USBD_OS_EP_LockRelease
 4805              	.LVL463:
2371:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 4806              		.loc 1 2371 69 view .LVU1604
2372:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 4807              		.loc 1 2372 9 view .LVU1605
 4808 00ba 68E0     		b	.L322
 4809              	.L343:
2377:rtos/uC-USB-Device/Source/usbd_ep.c ****                                p_ep->Ix);
 4810              		.loc 1 2377 9 view .LVU1606
ARM GAS  /tmp/ccuUvpuw.s 			page 192


 4811 00bc 297A     		ldrb	r1, [r5, #8]	@ zero_extendqisi2
 4812 00be 2078     		ldrb	r0, [r4]	@ zero_extendqisi2
 4813 00c0 FFF7FEFF 		bl	USBD_OS_EP_LockRelease
 4814              	.LVL464:
2379:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 4815              		.loc 1 2379 71 view .LVU1607
2380:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 4816              		.loc 1 2380 9 view .LVU1608
 4817 00c4 63E0     		b	.L322
 4818              	.LVL465:
 4819              	.L344:
2389:rtos/uC-USB-Device/Source/usbd_ep.c ****                 USBD_EP_TxAsyncProcess(p_drv,
 4820              		.loc 1 2389 13 view .LVU1609
2389:rtos/uC-USB-Device/Source/usbd_ep.c ****                 USBD_EP_TxAsyncProcess(p_drv,
 4821              		.loc 1 2389 16 is_stmt 0 view .LVU1610
 4822 00c6 CBB9     		cbnz	r3, .L346
2399:rtos/uC-USB-Device/Source/usbd_ep.c ****                        (p_urb->XferLen % p_ep->MaxPktSize                    == 0u)      &&
 4823              		.loc 1 2399 20 is_stmt 1 view .LVU1611
2399:rtos/uC-USB-Device/Source/usbd_ep.c ****                        (p_urb->XferLen % p_ep->MaxPktSize                    == 0u)      &&
 4824              		.loc 1 2399 25 is_stmt 0 view .LVU1612
 4825 00c8 3A7C     		ldrb	r2, [r7, #16]	@ zero_extendqisi2
 4826              	.LVL466:
2399:rtos/uC-USB-Device/Source/usbd_ep.c ****                        (p_urb->XferLen % p_ep->MaxPktSize                    == 0u)      &&
 4827              		.loc 1 2399 23 view .LVU1613
 4828 00ca 12F0010F 		tst	r2, #1
 4829 00ce 2ED0     		beq	.L331
2400:rtos/uC-USB-Device/Source/usbd_ep.c ****                        (p_urb->XferLen                                       != 0u)) {
 4830              		.loc 1 2400 46 discriminator 1 view .LVU1614
 4831 00d0 A888     		ldrh	r0, [r5, #4]
2400:rtos/uC-USB-Device/Source/usbd_ep.c ****                        (p_urb->XferLen                                       != 0u)) {
 4832              		.loc 1 2400 40 discriminator 1 view .LVU1615
 4833 00d2 B1FBF0F3 		udiv	r3, r1, r0
 4834              	.LVL467:
2400:rtos/uC-USB-Device/Source/usbd_ep.c ****                        (p_urb->XferLen                                       != 0u)) {
 4835              		.loc 1 2400 40 discriminator 1 view .LVU1616
 4836 00d6 00FB1313 		mls	r3, r0, r3, r1
2399:rtos/uC-USB-Device/Source/usbd_ep.c ****                        (p_urb->XferLen % p_ep->MaxPktSize                    == 0u)      &&
 4837              		.loc 1 2399 90 discriminator 1 view .LVU1617
 4838 00da 43BB     		cbnz	r3, .L331
2400:rtos/uC-USB-Device/Source/usbd_ep.c ****                        (p_urb->XferLen                                       != 0u)) {
 4839              		.loc 1 2400 90 view .LVU1618
 4840 00dc 39B3     		cbz	r1, .L331
2404:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 4841              		.loc 1 2404 17 is_stmt 1 view .LVU1619
 4842 00de 02F0FE02 		and	r2, r2, #254
 4843 00e2 3A74     		strb	r2, [r7, #16]
2406:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 4844              		.loc 1 2406 77 view .LVU1620
2408:rtos/uC-USB-Device/Source/usbd_ep.c ****                 if (local_err != USBD_ERR_NONE) {
 4845              		.loc 1 2408 17 view .LVU1621
2408:rtos/uC-USB-Device/Source/usbd_ep.c ****                 if (local_err != USBD_ERR_NONE) {
 4846              		.loc 1 2408 26 is_stmt 0 view .LVU1622
 4847 00e4 D8F83C30 		ldr	r3, [r8, #60]
2408:rtos/uC-USB-Device/Source/usbd_ep.c ****                 if (local_err != USBD_ERR_NONE) {
 4848              		.loc 1 2408 17 view .LVU1623
 4849 00e8 0DF10E02 		add	r2, sp, #14
 4850 00ec A978     		ldrb	r1, [r5, #2]	@ zero_extendqisi2
ARM GAS  /tmp/ccuUvpuw.s 			page 193


 4851              	.LVL468:
2408:rtos/uC-USB-Device/Source/usbd_ep.c ****                 if (local_err != USBD_ERR_NONE) {
 4852              		.loc 1 2408 17 view .LVU1624
 4853 00ee 2046     		mov	r0, r4
 4854 00f0 9847     		blx	r3
 4855              	.LVL469:
2409:rtos/uC-USB-Device/Source/usbd_ep.c ****                     p_urb_cmpl = USBD_URB_AsyncCmpl(p_ep, local_err);
 4856              		.loc 1 2409 17 is_stmt 1 view .LVU1625
2409:rtos/uC-USB-Device/Source/usbd_ep.c ****                     p_urb_cmpl = USBD_URB_AsyncCmpl(p_ep, local_err);
 4857              		.loc 1 2409 31 is_stmt 0 view .LVU1626
 4858 00f2 BDF80E10 		ldrh	r1, [sp, #14]
2409:rtos/uC-USB-Device/Source/usbd_ep.c ****                     p_urb_cmpl = USBD_URB_AsyncCmpl(p_ep, local_err);
 4859              		.loc 1 2409 20 view .LVU1627
 4860 00f6 A9B9     		cbnz	r1, .L347
2383:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (xfer_err == USBD_ERR_NONE) {                            /* See Note #1.                    
 4861              		.loc 1 2383 16 view .LVU1628
 4862 00f8 0026     		movs	r6, #0
 4863 00fa 3EE0     		b	.L330
 4864              	.LVL470:
 4865              	.L346:
2390:rtos/uC-USB-Device/Source/usbd_ep.c ****                                        p_ep,
 4866              		.loc 1 2390 17 is_stmt 1 view .LVU1629
 4867 00fc 0DF10E01 		add	r1, sp, #14
 4868 0100 0191     		str	r1, [sp, #4]
 4869 0102 0093     		str	r3, [sp]
 4870 0104 1346     		mov	r3, r2
 4871              	.LVL471:
2390:rtos/uC-USB-Device/Source/usbd_ep.c ****                                        p_ep,
 4872              		.loc 1 2390 17 is_stmt 0 view .LVU1630
 4873 0106 3A46     		mov	r2, r7
 4874              	.LVL472:
2390:rtos/uC-USB-Device/Source/usbd_ep.c ****                                        p_ep,
 4875              		.loc 1 2390 17 view .LVU1631
 4876 0108 2946     		mov	r1, r5
 4877 010a 2046     		mov	r0, r4
 4878 010c FFF7FEFF 		bl	USBD_EP_TxAsyncProcess
 4879              	.LVL473:
2396:rtos/uC-USB-Device/Source/usbd_ep.c ****                     p_urb_cmpl = USBD_URB_AsyncCmpl(p_ep, local_err);
 4880              		.loc 1 2396 17 is_stmt 1 view .LVU1632
2396:rtos/uC-USB-Device/Source/usbd_ep.c ****                     p_urb_cmpl = USBD_URB_AsyncCmpl(p_ep, local_err);
 4881              		.loc 1 2396 31 is_stmt 0 view .LVU1633
 4882 0110 BDF80E10 		ldrh	r1, [sp, #14]
2396:rtos/uC-USB-Device/Source/usbd_ep.c ****                     p_urb_cmpl = USBD_URB_AsyncCmpl(p_ep, local_err);
 4883              		.loc 1 2396 20 view .LVU1634
 4884 0114 09B9     		cbnz	r1, .L348
2383:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (xfer_err == USBD_ERR_NONE) {                            /* See Note #1.                    
 4885              		.loc 1 2383 16 view .LVU1635
 4886 0116 0026     		movs	r6, #0
 4887 0118 2FE0     		b	.L330
 4888              	.L348:
2397:rtos/uC-USB-Device/Source/usbd_ep.c ****                 }
 4889              		.loc 1 2397 21 is_stmt 1 view .LVU1636
2397:rtos/uC-USB-Device/Source/usbd_ep.c ****                 }
 4890              		.loc 1 2397 34 is_stmt 0 view .LVU1637
 4891 011a 2846     		mov	r0, r5
 4892 011c FFF7FEFF 		bl	USBD_URB_AsyncCmpl
 4893              	.LVL474:
ARM GAS  /tmp/ccuUvpuw.s 			page 194


 4894 0120 0646     		mov	r6, r0
 4895              	.LVL475:
2397:rtos/uC-USB-Device/Source/usbd_ep.c ****                 }
 4896              		.loc 1 2397 34 view .LVU1638
 4897 0122 2AE0     		b	.L330
 4898              	.LVL476:
 4899              	.L347:
2410:rtos/uC-USB-Device/Source/usbd_ep.c ****                 }
 4900              		.loc 1 2410 21 is_stmt 1 view .LVU1639
2410:rtos/uC-USB-Device/Source/usbd_ep.c ****                 }
 4901              		.loc 1 2410 34 is_stmt 0 view .LVU1640
 4902 0124 2846     		mov	r0, r5
 4903 0126 FFF7FEFF 		bl	USBD_URB_AsyncCmpl
 4904              	.LVL477:
 4905 012a 0646     		mov	r6, r0
 4906              	.LVL478:
2410:rtos/uC-USB-Device/Source/usbd_ep.c ****                 }
 4907              		.loc 1 2410 34 view .LVU1641
 4908 012c 25E0     		b	.L330
 4909              	.LVL479:
 4910              	.L331:
2414:rtos/uC-USB-Device/Source/usbd_ep.c ****             }
 4911              		.loc 1 2414 17 is_stmt 1 view .LVU1642
2414:rtos/uC-USB-Device/Source/usbd_ep.c ****             }
 4912              		.loc 1 2414 30 is_stmt 0 view .LVU1643
 4913 012e 0021     		movs	r1, #0
 4914              	.LVL480:
2414:rtos/uC-USB-Device/Source/usbd_ep.c ****             }
 4915              		.loc 1 2414 30 view .LVU1644
 4916 0130 2846     		mov	r0, r5
 4917 0132 FFF7FEFF 		bl	USBD_URB_AsyncCmpl
 4918              	.LVL481:
2414:rtos/uC-USB-Device/Source/usbd_ep.c ****             }
 4919              		.loc 1 2414 30 view .LVU1645
 4920 0136 0646     		mov	r6, r0
 4921              	.LVL482:
2414:rtos/uC-USB-Device/Source/usbd_ep.c ****             }
 4922              		.loc 1 2414 30 view .LVU1646
 4923 0138 1FE0     		b	.L330
 4924              	.LVL483:
 4925              	.L345:
2425:rtos/uC-USB-Device/Source/usbd_ep.c ****             } else {
 4926              		.loc 1 2425 17 is_stmt 1 view .LVU1647
2425:rtos/uC-USB-Device/Source/usbd_ep.c ****             } else {
 4927              		.loc 1 2425 30 is_stmt 0 view .LVU1648
 4928 013a 2846     		mov	r0, r5
 4929              	.LVL484:
2425:rtos/uC-USB-Device/Source/usbd_ep.c ****             } else {
 4930              		.loc 1 2425 30 view .LVU1649
 4931 013c FFF7FEFF 		bl	USBD_URB_AsyncCmpl
 4932              	.LVL485:
 4933 0140 0646     		mov	r6, r0
 4934              	.LVL486:
2425:rtos/uC-USB-Device/Source/usbd_ep.c ****             } else {
 4935              		.loc 1 2425 30 view .LVU1650
 4936 0142 1AE0     		b	.L330
 4937              	.LVL487:
ARM GAS  /tmp/ccuUvpuw.s 			page 195


 4938              	.L334:
2437:rtos/uC-USB-Device/Source/usbd_ep.c ****                     xfer_len  =  p_urb->BufLen - p_urb->XferLen;
 4939              		.loc 1 2437 21 is_stmt 1 view .LVU1651
2437:rtos/uC-USB-Device/Source/usbd_ep.c ****                     xfer_len  =  p_urb->BufLen - p_urb->XferLen;
 4940              		.loc 1 2437 39 is_stmt 0 view .LVU1652
 4941 0144 3968     		ldr	r1, [r7]
 4942              	.LVL488:
2438:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 4943              		.loc 1 2438 21 is_stmt 1 view .LVU1653
2438:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 4944              		.loc 1 2438 31 is_stmt 0 view .LVU1654
 4945 0146 D21A     		subs	r2, r2, r3
 4946              	.LVL489:
2440:rtos/uC-USB-Device/Source/usbd_ep.c ****                                                 p_ep,
 4947              		.loc 1 2440 21 is_stmt 1 view .LVU1655
 4948 0148 0DF10E00 		add	r0, sp, #14
 4949 014c 0190     		str	r0, [sp, #4]
 4950 014e 0092     		str	r2, [sp]
 4951 0150 0B44     		add	r3, r3, r1
 4952              	.LVL490:
2440:rtos/uC-USB-Device/Source/usbd_ep.c ****                                                 p_ep,
 4953              		.loc 1 2440 21 is_stmt 0 view .LVU1656
 4954 0152 3A46     		mov	r2, r7
 4955              	.LVL491:
2440:rtos/uC-USB-Device/Source/usbd_ep.c ****                                                 p_ep,
 4956              		.loc 1 2440 21 view .LVU1657
 4957 0154 2946     		mov	r1, r5
 4958 0156 2046     		mov	r0, r4
 4959 0158 FFF7FEFF 		bl	USBD_EP_RxStartAsyncProcess
 4960              	.LVL492:
2446:rtos/uC-USB-Device/Source/usbd_ep.c ****                         p_urb_cmpl = USBD_URB_AsyncCmpl(p_ep, local_err);
 4961              		.loc 1 2446 21 is_stmt 1 view .LVU1658
2446:rtos/uC-USB-Device/Source/usbd_ep.c ****                         p_urb_cmpl = USBD_URB_AsyncCmpl(p_ep, local_err);
 4962              		.loc 1 2446 35 is_stmt 0 view .LVU1659
 4963 015c BDF80E10 		ldrh	r1, [sp, #14]
2446:rtos/uC-USB-Device/Source/usbd_ep.c ****                         p_urb_cmpl = USBD_URB_AsyncCmpl(p_ep, local_err);
 4964              		.loc 1 2446 24 view .LVU1660
 4965 0160 09B9     		cbnz	r1, .L349
2383:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (xfer_err == USBD_ERR_NONE) {                            /* See Note #1.                    
 4966              		.loc 1 2383 16 view .LVU1661
 4967 0162 0026     		movs	r6, #0
 4968 0164 09E0     		b	.L330
 4969              	.L349:
2447:rtos/uC-USB-Device/Source/usbd_ep.c ****                     }
 4970              		.loc 1 2447 25 is_stmt 1 view .LVU1662
2447:rtos/uC-USB-Device/Source/usbd_ep.c ****                     }
 4971              		.loc 1 2447 38 is_stmt 0 view .LVU1663
 4972 0166 2846     		mov	r0, r5
 4973 0168 FFF7FEFF 		bl	USBD_URB_AsyncCmpl
 4974              	.LVL493:
 4975 016c 0646     		mov	r6, r0
 4976              	.LVL494:
2447:rtos/uC-USB-Device/Source/usbd_ep.c ****                     }
 4977              		.loc 1 2447 38 view .LVU1664
 4978 016e 04E0     		b	.L330
 4979              	.LVL495:
 4980              	.L327:
ARM GAS  /tmp/ccuUvpuw.s 			page 196


2453:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 4981              		.loc 1 2453 9 is_stmt 1 view .LVU1665
2453:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 4982              		.loc 1 2453 22 is_stmt 0 view .LVU1666
 4983 0170 3146     		mov	r1, r6
 4984 0172 2846     		mov	r0, r5
 4985 0174 FFF7FEFF 		bl	USBD_URB_AsyncCmpl
 4986              	.LVL496:
 4987 0178 0646     		mov	r6, r0
 4988              	.LVL497:
 4989              	.L330:
2456:rtos/uC-USB-Device/Source/usbd_ep.c ****                            p_ep->Ix);
 4990              		.loc 1 2456 5 is_stmt 1 view .LVU1667
 4991 017a 297A     		ldrb	r1, [r5, #8]	@ zero_extendqisi2
 4992 017c 2078     		ldrb	r0, [r4]	@ zero_extendqisi2
 4993 017e FFF7FEFF 		bl	USBD_OS_EP_LockRelease
 4994              	.LVL498:
2459:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_URB_AsyncEnd(p_drv->DevNbr, p_ep, p_urb_cmpl);     /* Execute callback and free aborte
 4995              		.loc 1 2459 5 view .LVU1668
2459:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_URB_AsyncEnd(p_drv->DevNbr, p_ep, p_urb_cmpl);     /* Execute callback and free aborte
 4996              		.loc 1 2459 8 is_stmt 0 view .LVU1669
 4997 0182 26B1     		cbz	r6, .L322
2460:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 4998              		.loc 1 2460 9 is_stmt 1 view .LVU1670
 4999 0184 3246     		mov	r2, r6
 5000 0186 2946     		mov	r1, r5
 5001 0188 2078     		ldrb	r0, [r4]	@ zero_extendqisi2
 5002 018a FFF7FEFF 		bl	USBD_URB_AsyncEnd
 5003              	.LVL499:
 5004              	.L322:
2462:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 5005              		.loc 1 2462 1 is_stmt 0 view .LVU1671
 5006 018e 05B0     		add	sp, sp, #20
 5007              	.LCFI69:
 5008              		.cfi_def_cfa_offset 28
 5009              		@ sp needed
 5010 0190 BDE8F083 		pop	{r4, r5, r6, r7, r8, r9, pc}
 5011              	.LVL500:
 5012              	.L351:
2462:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 5013              		.loc 1 2462 1 view .LVU1672
 5014              		.align	2
 5015              	.L350:
 5016 0194 00000000 		.word	.LANCHOR1
 5017              		.cfi_endproc
 5018              	.LFE16:
 5020              		.section	.text.USBD_EP_Open,"ax",%progbits
 5021              		.align	1
 5022              		.global	USBD_EP_Open
 5023              		.syntax unified
 5024              		.thumb
 5025              		.thumb_func
 5026              		.fpu fpv4-sp-d16
 5028              	USBD_EP_Open:
 5029              	.LVL501:
 5030              	.LFB17:
2509:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DRV_API  *p_drv_api;
ARM GAS  /tmp/ccuUvpuw.s 			page 197


 5031              		.loc 1 2509 1 is_stmt 1 view -0
 5032              		.cfi_startproc
 5033              		@ args = 8, pretend = 0, frame = 16
 5034              		@ frame_needed = 0, uses_anonymous_args = 0
2509:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DRV_API  *p_drv_api;
 5035              		.loc 1 2509 1 is_stmt 0 view .LVU1674
 5036 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 5037              	.LCFI70:
 5038              		.cfi_def_cfa_offset 36
 5039              		.cfi_offset 4, -36
 5040              		.cfi_offset 5, -32
 5041              		.cfi_offset 6, -28
 5042              		.cfi_offset 7, -24
 5043              		.cfi_offset 8, -20
 5044              		.cfi_offset 9, -16
 5045              		.cfi_offset 10, -12
 5046              		.cfi_offset 11, -8
 5047              		.cfi_offset 14, -4
 5048 0004 87B0     		sub	sp, sp, #28
 5049              	.LCFI71:
 5050              		.cfi_def_cfa_offset 64
 5051 0006 0292     		str	r2, [sp, #8]
 5052 0008 0393     		str	r3, [sp, #12]
2510:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_EP       *p_ep;
 5053              		.loc 1 2510 5 is_stmt 1 view .LVU1675
2511:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_INT08U     ep_bit;
 5054              		.loc 1 2511 5 view .LVU1676
2512:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_INT08U     ep_ix;
 5055              		.loc 1 2512 5 view .LVU1677
2513:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_INT08U     ep_phy_nbr;
 5056              		.loc 1 2513 5 view .LVU1678
2514:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_INT08U     dev_nbr;
 5057              		.loc 1 2514 5 view .LVU1679
2515:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_INT08U     transaction_frame;
 5058              		.loc 1 2515 5 view .LVU1680
2516:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_SR_ALLOC();
 5059              		.loc 1 2516 5 view .LVU1681
2517:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 5060              		.loc 1 2517 5 view .LVU1682
 5061              	.LVL502:
2521:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_NULL_PTR;
 5062              		.loc 1 2521 5 view .LVU1683
2521:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_NULL_PTR;
 5063              		.loc 1 2521 8 is_stmt 0 view .LVU1684
 5064 000a A0B1     		cbz	r0, .L361
 5065 000c 0C46     		mov	r4, r1
 5066 000e 0746     		mov	r7, r0
2527:rtos/uC-USB-Device/Source/usbd_ep.c ****     ep_phy_nbr = USBD_EP_ADDR_TO_PHY(ep_addr);
 5067              		.loc 1 2527 5 is_stmt 1 view .LVU1685
2527:rtos/uC-USB-Device/Source/usbd_ep.c ****     ep_phy_nbr = USBD_EP_ADDR_TO_PHY(ep_addr);
 5068              		.loc 1 2527 16 is_stmt 0 view .LVU1686
 5069 0010 0578     		ldrb	r5, [r0]	@ zero_extendqisi2
 5070              	.LVL503:
2528:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_ep       = USBD_EP_TblPtrs[dev_nbr][ep_phy_nbr];
 5071              		.loc 1 2528 5 is_stmt 1 view .LVU1687
2528:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_ep       = USBD_EP_TblPtrs[dev_nbr][ep_phy_nbr];
 5072              		.loc 1 2528 18 is_stmt 0 view .LVU1688
ARM GAS  /tmp/ccuUvpuw.s 			page 198


 5073 0012 01F00F06 		and	r6, r1, #15
 5074 0016 CB09     		lsrs	r3, r1, #7
 5075              	.LVL504:
2528:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_ep       = USBD_EP_TblPtrs[dev_nbr][ep_phy_nbr];
 5076              		.loc 1 2528 16 view .LVU1689
 5077 0018 03EB4606 		add	r6, r3, r6, lsl #1
 5078              	.LVL505:
2529:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 5079              		.loc 1 2529 5 is_stmt 1 view .LVU1690
2529:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 5080              		.loc 1 2529 16 is_stmt 0 view .LVU1691
 5081 001c 06EB4512 		add	r2, r6, r5, lsl #5
 5082              	.LVL506:
2529:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 5083              		.loc 1 2529 16 view .LVU1692
 5084 0020 5B4B     		ldr	r3, .L365
 5085 0022 53F82230 		ldr	r3, [r3, r2, lsl #2]
 5086              	.LVL507:
2531:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err =  USBD_ERR_EP_INVALID_ADDR;
 5087              		.loc 1 2531 5 is_stmt 1 view .LVU1693
2531:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err =  USBD_ERR_EP_INVALID_ADDR;
 5088              		.loc 1 2531 8 is_stmt 0 view .LVU1694
 5089 0026 53B1     		cbz	r3, .L355
2532:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 5090              		.loc 1 2532 8 is_stmt 1 view .LVU1695
2532:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 5091              		.loc 1 2532 15 is_stmt 0 view .LVU1696
 5092 0028 40F29113 		movw	r3, #401
 5093              	.LVL508:
2532:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 5094              		.loc 1 2532 15 view .LVU1697
 5095 002c 119A     		ldr	r2, [sp, #68]
 5096              	.LVL509:
2532:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 5097              		.loc 1 2532 15 view .LVU1698
 5098 002e 1380     		strh	r3, [r2]	@ movhi
2533:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 5099              		.loc 1 2533 9 is_stmt 1 view .LVU1699
 5100              	.LVL510:
 5101              	.L352:
2617:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 5102              		.loc 1 2617 1 is_stmt 0 view .LVU1700
 5103 0030 07B0     		add	sp, sp, #28
 5104              	.LCFI72:
 5105              		.cfi_remember_state
 5106              		.cfi_def_cfa_offset 36
 5107              		@ sp needed
 5108 0032 BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 5109              	.LVL511:
 5110              	.L361:
 5111              	.LCFI73:
 5112              		.cfi_restore_state
2522:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 5113              		.loc 1 2522 8 is_stmt 1 view .LVU1701
2522:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 5114              		.loc 1 2522 15 is_stmt 0 view .LVU1702
 5115 0036 0523     		movs	r3, #5
ARM GAS  /tmp/ccuUvpuw.s 			page 199


 5116              	.LVL512:
2522:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 5117              		.loc 1 2522 15 view .LVU1703
 5118 0038 119A     		ldr	r2, [sp, #68]
 5119              	.LVL513:
2522:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 5120              		.loc 1 2522 15 view .LVU1704
 5121 003a 1380     		strh	r3, [r2]	@ movhi
2523:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 5122              		.loc 1 2523 9 is_stmt 1 view .LVU1705
 5123 003c F8E7     		b	.L352
 5124              	.LVL514:
 5125              	.L355:
2536:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (USBD_EP_OpenCtr[dev_nbr] == USBD_CFG_MAX_NBR_EP_OPEN) {
 5126              		.loc 1 2536 5 view .LVU1706
2536:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (USBD_EP_OpenCtr[dev_nbr] == USBD_CFG_MAX_NBR_EP_OPEN) {
 5127              		.loc 1 2536 5 view .LVU1707
2536:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (USBD_EP_OpenCtr[dev_nbr] == USBD_CFG_MAX_NBR_EP_OPEN) {
 5128              		.loc 1 2536 5 view .LVU1708
 5129 003e 4020     		movs	r0, #64
 5130              	.LVL515:
2536:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (USBD_EP_OpenCtr[dev_nbr] == USBD_CFG_MAX_NBR_EP_OPEN) {
 5131              		.loc 1 2536 5 is_stmt 0 view .LVU1709
 5132 0040 FFF7FEFF 		bl	CPU_SR_Save
 5133              	.LVL516:
2536:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (USBD_EP_OpenCtr[dev_nbr] == USBD_CFG_MAX_NBR_EP_OPEN) {
 5134              		.loc 1 2536 5 view .LVU1710
 5135 0044 8146     		mov	r9, r0
 5136              	.LVL517:
2536:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (USBD_EP_OpenCtr[dev_nbr] == USBD_CFG_MAX_NBR_EP_OPEN) {
 5137              		.loc 1 2536 5 is_stmt 1 view .LVU1711
2536:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (USBD_EP_OpenCtr[dev_nbr] == USBD_CFG_MAX_NBR_EP_OPEN) {
 5138              		.loc 1 2536 5 view .LVU1712
2537:rtos/uC-USB-Device/Source/usbd_ep.c ****         CPU_CRITICAL_EXIT();
 5139              		.loc 1 2537 5 view .LVU1713
2537:rtos/uC-USB-Device/Source/usbd_ep.c ****         CPU_CRITICAL_EXIT();
 5140              		.loc 1 2537 24 is_stmt 0 view .LVU1714
 5141 0046 534B     		ldr	r3, .L365+4
 5142 0048 5B5D     		ldrb	r3, [r3, r5]	@ zero_extendqisi2
2537:rtos/uC-USB-Device/Source/usbd_ep.c ****         CPU_CRITICAL_EXIT();
 5143              		.loc 1 2537 8 view .LVU1715
 5144 004a 042B     		cmp	r3, #4
 5145 004c 36D0     		beq	.L362
2543:rtos/uC-USB-Device/Source/usbd_ep.c ****     DEF_BIT_CLR(USBD_EP_OpenBitMap[dev_nbr], DEF_BIT32(ep_bit));
 5146              		.loc 1 2543 5 is_stmt 1 view .LVU1716
2543:rtos/uC-USB-Device/Source/usbd_ep.c ****     DEF_BIT_CLR(USBD_EP_OpenBitMap[dev_nbr], DEF_BIT32(ep_bit));
 5147              		.loc 1 2543 50 is_stmt 0 view .LVU1717
 5148 004e DFF848B1 		ldr	fp, .L365+8
 5149 0052 5BF82500 		ldr	r0, [fp, r5, lsl #2]
 5150              	.LVL518:
2543:rtos/uC-USB-Device/Source/usbd_ep.c ****     DEF_BIT_CLR(USBD_EP_OpenBitMap[dev_nbr], DEF_BIT32(ep_bit));
 5151              		.loc 1 2543 50 view .LVU1718
 5152 0056 FFF7FEFF 		bl	CPU_CntLeadZeros32
 5153              	.LVL519:
 5154 005a 0490     		str	r0, [sp, #16]
2543:rtos/uC-USB-Device/Source/usbd_ep.c ****     DEF_BIT_CLR(USBD_EP_OpenBitMap[dev_nbr], DEF_BIT32(ep_bit));
 5155              		.loc 1 2543 14 view .LVU1719
ARM GAS  /tmp/ccuUvpuw.s 			page 200


 5156 005c 5FFA80FA 		uxtb	r10, r0
2543:rtos/uC-USB-Device/Source/usbd_ep.c ****     DEF_BIT_CLR(USBD_EP_OpenBitMap[dev_nbr], DEF_BIT32(ep_bit));
 5157              		.loc 1 2543 12 view .LVU1720
 5158 0060 CAF11F08 		rsb	r8, r10, #31
 5159 0064 5FFA88F2 		uxtb	r2, r8
 5160              	.LVL520:
2544:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_EP_OpenCtr[dev_nbr]++;
 5161              		.loc 1 2544 5 is_stmt 1 view .LVU1721
 5162 0068 5BF82530 		ldr	r3, [fp, r5, lsl #2]
 5163 006c 4FF00108 		mov	r8, #1
 5164 0070 08FA02F8 		lsl	r8, r8, r2
 5165 0074 23EA0803 		bic	r3, r3, r8
 5166 0078 4BF82530 		str	r3, [fp, r5, lsl #2]
2545:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_CRITICAL_EXIT();
 5167              		.loc 1 2545 5 view .LVU1722
2545:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_CRITICAL_EXIT();
 5168              		.loc 1 2545 20 is_stmt 0 view .LVU1723
 5169 007c 454A     		ldr	r2, .L365+4
 5170              	.LVL521:
2545:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_CRITICAL_EXIT();
 5171              		.loc 1 2545 20 view .LVU1724
 5172 007e 535D     		ldrb	r3, [r2, r5]	@ zero_extendqisi2
2545:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_CRITICAL_EXIT();
 5173              		.loc 1 2545 29 view .LVU1725
 5174 0080 0133     		adds	r3, r3, #1
 5175 0082 5355     		strb	r3, [r2, r5]
2546:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 5176              		.loc 1 2546 5 is_stmt 1 view .LVU1726
2546:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 5177              		.loc 1 2546 5 view .LVU1727
2546:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 5178              		.loc 1 2546 5 view .LVU1728
 5179 0084 4846     		mov	r0, r9
 5180 0086 FFF7FEFF 		bl	CPU_SR_Restore
 5181              	.LVL522:
2546:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 5182              		.loc 1 2546 5 view .LVU1729
2546:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 5183              		.loc 1 2546 5 view .LVU1730
2548:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 5184              		.loc 1 2548 5 view .LVU1731
2550:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (*p_err != USBD_ERR_NONE) {
 5185              		.loc 1 2550 5 view .LVU1732
 5186 008a 119A     		ldr	r2, [sp, #68]
 5187 008c 5146     		mov	r1, r10
 5188 008e 3878     		ldrb	r0, [r7]	@ zero_extendqisi2
 5189 0090 FFF7FEFF 		bl	USBD_OS_EP_SignalCreate
 5190              	.LVL523:
2551:rtos/uC-USB-Device/Source/usbd_ep.c ****         goto end_clean;
 5191              		.loc 1 2551 5 view .LVU1733
2551:rtos/uC-USB-Device/Source/usbd_ep.c ****         goto end_clean;
 5192              		.loc 1 2551 9 is_stmt 0 view .LVU1734
 5193 0094 119B     		ldr	r3, [sp, #68]
 5194 0096 1B88     		ldrh	r3, [r3]
2551:rtos/uC-USB-Device/Source/usbd_ep.c ****         goto end_clean;
 5195              		.loc 1 2551 8 view .LVU1735
 5196 0098 BBB1     		cbz	r3, .L363
ARM GAS  /tmp/ccuUvpuw.s 			page 201


 5197              	.LVL524:
 5198              	.L357:
2609:rtos/uC-USB-Device/Source/usbd_ep.c ****     DEF_BIT_SET(USBD_EP_OpenBitMap[dev_nbr], DEF_BIT32(ep_bit));
 5199              		.loc 1 2609 5 is_stmt 1 view .LVU1736
2609:rtos/uC-USB-Device/Source/usbd_ep.c ****     DEF_BIT_SET(USBD_EP_OpenBitMap[dev_nbr], DEF_BIT32(ep_bit));
 5200              		.loc 1 2609 5 view .LVU1737
2609:rtos/uC-USB-Device/Source/usbd_ep.c ****     DEF_BIT_SET(USBD_EP_OpenBitMap[dev_nbr], DEF_BIT32(ep_bit));
 5201              		.loc 1 2609 5 view .LVU1738
 5202 009a 4020     		movs	r0, #64
 5203 009c FFF7FEFF 		bl	CPU_SR_Save
 5204              	.LVL525:
2609:rtos/uC-USB-Device/Source/usbd_ep.c ****     DEF_BIT_SET(USBD_EP_OpenBitMap[dev_nbr], DEF_BIT32(ep_bit));
 5205              		.loc 1 2609 5 view .LVU1739
2609:rtos/uC-USB-Device/Source/usbd_ep.c ****     DEF_BIT_SET(USBD_EP_OpenBitMap[dev_nbr], DEF_BIT32(ep_bit));
 5206              		.loc 1 2609 5 view .LVU1740
2610:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_EP_OpenCtr[dev_nbr] -= 1u;
 5207              		.loc 1 2610 5 view .LVU1741
 5208 00a0 3D4A     		ldr	r2, .L365+8
 5209 00a2 52F82530 		ldr	r3, [r2, r5, lsl #2]
 5210 00a6 48EA0303 		orr	r3, r8, r3
 5211 00aa 42F82530 		str	r3, [r2, r5, lsl #2]
2611:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_CRITICAL_EXIT();
 5212              		.loc 1 2611 5 view .LVU1742
2611:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_CRITICAL_EXIT();
 5213              		.loc 1 2611 30 is_stmt 0 view .LVU1743
 5214 00ae 394A     		ldr	r2, .L365+4
 5215 00b0 535D     		ldrb	r3, [r2, r5]	@ zero_extendqisi2
 5216 00b2 013B     		subs	r3, r3, #1
 5217 00b4 5355     		strb	r3, [r2, r5]
2612:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 5218              		.loc 1 2612 5 is_stmt 1 view .LVU1744
2612:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 5219              		.loc 1 2612 5 view .LVU1745
2612:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 5220              		.loc 1 2612 5 view .LVU1746
 5221 00b6 FFF7FEFF 		bl	CPU_SR_Restore
 5222              	.LVL526:
2612:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 5223              		.loc 1 2612 5 view .LVU1747
2612:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 5224              		.loc 1 2612 5 view .LVU1748
2614:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 5225              		.loc 1 2614 48 view .LVU1749
2616:rtos/uC-USB-Device/Source/usbd_ep.c **** }
 5226              		.loc 1 2616 5 view .LVU1750
 5227 00ba B9E7     		b	.L352
 5228              	.LVL527:
 5229              	.L362:
2538:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_EP_NONE_AVAIL;
 5230              		.loc 1 2538 9 view .LVU1751
2538:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_EP_NONE_AVAIL;
 5231              		.loc 1 2538 9 view .LVU1752
2538:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_EP_NONE_AVAIL;
 5232              		.loc 1 2538 9 view .LVU1753
 5233 00bc FFF7FEFF 		bl	CPU_SR_Restore
 5234              	.LVL528:
2538:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_EP_NONE_AVAIL;
ARM GAS  /tmp/ccuUvpuw.s 			page 202


 5235              		.loc 1 2538 9 view .LVU1754
2538:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_EP_NONE_AVAIL;
 5236              		.loc 1 2538 9 view .LVU1755
2539:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 5237              		.loc 1 2539 8 view .LVU1756
2539:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 5238              		.loc 1 2539 15 is_stmt 0 view .LVU1757
 5239 00c0 4FF4CA73 		mov	r3, #404
 5240 00c4 119A     		ldr	r2, [sp, #68]
 5241 00c6 1380     		strh	r3, [r2]	@ movhi
2540:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 5242              		.loc 1 2540 9 is_stmt 1 view .LVU1758
 5243 00c8 B2E7     		b	.L352
 5244              	.LVL529:
 5245              	.L363:
2555:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (*p_err != USBD_ERR_NONE) {
 5246              		.loc 1 2555 5 view .LVU1759
 5247 00ca 119A     		ldr	r2, [sp, #68]
 5248 00cc 5146     		mov	r1, r10
 5249 00ce 3878     		ldrb	r0, [r7]	@ zero_extendqisi2
 5250 00d0 FFF7FEFF 		bl	USBD_OS_EP_LockCreate
 5251              	.LVL530:
2556:rtos/uC-USB-Device/Source/usbd_ep.c ****         goto end_signal_clean;
 5252              		.loc 1 2556 5 view .LVU1760
2556:rtos/uC-USB-Device/Source/usbd_ep.c ****         goto end_signal_clean;
 5253              		.loc 1 2556 9 is_stmt 0 view .LVU1761
 5254 00d4 119B     		ldr	r3, [sp, #68]
 5255 00d6 1B88     		ldrh	r3, [r3]
2556:rtos/uC-USB-Device/Source/usbd_ep.c ****         goto end_signal_clean;
 5256              		.loc 1 2556 8 view .LVU1762
 5257 00d8 002B     		cmp	r3, #0
 5258 00da 54D1     		bne	.L358
2560:rtos/uC-USB-Device/Source/usbd_ep.c ****     transaction_frame +=  1u;
 5259              		.loc 1 2560 5 is_stmt 1 view .LVU1763
2560:rtos/uC-USB-Device/Source/usbd_ep.c ****     transaction_frame +=  1u;
 5260              		.loc 1 2560 24 is_stmt 0 view .LVU1764
 5261 00dc 0299     		ldr	r1, [sp, #8]
 5262 00de C1F3C123 		ubfx	r3, r1, #11, #2
 5263              	.LVL531:
2561:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 5264              		.loc 1 2561 5 is_stmt 1 view .LVU1765
2561:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 5265              		.loc 1 2561 23 is_stmt 0 view .LVU1766
 5266 00e2 0133     		adds	r3, r3, #1
 5267              	.LVL532:
2563:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_drv_api->EP_Open(p_drv,                                   /* Open EP in dev drv.             
 5268              		.loc 1 2563 5 is_stmt 1 view .LVU1767
2563:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_drv_api->EP_Open(p_drv,                                   /* Open EP in dev drv.             
 5269              		.loc 1 2563 15 is_stmt 0 view .LVU1768
 5270 00e4 7A68     		ldr	r2, [r7, #4]
 5271              	.LVL533:
2564:rtos/uC-USB-Device/Source/usbd_ep.c ****                        ep_addr,
 5272              		.loc 1 2564 5 is_stmt 1 view .LVU1769
2564:rtos/uC-USB-Device/Source/usbd_ep.c ****                        ep_addr,
 5273              		.loc 1 2564 14 is_stmt 0 view .LVU1770
 5274 00e6 D2F82090 		ldr	r9, [r2, #32]
 5275              	.LVL534:
ARM GAS  /tmp/ccuUvpuw.s 			page 203


2564:rtos/uC-USB-Device/Source/usbd_ep.c ****                        ep_addr,
 5276              		.loc 1 2564 5 view .LVU1771
 5277 00ea 119A     		ldr	r2, [sp, #68]
 5278              	.LVL535:
2564:rtos/uC-USB-Device/Source/usbd_ep.c ****                        ep_addr,
 5279              		.loc 1 2564 5 view .LVU1772
 5280 00ec 0192     		str	r2, [sp, #4]
 5281              	.LVL536:
2564:rtos/uC-USB-Device/Source/usbd_ep.c ****                        ep_addr,
 5282              		.loc 1 2564 5 view .LVU1773
 5283 00ee 0093     		str	r3, [sp]
 5284 00f0 C1F30A03 		ubfx	r3, r1, #0, #11
 5285              	.LVL537:
2564:rtos/uC-USB-Device/Source/usbd_ep.c ****                        ep_addr,
 5286              		.loc 1 2564 5 view .LVU1774
 5287 00f4 039A     		ldr	r2, [sp, #12]
 5288 00f6 02F00302 		and	r2, r2, #3
 5289 00fa 2146     		mov	r1, r4
 5290 00fc 3846     		mov	r0, r7
 5291 00fe C847     		blx	r9
 5292              	.LVL538:
2570:rtos/uC-USB-Device/Source/usbd_ep.c ****         goto end_lock_signal_clean;
 5293              		.loc 1 2570 5 is_stmt 1 view .LVU1775
2570:rtos/uC-USB-Device/Source/usbd_ep.c ****         goto end_lock_signal_clean;
 5294              		.loc 1 2570 9 is_stmt 0 view .LVU1776
 5295 0100 119B     		ldr	r3, [sp, #68]
 5296 0102 1B88     		ldrh	r3, [r3]
2570:rtos/uC-USB-Device/Source/usbd_ep.c ****         goto end_lock_signal_clean;
 5297              		.loc 1 2570 8 view .LVU1777
 5298 0104 002B     		cmp	r3, #0
 5299 0106 3AD1     		bne	.L364
2574:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 5300              		.loc 1 2574 5 is_stmt 1 view .LVU1778
2574:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 5301              		.loc 1 2574 33 is_stmt 0 view .LVU1779
 5302 0108 9DF81070 		ldrb	r7, [sp, #16]	@ zero_extendqisi2
 5303              	.LVL539:
2574:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 5304              		.loc 1 2574 10 view .LVU1780
 5305 010c DFF88C90 		ldr	r9, .L365+12
 5306 0110 BB00     		lsls	r3, r7, #2
 5307 0112 0493     		str	r3, [sp, #16]
 5308 0114 07EB8703 		add	r3, r7, r7, lsl #2
 5309 0118 AA00     		lsls	r2, r5, #2
 5310 011a 0592     		str	r2, [sp, #20]
 5311 011c 05EB850B 		add	fp, r5, r5, lsl #2
 5312 0120 4FEA0B1B 		lsl	fp, fp, #4
 5313 0124 0BEB830B 		add	fp, fp, r3, lsl #2
 5314 0128 09EB0B08 		add	r8, r9, fp
 5315              	.LVL540:
2576:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_ep->Addr       = ep_addr;
 5316              		.loc 1 2576 5 is_stmt 1 view .LVU1781
2576:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_ep->Addr       = ep_addr;
 5317              		.loc 1 2576 5 view .LVU1782
2576:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_ep->Addr       = ep_addr;
 5318              		.loc 1 2576 5 view .LVU1783
 5319 012c 4020     		movs	r0, #64
ARM GAS  /tmp/ccuUvpuw.s 			page 204


 5320 012e FFF7FEFF 		bl	CPU_SR_Save
 5321              	.LVL541:
2576:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_ep->Addr       = ep_addr;
 5322              		.loc 1 2576 5 view .LVU1784
2576:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_ep->Addr       = ep_addr;
 5323              		.loc 1 2576 5 view .LVU1785
2577:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_ep->Attrib     = attrib;
 5324              		.loc 1 2577 5 view .LVU1786
2577:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_ep->Attrib     = attrib;
 5325              		.loc 1 2577 22 is_stmt 0 view .LVU1787
 5326 0132 88F80240 		strb	r4, [r8, #2]
2578:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_ep->MaxPktSize = max_pkt_size;
 5327              		.loc 1 2578 5 is_stmt 1 view .LVU1788
2578:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_ep->MaxPktSize = max_pkt_size;
 5328              		.loc 1 2578 22 is_stmt 0 view .LVU1789
 5329 0136 0399     		ldr	r1, [sp, #12]
 5330 0138 88F80310 		strb	r1, [r8, #3]
2579:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_ep->Interval   = interval;
 5331              		.loc 1 2579 5 is_stmt 1 view .LVU1790
2579:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_ep->Interval   = interval;
 5332              		.loc 1 2579 22 is_stmt 0 view .LVU1791
 5333 013c 0299     		ldr	r1, [sp, #8]
 5334 013e A8F80410 		strh	r1, [r8, #4]	@ movhi
2580:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_ep->State      = USBD_EP_STATE_OPEN;
 5335              		.loc 1 2580 5 is_stmt 1 view .LVU1792
2580:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_ep->State      = USBD_EP_STATE_OPEN;
 5336              		.loc 1 2580 22 is_stmt 0 view .LVU1793
 5337 0142 9DF84030 		ldrb	r3, [sp, #64]	@ zero_extendqisi2
 5338 0146 88F80630 		strb	r3, [r8, #6]
2581:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_ep->XferState  = USBD_XFER_STATE_NONE;
 5339              		.loc 1 2581 5 is_stmt 1 view .LVU1794
2581:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_ep->XferState  = USBD_XFER_STATE_NONE;
 5340              		.loc 1 2581 22 is_stmt 0 view .LVU1795
 5341 014a 0123     		movs	r3, #1
 5342 014c 09F80B30 		strb	r3, [r9, fp]
2582:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_ep->Ix         = ep_ix;
 5343              		.loc 1 2582 5 is_stmt 1 view .LVU1796
2582:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_ep->Ix         = ep_ix;
 5344              		.loc 1 2582 22 is_stmt 0 view .LVU1797
 5345 0150 0024     		movs	r4, #0
 5346 0152 88F80140 		strb	r4, [r8, #1]
2583:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 5347              		.loc 1 2583 5 is_stmt 1 view .LVU1798
2583:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 5348              		.loc 1 2583 22 is_stmt 0 view .LVU1799
 5349 0156 049B     		ldr	r3, [sp, #16]
 5350 0158 3B44     		add	r3, r3, r7
 5351 015a 059A     		ldr	r2, [sp, #20]
 5352 015c 5719     		adds	r7, r2, r5
 5353 015e 3F01     		lsls	r7, r7, #4
 5354 0160 07EB8307 		add	r7, r7, r3, lsl #2
 5355 0164 4F44     		add	r7, r7, r9
 5356 0166 87F808A0 		strb	r10, [r7, #8]
2585:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_CRITICAL_EXIT();
 5357              		.loc 1 2585 5 is_stmt 1 view .LVU1800
2585:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_CRITICAL_EXIT();
 5358              		.loc 1 2585 42 is_stmt 0 view .LVU1801
ARM GAS  /tmp/ccuUvpuw.s 			page 205


 5359 016a 06EB4515 		add	r5, r6, r5, lsl #5
 5360              	.LVL542:
2585:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_CRITICAL_EXIT();
 5361              		.loc 1 2585 42 view .LVU1802
 5362 016e 084B     		ldr	r3, .L365
 5363 0170 43F82580 		str	r8, [r3, r5, lsl #2]
2586:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 5364              		.loc 1 2586 5 is_stmt 1 view .LVU1803
2586:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 5365              		.loc 1 2586 5 view .LVU1804
2586:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 5366              		.loc 1 2586 5 view .LVU1805
 5367 0174 FFF7FEFF 		bl	CPU_SR_Restore
 5368              	.LVL543:
2586:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 5369              		.loc 1 2586 5 view .LVU1806
2586:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 5370              		.loc 1 2586 5 view .LVU1807
2595:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 5371              		.loc 1 2595 54 view .LVU1808
2597:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 5372              		.loc 1 2597 36 view .LVU1809
2599:rtos/uC-USB-Device/Source/usbd_ep.c ****     return;
 5373              		.loc 1 2599 4 view .LVU1810
2599:rtos/uC-USB-Device/Source/usbd_ep.c ****     return;
 5374              		.loc 1 2599 11 is_stmt 0 view .LVU1811
 5375 0178 119B     		ldr	r3, [sp, #68]
 5376 017a 1C80     		strh	r4, [r3]	@ movhi
2600:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 5377              		.loc 1 2600 5 is_stmt 1 view .LVU1812
 5378 017c 58E7     		b	.L352
 5379              	.LVL544:
 5380              	.L364:
2571:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 5381              		.loc 1 2571 9 view .LVU1813
 5382              	.LDL1:
2603:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 5383              		.loc 1 2603 5 view .LVU1814
 5384 017e 5146     		mov	r1, r10
 5385 0180 3878     		ldrb	r0, [r7]	@ zero_extendqisi2
 5386 0182 FFF7FEFF 		bl	USBD_OS_EP_LockDel
 5387              	.LVL545:
 5388              	.L358:
2606:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 5389              		.loc 1 2606 5 view .LVU1815
 5390 0186 5146     		mov	r1, r10
 5391 0188 3878     		ldrb	r0, [r7]	@ zero_extendqisi2
 5392 018a FFF7FEFF 		bl	USBD_OS_EP_SignalDel
 5393              	.LVL546:
 5394 018e 84E7     		b	.L357
 5395              	.L366:
 5396              		.align	2
 5397              	.L365:
 5398 0190 00000000 		.word	.LANCHOR1
 5399 0194 00000000 		.word	.LANCHOR4
 5400 0198 00000000 		.word	.LANCHOR5
 5401 019c 00000000 		.word	.LANCHOR2
ARM GAS  /tmp/ccuUvpuw.s 			page 206


 5402              		.cfi_endproc
 5403              	.LFE17:
 5405              		.section	.text.USBD_EP_MaxPktSizeGet,"ax",%progbits
 5406              		.align	1
 5407              		.global	USBD_EP_MaxPktSizeGet
 5408              		.syntax unified
 5409              		.thumb
 5410              		.thumb_func
 5411              		.fpu fpv4-sp-d16
 5413              	USBD_EP_MaxPktSizeGet:
 5414              	.LVL547:
 5415              	.LFB18:
2647:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_EP     *p_ep;
 5416              		.loc 1 2647 1 view -0
 5417              		.cfi_startproc
 5418              		@ args = 0, pretend = 0, frame = 0
 5419              		@ frame_needed = 0, uses_anonymous_args = 0
2647:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_EP     *p_ep;
 5420              		.loc 1 2647 1 is_stmt 0 view .LVU1817
 5421 0000 70B5     		push	{r4, r5, r6, lr}
 5422              	.LCFI74:
 5423              		.cfi_def_cfa_offset 16
 5424              		.cfi_offset 4, -16
 5425              		.cfi_offset 5, -12
 5426              		.cfi_offset 6, -8
 5427              		.cfi_offset 14, -4
 5428 0002 0546     		mov	r5, r0
 5429 0004 0C46     		mov	r4, r1
2648:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DRV    *p_drv;
 5430              		.loc 1 2648 5 is_stmt 1 view .LVU1818
2649:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_INT08U   ep_phy_nbr;
 5431              		.loc 1 2649 5 view .LVU1819
2650:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_INT16U   max_pkt_len;
 5432              		.loc 1 2650 5 view .LVU1820
2651:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 5433              		.loc 1 2651 5 view .LVU1821
2655:rtos/uC-USB-Device/Source/usbd_ep.c ****         CPU_SW_EXCEPTION(0);
 5434              		.loc 1 2655 5 view .LVU1822
2655:rtos/uC-USB-Device/Source/usbd_ep.c ****         CPU_SW_EXCEPTION(0);
 5435              		.loc 1 2655 8 is_stmt 0 view .LVU1823
 5436 0006 1646     		mov	r6, r2
 5437 0008 92B1     		cbz	r2, .L373
 5438              	.LVL548:
 5439              	.L368:
2656:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 5440              		.loc 1 2656 9 is_stmt 1 discriminator 1 view .LVU1824
2660:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_drv == (USBD_DRV *)0) {
 5441              		.loc 1 2660 5 discriminator 1 view .LVU1825
2660:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_drv == (USBD_DRV *)0) {
 5442              		.loc 1 2660 13 is_stmt 0 discriminator 1 view .LVU1826
 5443 000a 2846     		mov	r0, r5
 5444 000c FFF7FEFF 		bl	USBD_DrvRefGet
 5445              	.LVL549:
2661:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_DEV_INVALID_NBR;
 5446              		.loc 1 2661 5 is_stmt 1 discriminator 1 view .LVU1827
2661:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_DEV_INVALID_NBR;
 5447              		.loc 1 2661 8 is_stmt 0 discriminator 1 view .LVU1828
ARM GAS  /tmp/ccuUvpuw.s 			page 207


 5448 0010 88B1     		cbz	r0, .L374
2666:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 5449              		.loc 1 2666 5 is_stmt 1 view .LVU1829
2666:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 5450              		.loc 1 2666 18 is_stmt 0 view .LVU1830
 5451 0012 04F00F00 		and	r0, r4, #15
 5452              	.LVL550:
2666:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 5453              		.loc 1 2666 18 view .LVU1831
 5454 0016 E409     		lsrs	r4, r4, #7
2666:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 5455              		.loc 1 2666 16 view .LVU1832
 5456 0018 04EB4004 		add	r4, r4, r0, lsl #1
 5457              	.LVL551:
2668:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_ep == (USBD_EP *)0) {
 5458              		.loc 1 2668 5 is_stmt 1 view .LVU1833
2668:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_ep == (USBD_EP *)0) {
 5459              		.loc 1 2668 10 is_stmt 0 view .LVU1834
 5460 001c 04EB4510 		add	r0, r4, r5, lsl #5
 5461 0020 094B     		ldr	r3, .L376
 5462 0022 53F82030 		ldr	r3, [r3, r0, lsl #2]
 5463              	.LVL552:
2669:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_EP_INVALID_ADDR;
 5464              		.loc 1 2669 5 is_stmt 1 view .LVU1835
2669:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_EP_INVALID_ADDR;
 5465              		.loc 1 2669 8 is_stmt 0 view .LVU1836
 5466 0026 4BB1     		cbz	r3, .L375
2674:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 5467              		.loc 1 2674 5 is_stmt 1 view .LVU1837
2674:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 5468              		.loc 1 2674 23 is_stmt 0 view .LVU1838
 5469 0028 9888     		ldrh	r0, [r3, #4]
2674:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 5470              		.loc 1 2674 17 view .LVU1839
 5471 002a C0F30A00 		ubfx	r0, r0, #0, #11
 5472              	.LVL553:
2676:rtos/uC-USB-Device/Source/usbd_ep.c **** }
 5473              		.loc 1 2676 5 is_stmt 1 view .LVU1840
 5474              	.L370:
2677:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 5475              		.loc 1 2677 1 is_stmt 0 view .LVU1841
 5476 002e 70BD     		pop	{r4, r5, r6, pc}
 5477              	.LVL554:
 5478              	.L373:
2656:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 5479              		.loc 1 2656 9 is_stmt 1 view .LVU1842
2656:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 5480              		.loc 1 2656 9 view .LVU1843
 5481 0030 FFF7FEFF 		bl	CPU_SW_Exception
 5482              	.LVL555:
2656:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 5483              		.loc 1 2656 9 is_stmt 0 view .LVU1844
 5484 0034 E9E7     		b	.L368
 5485              	.LVL556:
 5486              	.L374:
2662:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (0u);
 5487              		.loc 1 2662 8 is_stmt 1 view .LVU1845
ARM GAS  /tmp/ccuUvpuw.s 			page 208


2662:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (0u);
 5488              		.loc 1 2662 15 is_stmt 0 view .LVU1846
 5489 0036 6523     		movs	r3, #101
 5490 0038 3380     		strh	r3, [r6]	@ movhi
2663:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 5491              		.loc 1 2663 9 is_stmt 1 view .LVU1847
2663:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 5492              		.loc 1 2663 16 is_stmt 0 view .LVU1848
 5493 003a F8E7     		b	.L370
 5494              	.LVL557:
 5495              	.L375:
2670:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (0u);
 5496              		.loc 1 2670 8 is_stmt 1 view .LVU1849
2670:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (0u);
 5497              		.loc 1 2670 15 is_stmt 0 view .LVU1850
 5498 003c 40F29113 		movw	r3, #401
 5499              	.LVL558:
2670:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (0u);
 5500              		.loc 1 2670 15 view .LVU1851
 5501 0040 3380     		strh	r3, [r6]	@ movhi
2671:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 5502              		.loc 1 2671 9 is_stmt 1 view .LVU1852
2671:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 5503              		.loc 1 2671 16 is_stmt 0 view .LVU1853
 5504 0042 0020     		movs	r0, #0
 5505              	.LVL559:
2671:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 5506              		.loc 1 2671 16 view .LVU1854
 5507 0044 F3E7     		b	.L370
 5508              	.L377:
 5509 0046 00BF     		.align	2
 5510              	.L376:
 5511 0048 00000000 		.word	.LANCHOR1
 5512              		.cfi_endproc
 5513              	.LFE18:
 5515              		.section	.text.USBD_EP_MaxNbrOpenGet,"ax",%progbits
 5516              		.align	1
 5517              		.global	USBD_EP_MaxNbrOpenGet
 5518              		.syntax unified
 5519              		.thumb
 5520              		.thumb_func
 5521              		.fpu fpv4-sp-d16
 5523              	USBD_EP_MaxNbrOpenGet:
 5524              	.LVL560:
 5525              	.LFB19:
2696:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DRV    *p_drv;
 5526              		.loc 1 2696 1 is_stmt 1 view -0
 5527              		.cfi_startproc
 5528              		@ args = 0, pretend = 0, frame = 0
 5529              		@ frame_needed = 0, uses_anonymous_args = 0
2696:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DRV    *p_drv;
 5530              		.loc 1 2696 1 is_stmt 0 view .LVU1856
 5531 0000 10B5     		push	{r4, lr}
 5532              	.LCFI75:
 5533              		.cfi_def_cfa_offset 8
 5534              		.cfi_offset 4, -8
 5535              		.cfi_offset 14, -4
ARM GAS  /tmp/ccuUvpuw.s 			page 209


 5536 0002 0446     		mov	r4, r0
2697:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_INT08U   nbr_open;
 5537              		.loc 1 2697 5 is_stmt 1 view .LVU1857
2698:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 5538              		.loc 1 2698 5 view .LVU1858
2701:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_drv == (USBD_DRV *)0) {
 5539              		.loc 1 2701 5 view .LVU1859
2701:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_drv == (USBD_DRV *)0) {
 5540              		.loc 1 2701 13 is_stmt 0 view .LVU1860
 5541 0004 FFF7FEFF 		bl	USBD_DrvRefGet
 5542              	.LVL561:
2702:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (0u);
 5543              		.loc 1 2702 5 is_stmt 1 view .LVU1861
2702:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (0u);
 5544              		.loc 1 2702 8 is_stmt 0 view .LVU1862
 5545 0008 10B1     		cbz	r0, .L380
2706:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 5546              		.loc 1 2706 5 is_stmt 1 view .LVU1863
2706:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 5547              		.loc 1 2706 14 is_stmt 0 view .LVU1864
 5548 000a 024B     		ldr	r3, .L382
 5549 000c 185D     		ldrb	r0, [r3, r4]	@ zero_extendqisi2
 5550              	.LVL562:
2708:rtos/uC-USB-Device/Source/usbd_ep.c **** }
 5551              		.loc 1 2708 5 is_stmt 1 view .LVU1865
 5552              	.L379:
2709:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 5553              		.loc 1 2709 1 is_stmt 0 view .LVU1866
 5554 000e 10BD     		pop	{r4, pc}
 5555              	.LVL563:
 5556              	.L380:
2703:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 5557              		.loc 1 2703 16 view .LVU1867
 5558 0010 0020     		movs	r0, #0
 5559              	.LVL564:
2703:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 5560              		.loc 1 2703 16 view .LVU1868
 5561 0012 FCE7     		b	.L379
 5562              	.L383:
 5563              		.align	2
 5564              	.L382:
 5565 0014 00000000 		.word	.LANCHOR4
 5566              		.cfi_endproc
 5567              	.LFE19:
 5569              		.section	.text.USBD_EP_Abort,"ax",%progbits
 5570              		.align	1
 5571              		.global	USBD_EP_Abort
 5572              		.syntax unified
 5573              		.thumb
 5574              		.thumb_func
 5575              		.fpu fpv4-sp-d16
 5577              	USBD_EP_Abort:
 5578              	.LVL565:
 5579              	.LFB20:
2744:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_EP     *p_ep;
 5580              		.loc 1 2744 1 is_stmt 1 view -0
 5581              		.cfi_startproc
ARM GAS  /tmp/ccuUvpuw.s 			page 210


 5582              		@ args = 0, pretend = 0, frame = 0
 5583              		@ frame_needed = 0, uses_anonymous_args = 0
2744:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_EP     *p_ep;
 5584              		.loc 1 2744 1 is_stmt 0 view .LVU1870
 5585 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 5586              	.LCFI76:
 5587              		.cfi_def_cfa_offset 24
 5588              		.cfi_offset 3, -24
 5589              		.cfi_offset 4, -20
 5590              		.cfi_offset 5, -16
 5591              		.cfi_offset 6, -12
 5592              		.cfi_offset 7, -8
 5593              		.cfi_offset 14, -4
 5594 0002 0546     		mov	r5, r0
 5595 0004 0C46     		mov	r4, r1
2745:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DRV    *p_drv;
 5596              		.loc 1 2745 5 is_stmt 1 view .LVU1871
2746:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_INT08U   ep_phy_nbr;
 5597              		.loc 1 2746 5 view .LVU1872
2747:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_URB    *p_urb_head_aborted;
 5598              		.loc 1 2747 5 view .LVU1873
2748:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 5599              		.loc 1 2748 5 view .LVU1874
2752:rtos/uC-USB-Device/Source/usbd_ep.c ****         CPU_SW_EXCEPTION(;);
 5600              		.loc 1 2752 5 view .LVU1875
2752:rtos/uC-USB-Device/Source/usbd_ep.c ****         CPU_SW_EXCEPTION(;);
 5601              		.loc 1 2752 8 is_stmt 0 view .LVU1876
 5602 0006 1646     		mov	r6, r2
 5603 0008 6AB3     		cbz	r2, .L391
 5604              	.LVL566:
 5605              	.L385:
2753:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 5606              		.loc 1 2753 9 is_stmt 1 discriminator 1 view .LVU1877
2757:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_drv == (USBD_DRV *)0) {
 5607              		.loc 1 2757 5 discriminator 1 view .LVU1878
2757:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_drv == (USBD_DRV *)0) {
 5608              		.loc 1 2757 13 is_stmt 0 discriminator 1 view .LVU1879
 5609 000a 2846     		mov	r0, r5
 5610 000c FFF7FEFF 		bl	USBD_DrvRefGet
 5611              	.LVL567:
2758:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_DEV_INVALID_NBR;
 5612              		.loc 1 2758 5 is_stmt 1 discriminator 1 view .LVU1880
2758:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_DEV_INVALID_NBR;
 5613              		.loc 1 2758 8 is_stmt 0 discriminator 1 view .LVU1881
 5614 0010 0746     		mov	r7, r0
 5615 0012 58B3     		cbz	r0, .L392
2763:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_ep       = USBD_EP_TblPtrs[dev_nbr][ep_phy_nbr];
 5616              		.loc 1 2763 5 is_stmt 1 view .LVU1882
2763:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_ep       = USBD_EP_TblPtrs[dev_nbr][ep_phy_nbr];
 5617              		.loc 1 2763 18 is_stmt 0 view .LVU1883
 5618 0014 04F00F01 		and	r1, r4, #15
 5619 0018 E409     		lsrs	r4, r4, #7
2763:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_ep       = USBD_EP_TblPtrs[dev_nbr][ep_phy_nbr];
 5620              		.loc 1 2763 16 view .LVU1884
 5621 001a 04EB4104 		add	r4, r4, r1, lsl #1
 5622              	.LVL568:
2764:rtos/uC-USB-Device/Source/usbd_ep.c **** 
ARM GAS  /tmp/ccuUvpuw.s 			page 211


 5623              		.loc 1 2764 5 is_stmt 1 view .LVU1885
2764:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 5624              		.loc 1 2764 16 is_stmt 0 view .LVU1886
 5625 001e 04EB4514 		add	r4, r4, r5, lsl #5
 5626              	.LVL569:
2764:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 5627              		.loc 1 2764 16 view .LVU1887
 5628 0022 1A4B     		ldr	r3, .L395
 5629 0024 53F82440 		ldr	r4, [r3, r4, lsl #2]
 5630              	.LVL570:
2766:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_EP_INVALID_ADDR;
 5631              		.loc 1 2766 5 is_stmt 1 view .LVU1888
2766:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_EP_INVALID_ADDR;
 5632              		.loc 1 2766 8 is_stmt 0 view .LVU1889
 5633 0028 1CB3     		cbz	r4, .L393
2771:rtos/uC-USB-Device/Source/usbd_ep.c ****                            p_ep->Ix,
 5634              		.loc 1 2771 5 is_stmt 1 view .LVU1890
 5635 002a 3346     		mov	r3, r6
 5636 002c 0022     		movs	r2, #0
 5637 002e 217A     		ldrb	r1, [r4, #8]	@ zero_extendqisi2
2771:rtos/uC-USB-Device/Source/usbd_ep.c ****                            p_ep->Ix,
 5638              		.loc 1 2771 5 is_stmt 0 view .LVU1891
 5639 0030 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 5640              	.LVL571:
2771:rtos/uC-USB-Device/Source/usbd_ep.c ****                            p_ep->Ix,
 5641              		.loc 1 2771 5 view .LVU1892
 5642 0032 FFF7FEFF 		bl	USBD_OS_EP_LockAcquire
 5643              	.LVL572:
2775:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 5644              		.loc 1 2775 5 is_stmt 1 view .LVU1893
2775:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 5645              		.loc 1 2775 9 is_stmt 0 view .LVU1894
 5646 0036 3388     		ldrh	r3, [r6]
2775:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 5647              		.loc 1 2775 8 view .LVU1895
 5648 0038 F3B9     		cbnz	r3, .L384
2779:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 5649              		.loc 1 2779 62 is_stmt 1 view .LVU1896
2781:rtos/uC-USB-Device/Source/usbd_ep.c ****         (p_ep->State != USBD_EP_STATE_STALL)) {
 5650              		.loc 1 2781 5 view .LVU1897
2781:rtos/uC-USB-Device/Source/usbd_ep.c ****         (p_ep->State != USBD_EP_STATE_STALL)) {
 5651              		.loc 1 2781 14 is_stmt 0 view .LVU1898
 5652 003a 2378     		ldrb	r3, [r4]	@ zero_extendqisi2
2781:rtos/uC-USB-Device/Source/usbd_ep.c ****         (p_ep->State != USBD_EP_STATE_STALL)) {
 5653              		.loc 1 2781 45 view .LVU1899
 5654 003c 013B     		subs	r3, r3, #1
 5655 003e DBB2     		uxtb	r3, r3
2781:rtos/uC-USB-Device/Source/usbd_ep.c ****         (p_ep->State != USBD_EP_STATE_STALL)) {
 5656              		.loc 1 2781 8 view .LVU1900
 5657 0040 012B     		cmp	r3, #1
 5658 0042 1AD8     		bhi	.L394
2789:rtos/uC-USB-Device/Source/usbd_ep.c ****                                            p_ep,
 5659              		.loc 1 2789 5 is_stmt 1 view .LVU1901
2789:rtos/uC-USB-Device/Source/usbd_ep.c ****                                            p_ep,
 5660              		.loc 1 2789 26 is_stmt 0 view .LVU1902
 5661 0044 3246     		mov	r2, r6
 5662 0046 2146     		mov	r1, r4
ARM GAS  /tmp/ccuUvpuw.s 			page 212


 5663 0048 3846     		mov	r0, r7
 5664 004a FFF7FEFF 		bl	USBD_EP_URB_Abort
 5665              	.LVL573:
 5666 004e 0646     		mov	r6, r0
 5667              	.LVL574:
2793:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 5668              		.loc 1 2793 100 is_stmt 1 view .LVU1903
2795:rtos/uC-USB-Device/Source/usbd_ep.c ****                            p_ep->Ix);
 5669              		.loc 1 2795 5 view .LVU1904
 5670 0050 217A     		ldrb	r1, [r4, #8]	@ zero_extendqisi2
 5671 0052 3878     		ldrb	r0, [r7]	@ zero_extendqisi2
 5672              	.LVL575:
2795:rtos/uC-USB-Device/Source/usbd_ep.c ****                            p_ep->Ix);
 5673              		.loc 1 2795 5 is_stmt 0 view .LVU1905
 5674 0054 FFF7FEFF 		bl	USBD_OS_EP_LockRelease
 5675              	.LVL576:
2798:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_URB_AsyncEnd(dev_nbr, p_ep, p_urb_head_aborted);   /* Execute callback and free aborte
 5676              		.loc 1 2798 5 is_stmt 1 view .LVU1906
2798:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_URB_AsyncEnd(dev_nbr, p_ep, p_urb_head_aborted);   /* Execute callback and free aborte
 5677              		.loc 1 2798 8 is_stmt 0 view .LVU1907
 5678 0058 76B1     		cbz	r6, .L384
2799:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 5679              		.loc 1 2799 9 is_stmt 1 view .LVU1908
 5680 005a 3246     		mov	r2, r6
 5681 005c 2146     		mov	r1, r4
 5682 005e 2846     		mov	r0, r5
 5683 0060 FFF7FEFF 		bl	USBD_URB_AsyncEnd
 5684              	.LVL577:
 5685 0064 08E0     		b	.L384
 5686              	.LVL578:
 5687              	.L391:
2753:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 5688              		.loc 1 2753 9 view .LVU1909
2753:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 5689              		.loc 1 2753 9 view .LVU1910
 5690 0066 FFF7FEFF 		bl	CPU_SW_Exception
 5691              	.LVL579:
2753:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 5692              		.loc 1 2753 9 is_stmt 0 view .LVU1911
 5693 006a CEE7     		b	.L385
 5694              	.LVL580:
 5695              	.L392:
2759:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 5696              		.loc 1 2759 8 is_stmt 1 view .LVU1912
2759:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 5697              		.loc 1 2759 15 is_stmt 0 view .LVU1913
 5698 006c 6523     		movs	r3, #101
 5699 006e 3380     		strh	r3, [r6]	@ movhi
2760:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 5700              		.loc 1 2760 9 is_stmt 1 view .LVU1914
 5701 0070 02E0     		b	.L384
 5702              	.LVL581:
 5703              	.L393:
2767:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 5704              		.loc 1 2767 8 view .LVU1915
2767:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 5705              		.loc 1 2767 15 is_stmt 0 view .LVU1916
ARM GAS  /tmp/ccuUvpuw.s 			page 213


 5706 0072 40F29113 		movw	r3, #401
 5707 0076 3380     		strh	r3, [r6]	@ movhi
2768:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 5708              		.loc 1 2768 9 is_stmt 1 view .LVU1917
 5709              	.LVL582:
 5710              	.L384:
2801:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 5711              		.loc 1 2801 1 is_stmt 0 view .LVU1918
 5712 0078 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 5713              	.LVL583:
 5714              	.L394:
2783:rtos/uC-USB-Device/Source/usbd_ep.c ****                                p_ep->Ix);
 5715              		.loc 1 2783 9 is_stmt 1 view .LVU1919
 5716 007a 217A     		ldrb	r1, [r4, #8]	@ zero_extendqisi2
 5717 007c 3878     		ldrb	r0, [r7]	@ zero_extendqisi2
 5718 007e FFF7FEFF 		bl	USBD_OS_EP_LockRelease
 5719              	.LVL584:
2785:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 5720              		.loc 1 2785 8 view .LVU1920
2785:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 5721              		.loc 1 2785 15 is_stmt 0 view .LVU1921
 5722 0082 4FF4C973 		mov	r3, #402
 5723 0086 3380     		strh	r3, [r6]	@ movhi
2786:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 5724              		.loc 1 2786 9 is_stmt 1 view .LVU1922
 5725 0088 F6E7     		b	.L384
 5726              	.L396:
 5727 008a 00BF     		.align	2
 5728              	.L395:
 5729 008c 00000000 		.word	.LANCHOR1
 5730              		.cfi_endproc
 5731              	.LFE20:
 5733              		.section	.text.USBD_EP_Close,"ax",%progbits
 5734              		.align	1
 5735              		.global	USBD_EP_Close
 5736              		.syntax unified
 5737              		.thumb
 5738              		.thumb_func
 5739              		.fpu fpv4-sp-d16
 5741              	USBD_EP_Close:
 5742              	.LVL585:
 5743              	.LFB21:
2835:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_EP     *p_ep;
 5744              		.loc 1 2835 1 view -0
 5745              		.cfi_startproc
 5746              		@ args = 0, pretend = 0, frame = 0
 5747              		@ frame_needed = 0, uses_anonymous_args = 0
2835:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_EP     *p_ep;
 5748              		.loc 1 2835 1 is_stmt 0 view .LVU1924
 5749 0000 2DE9F84F 		push	{r3, r4, r5, r6, r7, r8, r9, r10, fp, lr}
 5750              	.LCFI77:
 5751              		.cfi_def_cfa_offset 40
 5752              		.cfi_offset 3, -40
 5753              		.cfi_offset 4, -36
 5754              		.cfi_offset 5, -32
 5755              		.cfi_offset 6, -28
 5756              		.cfi_offset 7, -24
ARM GAS  /tmp/ccuUvpuw.s 			page 214


 5757              		.cfi_offset 8, -20
 5758              		.cfi_offset 9, -16
 5759              		.cfi_offset 10, -12
 5760              		.cfi_offset 11, -8
 5761              		.cfi_offset 14, -4
 5762 0004 1446     		mov	r4, r2
2836:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_INT08U   dev_nbr;
 5763              		.loc 1 2836 5 is_stmt 1 view .LVU1925
2837:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_INT08U   ep_bit;
 5764              		.loc 1 2837 5 view .LVU1926
2838:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_INT08U   ep_phy_nbr;
 5765              		.loc 1 2838 5 view .LVU1927
2839:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_URB    *p_urb_head_aborted;
 5766              		.loc 1 2839 5 view .LVU1928
2840:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_SR_ALLOC();
 5767              		.loc 1 2840 5 view .LVU1929
2841:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 5768              		.loc 1 2841 5 view .LVU1930
 5769              	.LVL586:
2845:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_NULL_PTR;
 5770              		.loc 1 2845 5 view .LVU1931
2845:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_NULL_PTR;
 5771              		.loc 1 2845 8 is_stmt 0 view .LVU1932
 5772 0006 0028     		cmp	r0, #0
 5773 0008 63D0     		beq	.L403
 5774 000a 0D46     		mov	r5, r1
 5775 000c 8146     		mov	r9, r0
2851:rtos/uC-USB-Device/Source/usbd_ep.c ****     ep_phy_nbr = USBD_EP_ADDR_TO_PHY(ep_addr);
 5776              		.loc 1 2851 5 is_stmt 1 view .LVU1933
2851:rtos/uC-USB-Device/Source/usbd_ep.c ****     ep_phy_nbr = USBD_EP_ADDR_TO_PHY(ep_addr);
 5777              		.loc 1 2851 16 is_stmt 0 view .LVU1934
 5778 000e 90F80080 		ldrb	r8, [r0]	@ zero_extendqisi2
 5779              	.LVL587:
2852:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_ep       = USBD_EP_TblPtrs[dev_nbr][ep_phy_nbr];
 5780              		.loc 1 2852 5 is_stmt 1 view .LVU1935
2852:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_ep       = USBD_EP_TblPtrs[dev_nbr][ep_phy_nbr];
 5781              		.loc 1 2852 18 is_stmt 0 view .LVU1936
 5782 0012 01F00F07 		and	r7, r1, #15
 5783 0016 CB09     		lsrs	r3, r1, #7
2852:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_ep       = USBD_EP_TblPtrs[dev_nbr][ep_phy_nbr];
 5784              		.loc 1 2852 16 view .LVU1937
 5785 0018 03EB4707 		add	r7, r3, r7, lsl #1
 5786              	.LVL588:
2853:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 5787              		.loc 1 2853 5 is_stmt 1 view .LVU1938
2853:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 5788              		.loc 1 2853 16 is_stmt 0 view .LVU1939
 5789 001c 07EB4812 		add	r2, r7, r8, lsl #5
 5790              	.LVL589:
2853:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 5791              		.loc 1 2853 16 view .LVU1940
 5792 0020 344B     		ldr	r3, .L406
 5793 0022 53F82260 		ldr	r6, [r3, r2, lsl #2]
 5794              	.LVL590:
2855:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err =  USBD_ERR_EP_INVALID_ADDR;
 5795              		.loc 1 2855 5 is_stmt 1 view .LVU1941
2855:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err =  USBD_ERR_EP_INVALID_ADDR;
ARM GAS  /tmp/ccuUvpuw.s 			page 215


 5796              		.loc 1 2855 8 is_stmt 0 view .LVU1942
 5797 0026 002E     		cmp	r6, #0
 5798 0028 56D0     		beq	.L404
2860:rtos/uC-USB-Device/Source/usbd_ep.c ****                            p_ep->Ix,
 5799              		.loc 1 2860 5 is_stmt 1 view .LVU1943
 5800 002a 2346     		mov	r3, r4
 5801 002c 0022     		movs	r2, #0
 5802 002e 317A     		ldrb	r1, [r6, #8]	@ zero_extendqisi2
 5803              	.LVL591:
2860:rtos/uC-USB-Device/Source/usbd_ep.c ****                            p_ep->Ix,
 5804              		.loc 1 2860 5 is_stmt 0 view .LVU1944
 5805 0030 4046     		mov	r0, r8
 5806              	.LVL592:
2860:rtos/uC-USB-Device/Source/usbd_ep.c ****                            p_ep->Ix,
 5807              		.loc 1 2860 5 view .LVU1945
 5808 0032 FFF7FEFF 		bl	USBD_OS_EP_LockAcquire
 5809              	.LVL593:
2864:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 5810              		.loc 1 2864 5 is_stmt 1 view .LVU1946
2864:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 5811              		.loc 1 2864 9 is_stmt 0 view .LVU1947
 5812 0036 2388     		ldrh	r3, [r4]
2864:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 5813              		.loc 1 2864 8 view .LVU1948
 5814 0038 002B     		cmp	r3, #0
 5815 003a 50D1     		bne	.L397
2868:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_OS_EP_LockRelease(p_drv->DevNbr,
 5816              		.loc 1 2868 5 is_stmt 1 view .LVU1949
2868:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_OS_EP_LockRelease(p_drv->DevNbr,
 5817              		.loc 1 2868 13 is_stmt 0 view .LVU1950
 5818 003c 3378     		ldrb	r3, [r6]	@ zero_extendqisi2
2868:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_OS_EP_LockRelease(p_drv->DevNbr,
 5819              		.loc 1 2868 8 view .LVU1951
 5820 003e 002B     		cmp	r3, #0
 5821 0040 4FD0     		beq	.L405
2875:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 5822              		.loc 1 2875 62 is_stmt 1 view .LVU1952
2877:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 5823              		.loc 1 2877 5 view .LVU1953
2877:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 5824              		.loc 1 2877 41 is_stmt 0 view .LVU1954
 5825 0042 96F808A0 		ldrb	r10, [r6, #8]	@ zero_extendqisi2
2877:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 5826              		.loc 1 2877 12 view .LVU1955
 5827 0046 CAF11F0A 		rsb	r10, r10, #31
 5828 004a 5FFA8AFA 		uxtb	r10, r10
 5829              	.LVL594:
2879:rtos/uC-USB-Device/Source/usbd_ep.c ****                                            p_ep,
 5830              		.loc 1 2879 5 is_stmt 1 view .LVU1956
2879:rtos/uC-USB-Device/Source/usbd_ep.c ****                                            p_ep,
 5831              		.loc 1 2879 26 is_stmt 0 view .LVU1957
 5832 004e 2246     		mov	r2, r4
 5833 0050 3146     		mov	r1, r6
 5834 0052 4846     		mov	r0, r9
 5835 0054 FFF7FEFF 		bl	USBD_EP_URB_Abort
 5836              	.LVL595:
 5837 0058 0446     		mov	r4, r0
ARM GAS  /tmp/ccuUvpuw.s 			page 216


 5838              	.LVL596:
2883:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 5839              		.loc 1 2883 5 is_stmt 1 view .LVU1958
2883:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 5840              		.loc 1 2883 17 is_stmt 0 view .LVU1959
 5841 005a 4FF0000B 		mov	fp, #0
 5842 005e 86F800B0 		strb	fp, [r6]
2885:rtos/uC-USB-Device/Source/usbd_ep.c ****     DEF_BIT_SET(USBD_EP_OpenBitMap[dev_nbr], DEF_BIT32(ep_bit));
 5843              		.loc 1 2885 5 is_stmt 1 view .LVU1960
2885:rtos/uC-USB-Device/Source/usbd_ep.c ****     DEF_BIT_SET(USBD_EP_OpenBitMap[dev_nbr], DEF_BIT32(ep_bit));
 5844              		.loc 1 2885 5 view .LVU1961
2885:rtos/uC-USB-Device/Source/usbd_ep.c ****     DEF_BIT_SET(USBD_EP_OpenBitMap[dev_nbr], DEF_BIT32(ep_bit));
 5845              		.loc 1 2885 5 view .LVU1962
 5846 0062 4020     		movs	r0, #64
 5847              	.LVL597:
2885:rtos/uC-USB-Device/Source/usbd_ep.c ****     DEF_BIT_SET(USBD_EP_OpenBitMap[dev_nbr], DEF_BIT32(ep_bit));
 5848              		.loc 1 2885 5 is_stmt 0 view .LVU1963
 5849 0064 FFF7FEFF 		bl	CPU_SR_Save
 5850              	.LVL598:
2885:rtos/uC-USB-Device/Source/usbd_ep.c ****     DEF_BIT_SET(USBD_EP_OpenBitMap[dev_nbr], DEF_BIT32(ep_bit));
 5851              		.loc 1 2885 5 is_stmt 1 view .LVU1964
2885:rtos/uC-USB-Device/Source/usbd_ep.c ****     DEF_BIT_SET(USBD_EP_OpenBitMap[dev_nbr], DEF_BIT32(ep_bit));
 5852              		.loc 1 2885 5 view .LVU1965
2886:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_EP_OpenCtr[dev_nbr]--;
 5853              		.loc 1 2886 5 view .LVU1966
 5854 0068 2349     		ldr	r1, .L406+4
 5855 006a 51F82830 		ldr	r3, [r1, r8, lsl #2]
 5856 006e 0122     		movs	r2, #1
 5857 0070 02FA0AFA 		lsl	r10, r2, r10
 5858              	.LVL599:
2886:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_EP_OpenCtr[dev_nbr]--;
 5859              		.loc 1 2886 5 is_stmt 0 view .LVU1967
 5860 0074 43EA0A03 		orr	r3, r3, r10
 5861 0078 41F82830 		str	r3, [r1, r8, lsl #2]
2887:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_CRITICAL_EXIT();
 5862              		.loc 1 2887 5 is_stmt 1 view .LVU1968
2887:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_CRITICAL_EXIT();
 5863              		.loc 1 2887 20 is_stmt 0 view .LVU1969
 5864 007c 1F4A     		ldr	r2, .L406+8
 5865 007e 12F80830 		ldrb	r3, [r2, r8]	@ zero_extendqisi2
2887:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_CRITICAL_EXIT();
 5866              		.loc 1 2887 29 view .LVU1970
 5867 0082 013B     		subs	r3, r3, #1
 5868 0084 02F80830 		strb	r3, [r2, r8]
2888:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 5869              		.loc 1 2888 5 is_stmt 1 view .LVU1971
2888:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 5870              		.loc 1 2888 5 view .LVU1972
2888:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 5871              		.loc 1 2888 5 view .LVU1973
 5872 0088 FFF7FEFF 		bl	CPU_SR_Restore
 5873              	.LVL600:
2888:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 5874              		.loc 1 2888 5 view .LVU1974
2888:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 5875              		.loc 1 2888 5 view .LVU1975
2890:rtos/uC-USB-Device/Source/usbd_ep.c **** 
ARM GAS  /tmp/ccuUvpuw.s 			page 217


 5876              		.loc 1 2890 5 view .LVU1976
2890:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 5877              		.loc 1 2890 10 is_stmt 0 view .LVU1977
 5878 008c D9F80430 		ldr	r3, [r9, #4]
2890:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 5879              		.loc 1 2890 19 view .LVU1978
 5880 0090 5B6A     		ldr	r3, [r3, #36]
2890:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 5881              		.loc 1 2890 5 view .LVU1979
 5882 0092 2946     		mov	r1, r5
 5883 0094 4846     		mov	r0, r9
 5884 0096 9847     		blx	r3
 5885              	.LVL601:
2892:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_EP_TblPtrs[dev_nbr][ep_phy_nbr] = (USBD_EP *)0;
 5886              		.loc 1 2892 5 is_stmt 1 view .LVU1980
2892:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_EP_TblPtrs[dev_nbr][ep_phy_nbr] = (USBD_EP *)0;
 5887              		.loc 1 2892 21 is_stmt 0 view .LVU1981
 5888 0098 86F801B0 		strb	fp, [r6, #1]
2893:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 5889              		.loc 1 2893 5 is_stmt 1 view .LVU1982
2893:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 5890              		.loc 1 2893 42 is_stmt 0 view .LVU1983
 5891 009c 07EB4817 		add	r7, r7, r8, lsl #5
 5892              	.LVL602:
2893:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 5893              		.loc 1 2893 42 view .LVU1984
 5894 00a0 144B     		ldr	r3, .L406
 5895 00a2 43F827B0 		str	fp, [r3, r7, lsl #2]
2895:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 5896              		.loc 1 2895 100 is_stmt 1 view .LVU1985
2897:rtos/uC-USB-Device/Source/usbd_ep.c ****                            p_ep->Ix);
 5897              		.loc 1 2897 5 view .LVU1986
 5898 00a6 317A     		ldrb	r1, [r6, #8]	@ zero_extendqisi2
 5899 00a8 99F80000 		ldrb	r0, [r9]	@ zero_extendqisi2
 5900 00ac FFF7FEFF 		bl	USBD_OS_EP_LockRelease
 5901              	.LVL603:
2900:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_OS_EP_LockDel  (p_drv->DevNbr, p_ep->Ix);
 5902              		.loc 1 2900 5 view .LVU1987
 5903 00b0 317A     		ldrb	r1, [r6, #8]	@ zero_extendqisi2
 5904 00b2 99F80000 		ldrb	r0, [r9]	@ zero_extendqisi2
 5905 00b6 FFF7FEFF 		bl	USBD_OS_EP_SignalDel
 5906              	.LVL604:
2901:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 5907              		.loc 1 2901 5 view .LVU1988
 5908 00ba 317A     		ldrb	r1, [r6, #8]	@ zero_extendqisi2
 5909 00bc 99F80000 		ldrb	r0, [r9]	@ zero_extendqisi2
 5910 00c0 FFF7FEFF 		bl	USBD_OS_EP_LockDel
 5911              	.LVL605:
2903:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_URB_AsyncEnd(dev_nbr, p_ep, p_urb_head_aborted);   /* Execute callback and free aborte
 5912              		.loc 1 2903 5 view .LVU1989
2903:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_URB_AsyncEnd(dev_nbr, p_ep, p_urb_head_aborted);   /* Execute callback and free aborte
 5913              		.loc 1 2903 8 is_stmt 0 view .LVU1990
 5914 00c4 5CB1     		cbz	r4, .L397
2904:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 5915              		.loc 1 2904 9 is_stmt 1 view .LVU1991
 5916 00c6 2246     		mov	r2, r4
 5917 00c8 3146     		mov	r1, r6
ARM GAS  /tmp/ccuUvpuw.s 			page 218


 5918 00ca 4046     		mov	r0, r8
 5919 00cc FFF7FEFF 		bl	USBD_URB_AsyncEnd
 5920              	.LVL606:
 5921 00d0 05E0     		b	.L397
 5922              	.LVL607:
 5923              	.L403:
2846:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 5924              		.loc 1 2846 8 view .LVU1992
2846:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 5925              		.loc 1 2846 15 is_stmt 0 view .LVU1993
 5926 00d2 0523     		movs	r3, #5
 5927 00d4 1380     		strh	r3, [r2]	@ movhi
2847:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 5928              		.loc 1 2847 9 is_stmt 1 view .LVU1994
 5929 00d6 02E0     		b	.L397
 5930              	.LVL608:
 5931              	.L404:
2856:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 5932              		.loc 1 2856 8 view .LVU1995
2856:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 5933              		.loc 1 2856 15 is_stmt 0 view .LVU1996
 5934 00d8 40F29113 		movw	r3, #401
 5935 00dc 2380     		strh	r3, [r4]	@ movhi
2857:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 5936              		.loc 1 2857 9 is_stmt 1 view .LVU1997
 5937              	.LVL609:
 5938              	.L397:
2906:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 5939              		.loc 1 2906 1 is_stmt 0 view .LVU1998
 5940 00de BDE8F88F 		pop	{r3, r4, r5, r6, r7, r8, r9, r10, fp, pc}
 5941              	.LVL610:
 5942              	.L405:
2869:rtos/uC-USB-Device/Source/usbd_ep.c ****                                p_ep->Ix);
 5943              		.loc 1 2869 9 is_stmt 1 view .LVU1999
 5944 00e2 317A     		ldrb	r1, [r6, #8]	@ zero_extendqisi2
 5945 00e4 99F80000 		ldrb	r0, [r9]	@ zero_extendqisi2
 5946 00e8 FFF7FEFF 		bl	USBD_OS_EP_LockRelease
 5947              	.LVL611:
2871:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 5948              		.loc 1 2871 8 view .LVU2000
2871:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 5949              		.loc 1 2871 15 is_stmt 0 view .LVU2001
 5950 00ec 0023     		movs	r3, #0
 5951 00ee 2380     		strh	r3, [r4]	@ movhi
2872:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 5952              		.loc 1 2872 9 is_stmt 1 view .LVU2002
 5953 00f0 F5E7     		b	.L397
 5954              	.L407:
 5955 00f2 00BF     		.align	2
 5956              	.L406:
 5957 00f4 00000000 		.word	.LANCHOR1
 5958 00f8 00000000 		.word	.LANCHOR5
 5959 00fc 00000000 		.word	.LANCHOR4
 5960              		.cfi_endproc
 5961              	.LFE21:
 5963              		.section	.text.USBD_CtrlOpen,"ax",%progbits
 5964              		.align	1
ARM GAS  /tmp/ccuUvpuw.s 			page 219


 5965              		.global	USBD_CtrlOpen
 5966              		.syntax unified
 5967              		.thumb
 5968              		.thumb_func
 5969              		.fpu fpv4-sp-d16
 5971              	USBD_CtrlOpen:
 5972              	.LVL612:
 5973              	.LFB12:
2034:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DRV  *p_drv;
 5974              		.loc 1 2034 1 view -0
 5975              		.cfi_startproc
 5976              		@ args = 0, pretend = 0, frame = 8
 5977              		@ frame_needed = 0, uses_anonymous_args = 0
2034:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DRV  *p_drv;
 5978              		.loc 1 2034 1 is_stmt 0 view .LVU2004
 5979 0000 70B5     		push	{r4, r5, r6, lr}
 5980              	.LCFI78:
 5981              		.cfi_def_cfa_offset 16
 5982              		.cfi_offset 4, -16
 5983              		.cfi_offset 5, -12
 5984              		.cfi_offset 6, -8
 5985              		.cfi_offset 14, -4
 5986 0002 84B0     		sub	sp, sp, #16
 5987              	.LCFI79:
 5988              		.cfi_def_cfa_offset 32
 5989 0004 0D46     		mov	r5, r1
 5990 0006 1446     		mov	r4, r2
2035:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_ERR   local_err;
 5991              		.loc 1 2035 5 is_stmt 1 view .LVU2005
2036:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 5992              		.loc 1 2036 5 view .LVU2006
2039:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_drv == (USBD_DRV *)0) {
 5993              		.loc 1 2039 5 view .LVU2007
2039:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_drv == (USBD_DRV *)0) {
 5994              		.loc 1 2039 13 is_stmt 0 view .LVU2008
 5995 0008 FFF7FEFF 		bl	USBD_DrvRefGet
 5996              	.LVL613:
2040:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_DEV_INVALID_NBR;
 5997              		.loc 1 2040 5 is_stmt 1 view .LVU2009
2040:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_DEV_INVALID_NBR;
 5998              		.loc 1 2040 8 is_stmt 0 view .LVU2010
 5999 000c 58B1     		cbz	r0, .L414
 6000 000e 0646     		mov	r6, r0
2045:rtos/uC-USB-Device/Source/usbd_ep.c ****                  USBD_EP_ADDR_CTRL_IN,
 6001              		.loc 1 2045 5 is_stmt 1 view .LVU2011
 6002 0010 0194     		str	r4, [sp, #4]
 6003 0012 0023     		movs	r3, #0
 6004 0014 0093     		str	r3, [sp]
 6005 0016 2A46     		mov	r2, r5
 6006 0018 8021     		movs	r1, #128
 6007 001a FFF7FEFF 		bl	USBD_EP_Open
 6008              	.LVL614:
2051:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 6009              		.loc 1 2051 5 view .LVU2012
2051:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 6010              		.loc 1 2051 9 is_stmt 0 view .LVU2013
 6011 001e 2388     		ldrh	r3, [r4]
ARM GAS  /tmp/ccuUvpuw.s 			page 220


2051:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 6012              		.loc 1 2051 8 view .LVU2014
 6013 0020 23B1     		cbz	r3, .L415
 6014              	.LVL615:
 6015              	.L408:
2067:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 6016              		.loc 1 2067 1 view .LVU2015
 6017 0022 04B0     		add	sp, sp, #16
 6018              	.LCFI80:
 6019              		.cfi_remember_state
 6020              		.cfi_def_cfa_offset 16
 6021              		@ sp needed
 6022 0024 70BD     		pop	{r4, r5, r6, pc}
 6023              	.LVL616:
 6024              	.L414:
 6025              	.LCFI81:
 6026              		.cfi_restore_state
2041:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 6027              		.loc 1 2041 8 is_stmt 1 view .LVU2016
2041:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 6028              		.loc 1 2041 15 is_stmt 0 view .LVU2017
 6029 0026 6523     		movs	r3, #101
 6030 0028 2380     		strh	r3, [r4]	@ movhi
2042:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 6031              		.loc 1 2042 9 is_stmt 1 view .LVU2018
 6032 002a FAE7     		b	.L408
 6033              	.LVL617:
 6034              	.L415:
2055:rtos/uC-USB-Device/Source/usbd_ep.c ****                  USBD_EP_ADDR_CTRL_OUT,
 6035              		.loc 1 2055 5 view .LVU2019
 6036 002c 0194     		str	r4, [sp, #4]
 6037 002e 0021     		movs	r1, #0
 6038 0030 0091     		str	r1, [sp]
 6039 0032 0B46     		mov	r3, r1
 6040 0034 2A46     		mov	r2, r5
 6041 0036 3046     		mov	r0, r6
 6042 0038 FFF7FEFF 		bl	USBD_EP_Open
 6043              	.LVL618:
2061:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_EP_Close(p_drv, USBD_EP_ADDR_CTRL_IN,  &local_err);
 6044              		.loc 1 2061 5 view .LVU2020
2061:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_EP_Close(p_drv, USBD_EP_ADDR_CTRL_IN,  &local_err);
 6045              		.loc 1 2061 9 is_stmt 0 view .LVU2021
 6046 003c 2388     		ldrh	r3, [r4]
2061:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_EP_Close(p_drv, USBD_EP_ADDR_CTRL_IN,  &local_err);
 6047              		.loc 1 2061 8 view .LVU2022
 6048 003e 13B9     		cbnz	r3, .L416
2066:rtos/uC-USB-Device/Source/usbd_ep.c **** }
 6049              		.loc 1 2066 4 is_stmt 1 view .LVU2023
2066:rtos/uC-USB-Device/Source/usbd_ep.c **** }
 6050              		.loc 1 2066 11 is_stmt 0 view .LVU2024
 6051 0040 0023     		movs	r3, #0
 6052 0042 2380     		strh	r3, [r4]	@ movhi
 6053 0044 EDE7     		b	.L408
 6054              	.L416:
2062:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 6055              		.loc 1 2062 9 is_stmt 1 view .LVU2025
 6056 0046 0DF10E02 		add	r2, sp, #14
ARM GAS  /tmp/ccuUvpuw.s 			page 221


 6057 004a 8021     		movs	r1, #128
 6058 004c 3046     		mov	r0, r6
 6059 004e FFF7FEFF 		bl	USBD_EP_Close
 6060              	.LVL619:
2063:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 6061              		.loc 1 2063 9 view .LVU2026
 6062 0052 E6E7     		b	.L408
 6063              		.cfi_endproc
 6064              	.LFE12:
 6066              		.section	.text.USBD_CtrlClose,"ax",%progbits
 6067              		.align	1
 6068              		.global	USBD_CtrlClose
 6069              		.syntax unified
 6070              		.thumb
 6071              		.thumb_func
 6072              		.fpu fpv4-sp-d16
 6074              	USBD_CtrlClose:
 6075              	.LVL620:
 6076              	.LFB13:
2094:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DRV  *p_drv;
 6077              		.loc 1 2094 1 view -0
 6078              		.cfi_startproc
 6079              		@ args = 0, pretend = 0, frame = 8
 6080              		@ frame_needed = 0, uses_anonymous_args = 0
2094:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DRV  *p_drv;
 6081              		.loc 1 2094 1 is_stmt 0 view .LVU2028
 6082 0000 30B5     		push	{r4, r5, lr}
 6083              	.LCFI82:
 6084              		.cfi_def_cfa_offset 12
 6085              		.cfi_offset 4, -12
 6086              		.cfi_offset 5, -8
 6087              		.cfi_offset 14, -4
 6088 0002 83B0     		sub	sp, sp, #12
 6089              	.LCFI83:
 6090              		.cfi_def_cfa_offset 24
 6091 0004 0C46     		mov	r4, r1
2095:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_ERR   err_in;
 6092              		.loc 1 2095 5 is_stmt 1 view .LVU2029
2096:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_ERR   err_out;
 6093              		.loc 1 2096 5 view .LVU2030
2097:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 6094              		.loc 1 2097 5 view .LVU2031
2100:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_drv == (USBD_DRV *)0) {
 6095              		.loc 1 2100 5 view .LVU2032
2100:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_drv == (USBD_DRV *)0) {
 6096              		.loc 1 2100 13 is_stmt 0 view .LVU2033
 6097 0006 FFF7FEFF 		bl	USBD_DrvRefGet
 6098              	.LVL621:
2101:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_DEV_INVALID_NBR;
 6099              		.loc 1 2101 5 is_stmt 1 view .LVU2034
2101:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_DEV_INVALID_NBR;
 6100              		.loc 1 2101 8 is_stmt 0 view .LVU2035
 6101 000a 80B1     		cbz	r0, .L423
 6102 000c 0546     		mov	r5, r0
2106:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_EP_Close(p_drv, USBD_EP_ADDR_CTRL_OUT, &err_out);
 6103              		.loc 1 2106 5 is_stmt 1 view .LVU2036
 6104 000e 0DF10602 		add	r2, sp, #6
ARM GAS  /tmp/ccuUvpuw.s 			page 222


 6105 0012 8021     		movs	r1, #128
 6106 0014 FFF7FEFF 		bl	USBD_EP_Close
 6107              	.LVL622:
2107:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 6108              		.loc 1 2107 5 view .LVU2037
 6109 0018 01AA     		add	r2, sp, #4
 6110 001a 0021     		movs	r1, #0
 6111 001c 2846     		mov	r0, r5
 6112 001e FFF7FEFF 		bl	USBD_EP_Close
 6113              	.LVL623:
2109:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = err_in;
 6114              		.loc 1 2109 5 view .LVU2038
2109:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = err_in;
 6115              		.loc 1 2109 16 is_stmt 0 view .LVU2039
 6116 0022 BDF80630 		ldrh	r3, [sp, #6]
2109:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = err_in;
 6117              		.loc 1 2109 8 view .LVU2040
 6118 0026 2BB1     		cbz	r3, .L420
2110:rtos/uC-USB-Device/Source/usbd_ep.c ****     } else {
 6119              		.loc 1 2110 8 is_stmt 1 view .LVU2041
2110:rtos/uC-USB-Device/Source/usbd_ep.c ****     } else {
 6120              		.loc 1 2110 15 is_stmt 0 view .LVU2042
 6121 0028 2380     		strh	r3, [r4]	@ movhi
 6122              	.LVL624:
 6123              	.L417:
2114:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 6124              		.loc 1 2114 1 view .LVU2043
 6125 002a 03B0     		add	sp, sp, #12
 6126              	.LCFI84:
 6127              		.cfi_remember_state
 6128              		.cfi_def_cfa_offset 12
 6129              		@ sp needed
 6130 002c 30BD     		pop	{r4, r5, pc}
 6131              	.LVL625:
 6132              	.L423:
 6133              	.LCFI85:
 6134              		.cfi_restore_state
2102:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 6135              		.loc 1 2102 8 is_stmt 1 view .LVU2044
2102:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 6136              		.loc 1 2102 15 is_stmt 0 view .LVU2045
 6137 002e 6523     		movs	r3, #101
 6138 0030 2380     		strh	r3, [r4]	@ movhi
2103:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 6139              		.loc 1 2103 9 is_stmt 1 view .LVU2046
 6140 0032 FAE7     		b	.L417
 6141              	.LVL626:
 6142              	.L420:
2112:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 6143              		.loc 1 2112 8 view .LVU2047
2112:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 6144              		.loc 1 2112 15 is_stmt 0 view .LVU2048
 6145 0034 BDF80430 		ldrh	r3, [sp, #4]
 6146 0038 2380     		strh	r3, [r4]	@ movhi
 6147 003a F6E7     		b	.L417
 6148              		.cfi_endproc
 6149              	.LFE13:
ARM GAS  /tmp/ccuUvpuw.s 			page 223


 6151              		.section	.text.USBD_EP_Stall,"ax",%progbits
 6152              		.align	1
 6153              		.global	USBD_EP_Stall
 6154              		.syntax unified
 6155              		.thumb
 6156              		.thumb_func
 6157              		.fpu fpv4-sp-d16
 6159              	USBD_EP_Stall:
 6160              	.LVL627:
 6161              	.LFB22:
2945:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DRV     *p_drv;
 6162              		.loc 1 2945 1 is_stmt 1 view -0
 6163              		.cfi_startproc
 6164              		@ args = 0, pretend = 0, frame = 0
 6165              		@ frame_needed = 0, uses_anonymous_args = 0
2945:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DRV     *p_drv;
 6166              		.loc 1 2945 1 is_stmt 0 view .LVU2050
 6167 0000 2DE9F843 		push	{r3, r4, r5, r6, r7, r8, r9, lr}
 6168              	.LCFI86:
 6169              		.cfi_def_cfa_offset 32
 6170              		.cfi_offset 3, -32
 6171              		.cfi_offset 4, -28
 6172              		.cfi_offset 5, -24
 6173              		.cfi_offset 6, -20
 6174              		.cfi_offset 7, -16
 6175              		.cfi_offset 8, -12
 6176              		.cfi_offset 9, -8
 6177              		.cfi_offset 14, -4
 6178 0004 0546     		mov	r5, r0
 6179 0006 0C46     		mov	r4, r1
 6180 0008 1646     		mov	r6, r2
2946:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_INT08U    ep_phy_nbr;
 6181              		.loc 1 2946 5 is_stmt 1 view .LVU2051
2947:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_EP      *p_ep;
 6182              		.loc 1 2947 5 view .LVU2052
2948:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_URB     *p_urb_head_aborted;
 6183              		.loc 1 2948 5 view .LVU2053
2949:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_BOOLEAN   valid;
 6184              		.loc 1 2949 5 view .LVU2054
2950:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 6185              		.loc 1 2950 5 view .LVU2055
2954:rtos/uC-USB-Device/Source/usbd_ep.c ****         CPU_SW_EXCEPTION(;);
 6186              		.loc 1 2954 5 view .LVU2056
2954:rtos/uC-USB-Device/Source/usbd_ep.c ****         CPU_SW_EXCEPTION(;);
 6187              		.loc 1 2954 8 is_stmt 0 view .LVU2057
 6188 000a 1F46     		mov	r7, r3
 6189 000c 7BB3     		cbz	r3, .L440
 6190              	.LVL628:
 6191              	.L425:
2955:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 6192              		.loc 1 2955 9 is_stmt 1 discriminator 1 view .LVU2058
2959:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_drv == (USBD_DRV *)0) {
 6193              		.loc 1 2959 5 discriminator 1 view .LVU2059
2959:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_drv == (USBD_DRV *)0) {
 6194              		.loc 1 2959 13 is_stmt 0 discriminator 1 view .LVU2060
 6195 000e 2846     		mov	r0, r5
 6196 0010 FFF7FEFF 		bl	USBD_DrvRefGet
ARM GAS  /tmp/ccuUvpuw.s 			page 224


 6197              	.LVL629:
2960:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_DEV_INVALID_NBR;
 6198              		.loc 1 2960 5 is_stmt 1 discriminator 1 view .LVU2061
2960:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_DEV_INVALID_NBR;
 6199              		.loc 1 2960 8 is_stmt 0 discriminator 1 view .LVU2062
 6200 0014 8046     		mov	r8, r0
 6201 0016 68B3     		cbz	r0, .L441
2965:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_ep       = USBD_EP_TblPtrs[dev_nbr][ep_phy_nbr];
 6202              		.loc 1 2965 5 is_stmt 1 view .LVU2063
2965:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_ep       = USBD_EP_TblPtrs[dev_nbr][ep_phy_nbr];
 6203              		.loc 1 2965 18 is_stmt 0 view .LVU2064
 6204 0018 04F00F01 		and	r1, r4, #15
 6205 001c E409     		lsrs	r4, r4, #7
2965:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_ep       = USBD_EP_TblPtrs[dev_nbr][ep_phy_nbr];
 6206              		.loc 1 2965 16 view .LVU2065
 6207 001e 04EB4104 		add	r4, r4, r1, lsl #1
 6208              	.LVL630:
2966:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 6209              		.loc 1 2966 5 is_stmt 1 view .LVU2066
2966:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 6210              		.loc 1 2966 16 is_stmt 0 view .LVU2067
 6211 0022 04EB4514 		add	r4, r4, r5, lsl #5
 6212              	.LVL631:
2966:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 6213              		.loc 1 2966 16 view .LVU2068
 6214 0026 334B     		ldr	r3, .L444
 6215 0028 53F82440 		ldr	r4, [r3, r4, lsl #2]
 6216              	.LVL632:
2968:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_EP_INVALID_ADDR;
 6217              		.loc 1 2968 5 is_stmt 1 view .LVU2069
2968:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_EP_INVALID_ADDR;
 6218              		.loc 1 2968 8 is_stmt 0 view .LVU2070
 6219 002c 2CB3     		cbz	r4, .L442
2973:rtos/uC-USB-Device/Source/usbd_ep.c ****                            p_ep->Ix,
 6220              		.loc 1 2973 5 is_stmt 1 view .LVU2071
 6221 002e 3B46     		mov	r3, r7
 6222 0030 0022     		movs	r2, #0
 6223 0032 217A     		ldrb	r1, [r4, #8]	@ zero_extendqisi2
2973:rtos/uC-USB-Device/Source/usbd_ep.c ****                            p_ep->Ix,
 6224              		.loc 1 2973 5 is_stmt 0 view .LVU2072
 6225 0034 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 6226              	.LVL633:
2973:rtos/uC-USB-Device/Source/usbd_ep.c ****                            p_ep->Ix,
 6227              		.loc 1 2973 5 view .LVU2073
 6228 0036 FFF7FEFF 		bl	USBD_OS_EP_LockAcquire
 6229              	.LVL634:
2977:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 6230              		.loc 1 2977 5 is_stmt 1 view .LVU2074
2977:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 6231              		.loc 1 2977 9 is_stmt 0 view .LVU2075
 6232 003a 3B88     		ldrh	r3, [r7]
2977:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 6233              		.loc 1 2977 8 view .LVU2076
 6234 003c 03BB     		cbnz	r3, .L424
2981:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 6235              		.loc 1 2981 5 is_stmt 1 view .LVU2077
 6236              	.LVL635:
ARM GAS  /tmp/ccuUvpuw.s 			page 225


2983:rtos/uC-USB-Device/Source/usbd_ep.c ****         case USBD_EP_STATE_OPEN:
 6237              		.loc 1 2983 5 view .LVU2078
2983:rtos/uC-USB-Device/Source/usbd_ep.c ****         case USBD_EP_STATE_OPEN:
 6238              		.loc 1 2983 17 is_stmt 0 view .LVU2079
 6239 003e 2378     		ldrb	r3, [r4]	@ zero_extendqisi2
2983:rtos/uC-USB-Device/Source/usbd_ep.c ****         case USBD_EP_STATE_OPEN:
 6240              		.loc 1 2983 5 view .LVU2080
 6241 0040 012B     		cmp	r3, #1
 6242 0042 1FD0     		beq	.L429
 6243 0044 022B     		cmp	r3, #2
 6244 0046 3CD0     		beq	.L430
3020:rtos/uC-USB-Device/Source/usbd_ep.c ****              break;
 6245              		.loc 1 3020 13 is_stmt 1 view .LVU2081
3020:rtos/uC-USB-Device/Source/usbd_ep.c ****              break;
 6246              		.loc 1 3020 20 is_stmt 0 view .LVU2082
 6247 0048 4FF4C973 		mov	r3, #402
 6248 004c 3B80     		strh	r3, [r7]	@ movhi
3021:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 6249              		.loc 1 3021 14 is_stmt 1 view .LVU2083
2981:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 6250              		.loc 1 2981 24 is_stmt 0 view .LVU2084
 6251 004e 4FF00009 		mov	r9, #0
 6252              	.LVL636:
 6253              	.L433:
3024:rtos/uC-USB-Device/Source/usbd_ep.c ****                            p_ep->Ix);
 6254              		.loc 1 3024 5 is_stmt 1 view .LVU2085
 6255 0052 217A     		ldrb	r1, [r4, #8]	@ zero_extendqisi2
 6256 0054 98F80000 		ldrb	r0, [r8]	@ zero_extendqisi2
 6257 0058 FFF7FEFF 		bl	USBD_OS_EP_LockRelease
 6258              	.LVL637:
3027:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_URB_AsyncEnd(dev_nbr, p_ep, p_urb_head_aborted);   /* Execute callback and free aborte
 6259              		.loc 1 3027 5 view .LVU2086
3027:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_URB_AsyncEnd(dev_nbr, p_ep, p_urb_head_aborted);   /* Execute callback and free aborte
 6260              		.loc 1 3027 8 is_stmt 0 view .LVU2087
 6261 005c B9F1000F 		cmp	r9, #0
 6262 0060 0ED0     		beq	.L424
3028:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 6263              		.loc 1 3028 9 is_stmt 1 view .LVU2088
 6264 0062 4A46     		mov	r2, r9
 6265 0064 2146     		mov	r1, r4
 6266 0066 2846     		mov	r0, r5
 6267 0068 FFF7FEFF 		bl	USBD_URB_AsyncEnd
 6268              	.LVL638:
 6269 006c 08E0     		b	.L424
 6270              	.LVL639:
 6271              	.L440:
2955:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 6272              		.loc 1 2955 9 view .LVU2089
2955:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 6273              		.loc 1 2955 9 view .LVU2090
 6274 006e FFF7FEFF 		bl	CPU_SW_Exception
 6275              	.LVL640:
2955:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 6276              		.loc 1 2955 9 is_stmt 0 view .LVU2091
 6277 0072 CCE7     		b	.L425
 6278              	.LVL641:
 6279              	.L441:
ARM GAS  /tmp/ccuUvpuw.s 			page 226


2961:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 6280              		.loc 1 2961 8 is_stmt 1 view .LVU2092
2961:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 6281              		.loc 1 2961 15 is_stmt 0 view .LVU2093
 6282 0074 6523     		movs	r3, #101
 6283 0076 3B80     		strh	r3, [r7]	@ movhi
2962:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 6284              		.loc 1 2962 9 is_stmt 1 view .LVU2094
 6285 0078 02E0     		b	.L424
 6286              	.LVL642:
 6287              	.L442:
2969:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 6288              		.loc 1 2969 8 view .LVU2095
2969:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 6289              		.loc 1 2969 15 is_stmt 0 view .LVU2096
 6290 007a 40F29113 		movw	r3, #401
 6291 007e 3B80     		strh	r3, [r7]	@ movhi
2970:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 6292              		.loc 1 2970 9 is_stmt 1 view .LVU2097
 6293              	.LVL643:
 6294              	.L424:
3030:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 6295              		.loc 1 3030 1 is_stmt 0 view .LVU2098
 6296 0080 BDE8F883 		pop	{r3, r4, r5, r6, r7, r8, r9, pc}
 6297              	.LVL644:
 6298              	.L429:
2985:rtos/uC-USB-Device/Source/usbd_ep.c ****                  p_urb_head_aborted = USBD_EP_URB_Abort(p_drv,  /* Abort xfers in progress, keep pt
 6299              		.loc 1 2985 14 is_stmt 1 view .LVU2099
2985:rtos/uC-USB-Device/Source/usbd_ep.c ****                  p_urb_head_aborted = USBD_EP_URB_Abort(p_drv,  /* Abort xfers in progress, keep pt
 6300              		.loc 1 2985 17 is_stmt 0 view .LVU2100
 6301 0084 012E     		cmp	r6, #1
 6302 0086 0DD0     		beq	.L443
2981:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 6303              		.loc 1 2981 24 view .LVU2101
 6304 0088 4FF00009 		mov	r9, #0
 6305              	.LVL645:
 6306              	.L432:
2995:rtos/uC-USB-Device/Source/usbd_ep.c ****              if (valid == DEF_FAIL) {
 6307              		.loc 1 2995 14 is_stmt 1 view .LVU2102
2995:rtos/uC-USB-Device/Source/usbd_ep.c ****              if (valid == DEF_FAIL) {
 6308              		.loc 1 2995 27 is_stmt 0 view .LVU2103
 6309 008c D8F80430 		ldr	r3, [r8, #4]
2995:rtos/uC-USB-Device/Source/usbd_ep.c ****              if (valid == DEF_FAIL) {
 6310              		.loc 1 2995 36 view .LVU2104
 6311 0090 5B6C     		ldr	r3, [r3, #68]
2995:rtos/uC-USB-Device/Source/usbd_ep.c ****              if (valid == DEF_FAIL) {
 6312              		.loc 1 2995 22 view .LVU2105
 6313 0092 3246     		mov	r2, r6
 6314 0094 A178     		ldrb	r1, [r4, #2]	@ zero_extendqisi2
 6315 0096 4046     		mov	r0, r8
 6316 0098 9847     		blx	r3
 6317              	.LVL646:
2996:rtos/uC-USB-Device/Source/usbd_ep.c ****                 *p_err = USBD_ERR_EP_STALL;
 6318              		.loc 1 2996 14 is_stmt 1 view .LVU2106
2996:rtos/uC-USB-Device/Source/usbd_ep.c ****                 *p_err = USBD_ERR_EP_STALL;
 6319              		.loc 1 2996 17 is_stmt 0 view .LVU2107
 6320 009a 78B9     		cbnz	r0, .L434
ARM GAS  /tmp/ccuUvpuw.s 			page 227


2997:rtos/uC-USB-Device/Source/usbd_ep.c ****              } else {
 6321              		.loc 1 2997 17 is_stmt 1 view .LVU2108
2997:rtos/uC-USB-Device/Source/usbd_ep.c ****              } else {
 6322              		.loc 1 2997 24 is_stmt 0 view .LVU2109
 6323 009c 4FF4CB73 		mov	r3, #406
 6324 00a0 3B80     		strh	r3, [r7]	@ movhi
 6325 00a2 D6E7     		b	.L433
 6326              	.LVL647:
 6327              	.L443:
2986:rtos/uC-USB-Device/Source/usbd_ep.c ****                                                         p_ep,
 6328              		.loc 1 2986 18 is_stmt 1 view .LVU2110
2986:rtos/uC-USB-Device/Source/usbd_ep.c ****                                                         p_ep,
 6329              		.loc 1 2986 39 is_stmt 0 view .LVU2111
 6330 00a4 3A46     		mov	r2, r7
 6331 00a6 2146     		mov	r1, r4
 6332 00a8 4046     		mov	r0, r8
 6333 00aa FFF7FEFF 		bl	USBD_EP_URB_Abort
 6334              	.LVL648:
 6335 00ae 8146     		mov	r9, r0
 6336              	.LVL649:
2989:rtos/uC-USB-Device/Source/usbd_ep.c ****                      break;
 6337              		.loc 1 2989 18 is_stmt 1 view .LVU2112
2989:rtos/uC-USB-Device/Source/usbd_ep.c ****                      break;
 6338              		.loc 1 2989 22 is_stmt 0 view .LVU2113
 6339 00b0 3B88     		ldrh	r3, [r7]
2989:rtos/uC-USB-Device/Source/usbd_ep.c ****                      break;
 6340              		.loc 1 2989 21 view .LVU2114
 6341 00b2 002B     		cmp	r3, #0
 6342 00b4 CDD1     		bne	.L433
2992:rtos/uC-USB-Device/Source/usbd_ep.c ****              }
 6343              		.loc 1 2992 18 is_stmt 1 view .LVU2115
2992:rtos/uC-USB-Device/Source/usbd_ep.c ****              }
 6344              		.loc 1 2992 30 is_stmt 0 view .LVU2116
 6345 00b6 0223     		movs	r3, #2
 6346 00b8 2370     		strb	r3, [r4]
 6347 00ba E7E7     		b	.L432
 6348              	.LVL650:
 6349              	.L434:
2999:rtos/uC-USB-Device/Source/usbd_ep.c ****              }
 6350              		.loc 1 2999 17 is_stmt 1 view .LVU2117
2999:rtos/uC-USB-Device/Source/usbd_ep.c ****              }
 6351              		.loc 1 2999 24 is_stmt 0 view .LVU2118
 6352 00bc 0023     		movs	r3, #0
 6353 00be 3B80     		strh	r3, [r7]	@ movhi
 6354 00c0 C7E7     		b	.L433
 6355              	.LVL651:
 6356              	.L430:
3005:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 6357              		.loc 1 3005 14 is_stmt 1 view .LVU2119
3005:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 6358              		.loc 1 3005 17 is_stmt 0 view .LVU2120
 6359 00c2 A6B9     		cbnz	r6, .L437
3007:rtos/uC-USB-Device/Source/usbd_ep.c ****                  if (valid == DEF_FAIL) {
 6360              		.loc 1 3007 18 is_stmt 1 view .LVU2121
3007:rtos/uC-USB-Device/Source/usbd_ep.c ****                  if (valid == DEF_FAIL) {
 6361              		.loc 1 3007 31 is_stmt 0 view .LVU2122
 6362 00c4 D8F80430 		ldr	r3, [r8, #4]
ARM GAS  /tmp/ccuUvpuw.s 			page 228


3007:rtos/uC-USB-Device/Source/usbd_ep.c ****                  if (valid == DEF_FAIL) {
 6363              		.loc 1 3007 40 view .LVU2123
 6364 00c8 5B6C     		ldr	r3, [r3, #68]
3007:rtos/uC-USB-Device/Source/usbd_ep.c ****                  if (valid == DEF_FAIL) {
 6365              		.loc 1 3007 26 view .LVU2124
 6366 00ca 0022     		movs	r2, #0
 6367 00cc A178     		ldrb	r1, [r4, #2]	@ zero_extendqisi2
 6368 00ce 4046     		mov	r0, r8
 6369 00d0 9847     		blx	r3
 6370              	.LVL652:
3008:rtos/uC-USB-Device/Source/usbd_ep.c ****                     *p_err = USBD_ERR_EP_STALL;
 6371              		.loc 1 3008 18 is_stmt 1 view .LVU2125
3008:rtos/uC-USB-Device/Source/usbd_ep.c ****                     *p_err = USBD_ERR_EP_STALL;
 6372              		.loc 1 3008 21 is_stmt 0 view .LVU2126
 6373 00d2 28B9     		cbnz	r0, .L435
3009:rtos/uC-USB-Device/Source/usbd_ep.c ****                  } else {
 6374              		.loc 1 3009 21 is_stmt 1 view .LVU2127
3009:rtos/uC-USB-Device/Source/usbd_ep.c ****                  } else {
 6375              		.loc 1 3009 28 is_stmt 0 view .LVU2128
 6376 00d4 4FF4CB73 		mov	r3, #406
 6377 00d8 3B80     		strh	r3, [r7]	@ movhi
2981:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 6378              		.loc 1 2981 24 view .LVU2129
 6379 00da 4FF00009 		mov	r9, #0
 6380 00de B8E7     		b	.L433
 6381              	.L435:
3011:rtos/uC-USB-Device/Source/usbd_ep.c ****                     *p_err = USBD_ERR_NONE;
 6382              		.loc 1 3011 22 is_stmt 1 view .LVU2130
3011:rtos/uC-USB-Device/Source/usbd_ep.c ****                     *p_err = USBD_ERR_NONE;
 6383              		.loc 1 3011 34 is_stmt 0 view .LVU2131
 6384 00e0 0123     		movs	r3, #1
 6385 00e2 2370     		strb	r3, [r4]
3012:rtos/uC-USB-Device/Source/usbd_ep.c ****                  }
 6386              		.loc 1 3012 21 is_stmt 1 view .LVU2132
3012:rtos/uC-USB-Device/Source/usbd_ep.c ****                  }
 6387              		.loc 1 3012 28 is_stmt 0 view .LVU2133
 6388 00e4 4FF00009 		mov	r9, #0
 6389 00e8 A7F80090 		strh	r9, [r7]	@ movhi
 6390 00ec B1E7     		b	.L433
 6391              	.LVL653:
 6392              	.L437:
2981:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 6393              		.loc 1 2981 24 view .LVU2134
 6394 00ee 4FF00009 		mov	r9, #0
 6395 00f2 AEE7     		b	.L433
 6396              	.L445:
 6397              		.align	2
 6398              	.L444:
 6399 00f4 00000000 		.word	.LANCHOR1
 6400              		.cfi_endproc
 6401              	.LFE22:
 6403              		.section	.text.USBD_EP_IsStalled,"ax",%progbits
 6404              		.align	1
 6405              		.global	USBD_EP_IsStalled
 6406              		.syntax unified
 6407              		.thumb
 6408              		.thumb_func
ARM GAS  /tmp/ccuUvpuw.s 			page 229


 6409              		.fpu fpv4-sp-d16
 6411              	USBD_EP_IsStalled:
 6412              	.LVL654:
 6413              	.LFB23:
3060:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DRV    *p_drv;
 6414              		.loc 1 3060 1 is_stmt 1 view -0
 6415              		.cfi_startproc
 6416              		@ args = 0, pretend = 0, frame = 0
 6417              		@ frame_needed = 0, uses_anonymous_args = 0
3060:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DRV    *p_drv;
 6418              		.loc 1 3060 1 is_stmt 0 view .LVU2136
 6419 0000 70B5     		push	{r4, r5, r6, lr}
 6420              	.LCFI87:
 6421              		.cfi_def_cfa_offset 16
 6422              		.cfi_offset 4, -16
 6423              		.cfi_offset 5, -12
 6424              		.cfi_offset 6, -8
 6425              		.cfi_offset 14, -4
 6426 0002 0546     		mov	r5, r0
 6427 0004 0C46     		mov	r4, r1
3061:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_EP     *p_ep;
 6428              		.loc 1 3061 5 is_stmt 1 view .LVU2137
3062:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_INT08U   ep_phy_nbr;
 6429              		.loc 1 3062 5 view .LVU2138
3063:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 6430              		.loc 1 3063 5 view .LVU2139
3067:rtos/uC-USB-Device/Source/usbd_ep.c ****         CPU_SW_EXCEPTION(DEF_NO);
 6431              		.loc 1 3067 5 view .LVU2140
3067:rtos/uC-USB-Device/Source/usbd_ep.c ****         CPU_SW_EXCEPTION(DEF_NO);
 6432              		.loc 1 3067 8 is_stmt 0 view .LVU2141
 6433 0006 1646     		mov	r6, r2
 6434 0008 AAB1     		cbz	r2, .L453
 6435              	.LVL655:
 6436              	.L447:
3068:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 6437              		.loc 1 3068 9 is_stmt 1 discriminator 1 view .LVU2142
3072:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_drv == (USBD_DRV *)0) {
 6438              		.loc 1 3072 5 discriminator 1 view .LVU2143
3072:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_drv == (USBD_DRV *)0) {
 6439              		.loc 1 3072 13 is_stmt 0 discriminator 1 view .LVU2144
 6440 000a 2846     		mov	r0, r5
 6441 000c FFF7FEFF 		bl	USBD_DrvRefGet
 6442              	.LVL656:
3073:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_DEV_INVALID_NBR;
 6443              		.loc 1 3073 5 is_stmt 1 discriminator 1 view .LVU2145
3073:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_DEV_INVALID_NBR;
 6444              		.loc 1 3073 8 is_stmt 0 discriminator 1 view .LVU2146
 6445 0010 A0B1     		cbz	r0, .L454
3078:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_ep       = USBD_EP_TblPtrs[dev_nbr][ep_phy_nbr];
 6446              		.loc 1 3078 5 is_stmt 1 view .LVU2147
3078:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_ep       = USBD_EP_TblPtrs[dev_nbr][ep_phy_nbr];
 6447              		.loc 1 3078 18 is_stmt 0 view .LVU2148
 6448 0012 04F00F00 		and	r0, r4, #15
 6449              	.LVL657:
3078:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_ep       = USBD_EP_TblPtrs[dev_nbr][ep_phy_nbr];
 6450              		.loc 1 3078 18 view .LVU2149
 6451 0016 E409     		lsrs	r4, r4, #7
ARM GAS  /tmp/ccuUvpuw.s 			page 230


3078:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_ep       = USBD_EP_TblPtrs[dev_nbr][ep_phy_nbr];
 6452              		.loc 1 3078 16 view .LVU2150
 6453 0018 04EB4004 		add	r4, r4, r0, lsl #1
 6454              	.LVL658:
3079:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 6455              		.loc 1 3079 5 is_stmt 1 view .LVU2151
3079:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 6456              		.loc 1 3079 16 is_stmt 0 view .LVU2152
 6457 001c 04EB4510 		add	r0, r4, r5, lsl #5
 6458 0020 0B4B     		ldr	r3, .L457
 6459 0022 53F82030 		ldr	r3, [r3, r0, lsl #2]
 6460              	.LVL659:
3081:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_EP_INVALID_ADDR;
 6461              		.loc 1 3081 5 is_stmt 1 view .LVU2153
3081:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_EP_INVALID_ADDR;
 6462              		.loc 1 3081 8 is_stmt 0 view .LVU2154
 6463 0026 63B1     		cbz	r3, .L455
3086:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 6464              		.loc 1 3086 4 is_stmt 1 view .LVU2155
3086:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 6465              		.loc 1 3086 11 is_stmt 0 view .LVU2156
 6466 0028 0022     		movs	r2, #0
 6467 002a 3280     		strh	r2, [r6]	@ movhi
3088:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (DEF_YES);
 6468              		.loc 1 3088 5 is_stmt 1 view .LVU2157
3088:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (DEF_YES);
 6469              		.loc 1 3088 13 is_stmt 0 view .LVU2158
 6470 002c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 6471              	.LVL660:
3088:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (DEF_YES);
 6472              		.loc 1 3088 8 view .LVU2159
 6473 002e 022B     		cmp	r3, #2
 6474 0030 0CD0     		beq	.L456
3091:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 6475              		.loc 1 3091 16 view .LVU2160
 6476 0032 0020     		movs	r0, #0
 6477              	.LVL661:
 6478              	.L449:
3093:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 6479              		.loc 1 3093 1 view .LVU2161
 6480 0034 70BD     		pop	{r4, r5, r6, pc}
 6481              	.LVL662:
 6482              	.L453:
3068:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 6483              		.loc 1 3068 9 is_stmt 1 view .LVU2162
3068:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 6484              		.loc 1 3068 9 view .LVU2163
 6485 0036 FFF7FEFF 		bl	CPU_SW_Exception
 6486              	.LVL663:
3068:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 6487              		.loc 1 3068 9 is_stmt 0 view .LVU2164
 6488 003a E6E7     		b	.L447
 6489              	.LVL664:
 6490              	.L454:
3074:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (DEF_NO);
 6491              		.loc 1 3074 8 is_stmt 1 view .LVU2165
3074:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (DEF_NO);
ARM GAS  /tmp/ccuUvpuw.s 			page 231


 6492              		.loc 1 3074 15 is_stmt 0 view .LVU2166
 6493 003c 6523     		movs	r3, #101
 6494 003e 3380     		strh	r3, [r6]	@ movhi
3075:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 6495              		.loc 1 3075 9 is_stmt 1 view .LVU2167
3075:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 6496              		.loc 1 3075 16 is_stmt 0 view .LVU2168
 6497 0040 F8E7     		b	.L449
 6498              	.LVL665:
 6499              	.L455:
3082:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (DEF_NO);
 6500              		.loc 1 3082 8 is_stmt 1 view .LVU2169
3082:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (DEF_NO);
 6501              		.loc 1 3082 15 is_stmt 0 view .LVU2170
 6502 0042 40F29113 		movw	r3, #401
 6503              	.LVL666:
3082:rtos/uC-USB-Device/Source/usbd_ep.c ****         return (DEF_NO);
 6504              		.loc 1 3082 15 view .LVU2171
 6505 0046 3380     		strh	r3, [r6]	@ movhi
3083:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 6506              		.loc 1 3083 9 is_stmt 1 view .LVU2172
3083:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 6507              		.loc 1 3083 16 is_stmt 0 view .LVU2173
 6508 0048 0020     		movs	r0, #0
 6509              	.LVL667:
3083:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 6510              		.loc 1 3083 16 view .LVU2174
 6511 004a F3E7     		b	.L449
 6512              	.LVL668:
 6513              	.L456:
3089:rtos/uC-USB-Device/Source/usbd_ep.c ****     } else {
 6514              		.loc 1 3089 16 view .LVU2175
 6515 004c 0120     		movs	r0, #1
 6516              	.LVL669:
3089:rtos/uC-USB-Device/Source/usbd_ep.c ****     } else {
 6517              		.loc 1 3089 16 view .LVU2176
 6518 004e F1E7     		b	.L449
 6519              	.L458:
 6520              		.align	2
 6521              	.L457:
 6522 0050 00000000 		.word	.LANCHOR1
 6523              		.cfi_endproc
 6524              	.LFE23:
 6526              		.section	.text.USBD_EP_RxCmpl,"ax",%progbits
 6527              		.align	1
 6528              		.global	USBD_EP_RxCmpl
 6529              		.syntax unified
 6530              		.thumb
 6531              		.thumb_func
 6532              		.fpu fpv4-sp-d16
 6534              	USBD_EP_RxCmpl:
 6535              	.LVL670:
 6536              	.LFB24:
3114:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_EP     *p_ep;
 6537              		.loc 1 3114 1 is_stmt 1 view -0
 6538              		.cfi_startproc
 6539              		@ args = 0, pretend = 0, frame = 8
ARM GAS  /tmp/ccuUvpuw.s 			page 232


 6540              		@ frame_needed = 0, uses_anonymous_args = 0
3115:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_INT08U   ep_phy_nbr;
 6541              		.loc 1 3115 5 view .LVU2178
3116:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_ERR     err;
 6542              		.loc 1 3116 5 view .LVU2179
3117:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 6543              		.loc 1 3117 5 view .LVU2180
3121:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 6544              		.loc 1 3121 5 view .LVU2181
3121:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 6545              		.loc 1 3121 8 is_stmt 0 view .LVU2182
 6546 0000 18B3     		cbz	r0, .L465
3114:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_EP     *p_ep;
 6547              		.loc 1 3114 1 view .LVU2183
 6548 0002 10B5     		push	{r4, lr}
 6549              	.LCFI88:
 6550              		.cfi_def_cfa_offset 8
 6551              		.cfi_offset 4, -8
 6552              		.cfi_offset 14, -4
 6553 0004 82B0     		sub	sp, sp, #8
 6554              	.LCFI89:
 6555              		.cfi_def_cfa_offset 16
 6556 0006 0446     		mov	r4, r0
3126:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_ep       = USBD_EP_TblPtrs[p_drv->DevNbr][ep_phy_nbr];
 6557              		.loc 1 3126 5 is_stmt 1 view .LVU2184
3126:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_ep       = USBD_EP_TblPtrs[p_drv->DevNbr][ep_phy_nbr];
 6558              		.loc 1 3126 18 is_stmt 0 view .LVU2185
 6559 0008 01F00F03 		and	r3, r1, #15
 6560 000c C909     		lsrs	r1, r1, #7
 6561              	.LVL671:
3126:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_ep       = USBD_EP_TblPtrs[p_drv->DevNbr][ep_phy_nbr];
 6562              		.loc 1 3126 16 view .LVU2186
 6563 000e 01EB4301 		add	r1, r1, r3, lsl #1
 6564              	.LVL672:
3127:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 6565              		.loc 1 3127 5 is_stmt 1 view .LVU2187
3127:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 6566              		.loc 1 3127 39 is_stmt 0 view .LVU2188
 6567 0012 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 6568              	.LVL673:
3127:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 6569              		.loc 1 3127 16 view .LVU2189
 6570 0014 01EB4011 		add	r1, r1, r0, lsl #5
 6571              	.LVL674:
3127:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 6572              		.loc 1 3127 16 view .LVU2190
 6573 0018 0C4B     		ldr	r3, .L470
3127:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 6574              		.loc 1 3127 16 view .LVU2191
 6575 001a 53F82110 		ldr	r1, [r3, r1, lsl #2]
 6576              	.LVL675:
3129:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_DBG_STATS_EP_INC(p_drv->DevNbr, p_ep->Ix, RxCmplErrNbr);
 6577              		.loc 1 3129 5 is_stmt 1 view .LVU2192
3129:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_DBG_STATS_EP_INC(p_drv->DevNbr, p_ep->Ix, RxCmplErrNbr);
 6578              		.loc 1 3129 8 is_stmt 0 view .LVU2193
 6579 001e 31B1     		cbz	r1, .L459
3134:rtos/uC-USB-Device/Source/usbd_ep.c **** 
ARM GAS  /tmp/ccuUvpuw.s 			page 233


 6580              		.loc 1 3134 62 is_stmt 1 view .LVU2194
3136:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_OS_EP_SignalPost(p_drv->DevNbr, p_ep->Ix, &err);
 6581              		.loc 1 3136 5 view .LVU2195
3136:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_OS_EP_SignalPost(p_drv->DevNbr, p_ep->Ix, &err);
 6582              		.loc 1 3136 13 is_stmt 0 view .LVU2196
 6583 0020 4B78     		ldrb	r3, [r1, #1]	@ zero_extendqisi2
3136:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_OS_EP_SignalPost(p_drv->DevNbr, p_ep->Ix, &err);
 6584              		.loc 1 3136 8 view .LVU2197
 6585 0022 012B     		cmp	r3, #1
 6586 0024 05D0     		beq	.L468
3138:rtos/uC-USB-Device/Source/usbd_ep.c ****                (p_ep->XferState == USBD_XFER_STATE_ASYNC_PARTIAL)) {
 6587              		.loc 1 3138 12 is_stmt 1 view .LVU2198
3138:rtos/uC-USB-Device/Source/usbd_ep.c ****                (p_ep->XferState == USBD_XFER_STATE_ASYNC_PARTIAL)) {
 6588              		.loc 1 3138 59 is_stmt 0 view .LVU2199
 6589 0026 023B     		subs	r3, r3, #2
 6590 0028 DBB2     		uxtb	r3, r3
3138:rtos/uC-USB-Device/Source/usbd_ep.c ****                (p_ep->XferState == USBD_XFER_STATE_ASYNC_PARTIAL)) {
 6591              		.loc 1 3138 15 view .LVU2200
 6592 002a 012B     		cmp	r3, #1
 6593 002c 07D9     		bls	.L469
 6594              	.LVL676:
 6595              	.L459:
3145:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 6596              		.loc 1 3145 1 view .LVU2201
 6597 002e 02B0     		add	sp, sp, #8
 6598              	.LCFI90:
 6599              		.cfi_remember_state
 6600              		.cfi_def_cfa_offset 8
 6601              		@ sp needed
 6602 0030 10BD     		pop	{r4, pc}
 6603              	.LVL677:
 6604              	.L468:
 6605              	.LCFI91:
 6606              		.cfi_restore_state
3137:rtos/uC-USB-Device/Source/usbd_ep.c ****     } else if ((p_ep->XferState == USBD_XFER_STATE_ASYNC) ||
 6607              		.loc 1 3137 9 is_stmt 1 view .LVU2202
 6608 0032 0DF10602 		add	r2, sp, #6
 6609 0036 097A     		ldrb	r1, [r1, #8]	@ zero_extendqisi2
 6610              	.LVL678:
3137:rtos/uC-USB-Device/Source/usbd_ep.c ****     } else if ((p_ep->XferState == USBD_XFER_STATE_ASYNC) ||
 6611              		.loc 1 3137 9 is_stmt 0 view .LVU2203
 6612 0038 FFF7FEFF 		bl	USBD_OS_EP_SignalPost
 6613              	.LVL679:
3137:rtos/uC-USB-Device/Source/usbd_ep.c ****     } else if ((p_ep->XferState == USBD_XFER_STATE_ASYNC) ||
 6614              		.loc 1 3137 9 view .LVU2204
 6615 003c F7E7     		b	.L459
 6616              	.LVL680:
 6617              	.L469:
3140:rtos/uC-USB-Device/Source/usbd_ep.c ****     } else {
 6618              		.loc 1 3140 9 is_stmt 1 view .LVU2205
 6619 003e 0022     		movs	r2, #0
 6620 0040 8978     		ldrb	r1, [r1, #2]	@ zero_extendqisi2
 6621              	.LVL681:
3140:rtos/uC-USB-Device/Source/usbd_ep.c ****     } else {
 6622              		.loc 1 3140 9 is_stmt 0 view .LVU2206
 6623 0042 2046     		mov	r0, r4
3140:rtos/uC-USB-Device/Source/usbd_ep.c ****     } else {
ARM GAS  /tmp/ccuUvpuw.s 			page 234


 6624              		.loc 1 3140 9 view .LVU2207
 6625 0044 FFF7FEFF 		bl	USBD_EventEP
 6626              	.LVL682:
3142:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_DBG_EP("USBD_EP_RxCmpl(): incorrect XferState", p_ep->Addr);
 6627              		.loc 1 3142 69 is_stmt 1 view .LVU2208
3143:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 6628              		.loc 1 3143 73 view .LVU2209
 6629 0048 F1E7     		b	.L459
 6630              	.LVL683:
 6631              	.L465:
 6632              	.LCFI92:
 6633              		.cfi_def_cfa_offset 0
 6634              		.cfi_restore 4
 6635              		.cfi_restore 14
3143:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 6636              		.loc 1 3143 73 is_stmt 0 view .LVU2210
 6637 004a 7047     		bx	lr
 6638              	.L471:
 6639              		.align	2
 6640              	.L470:
 6641 004c 00000000 		.word	.LANCHOR1
 6642              		.cfi_endproc
 6643              	.LFE24:
 6645              		.section	.text.USBD_EP_TxCmpl,"ax",%progbits
 6646              		.align	1
 6647              		.global	USBD_EP_TxCmpl
 6648              		.syntax unified
 6649              		.thumb
 6650              		.thumb_func
 6651              		.fpu fpv4-sp-d16
 6653              	USBD_EP_TxCmpl:
 6654              	.LVL684:
 6655              	.LFB25:
3166:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_EP     *p_ep;
 6656              		.loc 1 3166 1 is_stmt 1 view -0
 6657              		.cfi_startproc
 6658              		@ args = 0, pretend = 0, frame = 8
 6659              		@ frame_needed = 0, uses_anonymous_args = 0
3167:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_INT08U   ep_phy_nbr;
 6660              		.loc 1 3167 5 view .LVU2212
3168:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_ERR     err;
 6661              		.loc 1 3168 5 view .LVU2213
3169:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 6662              		.loc 1 3169 5 view .LVU2214
3173:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 6663              		.loc 1 3173 5 view .LVU2215
3173:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 6664              		.loc 1 3173 8 is_stmt 0 view .LVU2216
 6665 0000 10B3     		cbz	r0, .L478
3166:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_EP     *p_ep;
 6666              		.loc 1 3166 1 view .LVU2217
 6667 0002 10B5     		push	{r4, lr}
 6668              	.LCFI93:
 6669              		.cfi_def_cfa_offset 8
 6670              		.cfi_offset 4, -8
 6671              		.cfi_offset 14, -4
 6672 0004 82B0     		sub	sp, sp, #8
ARM GAS  /tmp/ccuUvpuw.s 			page 235


 6673              	.LCFI94:
 6674              		.cfi_def_cfa_offset 16
 6675 0006 0446     		mov	r4, r0
3178:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_ep       = USBD_EP_TblPtrs[p_drv->DevNbr][ep_phy_nbr];
 6676              		.loc 1 3178 5 is_stmt 1 view .LVU2218
3178:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_ep       = USBD_EP_TblPtrs[p_drv->DevNbr][ep_phy_nbr];
 6677              		.loc 1 3178 18 is_stmt 0 view .LVU2219
 6678 0008 01F00F01 		and	r1, r1, #15
 6679              	.LVL685:
3178:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_ep       = USBD_EP_TblPtrs[p_drv->DevNbr][ep_phy_nbr];
 6680              		.loc 1 3178 18 view .LVU2220
 6681 000c 4900     		lsls	r1, r1, #1
3178:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_ep       = USBD_EP_TblPtrs[p_drv->DevNbr][ep_phy_nbr];
 6682              		.loc 1 3178 16 view .LVU2221
 6683 000e 0131     		adds	r1, r1, #1
 6684              	.LVL686:
3179:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 6685              		.loc 1 3179 5 is_stmt 1 view .LVU2222
3179:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 6686              		.loc 1 3179 39 is_stmt 0 view .LVU2223
 6687 0010 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 6688              	.LVL687:
3179:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 6689              		.loc 1 3179 16 view .LVU2224
 6690 0012 01EB4011 		add	r1, r1, r0, lsl #5
 6691              	.LVL688:
3179:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 6692              		.loc 1 3179 16 view .LVU2225
 6693 0016 0D4B     		ldr	r3, .L483
 6694 0018 53F82110 		ldr	r1, [r3, r1, lsl #2]
 6695              	.LVL689:
3181:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_DBG_STATS_EP_INC(p_drv->DevNbr, p_ep->Ix, TxCmplErrNbr);
 6696              		.loc 1 3181 5 is_stmt 1 view .LVU2226
3181:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_DBG_STATS_EP_INC(p_drv->DevNbr, p_ep->Ix, TxCmplErrNbr);
 6697              		.loc 1 3181 8 is_stmt 0 view .LVU2227
 6698 001c 31B1     		cbz	r1, .L472
3186:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 6699              		.loc 1 3186 62 is_stmt 1 view .LVU2228
3188:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_OS_EP_SignalPost(p_drv->DevNbr, p_ep->Ix, &err);
 6700              		.loc 1 3188 5 view .LVU2229
3188:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_OS_EP_SignalPost(p_drv->DevNbr, p_ep->Ix, &err);
 6701              		.loc 1 3188 13 is_stmt 0 view .LVU2230
 6702 001e 4B78     		ldrb	r3, [r1, #1]	@ zero_extendqisi2
3188:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_OS_EP_SignalPost(p_drv->DevNbr, p_ep->Ix, &err);
 6703              		.loc 1 3188 8 view .LVU2231
 6704 0020 012B     		cmp	r3, #1
 6705 0022 05D0     		beq	.L481
3190:rtos/uC-USB-Device/Source/usbd_ep.c ****                (p_ep->XferState == USBD_XFER_STATE_ASYNC_PARTIAL)) {
 6706              		.loc 1 3190 12 is_stmt 1 view .LVU2232
3190:rtos/uC-USB-Device/Source/usbd_ep.c ****                (p_ep->XferState == USBD_XFER_STATE_ASYNC_PARTIAL)) {
 6707              		.loc 1 3190 59 is_stmt 0 view .LVU2233
 6708 0024 023B     		subs	r3, r3, #2
 6709 0026 DBB2     		uxtb	r3, r3
3190:rtos/uC-USB-Device/Source/usbd_ep.c ****                (p_ep->XferState == USBD_XFER_STATE_ASYNC_PARTIAL)) {
 6710              		.loc 1 3190 15 view .LVU2234
 6711 0028 012B     		cmp	r3, #1
 6712 002a 07D9     		bls	.L482
ARM GAS  /tmp/ccuUvpuw.s 			page 236


 6713              	.LVL690:
 6714              	.L472:
3197:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 6715              		.loc 1 3197 1 view .LVU2235
 6716 002c 02B0     		add	sp, sp, #8
 6717              	.LCFI95:
 6718              		.cfi_remember_state
 6719              		.cfi_def_cfa_offset 8
 6720              		@ sp needed
 6721 002e 10BD     		pop	{r4, pc}
 6722              	.LVL691:
 6723              	.L481:
 6724              	.LCFI96:
 6725              		.cfi_restore_state
3189:rtos/uC-USB-Device/Source/usbd_ep.c ****     } else if ((p_ep->XferState == USBD_XFER_STATE_ASYNC) ||
 6726              		.loc 1 3189 9 is_stmt 1 view .LVU2236
 6727 0030 0DF10602 		add	r2, sp, #6
 6728 0034 097A     		ldrb	r1, [r1, #8]	@ zero_extendqisi2
 6729              	.LVL692:
3189:rtos/uC-USB-Device/Source/usbd_ep.c ****     } else if ((p_ep->XferState == USBD_XFER_STATE_ASYNC) ||
 6730              		.loc 1 3189 9 is_stmt 0 view .LVU2237
 6731 0036 FFF7FEFF 		bl	USBD_OS_EP_SignalPost
 6732              	.LVL693:
3189:rtos/uC-USB-Device/Source/usbd_ep.c ****     } else if ((p_ep->XferState == USBD_XFER_STATE_ASYNC) ||
 6733              		.loc 1 3189 9 view .LVU2238
 6734 003a F7E7     		b	.L472
 6735              	.LVL694:
 6736              	.L482:
3192:rtos/uC-USB-Device/Source/usbd_ep.c ****     } else {
 6737              		.loc 1 3192 9 is_stmt 1 view .LVU2239
 6738 003c 0022     		movs	r2, #0
 6739 003e 8978     		ldrb	r1, [r1, #2]	@ zero_extendqisi2
 6740              	.LVL695:
3192:rtos/uC-USB-Device/Source/usbd_ep.c ****     } else {
 6741              		.loc 1 3192 9 is_stmt 0 view .LVU2240
 6742 0040 2046     		mov	r0, r4
3192:rtos/uC-USB-Device/Source/usbd_ep.c ****     } else {
 6743              		.loc 1 3192 9 view .LVU2241
 6744 0042 FFF7FEFF 		bl	USBD_EventEP
 6745              	.LVL696:
3194:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_DBG_EP("USBD_EP_TxCmpl(): incorrect XferState", p_ep->Addr);
 6746              		.loc 1 3194 69 is_stmt 1 view .LVU2242
3195:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 6747              		.loc 1 3195 73 view .LVU2243
 6748 0046 F1E7     		b	.L472
 6749              	.LVL697:
 6750              	.L478:
 6751              	.LCFI97:
 6752              		.cfi_def_cfa_offset 0
 6753              		.cfi_restore 4
 6754              		.cfi_restore 14
3195:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 6755              		.loc 1 3195 73 is_stmt 0 view .LVU2244
 6756 0048 7047     		bx	lr
 6757              	.L484:
 6758 004a 00BF     		.align	2
 6759              	.L483:
ARM GAS  /tmp/ccuUvpuw.s 			page 237


 6760 004c 00000000 		.word	.LANCHOR1
 6761              		.cfi_endproc
 6762              	.LFE25:
 6764              		.section	.text.USBD_EP_TxCmplExt,"ax",%progbits
 6765              		.align	1
 6766              		.global	USBD_EP_TxCmplExt
 6767              		.syntax unified
 6768              		.thumb
 6769              		.thumb_func
 6770              		.fpu fpv4-sp-d16
 6772              	USBD_EP_TxCmplExt:
 6773              	.LVL698:
 6774              	.LFB26:
3222:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_EP     *p_ep;
 6775              		.loc 1 3222 1 is_stmt 1 view -0
 6776              		.cfi_startproc
 6777              		@ args = 0, pretend = 0, frame = 8
 6778              		@ frame_needed = 0, uses_anonymous_args = 0
3223:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_INT08U   ep_phy_nbr;
 6779              		.loc 1 3223 5 view .LVU2246
3224:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_ERR     local_err;
 6780              		.loc 1 3224 5 view .LVU2247
3225:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 6781              		.loc 1 3225 5 view .LVU2248
3229:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 6782              		.loc 1 3229 5 view .LVU2249
3229:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 6783              		.loc 1 3229 8 is_stmt 0 view .LVU2250
 6784 0000 08B3     		cbz	r0, .L491
3222:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_EP     *p_ep;
 6785              		.loc 1 3222 1 view .LVU2251
 6786 0002 10B5     		push	{r4, lr}
 6787              	.LCFI98:
 6788              		.cfi_def_cfa_offset 8
 6789              		.cfi_offset 4, -8
 6790              		.cfi_offset 14, -4
 6791 0004 82B0     		sub	sp, sp, #8
 6792              	.LCFI99:
 6793              		.cfi_def_cfa_offset 16
 6794 0006 0446     		mov	r4, r0
3234:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_ep       = USBD_EP_TblPtrs[p_drv->DevNbr][ep_phy_nbr];
 6795              		.loc 1 3234 5 is_stmt 1 view .LVU2252
3234:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_ep       = USBD_EP_TblPtrs[p_drv->DevNbr][ep_phy_nbr];
 6796              		.loc 1 3234 18 is_stmt 0 view .LVU2253
 6797 0008 01F00F01 		and	r1, r1, #15
 6798              	.LVL699:
3234:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_ep       = USBD_EP_TblPtrs[p_drv->DevNbr][ep_phy_nbr];
 6799              		.loc 1 3234 18 view .LVU2254
 6800 000c 4900     		lsls	r1, r1, #1
3234:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_ep       = USBD_EP_TblPtrs[p_drv->DevNbr][ep_phy_nbr];
 6801              		.loc 1 3234 16 view .LVU2255
 6802 000e 0131     		adds	r1, r1, #1
 6803              	.LVL700:
3235:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 6804              		.loc 1 3235 5 is_stmt 1 view .LVU2256
3235:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 6805              		.loc 1 3235 39 is_stmt 0 view .LVU2257
ARM GAS  /tmp/ccuUvpuw.s 			page 238


 6806 0010 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 6807              	.LVL701:
3235:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 6808              		.loc 1 3235 16 view .LVU2258
 6809 0012 01EB4011 		add	r1, r1, r0, lsl #5
 6810              	.LVL702:
3235:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 6811              		.loc 1 3235 16 view .LVU2259
 6812 0016 0C4B     		ldr	r3, .L496
 6813 0018 53F82110 		ldr	r1, [r3, r1, lsl #2]
 6814              	.LVL703:
3237:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_DBG_STATS_EP_INC(p_drv->DevNbr, p_ep->Ix, TxCmplErrNbr);
 6815              		.loc 1 3237 5 is_stmt 1 view .LVU2260
3237:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_DBG_STATS_EP_INC(p_drv->DevNbr, p_ep->Ix, TxCmplErrNbr);
 6816              		.loc 1 3237 8 is_stmt 0 view .LVU2261
 6817 001c 31B1     		cbz	r1, .L485
3242:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 6818              		.loc 1 3242 62 is_stmt 1 view .LVU2262
3244:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_OS_EP_SignalAbort(p_drv->DevNbr, p_ep->Ix, &local_err);
 6819              		.loc 1 3244 5 view .LVU2263
3244:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_OS_EP_SignalAbort(p_drv->DevNbr, p_ep->Ix, &local_err);
 6820              		.loc 1 3244 13 is_stmt 0 view .LVU2264
 6821 001e 4B78     		ldrb	r3, [r1, #1]	@ zero_extendqisi2
3244:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_OS_EP_SignalAbort(p_drv->DevNbr, p_ep->Ix, &local_err);
 6822              		.loc 1 3244 8 view .LVU2265
 6823 0020 012B     		cmp	r3, #1
 6824 0022 05D0     		beq	.L494
3249:rtos/uC-USB-Device/Source/usbd_ep.c ****                (p_ep->XferState == USBD_XFER_STATE_ASYNC_PARTIAL)) {
 6825              		.loc 1 3249 12 is_stmt 1 view .LVU2266
3249:rtos/uC-USB-Device/Source/usbd_ep.c ****                (p_ep->XferState == USBD_XFER_STATE_ASYNC_PARTIAL)) {
 6826              		.loc 1 3249 59 is_stmt 0 view .LVU2267
 6827 0024 023B     		subs	r3, r3, #2
 6828 0026 DBB2     		uxtb	r3, r3
3249:rtos/uC-USB-Device/Source/usbd_ep.c ****                (p_ep->XferState == USBD_XFER_STATE_ASYNC_PARTIAL)) {
 6829              		.loc 1 3249 15 view .LVU2268
 6830 0028 012B     		cmp	r3, #1
 6831 002a 07D9     		bls	.L495
 6832              	.LVL704:
 6833              	.L485:
3256:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 6834              		.loc 1 3256 1 view .LVU2269
 6835 002c 02B0     		add	sp, sp, #8
 6836              	.LCFI100:
 6837              		.cfi_remember_state
 6838              		.cfi_def_cfa_offset 8
 6839              		@ sp needed
 6840 002e 10BD     		pop	{r4, pc}
 6841              	.LVL705:
 6842              	.L494:
 6843              	.LCFI101:
 6844              		.cfi_restore_state
3245:rtos/uC-USB-Device/Source/usbd_ep.c ****         if (local_err != USBD_ERR_NONE) {
 6845              		.loc 1 3245 9 is_stmt 1 view .LVU2270
 6846 0030 0DF10602 		add	r2, sp, #6
 6847              	.LVL706:
3245:rtos/uC-USB-Device/Source/usbd_ep.c ****         if (local_err != USBD_ERR_NONE) {
 6848              		.loc 1 3245 9 is_stmt 0 view .LVU2271
ARM GAS  /tmp/ccuUvpuw.s 			page 239


 6849 0034 097A     		ldrb	r1, [r1, #8]	@ zero_extendqisi2
 6850              	.LVL707:
3245:rtos/uC-USB-Device/Source/usbd_ep.c ****         if (local_err != USBD_ERR_NONE) {
 6851              		.loc 1 3245 9 view .LVU2272
 6852 0036 FFF7FEFF 		bl	USBD_OS_EP_SignalAbort
 6853              	.LVL708:
3246:rtos/uC-USB-Device/Source/usbd_ep.c ****             USBD_DBG_EP_ERR("USBD_EP_TxCmplExt()", p_ep->Addr, local_err);
 6854              		.loc 1 3246 9 is_stmt 1 view .LVU2273
3247:rtos/uC-USB-Device/Source/usbd_ep.c ****         }
 6855              		.loc 1 3247 74 view .LVU2274
 6856 003a F7E7     		b	.L485
 6857              	.LVL709:
 6858              	.L495:
3251:rtos/uC-USB-Device/Source/usbd_ep.c ****     } else {
 6859              		.loc 1 3251 9 view .LVU2275
 6860 003c 8978     		ldrb	r1, [r1, #2]	@ zero_extendqisi2
 6861              	.LVL710:
3251:rtos/uC-USB-Device/Source/usbd_ep.c ****     } else {
 6862              		.loc 1 3251 9 is_stmt 0 view .LVU2276
 6863 003e 2046     		mov	r0, r4
3251:rtos/uC-USB-Device/Source/usbd_ep.c ****     } else {
 6864              		.loc 1 3251 9 view .LVU2277
 6865 0040 FFF7FEFF 		bl	USBD_EventEP
 6866              	.LVL711:
3253:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_DBG_EP("USBD_EP_TxCmplExt(): incorrect XferState", p_ep->Addr);
 6867              		.loc 1 3253 69 is_stmt 1 view .LVU2278
3254:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 6868              		.loc 1 3254 76 view .LVU2279
 6869 0044 F2E7     		b	.L485
 6870              	.LVL712:
 6871              	.L491:
 6872              	.LCFI102:
 6873              		.cfi_def_cfa_offset 0
 6874              		.cfi_restore 4
 6875              		.cfi_restore 14
3254:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 6876              		.loc 1 3254 76 is_stmt 0 view .LVU2280
 6877 0046 7047     		bx	lr
 6878              	.L497:
 6879              		.align	2
 6880              	.L496:
 6881 0048 00000000 		.word	.LANCHOR1
 6882              		.cfi_endproc
 6883              	.LFE26:
 6885              		.section	.text.USBD_EP_TxZLP,"ax",%progbits
 6886              		.align	1
 6887              		.global	USBD_EP_TxZLP
 6888              		.syntax unified
 6889              		.thumb
 6890              		.thumb_func
 6891              		.fpu fpv4-sp-d16
 6893              	USBD_EP_TxZLP:
 6894              	.LVL713:
 6895              	.LFB27:
3302:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_EP       *p_ep;
 6896              		.loc 1 3302 1 is_stmt 1 view -0
 6897              		.cfi_startproc
ARM GAS  /tmp/ccuUvpuw.s 			page 240


 6898              		@ args = 0, pretend = 0, frame = 8
 6899              		@ frame_needed = 0, uses_anonymous_args = 0
3302:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_EP       *p_ep;
 6900              		.loc 1 3302 1 is_stmt 0 view .LVU2282
 6901 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 6902              	.LCFI103:
 6903              		.cfi_def_cfa_offset 36
 6904              		.cfi_offset 4, -36
 6905              		.cfi_offset 5, -32
 6906              		.cfi_offset 6, -28
 6907              		.cfi_offset 7, -24
 6908              		.cfi_offset 8, -20
 6909              		.cfi_offset 9, -16
 6910              		.cfi_offset 10, -12
 6911              		.cfi_offset 11, -8
 6912              		.cfi_offset 14, -4
 6913 0004 83B0     		sub	sp, sp, #12
 6914              	.LCFI104:
 6915              		.cfi_def_cfa_offset 48
 6916 0006 0746     		mov	r7, r0
 6917 0008 0E46     		mov	r6, r1
 6918 000a 9046     		mov	r8, r2
 6919 000c 1C46     		mov	r4, r3
3303:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_URB      *p_urb;
 6920              		.loc 1 3303 5 is_stmt 1 view .LVU2283
3304:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DRV      *p_drv;
 6921              		.loc 1 3304 5 view .LVU2284
3305:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DRV_API  *p_drv_api;
 6922              		.loc 1 3305 5 view .LVU2285
3306:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_INT08U     ep_phy_nbr;
 6923              		.loc 1 3306 5 view .LVU2286
3307:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_ERR       local_err;
 6924              		.loc 1 3307 5 view .LVU2287
3308:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 6925              		.loc 1 3308 5 view .LVU2288
3311:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_drv == (USBD_DRV *)0) {
 6926              		.loc 1 3311 5 view .LVU2289
3311:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_drv == (USBD_DRV *)0) {
 6927              		.loc 1 3311 13 is_stmt 0 view .LVU2290
 6928 000e FFF7FEFF 		bl	USBD_DrvRefGet
 6929              	.LVL714:
3312:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_DEV_INVALID_NBR;
 6930              		.loc 1 3312 5 is_stmt 1 view .LVU2291
3312:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_DEV_INVALID_NBR;
 6931              		.loc 1 3312 8 is_stmt 0 view .LVU2292
 6932 0012 08B3     		cbz	r0, .L510
 6933 0014 8146     		mov	r9, r0
3317:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_ep       = USBD_EP_TblPtrs[dev_nbr][ep_phy_nbr];
 6934              		.loc 1 3317 5 is_stmt 1 view .LVU2293
3317:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_ep       = USBD_EP_TblPtrs[dev_nbr][ep_phy_nbr];
 6935              		.loc 1 3317 18 is_stmt 0 view .LVU2294
 6936 0016 06F00F03 		and	r3, r6, #15
 6937 001a F509     		lsrs	r5, r6, #7
3317:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_ep       = USBD_EP_TblPtrs[dev_nbr][ep_phy_nbr];
 6938              		.loc 1 3317 16 view .LVU2295
 6939 001c 05EB4303 		add	r3, r5, r3, lsl #1
 6940              	.LVL715:
ARM GAS  /tmp/ccuUvpuw.s 			page 241


3318:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 6941              		.loc 1 3318 5 is_stmt 1 view .LVU2296
3318:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 6942              		.loc 1 3318 16 is_stmt 0 view .LVU2297
 6943 0020 03EB4713 		add	r3, r3, r7, lsl #5
 6944              	.LVL716:
3318:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 6945              		.loc 1 3318 16 view .LVU2298
 6946 0024 3B4A     		ldr	r2, .L514
 6947 0026 52F82350 		ldr	r5, [r2, r3, lsl #2]
 6948              	.LVL717:
3320:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_EP_INVALID_ADDR;
 6949              		.loc 1 3320 5 is_stmt 1 view .LVU2299
3320:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_EP_INVALID_ADDR;
 6950              		.loc 1 3320 8 is_stmt 0 view .LVU2300
 6951 002a C5B1     		cbz	r5, .L511
3325:rtos/uC-USB-Device/Source/usbd_ep.c ****                            p_ep->Ix,
 6952              		.loc 1 3325 5 is_stmt 1 view .LVU2301
 6953 002c 2346     		mov	r3, r4
 6954 002e 0022     		movs	r2, #0
 6955 0030 297A     		ldrb	r1, [r5, #8]	@ zero_extendqisi2
 6956 0032 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 6957              	.LVL718:
3325:rtos/uC-USB-Device/Source/usbd_ep.c ****                            p_ep->Ix,
 6958              		.loc 1 3325 5 is_stmt 0 view .LVU2302
 6959 0034 FFF7FEFF 		bl	USBD_OS_EP_LockAcquire
 6960              	.LVL719:
3329:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 6961              		.loc 1 3329 5 is_stmt 1 view .LVU2303
3329:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 6962              		.loc 1 3329 9 is_stmt 0 view .LVU2304
 6963 0038 2388     		ldrh	r3, [r4]
3329:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 6964              		.loc 1 3329 8 view .LVU2305
 6965 003a 53B9     		cbnz	r3, .L498
3333:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 6966              		.loc 1 3333 60 is_stmt 1 view .LVU2306
3335:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_EP_INVALID_STATE;
 6967              		.loc 1 3335 5 view .LVU2307
3335:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_EP_INVALID_STATE;
 6968              		.loc 1 3335 13 is_stmt 0 view .LVU2308
 6969 003c 2B78     		ldrb	r3, [r5]	@ zero_extendqisi2
3335:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_EP_INVALID_STATE;
 6970              		.loc 1 3335 8 view .LVU2309
 6971 003e 012B     		cmp	r3, #1
 6972 0040 11D0     		beq	.L502
3336:rtos/uC-USB-Device/Source/usbd_ep.c ****         goto lock_release;
 6973              		.loc 1 3336 8 is_stmt 1 view .LVU2310
3336:rtos/uC-USB-Device/Source/usbd_ep.c ****         goto lock_release;
 6974              		.loc 1 3336 15 is_stmt 0 view .LVU2311
 6975 0042 4FF4C973 		mov	r3, #402
 6976 0046 2380     		strh	r3, [r4]	@ movhi
3337:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 6977              		.loc 1 3337 9 is_stmt 1 view .LVU2312
 6978              	.L503:
3390:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 6979              		.loc 1 3390 98 view .LVU2313
ARM GAS  /tmp/ccuUvpuw.s 			page 242


3393:rtos/uC-USB-Device/Source/usbd_ep.c ****                            p_ep->Ix);
 6980              		.loc 1 3393 5 view .LVU2314
 6981 0048 297A     		ldrb	r1, [r5, #8]	@ zero_extendqisi2
 6982 004a 99F80000 		ldrb	r0, [r9]	@ zero_extendqisi2
 6983 004e FFF7FEFF 		bl	USBD_OS_EP_LockRelease
 6984              	.LVL720:
 6985              	.L498:
3395:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 6986              		.loc 1 3395 1 is_stmt 0 view .LVU2315
 6987 0052 03B0     		add	sp, sp, #12
 6988              	.LCFI105:
 6989              		.cfi_remember_state
 6990              		.cfi_def_cfa_offset 36
 6991              		@ sp needed
 6992 0054 BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 6993              	.LVL721:
 6994              	.L510:
 6995              	.LCFI106:
 6996              		.cfi_restore_state
3313:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 6997              		.loc 1 3313 8 is_stmt 1 view .LVU2316
3313:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 6998              		.loc 1 3313 15 is_stmt 0 view .LVU2317
 6999 0058 6523     		movs	r3, #101
 7000 005a 2380     		strh	r3, [r4]	@ movhi
3314:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 7001              		.loc 1 3314 9 is_stmt 1 view .LVU2318
 7002 005c F9E7     		b	.L498
 7003              	.LVL722:
 7004              	.L511:
3321:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 7005              		.loc 1 3321 8 view .LVU2319
3321:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 7006              		.loc 1 3321 15 is_stmt 0 view .LVU2320
 7007 005e 40F29113 		movw	r3, #401
 7008 0062 2380     		strh	r3, [r4]	@ movhi
3322:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 7009              		.loc 1 3322 9 is_stmt 1 view .LVU2321
 7010 0064 F5E7     		b	.L498
 7011              	.LVL723:
 7012              	.L502:
3340:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_EP_INVALID_TYPE;
 7013              		.loc 1 3340 5 view .LVU2322
3340:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_EP_INVALID_TYPE;
 7014              		.loc 1 3340 14 is_stmt 0 view .LVU2323
 7015 0066 EB78     		ldrb	r3, [r5, #3]	@ zero_extendqisi2
3340:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_EP_INVALID_TYPE;
 7016              		.loc 1 3340 8 view .LVU2324
 7017 0068 03F00303 		and	r3, r3, #3
 7018 006c 012B     		cmp	r3, #1
 7019 006e 05D0     		beq	.L512
3345:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_EP_IO_PENDING;
 7020              		.loc 1 3345 5 is_stmt 1 view .LVU2325
3345:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_EP_IO_PENDING;
 7021              		.loc 1 3345 13 is_stmt 0 view .LVU2326
 7022 0070 6B78     		ldrb	r3, [r5, #1]	@ zero_extendqisi2
3345:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_EP_IO_PENDING;
ARM GAS  /tmp/ccuUvpuw.s 			page 243


 7023              		.loc 1 3345 8 view .LVU2327
 7024 0072 3BB1     		cbz	r3, .L505
3346:rtos/uC-USB-Device/Source/usbd_ep.c ****         goto lock_release;
 7025              		.loc 1 3346 8 is_stmt 1 view .LVU2328
3346:rtos/uC-USB-Device/Source/usbd_ep.c ****         goto lock_release;
 7026              		.loc 1 3346 15 is_stmt 0 view .LVU2329
 7027 0074 40F29713 		movw	r3, #407
 7028 0078 2380     		strh	r3, [r4]	@ movhi
3347:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 7029              		.loc 1 3347 9 is_stmt 1 view .LVU2330
 7030 007a E5E7     		b	.L503
 7031              	.L512:
3341:rtos/uC-USB-Device/Source/usbd_ep.c ****         goto lock_release;
 7032              		.loc 1 3341 8 view .LVU2331
3341:rtos/uC-USB-Device/Source/usbd_ep.c ****         goto lock_release;
 7033              		.loc 1 3341 15 is_stmt 0 view .LVU2332
 7034 007c 40F29313 		movw	r3, #403
 7035 0080 2380     		strh	r3, [r4]	@ movhi
3342:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 7036              		.loc 1 3342 9 is_stmt 1 view .LVU2333
 7037 0082 E1E7     		b	.L503
 7038              	.L505:
3350:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (*p_err != USBD_ERR_NONE) {
 7039              		.loc 1 3350 5 view .LVU2334
3350:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (*p_err != USBD_ERR_NONE) {
 7040              		.loc 1 3350 13 is_stmt 0 view .LVU2335
 7041 0084 2246     		mov	r2, r4
 7042 0086 2946     		mov	r1, r5
 7043 0088 3846     		mov	r0, r7
 7044 008a FFF7FEFF 		bl	USBD_URB_Get
 7045              	.LVL724:
 7046 008e 8246     		mov	r10, r0
 7047              	.LVL725:
3351:rtos/uC-USB-Device/Source/usbd_ep.c ****         goto lock_release;
 7048              		.loc 1 3351 5 is_stmt 1 view .LVU2336
3351:rtos/uC-USB-Device/Source/usbd_ep.c ****         goto lock_release;
 7049              		.loc 1 3351 9 is_stmt 0 view .LVU2337
 7050 0090 2388     		ldrh	r3, [r4]
3351:rtos/uC-USB-Device/Source/usbd_ep.c ****         goto lock_release;
 7051              		.loc 1 3351 8 view .LVU2338
 7052 0092 002B     		cmp	r3, #0
 7053 0094 D8D1     		bne	.L503
3355:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_ep->XferState = USBD_XFER_STATE_SYNC;                     /* Set XferState before submitting 
 7054              		.loc 1 3355 5 is_stmt 1 view .LVU2339
3355:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_ep->XferState = USBD_XFER_STATE_SYNC;                     /* Set XferState before submitting 
 7055              		.loc 1 3355 21 is_stmt 0 view .LVU2340
 7056 0096 0123     		movs	r3, #1
 7057 0098 4374     		strb	r3, [r0, #17]
3356:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 7058              		.loc 1 3356 5 is_stmt 1 view .LVU2341
3356:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 7059              		.loc 1 3356 21 is_stmt 0 view .LVU2342
 7060 009a 6B70     		strb	r3, [r5, #1]
3358:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 7061              		.loc 1 3358 5 is_stmt 1 view .LVU2343
 7062 009c 0146     		mov	r1, r0
 7063 009e 2846     		mov	r0, r5
ARM GAS  /tmp/ccuUvpuw.s 			page 244


 7064              	.LVL726:
3358:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 7065              		.loc 1 3358 5 is_stmt 0 view .LVU2344
 7066 00a0 FFF7FEFF 		bl	USBD_URB_Queue
 7067              	.LVL727:
3360:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 7068              		.loc 1 3360 5 is_stmt 1 view .LVU2345
3360:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 7069              		.loc 1 3360 15 is_stmt 0 view .LVU2346
 7070 00a4 D9F804B0 		ldr	fp, [r9, #4]
 7071              	.LVL728:
3362:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 7072              		.loc 1 3362 65 is_stmt 1 view .LVU2347
3364:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (*p_err == USBD_ERR_NONE) {
 7073              		.loc 1 3364 5 view .LVU2348
3364:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (*p_err == USBD_ERR_NONE) {
 7074              		.loc 1 3364 14 is_stmt 0 view .LVU2349
 7075 00a8 DBF83C30 		ldr	r3, [fp, #60]
3364:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (*p_err == USBD_ERR_NONE) {
 7076              		.loc 1 3364 5 view .LVU2350
 7077 00ac 2246     		mov	r2, r4
 7078 00ae 3146     		mov	r1, r6
 7079 00b0 4846     		mov	r0, r9
 7080 00b2 9847     		blx	r3
 7081              	.LVL729:
3365:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_DBG_STATS_EP_INC(p_drv->DevNbr, p_ep->Ix, DrvTxZLP_SuccessNbr);
 7082              		.loc 1 3365 5 is_stmt 1 view .LVU2351
3365:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_DBG_STATS_EP_INC(p_drv->DevNbr, p_ep->Ix, DrvTxZLP_SuccessNbr);
 7083              		.loc 1 3365 9 is_stmt 0 view .LVU2352
 7084 00b4 2388     		ldrh	r3, [r4]
3365:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_DBG_STATS_EP_INC(p_drv->DevNbr, p_ep->Ix, DrvTxZLP_SuccessNbr);
 7085              		.loc 1 3365 8 view .LVU2353
 7086 00b6 43B1     		cbz	r3, .L513
 7087              	.L506:
3382:rtos/uC-USB-Device/Source/usbd_ep.c ****         }
 7088              		.loc 1 3382 80 is_stmt 1 view .LVU2354
3386:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 7089              		.loc 1 3386 5 view .LVU2355
 7090 00b8 2846     		mov	r0, r5
 7091 00ba FFF7FEFF 		bl	USBD_URB_Dequeue
 7092              	.LVL730:
3388:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 7093              		.loc 1 3388 5 view .LVU2356
 7094 00be 5246     		mov	r2, r10
 7095 00c0 2946     		mov	r1, r5
 7096 00c2 3846     		mov	r0, r7
 7097 00c4 FFF7FEFF 		bl	USBD_URB_Free
 7098              	.LVL731:
 7099 00c8 BEE7     		b	.L503
 7100              	.L513:
3366:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 7101              		.loc 1 3366 76 view .LVU2357
3368:rtos/uC-USB-Device/Source/usbd_ep.c ****                                p_ep->Ix);
 7102              		.loc 1 3368 9 view .LVU2358
 7103 00ca 297A     		ldrb	r1, [r5, #8]	@ zero_extendqisi2
 7104 00cc 99F80000 		ldrb	r0, [r9]	@ zero_extendqisi2
 7105 00d0 FFF7FEFF 		bl	USBD_OS_EP_LockRelease
ARM GAS  /tmp/ccuUvpuw.s 			page 245


 7106              	.LVL732:
3371:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 7107              		.loc 1 3371 9 view .LVU2359
 7108 00d4 2346     		mov	r3, r4
 7109 00d6 4246     		mov	r2, r8
 7110 00d8 297A     		ldrb	r1, [r5, #8]	@ zero_extendqisi2
 7111 00da 3846     		mov	r0, r7
 7112 00dc FFF7FEFF 		bl	USBD_OS_EP_SignalPend
 7113              	.LVL733:
3373:rtos/uC-USB-Device/Source/usbd_ep.c ****                                p_ep->Ix,
 7114              		.loc 1 3373 9 view .LVU2360
 7115 00e0 0DF10603 		add	r3, sp, #6
 7116 00e4 0022     		movs	r2, #0
 7117 00e6 297A     		ldrb	r1, [r5, #8]	@ zero_extendqisi2
 7118 00e8 99F80000 		ldrb	r0, [r9]	@ zero_extendqisi2
 7119 00ec FFF7FEFF 		bl	USBD_OS_EP_LockAcquire
 7120              	.LVL734:
3377:rtos/uC-USB-Device/Source/usbd_ep.c ****            *p_err = USBD_ERR_OS_FAIL;
 7121              		.loc 1 3377 9 view .LVU2361
3377:rtos/uC-USB-Device/Source/usbd_ep.c ****            *p_err = USBD_ERR_OS_FAIL;
 7122              		.loc 1 3377 23 is_stmt 0 view .LVU2362
 7123 00f0 BDF80630 		ldrh	r3, [sp, #6]
3377:rtos/uC-USB-Device/Source/usbd_ep.c ****            *p_err = USBD_ERR_OS_FAIL;
 7124              		.loc 1 3377 12 view .LVU2363
 7125 00f4 1BB1     		cbz	r3, .L507
3378:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 7126              		.loc 1 3378 12 is_stmt 1 view .LVU2364
3378:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 7127              		.loc 1 3378 19 is_stmt 0 view .LVU2365
 7128 00f6 4FF4FB73 		mov	r3, #502
 7129 00fa 2380     		strh	r3, [r4]	@ movhi
 7130 00fc DCE7     		b	.L506
 7131              	.L507:
3380:rtos/uC-USB-Device/Source/usbd_ep.c ****             p_drv_api->EP_Abort(p_drv, ep_addr);
 7132              		.loc 1 3380 16 is_stmt 1 view .LVU2366
3380:rtos/uC-USB-Device/Source/usbd_ep.c ****             p_drv_api->EP_Abort(p_drv, ep_addr);
 7133              		.loc 1 3380 20 is_stmt 0 view .LVU2367
 7134 00fe 2288     		ldrh	r2, [r4]
3380:rtos/uC-USB-Device/Source/usbd_ep.c ****             p_drv_api->EP_Abort(p_drv, ep_addr);
 7135              		.loc 1 3380 19 view .LVU2368
 7136 0100 40F2F713 		movw	r3, #503
 7137 0104 9A42     		cmp	r2, r3
 7138 0106 D7D1     		bne	.L506
3381:rtos/uC-USB-Device/Source/usbd_ep.c ****             USBD_DBG_STATS_EP_INC(p_drv->DevNbr, p_ep->Ix, TxSyncTimeoutErrNbr);
 7139              		.loc 1 3381 13 is_stmt 1 view .LVU2369
3381:rtos/uC-USB-Device/Source/usbd_ep.c ****             USBD_DBG_STATS_EP_INC(p_drv->DevNbr, p_ep->Ix, TxSyncTimeoutErrNbr);
 7140              		.loc 1 3381 22 is_stmt 0 view .LVU2370
 7141 0108 DBF84030 		ldr	r3, [fp, #64]
3381:rtos/uC-USB-Device/Source/usbd_ep.c ****             USBD_DBG_STATS_EP_INC(p_drv->DevNbr, p_ep->Ix, TxSyncTimeoutErrNbr);
 7142              		.loc 1 3381 13 view .LVU2371
 7143 010c 3146     		mov	r1, r6
 7144 010e 4846     		mov	r0, r9
 7145 0110 9847     		blx	r3
 7146              	.LVL735:
 7147 0112 D1E7     		b	.L506
 7148              	.L515:
 7149              		.align	2
ARM GAS  /tmp/ccuUvpuw.s 			page 246


 7150              	.L514:
 7151 0114 00000000 		.word	.LANCHOR1
 7152              		.cfi_endproc
 7153              	.LFE27:
 7155              		.section	.text.USBD_CtrlTxStatus,"ax",%progbits
 7156              		.align	1
 7157              		.global	USBD_CtrlTxStatus
 7158              		.syntax unified
 7159              		.thumb
 7160              		.thumb_func
 7161              		.fpu fpv4-sp-d16
 7163              	USBD_CtrlTxStatus:
 7164              	.LVL736:
 7165              	.LFB8:
1662:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DEV_STATE  state;
 7166              		.loc 1 1662 1 is_stmt 1 view -0
 7167              		.cfi_startproc
 7168              		@ args = 0, pretend = 0, frame = 0
 7169              		@ frame_needed = 0, uses_anonymous_args = 0
1662:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DEV_STATE  state;
 7170              		.loc 1 1662 1 is_stmt 0 view .LVU2373
 7171 0000 70B5     		push	{r4, r5, r6, lr}
 7172              	.LCFI107:
 7173              		.cfi_def_cfa_offset 16
 7174              		.cfi_offset 4, -16
 7175              		.cfi_offset 5, -12
 7176              		.cfi_offset 6, -8
 7177              		.cfi_offset 14, -4
 7178 0002 0546     		mov	r5, r0
 7179 0004 0E46     		mov	r6, r1
 7180 0006 1446     		mov	r4, r2
1663:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 7181              		.loc 1 1663 5 is_stmt 1 view .LVU2374
1666:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 7182              		.loc 1 1666 57 view .LVU2375
1668:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (*p_err != USBD_ERR_NONE) {
 7183              		.loc 1 1668 5 view .LVU2376
1668:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (*p_err != USBD_ERR_NONE) {
 7184              		.loc 1 1668 13 is_stmt 0 view .LVU2377
 7185 0008 1146     		mov	r1, r2
 7186              	.LVL737:
1668:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (*p_err != USBD_ERR_NONE) {
 7187              		.loc 1 1668 13 view .LVU2378
 7188 000a FFF7FEFF 		bl	USBD_DevStateGet
 7189              	.LVL738:
1669:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 7190              		.loc 1 1669 5 is_stmt 1 view .LVU2379
1669:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 7191              		.loc 1 1669 9 is_stmt 0 view .LVU2380
 7192 000e 2388     		ldrh	r3, [r4]
1669:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 7193              		.loc 1 1669 8 view .LVU2381
 7194 0010 2BB9     		cbnz	r3, .L516
1673:rtos/uC-USB-Device/Source/usbd_ep.c ****         (state != USBD_DEV_STATE_ADDRESSED)  &&
 7195              		.loc 1 1673 5 is_stmt 1 view .LVU2382
1674:rtos/uC-USB-Device/Source/usbd_ep.c ****         (state != USBD_DEV_STATE_CONFIGURED)) {
 7196              		.loc 1 1674 46 is_stmt 0 view .LVU2383
ARM GAS  /tmp/ccuUvpuw.s 			page 247


 7197 0012 0338     		subs	r0, r0, #3
 7198              	.LVL739:
1674:rtos/uC-USB-Device/Source/usbd_ep.c ****         (state != USBD_DEV_STATE_CONFIGURED)) {
 7199              		.loc 1 1674 46 view .LVU2384
 7200 0014 C3B2     		uxtb	r3, r0
1673:rtos/uC-USB-Device/Source/usbd_ep.c ****         (state != USBD_DEV_STATE_ADDRESSED)  &&
 7201              		.loc 1 1673 8 view .LVU2385
 7202 0016 022B     		cmp	r3, #2
 7203 0018 02D9     		bls	.L518
1676:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 7204              		.loc 1 1676 8 is_stmt 1 view .LVU2386
1676:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 7205              		.loc 1 1676 16 is_stmt 0 view .LVU2387
 7206 001a 6623     		movs	r3, #102
 7207 001c 2380     		strh	r3, [r4]	@ movhi
1677:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 7208              		.loc 1 1677 9 is_stmt 1 view .LVU2388
 7209              	.L516:
1685:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 7210              		.loc 1 1685 1 is_stmt 0 view .LVU2389
 7211 001e 70BD     		pop	{r4, r5, r6, pc}
 7212              	.LVL740:
 7213              	.L518:
1680:rtos/uC-USB-Device/Source/usbd_ep.c ****                   USBD_EP_ADDR_CTRL_IN,
 7214              		.loc 1 1680 5 is_stmt 1 view .LVU2390
 7215 0020 2346     		mov	r3, r4
 7216 0022 3246     		mov	r2, r6
 7217 0024 8021     		movs	r1, #128
 7218 0026 2846     		mov	r0, r5
 7219 0028 FFF7FEFF 		bl	USBD_EP_TxZLP
 7220              	.LVL741:
1684:rtos/uC-USB-Device/Source/usbd_ep.c **** }
 7221              		.loc 1 1684 95 view .LVU2391
 7222 002c F7E7     		b	.L516
 7223              		.cfi_endproc
 7224              	.LFE8:
 7226              		.section	.text.USBD_EP_RxZLP,"ax",%progbits
 7227              		.align	1
 7228              		.global	USBD_EP_RxZLP
 7229              		.syntax unified
 7230              		.thumb
 7231              		.thumb_func
 7232              		.fpu fpv4-sp-d16
 7234              	USBD_EP_RxZLP:
 7235              	.LVL742:
 7236              	.LFB28:
3444:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_EP       *p_ep;
 7237              		.loc 1 3444 1 view -0
 7238              		.cfi_startproc
 7239              		@ args = 0, pretend = 0, frame = 16
 7240              		@ frame_needed = 0, uses_anonymous_args = 0
3444:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_EP       *p_ep;
 7241              		.loc 1 3444 1 is_stmt 0 view .LVU2393
 7242 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 7243              	.LCFI108:
 7244              		.cfi_def_cfa_offset 36
 7245              		.cfi_offset 4, -36
ARM GAS  /tmp/ccuUvpuw.s 			page 248


 7246              		.cfi_offset 5, -32
 7247              		.cfi_offset 6, -28
 7248              		.cfi_offset 7, -24
 7249              		.cfi_offset 8, -20
 7250              		.cfi_offset 9, -16
 7251              		.cfi_offset 10, -12
 7252              		.cfi_offset 11, -8
 7253              		.cfi_offset 14, -4
 7254 0004 87B0     		sub	sp, sp, #28
 7255              	.LCFI109:
 7256              		.cfi_def_cfa_offset 64
 7257 0006 0390     		str	r0, [sp, #12]
 7258 0008 0D46     		mov	r5, r1
 7259 000a 9046     		mov	r8, r2
 7260 000c 1C46     		mov	r4, r3
3445:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_URB      *p_urb;
 7261              		.loc 1 3445 5 is_stmt 1 view .LVU2394
3446:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DRV      *p_drv;
 7262              		.loc 1 3446 5 view .LVU2395
3447:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DRV_API  *p_drv_api;
 7263              		.loc 1 3447 5 view .LVU2396
3448:rtos/uC-USB-Device/Source/usbd_ep.c ****     CPU_INT08U     ep_phy_nbr;
 7264              		.loc 1 3448 5 view .LVU2397
3449:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_ERR       local_err;
 7265              		.loc 1 3449 5 view .LVU2398
3450:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 7266              		.loc 1 3450 5 view .LVU2399
3453:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_drv == (USBD_DRV *)0) {
 7267              		.loc 1 3453 5 view .LVU2400
3453:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (p_drv == (USBD_DRV *)0) {
 7268              		.loc 1 3453 13 is_stmt 0 view .LVU2401
 7269 000e FFF7FEFF 		bl	USBD_DrvRefGet
 7270              	.LVL743:
3454:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_DEV_INVALID_NBR;
 7271              		.loc 1 3454 5 is_stmt 1 view .LVU2402
3454:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_DEV_INVALID_NBR;
 7272              		.loc 1 3454 8 is_stmt 0 view .LVU2403
 7273 0012 10B3     		cbz	r0, .L533
 7274 0014 8146     		mov	r9, r0
3459:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_ep       = USBD_EP_TblPtrs[dev_nbr][ep_phy_nbr];
 7275              		.loc 1 3459 5 is_stmt 1 view .LVU2404
3459:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_ep       = USBD_EP_TblPtrs[dev_nbr][ep_phy_nbr];
 7276              		.loc 1 3459 18 is_stmt 0 view .LVU2405
 7277 0016 05F00F03 		and	r3, r5, #15
 7278 001a EA09     		lsrs	r2, r5, #7
3459:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_ep       = USBD_EP_TblPtrs[dev_nbr][ep_phy_nbr];
 7279              		.loc 1 3459 16 view .LVU2406
 7280 001c 02EB4303 		add	r3, r2, r3, lsl #1
 7281              	.LVL744:
3460:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 7282              		.loc 1 3460 5 is_stmt 1 view .LVU2407
3460:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 7283              		.loc 1 3460 16 is_stmt 0 view .LVU2408
 7284 0020 039A     		ldr	r2, [sp, #12]
 7285 0022 03EB4213 		add	r3, r3, r2, lsl #5
 7286              	.LVL745:
3460:rtos/uC-USB-Device/Source/usbd_ep.c **** 
ARM GAS  /tmp/ccuUvpuw.s 			page 249


 7287              		.loc 1 3460 16 view .LVU2409
 7288 0026 434A     		ldr	r2, .L538
 7289 0028 52F82370 		ldr	r7, [r2, r3, lsl #2]
 7290              	.LVL746:
3462:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_EP_INVALID_ADDR;
 7291              		.loc 1 3462 5 is_stmt 1 view .LVU2410
3462:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_EP_INVALID_ADDR;
 7292              		.loc 1 3462 8 is_stmt 0 view .LVU2411
 7293 002c C7B1     		cbz	r7, .L534
3467:rtos/uC-USB-Device/Source/usbd_ep.c ****                            p_ep->Ix,
 7294              		.loc 1 3467 5 is_stmt 1 view .LVU2412
 7295 002e 2346     		mov	r3, r4
 7296 0030 0022     		movs	r2, #0
 7297 0032 397A     		ldrb	r1, [r7, #8]	@ zero_extendqisi2
 7298 0034 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
 7299              	.LVL747:
3467:rtos/uC-USB-Device/Source/usbd_ep.c ****                            p_ep->Ix,
 7300              		.loc 1 3467 5 is_stmt 0 view .LVU2413
 7301 0036 FFF7FEFF 		bl	USBD_OS_EP_LockAcquire
 7302              	.LVL748:
3471:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 7303              		.loc 1 3471 5 is_stmt 1 view .LVU2414
3471:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 7304              		.loc 1 3471 9 is_stmt 0 view .LVU2415
 7305 003a 2388     		ldrh	r3, [r4]
3471:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 7306              		.loc 1 3471 8 view .LVU2416
 7307 003c 53B9     		cbnz	r3, .L520
3475:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 7308              		.loc 1 3475 60 is_stmt 1 view .LVU2417
3477:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_EP_INVALID_STATE;
 7309              		.loc 1 3477 5 view .LVU2418
3477:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_EP_INVALID_STATE;
 7310              		.loc 1 3477 13 is_stmt 0 view .LVU2419
 7311 003e 3B78     		ldrb	r3, [r7]	@ zero_extendqisi2
3477:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_EP_INVALID_STATE;
 7312              		.loc 1 3477 8 view .LVU2420
 7313 0040 012B     		cmp	r3, #1
 7314 0042 11D0     		beq	.L524
3478:rtos/uC-USB-Device/Source/usbd_ep.c ****         goto lock_release;
 7315              		.loc 1 3478 8 is_stmt 1 view .LVU2421
3478:rtos/uC-USB-Device/Source/usbd_ep.c ****         goto lock_release;
 7316              		.loc 1 3478 15 is_stmt 0 view .LVU2422
 7317 0044 4FF4C973 		mov	r3, #402
 7318 0048 2380     		strh	r3, [r4]	@ movhi
3479:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 7319              		.loc 1 3479 9 is_stmt 1 view .LVU2423
 7320              	.L525:
3544:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 7321              		.loc 1 3544 98 view .LVU2424
3547:rtos/uC-USB-Device/Source/usbd_ep.c ****                            p_ep->Ix);
 7322              		.loc 1 3547 5 view .LVU2425
 7323 004a 397A     		ldrb	r1, [r7, #8]	@ zero_extendqisi2
 7324 004c 99F80000 		ldrb	r0, [r9]	@ zero_extendqisi2
 7325 0050 FFF7FEFF 		bl	USBD_OS_EP_LockRelease
 7326              	.LVL749:
 7327              	.L520:
ARM GAS  /tmp/ccuUvpuw.s 			page 250


3549:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 7328              		.loc 1 3549 1 is_stmt 0 view .LVU2426
 7329 0054 07B0     		add	sp, sp, #28
 7330              	.LCFI110:
 7331              		.cfi_remember_state
 7332              		.cfi_def_cfa_offset 36
 7333              		@ sp needed
 7334 0056 BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 7335              	.LVL750:
 7336              	.L533:
 7337              	.LCFI111:
 7338              		.cfi_restore_state
3455:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 7339              		.loc 1 3455 8 is_stmt 1 view .LVU2427
3455:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 7340              		.loc 1 3455 15 is_stmt 0 view .LVU2428
 7341 005a 6523     		movs	r3, #101
 7342 005c 2380     		strh	r3, [r4]	@ movhi
3456:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 7343              		.loc 1 3456 9 is_stmt 1 view .LVU2429
 7344 005e F9E7     		b	.L520
 7345              	.LVL751:
 7346              	.L534:
3463:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 7347              		.loc 1 3463 8 view .LVU2430
3463:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 7348              		.loc 1 3463 15 is_stmt 0 view .LVU2431
 7349 0060 40F29113 		movw	r3, #401
 7350 0064 2380     		strh	r3, [r4]	@ movhi
3464:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 7351              		.loc 1 3464 9 is_stmt 1 view .LVU2432
 7352 0066 F5E7     		b	.L520
 7353              	.LVL752:
 7354              	.L524:
3482:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_EP_INVALID_TYPE;
 7355              		.loc 1 3482 5 view .LVU2433
3482:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_EP_INVALID_TYPE;
 7356              		.loc 1 3482 14 is_stmt 0 view .LVU2434
 7357 0068 FB78     		ldrb	r3, [r7, #3]	@ zero_extendqisi2
3482:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_EP_INVALID_TYPE;
 7358              		.loc 1 3482 8 view .LVU2435
 7359 006a 03F00303 		and	r3, r3, #3
 7360 006e 012B     		cmp	r3, #1
 7361 0070 05D0     		beq	.L535
3487:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_EP_IO_PENDING;
 7362              		.loc 1 3487 5 is_stmt 1 view .LVU2436
3487:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_EP_IO_PENDING;
 7363              		.loc 1 3487 13 is_stmt 0 view .LVU2437
 7364 0072 7B78     		ldrb	r3, [r7, #1]	@ zero_extendqisi2
3487:rtos/uC-USB-Device/Source/usbd_ep.c ****        *p_err = USBD_ERR_EP_IO_PENDING;
 7365              		.loc 1 3487 8 view .LVU2438
 7366 0074 3BB1     		cbz	r3, .L527
3488:rtos/uC-USB-Device/Source/usbd_ep.c ****         goto lock_release;
 7367              		.loc 1 3488 8 is_stmt 1 view .LVU2439
3488:rtos/uC-USB-Device/Source/usbd_ep.c ****         goto lock_release;
 7368              		.loc 1 3488 15 is_stmt 0 view .LVU2440
 7369 0076 40F29713 		movw	r3, #407
ARM GAS  /tmp/ccuUvpuw.s 			page 251


 7370 007a 2380     		strh	r3, [r4]	@ movhi
3489:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 7371              		.loc 1 3489 9 is_stmt 1 view .LVU2441
 7372 007c E5E7     		b	.L525
 7373              	.L535:
3483:rtos/uC-USB-Device/Source/usbd_ep.c ****         goto lock_release;
 7374              		.loc 1 3483 8 view .LVU2442
3483:rtos/uC-USB-Device/Source/usbd_ep.c ****         goto lock_release;
 7375              		.loc 1 3483 15 is_stmt 0 view .LVU2443
 7376 007e 40F29313 		movw	r3, #403
 7377 0082 2380     		strh	r3, [r4]	@ movhi
3484:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 7378              		.loc 1 3484 9 is_stmt 1 view .LVU2444
 7379 0084 E1E7     		b	.L525
 7380              	.L527:
3492:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (*p_err != USBD_ERR_NONE) {
 7381              		.loc 1 3492 5 view .LVU2445
3492:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (*p_err != USBD_ERR_NONE) {
 7382              		.loc 1 3492 13 is_stmt 0 view .LVU2446
 7383 0086 2246     		mov	r2, r4
 7384 0088 3946     		mov	r1, r7
 7385 008a 0398     		ldr	r0, [sp, #12]
 7386 008c FFF7FEFF 		bl	USBD_URB_Get
 7387              	.LVL753:
 7388 0090 8246     		mov	r10, r0
 7389              	.LVL754:
3493:rtos/uC-USB-Device/Source/usbd_ep.c ****         goto lock_release;
 7390              		.loc 1 3493 5 is_stmt 1 view .LVU2447
3493:rtos/uC-USB-Device/Source/usbd_ep.c ****         goto lock_release;
 7391              		.loc 1 3493 9 is_stmt 0 view .LVU2448
 7392 0092 2388     		ldrh	r3, [r4]
3493:rtos/uC-USB-Device/Source/usbd_ep.c ****         goto lock_release;
 7393              		.loc 1 3493 8 view .LVU2449
 7394 0094 002B     		cmp	r3, #0
 7395 0096 D8D1     		bne	.L525
3497:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_ep->XferState = USBD_XFER_STATE_SYNC;                     /* Set XferState before submitting 
 7396              		.loc 1 3497 5 is_stmt 1 view .LVU2450
3497:rtos/uC-USB-Device/Source/usbd_ep.c ****     p_ep->XferState = USBD_XFER_STATE_SYNC;                     /* Set XferState before submitting 
 7397              		.loc 1 3497 21 is_stmt 0 view .LVU2451
 7398 0098 0123     		movs	r3, #1
 7399 009a 4374     		strb	r3, [r0, #17]
3498:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 7400              		.loc 1 3498 5 is_stmt 1 view .LVU2452
3498:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 7401              		.loc 1 3498 21 is_stmt 0 view .LVU2453
 7402 009c 7B70     		strb	r3, [r7, #1]
3500:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 7403              		.loc 1 3500 5 is_stmt 1 view .LVU2454
 7404 009e 0146     		mov	r1, r0
 7405 00a0 3846     		mov	r0, r7
 7406              	.LVL755:
3500:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 7407              		.loc 1 3500 5 is_stmt 0 view .LVU2455
 7408 00a2 FFF7FEFF 		bl	USBD_URB_Queue
 7409              	.LVL756:
3502:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DBG_STATS_EP_INC(dev_nbr, p_ep->Ix, DrvRxStartNbr);
 7410              		.loc 1 3502 5 is_stmt 1 view .LVU2456
ARM GAS  /tmp/ccuUvpuw.s 			page 252


3502:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DBG_STATS_EP_INC(dev_nbr, p_ep->Ix, DrvRxStartNbr);
 7411              		.loc 1 3502 15 is_stmt 0 view .LVU2457
 7412 00a6 D9F804B0 		ldr	fp, [r9, #4]
 7413              	.LVL757:
3503:rtos/uC-USB-Device/Source/usbd_ep.c ****     (void)p_drv_api->EP_RxStart(              p_drv,
 7414              		.loc 1 3503 60 is_stmt 1 view .LVU2458
3504:rtos/uC-USB-Device/Source/usbd_ep.c ****                                               ep_addr,
 7415              		.loc 1 3504 5 view .LVU2459
3504:rtos/uC-USB-Device/Source/usbd_ep.c ****                                               ep_addr,
 7416              		.loc 1 3504 20 is_stmt 0 view .LVU2460
 7417 00aa DBF82830 		ldr	r3, [fp, #40]
 7418 00ae 1E46     		mov	r6, r3
3504:rtos/uC-USB-Device/Source/usbd_ep.c ****                                               ep_addr,
 7419              		.loc 1 3504 11 view .LVU2461
 7420 00b0 0094     		str	r4, [sp]
 7421 00b2 0023     		movs	r3, #0
 7422 00b4 1A46     		mov	r2, r3
 7423 00b6 2946     		mov	r1, r5
 7424 00b8 4846     		mov	r0, r9
 7425 00ba B047     		blx	r6
 7426              	.LVL758:
3509:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_DBG_STATS_EP_INC(dev_nbr, p_ep->Ix, DrvRxStartSuccessNbr);
 7427              		.loc 1 3509 5 is_stmt 1 view .LVU2462
3509:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_DBG_STATS_EP_INC(dev_nbr, p_ep->Ix, DrvRxStartSuccessNbr);
 7428              		.loc 1 3509 9 is_stmt 0 view .LVU2463
 7429 00bc 2388     		ldrh	r3, [r4]
3509:rtos/uC-USB-Device/Source/usbd_ep.c ****         USBD_DBG_STATS_EP_INC(dev_nbr, p_ep->Ix, DrvRxStartSuccessNbr);
 7430              		.loc 1 3509 8 view .LVU2464
 7431 00be 43B1     		cbz	r3, .L536
 7432              	.L528:
3540:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 7433              		.loc 1 3540 5 is_stmt 1 view .LVU2465
 7434 00c0 3846     		mov	r0, r7
 7435 00c2 FFF7FEFF 		bl	USBD_URB_Dequeue
 7436              	.LVL759:
3542:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 7437              		.loc 1 3542 5 view .LVU2466
 7438 00c6 5246     		mov	r2, r10
 7439 00c8 3946     		mov	r1, r7
 7440 00ca 0398     		ldr	r0, [sp, #12]
 7441 00cc FFF7FEFF 		bl	USBD_URB_Free
 7442              	.LVL760:
 7443 00d0 BBE7     		b	.L525
 7444              	.L536:
3510:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 7445              		.loc 1 3510 71 view .LVU2467
3512:rtos/uC-USB-Device/Source/usbd_ep.c ****                                p_ep->Ix);
 7446              		.loc 1 3512 9 view .LVU2468
 7447 00d2 397A     		ldrb	r1, [r7, #8]	@ zero_extendqisi2
 7448 00d4 99F80000 		ldrb	r0, [r9]	@ zero_extendqisi2
 7449 00d8 FFF7FEFF 		bl	USBD_OS_EP_LockRelease
 7450              	.LVL761:
3515:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 7451              		.loc 1 3515 9 view .LVU2469
 7452 00dc 2346     		mov	r3, r4
 7453 00de 4246     		mov	r2, r8
 7454 00e0 397A     		ldrb	r1, [r7, #8]	@ zero_extendqisi2
ARM GAS  /tmp/ccuUvpuw.s 			page 253


 7455 00e2 0398     		ldr	r0, [sp, #12]
 7456 00e4 FFF7FEFF 		bl	USBD_OS_EP_SignalPend
 7457              	.LVL762:
3517:rtos/uC-USB-Device/Source/usbd_ep.c ****                                p_ep->Ix,
 7458              		.loc 1 3517 9 view .LVU2470
 7459 00e8 0DF11603 		add	r3, sp, #22
 7460 00ec 0022     		movs	r2, #0
 7461 00ee 397A     		ldrb	r1, [r7, #8]	@ zero_extendqisi2
 7462 00f0 99F80000 		ldrb	r0, [r9]	@ zero_extendqisi2
 7463 00f4 FFF7FEFF 		bl	USBD_OS_EP_LockAcquire
 7464              	.LVL763:
3521:rtos/uC-USB-Device/Source/usbd_ep.c ****             (local_err == USBD_ERR_NONE)) {
 7465              		.loc 1 3521 9 view .LVU2471
3521:rtos/uC-USB-Device/Source/usbd_ep.c ****             (local_err == USBD_ERR_NONE)) {
 7466              		.loc 1 3521 14 is_stmt 0 view .LVU2472
 7467 00f8 2388     		ldrh	r3, [r4]
3521:rtos/uC-USB-Device/Source/usbd_ep.c ****             (local_err == USBD_ERR_NONE)) {
 7468              		.loc 1 3521 12 view .LVU2473
 7469 00fa 4BB9     		cbnz	r3, .L529
3522:rtos/uC-USB-Device/Source/usbd_ep.c ****             USBD_DBG_STATS_EP_INC(dev_nbr, p_ep->Ix, DrvRxZLP_Nbr);
 7470              		.loc 1 3522 24 discriminator 1 view .LVU2474
 7471 00fc BDF81620 		ldrh	r2, [sp, #22]
3521:rtos/uC-USB-Device/Source/usbd_ep.c ****             (local_err == USBD_ERR_NONE)) {
 7472              		.loc 1 3521 42 discriminator 1 view .LVU2475
 7473 0100 32B9     		cbnz	r2, .L529
3523:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 7474              		.loc 1 3523 67 is_stmt 1 view .LVU2476
3525:rtos/uC-USB-Device/Source/usbd_ep.c ****                                 ep_addr,
 7475              		.loc 1 3525 13 view .LVU2477
3525:rtos/uC-USB-Device/Source/usbd_ep.c ****                                 ep_addr,
 7476              		.loc 1 3525 22 is_stmt 0 view .LVU2478
 7477 0102 DBF83030 		ldr	r3, [fp, #48]
3525:rtos/uC-USB-Device/Source/usbd_ep.c ****                                 ep_addr,
 7478              		.loc 1 3525 13 view .LVU2479
 7479 0106 2246     		mov	r2, r4
 7480 0108 2946     		mov	r1, r5
 7481 010a 4846     		mov	r0, r9
 7482 010c 9847     		blx	r3
 7483              	.LVL764:
3528:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 7484              		.loc 1 3528 109 is_stmt 1 view .LVU2480
3525:rtos/uC-USB-Device/Source/usbd_ep.c ****                                 ep_addr,
 7485              		.loc 1 3525 13 is_stmt 0 view .LVU2481
 7486 010e D7E7     		b	.L528
 7487              	.L529:
3530:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 7488              		.loc 1 3530 16 is_stmt 1 view .LVU2482
3530:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 7489              		.loc 1 3530 19 is_stmt 0 view .LVU2483
 7490 0110 40F2F712 		movw	r2, #503
 7491 0114 9342     		cmp	r3, r2
 7492 0116 07D0     		beq	.L537
3535:rtos/uC-USB-Device/Source/usbd_ep.c ****            *p_err = USBD_ERR_OS_FAIL;
 7493              		.loc 1 3535 16 is_stmt 1 view .LVU2484
3535:rtos/uC-USB-Device/Source/usbd_ep.c ****            *p_err = USBD_ERR_OS_FAIL;
 7494              		.loc 1 3535 30 is_stmt 0 view .LVU2485
 7495 0118 BDF81630 		ldrh	r3, [sp, #22]
ARM GAS  /tmp/ccuUvpuw.s 			page 254


3535:rtos/uC-USB-Device/Source/usbd_ep.c ****            *p_err = USBD_ERR_OS_FAIL;
 7496              		.loc 1 3535 19 view .LVU2486
 7497 011c 002B     		cmp	r3, #0
 7498 011e CFD0     		beq	.L528
3536:rtos/uC-USB-Device/Source/usbd_ep.c ****         }
 7499              		.loc 1 3536 12 is_stmt 1 view .LVU2487
3536:rtos/uC-USB-Device/Source/usbd_ep.c ****         }
 7500              		.loc 1 3536 19 is_stmt 0 view .LVU2488
 7501 0120 4FF4FB73 		mov	r3, #502
 7502 0124 2380     		strh	r3, [r4]	@ movhi
 7503 0126 CBE7     		b	.L528
 7504              	.L537:
3532:rtos/uC-USB-Device/Source/usbd_ep.c ****             USBD_DBG_STATS_EP_INC(p_drv->DevNbr, p_ep->Ix, RxSyncTimeoutErrNbr);
 7505              		.loc 1 3532 13 is_stmt 1 view .LVU2489
3532:rtos/uC-USB-Device/Source/usbd_ep.c ****             USBD_DBG_STATS_EP_INC(p_drv->DevNbr, p_ep->Ix, RxSyncTimeoutErrNbr);
 7506              		.loc 1 3532 22 is_stmt 0 view .LVU2490
 7507 0128 DBF84030 		ldr	r3, [fp, #64]
3532:rtos/uC-USB-Device/Source/usbd_ep.c ****             USBD_DBG_STATS_EP_INC(p_drv->DevNbr, p_ep->Ix, RxSyncTimeoutErrNbr);
 7508              		.loc 1 3532 13 view .LVU2491
 7509 012c 2946     		mov	r1, r5
 7510 012e 4846     		mov	r0, r9
 7511 0130 9847     		blx	r3
 7512              	.LVL765:
3533:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 7513              		.loc 1 3533 80 is_stmt 1 view .LVU2492
 7514 0132 C5E7     		b	.L528
 7515              	.L539:
 7516              		.align	2
 7517              	.L538:
 7518 0134 00000000 		.word	.LANCHOR1
 7519              		.cfi_endproc
 7520              	.LFE28:
 7522              		.section	.text.USBD_CtrlRxStatus,"ax",%progbits
 7523              		.align	1
 7524              		.global	USBD_CtrlRxStatus
 7525              		.syntax unified
 7526              		.thumb
 7527              		.thumb_func
 7528              		.fpu fpv4-sp-d16
 7530              	USBD_CtrlRxStatus:
 7531              	.LVL766:
 7532              	.LFB11:
1972:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DEV_STATE  state;
 7533              		.loc 1 1972 1 view -0
 7534              		.cfi_startproc
 7535              		@ args = 0, pretend = 0, frame = 0
 7536              		@ frame_needed = 0, uses_anonymous_args = 0
1972:rtos/uC-USB-Device/Source/usbd_ep.c ****     USBD_DEV_STATE  state;
 7537              		.loc 1 1972 1 is_stmt 0 view .LVU2494
 7538 0000 70B5     		push	{r4, r5, r6, lr}
 7539              	.LCFI112:
 7540              		.cfi_def_cfa_offset 16
 7541              		.cfi_offset 4, -16
 7542              		.cfi_offset 5, -12
 7543              		.cfi_offset 6, -8
 7544              		.cfi_offset 14, -4
 7545 0002 0546     		mov	r5, r0
ARM GAS  /tmp/ccuUvpuw.s 			page 255


 7546 0004 0E46     		mov	r6, r1
 7547 0006 1446     		mov	r4, r2
1973:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 7548              		.loc 1 1973 5 is_stmt 1 view .LVU2495
1976:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 7549              		.loc 1 1976 57 view .LVU2496
1978:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (*p_err != USBD_ERR_NONE) {
 7550              		.loc 1 1978 5 view .LVU2497
1978:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (*p_err != USBD_ERR_NONE) {
 7551              		.loc 1 1978 13 is_stmt 0 view .LVU2498
 7552 0008 1146     		mov	r1, r2
 7553              	.LVL767:
1978:rtos/uC-USB-Device/Source/usbd_ep.c ****     if (*p_err != USBD_ERR_NONE) {
 7554              		.loc 1 1978 13 view .LVU2499
 7555 000a FFF7FEFF 		bl	USBD_DevStateGet
 7556              	.LVL768:
1979:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 7557              		.loc 1 1979 5 is_stmt 1 view .LVU2500
1979:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 7558              		.loc 1 1979 9 is_stmt 0 view .LVU2501
 7559 000e 2388     		ldrh	r3, [r4]
1979:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 7560              		.loc 1 1979 8 view .LVU2502
 7561 0010 2BB9     		cbnz	r3, .L540
1983:rtos/uC-USB-Device/Source/usbd_ep.c ****         (state != USBD_DEV_STATE_ADDRESSED) &&
 7562              		.loc 1 1983 5 is_stmt 1 view .LVU2503
1984:rtos/uC-USB-Device/Source/usbd_ep.c ****         (state != USBD_DEV_STATE_CONFIGURED)) {
 7563              		.loc 1 1984 45 is_stmt 0 view .LVU2504
 7564 0012 0338     		subs	r0, r0, #3
 7565              	.LVL769:
1984:rtos/uC-USB-Device/Source/usbd_ep.c ****         (state != USBD_DEV_STATE_CONFIGURED)) {
 7566              		.loc 1 1984 45 view .LVU2505
 7567 0014 C3B2     		uxtb	r3, r0
1983:rtos/uC-USB-Device/Source/usbd_ep.c ****         (state != USBD_DEV_STATE_ADDRESSED) &&
 7568              		.loc 1 1983 8 view .LVU2506
 7569 0016 022B     		cmp	r3, #2
 7570 0018 02D9     		bls	.L542
1986:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 7571              		.loc 1 1986 8 is_stmt 1 view .LVU2507
1986:rtos/uC-USB-Device/Source/usbd_ep.c ****         return;
 7572              		.loc 1 1986 16 is_stmt 0 view .LVU2508
 7573 001a 6623     		movs	r3, #102
 7574 001c 2380     		strh	r3, [r4]	@ movhi
1987:rtos/uC-USB-Device/Source/usbd_ep.c ****     }
 7575              		.loc 1 1987 9 is_stmt 1 view .LVU2509
 7576              	.L540:
1996:rtos/uC-USB-Device/Source/usbd_ep.c **** 
 7577              		.loc 1 1996 1 is_stmt 0 view .LVU2510
 7578 001e 70BD     		pop	{r4, r5, r6, pc}
 7579              	.LVL770:
 7580              	.L542:
1990:rtos/uC-USB-Device/Source/usbd_ep.c ****                   USBD_EP_ADDR_CTRL_OUT,
 7581              		.loc 1 1990 5 is_stmt 1 view .LVU2511
 7582 0020 2346     		mov	r3, r4
 7583 0022 3246     		mov	r2, r6
 7584 0024 0021     		movs	r1, #0
 7585 0026 2846     		mov	r0, r5
ARM GAS  /tmp/ccuUvpuw.s 			page 256


 7586 0028 FFF7FEFF 		bl	USBD_EP_RxZLP
 7587              	.LVL771:
1995:rtos/uC-USB-Device/Source/usbd_ep.c **** }
 7588              		.loc 1 1995 95 view .LVU2512
 7589 002c F7E7     		b	.L540
 7590              		.cfi_endproc
 7591              	.LFE11:
 7593              		.section	.bss.USBD_EP_OpenBitMap,"aw",%nobits
 7594              		.align	2
 7595              		.set	.LANCHOR5,. + 0
 7598              	USBD_EP_OpenBitMap:
 7599 0000 00000000 		.space	4
 7600              		.section	.bss.USBD_EP_OpenCtr,"aw",%nobits
 7601              		.align	2
 7602              		.set	.LANCHOR4,. + 0
 7605              	USBD_EP_OpenCtr:
 7606 0000 00       		.space	1
 7607              		.section	.bss.USBD_EP_Tbl,"aw",%nobits
 7608              		.align	2
 7609              		.set	.LANCHOR2,. + 0
 7612              	USBD_EP_Tbl:
 7613 0000 00000000 		.space	80
 7613      00000000 
 7613      00000000 
 7613      00000000 
 7613      00000000 
 7614              		.section	.bss.USBD_EP_TblPtrs,"aw",%nobits
 7615              		.align	2
 7616              		.set	.LANCHOR1,. + 0
 7619              	USBD_EP_TblPtrs:
 7620 0000 00000000 		.space	128
 7620      00000000 
 7620      00000000 
 7620      00000000 
 7620      00000000 
 7621              		.section	.bss.USBD_URB_Tbl,"aw",%nobits
 7622              		.align	2
 7623              		.set	.LANCHOR3,. + 0
 7626              	USBD_URB_Tbl:
 7627 0000 00000000 		.space	144
 7627      00000000 
 7627      00000000 
 7627      00000000 
 7627      00000000 
 7628              		.section	.bss.USBD_URB_TblPtr,"aw",%nobits
 7629              		.align	2
 7630              		.set	.LANCHOR0,. + 0
 7633              	USBD_URB_TblPtr:
 7634 0000 00000000 		.space	4
 7635              		.text
 7636              	.Letext0:
 7637              		.file 2 "rtos/uC-CPU/ARM-Cortex-M/ARMv7-M/GNU/cpu.h"
 7638              		.file 3 "rtos/uC-USB-Device/Source/usbd_core.h"
 7639              		.file 4 "rtos/uC-USB-Device/Source/usbd_internal.h"
 7640              		.file 5 "rtos/uC-CPU/cpu_core.h"
ARM GAS  /tmp/ccuUvpuw.s 			page 257


DEFINED SYMBOLS
                            *ABS*:0000000000000000 usbd_ep.c
     /tmp/ccuUvpuw.s:18     .text.USBD_EP_TxAsyncProcess:0000000000000000 $t
     /tmp/ccuUvpuw.s:25     .text.USBD_EP_TxAsyncProcess:0000000000000000 USBD_EP_TxAsyncProcess
     /tmp/ccuUvpuw.s:157    .text.USBD_URB_Queue:0000000000000000 $t
     /tmp/ccuUvpuw.s:163    .text.USBD_URB_Queue:0000000000000000 USBD_URB_Queue
     /tmp/ccuUvpuw.s:201    .text.USBD_URB_Dequeue:0000000000000000 $t
     /tmp/ccuUvpuw.s:207    .text.USBD_URB_Dequeue:0000000000000000 USBD_URB_Dequeue
     /tmp/ccuUvpuw.s:253    .text.USBD_URB_AsyncCmpl:0000000000000000 $t
     /tmp/ccuUvpuw.s:259    .text.USBD_URB_AsyncCmpl:0000000000000000 USBD_URB_AsyncCmpl
     /tmp/ccuUvpuw.s:303    .text.USBD_URB_Get:0000000000000000 $t
     /tmp/ccuUvpuw.s:309    .text.USBD_URB_Get:0000000000000000 USBD_URB_Get
     /tmp/ccuUvpuw.s:414    .text.USBD_URB_Get:0000000000000048 $d
     /tmp/ccuUvpuw.s:419    .text.USBD_EP_RxStartAsyncProcess:0000000000000000 $t
     /tmp/ccuUvpuw.s:425    .text.USBD_EP_RxStartAsyncProcess:0000000000000000 USBD_EP_RxStartAsyncProcess
     /tmp/ccuUvpuw.s:522    .text.USBD_URB_Free:0000000000000000 $t
     /tmp/ccuUvpuw.s:528    .text.USBD_URB_Free:0000000000000000 USBD_URB_Free
     /tmp/ccuUvpuw.s:585    .text.USBD_URB_Free:0000000000000024 $d
     /tmp/ccuUvpuw.s:590    .text.USBD_EP_Rx:0000000000000000 $t
     /tmp/ccuUvpuw.s:596    .text.USBD_EP_Rx:0000000000000000 USBD_EP_Rx
     /tmp/ccuUvpuw.s:1029   .text.USBD_EP_Tx:0000000000000000 $t
     /tmp/ccuUvpuw.s:1035   .text.USBD_EP_Tx:0000000000000000 USBD_EP_Tx
     /tmp/ccuUvpuw.s:1560   .text.USBD_URB_AsyncEnd:0000000000000000 $t
     /tmp/ccuUvpuw.s:1566   .text.USBD_URB_AsyncEnd:0000000000000000 USBD_URB_AsyncEnd
     /tmp/ccuUvpuw.s:1666   .text.USBD_EP_URB_Abort:0000000000000000 $t
     /tmp/ccuUvpuw.s:1672   .text.USBD_EP_URB_Abort:0000000000000000 USBD_EP_URB_Abort
     /tmp/ccuUvpuw.s:1838   .text.USBD_BulkRx:0000000000000000 $t
     /tmp/ccuUvpuw.s:1845   .text.USBD_BulkRx:0000000000000000 USBD_BulkRx
     /tmp/ccuUvpuw.s:2066   .text.USBD_BulkRx:00000000000000e4 $d
     /tmp/ccuUvpuw.s:2071   .text.USBD_BulkRxAsync:0000000000000000 $t
     /tmp/ccuUvpuw.s:2078   .text.USBD_BulkRxAsync:0000000000000000 USBD_BulkRxAsync
     /tmp/ccuUvpuw.s:2287   .text.USBD_BulkRxAsync:00000000000000d8 $d
     /tmp/ccuUvpuw.s:2292   .text.USBD_BulkTx:0000000000000000 $t
     /tmp/ccuUvpuw.s:2299   .text.USBD_BulkTx:0000000000000000 USBD_BulkTx
     /tmp/ccuUvpuw.s:2524   .text.USBD_BulkTx:00000000000000e8 $d
     /tmp/ccuUvpuw.s:2529   .text.USBD_BulkTxAsync:0000000000000000 $t
     /tmp/ccuUvpuw.s:2536   .text.USBD_BulkTxAsync:0000000000000000 USBD_BulkTxAsync
     /tmp/ccuUvpuw.s:2748   .text.USBD_BulkTxAsync:00000000000000e0 $d
     /tmp/ccuUvpuw.s:2753   .text.USBD_IntrRx:0000000000000000 $t
     /tmp/ccuUvpuw.s:2760   .text.USBD_IntrRx:0000000000000000 USBD_IntrRx
     /tmp/ccuUvpuw.s:2981   .text.USBD_IntrRx:00000000000000e4 $d
     /tmp/ccuUvpuw.s:2986   .text.USBD_IntrRxAsync:0000000000000000 $t
     /tmp/ccuUvpuw.s:2993   .text.USBD_IntrRxAsync:0000000000000000 USBD_IntrRxAsync
     /tmp/ccuUvpuw.s:3202   .text.USBD_IntrRxAsync:00000000000000d8 $d
     /tmp/ccuUvpuw.s:3207   .text.USBD_IntrTx:0000000000000000 $t
     /tmp/ccuUvpuw.s:3214   .text.USBD_IntrTx:0000000000000000 USBD_IntrTx
     /tmp/ccuUvpuw.s:3439   .text.USBD_IntrTx:00000000000000e8 $d
     /tmp/ccuUvpuw.s:3444   .text.USBD_IntrTxAsync:0000000000000000 $t
     /tmp/ccuUvpuw.s:3451   .text.USBD_IntrTxAsync:0000000000000000 USBD_IntrTxAsync
     /tmp/ccuUvpuw.s:3663   .text.USBD_IntrTxAsync:00000000000000e0 $d
     /tmp/ccuUvpuw.s:3668   .text.USBD_CtrlRx:0000000000000000 $t
     /tmp/ccuUvpuw.s:3675   .text.USBD_CtrlRx:0000000000000000 USBD_CtrlRx
     /tmp/ccuUvpuw.s:3887   .text.USBD_CtrlRx:00000000000000d0 $d
     /tmp/ccuUvpuw.s:3892   .text.USBD_CtrlTx:0000000000000000 $t
     /tmp/ccuUvpuw.s:3899   .text.USBD_CtrlTx:0000000000000000 USBD_CtrlTx
     /tmp/ccuUvpuw.s:4140   .text.USBD_CtrlTx:00000000000000e8 $d
     /tmp/ccuUvpuw.s:4145   .text.USBD_CtrlStall:0000000000000000 $t
ARM GAS  /tmp/ccuUvpuw.s 			page 258


     /tmp/ccuUvpuw.s:4152   .text.USBD_CtrlStall:0000000000000000 USBD_CtrlStall
     /tmp/ccuUvpuw.s:4335   .text.USBD_CtrlStall:00000000000000b4 $d
     /tmp/ccuUvpuw.s:4340   .text.USBD_EP_Init:0000000000000000 $t
     /tmp/ccuUvpuw.s:4347   .text.USBD_EP_Init:0000000000000000 USBD_EP_Init
     /tmp/ccuUvpuw.s:4592   .text.USBD_EP_Init:00000000000000f8 $d
     /tmp/ccuUvpuw.s:4602   .text.USBD_EP_XferAsyncProcess:0000000000000000 $t
     /tmp/ccuUvpuw.s:4609   .text.USBD_EP_XferAsyncProcess:0000000000000000 USBD_EP_XferAsyncProcess
     /tmp/ccuUvpuw.s:5016   .text.USBD_EP_XferAsyncProcess:0000000000000194 $d
     /tmp/ccuUvpuw.s:5021   .text.USBD_EP_Open:0000000000000000 $t
     /tmp/ccuUvpuw.s:5028   .text.USBD_EP_Open:0000000000000000 USBD_EP_Open
     /tmp/ccuUvpuw.s:5398   .text.USBD_EP_Open:0000000000000190 $d
     /tmp/ccuUvpuw.s:5406   .text.USBD_EP_MaxPktSizeGet:0000000000000000 $t
     /tmp/ccuUvpuw.s:5413   .text.USBD_EP_MaxPktSizeGet:0000000000000000 USBD_EP_MaxPktSizeGet
     /tmp/ccuUvpuw.s:5511   .text.USBD_EP_MaxPktSizeGet:0000000000000048 $d
     /tmp/ccuUvpuw.s:5516   .text.USBD_EP_MaxNbrOpenGet:0000000000000000 $t
     /tmp/ccuUvpuw.s:5523   .text.USBD_EP_MaxNbrOpenGet:0000000000000000 USBD_EP_MaxNbrOpenGet
     /tmp/ccuUvpuw.s:5565   .text.USBD_EP_MaxNbrOpenGet:0000000000000014 $d
     /tmp/ccuUvpuw.s:5570   .text.USBD_EP_Abort:0000000000000000 $t
     /tmp/ccuUvpuw.s:5577   .text.USBD_EP_Abort:0000000000000000 USBD_EP_Abort
     /tmp/ccuUvpuw.s:5729   .text.USBD_EP_Abort:000000000000008c $d
     /tmp/ccuUvpuw.s:5734   .text.USBD_EP_Close:0000000000000000 $t
     /tmp/ccuUvpuw.s:5741   .text.USBD_EP_Close:0000000000000000 USBD_EP_Close
     /tmp/ccuUvpuw.s:5957   .text.USBD_EP_Close:00000000000000f4 $d
     /tmp/ccuUvpuw.s:5964   .text.USBD_CtrlOpen:0000000000000000 $t
     /tmp/ccuUvpuw.s:5971   .text.USBD_CtrlOpen:0000000000000000 USBD_CtrlOpen
     /tmp/ccuUvpuw.s:6067   .text.USBD_CtrlClose:0000000000000000 $t
     /tmp/ccuUvpuw.s:6074   .text.USBD_CtrlClose:0000000000000000 USBD_CtrlClose
     /tmp/ccuUvpuw.s:6152   .text.USBD_EP_Stall:0000000000000000 $t
     /tmp/ccuUvpuw.s:6159   .text.USBD_EP_Stall:0000000000000000 USBD_EP_Stall
     /tmp/ccuUvpuw.s:6399   .text.USBD_EP_Stall:00000000000000f4 $d
     /tmp/ccuUvpuw.s:6404   .text.USBD_EP_IsStalled:0000000000000000 $t
     /tmp/ccuUvpuw.s:6411   .text.USBD_EP_IsStalled:0000000000000000 USBD_EP_IsStalled
     /tmp/ccuUvpuw.s:6522   .text.USBD_EP_IsStalled:0000000000000050 $d
     /tmp/ccuUvpuw.s:6527   .text.USBD_EP_RxCmpl:0000000000000000 $t
     /tmp/ccuUvpuw.s:6534   .text.USBD_EP_RxCmpl:0000000000000000 USBD_EP_RxCmpl
     /tmp/ccuUvpuw.s:6641   .text.USBD_EP_RxCmpl:000000000000004c $d
     /tmp/ccuUvpuw.s:6646   .text.USBD_EP_TxCmpl:0000000000000000 $t
     /tmp/ccuUvpuw.s:6653   .text.USBD_EP_TxCmpl:0000000000000000 USBD_EP_TxCmpl
     /tmp/ccuUvpuw.s:6760   .text.USBD_EP_TxCmpl:000000000000004c $d
     /tmp/ccuUvpuw.s:6765   .text.USBD_EP_TxCmplExt:0000000000000000 $t
     /tmp/ccuUvpuw.s:6772   .text.USBD_EP_TxCmplExt:0000000000000000 USBD_EP_TxCmplExt
     /tmp/ccuUvpuw.s:6881   .text.USBD_EP_TxCmplExt:0000000000000048 $d
     /tmp/ccuUvpuw.s:6886   .text.USBD_EP_TxZLP:0000000000000000 $t
     /tmp/ccuUvpuw.s:6893   .text.USBD_EP_TxZLP:0000000000000000 USBD_EP_TxZLP
     /tmp/ccuUvpuw.s:7151   .text.USBD_EP_TxZLP:0000000000000114 $d
     /tmp/ccuUvpuw.s:7156   .text.USBD_CtrlTxStatus:0000000000000000 $t
     /tmp/ccuUvpuw.s:7163   .text.USBD_CtrlTxStatus:0000000000000000 USBD_CtrlTxStatus
     /tmp/ccuUvpuw.s:7227   .text.USBD_EP_RxZLP:0000000000000000 $t
     /tmp/ccuUvpuw.s:7234   .text.USBD_EP_RxZLP:0000000000000000 USBD_EP_RxZLP
     /tmp/ccuUvpuw.s:7518   .text.USBD_EP_RxZLP:0000000000000134 $d
     /tmp/ccuUvpuw.s:7523   .text.USBD_CtrlRxStatus:0000000000000000 $t
     /tmp/ccuUvpuw.s:7530   .text.USBD_CtrlRxStatus:0000000000000000 USBD_CtrlRxStatus
     /tmp/ccuUvpuw.s:7594   .bss.USBD_EP_OpenBitMap:0000000000000000 $d
     /tmp/ccuUvpuw.s:7598   .bss.USBD_EP_OpenBitMap:0000000000000000 USBD_EP_OpenBitMap
     /tmp/ccuUvpuw.s:7601   .bss.USBD_EP_OpenCtr:0000000000000000 $d
     /tmp/ccuUvpuw.s:7605   .bss.USBD_EP_OpenCtr:0000000000000000 USBD_EP_OpenCtr
     /tmp/ccuUvpuw.s:7608   .bss.USBD_EP_Tbl:0000000000000000 $d
ARM GAS  /tmp/ccuUvpuw.s 			page 259


     /tmp/ccuUvpuw.s:7612   .bss.USBD_EP_Tbl:0000000000000000 USBD_EP_Tbl
     /tmp/ccuUvpuw.s:7615   .bss.USBD_EP_TblPtrs:0000000000000000 $d
     /tmp/ccuUvpuw.s:7619   .bss.USBD_EP_TblPtrs:0000000000000000 USBD_EP_TblPtrs
     /tmp/ccuUvpuw.s:7622   .bss.USBD_URB_Tbl:0000000000000000 $d
     /tmp/ccuUvpuw.s:7626   .bss.USBD_URB_Tbl:0000000000000000 USBD_URB_Tbl
     /tmp/ccuUvpuw.s:7629   .bss.USBD_URB_TblPtr:0000000000000000 $d
     /tmp/ccuUvpuw.s:7633   .bss.USBD_URB_TblPtr:0000000000000000 USBD_URB_TblPtr
                           .group:0000000000000000 wm4.0.0f5aa60db9403f389c005f20ecce4286
                           .group:0000000000000000 wm4.usbd_core.h.42.d0f6b126d3befd3546f8a4cae986d0a5
                           .group:0000000000000000 wm4.cpu_def.h.46.baa122a2898bdc40bb50d1f21ead1515
                           .group:0000000000000000 wm4.cpu_cfg.h.45.38a6a562da8b04490c382a226238c57e
                           .group:0000000000000000 wm4.cpu.h.171.3cb15ee3ccb812cbfdf76d1fbfb9eda0
                           .group:0000000000000000 wm4.lib_def.h.66.6ab2a012067a8e1f4289db5765835062
                           .group:0000000000000000 wm4.cpu_core.h.51.bda0b8f45c33e87ce41267758624493c
                           .group:0000000000000000 wm4.lib_cfg.h.40.b2958733f73e73af70f675ca0f89303e
                           .group:0000000000000000 wm4.lib_mem.h.121.89b942a057fb20091baad8bf6b28b1e6
                           .group:0000000000000000 wm4.usbd_cfg.h.48.0c6a80b26779ed3e26907144d5186f9c
                           .group:0000000000000000 wm4.usbd_core.h.97.cd0da30c6a7cd4f210b1364f9143aa0a

UNDEFINED SYMBOLS
CPU_SR_Save
CPU_SR_Restore
USBD_OS_EP_LockRelease
USBD_OS_EP_SignalPend
USBD_OS_EP_LockAcquire
USBD_OS_EP_SignalAbort
USBD_DrvRefGet
USBD_DevStateGet
CPU_SW_Exception
CPU_CntLeadZeros32
USBD_OS_EP_SignalCreate
USBD_OS_EP_LockCreate
USBD_OS_EP_LockDel
USBD_OS_EP_SignalDel
USBD_OS_EP_SignalPost
USBD_EventEP

ARM GAS  /tmp/ccJzGLk0.s 			page 1


   1              		.cpu cortex-m4
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"lib_math.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.text.Math_RandSetSeed,"ax",%progbits
  18              		.align	1
  19              		.global	Math_RandSetSeed
  20              		.arch armv7e-m
  21              		.syntax unified
  22              		.thumb
  23              		.thumb_func
  24              		.fpu fpv4-sp-d16
  26              	Math_RandSetSeed:
  27              	.LVL0:
  28              	.LFB1:
  29              		.file 1 "rtos/uC-LIB/lib_math.c"
   1:rtos/uC-LIB/lib_math.c **** /*
   2:rtos/uC-LIB/lib_math.c **** ***************************************************************************************************
   3:rtos/uC-LIB/lib_math.c **** *                                               uC/LIB
   4:rtos/uC-LIB/lib_math.c **** *                                       Custom Library Modules
   5:rtos/uC-LIB/lib_math.c **** *
   6:rtos/uC-LIB/lib_math.c **** *                         (c) Copyright 2004-2019; Silicon Laboratories Inc.,
   7:rtos/uC-LIB/lib_math.c **** *                                400 W. Cesar Chavez, Austin, TX 78701
   8:rtos/uC-LIB/lib_math.c **** *
   9:rtos/uC-LIB/lib_math.c **** *                   All rights reserved. Protected by international copyright laws.
  10:rtos/uC-LIB/lib_math.c **** *
  11:rtos/uC-LIB/lib_math.c **** *                  Your use of this software is subject to your acceptance of the terms
  12:rtos/uC-LIB/lib_math.c **** *                  of a Silicon Labs Micrium software license, which can be obtained by
  13:rtos/uC-LIB/lib_math.c **** *                  contacting info@micrium.com. If you do not agree to the terms of this
  14:rtos/uC-LIB/lib_math.c **** *                  license, you may not use this software.
  15:rtos/uC-LIB/lib_math.c **** *
  16:rtos/uC-LIB/lib_math.c **** *                  Please help us continue to provide the Embedded community with the finest
  17:rtos/uC-LIB/lib_math.c **** *                  software available. Your honesty is greatly appreciated.
  18:rtos/uC-LIB/lib_math.c **** *
  19:rtos/uC-LIB/lib_math.c **** *                    You can find our product's documentation at: doc.micrium.com
  20:rtos/uC-LIB/lib_math.c **** *
  21:rtos/uC-LIB/lib_math.c **** *                          For more information visit us at: www.micrium.com
  22:rtos/uC-LIB/lib_math.c **** ***************************************************************************************************
  23:rtos/uC-LIB/lib_math.c **** */
  24:rtos/uC-LIB/lib_math.c **** 
  25:rtos/uC-LIB/lib_math.c **** /*
  26:rtos/uC-LIB/lib_math.c **** ***************************************************************************************************
  27:rtos/uC-LIB/lib_math.c **** *
  28:rtos/uC-LIB/lib_math.c **** *                                        MATHEMATIC OPERATIONS
  29:rtos/uC-LIB/lib_math.c **** *
ARM GAS  /tmp/ccJzGLk0.s 			page 2


  30:rtos/uC-LIB/lib_math.c **** * Filename  : lib_math.c
  31:rtos/uC-LIB/lib_math.c **** * Version   : V1.38.04
  32:rtos/uC-LIB/lib_math.c **** ***************************************************************************************************
  33:rtos/uC-LIB/lib_math.c **** * Note(s)   : (1) NO compiler-supplied standard library functions are used in library or product so
  34:rtos/uC-LIB/lib_math.c **** *
  35:rtos/uC-LIB/lib_math.c **** *                 (a) ALL standard library functions are implemented in the custom library modules 
  36:rtos/uC-LIB/lib_math.c **** *
  37:rtos/uC-LIB/lib_math.c **** *                     (1) \<Custom Library Directory>\lib_*.*
  38:rtos/uC-LIB/lib_math.c **** *
  39:rtos/uC-LIB/lib_math.c **** *                     (2) \<Custom Library Directory>\Ports\<cpu>\<compiler>\lib*_a.*
  40:rtos/uC-LIB/lib_math.c **** *
  41:rtos/uC-LIB/lib_math.c **** *                           where
  42:rtos/uC-LIB/lib_math.c **** *                                   <Custom Library Directory>      directory path for custom libra
  43:rtos/uC-LIB/lib_math.c **** *                                   <cpu>                           directory name for specific pro
  44:rtos/uC-LIB/lib_math.c **** *                                   <compiler>                      directory name for specific com
  45:rtos/uC-LIB/lib_math.c **** *
  46:rtos/uC-LIB/lib_math.c **** *                 (b) Product-specific library functions are implemented in individual products.
  47:rtos/uC-LIB/lib_math.c **** *
  48:rtos/uC-LIB/lib_math.c **** ***************************************************************************************************
  49:rtos/uC-LIB/lib_math.c **** * Notice(s) : (1) The Institute of Electrical and Electronics Engineers and The Open Group, have gi
  50:rtos/uC-LIB/lib_math.c **** *                 us permission to reprint portions of their documentation.  Portions of this text 
  51:rtos/uC-LIB/lib_math.c **** *                 reprinted and reproduced in electronic form from the IEEE Std 1003.1, 2004 Editio
  52:rtos/uC-LIB/lib_math.c **** *                 Standard for Information Technology -- Portable Operating System Interface (POSIX
  53:rtos/uC-LIB/lib_math.c **** *                 The Open Group Base Specifications Issue 6, Copyright (C) 2001-2004 by the Instit
  54:rtos/uC-LIB/lib_math.c **** *                 of Electrical and Electronics Engineers, Inc and The Open Group.  In the event of
  55:rtos/uC-LIB/lib_math.c **** *                 discrepancy between these versions and the original IEEE and The Open Group Stand
  56:rtos/uC-LIB/lib_math.c **** *                 the original IEEE and The Open Group Standard is the referee document.  The origi
  57:rtos/uC-LIB/lib_math.c **** *                 Standard can be obtained online at http://www.opengroup.org/unix/online.html.
  58:rtos/uC-LIB/lib_math.c **** ***************************************************************************************************
  59:rtos/uC-LIB/lib_math.c **** */
  60:rtos/uC-LIB/lib_math.c **** 
  61:rtos/uC-LIB/lib_math.c **** /*
  62:rtos/uC-LIB/lib_math.c **** ***************************************************************************************************
  63:rtos/uC-LIB/lib_math.c **** *                                            INCLUDE FILES
  64:rtos/uC-LIB/lib_math.c **** ***************************************************************************************************
  65:rtos/uC-LIB/lib_math.c **** */
  66:rtos/uC-LIB/lib_math.c **** 
  67:rtos/uC-LIB/lib_math.c **** #define    MICRIUM_SOURCE
  68:rtos/uC-LIB/lib_math.c **** #define    LIB_MATH_MODULE
  69:rtos/uC-LIB/lib_math.c **** #include  <lib_math.h>
  70:rtos/uC-LIB/lib_math.c **** 
  71:rtos/uC-LIB/lib_math.c **** 
  72:rtos/uC-LIB/lib_math.c **** /*
  73:rtos/uC-LIB/lib_math.c **** ***************************************************************************************************
  74:rtos/uC-LIB/lib_math.c **** *                                            LOCAL DEFINES
  75:rtos/uC-LIB/lib_math.c **** ***************************************************************************************************
  76:rtos/uC-LIB/lib_math.c **** */
  77:rtos/uC-LIB/lib_math.c **** 
  78:rtos/uC-LIB/lib_math.c **** 
  79:rtos/uC-LIB/lib_math.c **** /*
  80:rtos/uC-LIB/lib_math.c **** ***************************************************************************************************
  81:rtos/uC-LIB/lib_math.c **** *                                           LOCAL CONSTANTS
  82:rtos/uC-LIB/lib_math.c **** ***************************************************************************************************
  83:rtos/uC-LIB/lib_math.c **** */
  84:rtos/uC-LIB/lib_math.c **** 
  85:rtos/uC-LIB/lib_math.c **** 
  86:rtos/uC-LIB/lib_math.c **** /*
ARM GAS  /tmp/ccJzGLk0.s 			page 3


  87:rtos/uC-LIB/lib_math.c **** ***************************************************************************************************
  88:rtos/uC-LIB/lib_math.c **** *                                          LOCAL DATA TYPES
  89:rtos/uC-LIB/lib_math.c **** ***************************************************************************************************
  90:rtos/uC-LIB/lib_math.c **** */
  91:rtos/uC-LIB/lib_math.c **** 
  92:rtos/uC-LIB/lib_math.c **** 
  93:rtos/uC-LIB/lib_math.c **** /*
  94:rtos/uC-LIB/lib_math.c **** ***************************************************************************************************
  95:rtos/uC-LIB/lib_math.c **** *                                            LOCAL TABLES
  96:rtos/uC-LIB/lib_math.c **** ***************************************************************************************************
  97:rtos/uC-LIB/lib_math.c **** */
  98:rtos/uC-LIB/lib_math.c **** 
  99:rtos/uC-LIB/lib_math.c **** 
 100:rtos/uC-LIB/lib_math.c **** /*
 101:rtos/uC-LIB/lib_math.c **** ***************************************************************************************************
 102:rtos/uC-LIB/lib_math.c **** *                                       LOCAL GLOBAL VARIABLES
 103:rtos/uC-LIB/lib_math.c **** ***************************************************************************************************
 104:rtos/uC-LIB/lib_math.c **** */
 105:rtos/uC-LIB/lib_math.c **** 
 106:rtos/uC-LIB/lib_math.c **** RAND_NBR  Math_RandSeedCur;                                     /* Cur rand nbr seed.              
 107:rtos/uC-LIB/lib_math.c **** 
 108:rtos/uC-LIB/lib_math.c **** 
 109:rtos/uC-LIB/lib_math.c **** /*
 110:rtos/uC-LIB/lib_math.c **** ***************************************************************************************************
 111:rtos/uC-LIB/lib_math.c **** *                                      LOCAL FUNCTION PROTOTYPES
 112:rtos/uC-LIB/lib_math.c **** ***************************************************************************************************
 113:rtos/uC-LIB/lib_math.c **** */
 114:rtos/uC-LIB/lib_math.c **** 
 115:rtos/uC-LIB/lib_math.c **** 
 116:rtos/uC-LIB/lib_math.c **** /*
 117:rtos/uC-LIB/lib_math.c **** ***************************************************************************************************
 118:rtos/uC-LIB/lib_math.c **** *                                     LOCAL CONFIGURATION ERRORS
 119:rtos/uC-LIB/lib_math.c **** ***************************************************************************************************
 120:rtos/uC-LIB/lib_math.c **** */
 121:rtos/uC-LIB/lib_math.c **** 
 122:rtos/uC-LIB/lib_math.c **** 
 123:rtos/uC-LIB/lib_math.c **** /*
 124:rtos/uC-LIB/lib_math.c **** ***************************************************************************************************
 125:rtos/uC-LIB/lib_math.c **** *                                             Math_Init()
 126:rtos/uC-LIB/lib_math.c **** *
 127:rtos/uC-LIB/lib_math.c **** * Description : (1) Initialize Mathematic Module :
 128:rtos/uC-LIB/lib_math.c **** *
 129:rtos/uC-LIB/lib_math.c **** *                   (a) Initialize random number seed value
 130:rtos/uC-LIB/lib_math.c **** *
 131:rtos/uC-LIB/lib_math.c **** *
 132:rtos/uC-LIB/lib_math.c **** * Argument(s) : none.
 133:rtos/uC-LIB/lib_math.c **** *
 134:rtos/uC-LIB/lib_math.c **** * Return(s)   : none.
 135:rtos/uC-LIB/lib_math.c **** *
 136:rtos/uC-LIB/lib_math.c **** * Caller(s)   : Application.
 137:rtos/uC-LIB/lib_math.c **** *
 138:rtos/uC-LIB/lib_math.c **** * Note(s)     : (2) IEEE Std 1003.1, 2004 Edition, Section 'rand() : DESCRIPTION' states that "if r
 139:rtos/uC-LIB/lib_math.c **** *                   is called before any calls to srand() are made, the same sequence shall be gene
 140:rtos/uC-LIB/lib_math.c **** *                   as when srand() is first called with a seed value of 1".
 141:rtos/uC-LIB/lib_math.c **** ***************************************************************************************************
 142:rtos/uC-LIB/lib_math.c **** */
 143:rtos/uC-LIB/lib_math.c **** 
ARM GAS  /tmp/ccJzGLk0.s 			page 4


 144:rtos/uC-LIB/lib_math.c **** void  Math_Init (void)
 145:rtos/uC-LIB/lib_math.c **** {
 146:rtos/uC-LIB/lib_math.c ****     Math_RandSetSeed((RAND_NBR)RAND_SEED_INIT_VAL);             /* See Note #2.                    
 147:rtos/uC-LIB/lib_math.c **** }
 148:rtos/uC-LIB/lib_math.c **** 
 149:rtos/uC-LIB/lib_math.c **** 
 150:rtos/uC-LIB/lib_math.c **** /*
 151:rtos/uC-LIB/lib_math.c **** ***************************************************************************************************
 152:rtos/uC-LIB/lib_math.c **** *                                         Math_RandSetSeed()
 153:rtos/uC-LIB/lib_math.c **** *
 154:rtos/uC-LIB/lib_math.c **** * Description : Set the current pseudo-random number generator seed.
 155:rtos/uC-LIB/lib_math.c **** *
 156:rtos/uC-LIB/lib_math.c **** * Argument(s) : seed        Initial (or current) value to set for the pseudo-random number sequence
 157:rtos/uC-LIB/lib_math.c **** *
 158:rtos/uC-LIB/lib_math.c **** * Return(s)   : none.
 159:rtos/uC-LIB/lib_math.c **** *
 160:rtos/uC-LIB/lib_math.c **** * Caller(s)   : Application.
 161:rtos/uC-LIB/lib_math.c **** *
 162:rtos/uC-LIB/lib_math.c **** * Note(s)     : (1) IEEE Std 1003.1, 2004 Edition, Section 'rand() : DESCRIPTION' states that "sran
 163:rtos/uC-LIB/lib_math.c **** *                   ... uses the argument as a seed for a new sequence of pseudo-random numbers to 
 164:rtos/uC-LIB/lib_math.c **** *                   returned by subsequent calls to rand()".
 165:rtos/uC-LIB/lib_math.c **** *
 166:rtos/uC-LIB/lib_math.c **** *               (2) 'Math_RandSeedCur' MUST always be accessed exclusively in critical sections.
 167:rtos/uC-LIB/lib_math.c **** *
 168:rtos/uC-LIB/lib_math.c **** *                   See also 'Math_Rand()  Note #1b'.
 169:rtos/uC-LIB/lib_math.c **** ***************************************************************************************************
 170:rtos/uC-LIB/lib_math.c **** */
 171:rtos/uC-LIB/lib_math.c **** 
 172:rtos/uC-LIB/lib_math.c **** void  Math_RandSetSeed (RAND_NBR  seed)
 173:rtos/uC-LIB/lib_math.c **** {
  30              		.loc 1 173 1 view -0
  31              		.cfi_startproc
  32              		@ args = 0, pretend = 0, frame = 0
  33              		@ frame_needed = 0, uses_anonymous_args = 0
  34              		.loc 1 173 1 is_stmt 0 view .LVU1
  35 0000 10B5     		push	{r4, lr}
  36              	.LCFI0:
  37              		.cfi_def_cfa_offset 8
  38              		.cfi_offset 4, -8
  39              		.cfi_offset 14, -4
  40 0002 0446     		mov	r4, r0
 174:rtos/uC-LIB/lib_math.c ****     CPU_SR_ALLOC();
  41              		.loc 1 174 5 is_stmt 1 view .LVU2
  42              	.LVL1:
 175:rtos/uC-LIB/lib_math.c **** 
 176:rtos/uC-LIB/lib_math.c **** 
 177:rtos/uC-LIB/lib_math.c ****     CPU_CRITICAL_ENTER();
  43              		.loc 1 177 5 view .LVU3
  44              		.loc 1 177 5 view .LVU4
  45              		.loc 1 177 5 view .LVU5
  46 0004 4020     		movs	r0, #64
  47              	.LVL2:
  48              		.loc 1 177 5 is_stmt 0 view .LVU6
  49 0006 FFF7FEFF 		bl	CPU_SR_Save
  50              	.LVL3:
  51              		.loc 1 177 5 is_stmt 1 view .LVU7
  52              		.loc 1 177 5 view .LVU8
ARM GAS  /tmp/ccJzGLk0.s 			page 5


 178:rtos/uC-LIB/lib_math.c ****     Math_RandSeedCur = seed;
  53              		.loc 1 178 5 view .LVU9
  54              		.loc 1 178 22 is_stmt 0 view .LVU10
  55 000a 024B     		ldr	r3, .L3
  56 000c 1C60     		str	r4, [r3]
 179:rtos/uC-LIB/lib_math.c ****     CPU_CRITICAL_EXIT();
  57              		.loc 1 179 5 is_stmt 1 view .LVU11
  58              		.loc 1 179 5 view .LVU12
  59              		.loc 1 179 5 view .LVU13
  60 000e FFF7FEFF 		bl	CPU_SR_Restore
  61              	.LVL4:
  62              		.loc 1 179 5 view .LVU14
  63              		.loc 1 179 5 view .LVU15
 180:rtos/uC-LIB/lib_math.c **** }
  64              		.loc 1 180 1 is_stmt 0 view .LVU16
  65 0012 10BD     		pop	{r4, pc}
  66              	.LVL5:
  67              	.L4:
  68              		.loc 1 180 1 view .LVU17
  69              		.align	2
  70              	.L3:
  71 0014 00000000 		.word	Math_RandSeedCur
  72              		.cfi_endproc
  73              	.LFE1:
  75              		.section	.text.Math_Init,"ax",%progbits
  76              		.align	1
  77              		.global	Math_Init
  78              		.syntax unified
  79              		.thumb
  80              		.thumb_func
  81              		.fpu fpv4-sp-d16
  83              	Math_Init:
  84              	.LFB0:
 145:rtos/uC-LIB/lib_math.c ****     Math_RandSetSeed((RAND_NBR)RAND_SEED_INIT_VAL);             /* See Note #2.                    
  85              		.loc 1 145 1 is_stmt 1 view -0
  86              		.cfi_startproc
  87              		@ args = 0, pretend = 0, frame = 0
  88              		@ frame_needed = 0, uses_anonymous_args = 0
  89 0000 08B5     		push	{r3, lr}
  90              	.LCFI1:
  91              		.cfi_def_cfa_offset 8
  92              		.cfi_offset 3, -8
  93              		.cfi_offset 14, -4
 146:rtos/uC-LIB/lib_math.c **** }
  94              		.loc 1 146 5 view .LVU19
  95 0002 0120     		movs	r0, #1
  96 0004 FFF7FEFF 		bl	Math_RandSetSeed
  97              	.LVL6:
 147:rtos/uC-LIB/lib_math.c **** 
  98              		.loc 1 147 1 is_stmt 0 view .LVU20
  99 0008 08BD     		pop	{r3, pc}
 100              		.cfi_endproc
 101              	.LFE0:
 103              		.section	.text.Math_RandSeed,"ax",%progbits
 104              		.align	1
 105              		.global	Math_RandSeed
 106              		.syntax unified
ARM GAS  /tmp/ccJzGLk0.s 			page 6


 107              		.thumb
 108              		.thumb_func
 109              		.fpu fpv4-sp-d16
 111              	Math_RandSeed:
 112              	.LVL7:
 113              	.LFB3:
 181:rtos/uC-LIB/lib_math.c **** 
 182:rtos/uC-LIB/lib_math.c **** 
 183:rtos/uC-LIB/lib_math.c **** /*
 184:rtos/uC-LIB/lib_math.c **** ***************************************************************************************************
 185:rtos/uC-LIB/lib_math.c **** *                                             Math_Rand()
 186:rtos/uC-LIB/lib_math.c **** *
 187:rtos/uC-LIB/lib_math.c **** * Description : Calculate the next pseudo-random number.
 188:rtos/uC-LIB/lib_math.c **** *
 189:rtos/uC-LIB/lib_math.c **** * Argument(s) : none.
 190:rtos/uC-LIB/lib_math.c **** *
 191:rtos/uC-LIB/lib_math.c **** * Return(s)   : Next pseudo-random number in the sequence after 'Math_RandSeedCur'.
 192:rtos/uC-LIB/lib_math.c **** *
 193:rtos/uC-LIB/lib_math.c **** * Caller(s)   : Application.
 194:rtos/uC-LIB/lib_math.c **** *
 195:rtos/uC-LIB/lib_math.c **** * Note(s)     : (1) (a) The pseudo-random number generator is implemented as a Linear Congruential
 196:rtos/uC-LIB/lib_math.c **** *                       Generator (LCG).
 197:rtos/uC-LIB/lib_math.c **** *
 198:rtos/uC-LIB/lib_math.c **** *                   (b) The pseudo-random number generated is in the range [0, RAND_LCG_PARAM_M].
 199:rtos/uC-LIB/lib_math.c **** *
 200:rtos/uC-LIB/lib_math.c **** *                   See also 'Math_RandSeed()  Note #1'.
 201:rtos/uC-LIB/lib_math.c **** *
 202:rtos/uC-LIB/lib_math.c **** *               (2) (a) IEEE Std 1003.1, 2004 Edition, Section 'rand() : DESCRIPTION' states that "
 203:rtos/uC-LIB/lib_math.c **** *                       ... need not be reentrant ... [and] is not required to be thread-safe".
 204:rtos/uC-LIB/lib_math.c **** *
 205:rtos/uC-LIB/lib_math.c **** *                   (b) However, in order to implement Math_Rand() as re-entrant; 'Math_RandSeedCur
 206:rtos/uC-LIB/lib_math.c **** *                       always be accessed & updated exclusively in critical sections.
 207:rtos/uC-LIB/lib_math.c **** *
 208:rtos/uC-LIB/lib_math.c **** *                   See also 'Math_RandSeed()  Note #2'.
 209:rtos/uC-LIB/lib_math.c **** ***************************************************************************************************
 210:rtos/uC-LIB/lib_math.c **** */
 211:rtos/uC-LIB/lib_math.c **** 
 212:rtos/uC-LIB/lib_math.c **** RAND_NBR  Math_Rand (void)
 213:rtos/uC-LIB/lib_math.c **** {
 214:rtos/uC-LIB/lib_math.c ****     RAND_NBR  seed;
 215:rtos/uC-LIB/lib_math.c ****     RAND_NBR  rand_nbr;
 216:rtos/uC-LIB/lib_math.c ****     CPU_SR_ALLOC();
 217:rtos/uC-LIB/lib_math.c **** 
 218:rtos/uC-LIB/lib_math.c **** 
 219:rtos/uC-LIB/lib_math.c ****     CPU_CRITICAL_ENTER();
 220:rtos/uC-LIB/lib_math.c ****     seed             = Math_RandSeedCur;
 221:rtos/uC-LIB/lib_math.c ****     rand_nbr         = Math_RandSeed(seed);
 222:rtos/uC-LIB/lib_math.c ****     Math_RandSeedCur = rand_nbr;
 223:rtos/uC-LIB/lib_math.c ****     CPU_CRITICAL_EXIT();
 224:rtos/uC-LIB/lib_math.c **** 
 225:rtos/uC-LIB/lib_math.c ****     return (rand_nbr);
 226:rtos/uC-LIB/lib_math.c **** }
 227:rtos/uC-LIB/lib_math.c **** 
 228:rtos/uC-LIB/lib_math.c **** 
 229:rtos/uC-LIB/lib_math.c **** /*
 230:rtos/uC-LIB/lib_math.c **** ***************************************************************************************************
 231:rtos/uC-LIB/lib_math.c **** *                                           Math_RandSeed()
ARM GAS  /tmp/ccJzGLk0.s 			page 7


 232:rtos/uC-LIB/lib_math.c **** *
 233:rtos/uC-LIB/lib_math.c **** * Description : Calculate the next pseudo-random number.
 234:rtos/uC-LIB/lib_math.c **** *
 235:rtos/uC-LIB/lib_math.c **** * Argument(s) : seed        Initial (or current) value for the pseudo-random number sequence.
 236:rtos/uC-LIB/lib_math.c **** *
 237:rtos/uC-LIB/lib_math.c **** * Return(s)   : Next pseudo-random number in the sequence after 'seed'.
 238:rtos/uC-LIB/lib_math.c **** *
 239:rtos/uC-LIB/lib_math.c **** * Caller(s)   : Math_Rand(),
 240:rtos/uC-LIB/lib_math.c **** *               Application.
 241:rtos/uC-LIB/lib_math.c **** *
 242:rtos/uC-LIB/lib_math.c **** * Note(s)     : (1) (a) BSD/ANSI-C implements rand() as a Linear Congruential Generator (LCG) :
 243:rtos/uC-LIB/lib_math.c **** *
 244:rtos/uC-LIB/lib_math.c **** *                       (A) random_number       =  [(a * random_number ) + b]  modulo m
 245:rtos/uC-LIB/lib_math.c **** *                                        n + 1                        n
 246:rtos/uC-LIB/lib_math.c **** *
 247:rtos/uC-LIB/lib_math.c **** *                               where
 248:rtos/uC-LIB/lib_math.c **** *                                       (1) (a) random_number           Next     random number to g
 249:rtos/uC-LIB/lib_math.c **** *                                                            n+1
 250:rtos/uC-LIB/lib_math.c **** *                                           (b) random_number           Previous random number    g
 251:rtos/uC-LIB/lib_math.c **** *                                                            n
 252:rtos/uC-LIB/lib_math.c **** *
 253:rtos/uC-LIB/lib_math.c **** *                                       (2) a = RAND_LCG_PARAM_A        LCG multiplier
 254:rtos/uC-LIB/lib_math.c **** *                                       (3) b = RAND_LCG_PARAM_B        LCG incrementor
 255:rtos/uC-LIB/lib_math.c **** *                                       (4) m = RAND_LCG_PARAM_M + 1    LCG modulus
 256:rtos/uC-LIB/lib_math.c **** *
 257:rtos/uC-LIB/lib_math.c **** *                   (b) The pseudo-random number generated is in the range [0, RAND_LCG_PARAM_M].
 258:rtos/uC-LIB/lib_math.c **** *
 259:rtos/uC-LIB/lib_math.c ****                     See also 'lib_math.h  RANDOM NUMBER DEFINES  Note #1b'.
 260:rtos/uC-LIB/lib_math.c **** *
 261:rtos/uC-LIB/lib_math.c **** *               (2) (a) IEEE Std 1003.1, 2004 Edition, Section 'rand() : DESCRIPTION' states that "
 262:rtos/uC-LIB/lib_math.c **** *                       ... need not be reentrant ... [and] is not required to be thread-safe".
 263:rtos/uC-LIB/lib_math.c **** *
 264:rtos/uC-LIB/lib_math.c **** *                   (b) However, Math_RandSeed() is re-entrant since it calculates the next random 
 265:rtos/uC-LIB/lib_math.c **** *                       using ONLY local variables.
 266:rtos/uC-LIB/lib_math.c **** ***************************************************************************************************
 267:rtos/uC-LIB/lib_math.c **** */
 268:rtos/uC-LIB/lib_math.c **** 
 269:rtos/uC-LIB/lib_math.c **** RAND_NBR  Math_RandSeed (RAND_NBR  seed)
 270:rtos/uC-LIB/lib_math.c **** {
 114              		.loc 1 270 1 is_stmt 1 view -0
 115              		.cfi_startproc
 116              		@ args = 0, pretend = 0, frame = 0
 117              		@ frame_needed = 0, uses_anonymous_args = 0
 118              		@ link register save eliminated.
 271:rtos/uC-LIB/lib_math.c ****     RAND_NBR  rand_nbr;
 119              		.loc 1 271 5 view .LVU22
 272:rtos/uC-LIB/lib_math.c **** 
 273:rtos/uC-LIB/lib_math.c **** 
 274:rtos/uC-LIB/lib_math.c ****     rand_nbr = (((RAND_NBR)RAND_LCG_PARAM_A * seed) + (RAND_NBR)RAND_LCG_PARAM_B)  %  ((RAND_NBR)RA
 120              		.loc 1 274 5 view .LVU23
 121              		.loc 1 274 53 is_stmt 0 view .LVU24
 122 0000 034A     		ldr	r2, .L8
 123 0002 43F23903 		movw	r3, #12345
 124 0006 02FB0030 		mla	r0, r2, r0, r3
 125              	.LVL8:
 275:rtos/uC-LIB/lib_math.c **** 
 276:rtos/uC-LIB/lib_math.c ****     return (rand_nbr);
ARM GAS  /tmp/ccJzGLk0.s 			page 8


 126              		.loc 1 276 5 is_stmt 1 view .LVU25
 277:rtos/uC-LIB/lib_math.c **** }
 127              		.loc 1 277 1 is_stmt 0 view .LVU26
 128 000a 20F00040 		bic	r0, r0, #-2147483648
 129              	.LVL9:
 130              		.loc 1 277 1 view .LVU27
 131 000e 7047     		bx	lr
 132              	.L9:
 133              		.align	2
 134              	.L8:
 135 0010 6D4EC641 		.word	1103515245
 136              		.cfi_endproc
 137              	.LFE3:
 139              		.section	.text.Math_Rand,"ax",%progbits
 140              		.align	1
 141              		.global	Math_Rand
 142              		.syntax unified
 143              		.thumb
 144              		.thumb_func
 145              		.fpu fpv4-sp-d16
 147              	Math_Rand:
 148              	.LFB2:
 213:rtos/uC-LIB/lib_math.c ****     RAND_NBR  seed;
 149              		.loc 1 213 1 is_stmt 1 view -0
 150              		.cfi_startproc
 151              		@ args = 0, pretend = 0, frame = 0
 152              		@ frame_needed = 0, uses_anonymous_args = 0
 153 0000 70B5     		push	{r4, r5, r6, lr}
 154              	.LCFI2:
 155              		.cfi_def_cfa_offset 16
 156              		.cfi_offset 4, -16
 157              		.cfi_offset 5, -12
 158              		.cfi_offset 6, -8
 159              		.cfi_offset 14, -4
 214:rtos/uC-LIB/lib_math.c ****     RAND_NBR  rand_nbr;
 160              		.loc 1 214 5 view .LVU29
 215:rtos/uC-LIB/lib_math.c ****     CPU_SR_ALLOC();
 161              		.loc 1 215 5 view .LVU30
 216:rtos/uC-LIB/lib_math.c **** 
 162              		.loc 1 216 5 view .LVU31
 163              	.LVL10:
 219:rtos/uC-LIB/lib_math.c ****     seed             = Math_RandSeedCur;
 164              		.loc 1 219 5 view .LVU32
 219:rtos/uC-LIB/lib_math.c ****     seed             = Math_RandSeedCur;
 165              		.loc 1 219 5 view .LVU33
 219:rtos/uC-LIB/lib_math.c ****     seed             = Math_RandSeedCur;
 166              		.loc 1 219 5 view .LVU34
 167 0002 4020     		movs	r0, #64
 168 0004 FFF7FEFF 		bl	CPU_SR_Save
 169              	.LVL11:
 170 0008 0546     		mov	r5, r0
 171              	.LVL12:
 219:rtos/uC-LIB/lib_math.c ****     seed             = Math_RandSeedCur;
 172              		.loc 1 219 5 view .LVU35
 219:rtos/uC-LIB/lib_math.c ****     seed             = Math_RandSeedCur;
 173              		.loc 1 219 5 view .LVU36
 220:rtos/uC-LIB/lib_math.c ****     rand_nbr         = Math_RandSeed(seed);
ARM GAS  /tmp/ccJzGLk0.s 			page 9


 174              		.loc 1 220 5 view .LVU37
 220:rtos/uC-LIB/lib_math.c ****     rand_nbr         = Math_RandSeed(seed);
 175              		.loc 1 220 22 is_stmt 0 view .LVU38
 176 000a 054E     		ldr	r6, .L12
 177              	.LVL13:
 221:rtos/uC-LIB/lib_math.c ****     Math_RandSeedCur = rand_nbr;
 178              		.loc 1 221 5 is_stmt 1 view .LVU39
 221:rtos/uC-LIB/lib_math.c ****     Math_RandSeedCur = rand_nbr;
 179              		.loc 1 221 24 is_stmt 0 view .LVU40
 180 000c 3068     		ldr	r0, [r6]
 181              	.LVL14:
 221:rtos/uC-LIB/lib_math.c ****     Math_RandSeedCur = rand_nbr;
 182              		.loc 1 221 24 view .LVU41
 183 000e FFF7FEFF 		bl	Math_RandSeed
 184              	.LVL15:
 221:rtos/uC-LIB/lib_math.c ****     Math_RandSeedCur = rand_nbr;
 185              		.loc 1 221 24 view .LVU42
 186 0012 0446     		mov	r4, r0
 187              	.LVL16:
 222:rtos/uC-LIB/lib_math.c ****     CPU_CRITICAL_EXIT();
 188              		.loc 1 222 5 is_stmt 1 view .LVU43
 222:rtos/uC-LIB/lib_math.c ****     CPU_CRITICAL_EXIT();
 189              		.loc 1 222 22 is_stmt 0 view .LVU44
 190 0014 3060     		str	r0, [r6]
 223:rtos/uC-LIB/lib_math.c **** 
 191              		.loc 1 223 5 is_stmt 1 view .LVU45
 223:rtos/uC-LIB/lib_math.c **** 
 192              		.loc 1 223 5 view .LVU46
 223:rtos/uC-LIB/lib_math.c **** 
 193              		.loc 1 223 5 view .LVU47
 194 0016 2846     		mov	r0, r5
 195              	.LVL17:
 223:rtos/uC-LIB/lib_math.c **** 
 196              		.loc 1 223 5 is_stmt 0 view .LVU48
 197 0018 FFF7FEFF 		bl	CPU_SR_Restore
 198              	.LVL18:
 223:rtos/uC-LIB/lib_math.c **** 
 199              		.loc 1 223 5 is_stmt 1 view .LVU49
 223:rtos/uC-LIB/lib_math.c **** 
 200              		.loc 1 223 5 view .LVU50
 225:rtos/uC-LIB/lib_math.c **** }
 201              		.loc 1 225 5 view .LVU51
 226:rtos/uC-LIB/lib_math.c **** 
 202              		.loc 1 226 1 is_stmt 0 view .LVU52
 203 001c 2046     		mov	r0, r4
 204 001e 70BD     		pop	{r4, r5, r6, pc}
 205              	.LVL19:
 206              	.L13:
 226:rtos/uC-LIB/lib_math.c **** 
 207              		.loc 1 226 1 view .LVU53
 208              		.align	2
 209              	.L12:
 210 0020 00000000 		.word	Math_RandSeedCur
 211              		.cfi_endproc
 212              	.LFE2:
 214              		.comm	Math_RandSeedCur,4,4
 215              		.text
ARM GAS  /tmp/ccJzGLk0.s 			page 10


 216              	.Letext0:
 217              		.file 2 "rtos/uC-CPU/ARM-Cortex-M/ARMv7-M/GNU/cpu.h"
 218              		.file 3 "rtos/uC-LIB/lib_math.h"
ARM GAS  /tmp/ccJzGLk0.s 			page 11


DEFINED SYMBOLS
                            *ABS*:0000000000000000 lib_math.c
     /tmp/ccJzGLk0.s:18     .text.Math_RandSetSeed:0000000000000000 $t
     /tmp/ccJzGLk0.s:26     .text.Math_RandSetSeed:0000000000000000 Math_RandSetSeed
     /tmp/ccJzGLk0.s:71     .text.Math_RandSetSeed:0000000000000014 $d
                            *COM*:0000000000000004 Math_RandSeedCur
     /tmp/ccJzGLk0.s:76     .text.Math_Init:0000000000000000 $t
     /tmp/ccJzGLk0.s:83     .text.Math_Init:0000000000000000 Math_Init
     /tmp/ccJzGLk0.s:104    .text.Math_RandSeed:0000000000000000 $t
     /tmp/ccJzGLk0.s:111    .text.Math_RandSeed:0000000000000000 Math_RandSeed
     /tmp/ccJzGLk0.s:135    .text.Math_RandSeed:0000000000000010 $d
     /tmp/ccJzGLk0.s:140    .text.Math_Rand:0000000000000000 $t
     /tmp/ccJzGLk0.s:147    .text.Math_Rand:0000000000000000 Math_Rand
     /tmp/ccJzGLk0.s:210    .text.Math_Rand:0000000000000020 $d
                           .group:0000000000000000 wm4.0.0f5aa60db9403f389c005f20ecce4286
                           .group:0000000000000000 wm4.cpu_def.h.46.baa122a2898bdc40bb50d1f21ead1515
                           .group:0000000000000000 wm4.cpu_cfg.h.45.38a6a562da8b04490c382a226238c57e
                           .group:0000000000000000 wm4.cpu.h.171.3cb15ee3ccb812cbfdf76d1fbfb9eda0
                           .group:0000000000000000 wm4.cpu_core.h.51.7b35a59c319673f88ae4a256248776ec
                           .group:0000000000000000 wm4.lib_def.h.66.6ab2a012067a8e1f4289db5765835062
                           .group:0000000000000000 wm4.cpu_core.h.143.d3b700e12b3a14ed3bee14c822b49a7d
                           .group:0000000000000000 wm4.lib_math.h.119.0f6c04d3dca0ddc6ff5a1745c8ecb378

UNDEFINED SYMBOLS
CPU_SR_Save
CPU_SR_Restore

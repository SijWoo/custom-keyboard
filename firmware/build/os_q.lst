ARM GAS  /tmp/cc61ansq.s 			page 1


   1              		.cpu cortex-m4
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"os_q.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.text.OSQCreate,"ax",%progbits
  18              		.align	1
  19              		.global	OSQCreate
  20              		.arch armv7e-m
  21              		.syntax unified
  22              		.thumb
  23              		.thumb_func
  24              		.fpu fpv4-sp-d16
  26              	OSQCreate:
  27              	.LVL0:
  28              	.LFB0:
  29              		.file 1 "rtos/uCOS-III/Source/os_q.c"
   1:rtos/uCOS-III/Source/os_q.c **** /*
   2:rtos/uCOS-III/Source/os_q.c **** ***************************************************************************************************
   3:rtos/uCOS-III/Source/os_q.c **** *                                                uC/OS-III
   4:rtos/uCOS-III/Source/os_q.c **** *                                          The Real-Time Kernel
   5:rtos/uCOS-III/Source/os_q.c **** *
   6:rtos/uCOS-III/Source/os_q.c **** *                         (c) Copyright 2009-2019; Silicon Laboratories Inc.,
   7:rtos/uCOS-III/Source/os_q.c **** *                                400 W. Cesar Chavez, Austin, TX 78701
   8:rtos/uCOS-III/Source/os_q.c **** *
   9:rtos/uCOS-III/Source/os_q.c **** *                   All rights reserved. Protected by international copyright laws.
  10:rtos/uCOS-III/Source/os_q.c **** *
  11:rtos/uCOS-III/Source/os_q.c **** *                  Your use of this software is subject to your acceptance of the terms
  12:rtos/uCOS-III/Source/os_q.c **** *                  of a Silicon Labs Micrium software license, which can be obtained by
  13:rtos/uCOS-III/Source/os_q.c **** *                  contacting info@micrium.com. If you do not agree to the terms of this
  14:rtos/uCOS-III/Source/os_q.c **** *                  license, you may not use this software.
  15:rtos/uCOS-III/Source/os_q.c **** *
  16:rtos/uCOS-III/Source/os_q.c **** *                  Please help us continue to provide the Embedded community with the finest
  17:rtos/uCOS-III/Source/os_q.c **** *                  software available. Your honesty is greatly appreciated.
  18:rtos/uCOS-III/Source/os_q.c **** *
  19:rtos/uCOS-III/Source/os_q.c **** *                    You can find our product's documentation at: doc.micrium.com
  20:rtos/uCOS-III/Source/os_q.c **** *
  21:rtos/uCOS-III/Source/os_q.c **** *                          For more information visit us at: www.micrium.com
  22:rtos/uCOS-III/Source/os_q.c **** ***************************************************************************************************
  23:rtos/uCOS-III/Source/os_q.c **** */
  24:rtos/uCOS-III/Source/os_q.c **** 
  25:rtos/uCOS-III/Source/os_q.c **** /*
  26:rtos/uCOS-III/Source/os_q.c **** ***************************************************************************************************
  27:rtos/uCOS-III/Source/os_q.c **** *                                       MESSAGE QUEUE MANAGEMENT
  28:rtos/uCOS-III/Source/os_q.c **** *
  29:rtos/uCOS-III/Source/os_q.c **** * File    : os_q.c
ARM GAS  /tmp/cc61ansq.s 			page 2


  30:rtos/uCOS-III/Source/os_q.c **** * Version : V3.07.04
  31:rtos/uCOS-III/Source/os_q.c **** ***************************************************************************************************
  32:rtos/uCOS-III/Source/os_q.c **** */
  33:rtos/uCOS-III/Source/os_q.c **** 
  34:rtos/uCOS-III/Source/os_q.c **** #define  MICRIUM_SOURCE
  35:rtos/uCOS-III/Source/os_q.c **** #include "os.h"
  36:rtos/uCOS-III/Source/os_q.c **** 
  37:rtos/uCOS-III/Source/os_q.c **** #ifdef VSC_INCLUDE_SOURCE_FILE_NAMES
  38:rtos/uCOS-III/Source/os_q.c **** const  CPU_CHAR  *os_q__c = "$Id: $";
  39:rtos/uCOS-III/Source/os_q.c **** #endif
  40:rtos/uCOS-III/Source/os_q.c **** 
  41:rtos/uCOS-III/Source/os_q.c **** 
  42:rtos/uCOS-III/Source/os_q.c **** #if (OS_CFG_Q_EN > 0u)
  43:rtos/uCOS-III/Source/os_q.c **** /*
  44:rtos/uCOS-III/Source/os_q.c **** ***************************************************************************************************
  45:rtos/uCOS-III/Source/os_q.c **** *                                               CREATE A MESSAGE QUEUE
  46:rtos/uCOS-III/Source/os_q.c **** *
  47:rtos/uCOS-III/Source/os_q.c **** * Description: This function is called by your application to create a message queue.  Message queu
  48:rtos/uCOS-III/Source/os_q.c **** *              before they can be used.
  49:rtos/uCOS-III/Source/os_q.c **** *
  50:rtos/uCOS-III/Source/os_q.c **** * Arguments  : p_q         is a pointer to the message queue
  51:rtos/uCOS-III/Source/os_q.c **** *
  52:rtos/uCOS-III/Source/os_q.c **** *              p_name      is a pointer to an ASCII string that will be used to name the message qu
  53:rtos/uCOS-III/Source/os_q.c **** *
  54:rtos/uCOS-III/Source/os_q.c **** *              max_qty     indicates the maximum size of the message queue (must be non-zero).  Not
  55:rtos/uCOS-III/Source/os_q.c **** *                          possible to have a size higher than the maximum number of OS_MSGs availa
  56:rtos/uCOS-III/Source/os_q.c **** *
  57:rtos/uCOS-III/Source/os_q.c **** *              p_err       is a pointer to a variable that will contain an error code returned by t
  58:rtos/uCOS-III/Source/os_q.c **** *
  59:rtos/uCOS-III/Source/os_q.c **** *                              OS_ERR_NONE                    The call was successful
  60:rtos/uCOS-III/Source/os_q.c **** *                              OS_ERR_CREATE_ISR              Can't create from an ISR
  61:rtos/uCOS-III/Source/os_q.c **** *                              OS_ERR_ILLEGAL_CREATE_RUN_TIME If you are trying to create the Queue
  62:rtos/uCOS-III/Source/os_q.c **** *                                                               OSSafetyCriticalStart()
  63:rtos/uCOS-III/Source/os_q.c **** *                              OS_ERR_OBJ_PTR_NULL            If you passed a NULL pointer for 'p_q
  64:rtos/uCOS-III/Source/os_q.c **** *                              OS_ERR_Q_SIZE                  If the size you specified is 0
  65:rtos/uCOS-III/Source/os_q.c **** *                              OS_ERR_OBJ_CREATED             If the message queue was already crea
  66:rtos/uCOS-III/Source/os_q.c **** *
  67:rtos/uCOS-III/Source/os_q.c **** * Returns    : none
  68:rtos/uCOS-III/Source/os_q.c **** *
  69:rtos/uCOS-III/Source/os_q.c **** * Note(s)    : none
  70:rtos/uCOS-III/Source/os_q.c **** ***************************************************************************************************
  71:rtos/uCOS-III/Source/os_q.c **** */
  72:rtos/uCOS-III/Source/os_q.c **** 
  73:rtos/uCOS-III/Source/os_q.c **** void  OSQCreate (OS_Q        *p_q,
  74:rtos/uCOS-III/Source/os_q.c ****                  CPU_CHAR    *p_name,
  75:rtos/uCOS-III/Source/os_q.c ****                  OS_MSG_QTY   max_qty,
  76:rtos/uCOS-III/Source/os_q.c ****                  OS_ERR      *p_err)
  77:rtos/uCOS-III/Source/os_q.c **** 
  78:rtos/uCOS-III/Source/os_q.c **** {
  30              		.loc 1 78 1 view -0
  31              		.cfi_startproc
  32              		@ args = 0, pretend = 0, frame = 0
  33              		@ frame_needed = 0, uses_anonymous_args = 0
  34              		.loc 1 78 1 is_stmt 0 view .LVU1
  35 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
  36              	.LCFI0:
  37              		.cfi_def_cfa_offset 24
ARM GAS  /tmp/cc61ansq.s 			page 3


  38              		.cfi_offset 3, -24
  39              		.cfi_offset 4, -20
  40              		.cfi_offset 5, -16
  41              		.cfi_offset 6, -12
  42              		.cfi_offset 7, -8
  43              		.cfi_offset 14, -4
  44 0002 1D46     		mov	r5, r3
  79:rtos/uCOS-III/Source/os_q.c ****     CPU_SR_ALLOC();
  45              		.loc 1 79 5 is_stmt 1 view .LVU2
  46              	.LVL1:
  80:rtos/uCOS-III/Source/os_q.c **** 
  81:rtos/uCOS-III/Source/os_q.c **** 
  82:rtos/uCOS-III/Source/os_q.c **** #ifdef OS_SAFETY_CRITICAL
  83:rtos/uCOS-III/Source/os_q.c ****     if (p_err == (OS_ERR *)0) {
  84:rtos/uCOS-III/Source/os_q.c ****         OS_SAFETY_CRITICAL_EXCEPTION();
  85:rtos/uCOS-III/Source/os_q.c ****         return;
  86:rtos/uCOS-III/Source/os_q.c ****     }
  87:rtos/uCOS-III/Source/os_q.c **** #endif
  88:rtos/uCOS-III/Source/os_q.c **** 
  89:rtos/uCOS-III/Source/os_q.c **** #ifdef OS_SAFETY_CRITICAL_IEC61508
  90:rtos/uCOS-III/Source/os_q.c ****     if (OSSafetyCriticalStartFlag == OS_TRUE) {
  91:rtos/uCOS-III/Source/os_q.c ****        *p_err = OS_ERR_ILLEGAL_CREATE_RUN_TIME;
  92:rtos/uCOS-III/Source/os_q.c ****         return;
  93:rtos/uCOS-III/Source/os_q.c ****     }
  94:rtos/uCOS-III/Source/os_q.c **** #endif
  95:rtos/uCOS-III/Source/os_q.c **** 
  96:rtos/uCOS-III/Source/os_q.c **** #if (OS_CFG_CALLED_FROM_ISR_CHK_EN > 0u)
  97:rtos/uCOS-III/Source/os_q.c ****     if (OSIntNestingCtr > 0u) {                                 /* Not allowed to be called from an
  47              		.loc 1 97 5 view .LVU3
  48              		.loc 1 97 25 is_stmt 0 view .LVU4
  49 0004 1849     		ldr	r1, .L11
  50              	.LVL2:
  51              		.loc 1 97 25 view .LVU5
  52 0006 0978     		ldrb	r1, [r1]	@ zero_extendqisi2
  53              		.loc 1 97 8 view .LVU6
  54 0008 39B9     		cbnz	r1, .L8
  55 000a 0446     		mov	r4, r0
  56 000c 1646     		mov	r6, r2
  98:rtos/uCOS-III/Source/os_q.c ****        *p_err = OS_ERR_CREATE_ISR;
  99:rtos/uCOS-III/Source/os_q.c ****         return;
 100:rtos/uCOS-III/Source/os_q.c ****     }
 101:rtos/uCOS-III/Source/os_q.c **** #endif
 102:rtos/uCOS-III/Source/os_q.c **** 
 103:rtos/uCOS-III/Source/os_q.c **** #if (OS_CFG_ARG_CHK_EN > 0u)
 104:rtos/uCOS-III/Source/os_q.c ****     if (p_q == (OS_Q *)0) {                                     /* Validate arguments              
  57              		.loc 1 104 5 is_stmt 1 view .LVU7
  58              		.loc 1 104 8 is_stmt 0 view .LVU8
  59 000e 40B1     		cbz	r0, .L9
 105:rtos/uCOS-III/Source/os_q.c ****        *p_err = OS_ERR_OBJ_PTR_NULL;
 106:rtos/uCOS-III/Source/os_q.c ****         return;
 107:rtos/uCOS-III/Source/os_q.c ****     }
 108:rtos/uCOS-III/Source/os_q.c ****     if (max_qty == 0u) {                                        /* Cannot specify a zero size queue
  60              		.loc 1 108 5 is_stmt 1 view .LVU9
  61              		.loc 1 108 8 is_stmt 0 view .LVU10
  62 0010 5AB9     		cbnz	r2, .L5
 109:rtos/uCOS-III/Source/os_q.c ****        *p_err = OS_ERR_Q_SIZE;
  63              		.loc 1 109 8 is_stmt 1 view .LVU11
ARM GAS  /tmp/cc61ansq.s 			page 4


  64              		.loc 1 109 15 is_stmt 0 view .LVU12
  65 0012 46F29453 		movw	r3, #26004
  66              	.LVL3:
  67              		.loc 1 109 15 view .LVU13
  68 0016 2B80     		strh	r3, [r5]	@ movhi
 110:rtos/uCOS-III/Source/os_q.c ****         return;
  69              		.loc 1 110 9 is_stmt 1 view .LVU14
  70 0018 02E0     		b	.L1
  71              	.LVL4:
  72              	.L8:
  98:rtos/uCOS-III/Source/os_q.c ****         return;
  73              		.loc 1 98 8 view .LVU15
  98:rtos/uCOS-III/Source/os_q.c ****         return;
  74              		.loc 1 98 15 is_stmt 0 view .LVU16
  75 001a 42F6E163 		movw	r3, #12001
  76              	.LVL5:
  98:rtos/uCOS-III/Source/os_q.c ****         return;
  77              		.loc 1 98 15 view .LVU17
  78 001e 2B80     		strh	r3, [r5]	@ movhi
  99:rtos/uCOS-III/Source/os_q.c ****     }
  79              		.loc 1 99 9 is_stmt 1 view .LVU18
  80              	.LVL6:
  81              	.L1:
 111:rtos/uCOS-III/Source/os_q.c ****     }
 112:rtos/uCOS-III/Source/os_q.c **** #endif
 113:rtos/uCOS-III/Source/os_q.c **** 
 114:rtos/uCOS-III/Source/os_q.c ****     CPU_CRITICAL_ENTER();
 115:rtos/uCOS-III/Source/os_q.c **** #if (OS_OBJ_TYPE_REQ > 0u)
 116:rtos/uCOS-III/Source/os_q.c ****     if (p_q->Type == OS_OBJ_TYPE_Q) {
 117:rtos/uCOS-III/Source/os_q.c ****         CPU_CRITICAL_EXIT();
 118:rtos/uCOS-III/Source/os_q.c ****         *p_err = OS_ERR_OBJ_CREATED;
 119:rtos/uCOS-III/Source/os_q.c ****         return;
 120:rtos/uCOS-III/Source/os_q.c ****     }
 121:rtos/uCOS-III/Source/os_q.c ****     p_q->Type    = OS_OBJ_TYPE_Q;                               /* Mark the data structure as a mes
 122:rtos/uCOS-III/Source/os_q.c **** #endif
 123:rtos/uCOS-III/Source/os_q.c **** #if (OS_CFG_DBG_EN > 0u)
 124:rtos/uCOS-III/Source/os_q.c ****     p_q->NamePtr = p_name;
 125:rtos/uCOS-III/Source/os_q.c **** #else
 126:rtos/uCOS-III/Source/os_q.c ****     (void)p_name;
 127:rtos/uCOS-III/Source/os_q.c **** #endif
 128:rtos/uCOS-III/Source/os_q.c ****     OS_MsgQInit(&p_q->MsgQ,                                     /* Initialize the queue            
 129:rtos/uCOS-III/Source/os_q.c ****                 max_qty);
 130:rtos/uCOS-III/Source/os_q.c ****     OS_PendListInit(&p_q->PendList);                            /* Initialize the waiting list     
 131:rtos/uCOS-III/Source/os_q.c **** 
 132:rtos/uCOS-III/Source/os_q.c **** #if (OS_CFG_DBG_EN > 0u)
 133:rtos/uCOS-III/Source/os_q.c ****     OS_QDbgListAdd(p_q);
 134:rtos/uCOS-III/Source/os_q.c ****     OSQQty++;                                                   /* One more queue created          
 135:rtos/uCOS-III/Source/os_q.c **** #endif
 136:rtos/uCOS-III/Source/os_q.c ****     OS_TRACE_Q_CREATE(p_q, p_name);
 137:rtos/uCOS-III/Source/os_q.c ****     CPU_CRITICAL_EXIT();
 138:rtos/uCOS-III/Source/os_q.c ****    *p_err = OS_ERR_NONE;
 139:rtos/uCOS-III/Source/os_q.c **** }
  82              		.loc 1 139 1 is_stmt 0 view .LVU19
  83 0020 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
  84              	.LVL7:
  85              	.L9:
 105:rtos/uCOS-III/Source/os_q.c ****         return;
ARM GAS  /tmp/cc61ansq.s 			page 5


  86              		.loc 1 105 8 is_stmt 1 view .LVU20
 105:rtos/uCOS-III/Source/os_q.c ****         return;
  87              		.loc 1 105 15 is_stmt 0 view .LVU21
  88 0022 45F6C353 		movw	r3, #24003
  89              	.LVL8:
 105:rtos/uCOS-III/Source/os_q.c ****         return;
  90              		.loc 1 105 15 view .LVU22
  91 0026 2B80     		strh	r3, [r5]	@ movhi
 106:rtos/uCOS-III/Source/os_q.c ****     }
  92              		.loc 1 106 9 is_stmt 1 view .LVU23
  93 0028 FAE7     		b	.L1
  94              	.LVL9:
  95              	.L5:
 114:rtos/uCOS-III/Source/os_q.c **** #if (OS_OBJ_TYPE_REQ > 0u)
  96              		.loc 1 114 5 view .LVU24
 114:rtos/uCOS-III/Source/os_q.c **** #if (OS_OBJ_TYPE_REQ > 0u)
  97              		.loc 1 114 5 view .LVU25
 114:rtos/uCOS-III/Source/os_q.c **** #if (OS_OBJ_TYPE_REQ > 0u)
  98              		.loc 1 114 5 view .LVU26
  99 002a 4020     		movs	r0, #64
 100              	.LVL10:
 114:rtos/uCOS-III/Source/os_q.c **** #if (OS_OBJ_TYPE_REQ > 0u)
 101              		.loc 1 114 5 is_stmt 0 view .LVU27
 102 002c FFF7FEFF 		bl	CPU_SR_Save
 103              	.LVL11:
 114:rtos/uCOS-III/Source/os_q.c **** #if (OS_OBJ_TYPE_REQ > 0u)
 104              		.loc 1 114 5 view .LVU28
 105 0030 0746     		mov	r7, r0
 106              	.LVL12:
 114:rtos/uCOS-III/Source/os_q.c **** #if (OS_OBJ_TYPE_REQ > 0u)
 107              		.loc 1 114 5 is_stmt 1 view .LVU29
 114:rtos/uCOS-III/Source/os_q.c **** #if (OS_OBJ_TYPE_REQ > 0u)
 108              		.loc 1 114 5 view .LVU30
 116:rtos/uCOS-III/Source/os_q.c ****         CPU_CRITICAL_EXIT();
 109              		.loc 1 116 5 view .LVU31
 116:rtos/uCOS-III/Source/os_q.c ****         CPU_CRITICAL_EXIT();
 110              		.loc 1 116 12 is_stmt 0 view .LVU32
 111 0032 2268     		ldr	r2, [r4]
 116:rtos/uCOS-III/Source/os_q.c ****         CPU_CRITICAL_EXIT();
 112              		.loc 1 116 8 view .LVU33
 113 0034 0D4B     		ldr	r3, .L11+4
 114 0036 9A42     		cmp	r2, r3
 115 0038 0FD0     		beq	.L10
 121:rtos/uCOS-III/Source/os_q.c **** #endif
 116              		.loc 1 121 5 is_stmt 1 view .LVU34
 121:rtos/uCOS-III/Source/os_q.c **** #endif
 117              		.loc 1 121 18 is_stmt 0 view .LVU35
 118 003a 2046     		mov	r0, r4
 119              	.LVL13:
 121:rtos/uCOS-III/Source/os_q.c **** #endif
 120              		.loc 1 121 18 view .LVU36
 121 003c 0B4B     		ldr	r3, .L11+4
 122 003e 40F80C3B 		str	r3, [r0], #12
 126:rtos/uCOS-III/Source/os_q.c **** #endif
 123              		.loc 1 126 5 is_stmt 1 view .LVU37
 128:rtos/uCOS-III/Source/os_q.c ****                 max_qty);
 124              		.loc 1 128 5 view .LVU38
ARM GAS  /tmp/cc61ansq.s 			page 6


 125 0042 3146     		mov	r1, r6
 126 0044 FFF7FEFF 		bl	OS_MsgQInit
 127              	.LVL14:
 130:rtos/uCOS-III/Source/os_q.c **** 
 128              		.loc 1 130 5 view .LVU39
 129 0048 201D     		adds	r0, r4, #4
 130 004a FFF7FEFF 		bl	OS_PendListInit
 131              	.LVL15:
 136:rtos/uCOS-III/Source/os_q.c ****     CPU_CRITICAL_EXIT();
 132              		.loc 1 136 35 view .LVU40
 137:rtos/uCOS-III/Source/os_q.c ****    *p_err = OS_ERR_NONE;
 133              		.loc 1 137 5 view .LVU41
 137:rtos/uCOS-III/Source/os_q.c ****    *p_err = OS_ERR_NONE;
 134              		.loc 1 137 5 view .LVU42
 137:rtos/uCOS-III/Source/os_q.c ****    *p_err = OS_ERR_NONE;
 135              		.loc 1 137 5 view .LVU43
 136 004e 3846     		mov	r0, r7
 137 0050 FFF7FEFF 		bl	CPU_SR_Restore
 138              	.LVL16:
 137:rtos/uCOS-III/Source/os_q.c ****    *p_err = OS_ERR_NONE;
 139              		.loc 1 137 5 view .LVU44
 137:rtos/uCOS-III/Source/os_q.c ****    *p_err = OS_ERR_NONE;
 140              		.loc 1 137 5 view .LVU45
 138:rtos/uCOS-III/Source/os_q.c **** }
 141              		.loc 1 138 4 view .LVU46
 138:rtos/uCOS-III/Source/os_q.c **** }
 142              		.loc 1 138 11 is_stmt 0 view .LVU47
 143 0054 0023     		movs	r3, #0
 144 0056 2B80     		strh	r3, [r5]	@ movhi
 145 0058 E2E7     		b	.L1
 146              	.LVL17:
 147              	.L10:
 117:rtos/uCOS-III/Source/os_q.c ****         *p_err = OS_ERR_OBJ_CREATED;
 148              		.loc 1 117 9 is_stmt 1 view .LVU48
 117:rtos/uCOS-III/Source/os_q.c ****         *p_err = OS_ERR_OBJ_CREATED;
 149              		.loc 1 117 9 view .LVU49
 117:rtos/uCOS-III/Source/os_q.c ****         *p_err = OS_ERR_OBJ_CREATED;
 150              		.loc 1 117 9 view .LVU50
 151 005a FFF7FEFF 		bl	CPU_SR_Restore
 152              	.LVL18:
 117:rtos/uCOS-III/Source/os_q.c ****         *p_err = OS_ERR_OBJ_CREATED;
 153              		.loc 1 117 9 view .LVU51
 117:rtos/uCOS-III/Source/os_q.c ****         *p_err = OS_ERR_OBJ_CREATED;
 154              		.loc 1 117 9 view .LVU52
 118:rtos/uCOS-III/Source/os_q.c ****         return;
 155              		.loc 1 118 9 view .LVU53
 118:rtos/uCOS-III/Source/os_q.c ****         return;
 156              		.loc 1 118 16 is_stmt 0 view .LVU54
 157 005e 45F6C153 		movw	r3, #24001
 158 0062 2B80     		strh	r3, [r5]	@ movhi
 119:rtos/uCOS-III/Source/os_q.c ****     }
 159              		.loc 1 119 9 is_stmt 1 view .LVU55
 160 0064 DCE7     		b	.L1
 161              	.L12:
 162 0066 00BF     		.align	2
 163              	.L11:
 164 0068 00000000 		.word	OSIntNestingCtr
ARM GAS  /tmp/cc61ansq.s 			page 7


 165 006c 51554555 		.word	1430607185
 166              		.cfi_endproc
 167              	.LFE0:
 169              		.section	.text.OSQFlush,"ax",%progbits
 170              		.align	1
 171              		.global	OSQFlush
 172              		.syntax unified
 173              		.thumb
 174              		.thumb_func
 175              		.fpu fpv4-sp-d16
 177              	OSQFlush:
 178              	.LVL19:
 179              	.LFB2:
 140:rtos/uCOS-III/Source/os_q.c **** 
 141:rtos/uCOS-III/Source/os_q.c **** 
 142:rtos/uCOS-III/Source/os_q.c **** /*
 143:rtos/uCOS-III/Source/os_q.c **** ***************************************************************************************************
 144:rtos/uCOS-III/Source/os_q.c **** *                                               DELETE A MESSAGE QUEUE
 145:rtos/uCOS-III/Source/os_q.c **** *
 146:rtos/uCOS-III/Source/os_q.c **** * Description: This function deletes a message queue and readies all tasks pending on the queue.
 147:rtos/uCOS-III/Source/os_q.c **** *
 148:rtos/uCOS-III/Source/os_q.c **** * Arguments  : p_q       is a pointer to the message queue you want to delete
 149:rtos/uCOS-III/Source/os_q.c **** *
 150:rtos/uCOS-III/Source/os_q.c **** *              opt       determines delete options as follows:
 151:rtos/uCOS-III/Source/os_q.c **** *
 152:rtos/uCOS-III/Source/os_q.c **** *                            OS_OPT_DEL_NO_PEND          Delete the queue ONLY if no task pending
 153:rtos/uCOS-III/Source/os_q.c **** *                            OS_OPT_DEL_ALWAYS           Deletes the queue even if tasks are waitin
 154:rtos/uCOS-III/Source/os_q.c **** *                                                        In this case, all the tasks pending will b
 155:rtos/uCOS-III/Source/os_q.c **** *
 156:rtos/uCOS-III/Source/os_q.c **** *              p_err     is a pointer to a variable that will contain an error code returned by thi
 157:rtos/uCOS-III/Source/os_q.c **** *
 158:rtos/uCOS-III/Source/os_q.c **** *                            OS_ERR_NONE                    The call was successful and the queue w
 159:rtos/uCOS-III/Source/os_q.c **** *                            OS_ERR_DEL_ISR                 If you tried to delete the queue from a
 160:rtos/uCOS-III/Source/os_q.c **** *                            OS_ERR_ILLEGAL_DEL_RUN_TIME    If you are trying to delete the message
 161:rtos/uCOS-III/Source/os_q.c **** *                                                             called OSStart()
 162:rtos/uCOS-III/Source/os_q.c **** *                            OS_ERR_OBJ_PTR_NULL            If you pass a NULL pointer for 'p_q'
 163:rtos/uCOS-III/Source/os_q.c **** *                            OS_ERR_OBJ_TYPE                If the message queue was not created
 164:rtos/uCOS-III/Source/os_q.c **** *                            OS_ERR_OPT_INVALID             An invalid option was specified
 165:rtos/uCOS-III/Source/os_q.c **** *                            OS_ERR_OS_NOT_RUNNING          If uC/OS-III is not running yet
 166:rtos/uCOS-III/Source/os_q.c **** *                            OS_ERR_TASK_WAITING            One or more tasks were waiting on the q
 167:rtos/uCOS-III/Source/os_q.c **** *
 168:rtos/uCOS-III/Source/os_q.c **** * Returns    : == 0          if no tasks were waiting on the queue, or upon error.
 169:rtos/uCOS-III/Source/os_q.c **** *              >  0          if one or more tasks waiting on the queue are now readied and informed
 170:rtos/uCOS-III/Source/os_q.c **** *
 171:rtos/uCOS-III/Source/os_q.c **** * Note(s)    : 1) This function must be used with care.  Tasks that would normally expect the prese
 172:rtos/uCOS-III/Source/os_q.c **** *                 check the return code of OSQPend().
 173:rtos/uCOS-III/Source/os_q.c **** *
 174:rtos/uCOS-III/Source/os_q.c **** *              2) Because ALL tasks pending on the queue will be readied, you MUST be careful in ap
 175:rtos/uCOS-III/Source/os_q.c **** *                 queue is used for mutual exclusion because the resource(s) will no longer be guar
 176:rtos/uCOS-III/Source/os_q.c **** ***************************************************************************************************
 177:rtos/uCOS-III/Source/os_q.c **** */
 178:rtos/uCOS-III/Source/os_q.c **** 
 179:rtos/uCOS-III/Source/os_q.c **** #if (OS_CFG_Q_DEL_EN > 0u)
 180:rtos/uCOS-III/Source/os_q.c **** OS_OBJ_QTY  OSQDel (OS_Q    *p_q,
 181:rtos/uCOS-III/Source/os_q.c ****                     OS_OPT   opt,
 182:rtos/uCOS-III/Source/os_q.c ****                     OS_ERR  *p_err)
 183:rtos/uCOS-III/Source/os_q.c **** {
ARM GAS  /tmp/cc61ansq.s 			page 8


 184:rtos/uCOS-III/Source/os_q.c ****     OS_OBJ_QTY     nbr_tasks;
 185:rtos/uCOS-III/Source/os_q.c ****     OS_PEND_LIST  *p_pend_list;
 186:rtos/uCOS-III/Source/os_q.c ****     OS_TCB        *p_tcb;
 187:rtos/uCOS-III/Source/os_q.c ****     CPU_TS         ts;
 188:rtos/uCOS-III/Source/os_q.c ****     CPU_SR_ALLOC();
 189:rtos/uCOS-III/Source/os_q.c **** 
 190:rtos/uCOS-III/Source/os_q.c **** 
 191:rtos/uCOS-III/Source/os_q.c **** #ifdef OS_SAFETY_CRITICAL
 192:rtos/uCOS-III/Source/os_q.c ****     if (p_err == (OS_ERR *)0) {
 193:rtos/uCOS-III/Source/os_q.c ****         OS_SAFETY_CRITICAL_EXCEPTION();
 194:rtos/uCOS-III/Source/os_q.c ****         return (0u);
 195:rtos/uCOS-III/Source/os_q.c ****     }
 196:rtos/uCOS-III/Source/os_q.c **** #endif
 197:rtos/uCOS-III/Source/os_q.c **** 
 198:rtos/uCOS-III/Source/os_q.c ****     OS_TRACE_Q_DEL_ENTER(p_q, opt);
 199:rtos/uCOS-III/Source/os_q.c **** 
 200:rtos/uCOS-III/Source/os_q.c **** #ifdef OS_SAFETY_CRITICAL_IEC61508
 201:rtos/uCOS-III/Source/os_q.c ****     if (OSSafetyCriticalStartFlag == OS_TRUE) {
 202:rtos/uCOS-III/Source/os_q.c ****         OS_TRACE_Q_DEL_EXIT(OS_ERR_ILLEGAL_DEL_RUN_TIME);
 203:rtos/uCOS-III/Source/os_q.c ****        *p_err = OS_ERR_ILLEGAL_DEL_RUN_TIME;
 204:rtos/uCOS-III/Source/os_q.c ****         return (0u);
 205:rtos/uCOS-III/Source/os_q.c ****     }
 206:rtos/uCOS-III/Source/os_q.c **** #endif
 207:rtos/uCOS-III/Source/os_q.c **** 
 208:rtos/uCOS-III/Source/os_q.c **** #if (OS_CFG_CALLED_FROM_ISR_CHK_EN > 0u)
 209:rtos/uCOS-III/Source/os_q.c ****     if (OSIntNestingCtr > 0u) {                                 /* Can't delete a message queue fro
 210:rtos/uCOS-III/Source/os_q.c ****         OS_TRACE_Q_DEL_EXIT(OS_ERR_DEL_ISR);
 211:rtos/uCOS-III/Source/os_q.c ****        *p_err = OS_ERR_DEL_ISR;
 212:rtos/uCOS-III/Source/os_q.c ****         return (0u);
 213:rtos/uCOS-III/Source/os_q.c ****     }
 214:rtos/uCOS-III/Source/os_q.c **** #endif
 215:rtos/uCOS-III/Source/os_q.c **** 
 216:rtos/uCOS-III/Source/os_q.c **** #if (OS_CFG_INVALID_OS_CALLS_CHK_EN > 0u)
 217:rtos/uCOS-III/Source/os_q.c ****     if (OSRunning != OS_STATE_OS_RUNNING) {                     /* Is the kernel running?          
 218:rtos/uCOS-III/Source/os_q.c ****         OS_TRACE_Q_DEL_EXIT(OS_ERR_OS_NOT_RUNNING);
 219:rtos/uCOS-III/Source/os_q.c ****        *p_err = OS_ERR_OS_NOT_RUNNING;
 220:rtos/uCOS-III/Source/os_q.c ****         return (0u);
 221:rtos/uCOS-III/Source/os_q.c ****     }
 222:rtos/uCOS-III/Source/os_q.c **** #endif
 223:rtos/uCOS-III/Source/os_q.c **** 
 224:rtos/uCOS-III/Source/os_q.c **** #if (OS_CFG_ARG_CHK_EN > 0u)
 225:rtos/uCOS-III/Source/os_q.c ****     if (p_q == (OS_Q *)0) {                                     /* Validate 'p_q'                  
 226:rtos/uCOS-III/Source/os_q.c ****         OS_TRACE_Q_DEL_EXIT(OS_ERR_OBJ_PTR_NULL);
 227:rtos/uCOS-III/Source/os_q.c ****        *p_err =  OS_ERR_OBJ_PTR_NULL;
 228:rtos/uCOS-III/Source/os_q.c ****         return (0u);
 229:rtos/uCOS-III/Source/os_q.c ****     }
 230:rtos/uCOS-III/Source/os_q.c **** #endif
 231:rtos/uCOS-III/Source/os_q.c **** 
 232:rtos/uCOS-III/Source/os_q.c **** #if (OS_CFG_OBJ_TYPE_CHK_EN > 0u)
 233:rtos/uCOS-III/Source/os_q.c ****     if (p_q->Type != OS_OBJ_TYPE_Q) {                           /* Make sure message queue was crea
 234:rtos/uCOS-III/Source/os_q.c ****         OS_TRACE_Q_DEL_EXIT(OS_ERR_OBJ_TYPE);
 235:rtos/uCOS-III/Source/os_q.c ****        *p_err = OS_ERR_OBJ_TYPE;
 236:rtos/uCOS-III/Source/os_q.c ****         return (0u);
 237:rtos/uCOS-III/Source/os_q.c ****     }
 238:rtos/uCOS-III/Source/os_q.c **** #endif
 239:rtos/uCOS-III/Source/os_q.c **** 
 240:rtos/uCOS-III/Source/os_q.c ****     CPU_CRITICAL_ENTER();
ARM GAS  /tmp/cc61ansq.s 			page 9


 241:rtos/uCOS-III/Source/os_q.c ****     p_pend_list = &p_q->PendList;
 242:rtos/uCOS-III/Source/os_q.c ****     nbr_tasks   = 0u;
 243:rtos/uCOS-III/Source/os_q.c ****     switch (opt) {
 244:rtos/uCOS-III/Source/os_q.c ****         case OS_OPT_DEL_NO_PEND:                                /* Delete message queue only if no 
 245:rtos/uCOS-III/Source/os_q.c ****              if (p_pend_list->HeadPtr == (OS_TCB *)0) {
 246:rtos/uCOS-III/Source/os_q.c **** #if (OS_CFG_DBG_EN > 0u)
 247:rtos/uCOS-III/Source/os_q.c ****                  OS_QDbgListRemove(p_q);
 248:rtos/uCOS-III/Source/os_q.c ****                  OSQQty--;
 249:rtos/uCOS-III/Source/os_q.c **** #endif
 250:rtos/uCOS-III/Source/os_q.c ****                  OS_TRACE_Q_DEL(p_q);
 251:rtos/uCOS-III/Source/os_q.c ****                  OS_QClr(p_q);
 252:rtos/uCOS-III/Source/os_q.c ****                  CPU_CRITICAL_EXIT();
 253:rtos/uCOS-III/Source/os_q.c ****                 *p_err = OS_ERR_NONE;
 254:rtos/uCOS-III/Source/os_q.c ****              } else {
 255:rtos/uCOS-III/Source/os_q.c ****                  CPU_CRITICAL_EXIT();
 256:rtos/uCOS-III/Source/os_q.c ****                 *p_err = OS_ERR_TASK_WAITING;
 257:rtos/uCOS-III/Source/os_q.c ****              }
 258:rtos/uCOS-III/Source/os_q.c ****              break;
 259:rtos/uCOS-III/Source/os_q.c **** 
 260:rtos/uCOS-III/Source/os_q.c ****         case OS_OPT_DEL_ALWAYS:                                 /* Always delete the message queue 
 261:rtos/uCOS-III/Source/os_q.c **** #if (OS_CFG_TS_EN > 0u)
 262:rtos/uCOS-III/Source/os_q.c ****              ts = OS_TS_GET();                                  /* Get local time stamp so all task
 263:rtos/uCOS-III/Source/os_q.c **** #else
 264:rtos/uCOS-III/Source/os_q.c ****              ts = 0u;
 265:rtos/uCOS-III/Source/os_q.c **** #endif
 266:rtos/uCOS-III/Source/os_q.c ****              while (p_pend_list->HeadPtr != (OS_TCB *)0) {      /* Remove all tasks from the pend l
 267:rtos/uCOS-III/Source/os_q.c ****                  p_tcb = p_pend_list->HeadPtr;
 268:rtos/uCOS-III/Source/os_q.c ****                  OS_PendAbort(p_tcb,
 269:rtos/uCOS-III/Source/os_q.c ****                               ts,
 270:rtos/uCOS-III/Source/os_q.c ****                               OS_STATUS_PEND_DEL);
 271:rtos/uCOS-III/Source/os_q.c ****                  nbr_tasks++;
 272:rtos/uCOS-III/Source/os_q.c ****              }
 273:rtos/uCOS-III/Source/os_q.c **** #if (OS_CFG_DBG_EN > 0u)
 274:rtos/uCOS-III/Source/os_q.c ****              OS_QDbgListRemove(p_q);
 275:rtos/uCOS-III/Source/os_q.c ****              OSQQty--;
 276:rtos/uCOS-III/Source/os_q.c **** #endif
 277:rtos/uCOS-III/Source/os_q.c ****              OS_TRACE_Q_DEL(p_q);
 278:rtos/uCOS-III/Source/os_q.c ****              OS_QClr(p_q);
 279:rtos/uCOS-III/Source/os_q.c ****              CPU_CRITICAL_EXIT();
 280:rtos/uCOS-III/Source/os_q.c ****              OSSched();                                         /* Find highest priority task ready
 281:rtos/uCOS-III/Source/os_q.c ****             *p_err = OS_ERR_NONE;
 282:rtos/uCOS-III/Source/os_q.c ****              break;
 283:rtos/uCOS-III/Source/os_q.c **** 
 284:rtos/uCOS-III/Source/os_q.c ****         default:
 285:rtos/uCOS-III/Source/os_q.c ****              CPU_CRITICAL_EXIT();
 286:rtos/uCOS-III/Source/os_q.c ****             *p_err = OS_ERR_OPT_INVALID;
 287:rtos/uCOS-III/Source/os_q.c ****              break;
 288:rtos/uCOS-III/Source/os_q.c ****     }
 289:rtos/uCOS-III/Source/os_q.c ****     OS_TRACE_Q_DEL_EXIT(*p_err);
 290:rtos/uCOS-III/Source/os_q.c ****     return (nbr_tasks);
 291:rtos/uCOS-III/Source/os_q.c **** }
 292:rtos/uCOS-III/Source/os_q.c **** #endif
 293:rtos/uCOS-III/Source/os_q.c **** 
 294:rtos/uCOS-III/Source/os_q.c **** 
 295:rtos/uCOS-III/Source/os_q.c **** /*
 296:rtos/uCOS-III/Source/os_q.c **** ***************************************************************************************************
 297:rtos/uCOS-III/Source/os_q.c **** *                                                     FLUSH QUEUE
ARM GAS  /tmp/cc61ansq.s 			page 10


 298:rtos/uCOS-III/Source/os_q.c **** *
 299:rtos/uCOS-III/Source/os_q.c **** * Description : This function is used to flush the contents of the message queue.
 300:rtos/uCOS-III/Source/os_q.c **** *
 301:rtos/uCOS-III/Source/os_q.c **** * Arguments   : p_q        is a pointer to the message queue to flush
 302:rtos/uCOS-III/Source/os_q.c **** *
 303:rtos/uCOS-III/Source/os_q.c **** *               p_err      is a pointer to a variable that will contain an error code returned by t
 304:rtos/uCOS-III/Source/os_q.c **** *
 305:rtos/uCOS-III/Source/os_q.c **** *                              OS_ERR_NONE              Upon success
 306:rtos/uCOS-III/Source/os_q.c **** *                              OS_ERR_FLUSH_ISR         If you called this function from an ISR
 307:rtos/uCOS-III/Source/os_q.c **** *                              OS_ERR_OBJ_PTR_NULL      If you passed a NULL pointer for 'p_q'
 308:rtos/uCOS-III/Source/os_q.c **** *                              OS_ERR_OBJ_TYPE          If you didn't create the message queue
 309:rtos/uCOS-III/Source/os_q.c **** *                              OS_ERR_OS_NOT_RUNNING    If uC/OS-III is not running yet
 310:rtos/uCOS-III/Source/os_q.c **** *
 311:rtos/uCOS-III/Source/os_q.c **** * Returns     : == 0       if no entries were freed, or upon error.
 312:rtos/uCOS-III/Source/os_q.c **** *               >  0       the number of freed entries.
 313:rtos/uCOS-III/Source/os_q.c **** *
 314:rtos/uCOS-III/Source/os_q.c **** * Note(s)     : 1) You should use this function with great care because, when to flush the queue, y
 315:rtos/uCOS-III/Source/os_q.c **** *                  references to what the queue entries are pointing to and thus, you could cause '
 316:rtos/uCOS-III/Source/os_q.c **** *                  other words, the data you are pointing to that's being referenced by the queue e
 317:rtos/uCOS-III/Source/os_q.c **** *                  likely, need to be de-allocated (i.e. freed).
 318:rtos/uCOS-III/Source/os_q.c **** ***************************************************************************************************
 319:rtos/uCOS-III/Source/os_q.c **** */
 320:rtos/uCOS-III/Source/os_q.c **** 
 321:rtos/uCOS-III/Source/os_q.c **** #if (OS_CFG_Q_FLUSH_EN > 0u)
 322:rtos/uCOS-III/Source/os_q.c **** OS_MSG_QTY  OSQFlush (OS_Q    *p_q,
 323:rtos/uCOS-III/Source/os_q.c ****                       OS_ERR  *p_err)
 324:rtos/uCOS-III/Source/os_q.c **** {
 180              		.loc 1 324 1 view -0
 181              		.cfi_startproc
 182              		@ args = 0, pretend = 0, frame = 0
 183              		@ frame_needed = 0, uses_anonymous_args = 0
 184              		.loc 1 324 1 is_stmt 0 view .LVU57
 185 0000 70B5     		push	{r4, r5, r6, lr}
 186              	.LCFI1:
 187              		.cfi_def_cfa_offset 16
 188              		.cfi_offset 4, -16
 189              		.cfi_offset 5, -12
 190              		.cfi_offset 6, -8
 191              		.cfi_offset 14, -4
 192 0002 0D46     		mov	r5, r1
 325:rtos/uCOS-III/Source/os_q.c ****     OS_MSG_QTY  entries;
 193              		.loc 1 325 5 is_stmt 1 view .LVU58
 326:rtos/uCOS-III/Source/os_q.c ****     CPU_SR_ALLOC();
 194              		.loc 1 326 5 view .LVU59
 195              	.LVL20:
 327:rtos/uCOS-III/Source/os_q.c **** 
 328:rtos/uCOS-III/Source/os_q.c **** 
 329:rtos/uCOS-III/Source/os_q.c **** 
 330:rtos/uCOS-III/Source/os_q.c **** #ifdef OS_SAFETY_CRITICAL
 331:rtos/uCOS-III/Source/os_q.c ****     if (p_err == (OS_ERR *)0) {
 332:rtos/uCOS-III/Source/os_q.c ****         OS_SAFETY_CRITICAL_EXCEPTION();
 333:rtos/uCOS-III/Source/os_q.c ****         return (0u);
 334:rtos/uCOS-III/Source/os_q.c ****     }
 335:rtos/uCOS-III/Source/os_q.c **** #endif
 336:rtos/uCOS-III/Source/os_q.c **** 
 337:rtos/uCOS-III/Source/os_q.c **** #if (OS_CFG_CALLED_FROM_ISR_CHK_EN > 0u)
 338:rtos/uCOS-III/Source/os_q.c ****     if (OSIntNestingCtr > 0u) {                                 /* Can't flush a message queue from
ARM GAS  /tmp/cc61ansq.s 			page 11


 196              		.loc 1 338 5 view .LVU60
 197              		.loc 1 338 25 is_stmt 0 view .LVU61
 198 0004 174B     		ldr	r3, .L22
 199 0006 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 200              		.loc 1 338 8 view .LVU62
 201 0008 4BB9     		cbnz	r3, .L20
 202 000a 0446     		mov	r4, r0
 339:rtos/uCOS-III/Source/os_q.c ****        *p_err = OS_ERR_FLUSH_ISR;
 340:rtos/uCOS-III/Source/os_q.c ****         return (0u);
 341:rtos/uCOS-III/Source/os_q.c ****     }
 342:rtos/uCOS-III/Source/os_q.c **** #endif
 343:rtos/uCOS-III/Source/os_q.c **** 
 344:rtos/uCOS-III/Source/os_q.c **** #if (OS_CFG_INVALID_OS_CALLS_CHK_EN > 0u)
 345:rtos/uCOS-III/Source/os_q.c ****     if (OSRunning != OS_STATE_OS_RUNNING) {                     /* Is the kernel running?          
 203              		.loc 1 345 5 is_stmt 1 view .LVU63
 204              		.loc 1 345 19 is_stmt 0 view .LVU64
 205 000c 164B     		ldr	r3, .L22+4
 206 000e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 207              		.loc 1 345 8 view .LVU65
 208 0010 012B     		cmp	r3, #1
 209 0012 0AD0     		beq	.L16
 346:rtos/uCOS-III/Source/os_q.c ****        *p_err = OS_ERR_OS_NOT_RUNNING;
 210              		.loc 1 346 8 is_stmt 1 view .LVU66
 211              		.loc 1 346 15 is_stmt 0 view .LVU67
 212 0014 45F68963 		movw	r3, #24201
 213 0018 0B80     		strh	r3, [r1]	@ movhi
 347:rtos/uCOS-III/Source/os_q.c ****         return (0u);
 214              		.loc 1 347 9 is_stmt 1 view .LVU68
 215              		.loc 1 347 16 is_stmt 0 view .LVU69
 216 001a 0024     		movs	r4, #0
 217 001c 03E0     		b	.L15
 218              	.L20:
 339:rtos/uCOS-III/Source/os_q.c ****        *p_err = OS_ERR_FLUSH_ISR;
 219              		.loc 1 339 8 is_stmt 1 view .LVU70
 339:rtos/uCOS-III/Source/os_q.c ****        *p_err = OS_ERR_FLUSH_ISR;
 220              		.loc 1 339 15 is_stmt 0 view .LVU71
 221 001e 4FF46C53 		mov	r3, #15104
 222 0022 0B80     		strh	r3, [r1]	@ movhi
 340:rtos/uCOS-III/Source/os_q.c ****     }
 223              		.loc 1 340 9 is_stmt 1 view .LVU72
 340:rtos/uCOS-III/Source/os_q.c ****     }
 224              		.loc 1 340 16 is_stmt 0 view .LVU73
 225 0024 0024     		movs	r4, #0
 226              	.LVL21:
 227              	.L15:
 348:rtos/uCOS-III/Source/os_q.c ****     }
 349:rtos/uCOS-III/Source/os_q.c **** #endif
 350:rtos/uCOS-III/Source/os_q.c **** 
 351:rtos/uCOS-III/Source/os_q.c **** #if (OS_CFG_ARG_CHK_EN > 0u)
 352:rtos/uCOS-III/Source/os_q.c ****     if (p_q == (OS_Q *)0) {                                     /* Validate arguments              
 353:rtos/uCOS-III/Source/os_q.c ****        *p_err = OS_ERR_OBJ_PTR_NULL;
 354:rtos/uCOS-III/Source/os_q.c ****         return (0u);
 355:rtos/uCOS-III/Source/os_q.c ****     }
 356:rtos/uCOS-III/Source/os_q.c **** #endif
 357:rtos/uCOS-III/Source/os_q.c **** 
 358:rtos/uCOS-III/Source/os_q.c **** #if (OS_CFG_OBJ_TYPE_CHK_EN > 0u)
 359:rtos/uCOS-III/Source/os_q.c ****     if (p_q->Type != OS_OBJ_TYPE_Q) {                           /* Make sure message queue was crea
ARM GAS  /tmp/cc61ansq.s 			page 12


 360:rtos/uCOS-III/Source/os_q.c ****        *p_err = OS_ERR_OBJ_TYPE;
 361:rtos/uCOS-III/Source/os_q.c ****         return (0u);
 362:rtos/uCOS-III/Source/os_q.c ****     }
 363:rtos/uCOS-III/Source/os_q.c **** #endif
 364:rtos/uCOS-III/Source/os_q.c **** 
 365:rtos/uCOS-III/Source/os_q.c ****     CPU_CRITICAL_ENTER();
 366:rtos/uCOS-III/Source/os_q.c ****     entries = OS_MsgQFreeAll(&p_q->MsgQ);                       /* Return all OS_MSGs to the OS_MSG
 367:rtos/uCOS-III/Source/os_q.c ****     CPU_CRITICAL_EXIT();
 368:rtos/uCOS-III/Source/os_q.c ****    *p_err   = OS_ERR_NONE;
 369:rtos/uCOS-III/Source/os_q.c ****     return (entries);
 370:rtos/uCOS-III/Source/os_q.c **** }
 228              		.loc 1 370 1 view .LVU74
 229 0026 2046     		mov	r0, r4
 230 0028 70BD     		pop	{r4, r5, r6, pc}
 231              	.LVL22:
 232              	.L16:
 352:rtos/uCOS-III/Source/os_q.c ****        *p_err = OS_ERR_OBJ_PTR_NULL;
 233              		.loc 1 352 5 is_stmt 1 view .LVU75
 352:rtos/uCOS-III/Source/os_q.c ****        *p_err = OS_ERR_OBJ_PTR_NULL;
 234              		.loc 1 352 8 is_stmt 0 view .LVU76
 235 002a 40B1     		cbz	r0, .L21
 359:rtos/uCOS-III/Source/os_q.c ****        *p_err = OS_ERR_OBJ_TYPE;
 236              		.loc 1 359 5 is_stmt 1 view .LVU77
 359:rtos/uCOS-III/Source/os_q.c ****        *p_err = OS_ERR_OBJ_TYPE;
 237              		.loc 1 359 12 is_stmt 0 view .LVU78
 238 002c 0268     		ldr	r2, [r0]
 359:rtos/uCOS-III/Source/os_q.c ****        *p_err = OS_ERR_OBJ_TYPE;
 239              		.loc 1 359 8 view .LVU79
 240 002e 0F4B     		ldr	r3, .L22+8
 241 0030 9A42     		cmp	r2, r3
 242 0032 08D0     		beq	.L18
 360:rtos/uCOS-III/Source/os_q.c ****         return (0u);
 243              		.loc 1 360 8 is_stmt 1 view .LVU80
 360:rtos/uCOS-III/Source/os_q.c ****         return (0u);
 244              		.loc 1 360 15 is_stmt 0 view .LVU81
 245 0034 45F6C453 		movw	r3, #24004
 246 0038 0B80     		strh	r3, [r1]	@ movhi
 361:rtos/uCOS-III/Source/os_q.c ****     }
 247              		.loc 1 361 9 is_stmt 1 view .LVU82
 361:rtos/uCOS-III/Source/os_q.c ****     }
 248              		.loc 1 361 16 is_stmt 0 view .LVU83
 249 003a 0024     		movs	r4, #0
 250 003c F3E7     		b	.L15
 251              	.L21:
 353:rtos/uCOS-III/Source/os_q.c ****         return (0u);
 252              		.loc 1 353 8 is_stmt 1 view .LVU84
 353:rtos/uCOS-III/Source/os_q.c ****         return (0u);
 253              		.loc 1 353 15 is_stmt 0 view .LVU85
 254 003e 45F6C353 		movw	r3, #24003
 255 0042 0B80     		strh	r3, [r1]	@ movhi
 354:rtos/uCOS-III/Source/os_q.c ****     }
 256              		.loc 1 354 9 is_stmt 1 view .LVU86
 354:rtos/uCOS-III/Source/os_q.c ****     }
 257              		.loc 1 354 16 is_stmt 0 view .LVU87
 258 0044 EFE7     		b	.L15
 259              	.L18:
 365:rtos/uCOS-III/Source/os_q.c ****     entries = OS_MsgQFreeAll(&p_q->MsgQ);                       /* Return all OS_MSGs to the OS_MSG
ARM GAS  /tmp/cc61ansq.s 			page 13


 260              		.loc 1 365 5 is_stmt 1 view .LVU88
 365:rtos/uCOS-III/Source/os_q.c ****     entries = OS_MsgQFreeAll(&p_q->MsgQ);                       /* Return all OS_MSGs to the OS_MSG
 261              		.loc 1 365 5 view .LVU89
 365:rtos/uCOS-III/Source/os_q.c ****     entries = OS_MsgQFreeAll(&p_q->MsgQ);                       /* Return all OS_MSGs to the OS_MSG
 262              		.loc 1 365 5 view .LVU90
 263 0046 4020     		movs	r0, #64
 264              	.LVL23:
 365:rtos/uCOS-III/Source/os_q.c ****     entries = OS_MsgQFreeAll(&p_q->MsgQ);                       /* Return all OS_MSGs to the OS_MSG
 265              		.loc 1 365 5 is_stmt 0 view .LVU91
 266 0048 FFF7FEFF 		bl	CPU_SR_Save
 267              	.LVL24:
 365:rtos/uCOS-III/Source/os_q.c ****     entries = OS_MsgQFreeAll(&p_q->MsgQ);                       /* Return all OS_MSGs to the OS_MSG
 268              		.loc 1 365 5 view .LVU92
 269 004c 0646     		mov	r6, r0
 270              	.LVL25:
 365:rtos/uCOS-III/Source/os_q.c ****     entries = OS_MsgQFreeAll(&p_q->MsgQ);                       /* Return all OS_MSGs to the OS_MSG
 271              		.loc 1 365 5 is_stmt 1 view .LVU93
 365:rtos/uCOS-III/Source/os_q.c ****     entries = OS_MsgQFreeAll(&p_q->MsgQ);                       /* Return all OS_MSGs to the OS_MSG
 272              		.loc 1 365 5 view .LVU94
 366:rtos/uCOS-III/Source/os_q.c ****     CPU_CRITICAL_EXIT();
 273              		.loc 1 366 5 view .LVU95
 366:rtos/uCOS-III/Source/os_q.c ****     CPU_CRITICAL_EXIT();
 274              		.loc 1 366 15 is_stmt 0 view .LVU96
 275 004e 04F10C00 		add	r0, r4, #12
 276              	.LVL26:
 366:rtos/uCOS-III/Source/os_q.c ****     CPU_CRITICAL_EXIT();
 277              		.loc 1 366 15 view .LVU97
 278 0052 FFF7FEFF 		bl	OS_MsgQFreeAll
 279              	.LVL27:
 280 0056 0446     		mov	r4, r0
 281              	.LVL28:
 367:rtos/uCOS-III/Source/os_q.c ****    *p_err   = OS_ERR_NONE;
 282              		.loc 1 367 5 is_stmt 1 view .LVU98
 367:rtos/uCOS-III/Source/os_q.c ****    *p_err   = OS_ERR_NONE;
 283              		.loc 1 367 5 view .LVU99
 367:rtos/uCOS-III/Source/os_q.c ****    *p_err   = OS_ERR_NONE;
 284              		.loc 1 367 5 view .LVU100
 285 0058 3046     		mov	r0, r6
 286 005a FFF7FEFF 		bl	CPU_SR_Restore
 287              	.LVL29:
 367:rtos/uCOS-III/Source/os_q.c ****    *p_err   = OS_ERR_NONE;
 288              		.loc 1 367 5 view .LVU101
 367:rtos/uCOS-III/Source/os_q.c ****    *p_err   = OS_ERR_NONE;
 289              		.loc 1 367 5 view .LVU102
 368:rtos/uCOS-III/Source/os_q.c ****     return (entries);
 290              		.loc 1 368 4 view .LVU103
 368:rtos/uCOS-III/Source/os_q.c ****     return (entries);
 291              		.loc 1 368 13 is_stmt 0 view .LVU104
 292 005e 0023     		movs	r3, #0
 293 0060 2B80     		strh	r3, [r5]	@ movhi
 369:rtos/uCOS-III/Source/os_q.c **** }
 294              		.loc 1 369 5 is_stmt 1 view .LVU105
 369:rtos/uCOS-III/Source/os_q.c **** }
 295              		.loc 1 369 12 is_stmt 0 view .LVU106
 296 0062 E0E7     		b	.L15
 297              	.L23:
 298              		.align	2
ARM GAS  /tmp/cc61ansq.s 			page 14


 299              	.L22:
 300 0064 00000000 		.word	OSIntNestingCtr
 301 0068 00000000 		.word	OSRunning
 302 006c 51554555 		.word	1430607185
 303              		.cfi_endproc
 304              	.LFE2:
 306              		.section	.text.OSQPend,"ax",%progbits
 307              		.align	1
 308              		.global	OSQPend
 309              		.syntax unified
 310              		.thumb
 311              		.thumb_func
 312              		.fpu fpv4-sp-d16
 314              	OSQPend:
 315              	.LVL30:
 316              	.LFB3:
 371:rtos/uCOS-III/Source/os_q.c **** #endif
 372:rtos/uCOS-III/Source/os_q.c **** 
 373:rtos/uCOS-III/Source/os_q.c **** 
 374:rtos/uCOS-III/Source/os_q.c **** /*
 375:rtos/uCOS-III/Source/os_q.c **** ***************************************************************************************************
 376:rtos/uCOS-III/Source/os_q.c **** *                                            PEND ON A QUEUE FOR A MESSAGE
 377:rtos/uCOS-III/Source/os_q.c **** *
 378:rtos/uCOS-III/Source/os_q.c **** * Description: This function waits for a message to be sent to a queue.
 379:rtos/uCOS-III/Source/os_q.c **** *
 380:rtos/uCOS-III/Source/os_q.c **** * Arguments  : p_q           is a pointer to the message queue
 381:rtos/uCOS-III/Source/os_q.c **** *
 382:rtos/uCOS-III/Source/os_q.c **** *              timeout       is an optional timeout period (in clock ticks).  If non-zero, your tas
 383:rtos/uCOS-III/Source/os_q.c **** *                            message to arrive at the queue up to the amount of time specified by t
 384:rtos/uCOS-III/Source/os_q.c **** *                            specify 0, however, your task will wait forever at the specified queue
 385:rtos/uCOS-III/Source/os_q.c **** *                            arrives.
 386:rtos/uCOS-III/Source/os_q.c **** *
 387:rtos/uCOS-III/Source/os_q.c **** *              opt           determines whether the user wants to block if the queue is empty or no
 388:rtos/uCOS-III/Source/os_q.c **** *
 389:rtos/uCOS-III/Source/os_q.c **** *                                OS_OPT_PEND_BLOCKING
 390:rtos/uCOS-III/Source/os_q.c **** *                                OS_OPT_PEND_NON_BLOCKING
 391:rtos/uCOS-III/Source/os_q.c **** *
 392:rtos/uCOS-III/Source/os_q.c **** *              p_msg_size    is a pointer to a variable that will receive the size of the message
 393:rtos/uCOS-III/Source/os_q.c **** *
 394:rtos/uCOS-III/Source/os_q.c **** *              p_ts          is a pointer to a variable that will receive the timestamp of when the
 395:rtos/uCOS-III/Source/os_q.c **** *                            received, pend aborted or the message queue deleted,  If you pass a NU
 396:rtos/uCOS-III/Source/os_q.c **** *                            (CPU_TS *)0) then you will not get the timestamp.  In other words, pas
 397:rtos/uCOS-III/Source/os_q.c **** *                            is valid and indicates that you don't need the timestamp.
 398:rtos/uCOS-III/Source/os_q.c **** *
 399:rtos/uCOS-III/Source/os_q.c **** *              p_err         is a pointer to a variable that will contain an error code returned by
 400:rtos/uCOS-III/Source/os_q.c **** *
 401:rtos/uCOS-III/Source/os_q.c **** *                                OS_ERR_NONE               The call was successful and your task re
 402:rtos/uCOS-III/Source/os_q.c **** *                                OS_ERR_OBJ_DEL            If 'p_q' was deleted
 403:rtos/uCOS-III/Source/os_q.c **** *                                OS_ERR_OBJ_PTR_NULL       If you pass a NULL pointer for 'p_q'
 404:rtos/uCOS-III/Source/os_q.c **** *                                OS_ERR_OBJ_TYPE           If the message queue was not created
 405:rtos/uCOS-III/Source/os_q.c **** *                                OS_ERR_OPT_INVALID        You specified an invalid option
 406:rtos/uCOS-III/Source/os_q.c **** *                                OS_ERR_OS_NOT_RUNNING     If uC/OS-III is not running yet
 407:rtos/uCOS-III/Source/os_q.c **** *                                OS_ERR_PEND_ABORT         The pend was aborted
 408:rtos/uCOS-III/Source/os_q.c **** *                                OS_ERR_PEND_ISR           If you called this function from an ISR
 409:rtos/uCOS-III/Source/os_q.c **** *                                OS_ERR_PEND_WOULD_BLOCK   If you specified non-blocking but the qu
 410:rtos/uCOS-III/Source/os_q.c **** *                                OS_ERR_PTR_INVALID        If you passed a NULL pointer of 'p_msg_s
 411:rtos/uCOS-III/Source/os_q.c **** *                                OS_ERR_SCHED_LOCKED       The scheduler is locked
ARM GAS  /tmp/cc61ansq.s 			page 15


 412:rtos/uCOS-III/Source/os_q.c **** *                                OS_ERR_STATUS_INVALID     If the pend status has an invalid value
 413:rtos/uCOS-III/Source/os_q.c **** *                                OS_ERR_TIMEOUT            A message was not received within the sp
 414:rtos/uCOS-III/Source/os_q.c **** *                                                          would lead to a suspension.
 415:rtos/uCOS-III/Source/os_q.c **** *                                OS_ERR_TICK_DISABLED      If kernel ticks are disabled and a timeo
 416:rtos/uCOS-III/Source/os_q.c **** *
 417:rtos/uCOS-III/Source/os_q.c **** * Returns    : != (void *)0  is a pointer to the message received
 418:rtos/uCOS-III/Source/os_q.c **** *              == (void *)0  if you received a NULL pointer message or,
 419:rtos/uCOS-III/Source/os_q.c **** *                            if no message was received or,
 420:rtos/uCOS-III/Source/os_q.c **** *                            if 'p_q' is a NULL pointer or,
 421:rtos/uCOS-III/Source/os_q.c **** *                            if you didn't pass a pointer to a queue.
 422:rtos/uCOS-III/Source/os_q.c **** *
 423:rtos/uCOS-III/Source/os_q.c **** * Note(s)    : This API 'MUST NOT' be called from a timer callback function.
 424:rtos/uCOS-III/Source/os_q.c **** ***************************************************************************************************
 425:rtos/uCOS-III/Source/os_q.c **** */
 426:rtos/uCOS-III/Source/os_q.c **** 
 427:rtos/uCOS-III/Source/os_q.c **** void  *OSQPend (OS_Q         *p_q,
 428:rtos/uCOS-III/Source/os_q.c ****                 OS_TICK       timeout,
 429:rtos/uCOS-III/Source/os_q.c ****                 OS_OPT        opt,
 430:rtos/uCOS-III/Source/os_q.c ****                 OS_MSG_SIZE  *p_msg_size,
 431:rtos/uCOS-III/Source/os_q.c ****                 CPU_TS       *p_ts,
 432:rtos/uCOS-III/Source/os_q.c ****                 OS_ERR       *p_err)
 433:rtos/uCOS-III/Source/os_q.c **** {
 317              		.loc 1 433 1 is_stmt 1 view -0
 318              		.cfi_startproc
 319              		@ args = 8, pretend = 0, frame = 0
 320              		@ frame_needed = 0, uses_anonymous_args = 0
 321              		.loc 1 433 1 is_stmt 0 view .LVU108
 322 0000 2DE9F047 		push	{r4, r5, r6, r7, r8, r9, r10, lr}
 323              	.LCFI2:
 324              		.cfi_def_cfa_offset 32
 325              		.cfi_offset 4, -32
 326              		.cfi_offset 5, -28
 327              		.cfi_offset 6, -24
 328              		.cfi_offset 7, -20
 329              		.cfi_offset 8, -16
 330              		.cfi_offset 9, -12
 331              		.cfi_offset 10, -8
 332              		.cfi_offset 14, -4
 333 0004 0546     		mov	r5, r0
 334 0006 0F46     		mov	r7, r1
 335 0008 1446     		mov	r4, r2
 336 000a 1E46     		mov	r6, r3
 337 000c DDF82490 		ldr	r9, [sp, #36]
 434:rtos/uCOS-III/Source/os_q.c ****     void  *p_void;
 338              		.loc 1 434 5 is_stmt 1 view .LVU109
 435:rtos/uCOS-III/Source/os_q.c ****     CPU_SR_ALLOC();
 339              		.loc 1 435 5 view .LVU110
 340              	.LVL31:
 436:rtos/uCOS-III/Source/os_q.c **** 
 437:rtos/uCOS-III/Source/os_q.c **** 
 438:rtos/uCOS-III/Source/os_q.c **** #ifdef OS_SAFETY_CRITICAL
 439:rtos/uCOS-III/Source/os_q.c ****     if (p_err == (OS_ERR *)0) {
 440:rtos/uCOS-III/Source/os_q.c ****         OS_SAFETY_CRITICAL_EXCEPTION();
 441:rtos/uCOS-III/Source/os_q.c ****         return ((void *)0);
 442:rtos/uCOS-III/Source/os_q.c ****     }
 443:rtos/uCOS-III/Source/os_q.c **** #endif
 444:rtos/uCOS-III/Source/os_q.c **** 
ARM GAS  /tmp/cc61ansq.s 			page 16


 445:rtos/uCOS-III/Source/os_q.c ****     OS_TRACE_Q_PEND_ENTER(p_q, timeout, opt, p_msg_size, p_ts);
 341              		.loc 1 445 63 view .LVU111
 446:rtos/uCOS-III/Source/os_q.c **** 
 447:rtos/uCOS-III/Source/os_q.c **** #if (OS_CFG_TICK_EN == 0u)
 448:rtos/uCOS-III/Source/os_q.c ****     if (timeout != 0u) {
 449:rtos/uCOS-III/Source/os_q.c ****        *p_err = OS_ERR_TICK_DISABLED;
 450:rtos/uCOS-III/Source/os_q.c ****         OS_TRACE_Q_PEND_FAILED(p_q);
 451:rtos/uCOS-III/Source/os_q.c ****         OS_TRACE_Q_PEND_EXIT(OS_ERR_TICK_DISABLED);
 452:rtos/uCOS-III/Source/os_q.c ****         return ((void *)0);
 453:rtos/uCOS-III/Source/os_q.c ****     }
 454:rtos/uCOS-III/Source/os_q.c **** #endif
 455:rtos/uCOS-III/Source/os_q.c **** 
 456:rtos/uCOS-III/Source/os_q.c **** #if (OS_CFG_CALLED_FROM_ISR_CHK_EN > 0u)
 457:rtos/uCOS-III/Source/os_q.c ****     if (OSIntNestingCtr > 0u) {                                 /* Not allowed to call from an ISR 
 342              		.loc 1 457 5 view .LVU112
 343              		.loc 1 457 25 is_stmt 0 view .LVU113
 344 0010 5D4B     		ldr	r3, .L53
 345              	.LVL32:
 346              		.loc 1 457 25 view .LVU114
 347 0012 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 348              		.loc 1 457 8 view .LVU115
 349 0014 13B1     		cbz	r3, .L25
 458:rtos/uCOS-III/Source/os_q.c ****         if ((opt & OS_OPT_PEND_NON_BLOCKING) != OS_OPT_PEND_NON_BLOCKING) {
 350              		.loc 1 458 9 is_stmt 1 view .LVU116
 351              		.loc 1 458 12 is_stmt 0 view .LVU117
 352 0016 12F4004F 		tst	r2, #32768
 353 001a 43D0     		beq	.L44
 354              	.L25:
 459:rtos/uCOS-III/Source/os_q.c ****             OS_TRACE_Q_PEND_FAILED(p_q);
 460:rtos/uCOS-III/Source/os_q.c ****             OS_TRACE_Q_PEND_EXIT(OS_ERR_PEND_ISR);
 461:rtos/uCOS-III/Source/os_q.c ****            *p_err = OS_ERR_PEND_ISR;
 462:rtos/uCOS-III/Source/os_q.c ****             return ((void *)0);
 463:rtos/uCOS-III/Source/os_q.c ****         }
 464:rtos/uCOS-III/Source/os_q.c ****     }
 465:rtos/uCOS-III/Source/os_q.c **** #endif
 466:rtos/uCOS-III/Source/os_q.c **** 
 467:rtos/uCOS-III/Source/os_q.c **** #if (OS_CFG_INVALID_OS_CALLS_CHK_EN > 0u)
 468:rtos/uCOS-III/Source/os_q.c ****     if (OSRunning != OS_STATE_OS_RUNNING) {                     /* Is the kernel running?          
 355              		.loc 1 468 5 is_stmt 1 view .LVU118
 356              		.loc 1 468 19 is_stmt 0 view .LVU119
 357 001c 5B4B     		ldr	r3, .L53+4
 358 001e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 359              		.loc 1 468 8 view .LVU120
 360 0020 012B     		cmp	r3, #1
 361 0022 46D1     		bne	.L45
 469:rtos/uCOS-III/Source/os_q.c ****         OS_TRACE_Q_PEND_EXIT(OS_ERR_OS_NOT_RUNNING);
 470:rtos/uCOS-III/Source/os_q.c ****        *p_err = OS_ERR_OS_NOT_RUNNING;
 471:rtos/uCOS-III/Source/os_q.c ****         return ((void *)0);
 472:rtos/uCOS-III/Source/os_q.c ****     }
 473:rtos/uCOS-III/Source/os_q.c **** #endif
 474:rtos/uCOS-III/Source/os_q.c **** 
 475:rtos/uCOS-III/Source/os_q.c **** #if (OS_CFG_ARG_CHK_EN > 0u)
 476:rtos/uCOS-III/Source/os_q.c ****     if (p_q == (OS_Q *)0) {                                     /* Validate arguments              
 362              		.loc 1 476 5 is_stmt 1 view .LVU121
 363              		.loc 1 476 8 is_stmt 0 view .LVU122
 364 0024 002D     		cmp	r5, #0
 365 0026 4DD0     		beq	.L46
ARM GAS  /tmp/cc61ansq.s 			page 17


 477:rtos/uCOS-III/Source/os_q.c ****         OS_TRACE_Q_PEND_FAILED(p_q);
 478:rtos/uCOS-III/Source/os_q.c ****         OS_TRACE_Q_PEND_EXIT(OS_ERR_OBJ_PTR_NULL);
 479:rtos/uCOS-III/Source/os_q.c ****        *p_err = OS_ERR_OBJ_PTR_NULL;
 480:rtos/uCOS-III/Source/os_q.c ****         return ((void *)0);
 481:rtos/uCOS-III/Source/os_q.c ****     }
 482:rtos/uCOS-III/Source/os_q.c ****     if (p_msg_size == (OS_MSG_SIZE *)0) {
 366              		.loc 1 482 5 is_stmt 1 view .LVU123
 367              		.loc 1 482 8 is_stmt 0 view .LVU124
 368 0028 002E     		cmp	r6, #0
 369 002a 51D0     		beq	.L47
 483:rtos/uCOS-III/Source/os_q.c ****         OS_TRACE_Q_PEND_FAILED(p_q);
 484:rtos/uCOS-III/Source/os_q.c ****         OS_TRACE_Q_PEND_EXIT(OS_ERR_PTR_INVALID);
 485:rtos/uCOS-III/Source/os_q.c ****        *p_err = OS_ERR_PTR_INVALID;
 486:rtos/uCOS-III/Source/os_q.c ****         return ((void *)0);
 487:rtos/uCOS-III/Source/os_q.c ****     }
 488:rtos/uCOS-III/Source/os_q.c ****     switch (opt) {
 370              		.loc 1 488 5 is_stmt 1 view .LVU125
 371 002c 14B1     		cbz	r4, .L30
 372 002e B4F5004F 		cmp	r4, #32768
 373 0032 53D1     		bne	.L48
 374              	.L30:
 489:rtos/uCOS-III/Source/os_q.c ****         case OS_OPT_PEND_BLOCKING:
 490:rtos/uCOS-III/Source/os_q.c ****         case OS_OPT_PEND_NON_BLOCKING:
 491:rtos/uCOS-III/Source/os_q.c ****              break;
 375              		.loc 1 491 14 view .LVU126
 492:rtos/uCOS-III/Source/os_q.c **** 
 493:rtos/uCOS-III/Source/os_q.c ****         default:
 494:rtos/uCOS-III/Source/os_q.c ****              OS_TRACE_Q_PEND_FAILED(p_q);
 495:rtos/uCOS-III/Source/os_q.c ****              OS_TRACE_Q_PEND_EXIT(OS_ERR_OPT_INVALID);
 496:rtos/uCOS-III/Source/os_q.c ****             *p_err = OS_ERR_OPT_INVALID;
 497:rtos/uCOS-III/Source/os_q.c ****              return ((void *)0);
 498:rtos/uCOS-III/Source/os_q.c ****     }
 499:rtos/uCOS-III/Source/os_q.c **** #endif
 500:rtos/uCOS-III/Source/os_q.c **** 
 501:rtos/uCOS-III/Source/os_q.c **** #if (OS_CFG_OBJ_TYPE_CHK_EN > 0u)
 502:rtos/uCOS-III/Source/os_q.c ****     if (p_q->Type != OS_OBJ_TYPE_Q) {                           /* Make sure message queue was crea
 376              		.loc 1 502 5 view .LVU127
 377              		.loc 1 502 12 is_stmt 0 view .LVU128
 378 0034 2A68     		ldr	r2, [r5]
 379              	.LVL33:
 380              		.loc 1 502 8 view .LVU129
 381 0036 564B     		ldr	r3, .L53+8
 382 0038 9A42     		cmp	r2, r3
 383 003a 56D1     		bne	.L49
 503:rtos/uCOS-III/Source/os_q.c ****         OS_TRACE_Q_PEND_FAILED(p_q);
 504:rtos/uCOS-III/Source/os_q.c ****         OS_TRACE_Q_PEND_EXIT(OS_ERR_OBJ_TYPE);
 505:rtos/uCOS-III/Source/os_q.c ****        *p_err = OS_ERR_OBJ_TYPE;
 506:rtos/uCOS-III/Source/os_q.c ****         return ((void *)0);
 507:rtos/uCOS-III/Source/os_q.c ****     }
 508:rtos/uCOS-III/Source/os_q.c **** #endif
 509:rtos/uCOS-III/Source/os_q.c **** 
 510:rtos/uCOS-III/Source/os_q.c ****     if (p_ts != (CPU_TS *)0) {
 384              		.loc 1 510 5 is_stmt 1 view .LVU130
 385              		.loc 1 510 8 is_stmt 0 view .LVU131
 386 003c 089B     		ldr	r3, [sp, #32]
 387 003e 13B1     		cbz	r3, .L32
 511:rtos/uCOS-III/Source/os_q.c ****        *p_ts = 0u;                                              /* Initialize the returned timestam
ARM GAS  /tmp/cc61ansq.s 			page 18


 388              		.loc 1 511 8 is_stmt 1 view .LVU132
 389              		.loc 1 511 14 is_stmt 0 view .LVU133
 390 0040 0023     		movs	r3, #0
 391 0042 089A     		ldr	r2, [sp, #32]
 392 0044 1360     		str	r3, [r2]
 393              	.L32:
 512:rtos/uCOS-III/Source/os_q.c ****     }
 513:rtos/uCOS-III/Source/os_q.c **** 
 514:rtos/uCOS-III/Source/os_q.c ****     CPU_CRITICAL_ENTER();
 394              		.loc 1 514 5 is_stmt 1 view .LVU134
 395              		.loc 1 514 5 view .LVU135
 396              		.loc 1 514 5 view .LVU136
 397 0046 4020     		movs	r0, #64
 398              	.LVL34:
 399              		.loc 1 514 5 is_stmt 0 view .LVU137
 400 0048 FFF7FEFF 		bl	CPU_SR_Save
 401              	.LVL35:
 402              		.loc 1 514 5 view .LVU138
 403 004c 8246     		mov	r10, r0
 404              	.LVL36:
 405              		.loc 1 514 5 is_stmt 1 view .LVU139
 406              		.loc 1 514 5 view .LVU140
 515:rtos/uCOS-III/Source/os_q.c ****     p_void = OS_MsgQGet(&p_q->MsgQ,                             /* Any message waiting in the messa
 407              		.loc 1 515 5 view .LVU141
 408              		.loc 1 515 14 is_stmt 0 view .LVU142
 409 004e 4B46     		mov	r3, r9
 410 0050 089A     		ldr	r2, [sp, #32]
 411 0052 3146     		mov	r1, r6
 412 0054 05F10C00 		add	r0, r5, #12
 413              	.LVL37:
 414              		.loc 1 515 14 view .LVU143
 415 0058 FFF7FEFF 		bl	OS_MsgQGet
 416              	.LVL38:
 417 005c 8046     		mov	r8, r0
 418              	.LVL39:
 516:rtos/uCOS-III/Source/os_q.c ****                         p_msg_size,
 517:rtos/uCOS-III/Source/os_q.c ****                         p_ts,
 518:rtos/uCOS-III/Source/os_q.c ****                         p_err);
 519:rtos/uCOS-III/Source/os_q.c ****     if (*p_err == OS_ERR_NONE) {
 419              		.loc 1 519 5 is_stmt 1 view .LVU144
 420              		.loc 1 519 9 is_stmt 0 view .LVU145
 421 005e B9F80030 		ldrh	r3, [r9]
 422              		.loc 1 519 8 view .LVU146
 423 0062 002B     		cmp	r3, #0
 424 0064 48D0     		beq	.L50
 520:rtos/uCOS-III/Source/os_q.c ****         OS_TRACE_Q_PEND(p_q);
 521:rtos/uCOS-III/Source/os_q.c ****         CPU_CRITICAL_EXIT();
 522:rtos/uCOS-III/Source/os_q.c ****         OS_TRACE_Q_PEND_EXIT(OS_ERR_NONE);
 523:rtos/uCOS-III/Source/os_q.c ****         return (p_void);                                        /* Yes, Return message received    
 524:rtos/uCOS-III/Source/os_q.c ****     }
 525:rtos/uCOS-III/Source/os_q.c **** 
 526:rtos/uCOS-III/Source/os_q.c ****     if ((opt & OS_OPT_PEND_NON_BLOCKING) != 0u) {               /* Caller wants to block if not ava
 425              		.loc 1 526 5 is_stmt 1 view .LVU147
 426              		.loc 1 526 8 is_stmt 0 view .LVU148
 427 0066 14F4004F 		tst	r4, #32768
 428 006a 49D1     		bne	.L51
 527:rtos/uCOS-III/Source/os_q.c ****         CPU_CRITICAL_EXIT();
ARM GAS  /tmp/cc61ansq.s 			page 19


 528:rtos/uCOS-III/Source/os_q.c ****         OS_TRACE_Q_PEND_FAILED(p_q);
 529:rtos/uCOS-III/Source/os_q.c ****         OS_TRACE_Q_PEND_EXIT(OS_ERR_PEND_WOULD_BLOCK);
 530:rtos/uCOS-III/Source/os_q.c ****        *p_err = OS_ERR_PEND_WOULD_BLOCK;                        /* No                              
 531:rtos/uCOS-III/Source/os_q.c ****         return ((void *)0);
 532:rtos/uCOS-III/Source/os_q.c ****     } else {
 533:rtos/uCOS-III/Source/os_q.c ****         if (OSSchedLockNestingCtr > 0u) {                       /* Can't pend when the scheduler is
 429              		.loc 1 533 9 is_stmt 1 view .LVU149
 430              		.loc 1 533 35 is_stmt 0 view .LVU150
 431 006c 494B     		ldr	r3, .L53+12
 432 006e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 433              		.loc 1 533 12 view .LVU151
 434 0070 002B     		cmp	r3, #0
 435 0072 4FD1     		bne	.L52
 534:rtos/uCOS-III/Source/os_q.c ****             CPU_CRITICAL_EXIT();
 535:rtos/uCOS-III/Source/os_q.c ****             OS_TRACE_Q_PEND_FAILED(p_q);
 536:rtos/uCOS-III/Source/os_q.c ****             OS_TRACE_Q_PEND_EXIT(OS_ERR_SCHED_LOCKED);
 537:rtos/uCOS-III/Source/os_q.c ****            *p_err = OS_ERR_SCHED_LOCKED;
 538:rtos/uCOS-III/Source/os_q.c ****             return ((void *)0);
 539:rtos/uCOS-III/Source/os_q.c ****         }
 540:rtos/uCOS-III/Source/os_q.c ****     }
 541:rtos/uCOS-III/Source/os_q.c **** 
 542:rtos/uCOS-III/Source/os_q.c ****     OS_Pend((OS_PEND_OBJ *)((void *)p_q),                       /* Block task pending on Message Qu
 436              		.loc 1 542 5 is_stmt 1 view .LVU152
 437 0074 484C     		ldr	r4, .L53+16
 438 0076 3B46     		mov	r3, r7
 439 0078 0522     		movs	r2, #5
 440 007a 2168     		ldr	r1, [r4]
 441 007c 2846     		mov	r0, r5
 442              	.LVL40:
 443              		.loc 1 542 5 is_stmt 0 view .LVU153
 444 007e FFF7FEFF 		bl	OS_Pend
 445              	.LVL41:
 543:rtos/uCOS-III/Source/os_q.c ****             OSTCBCurPtr,
 544:rtos/uCOS-III/Source/os_q.c ****             OS_TASK_PEND_ON_Q,
 545:rtos/uCOS-III/Source/os_q.c ****             timeout);
 546:rtos/uCOS-III/Source/os_q.c ****     CPU_CRITICAL_EXIT();
 446              		.loc 1 546 5 is_stmt 1 view .LVU154
 447              		.loc 1 546 5 view .LVU155
 448              		.loc 1 546 5 view .LVU156
 449 0082 5046     		mov	r0, r10
 450 0084 FFF7FEFF 		bl	CPU_SR_Restore
 451              	.LVL42:
 452              		.loc 1 546 5 view .LVU157
 453              		.loc 1 546 5 view .LVU158
 547:rtos/uCOS-III/Source/os_q.c ****     OS_TRACE_Q_PEND_BLOCK(p_q);
 454              		.loc 1 547 31 view .LVU159
 548:rtos/uCOS-III/Source/os_q.c ****     OSSched();                                                  /* Find the next highest priority t
 455              		.loc 1 548 5 view .LVU160
 456 0088 FFF7FEFF 		bl	OSSched
 457              	.LVL43:
 549:rtos/uCOS-III/Source/os_q.c **** 
 550:rtos/uCOS-III/Source/os_q.c ****     CPU_CRITICAL_ENTER();
 458              		.loc 1 550 5 view .LVU161
 459              		.loc 1 550 5 view .LVU162
 460              		.loc 1 550 5 view .LVU163
 461 008c 4020     		movs	r0, #64
 462 008e FFF7FEFF 		bl	CPU_SR_Save
ARM GAS  /tmp/cc61ansq.s 			page 20


 463              	.LVL44:
 464              		.loc 1 550 5 view .LVU164
 465              		.loc 1 550 5 view .LVU165
 551:rtos/uCOS-III/Source/os_q.c ****     switch (OSTCBCurPtr->PendStatus) {
 466              		.loc 1 551 5 view .LVU166
 467              		.loc 1 551 24 is_stmt 0 view .LVU167
 468 0092 2268     		ldr	r2, [r4]
 469 0094 92F82D30 		ldrb	r3, [r2, #45]	@ zero_extendqisi2
 470 0098 032B     		cmp	r3, #3
 471 009a 6BD8     		bhi	.L36
 472 009c DFE803F0 		tbb	[pc, r3]
 473              	.L38:
 474 00a0 44       		.byte	(.L41-.L38)/2
 475 00a1 4F       		.byte	(.L40-.L38)/2
 476 00a2 61       		.byte	(.L39-.L38)/2
 477 00a3 58       		.byte	(.L37-.L38)/2
 478              	.LVL45:
 479              		.p2align 1
 480              	.L44:
 459:rtos/uCOS-III/Source/os_q.c ****             OS_TRACE_Q_PEND_EXIT(OS_ERR_PEND_ISR);
 481              		.loc 1 459 40 is_stmt 1 view .LVU168
 460:rtos/uCOS-III/Source/os_q.c ****            *p_err = OS_ERR_PEND_ISR;
 482              		.loc 1 460 50 view .LVU169
 461:rtos/uCOS-III/Source/os_q.c ****             return ((void *)0);
 483              		.loc 1 461 12 view .LVU170
 461:rtos/uCOS-III/Source/os_q.c ****             return ((void *)0);
 484              		.loc 1 461 19 is_stmt 0 view .LVU171
 485 00a4 46F2AE13 		movw	r3, #25006
 486 00a8 A9F80030 		strh	r3, [r9]	@ movhi
 462:rtos/uCOS-III/Source/os_q.c ****         }
 487              		.loc 1 462 13 is_stmt 1 view .LVU172
 462:rtos/uCOS-III/Source/os_q.c ****         }
 488              		.loc 1 462 20 is_stmt 0 view .LVU173
 489 00ac 4FF00008 		mov	r8, #0
 490 00b0 05E0     		b	.L24
 491              	.L45:
 469:rtos/uCOS-III/Source/os_q.c ****        *p_err = OS_ERR_OS_NOT_RUNNING;
 492              		.loc 1 469 52 is_stmt 1 view .LVU174
 470:rtos/uCOS-III/Source/os_q.c ****         return ((void *)0);
 493              		.loc 1 470 8 view .LVU175
 470:rtos/uCOS-III/Source/os_q.c ****         return ((void *)0);
 494              		.loc 1 470 15 is_stmt 0 view .LVU176
 495 00b2 45F68963 		movw	r3, #24201
 496 00b6 A9F80030 		strh	r3, [r9]	@ movhi
 471:rtos/uCOS-III/Source/os_q.c ****     }
 497              		.loc 1 471 9 is_stmt 1 view .LVU177
 471:rtos/uCOS-III/Source/os_q.c ****     }
 498              		.loc 1 471 16 is_stmt 0 view .LVU178
 499 00ba 4FF00008 		mov	r8, #0
 500              	.LVL46:
 501              	.L24:
 552:rtos/uCOS-III/Source/os_q.c ****         case OS_STATUS_PEND_OK:                                 /* Extract message from TCB (Put th
 553:rtos/uCOS-III/Source/os_q.c ****              p_void     = OSTCBCurPtr->MsgPtr;
 554:rtos/uCOS-III/Source/os_q.c ****             *p_msg_size = OSTCBCurPtr->MsgSize;
 555:rtos/uCOS-III/Source/os_q.c **** #if (OS_CFG_TS_EN > 0u)
 556:rtos/uCOS-III/Source/os_q.c ****              if (p_ts  != (CPU_TS *)0) {
 557:rtos/uCOS-III/Source/os_q.c ****                 *p_ts  =  OSTCBCurPtr->TS;
ARM GAS  /tmp/cc61ansq.s 			page 21


 558:rtos/uCOS-III/Source/os_q.c ****              }
 559:rtos/uCOS-III/Source/os_q.c **** #endif
 560:rtos/uCOS-III/Source/os_q.c ****              OS_TRACE_Q_PEND(p_q);
 561:rtos/uCOS-III/Source/os_q.c ****             *p_err      = OS_ERR_NONE;
 562:rtos/uCOS-III/Source/os_q.c ****              break;
 563:rtos/uCOS-III/Source/os_q.c **** 
 564:rtos/uCOS-III/Source/os_q.c ****         case OS_STATUS_PEND_ABORT:                              /* Indicate that we aborted        
 565:rtos/uCOS-III/Source/os_q.c ****              p_void     = (void *)0;
 566:rtos/uCOS-III/Source/os_q.c ****             *p_msg_size =         0u;
 567:rtos/uCOS-III/Source/os_q.c **** #if (OS_CFG_TS_EN > 0u)
 568:rtos/uCOS-III/Source/os_q.c ****              if (p_ts  != (CPU_TS *)0) {
 569:rtos/uCOS-III/Source/os_q.c ****                 *p_ts  =  OSTCBCurPtr->TS;
 570:rtos/uCOS-III/Source/os_q.c ****              }
 571:rtos/uCOS-III/Source/os_q.c **** #endif
 572:rtos/uCOS-III/Source/os_q.c ****              OS_TRACE_Q_PEND_FAILED(p_q);
 573:rtos/uCOS-III/Source/os_q.c ****             *p_err      = OS_ERR_PEND_ABORT;
 574:rtos/uCOS-III/Source/os_q.c ****              break;
 575:rtos/uCOS-III/Source/os_q.c **** 
 576:rtos/uCOS-III/Source/os_q.c ****         case OS_STATUS_PEND_TIMEOUT:                            /* Indicate that we didn't get even
 577:rtos/uCOS-III/Source/os_q.c ****              p_void     = (void *)0;
 578:rtos/uCOS-III/Source/os_q.c ****             *p_msg_size =         0u;
 579:rtos/uCOS-III/Source/os_q.c ****              OS_TRACE_Q_PEND_FAILED(p_q);
 580:rtos/uCOS-III/Source/os_q.c ****             *p_err      = OS_ERR_TIMEOUT;
 581:rtos/uCOS-III/Source/os_q.c ****              break;
 582:rtos/uCOS-III/Source/os_q.c **** 
 583:rtos/uCOS-III/Source/os_q.c ****         case OS_STATUS_PEND_DEL:                                /* Indicate that object pended on h
 584:rtos/uCOS-III/Source/os_q.c ****              p_void     = (void *)0;
 585:rtos/uCOS-III/Source/os_q.c ****             *p_msg_size =         0u;
 586:rtos/uCOS-III/Source/os_q.c **** #if (OS_CFG_TS_EN > 0u)
 587:rtos/uCOS-III/Source/os_q.c ****              if (p_ts  != (CPU_TS *)0) {
 588:rtos/uCOS-III/Source/os_q.c ****                 *p_ts  =  OSTCBCurPtr->TS;
 589:rtos/uCOS-III/Source/os_q.c ****              }
 590:rtos/uCOS-III/Source/os_q.c **** #endif
 591:rtos/uCOS-III/Source/os_q.c ****              OS_TRACE_Q_PEND_FAILED(p_q);
 592:rtos/uCOS-III/Source/os_q.c ****             *p_err      = OS_ERR_OBJ_DEL;
 593:rtos/uCOS-III/Source/os_q.c ****              break;
 594:rtos/uCOS-III/Source/os_q.c **** 
 595:rtos/uCOS-III/Source/os_q.c ****         default:
 596:rtos/uCOS-III/Source/os_q.c ****              p_void     = (void *)0;
 597:rtos/uCOS-III/Source/os_q.c ****             *p_msg_size =         0u;
 598:rtos/uCOS-III/Source/os_q.c ****              OS_TRACE_Q_PEND_FAILED(p_q);
 599:rtos/uCOS-III/Source/os_q.c ****             *p_err      = OS_ERR_STATUS_INVALID;
 600:rtos/uCOS-III/Source/os_q.c ****              break;
 601:rtos/uCOS-III/Source/os_q.c ****     }
 602:rtos/uCOS-III/Source/os_q.c ****     CPU_CRITICAL_EXIT();
 603:rtos/uCOS-III/Source/os_q.c ****     OS_TRACE_Q_PEND_EXIT(*p_err);
 604:rtos/uCOS-III/Source/os_q.c ****     return (p_void);
 605:rtos/uCOS-III/Source/os_q.c **** }
 502              		.loc 1 605 1 view .LVU179
 503 00be 4046     		mov	r0, r8
 504 00c0 BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, r10, pc}
 505              	.LVL47:
 506              	.L46:
 477:rtos/uCOS-III/Source/os_q.c ****         OS_TRACE_Q_PEND_EXIT(OS_ERR_OBJ_PTR_NULL);
 507              		.loc 1 477 36 is_stmt 1 view .LVU180
 478:rtos/uCOS-III/Source/os_q.c ****        *p_err = OS_ERR_OBJ_PTR_NULL;
 508              		.loc 1 478 50 view .LVU181
ARM GAS  /tmp/cc61ansq.s 			page 22


 479:rtos/uCOS-III/Source/os_q.c ****         return ((void *)0);
 509              		.loc 1 479 8 view .LVU182
 479:rtos/uCOS-III/Source/os_q.c ****         return ((void *)0);
 510              		.loc 1 479 15 is_stmt 0 view .LVU183
 511 00c4 45F6C353 		movw	r3, #24003
 512 00c8 A9F80030 		strh	r3, [r9]	@ movhi
 480:rtos/uCOS-III/Source/os_q.c ****     }
 513              		.loc 1 480 9 is_stmt 1 view .LVU184
 480:rtos/uCOS-III/Source/os_q.c ****     }
 514              		.loc 1 480 16 is_stmt 0 view .LVU185
 515 00cc A846     		mov	r8, r5
 516 00ce F6E7     		b	.L24
 517              	.L47:
 483:rtos/uCOS-III/Source/os_q.c ****         OS_TRACE_Q_PEND_EXIT(OS_ERR_PTR_INVALID);
 518              		.loc 1 483 36 is_stmt 1 view .LVU186
 484:rtos/uCOS-III/Source/os_q.c ****        *p_err = OS_ERR_PTR_INVALID;
 519              		.loc 1 484 49 view .LVU187
 485:rtos/uCOS-III/Source/os_q.c ****         return ((void *)0);
 520              		.loc 1 485 8 view .LVU188
 485:rtos/uCOS-III/Source/os_q.c ****         return ((void *)0);
 521              		.loc 1 485 15 is_stmt 0 view .LVU189
 522 00d0 46F2D523 		movw	r3, #25301
 523 00d4 A9F80030 		strh	r3, [r9]	@ movhi
 486:rtos/uCOS-III/Source/os_q.c ****     }
 524              		.loc 1 486 9 is_stmt 1 view .LVU190
 486:rtos/uCOS-III/Source/os_q.c ****     }
 525              		.loc 1 486 16 is_stmt 0 view .LVU191
 526 00d8 B046     		mov	r8, r6
 527 00da F0E7     		b	.L24
 528              	.L48:
 494:rtos/uCOS-III/Source/os_q.c ****              OS_TRACE_Q_PEND_EXIT(OS_ERR_OPT_INVALID);
 529              		.loc 1 494 41 is_stmt 1 view .LVU192
 495:rtos/uCOS-III/Source/os_q.c ****             *p_err = OS_ERR_OPT_INVALID;
 530              		.loc 1 495 54 view .LVU193
 496:rtos/uCOS-III/Source/os_q.c ****              return ((void *)0);
 531              		.loc 1 496 13 view .LVU194
 496:rtos/uCOS-III/Source/os_q.c ****              return ((void *)0);
 532              		.loc 1 496 20 is_stmt 0 view .LVU195
 533 00dc 45F62563 		movw	r3, #24101
 534 00e0 A9F80030 		strh	r3, [r9]	@ movhi
 497:rtos/uCOS-III/Source/os_q.c ****     }
 535              		.loc 1 497 14 is_stmt 1 view .LVU196
 497:rtos/uCOS-III/Source/os_q.c ****     }
 536              		.loc 1 497 21 is_stmt 0 view .LVU197
 537 00e4 4FF00008 		mov	r8, #0
 538 00e8 E9E7     		b	.L24
 539              	.LVL48:
 540              	.L49:
 503:rtos/uCOS-III/Source/os_q.c ****         OS_TRACE_Q_PEND_EXIT(OS_ERR_OBJ_TYPE);
 541              		.loc 1 503 36 is_stmt 1 view .LVU198
 504:rtos/uCOS-III/Source/os_q.c ****        *p_err = OS_ERR_OBJ_TYPE;
 542              		.loc 1 504 46 view .LVU199
 505:rtos/uCOS-III/Source/os_q.c ****         return ((void *)0);
 543              		.loc 1 505 8 view .LVU200
 505:rtos/uCOS-III/Source/os_q.c ****         return ((void *)0);
 544              		.loc 1 505 15 is_stmt 0 view .LVU201
 545 00ea 45F6C453 		movw	r3, #24004
ARM GAS  /tmp/cc61ansq.s 			page 23


 546 00ee A9F80030 		strh	r3, [r9]	@ movhi
 506:rtos/uCOS-III/Source/os_q.c ****     }
 547              		.loc 1 506 9 is_stmt 1 view .LVU202
 506:rtos/uCOS-III/Source/os_q.c ****     }
 548              		.loc 1 506 16 is_stmt 0 view .LVU203
 549 00f2 4FF00008 		mov	r8, #0
 550 00f6 E2E7     		b	.L24
 551              	.LVL49:
 552              	.L50:
 520:rtos/uCOS-III/Source/os_q.c ****         CPU_CRITICAL_EXIT();
 553              		.loc 1 520 29 is_stmt 1 view .LVU204
 521:rtos/uCOS-III/Source/os_q.c ****         OS_TRACE_Q_PEND_EXIT(OS_ERR_NONE);
 554              		.loc 1 521 9 view .LVU205
 521:rtos/uCOS-III/Source/os_q.c ****         OS_TRACE_Q_PEND_EXIT(OS_ERR_NONE);
 555              		.loc 1 521 9 view .LVU206
 521:rtos/uCOS-III/Source/os_q.c ****         OS_TRACE_Q_PEND_EXIT(OS_ERR_NONE);
 556              		.loc 1 521 9 view .LVU207
 557 00f8 5046     		mov	r0, r10
 558              	.LVL50:
 521:rtos/uCOS-III/Source/os_q.c ****         OS_TRACE_Q_PEND_EXIT(OS_ERR_NONE);
 559              		.loc 1 521 9 is_stmt 0 view .LVU208
 560 00fa FFF7FEFF 		bl	CPU_SR_Restore
 561              	.LVL51:
 521:rtos/uCOS-III/Source/os_q.c ****         OS_TRACE_Q_PEND_EXIT(OS_ERR_NONE);
 562              		.loc 1 521 9 is_stmt 1 view .LVU209
 521:rtos/uCOS-III/Source/os_q.c ****         OS_TRACE_Q_PEND_EXIT(OS_ERR_NONE);
 563              		.loc 1 521 9 view .LVU210
 522:rtos/uCOS-III/Source/os_q.c ****         return (p_void);                                        /* Yes, Return message received    
 564              		.loc 1 522 42 view .LVU211
 523:rtos/uCOS-III/Source/os_q.c ****     }
 565              		.loc 1 523 9 view .LVU212
 523:rtos/uCOS-III/Source/os_q.c ****     }
 566              		.loc 1 523 16 is_stmt 0 view .LVU213
 567 00fe DEE7     		b	.L24
 568              	.LVL52:
 569              	.L51:
 527:rtos/uCOS-III/Source/os_q.c ****         OS_TRACE_Q_PEND_FAILED(p_q);
 570              		.loc 1 527 9 is_stmt 1 view .LVU214
 527:rtos/uCOS-III/Source/os_q.c ****         OS_TRACE_Q_PEND_FAILED(p_q);
 571              		.loc 1 527 9 view .LVU215
 527:rtos/uCOS-III/Source/os_q.c ****         OS_TRACE_Q_PEND_FAILED(p_q);
 572              		.loc 1 527 9 view .LVU216
 573 0100 5046     		mov	r0, r10
 574              	.LVL53:
 527:rtos/uCOS-III/Source/os_q.c ****         OS_TRACE_Q_PEND_FAILED(p_q);
 575              		.loc 1 527 9 is_stmt 0 view .LVU217
 576 0102 FFF7FEFF 		bl	CPU_SR_Restore
 577              	.LVL54:
 527:rtos/uCOS-III/Source/os_q.c ****         OS_TRACE_Q_PEND_FAILED(p_q);
 578              		.loc 1 527 9 is_stmt 1 view .LVU218
 527:rtos/uCOS-III/Source/os_q.c ****         OS_TRACE_Q_PEND_FAILED(p_q);
 579              		.loc 1 527 9 view .LVU219
 528:rtos/uCOS-III/Source/os_q.c ****         OS_TRACE_Q_PEND_EXIT(OS_ERR_PEND_WOULD_BLOCK);
 580              		.loc 1 528 36 view .LVU220
 529:rtos/uCOS-III/Source/os_q.c ****        *p_err = OS_ERR_PEND_WOULD_BLOCK;                        /* No                              
 581              		.loc 1 529 54 view .LVU221
 530:rtos/uCOS-III/Source/os_q.c ****         return ((void *)0);
ARM GAS  /tmp/cc61ansq.s 			page 24


 582              		.loc 1 530 8 view .LVU222
 530:rtos/uCOS-III/Source/os_q.c ****         return ((void *)0);
 583              		.loc 1 530 15 is_stmt 0 view .LVU223
 584 0106 46F2B013 		movw	r3, #25008
 585 010a A9F80030 		strh	r3, [r9]	@ movhi
 531:rtos/uCOS-III/Source/os_q.c ****     } else {
 586              		.loc 1 531 9 is_stmt 1 view .LVU224
 531:rtos/uCOS-III/Source/os_q.c ****     } else {
 587              		.loc 1 531 16 is_stmt 0 view .LVU225
 588 010e 4FF00008 		mov	r8, #0
 589              	.LVL55:
 531:rtos/uCOS-III/Source/os_q.c ****     } else {
 590              		.loc 1 531 16 view .LVU226
 591 0112 D4E7     		b	.L24
 592              	.LVL56:
 593              	.L52:
 534:rtos/uCOS-III/Source/os_q.c ****             OS_TRACE_Q_PEND_FAILED(p_q);
 594              		.loc 1 534 13 is_stmt 1 view .LVU227
 534:rtos/uCOS-III/Source/os_q.c ****             OS_TRACE_Q_PEND_FAILED(p_q);
 595              		.loc 1 534 13 view .LVU228
 534:rtos/uCOS-III/Source/os_q.c ****             OS_TRACE_Q_PEND_FAILED(p_q);
 596              		.loc 1 534 13 view .LVU229
 597 0114 5046     		mov	r0, r10
 598              	.LVL57:
 534:rtos/uCOS-III/Source/os_q.c ****             OS_TRACE_Q_PEND_FAILED(p_q);
 599              		.loc 1 534 13 is_stmt 0 view .LVU230
 600 0116 FFF7FEFF 		bl	CPU_SR_Restore
 601              	.LVL58:
 534:rtos/uCOS-III/Source/os_q.c ****             OS_TRACE_Q_PEND_FAILED(p_q);
 602              		.loc 1 534 13 is_stmt 1 view .LVU231
 534:rtos/uCOS-III/Source/os_q.c ****             OS_TRACE_Q_PEND_FAILED(p_q);
 603              		.loc 1 534 13 view .LVU232
 535:rtos/uCOS-III/Source/os_q.c ****             OS_TRACE_Q_PEND_EXIT(OS_ERR_SCHED_LOCKED);
 604              		.loc 1 535 40 view .LVU233
 536:rtos/uCOS-III/Source/os_q.c ****            *p_err = OS_ERR_SCHED_LOCKED;
 605              		.loc 1 536 54 view .LVU234
 537:rtos/uCOS-III/Source/os_q.c ****             return ((void *)0);
 606              		.loc 1 537 12 view .LVU235
 537:rtos/uCOS-III/Source/os_q.c ****             return ((void *)0);
 607              		.loc 1 537 19 is_stmt 0 view .LVU236
 608 011a 46F66353 		movw	r3, #28003
 609 011e A9F80030 		strh	r3, [r9]	@ movhi
 538:rtos/uCOS-III/Source/os_q.c ****         }
 610              		.loc 1 538 13 is_stmt 1 view .LVU237
 538:rtos/uCOS-III/Source/os_q.c ****         }
 611              		.loc 1 538 20 is_stmt 0 view .LVU238
 612 0122 4FF00008 		mov	r8, #0
 613              	.LVL59:
 538:rtos/uCOS-III/Source/os_q.c ****         }
 614              		.loc 1 538 20 view .LVU239
 615 0126 CAE7     		b	.L24
 616              	.LVL60:
 617              	.L41:
 553:rtos/uCOS-III/Source/os_q.c ****             *p_msg_size = OSTCBCurPtr->MsgSize;
 618              		.loc 1 553 14 is_stmt 1 view .LVU240
 553:rtos/uCOS-III/Source/os_q.c ****             *p_msg_size = OSTCBCurPtr->MsgSize;
 619              		.loc 1 553 25 is_stmt 0 view .LVU241
ARM GAS  /tmp/cc61ansq.s 			page 25


 620 0128 D2F85480 		ldr	r8, [r2, #84]
 621              	.LVL61:
 554:rtos/uCOS-III/Source/os_q.c **** #if (OS_CFG_TS_EN > 0u)
 622              		.loc 1 554 13 is_stmt 1 view .LVU242
 554:rtos/uCOS-III/Source/os_q.c **** #if (OS_CFG_TS_EN > 0u)
 623              		.loc 1 554 38 is_stmt 0 view .LVU243
 624 012c B2F85830 		ldrh	r3, [r2, #88]
 554:rtos/uCOS-III/Source/os_q.c **** #if (OS_CFG_TS_EN > 0u)
 625              		.loc 1 554 25 view .LVU244
 626 0130 3380     		strh	r3, [r6]	@ movhi
 560:rtos/uCOS-III/Source/os_q.c ****             *p_err      = OS_ERR_NONE;
 627              		.loc 1 560 34 is_stmt 1 view .LVU245
 561:rtos/uCOS-III/Source/os_q.c ****              break;
 628              		.loc 1 561 13 view .LVU246
 561:rtos/uCOS-III/Source/os_q.c ****              break;
 629              		.loc 1 561 25 is_stmt 0 view .LVU247
 630 0132 0023     		movs	r3, #0
 631 0134 A9F80030 		strh	r3, [r9]	@ movhi
 562:rtos/uCOS-III/Source/os_q.c **** 
 632              		.loc 1 562 14 is_stmt 1 view .LVU248
 633              	.LVL62:
 634              	.L42:
 602:rtos/uCOS-III/Source/os_q.c ****     OS_TRACE_Q_PEND_EXIT(*p_err);
 635              		.loc 1 602 5 view .LVU249
 602:rtos/uCOS-III/Source/os_q.c ****     OS_TRACE_Q_PEND_EXIT(*p_err);
 636              		.loc 1 602 5 view .LVU250
 602:rtos/uCOS-III/Source/os_q.c ****     OS_TRACE_Q_PEND_EXIT(*p_err);
 637              		.loc 1 602 5 view .LVU251
 638 0138 FFF7FEFF 		bl	CPU_SR_Restore
 639              	.LVL63:
 602:rtos/uCOS-III/Source/os_q.c ****     OS_TRACE_Q_PEND_EXIT(*p_err);
 640              		.loc 1 602 5 view .LVU252
 602:rtos/uCOS-III/Source/os_q.c ****     OS_TRACE_Q_PEND_EXIT(*p_err);
 641              		.loc 1 602 5 view .LVU253
 603:rtos/uCOS-III/Source/os_q.c ****     return (p_void);
 642              		.loc 1 603 33 view .LVU254
 604:rtos/uCOS-III/Source/os_q.c **** }
 643              		.loc 1 604 5 view .LVU255
 604:rtos/uCOS-III/Source/os_q.c **** }
 644              		.loc 1 604 12 is_stmt 0 view .LVU256
 645 013c BFE7     		b	.L24
 646              	.LVL64:
 647              	.L40:
 565:rtos/uCOS-III/Source/os_q.c ****             *p_msg_size =         0u;
 648              		.loc 1 565 14 is_stmt 1 view .LVU257
 566:rtos/uCOS-III/Source/os_q.c **** #if (OS_CFG_TS_EN > 0u)
 649              		.loc 1 566 13 view .LVU258
 566:rtos/uCOS-III/Source/os_q.c **** #if (OS_CFG_TS_EN > 0u)
 650              		.loc 1 566 25 is_stmt 0 view .LVU259
 651 013e 4FF00008 		mov	r8, #0
 652 0142 A6F80080 		strh	r8, [r6]	@ movhi
 572:rtos/uCOS-III/Source/os_q.c ****             *p_err      = OS_ERR_PEND_ABORT;
 653              		.loc 1 572 41 is_stmt 1 view .LVU260
 573:rtos/uCOS-III/Source/os_q.c ****              break;
 654              		.loc 1 573 13 view .LVU261
 573:rtos/uCOS-III/Source/os_q.c ****              break;
 655              		.loc 1 573 25 is_stmt 0 view .LVU262
ARM GAS  /tmp/cc61ansq.s 			page 26


 656 0146 46F2A913 		movw	r3, #25001
 657 014a A9F80030 		strh	r3, [r9]	@ movhi
 574:rtos/uCOS-III/Source/os_q.c **** 
 658              		.loc 1 574 14 is_stmt 1 view .LVU263
 659 014e F3E7     		b	.L42
 660              	.LVL65:
 661              	.L37:
 577:rtos/uCOS-III/Source/os_q.c ****             *p_msg_size =         0u;
 662              		.loc 1 577 14 view .LVU264
 578:rtos/uCOS-III/Source/os_q.c ****              OS_TRACE_Q_PEND_FAILED(p_q);
 663              		.loc 1 578 13 view .LVU265
 578:rtos/uCOS-III/Source/os_q.c ****              OS_TRACE_Q_PEND_FAILED(p_q);
 664              		.loc 1 578 25 is_stmt 0 view .LVU266
 665 0150 4FF00008 		mov	r8, #0
 666 0154 A6F80080 		strh	r8, [r6]	@ movhi
 579:rtos/uCOS-III/Source/os_q.c ****             *p_err      = OS_ERR_TIMEOUT;
 667              		.loc 1 579 41 is_stmt 1 view .LVU267
 580:rtos/uCOS-III/Source/os_q.c ****              break;
 668              		.loc 1 580 13 view .LVU268
 580:rtos/uCOS-III/Source/os_q.c ****              break;
 669              		.loc 1 580 25 is_stmt 0 view .LVU269
 670 0158 47F2D923 		movw	r3, #29401
 671 015c A9F80030 		strh	r3, [r9]	@ movhi
 581:rtos/uCOS-III/Source/os_q.c **** 
 672              		.loc 1 581 14 is_stmt 1 view .LVU270
 673 0160 EAE7     		b	.L42
 674              	.LVL66:
 675              	.L39:
 584:rtos/uCOS-III/Source/os_q.c ****             *p_msg_size =         0u;
 676              		.loc 1 584 14 view .LVU271
 585:rtos/uCOS-III/Source/os_q.c **** #if (OS_CFG_TS_EN > 0u)
 677              		.loc 1 585 13 view .LVU272
 585:rtos/uCOS-III/Source/os_q.c **** #if (OS_CFG_TS_EN > 0u)
 678              		.loc 1 585 25 is_stmt 0 view .LVU273
 679 0162 4FF00008 		mov	r8, #0
 680 0166 A6F80080 		strh	r8, [r6]	@ movhi
 591:rtos/uCOS-III/Source/os_q.c ****             *p_err      = OS_ERR_OBJ_DEL;
 681              		.loc 1 591 41 is_stmt 1 view .LVU274
 592:rtos/uCOS-III/Source/os_q.c ****              break;
 682              		.loc 1 592 13 view .LVU275
 592:rtos/uCOS-III/Source/os_q.c ****              break;
 683              		.loc 1 592 25 is_stmt 0 view .LVU276
 684 016a 45F6C253 		movw	r3, #24002
 685 016e A9F80030 		strh	r3, [r9]	@ movhi
 593:rtos/uCOS-III/Source/os_q.c **** 
 686              		.loc 1 593 14 is_stmt 1 view .LVU277
 687 0172 E1E7     		b	.L42
 688              	.LVL67:
 689              	.L36:
 596:rtos/uCOS-III/Source/os_q.c ****             *p_msg_size =         0u;
 690              		.loc 1 596 14 view .LVU278
 597:rtos/uCOS-III/Source/os_q.c ****              OS_TRACE_Q_PEND_FAILED(p_q);
 691              		.loc 1 597 13 view .LVU279
 597:rtos/uCOS-III/Source/os_q.c ****              OS_TRACE_Q_PEND_FAILED(p_q);
 692              		.loc 1 597 25 is_stmt 0 view .LVU280
 693 0174 4FF00008 		mov	r8, #0
 694 0178 A6F80080 		strh	r8, [r6]	@ movhi
ARM GAS  /tmp/cc61ansq.s 			page 27


 598:rtos/uCOS-III/Source/os_q.c ****             *p_err      = OS_ERR_STATUS_INVALID;
 695              		.loc 1 598 41 is_stmt 1 view .LVU281
 599:rtos/uCOS-III/Source/os_q.c ****              break;
 696              		.loc 1 599 13 view .LVU282
 599:rtos/uCOS-III/Source/os_q.c ****              break;
 697              		.loc 1 599 25 is_stmt 0 view .LVU283
 698 017c 46F62E63 		movw	r3, #28206
 699 0180 A9F80030 		strh	r3, [r9]	@ movhi
 600:rtos/uCOS-III/Source/os_q.c ****     }
 700              		.loc 1 600 14 is_stmt 1 view .LVU284
 701 0184 D8E7     		b	.L42
 702              	.L54:
 703 0186 00BF     		.align	2
 704              	.L53:
 705 0188 00000000 		.word	OSIntNestingCtr
 706 018c 00000000 		.word	OSRunning
 707 0190 51554555 		.word	1430607185
 708 0194 00000000 		.word	OSSchedLockNestingCtr
 709 0198 00000000 		.word	OSTCBCurPtr
 710              		.cfi_endproc
 711              	.LFE3:
 713              		.section	.text.OSQPendAbort,"ax",%progbits
 714              		.align	1
 715              		.global	OSQPendAbort
 716              		.syntax unified
 717              		.thumb
 718              		.thumb_func
 719              		.fpu fpv4-sp-d16
 721              	OSQPendAbort:
 722              	.LVL68:
 723              	.LFB4:
 606:rtos/uCOS-III/Source/os_q.c **** 
 607:rtos/uCOS-III/Source/os_q.c **** 
 608:rtos/uCOS-III/Source/os_q.c **** /*
 609:rtos/uCOS-III/Source/os_q.c **** ***************************************************************************************************
 610:rtos/uCOS-III/Source/os_q.c **** *                                             ABORT WAITING ON A MESSAGE QUEUE
 611:rtos/uCOS-III/Source/os_q.c **** *
 612:rtos/uCOS-III/Source/os_q.c **** * Description: This function aborts & readies any tasks currently waiting on a queue.  This functio
 613:rtos/uCOS-III/Source/os_q.c **** *              fault-abort the wait on the queue, rather than to normally signal the queue via OSQP
 614:rtos/uCOS-III/Source/os_q.c **** *
 615:rtos/uCOS-III/Source/os_q.c **** * Arguments  : p_q       is a pointer to the message queue
 616:rtos/uCOS-III/Source/os_q.c **** *
 617:rtos/uCOS-III/Source/os_q.c **** *              opt       determines the type of ABORT performed:
 618:rtos/uCOS-III/Source/os_q.c **** *
 619:rtos/uCOS-III/Source/os_q.c **** *                            OS_OPT_PEND_ABORT_1          ABORT wait for a single task (HPT) waitin
 620:rtos/uCOS-III/Source/os_q.c **** *                            OS_OPT_PEND_ABORT_ALL        ABORT wait for ALL tasks that are  waitin
 621:rtos/uCOS-III/Source/os_q.c **** *                            OS_OPT_POST_NO_SCHED         Do not call the scheduler
 622:rtos/uCOS-III/Source/os_q.c **** *
 623:rtos/uCOS-III/Source/os_q.c **** *              p_err     is a pointer to a variable that will contain an error code returned by thi
 624:rtos/uCOS-III/Source/os_q.c **** *
 625:rtos/uCOS-III/Source/os_q.c **** *                            OS_ERR_NONE                  At least one task waiting on the queue wa
 626:rtos/uCOS-III/Source/os_q.c **** *                                                         informed of the aborted wait; check retur
 627:rtos/uCOS-III/Source/os_q.c **** *                                                         number of tasks whose wait on the queue w
 628:rtos/uCOS-III/Source/os_q.c **** *                            OS_ERR_OBJ_PTR_NULL          If you pass a NULL pointer for 'p_q'
 629:rtos/uCOS-III/Source/os_q.c **** *                            OS_ERR_OBJ_TYPE              If the message queue was not created
 630:rtos/uCOS-III/Source/os_q.c **** *                            OS_ERR_OPT_INVALID           You specified an invalid option
 631:rtos/uCOS-III/Source/os_q.c **** *                            OS_ERR_OS_NOT_RUNNING        If uC/OS-III is not running yet
ARM GAS  /tmp/cc61ansq.s 			page 28


 632:rtos/uCOS-III/Source/os_q.c **** *                            OS_ERR_PEND_ABORT_ISR        If this function was called from an ISR
 633:rtos/uCOS-III/Source/os_q.c **** *                            OS_ERR_PEND_ABORT_NONE       No task were pending
 634:rtos/uCOS-III/Source/os_q.c **** *
 635:rtos/uCOS-III/Source/os_q.c **** * Returns    : == 0      if no tasks were waiting on the queue, or upon error.
 636:rtos/uCOS-III/Source/os_q.c **** *              >  0      if one or more tasks waiting on the queue are now readied and informed.
 637:rtos/uCOS-III/Source/os_q.c **** *
 638:rtos/uCOS-III/Source/os_q.c **** * Note(s)    : none
 639:rtos/uCOS-III/Source/os_q.c **** ***************************************************************************************************
 640:rtos/uCOS-III/Source/os_q.c **** */
 641:rtos/uCOS-III/Source/os_q.c **** 
 642:rtos/uCOS-III/Source/os_q.c **** #if (OS_CFG_Q_PEND_ABORT_EN > 0u)
 643:rtos/uCOS-III/Source/os_q.c **** OS_OBJ_QTY  OSQPendAbort (OS_Q    *p_q,
 644:rtos/uCOS-III/Source/os_q.c ****                           OS_OPT   opt,
 645:rtos/uCOS-III/Source/os_q.c ****                           OS_ERR  *p_err)
 646:rtos/uCOS-III/Source/os_q.c **** {
 724              		.loc 1 646 1 view -0
 725              		.cfi_startproc
 726              		@ args = 0, pretend = 0, frame = 0
 727              		@ frame_needed = 0, uses_anonymous_args = 0
 728              		.loc 1 646 1 is_stmt 0 view .LVU286
 729 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 730              	.LCFI3:
 731              		.cfi_def_cfa_offset 24
 732              		.cfi_offset 4, -24
 733              		.cfi_offset 5, -20
 734              		.cfi_offset 6, -16
 735              		.cfi_offset 7, -12
 736              		.cfi_offset 8, -8
 737              		.cfi_offset 14, -4
 738 0004 1646     		mov	r6, r2
 647:rtos/uCOS-III/Source/os_q.c ****     OS_PEND_LIST  *p_pend_list;
 739              		.loc 1 647 5 is_stmt 1 view .LVU287
 648:rtos/uCOS-III/Source/os_q.c ****     OS_TCB        *p_tcb;
 740              		.loc 1 648 5 view .LVU288
 649:rtos/uCOS-III/Source/os_q.c ****     CPU_TS         ts;
 741              		.loc 1 649 5 view .LVU289
 650:rtos/uCOS-III/Source/os_q.c ****     OS_OBJ_QTY     nbr_tasks;
 742              		.loc 1 650 5 view .LVU290
 651:rtos/uCOS-III/Source/os_q.c ****     CPU_SR_ALLOC();
 743              		.loc 1 651 5 view .LVU291
 744              	.LVL69:
 652:rtos/uCOS-III/Source/os_q.c **** 
 653:rtos/uCOS-III/Source/os_q.c **** 
 654:rtos/uCOS-III/Source/os_q.c **** #ifdef OS_SAFETY_CRITICAL
 655:rtos/uCOS-III/Source/os_q.c ****     if (p_err == (OS_ERR *)0) {
 656:rtos/uCOS-III/Source/os_q.c ****         OS_SAFETY_CRITICAL_EXCEPTION();
 657:rtos/uCOS-III/Source/os_q.c ****         return (0u);
 658:rtos/uCOS-III/Source/os_q.c ****     }
 659:rtos/uCOS-III/Source/os_q.c **** #endif
 660:rtos/uCOS-III/Source/os_q.c **** 
 661:rtos/uCOS-III/Source/os_q.c **** #if (OS_CFG_CALLED_FROM_ISR_CHK_EN > 0u)
 662:rtos/uCOS-III/Source/os_q.c ****     if (OSIntNestingCtr > 0u) {                                 /* Not allowed to Pend Abort from a
 745              		.loc 1 662 5 view .LVU292
 746              		.loc 1 662 25 is_stmt 0 view .LVU293
 747 0006 2C4B     		ldr	r3, .L74
 748 0008 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 749              		.loc 1 662 8 view .LVU294
ARM GAS  /tmp/cc61ansq.s 			page 29


 750 000a 53B9     		cbnz	r3, .L70
 751 000c 0746     		mov	r7, r0
 752 000e 0C46     		mov	r4, r1
 663:rtos/uCOS-III/Source/os_q.c ****        *p_err =  OS_ERR_PEND_ABORT_ISR;
 664:rtos/uCOS-III/Source/os_q.c ****         return (0u);
 665:rtos/uCOS-III/Source/os_q.c ****     }
 666:rtos/uCOS-III/Source/os_q.c **** #endif
 667:rtos/uCOS-III/Source/os_q.c **** 
 668:rtos/uCOS-III/Source/os_q.c **** #if (OS_CFG_INVALID_OS_CALLS_CHK_EN > 0u)
 669:rtos/uCOS-III/Source/os_q.c ****     if (OSRunning != OS_STATE_OS_RUNNING) {                     /* Is the kernel running?          
 753              		.loc 1 669 5 is_stmt 1 view .LVU295
 754              		.loc 1 669 19 is_stmt 0 view .LVU296
 755 0010 2A4B     		ldr	r3, .L74+4
 756 0012 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 757              		.loc 1 669 8 view .LVU297
 758 0014 012B     		cmp	r3, #1
 759 0016 0BD0     		beq	.L58
 670:rtos/uCOS-III/Source/os_q.c ****        *p_err = OS_ERR_OS_NOT_RUNNING;
 760              		.loc 1 670 8 is_stmt 1 view .LVU298
 761              		.loc 1 670 15 is_stmt 0 view .LVU299
 762 0018 45F68963 		movw	r3, #24201
 763 001c 1380     		strh	r3, [r2]	@ movhi
 671:rtos/uCOS-III/Source/os_q.c ****         return (0u);
 764              		.loc 1 671 9 is_stmt 1 view .LVU300
 765              		.loc 1 671 16 is_stmt 0 view .LVU301
 766 001e 0025     		movs	r5, #0
 767 0020 03E0     		b	.L57
 768              	.L70:
 663:rtos/uCOS-III/Source/os_q.c ****        *p_err =  OS_ERR_PEND_ABORT_ISR;
 769              		.loc 1 663 8 is_stmt 1 view .LVU302
 663:rtos/uCOS-III/Source/os_q.c ****        *p_err =  OS_ERR_PEND_ABORT_ISR;
 770              		.loc 1 663 15 is_stmt 0 view .LVU303
 771 0022 46F2AA13 		movw	r3, #25002
 772 0026 1380     		strh	r3, [r2]	@ movhi
 664:rtos/uCOS-III/Source/os_q.c ****     }
 773              		.loc 1 664 9 is_stmt 1 view .LVU304
 664:rtos/uCOS-III/Source/os_q.c ****     }
 774              		.loc 1 664 16 is_stmt 0 view .LVU305
 775 0028 0025     		movs	r5, #0
 776              	.LVL70:
 777              	.L57:
 672:rtos/uCOS-III/Source/os_q.c ****     }
 673:rtos/uCOS-III/Source/os_q.c **** #endif
 674:rtos/uCOS-III/Source/os_q.c **** 
 675:rtos/uCOS-III/Source/os_q.c **** #if (OS_CFG_ARG_CHK_EN > 0u)
 676:rtos/uCOS-III/Source/os_q.c ****     if (p_q == (OS_Q *)0) {                                     /* Validate 'p_q'                  
 677:rtos/uCOS-III/Source/os_q.c ****        *p_err =  OS_ERR_OBJ_PTR_NULL;
 678:rtos/uCOS-III/Source/os_q.c ****         return (0u);
 679:rtos/uCOS-III/Source/os_q.c ****     }
 680:rtos/uCOS-III/Source/os_q.c ****     switch (opt) {                                              /* Validate 'opt'                  
 681:rtos/uCOS-III/Source/os_q.c ****         case OS_OPT_PEND_ABORT_1:
 682:rtos/uCOS-III/Source/os_q.c ****         case OS_OPT_PEND_ABORT_ALL:
 683:rtos/uCOS-III/Source/os_q.c ****         case OS_OPT_PEND_ABORT_1   | OS_OPT_POST_NO_SCHED:
 684:rtos/uCOS-III/Source/os_q.c ****         case OS_OPT_PEND_ABORT_ALL | OS_OPT_POST_NO_SCHED:
 685:rtos/uCOS-III/Source/os_q.c ****              break;
 686:rtos/uCOS-III/Source/os_q.c **** 
 687:rtos/uCOS-III/Source/os_q.c ****         default:
ARM GAS  /tmp/cc61ansq.s 			page 30


 688:rtos/uCOS-III/Source/os_q.c ****             *p_err =  OS_ERR_OPT_INVALID;
 689:rtos/uCOS-III/Source/os_q.c ****              return (0u);
 690:rtos/uCOS-III/Source/os_q.c ****     }
 691:rtos/uCOS-III/Source/os_q.c **** #endif
 692:rtos/uCOS-III/Source/os_q.c **** 
 693:rtos/uCOS-III/Source/os_q.c **** #if (OS_CFG_OBJ_TYPE_CHK_EN > 0u)
 694:rtos/uCOS-III/Source/os_q.c ****     if (p_q->Type != OS_OBJ_TYPE_Q) {                           /* Make sure queue was created     
 695:rtos/uCOS-III/Source/os_q.c ****        *p_err =  OS_ERR_OBJ_TYPE;
 696:rtos/uCOS-III/Source/os_q.c ****         return (0u);
 697:rtos/uCOS-III/Source/os_q.c ****     }
 698:rtos/uCOS-III/Source/os_q.c **** #endif
 699:rtos/uCOS-III/Source/os_q.c **** 
 700:rtos/uCOS-III/Source/os_q.c ****     CPU_CRITICAL_ENTER();
 701:rtos/uCOS-III/Source/os_q.c ****     p_pend_list = &p_q->PendList;
 702:rtos/uCOS-III/Source/os_q.c ****     if (p_pend_list->HeadPtr == (OS_TCB *)0) {                  /* Any task waiting on queue?      
 703:rtos/uCOS-III/Source/os_q.c ****         CPU_CRITICAL_EXIT();                                    /* No                              
 704:rtos/uCOS-III/Source/os_q.c ****        *p_err =  OS_ERR_PEND_ABORT_NONE;
 705:rtos/uCOS-III/Source/os_q.c ****         return (0u);
 706:rtos/uCOS-III/Source/os_q.c ****     }
 707:rtos/uCOS-III/Source/os_q.c **** 
 708:rtos/uCOS-III/Source/os_q.c ****     nbr_tasks = 0u;
 709:rtos/uCOS-III/Source/os_q.c **** #if (OS_CFG_TS_EN > 0u)
 710:rtos/uCOS-III/Source/os_q.c ****     ts        = OS_TS_GET();                                    /* Get local time stamp so all task
 711:rtos/uCOS-III/Source/os_q.c **** #else
 712:rtos/uCOS-III/Source/os_q.c ****     ts        = 0u;
 713:rtos/uCOS-III/Source/os_q.c **** #endif
 714:rtos/uCOS-III/Source/os_q.c ****     while (p_pend_list->HeadPtr != (OS_TCB *)0) {
 715:rtos/uCOS-III/Source/os_q.c ****         p_tcb = p_pend_list->HeadPtr;
 716:rtos/uCOS-III/Source/os_q.c ****         OS_PendAbort(p_tcb,
 717:rtos/uCOS-III/Source/os_q.c ****                      ts,
 718:rtos/uCOS-III/Source/os_q.c ****                      OS_STATUS_PEND_ABORT);
 719:rtos/uCOS-III/Source/os_q.c ****         nbr_tasks++;
 720:rtos/uCOS-III/Source/os_q.c ****         if (opt != OS_OPT_PEND_ABORT_ALL) {                     /* Pend abort all tasks waiting?   
 721:rtos/uCOS-III/Source/os_q.c ****             break;                                              /* No                              
 722:rtos/uCOS-III/Source/os_q.c ****         }
 723:rtos/uCOS-III/Source/os_q.c ****     }
 724:rtos/uCOS-III/Source/os_q.c ****     CPU_CRITICAL_EXIT();
 725:rtos/uCOS-III/Source/os_q.c **** 
 726:rtos/uCOS-III/Source/os_q.c ****     if ((opt & OS_OPT_POST_NO_SCHED) == 0u) {
 727:rtos/uCOS-III/Source/os_q.c ****         OSSched();                                              /* Run the scheduler               
 728:rtos/uCOS-III/Source/os_q.c ****     }
 729:rtos/uCOS-III/Source/os_q.c **** 
 730:rtos/uCOS-III/Source/os_q.c ****    *p_err = OS_ERR_NONE;
 731:rtos/uCOS-III/Source/os_q.c ****     return (nbr_tasks);
 732:rtos/uCOS-III/Source/os_q.c **** }
 778              		.loc 1 732 1 view .LVU306
 779 002a 2846     		mov	r0, r5
 780 002c BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 781              	.LVL71:
 782              	.L58:
 676:rtos/uCOS-III/Source/os_q.c ****        *p_err =  OS_ERR_OBJ_PTR_NULL;
 783              		.loc 1 676 5 is_stmt 1 view .LVU307
 676:rtos/uCOS-III/Source/os_q.c ****        *p_err =  OS_ERR_OBJ_PTR_NULL;
 784              		.loc 1 676 8 is_stmt 0 view .LVU308
 785 0030 80B1     		cbz	r0, .L71
 680:rtos/uCOS-III/Source/os_q.c ****         case OS_OPT_PEND_ABORT_1:
 786              		.loc 1 680 5 is_stmt 1 view .LVU309
ARM GAS  /tmp/cc61ansq.s 			page 31


 787 0032 B1F5004F 		cmp	r1, #32768
 788 0036 04D0     		beq	.L60
 789 0038 11D8     		bhi	.L61
 790 003a 11B1     		cbz	r1, .L60
 791 003c B1F5807F 		cmp	r1, #256
 792 0040 10D1     		bne	.L62
 793              	.L60:
 685:rtos/uCOS-III/Source/os_q.c **** 
 794              		.loc 1 685 14 view .LVU310
 694:rtos/uCOS-III/Source/os_q.c ****        *p_err =  OS_ERR_OBJ_TYPE;
 795              		.loc 1 694 5 view .LVU311
 694:rtos/uCOS-III/Source/os_q.c ****        *p_err =  OS_ERR_OBJ_TYPE;
 796              		.loc 1 694 12 is_stmt 0 view .LVU312
 797 0042 3A68     		ldr	r2, [r7]
 798              	.LVL72:
 694:rtos/uCOS-III/Source/os_q.c ****        *p_err =  OS_ERR_OBJ_TYPE;
 799              		.loc 1 694 8 view .LVU313
 800 0044 1E4B     		ldr	r3, .L74+8
 801 0046 9A42     		cmp	r2, r3
 802 0048 11D0     		beq	.L63
 695:rtos/uCOS-III/Source/os_q.c ****         return (0u);
 803              		.loc 1 695 8 is_stmt 1 view .LVU314
 695:rtos/uCOS-III/Source/os_q.c ****         return (0u);
 804              		.loc 1 695 15 is_stmt 0 view .LVU315
 805 004a 45F6C453 		movw	r3, #24004
 806 004e 3380     		strh	r3, [r6]	@ movhi
 696:rtos/uCOS-III/Source/os_q.c ****     }
 807              		.loc 1 696 9 is_stmt 1 view .LVU316
 696:rtos/uCOS-III/Source/os_q.c ****     }
 808              		.loc 1 696 16 is_stmt 0 view .LVU317
 809 0050 0025     		movs	r5, #0
 810 0052 EAE7     		b	.L57
 811              	.LVL73:
 812              	.L71:
 677:rtos/uCOS-III/Source/os_q.c ****         return (0u);
 813              		.loc 1 677 8 is_stmt 1 view .LVU318
 677:rtos/uCOS-III/Source/os_q.c ****         return (0u);
 814              		.loc 1 677 15 is_stmt 0 view .LVU319
 815 0054 45F6C353 		movw	r3, #24003
 816 0058 1380     		strh	r3, [r2]	@ movhi
 678:rtos/uCOS-III/Source/os_q.c ****     }
 817              		.loc 1 678 9 is_stmt 1 view .LVU320
 678:rtos/uCOS-III/Source/os_q.c ****     }
 818              		.loc 1 678 16 is_stmt 0 view .LVU321
 819 005a 0025     		movs	r5, #0
 820 005c E5E7     		b	.L57
 821              	.L61:
 680:rtos/uCOS-III/Source/os_q.c ****         case OS_OPT_PEND_ABORT_1:
 822              		.loc 1 680 5 view .LVU322
 823 005e B1F5014F 		cmp	r1, #33024
 824 0062 EED0     		beq	.L60
 825              	.L62:
 688:rtos/uCOS-III/Source/os_q.c ****              return (0u);
 826              		.loc 1 688 13 is_stmt 1 view .LVU323
 688:rtos/uCOS-III/Source/os_q.c ****              return (0u);
 827              		.loc 1 688 20 is_stmt 0 view .LVU324
 828 0064 45F62563 		movw	r3, #24101
ARM GAS  /tmp/cc61ansq.s 			page 32


 829 0068 3380     		strh	r3, [r6]	@ movhi
 689:rtos/uCOS-III/Source/os_q.c ****     }
 830              		.loc 1 689 14 is_stmt 1 view .LVU325
 689:rtos/uCOS-III/Source/os_q.c ****     }
 831              		.loc 1 689 21 is_stmt 0 view .LVU326
 832 006a 0025     		movs	r5, #0
 833 006c DDE7     		b	.L57
 834              	.LVL74:
 835              	.L63:
 700:rtos/uCOS-III/Source/os_q.c ****     p_pend_list = &p_q->PendList;
 836              		.loc 1 700 5 is_stmt 1 view .LVU327
 700:rtos/uCOS-III/Source/os_q.c ****     p_pend_list = &p_q->PendList;
 837              		.loc 1 700 5 view .LVU328
 700:rtos/uCOS-III/Source/os_q.c ****     p_pend_list = &p_q->PendList;
 838              		.loc 1 700 5 view .LVU329
 839 006e 4020     		movs	r0, #64
 840              	.LVL75:
 700:rtos/uCOS-III/Source/os_q.c ****     p_pend_list = &p_q->PendList;
 841              		.loc 1 700 5 is_stmt 0 view .LVU330
 842 0070 FFF7FEFF 		bl	CPU_SR_Save
 843              	.LVL76:
 700:rtos/uCOS-III/Source/os_q.c ****     p_pend_list = &p_q->PendList;
 844              		.loc 1 700 5 view .LVU331
 845 0074 8046     		mov	r8, r0
 846              	.LVL77:
 700:rtos/uCOS-III/Source/os_q.c ****     p_pend_list = &p_q->PendList;
 847              		.loc 1 700 5 is_stmt 1 view .LVU332
 700:rtos/uCOS-III/Source/os_q.c ****     p_pend_list = &p_q->PendList;
 848              		.loc 1 700 5 view .LVU333
 701:rtos/uCOS-III/Source/os_q.c ****     if (p_pend_list->HeadPtr == (OS_TCB *)0) {                  /* Any task waiting on queue?      
 849              		.loc 1 701 5 view .LVU334
 702:rtos/uCOS-III/Source/os_q.c ****         CPU_CRITICAL_EXIT();                                    /* No                              
 850              		.loc 1 702 5 view .LVU335
 702:rtos/uCOS-III/Source/os_q.c ****         CPU_CRITICAL_EXIT();                                    /* No                              
 851              		.loc 1 702 20 is_stmt 0 view .LVU336
 852 0076 7B68     		ldr	r3, [r7, #4]
 702:rtos/uCOS-III/Source/os_q.c ****         CPU_CRITICAL_EXIT();                                    /* No                              
 853              		.loc 1 702 8 view .LVU337
 854 0078 A3B1     		cbz	r3, .L72
 708:rtos/uCOS-III/Source/os_q.c **** #if (OS_CFG_TS_EN > 0u)
 855              		.loc 1 708 15 view .LVU338
 856 007a 0025     		movs	r5, #0
 857              	.LVL78:
 858              	.L64:
 714:rtos/uCOS-III/Source/os_q.c ****         p_tcb = p_pend_list->HeadPtr;
 859              		.loc 1 714 11 is_stmt 1 view .LVU339
 714:rtos/uCOS-III/Source/os_q.c ****         p_tcb = p_pend_list->HeadPtr;
 860              		.loc 1 714 23 is_stmt 0 view .LVU340
 861 007c 7868     		ldr	r0, [r7, #4]
 714:rtos/uCOS-III/Source/os_q.c ****         p_tcb = p_pend_list->HeadPtr;
 862              		.loc 1 714 11 view .LVU341
 863 007e 40B1     		cbz	r0, .L65
 715:rtos/uCOS-III/Source/os_q.c ****         OS_PendAbort(p_tcb,
 864              		.loc 1 715 9 is_stmt 1 view .LVU342
 865              	.LVL79:
 716:rtos/uCOS-III/Source/os_q.c ****                      ts,
 866              		.loc 1 716 9 view .LVU343
ARM GAS  /tmp/cc61ansq.s 			page 33


 867 0080 0122     		movs	r2, #1
 868 0082 0021     		movs	r1, #0
 869 0084 FFF7FEFF 		bl	OS_PendAbort
 870              	.LVL80:
 719:rtos/uCOS-III/Source/os_q.c ****         if (opt != OS_OPT_PEND_ABORT_ALL) {                     /* Pend abort all tasks waiting?   
 871              		.loc 1 719 9 view .LVU344
 719:rtos/uCOS-III/Source/os_q.c ****         if (opt != OS_OPT_PEND_ABORT_ALL) {                     /* Pend abort all tasks waiting?   
 872              		.loc 1 719 18 is_stmt 0 view .LVU345
 873 0088 0135     		adds	r5, r5, #1
 874              	.LVL81:
 719:rtos/uCOS-III/Source/os_q.c ****         if (opt != OS_OPT_PEND_ABORT_ALL) {                     /* Pend abort all tasks waiting?   
 875              		.loc 1 719 18 view .LVU346
 876 008a ADB2     		uxth	r5, r5
 877              	.LVL82:
 720:rtos/uCOS-III/Source/os_q.c ****             break;                                              /* No                              
 878              		.loc 1 720 9 is_stmt 1 view .LVU347
 720:rtos/uCOS-III/Source/os_q.c ****             break;                                              /* No                              
 879              		.loc 1 720 12 is_stmt 0 view .LVU348
 880 008c B4F5807F 		cmp	r4, #256
 881 0090 F4D0     		beq	.L64
 882              	.L65:
 724:rtos/uCOS-III/Source/os_q.c **** 
 883              		.loc 1 724 5 is_stmt 1 view .LVU349
 724:rtos/uCOS-III/Source/os_q.c **** 
 884              		.loc 1 724 5 view .LVU350
 724:rtos/uCOS-III/Source/os_q.c **** 
 885              		.loc 1 724 5 view .LVU351
 886 0092 4046     		mov	r0, r8
 887 0094 FFF7FEFF 		bl	CPU_SR_Restore
 888              	.LVL83:
 724:rtos/uCOS-III/Source/os_q.c **** 
 889              		.loc 1 724 5 view .LVU352
 724:rtos/uCOS-III/Source/os_q.c **** 
 890              		.loc 1 724 5 view .LVU353
 726:rtos/uCOS-III/Source/os_q.c ****         OSSched();                                              /* Run the scheduler               
 891              		.loc 1 726 5 view .LVU354
 726:rtos/uCOS-III/Source/os_q.c ****         OSSched();                                              /* Run the scheduler               
 892              		.loc 1 726 8 is_stmt 0 view .LVU355
 893 0098 14F4004F 		tst	r4, #32768
 894 009c 09D0     		beq	.L73
 895              	.L67:
 730:rtos/uCOS-III/Source/os_q.c ****     return (nbr_tasks);
 896              		.loc 1 730 4 is_stmt 1 view .LVU356
 730:rtos/uCOS-III/Source/os_q.c ****     return (nbr_tasks);
 897              		.loc 1 730 11 is_stmt 0 view .LVU357
 898 009e 0023     		movs	r3, #0
 899 00a0 3380     		strh	r3, [r6]	@ movhi
 731:rtos/uCOS-III/Source/os_q.c **** }
 900              		.loc 1 731 5 is_stmt 1 view .LVU358
 731:rtos/uCOS-III/Source/os_q.c **** }
 901              		.loc 1 731 12 is_stmt 0 view .LVU359
 902 00a2 C2E7     		b	.L57
 903              	.LVL84:
 904              	.L72:
 703:rtos/uCOS-III/Source/os_q.c ****        *p_err =  OS_ERR_PEND_ABORT_NONE;
 905              		.loc 1 703 9 is_stmt 1 view .LVU360
 703:rtos/uCOS-III/Source/os_q.c ****        *p_err =  OS_ERR_PEND_ABORT_NONE;
ARM GAS  /tmp/cc61ansq.s 			page 34


 906              		.loc 1 703 9 view .LVU361
 703:rtos/uCOS-III/Source/os_q.c ****        *p_err =  OS_ERR_PEND_ABORT_NONE;
 907              		.loc 1 703 9 view .LVU362
 908 00a4 FFF7FEFF 		bl	CPU_SR_Restore
 909              	.LVL85:
 703:rtos/uCOS-III/Source/os_q.c ****        *p_err =  OS_ERR_PEND_ABORT_NONE;
 910              		.loc 1 703 9 view .LVU363
 703:rtos/uCOS-III/Source/os_q.c ****        *p_err =  OS_ERR_PEND_ABORT_NONE;
 911              		.loc 1 703 9 view .LVU364
 704:rtos/uCOS-III/Source/os_q.c ****         return (0u);
 912              		.loc 1 704 8 view .LVU365
 704:rtos/uCOS-III/Source/os_q.c ****         return (0u);
 913              		.loc 1 704 15 is_stmt 0 view .LVU366
 914 00a8 46F2AB13 		movw	r3, #25003
 915 00ac 3380     		strh	r3, [r6]	@ movhi
 705:rtos/uCOS-III/Source/os_q.c ****     }
 916              		.loc 1 705 9 is_stmt 1 view .LVU367
 705:rtos/uCOS-III/Source/os_q.c ****     }
 917              		.loc 1 705 16 is_stmt 0 view .LVU368
 918 00ae 0025     		movs	r5, #0
 919 00b0 BBE7     		b	.L57
 920              	.LVL86:
 921              	.L73:
 727:rtos/uCOS-III/Source/os_q.c ****     }
 922              		.loc 1 727 9 is_stmt 1 view .LVU369
 923 00b2 FFF7FEFF 		bl	OSSched
 924              	.LVL87:
 925 00b6 F2E7     		b	.L67
 926              	.L75:
 927              		.align	2
 928              	.L74:
 929 00b8 00000000 		.word	OSIntNestingCtr
 930 00bc 00000000 		.word	OSRunning
 931 00c0 51554555 		.word	1430607185
 932              		.cfi_endproc
 933              	.LFE4:
 935              		.section	.text.OSQPost,"ax",%progbits
 936              		.align	1
 937              		.global	OSQPost
 938              		.syntax unified
 939              		.thumb
 940              		.thumb_func
 941              		.fpu fpv4-sp-d16
 943              	OSQPost:
 944              	.LVL88:
 945              	.LFB5:
 733:rtos/uCOS-III/Source/os_q.c **** #endif
 734:rtos/uCOS-III/Source/os_q.c **** 
 735:rtos/uCOS-III/Source/os_q.c **** 
 736:rtos/uCOS-III/Source/os_q.c **** /*
 737:rtos/uCOS-III/Source/os_q.c **** ***************************************************************************************************
 738:rtos/uCOS-III/Source/os_q.c **** *                                               POST MESSAGE TO A QUEUE
 739:rtos/uCOS-III/Source/os_q.c **** *
 740:rtos/uCOS-III/Source/os_q.c **** * Description: This function sends a message to a queue.  With the 'opt' argument, you can specify 
 741:rtos/uCOS-III/Source/os_q.c **** *              is broadcast to all waiting tasks and/or whether you post the message to the front o
 742:rtos/uCOS-III/Source/os_q.c **** *              or normally (FIFO) at the end of the queue.
 743:rtos/uCOS-III/Source/os_q.c **** *
ARM GAS  /tmp/cc61ansq.s 			page 35


 744:rtos/uCOS-III/Source/os_q.c **** * Arguments  : p_q           is a pointer to a message queue that must have been created by OSQCrea
 745:rtos/uCOS-III/Source/os_q.c **** *
 746:rtos/uCOS-III/Source/os_q.c **** *              p_void        is a pointer to the message to send.
 747:rtos/uCOS-III/Source/os_q.c **** *
 748:rtos/uCOS-III/Source/os_q.c **** *              msg_size      specifies the size of the message (in bytes)
 749:rtos/uCOS-III/Source/os_q.c **** *
 750:rtos/uCOS-III/Source/os_q.c **** *              opt           determines the type of POST performed:
 751:rtos/uCOS-III/Source/os_q.c **** *
 752:rtos/uCOS-III/Source/os_q.c **** *                                OS_OPT_POST_ALL          POST to ALL tasks that are waiting on the
 753:rtos/uCOS-III/Source/os_q.c **** *                                                         can be added to either OS_OPT_POST_FIFO o
 754:rtos/uCOS-III/Source/os_q.c **** *                                OS_OPT_POST_FIFO         POST message to end of queue (FIFO) and w
 755:rtos/uCOS-III/Source/os_q.c **** *                                                         waiting task.
 756:rtos/uCOS-III/Source/os_q.c **** *                                OS_OPT_POST_LIFO         POST message to the front of the queue (L
 757:rtos/uCOS-III/Source/os_q.c **** *                                                         a single waiting task.
 758:rtos/uCOS-III/Source/os_q.c **** *                                OS_OPT_POST_NO_SCHED     Do not call the scheduler
 759:rtos/uCOS-III/Source/os_q.c **** *
 760:rtos/uCOS-III/Source/os_q.c **** *                            Note(s): 1) OS_OPT_POST_NO_SCHED can be added (or OR'd) with one of th
 761:rtos/uCOS-III/Source/os_q.c **** *                                     2) OS_OPT_POST_ALL      can be added (or OR'd) with one of th
 762:rtos/uCOS-III/Source/os_q.c **** *                                     3) Possible combination of options are:
 763:rtos/uCOS-III/Source/os_q.c **** *
 764:rtos/uCOS-III/Source/os_q.c **** *                                        OS_OPT_POST_FIFO
 765:rtos/uCOS-III/Source/os_q.c **** *                                        OS_OPT_POST_LIFO
 766:rtos/uCOS-III/Source/os_q.c **** *                                        OS_OPT_POST_FIFO + OS_OPT_POST_ALL
 767:rtos/uCOS-III/Source/os_q.c **** *                                        OS_OPT_POST_LIFO + OS_OPT_POST_ALL
 768:rtos/uCOS-III/Source/os_q.c **** *                                        OS_OPT_POST_FIFO + OS_OPT_POST_NO_SCHED
 769:rtos/uCOS-III/Source/os_q.c **** *                                        OS_OPT_POST_LIFO + OS_OPT_POST_NO_SCHED
 770:rtos/uCOS-III/Source/os_q.c **** *                                        OS_OPT_POST_FIFO + OS_OPT_POST_ALL + OS_OPT_POST_NO_SCHED
 771:rtos/uCOS-III/Source/os_q.c **** *                                        OS_OPT_POST_LIFO + OS_OPT_POST_ALL + OS_OPT_POST_NO_SCHED
 772:rtos/uCOS-III/Source/os_q.c **** *
 773:rtos/uCOS-III/Source/os_q.c **** *              p_err         is a pointer to a variable that will contain an error code returned by
 774:rtos/uCOS-III/Source/os_q.c **** *
 775:rtos/uCOS-III/Source/os_q.c **** *                                OS_ERR_NONE              The call was successful and the message w
 776:rtos/uCOS-III/Source/os_q.c **** *                                OS_ERR_MSG_POOL_EMPTY    If there are no more OS_MSGs to use to pl
 777:rtos/uCOS-III/Source/os_q.c **** *                                OS_ERR_OBJ_PTR_NULL      If 'p_q' is a NULL pointer
 778:rtos/uCOS-III/Source/os_q.c **** *                                OS_ERR_OBJ_TYPE          If the message queue was not initialized
 779:rtos/uCOS-III/Source/os_q.c **** *                                OS_ERR_OPT_INVALID       You specified an invalid option
 780:rtos/uCOS-III/Source/os_q.c **** *                                OS_ERR_OS_NOT_RUNNING    If uC/OS-III is not running yet
 781:rtos/uCOS-III/Source/os_q.c **** *                                OS_ERR_Q_MAX             If the queue is full
 782:rtos/uCOS-III/Source/os_q.c **** *
 783:rtos/uCOS-III/Source/os_q.c **** * Returns    : None
 784:rtos/uCOS-III/Source/os_q.c **** *
 785:rtos/uCOS-III/Source/os_q.c **** * Note(s)    : none
 786:rtos/uCOS-III/Source/os_q.c **** ***************************************************************************************************
 787:rtos/uCOS-III/Source/os_q.c **** */
 788:rtos/uCOS-III/Source/os_q.c **** 
 789:rtos/uCOS-III/Source/os_q.c **** void  OSQPost (OS_Q         *p_q,
 790:rtos/uCOS-III/Source/os_q.c ****                void         *p_void,
 791:rtos/uCOS-III/Source/os_q.c ****                OS_MSG_SIZE   msg_size,
 792:rtos/uCOS-III/Source/os_q.c ****                OS_OPT        opt,
 793:rtos/uCOS-III/Source/os_q.c ****                OS_ERR       *p_err)
 794:rtos/uCOS-III/Source/os_q.c **** {
 946              		.loc 1 794 1 view -0
 947              		.cfi_startproc
 948              		@ args = 4, pretend = 0, frame = 0
 949              		@ frame_needed = 0, uses_anonymous_args = 0
 950              		.loc 1 794 1 is_stmt 0 view .LVU371
 951 0000 2DE9F043 		push	{r4, r5, r6, r7, r8, r9, lr}
ARM GAS  /tmp/cc61ansq.s 			page 36


 952              	.LCFI4:
 953              		.cfi_def_cfa_offset 28
 954              		.cfi_offset 4, -28
 955              		.cfi_offset 5, -24
 956              		.cfi_offset 6, -20
 957              		.cfi_offset 7, -16
 958              		.cfi_offset 8, -12
 959              		.cfi_offset 9, -8
 960              		.cfi_offset 14, -4
 961 0004 83B0     		sub	sp, sp, #12
 962              	.LCFI5:
 963              		.cfi_def_cfa_offset 40
 964 0006 1C46     		mov	r4, r3
 795:rtos/uCOS-III/Source/os_q.c ****     OS_OPT         post_type;
 965              		.loc 1 795 5 is_stmt 1 view .LVU372
 796:rtos/uCOS-III/Source/os_q.c ****     OS_PEND_LIST  *p_pend_list;
 966              		.loc 1 796 5 view .LVU373
 797:rtos/uCOS-III/Source/os_q.c ****     OS_TCB        *p_tcb;
 967              		.loc 1 797 5 view .LVU374
 798:rtos/uCOS-III/Source/os_q.c ****     OS_TCB        *p_tcb_next;
 968              		.loc 1 798 5 view .LVU375
 799:rtos/uCOS-III/Source/os_q.c ****     CPU_TS         ts;
 969              		.loc 1 799 5 view .LVU376
 800:rtos/uCOS-III/Source/os_q.c ****     CPU_SR_ALLOC();
 970              		.loc 1 800 5 view .LVU377
 971              	.LVL89:
 801:rtos/uCOS-III/Source/os_q.c **** 
 802:rtos/uCOS-III/Source/os_q.c **** 
 803:rtos/uCOS-III/Source/os_q.c **** #ifdef OS_SAFETY_CRITICAL
 804:rtos/uCOS-III/Source/os_q.c ****     if (p_err == (OS_ERR *)0) {
 805:rtos/uCOS-III/Source/os_q.c ****         OS_SAFETY_CRITICAL_EXCEPTION();
 806:rtos/uCOS-III/Source/os_q.c ****         return;
 807:rtos/uCOS-III/Source/os_q.c ****     }
 808:rtos/uCOS-III/Source/os_q.c **** #endif
 809:rtos/uCOS-III/Source/os_q.c **** 
 810:rtos/uCOS-III/Source/os_q.c ****     OS_TRACE_Q_POST_ENTER(p_q, p_void, msg_size, opt);
 972              		.loc 1 810 54 view .LVU378
 811:rtos/uCOS-III/Source/os_q.c **** 
 812:rtos/uCOS-III/Source/os_q.c **** #if (OS_CFG_INVALID_OS_CALLS_CHK_EN > 0u)
 813:rtos/uCOS-III/Source/os_q.c ****     if (OSRunning != OS_STATE_OS_RUNNING) {                     /* Is the kernel running?          
 973              		.loc 1 813 5 view .LVU379
 974              		.loc 1 813 19 is_stmt 0 view .LVU380
 975 0008 374B     		ldr	r3, .L95
 976              	.LVL90:
 977              		.loc 1 813 19 view .LVU381
 978 000a 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 979              		.loc 1 813 8 view .LVU382
 980 000c 012B     		cmp	r3, #1
 981 000e 06D0     		beq	.L77
 814:rtos/uCOS-III/Source/os_q.c ****         OS_TRACE_Q_POST_EXIT(OS_ERR_OS_NOT_RUNNING);
 982              		.loc 1 814 52 is_stmt 1 view .LVU383
 815:rtos/uCOS-III/Source/os_q.c ****        *p_err = OS_ERR_OS_NOT_RUNNING;
 983              		.loc 1 815 8 view .LVU384
 984              		.loc 1 815 15 is_stmt 0 view .LVU385
 985 0010 45F68963 		movw	r3, #24201
 986 0014 0A9A     		ldr	r2, [sp, #40]
 987              	.LVL91:
ARM GAS  /tmp/cc61ansq.s 			page 37


 988              		.loc 1 815 15 view .LVU386
 989 0016 1380     		strh	r3, [r2]	@ movhi
 816:rtos/uCOS-III/Source/os_q.c ****         return;
 990              		.loc 1 816 9 is_stmt 1 view .LVU387
 991              	.LVL92:
 992              	.L76:
 817:rtos/uCOS-III/Source/os_q.c ****     }
 818:rtos/uCOS-III/Source/os_q.c **** #endif
 819:rtos/uCOS-III/Source/os_q.c **** 
 820:rtos/uCOS-III/Source/os_q.c **** #if (OS_CFG_ARG_CHK_EN > 0u)
 821:rtos/uCOS-III/Source/os_q.c ****     if (p_q == (OS_Q *)0) {                                     /* Validate 'p_q'                  
 822:rtos/uCOS-III/Source/os_q.c ****         OS_TRACE_Q_POST_FAILED(p_q);
 823:rtos/uCOS-III/Source/os_q.c ****         OS_TRACE_Q_POST_EXIT(OS_ERR_OBJ_PTR_NULL);
 824:rtos/uCOS-III/Source/os_q.c ****        *p_err = OS_ERR_OBJ_PTR_NULL;
 825:rtos/uCOS-III/Source/os_q.c ****         return;
 826:rtos/uCOS-III/Source/os_q.c ****     }
 827:rtos/uCOS-III/Source/os_q.c ****     switch (opt) {                                              /* Validate 'opt'                  
 828:rtos/uCOS-III/Source/os_q.c ****         case OS_OPT_POST_FIFO:
 829:rtos/uCOS-III/Source/os_q.c ****         case OS_OPT_POST_LIFO:
 830:rtos/uCOS-III/Source/os_q.c ****         case OS_OPT_POST_FIFO | OS_OPT_POST_ALL:
 831:rtos/uCOS-III/Source/os_q.c ****         case OS_OPT_POST_LIFO | OS_OPT_POST_ALL:
 832:rtos/uCOS-III/Source/os_q.c ****         case OS_OPT_POST_FIFO | OS_OPT_POST_NO_SCHED:
 833:rtos/uCOS-III/Source/os_q.c ****         case OS_OPT_POST_LIFO | OS_OPT_POST_NO_SCHED:
 834:rtos/uCOS-III/Source/os_q.c ****         case OS_OPT_POST_FIFO | (OS_OPT)(OS_OPT_POST_ALL | OS_OPT_POST_NO_SCHED):
 835:rtos/uCOS-III/Source/os_q.c ****         case OS_OPT_POST_LIFO | (OS_OPT)(OS_OPT_POST_ALL | OS_OPT_POST_NO_SCHED):
 836:rtos/uCOS-III/Source/os_q.c ****              break;
 837:rtos/uCOS-III/Source/os_q.c **** 
 838:rtos/uCOS-III/Source/os_q.c ****         default:
 839:rtos/uCOS-III/Source/os_q.c ****              OS_TRACE_Q_POST_FAILED(p_q);
 840:rtos/uCOS-III/Source/os_q.c ****              OS_TRACE_Q_POST_EXIT(OS_ERR_OPT_INVALID);
 841:rtos/uCOS-III/Source/os_q.c ****             *p_err =  OS_ERR_OPT_INVALID;
 842:rtos/uCOS-III/Source/os_q.c ****              return;
 843:rtos/uCOS-III/Source/os_q.c ****     }
 844:rtos/uCOS-III/Source/os_q.c **** #endif
 845:rtos/uCOS-III/Source/os_q.c **** 
 846:rtos/uCOS-III/Source/os_q.c **** #if (OS_CFG_OBJ_TYPE_CHK_EN > 0u)
 847:rtos/uCOS-III/Source/os_q.c ****     if (p_q->Type != OS_OBJ_TYPE_Q) {                           /* Make sure message queue was crea
 848:rtos/uCOS-III/Source/os_q.c ****         OS_TRACE_Q_POST_FAILED(p_q);
 849:rtos/uCOS-III/Source/os_q.c ****         OS_TRACE_Q_POST_EXIT(OS_ERR_OBJ_TYPE);
 850:rtos/uCOS-III/Source/os_q.c ****        *p_err = OS_ERR_OBJ_TYPE;
 851:rtos/uCOS-III/Source/os_q.c ****         return;
 852:rtos/uCOS-III/Source/os_q.c ****     }
 853:rtos/uCOS-III/Source/os_q.c **** #endif
 854:rtos/uCOS-III/Source/os_q.c **** #if (OS_CFG_TS_EN > 0u)
 855:rtos/uCOS-III/Source/os_q.c ****     ts = OS_TS_GET();                                           /* Get timestamp                   
 856:rtos/uCOS-III/Source/os_q.c **** #else
 857:rtos/uCOS-III/Source/os_q.c ****     ts = 0u;
 858:rtos/uCOS-III/Source/os_q.c **** #endif
 859:rtos/uCOS-III/Source/os_q.c **** 
 860:rtos/uCOS-III/Source/os_q.c ****     OS_TRACE_Q_POST(p_q);
 861:rtos/uCOS-III/Source/os_q.c **** 
 862:rtos/uCOS-III/Source/os_q.c ****     CPU_CRITICAL_ENTER();
 863:rtos/uCOS-III/Source/os_q.c ****     p_pend_list = &p_q->PendList;
 864:rtos/uCOS-III/Source/os_q.c ****     if (p_pend_list->HeadPtr == (OS_TCB *)0) {                  /* Any task waiting on message queu
 865:rtos/uCOS-III/Source/os_q.c ****         if ((opt & OS_OPT_POST_LIFO) == 0u) {                   /* Determine whether we post FIFO o
 866:rtos/uCOS-III/Source/os_q.c ****             post_type = OS_OPT_POST_FIFO;
 867:rtos/uCOS-III/Source/os_q.c ****         } else {
ARM GAS  /tmp/cc61ansq.s 			page 38


 868:rtos/uCOS-III/Source/os_q.c ****             post_type = OS_OPT_POST_LIFO;
 869:rtos/uCOS-III/Source/os_q.c ****         }
 870:rtos/uCOS-III/Source/os_q.c ****         OS_MsgQPut(&p_q->MsgQ,                                  /* Place message in the message que
 871:rtos/uCOS-III/Source/os_q.c ****                    p_void,
 872:rtos/uCOS-III/Source/os_q.c ****                    msg_size,
 873:rtos/uCOS-III/Source/os_q.c ****                    post_type,
 874:rtos/uCOS-III/Source/os_q.c ****                    ts,
 875:rtos/uCOS-III/Source/os_q.c ****                    p_err);
 876:rtos/uCOS-III/Source/os_q.c ****         CPU_CRITICAL_EXIT();
 877:rtos/uCOS-III/Source/os_q.c ****         OS_TRACE_Q_POST_EXIT(*p_err);
 878:rtos/uCOS-III/Source/os_q.c ****         return;
 879:rtos/uCOS-III/Source/os_q.c ****     }
 880:rtos/uCOS-III/Source/os_q.c **** 
 881:rtos/uCOS-III/Source/os_q.c ****     p_tcb = p_pend_list->HeadPtr;
 882:rtos/uCOS-III/Source/os_q.c ****     while (p_tcb != (OS_TCB *)0) {
 883:rtos/uCOS-III/Source/os_q.c ****         p_tcb_next = p_tcb->PendNextPtr;
 884:rtos/uCOS-III/Source/os_q.c ****         OS_Post((OS_PEND_OBJ *)((void *)p_q),
 885:rtos/uCOS-III/Source/os_q.c ****                 p_tcb,
 886:rtos/uCOS-III/Source/os_q.c ****                 p_void,
 887:rtos/uCOS-III/Source/os_q.c ****                 msg_size,
 888:rtos/uCOS-III/Source/os_q.c ****                 ts);
 889:rtos/uCOS-III/Source/os_q.c ****         if ((opt & OS_OPT_POST_ALL) == 0u)  {                   /* Post message to all tasks waitin
 890:rtos/uCOS-III/Source/os_q.c ****             break;                                              /* No                              
 891:rtos/uCOS-III/Source/os_q.c ****         }
 892:rtos/uCOS-III/Source/os_q.c ****         p_tcb = p_tcb_next;
 893:rtos/uCOS-III/Source/os_q.c ****     }
 894:rtos/uCOS-III/Source/os_q.c **** 
 895:rtos/uCOS-III/Source/os_q.c ****     CPU_CRITICAL_EXIT();
 896:rtos/uCOS-III/Source/os_q.c **** 
 897:rtos/uCOS-III/Source/os_q.c ****     if ((opt & OS_OPT_POST_NO_SCHED) == 0u) {
 898:rtos/uCOS-III/Source/os_q.c ****         OSSched();                                              /* Run the scheduler               
 899:rtos/uCOS-III/Source/os_q.c ****     }
 900:rtos/uCOS-III/Source/os_q.c **** 
 901:rtos/uCOS-III/Source/os_q.c ****    *p_err = OS_ERR_NONE;
 902:rtos/uCOS-III/Source/os_q.c ****     OS_TRACE_Q_POST_EXIT(*p_err);
 903:rtos/uCOS-III/Source/os_q.c **** }
 993              		.loc 1 903 1 is_stmt 0 view .LVU388
 994 0018 03B0     		add	sp, sp, #12
 995              	.LCFI6:
 996              		.cfi_remember_state
 997              		.cfi_def_cfa_offset 28
 998              		@ sp needed
 999 001a BDE8F083 		pop	{r4, r5, r6, r7, r8, r9, pc}
 1000              	.LVL93:
 1001              	.L77:
 1002              	.LCFI7:
 1003              		.cfi_restore_state
 1004              		.loc 1 903 1 view .LVU389
 1005 001e 0546     		mov	r5, r0
 1006 0020 0E46     		mov	r6, r1
 1007 0022 1746     		mov	r7, r2
 821:rtos/uCOS-III/Source/os_q.c ****         OS_TRACE_Q_POST_FAILED(p_q);
 1008              		.loc 1 821 5 is_stmt 1 view .LVU390
 821:rtos/uCOS-III/Source/os_q.c ****         OS_TRACE_Q_POST_FAILED(p_q);
 1009              		.loc 1 821 8 is_stmt 0 view .LVU391
 1010 0024 98B1     		cbz	r0, .L92
 827:rtos/uCOS-III/Source/os_q.c ****         case OS_OPT_POST_FIFO:
ARM GAS  /tmp/cc61ansq.s 			page 39


 1011              		.loc 1 827 5 is_stmt 1 view .LVU392
 1012 0026 B4F5004F 		cmp	r4, #32768
 1013 002a 07D0     		beq	.L80
 1014 002c 18D8     		bhi	.L81
 1015 002e B4F5007F 		cmp	r4, #512
 1016 0032 03D0     		beq	.L80
 1017 0034 10D8     		bhi	.L82
 1018 0036 0CB1     		cbz	r4, .L80
 1019 0038 102C     		cmp	r4, #16
 1020 003a 1CD1     		bne	.L83
 1021              	.L80:
 836:rtos/uCOS-III/Source/os_q.c **** 
 1022              		.loc 1 836 14 view .LVU393
 847:rtos/uCOS-III/Source/os_q.c ****         OS_TRACE_Q_POST_FAILED(p_q);
 1023              		.loc 1 847 5 view .LVU394
 847:rtos/uCOS-III/Source/os_q.c ****         OS_TRACE_Q_POST_FAILED(p_q);
 1024              		.loc 1 847 12 is_stmt 0 view .LVU395
 1025 003c 2A68     		ldr	r2, [r5]
 1026              	.LVL94:
 847:rtos/uCOS-III/Source/os_q.c ****         OS_TRACE_Q_POST_FAILED(p_q);
 1027              		.loc 1 847 8 view .LVU396
 1028 003e 2B4B     		ldr	r3, .L95+4
 1029 0040 9A42     		cmp	r2, r3
 1030 0042 1DD0     		beq	.L84
 848:rtos/uCOS-III/Source/os_q.c ****         OS_TRACE_Q_POST_EXIT(OS_ERR_OBJ_TYPE);
 1031              		.loc 1 848 36 is_stmt 1 view .LVU397
 849:rtos/uCOS-III/Source/os_q.c ****        *p_err = OS_ERR_OBJ_TYPE;
 1032              		.loc 1 849 46 view .LVU398
 850:rtos/uCOS-III/Source/os_q.c ****         return;
 1033              		.loc 1 850 8 view .LVU399
 850:rtos/uCOS-III/Source/os_q.c ****         return;
 1034              		.loc 1 850 15 is_stmt 0 view .LVU400
 1035 0044 45F6C453 		movw	r3, #24004
 1036 0048 0A9A     		ldr	r2, [sp, #40]
 1037 004a 1380     		strh	r3, [r2]	@ movhi
 851:rtos/uCOS-III/Source/os_q.c ****     }
 1038              		.loc 1 851 9 is_stmt 1 view .LVU401
 1039 004c E4E7     		b	.L76
 1040              	.LVL95:
 1041              	.L92:
 822:rtos/uCOS-III/Source/os_q.c ****         OS_TRACE_Q_POST_EXIT(OS_ERR_OBJ_PTR_NULL);
 1042              		.loc 1 822 36 view .LVU402
 823:rtos/uCOS-III/Source/os_q.c ****        *p_err = OS_ERR_OBJ_PTR_NULL;
 1043              		.loc 1 823 50 view .LVU403
 824:rtos/uCOS-III/Source/os_q.c ****         return;
 1044              		.loc 1 824 8 view .LVU404
 824:rtos/uCOS-III/Source/os_q.c ****         return;
 1045              		.loc 1 824 15 is_stmt 0 view .LVU405
 1046 004e 45F6C353 		movw	r3, #24003
 1047 0052 0A9A     		ldr	r2, [sp, #40]
 1048              	.LVL96:
 824:rtos/uCOS-III/Source/os_q.c ****         return;
 1049              		.loc 1 824 15 view .LVU406
 1050 0054 1380     		strh	r3, [r2]	@ movhi
 825:rtos/uCOS-III/Source/os_q.c ****     }
 1051              		.loc 1 825 9 is_stmt 1 view .LVU407
 1052 0056 DFE7     		b	.L76
ARM GAS  /tmp/cc61ansq.s 			page 40


 1053              	.LVL97:
 1054              	.L82:
 827:rtos/uCOS-III/Source/os_q.c ****         case OS_OPT_POST_FIFO:
 1055              		.loc 1 827 5 is_stmt 0 view .LVU408
 1056 0058 B4F5047F 		cmp	r4, #528
 1057 005c 0BD1     		bne	.L83
 1058 005e EDE7     		b	.L80
 1059              	.L81:
 1060 0060 B4F5024F 		cmp	r4, #33280
 1061 0064 EAD0     		beq	.L80
 1062 0066 48F21023 		movw	r3, #33296
 1063 006a 9C42     		cmp	r4, r3
 1064 006c E6D0     		beq	.L80
 1065 006e 48F21003 		movw	r3, #32784
 1066 0072 9C42     		cmp	r4, r3
 1067 0074 E2D0     		beq	.L80
 1068              	.L83:
 839:rtos/uCOS-III/Source/os_q.c ****              OS_TRACE_Q_POST_EXIT(OS_ERR_OPT_INVALID);
 1069              		.loc 1 839 41 is_stmt 1 view .LVU409
 840:rtos/uCOS-III/Source/os_q.c ****             *p_err =  OS_ERR_OPT_INVALID;
 1070              		.loc 1 840 54 view .LVU410
 841:rtos/uCOS-III/Source/os_q.c ****              return;
 1071              		.loc 1 841 13 view .LVU411
 841:rtos/uCOS-III/Source/os_q.c ****              return;
 1072              		.loc 1 841 20 is_stmt 0 view .LVU412
 1073 0076 45F62563 		movw	r3, #24101
 1074 007a 0A9A     		ldr	r2, [sp, #40]
 1075              	.LVL98:
 841:rtos/uCOS-III/Source/os_q.c ****              return;
 1076              		.loc 1 841 20 view .LVU413
 1077 007c 1380     		strh	r3, [r2]	@ movhi
 842:rtos/uCOS-III/Source/os_q.c ****     }
 1078              		.loc 1 842 14 is_stmt 1 view .LVU414
 1079 007e CBE7     		b	.L76
 1080              	.L84:
 857:rtos/uCOS-III/Source/os_q.c **** #endif
 1081              		.loc 1 857 5 view .LVU415
 1082              	.LVL99:
 860:rtos/uCOS-III/Source/os_q.c **** 
 1083              		.loc 1 860 25 view .LVU416
 862:rtos/uCOS-III/Source/os_q.c ****     p_pend_list = &p_q->PendList;
 1084              		.loc 1 862 5 view .LVU417
 862:rtos/uCOS-III/Source/os_q.c ****     p_pend_list = &p_q->PendList;
 1085              		.loc 1 862 5 view .LVU418
 862:rtos/uCOS-III/Source/os_q.c ****     p_pend_list = &p_q->PendList;
 1086              		.loc 1 862 5 view .LVU419
 1087 0080 4020     		movs	r0, #64
 1088              	.LVL100:
 862:rtos/uCOS-III/Source/os_q.c ****     p_pend_list = &p_q->PendList;
 1089              		.loc 1 862 5 is_stmt 0 view .LVU420
 1090 0082 FFF7FEFF 		bl	CPU_SR_Save
 1091              	.LVL101:
 862:rtos/uCOS-III/Source/os_q.c ****     p_pend_list = &p_q->PendList;
 1092              		.loc 1 862 5 view .LVU421
 1093 0086 8146     		mov	r9, r0
 1094              	.LVL102:
 862:rtos/uCOS-III/Source/os_q.c ****     p_pend_list = &p_q->PendList;
ARM GAS  /tmp/cc61ansq.s 			page 41


 1095              		.loc 1 862 5 is_stmt 1 view .LVU422
 862:rtos/uCOS-III/Source/os_q.c ****     p_pend_list = &p_q->PendList;
 1096              		.loc 1 862 5 view .LVU423
 863:rtos/uCOS-III/Source/os_q.c ****     if (p_pend_list->HeadPtr == (OS_TCB *)0) {                  /* Any task waiting on message queu
 1097              		.loc 1 863 5 view .LVU424
 864:rtos/uCOS-III/Source/os_q.c ****         if ((opt & OS_OPT_POST_LIFO) == 0u) {                   /* Determine whether we post FIFO o
 1098              		.loc 1 864 5 view .LVU425
 864:rtos/uCOS-III/Source/os_q.c ****         if ((opt & OS_OPT_POST_LIFO) == 0u) {                   /* Determine whether we post FIFO o
 1099              		.loc 1 864 20 is_stmt 0 view .LVU426
 1100 0088 6968     		ldr	r1, [r5, #4]
 864:rtos/uCOS-III/Source/os_q.c ****         if ((opt & OS_OPT_POST_LIFO) == 0u) {                   /* Determine whether we post FIFO o
 1101              		.loc 1 864 8 view .LVU427
 1102 008a 71B1     		cbz	r1, .L93
 1103              	.LVL103:
 1104              	.L85:
 882:rtos/uCOS-III/Source/os_q.c ****         p_tcb_next = p_tcb->PendNextPtr;
 1105              		.loc 1 882 11 is_stmt 1 view .LVU428
 1106 008c F9B1     		cbz	r1, .L87
 883:rtos/uCOS-III/Source/os_q.c ****         OS_Post((OS_PEND_OBJ *)((void *)p_q),
 1107              		.loc 1 883 9 view .LVU429
 883:rtos/uCOS-III/Source/os_q.c ****         OS_Post((OS_PEND_OBJ *)((void *)p_q),
 1108              		.loc 1 883 20 is_stmt 0 view .LVU430
 1109 008e D1F82080 		ldr	r8, [r1, #32]
 1110              	.LVL104:
 884:rtos/uCOS-III/Source/os_q.c ****                 p_tcb,
 1111              		.loc 1 884 9 is_stmt 1 view .LVU431
 1112 0092 0023     		movs	r3, #0
 1113 0094 0093     		str	r3, [sp]
 1114 0096 3B46     		mov	r3, r7
 1115 0098 3246     		mov	r2, r6
 1116 009a 2846     		mov	r0, r5
 1117 009c FFF7FEFF 		bl	OS_Post
 1118              	.LVL105:
 889:rtos/uCOS-III/Source/os_q.c ****             break;                                              /* No                              
 1119              		.loc 1 889 9 view .LVU432
 889:rtos/uCOS-III/Source/os_q.c ****             break;                                              /* No                              
 1120              		.loc 1 889 12 is_stmt 0 view .LVU433
 1121 00a0 14F4007F 		tst	r4, #512
 1122 00a4 13D0     		beq	.L87
 892:rtos/uCOS-III/Source/os_q.c ****     }
 1123              		.loc 1 892 15 view .LVU434
 1124 00a6 4146     		mov	r1, r8
 1125 00a8 F0E7     		b	.L85
 1126              	.LVL106:
 1127              	.L93:
 865:rtos/uCOS-III/Source/os_q.c ****             post_type = OS_OPT_POST_FIFO;
 1128              		.loc 1 865 9 is_stmt 1 view .LVU435
 865:rtos/uCOS-III/Source/os_q.c ****             post_type = OS_OPT_POST_FIFO;
 1129              		.loc 1 865 12 is_stmt 0 view .LVU436
 1130 00aa 14F01003 		ands	r3, r4, #16
 1131 00ae 00D0     		beq	.L86
 868:rtos/uCOS-III/Source/os_q.c ****         }
 1132              		.loc 1 868 23 view .LVU437
 1133 00b0 1023     		movs	r3, #16
 1134              	.L86:
 1135              	.LVL107:
 870:rtos/uCOS-III/Source/os_q.c ****                    p_void,
ARM GAS  /tmp/cc61ansq.s 			page 42


 1136              		.loc 1 870 9 is_stmt 1 view .LVU438
 1137 00b2 0A9A     		ldr	r2, [sp, #40]
 1138 00b4 0192     		str	r2, [sp, #4]
 1139 00b6 0022     		movs	r2, #0
 1140 00b8 0092     		str	r2, [sp]
 1141 00ba 3A46     		mov	r2, r7
 1142 00bc 3146     		mov	r1, r6
 1143 00be 05F10C00 		add	r0, r5, #12
 1144              	.LVL108:
 870:rtos/uCOS-III/Source/os_q.c ****                    p_void,
 1145              		.loc 1 870 9 is_stmt 0 view .LVU439
 1146 00c2 FFF7FEFF 		bl	OS_MsgQPut
 1147              	.LVL109:
 876:rtos/uCOS-III/Source/os_q.c ****         OS_TRACE_Q_POST_EXIT(*p_err);
 1148              		.loc 1 876 9 is_stmt 1 view .LVU440
 876:rtos/uCOS-III/Source/os_q.c ****         OS_TRACE_Q_POST_EXIT(*p_err);
 1149              		.loc 1 876 9 view .LVU441
 876:rtos/uCOS-III/Source/os_q.c ****         OS_TRACE_Q_POST_EXIT(*p_err);
 1150              		.loc 1 876 9 view .LVU442
 1151 00c6 4846     		mov	r0, r9
 1152 00c8 FFF7FEFF 		bl	CPU_SR_Restore
 1153              	.LVL110:
 876:rtos/uCOS-III/Source/os_q.c ****         OS_TRACE_Q_POST_EXIT(*p_err);
 1154              		.loc 1 876 9 view .LVU443
 876:rtos/uCOS-III/Source/os_q.c ****         OS_TRACE_Q_POST_EXIT(*p_err);
 1155              		.loc 1 876 9 view .LVU444
 877:rtos/uCOS-III/Source/os_q.c ****         return;
 1156              		.loc 1 877 37 view .LVU445
 878:rtos/uCOS-III/Source/os_q.c ****     }
 1157              		.loc 1 878 9 view .LVU446
 1158 00cc A4E7     		b	.L76
 1159              	.L87:
 895:rtos/uCOS-III/Source/os_q.c **** 
 1160              		.loc 1 895 5 view .LVU447
 895:rtos/uCOS-III/Source/os_q.c **** 
 1161              		.loc 1 895 5 view .LVU448
 895:rtos/uCOS-III/Source/os_q.c **** 
 1162              		.loc 1 895 5 view .LVU449
 1163 00ce 4846     		mov	r0, r9
 1164 00d0 FFF7FEFF 		bl	CPU_SR_Restore
 1165              	.LVL111:
 895:rtos/uCOS-III/Source/os_q.c **** 
 1166              		.loc 1 895 5 view .LVU450
 895:rtos/uCOS-III/Source/os_q.c **** 
 1167              		.loc 1 895 5 view .LVU451
 897:rtos/uCOS-III/Source/os_q.c ****         OSSched();                                              /* Run the scheduler               
 1168              		.loc 1 897 5 view .LVU452
 897:rtos/uCOS-III/Source/os_q.c ****         OSSched();                                              /* Run the scheduler               
 1169              		.loc 1 897 8 is_stmt 0 view .LVU453
 1170 00d4 14F4004F 		tst	r4, #32768
 1171 00d8 03D0     		beq	.L94
 1172              	.L89:
 901:rtos/uCOS-III/Source/os_q.c ****     OS_TRACE_Q_POST_EXIT(*p_err);
 1173              		.loc 1 901 4 is_stmt 1 view .LVU454
 901:rtos/uCOS-III/Source/os_q.c ****     OS_TRACE_Q_POST_EXIT(*p_err);
 1174              		.loc 1 901 11 is_stmt 0 view .LVU455
 1175 00da 0023     		movs	r3, #0
ARM GAS  /tmp/cc61ansq.s 			page 43


 1176 00dc 0A9A     		ldr	r2, [sp, #40]
 1177 00de 1380     		strh	r3, [r2]	@ movhi
 902:rtos/uCOS-III/Source/os_q.c **** }
 1178              		.loc 1 902 33 is_stmt 1 view .LVU456
 1179 00e0 9AE7     		b	.L76
 1180              	.L94:
 898:rtos/uCOS-III/Source/os_q.c ****     }
 1181              		.loc 1 898 9 view .LVU457
 1182 00e2 FFF7FEFF 		bl	OSSched
 1183              	.LVL112:
 1184 00e6 F8E7     		b	.L89
 1185              	.L96:
 1186              		.align	2
 1187              	.L95:
 1188 00e8 00000000 		.word	OSRunning
 1189 00ec 51554555 		.word	1430607185
 1190              		.cfi_endproc
 1191              	.LFE5:
 1193              		.section	.text.OS_QClr,"ax",%progbits
 1194              		.align	1
 1195              		.global	OS_QClr
 1196              		.syntax unified
 1197              		.thumb
 1198              		.thumb_func
 1199              		.fpu fpv4-sp-d16
 1201              	OS_QClr:
 1202              	.LVL113:
 1203              	.LFB6:
 904:rtos/uCOS-III/Source/os_q.c **** 
 905:rtos/uCOS-III/Source/os_q.c **** 
 906:rtos/uCOS-III/Source/os_q.c **** /*
 907:rtos/uCOS-III/Source/os_q.c **** ***************************************************************************************************
 908:rtos/uCOS-III/Source/os_q.c **** *                                        CLEAR THE CONTENTS OF A MESSAGE QUEUE
 909:rtos/uCOS-III/Source/os_q.c **** *
 910:rtos/uCOS-III/Source/os_q.c **** * Description: This function is called by OSQDel() to clear the contents of a message queue
 911:rtos/uCOS-III/Source/os_q.c **** *
 912:rtos/uCOS-III/Source/os_q.c **** 
 913:rtos/uCOS-III/Source/os_q.c **** * Argument(s): p_q      is a pointer to the queue to clear
 914:rtos/uCOS-III/Source/os_q.c **** *              ---
 915:rtos/uCOS-III/Source/os_q.c **** *
 916:rtos/uCOS-III/Source/os_q.c **** * Returns    : none
 917:rtos/uCOS-III/Source/os_q.c **** *
 918:rtos/uCOS-III/Source/os_q.c **** * Note(s)    : 1) This function is INTERNAL to uC/OS-III and your application MUST NOT call it.
 919:rtos/uCOS-III/Source/os_q.c **** ***************************************************************************************************
 920:rtos/uCOS-III/Source/os_q.c **** */
 921:rtos/uCOS-III/Source/os_q.c **** 
 922:rtos/uCOS-III/Source/os_q.c **** void  OS_QClr (OS_Q  *p_q)
 923:rtos/uCOS-III/Source/os_q.c **** {
 1204              		.loc 1 923 1 view -0
 1205              		.cfi_startproc
 1206              		@ args = 0, pretend = 0, frame = 0
 1207              		@ frame_needed = 0, uses_anonymous_args = 0
 1208              		.loc 1 923 1 is_stmt 0 view .LVU459
 1209 0000 38B5     		push	{r3, r4, r5, lr}
 1210              	.LCFI8:
 1211              		.cfi_def_cfa_offset 16
 1212              		.cfi_offset 3, -16
ARM GAS  /tmp/cc61ansq.s 			page 44


 1213              		.cfi_offset 4, -12
 1214              		.cfi_offset 5, -8
 1215              		.cfi_offset 14, -4
 1216 0002 0446     		mov	r4, r0
 924:rtos/uCOS-III/Source/os_q.c ****     (void)OS_MsgQFreeAll(&p_q->MsgQ);                           /* Return all OS_MSGs to the free l
 1217              		.loc 1 924 5 is_stmt 1 view .LVU460
 1218              		.loc 1 924 11 is_stmt 0 view .LVU461
 1219 0004 00F10C05 		add	r5, r0, #12
 1220 0008 2846     		mov	r0, r5
 1221              	.LVL114:
 1222              		.loc 1 924 11 view .LVU462
 1223 000a FFF7FEFF 		bl	OS_MsgQFreeAll
 1224              	.LVL115:
 925:rtos/uCOS-III/Source/os_q.c **** #if (OS_OBJ_TYPE_REQ > 0u)
 926:rtos/uCOS-III/Source/os_q.c ****     p_q->Type    =  OS_OBJ_TYPE_NONE;                           /* Mark the data structure as a NON
 1225              		.loc 1 926 5 is_stmt 1 view .LVU463
 1226              		.loc 1 926 18 is_stmt 0 view .LVU464
 1227 000e 054B     		ldr	r3, .L99
 1228 0010 44F8043B 		str	r3, [r4], #4
 1229              	.LVL116:
 927:rtos/uCOS-III/Source/os_q.c **** #endif
 928:rtos/uCOS-III/Source/os_q.c **** #if (OS_CFG_DBG_EN > 0u)
 929:rtos/uCOS-III/Source/os_q.c ****     p_q->NamePtr = (CPU_CHAR *)((void *)"?Q");
 930:rtos/uCOS-III/Source/os_q.c **** #endif
 931:rtos/uCOS-III/Source/os_q.c ****     OS_MsgQInit(&p_q->MsgQ,                                     /* Initialize the list of OS_MSGs  
 1230              		.loc 1 931 5 is_stmt 1 view .LVU465
 1231 0014 0021     		movs	r1, #0
 1232 0016 2846     		mov	r0, r5
 1233 0018 FFF7FEFF 		bl	OS_MsgQInit
 1234              	.LVL117:
 932:rtos/uCOS-III/Source/os_q.c ****                 0u);
 933:rtos/uCOS-III/Source/os_q.c ****     OS_PendListInit(&p_q->PendList);                            /* Initialize the waiting list     
 1235              		.loc 1 933 5 view .LVU466
 1236 001c 2046     		mov	r0, r4
 1237 001e FFF7FEFF 		bl	OS_PendListInit
 1238              	.LVL118:
 934:rtos/uCOS-III/Source/os_q.c **** }
 1239              		.loc 1 934 1 is_stmt 0 view .LVU467
 1240 0022 38BD     		pop	{r3, r4, r5, pc}
 1241              	.LVL119:
 1242              	.L100:
 1243              		.loc 1 934 1 view .LVU468
 1244              		.align	2
 1245              	.L99:
 1246 0024 4E4F4E45 		.word	1162760014
 1247              		.cfi_endproc
 1248              	.LFE6:
 1250              		.section	.text.OSQDel,"ax",%progbits
 1251              		.align	1
 1252              		.global	OSQDel
 1253              		.syntax unified
 1254              		.thumb
 1255              		.thumb_func
 1256              		.fpu fpv4-sp-d16
 1258              	OSQDel:
 1259              	.LVL120:
 1260              	.LFB1:
ARM GAS  /tmp/cc61ansq.s 			page 45


 183:rtos/uCOS-III/Source/os_q.c ****     OS_OBJ_QTY     nbr_tasks;
 1261              		.loc 1 183 1 is_stmt 1 view -0
 1262              		.cfi_startproc
 1263              		@ args = 0, pretend = 0, frame = 0
 1264              		@ frame_needed = 0, uses_anonymous_args = 0
 183:rtos/uCOS-III/Source/os_q.c ****     OS_OBJ_QTY     nbr_tasks;
 1265              		.loc 1 183 1 is_stmt 0 view .LVU470
 1266 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 1267              	.LCFI9:
 1268              		.cfi_def_cfa_offset 24
 1269              		.cfi_offset 3, -24
 1270              		.cfi_offset 4, -20
 1271              		.cfi_offset 5, -16
 1272              		.cfi_offset 6, -12
 1273              		.cfi_offset 7, -8
 1274              		.cfi_offset 14, -4
 1275 0002 1646     		mov	r6, r2
 184:rtos/uCOS-III/Source/os_q.c ****     OS_PEND_LIST  *p_pend_list;
 1276              		.loc 1 184 5 is_stmt 1 view .LVU471
 185:rtos/uCOS-III/Source/os_q.c ****     OS_TCB        *p_tcb;
 1277              		.loc 1 185 5 view .LVU472
 186:rtos/uCOS-III/Source/os_q.c ****     CPU_TS         ts;
 1278              		.loc 1 186 5 view .LVU473
 187:rtos/uCOS-III/Source/os_q.c ****     CPU_SR_ALLOC();
 1279              		.loc 1 187 5 view .LVU474
 188:rtos/uCOS-III/Source/os_q.c **** 
 1280              		.loc 1 188 5 view .LVU475
 1281              	.LVL121:
 198:rtos/uCOS-III/Source/os_q.c **** 
 1282              		.loc 1 198 35 view .LVU476
 209:rtos/uCOS-III/Source/os_q.c ****         OS_TRACE_Q_DEL_EXIT(OS_ERR_DEL_ISR);
 1283              		.loc 1 209 5 view .LVU477
 209:rtos/uCOS-III/Source/os_q.c ****         OS_TRACE_Q_DEL_EXIT(OS_ERR_DEL_ISR);
 1284              		.loc 1 209 25 is_stmt 0 view .LVU478
 1285 0004 2B4B     		ldr	r3, .L118
 1286 0006 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 209:rtos/uCOS-III/Source/os_q.c ****         OS_TRACE_Q_DEL_EXIT(OS_ERR_DEL_ISR);
 1287              		.loc 1 209 8 view .LVU479
 1288 0008 53B9     		cbnz	r3, .L115
 1289 000a 0546     		mov	r5, r0
 1290 000c 0C46     		mov	r4, r1
 217:rtos/uCOS-III/Source/os_q.c ****         OS_TRACE_Q_DEL_EXIT(OS_ERR_OS_NOT_RUNNING);
 1291              		.loc 1 217 5 is_stmt 1 view .LVU480
 217:rtos/uCOS-III/Source/os_q.c ****         OS_TRACE_Q_DEL_EXIT(OS_ERR_OS_NOT_RUNNING);
 1292              		.loc 1 217 19 is_stmt 0 view .LVU481
 1293 000e 2A4B     		ldr	r3, .L118+4
 1294 0010 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 217:rtos/uCOS-III/Source/os_q.c ****         OS_TRACE_Q_DEL_EXIT(OS_ERR_OS_NOT_RUNNING);
 1295              		.loc 1 217 8 view .LVU482
 1296 0012 012B     		cmp	r3, #1
 1297 0014 0AD0     		beq	.L104
 218:rtos/uCOS-III/Source/os_q.c ****        *p_err = OS_ERR_OS_NOT_RUNNING;
 1298              		.loc 1 218 51 is_stmt 1 view .LVU483
 219:rtos/uCOS-III/Source/os_q.c ****         return (0u);
 1299              		.loc 1 219 8 view .LVU484
 219:rtos/uCOS-III/Source/os_q.c ****         return (0u);
 1300              		.loc 1 219 15 is_stmt 0 view .LVU485
ARM GAS  /tmp/cc61ansq.s 			page 46


 1301 0016 45F68963 		movw	r3, #24201
 1302 001a 1380     		strh	r3, [r2]	@ movhi
 220:rtos/uCOS-III/Source/os_q.c ****     }
 1303              		.loc 1 220 9 is_stmt 1 view .LVU486
 220:rtos/uCOS-III/Source/os_q.c ****     }
 1304              		.loc 1 220 16 is_stmt 0 view .LVU487
 1305 001c 0024     		movs	r4, #0
 1306 001e 03E0     		b	.L103
 1307              	.L115:
 210:rtos/uCOS-III/Source/os_q.c ****        *p_err = OS_ERR_DEL_ISR;
 1308              		.loc 1 210 44 is_stmt 1 view .LVU488
 211:rtos/uCOS-III/Source/os_q.c ****         return (0u);
 1309              		.loc 1 211 8 view .LVU489
 211:rtos/uCOS-III/Source/os_q.c ****         return (0u);
 1310              		.loc 1 211 15 is_stmt 0 view .LVU490
 1311 0020 43F2C923 		movw	r3, #13001
 1312 0024 1380     		strh	r3, [r2]	@ movhi
 212:rtos/uCOS-III/Source/os_q.c ****     }
 1313              		.loc 1 212 9 is_stmt 1 view .LVU491
 212:rtos/uCOS-III/Source/os_q.c ****     }
 1314              		.loc 1 212 16 is_stmt 0 view .LVU492
 1315 0026 0024     		movs	r4, #0
 1316              	.LVL122:
 1317              	.L103:
 291:rtos/uCOS-III/Source/os_q.c **** #endif
 1318              		.loc 1 291 1 view .LVU493
 1319 0028 2046     		mov	r0, r4
 1320 002a F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 1321              	.LVL123:
 1322              	.L104:
 225:rtos/uCOS-III/Source/os_q.c ****         OS_TRACE_Q_DEL_EXIT(OS_ERR_OBJ_PTR_NULL);
 1323              		.loc 1 225 5 is_stmt 1 view .LVU494
 225:rtos/uCOS-III/Source/os_q.c ****         OS_TRACE_Q_DEL_EXIT(OS_ERR_OBJ_PTR_NULL);
 1324              		.loc 1 225 8 is_stmt 0 view .LVU495
 1325 002c 40B1     		cbz	r0, .L116
 233:rtos/uCOS-III/Source/os_q.c ****         OS_TRACE_Q_DEL_EXIT(OS_ERR_OBJ_TYPE);
 1326              		.loc 1 233 5 is_stmt 1 view .LVU496
 233:rtos/uCOS-III/Source/os_q.c ****         OS_TRACE_Q_DEL_EXIT(OS_ERR_OBJ_TYPE);
 1327              		.loc 1 233 12 is_stmt 0 view .LVU497
 1328 002e 0268     		ldr	r2, [r0]
 1329              	.LVL124:
 233:rtos/uCOS-III/Source/os_q.c ****         OS_TRACE_Q_DEL_EXIT(OS_ERR_OBJ_TYPE);
 1330              		.loc 1 233 8 view .LVU498
 1331 0030 224B     		ldr	r3, .L118+8
 1332 0032 9A42     		cmp	r2, r3
 1333 0034 09D0     		beq	.L106
 234:rtos/uCOS-III/Source/os_q.c ****        *p_err = OS_ERR_OBJ_TYPE;
 1334              		.loc 1 234 45 is_stmt 1 view .LVU499
 235:rtos/uCOS-III/Source/os_q.c ****         return (0u);
 1335              		.loc 1 235 8 view .LVU500
 235:rtos/uCOS-III/Source/os_q.c ****         return (0u);
 1336              		.loc 1 235 15 is_stmt 0 view .LVU501
 1337 0036 45F6C453 		movw	r3, #24004
 1338 003a 3380     		strh	r3, [r6]	@ movhi
 236:rtos/uCOS-III/Source/os_q.c ****     }
 1339              		.loc 1 236 9 is_stmt 1 view .LVU502
 236:rtos/uCOS-III/Source/os_q.c ****     }
ARM GAS  /tmp/cc61ansq.s 			page 47


 1340              		.loc 1 236 16 is_stmt 0 view .LVU503
 1341 003c 0024     		movs	r4, #0
 1342 003e F3E7     		b	.L103
 1343              	.LVL125:
 1344              	.L116:
 226:rtos/uCOS-III/Source/os_q.c ****        *p_err =  OS_ERR_OBJ_PTR_NULL;
 1345              		.loc 1 226 49 is_stmt 1 view .LVU504
 227:rtos/uCOS-III/Source/os_q.c ****         return (0u);
 1346              		.loc 1 227 8 view .LVU505
 227:rtos/uCOS-III/Source/os_q.c ****         return (0u);
 1347              		.loc 1 227 15 is_stmt 0 view .LVU506
 1348 0040 45F6C353 		movw	r3, #24003
 1349 0044 1380     		strh	r3, [r2]	@ movhi
 228:rtos/uCOS-III/Source/os_q.c ****     }
 1350              		.loc 1 228 9 is_stmt 1 view .LVU507
 228:rtos/uCOS-III/Source/os_q.c ****     }
 1351              		.loc 1 228 16 is_stmt 0 view .LVU508
 1352 0046 0024     		movs	r4, #0
 1353 0048 EEE7     		b	.L103
 1354              	.LVL126:
 1355              	.L106:
 240:rtos/uCOS-III/Source/os_q.c ****     p_pend_list = &p_q->PendList;
 1356              		.loc 1 240 5 is_stmt 1 view .LVU509
 240:rtos/uCOS-III/Source/os_q.c ****     p_pend_list = &p_q->PendList;
 1357              		.loc 1 240 5 view .LVU510
 240:rtos/uCOS-III/Source/os_q.c ****     p_pend_list = &p_q->PendList;
 1358              		.loc 1 240 5 view .LVU511
 1359 004a 4020     		movs	r0, #64
 1360              	.LVL127:
 240:rtos/uCOS-III/Source/os_q.c ****     p_pend_list = &p_q->PendList;
 1361              		.loc 1 240 5 is_stmt 0 view .LVU512
 1362 004c FFF7FEFF 		bl	CPU_SR_Save
 1363              	.LVL128:
 240:rtos/uCOS-III/Source/os_q.c ****     p_pend_list = &p_q->PendList;
 1364              		.loc 1 240 5 view .LVU513
 1365 0050 0746     		mov	r7, r0
 1366              	.LVL129:
 240:rtos/uCOS-III/Source/os_q.c ****     p_pend_list = &p_q->PendList;
 1367              		.loc 1 240 5 is_stmt 1 view .LVU514
 240:rtos/uCOS-III/Source/os_q.c ****     p_pend_list = &p_q->PendList;
 1368              		.loc 1 240 5 view .LVU515
 241:rtos/uCOS-III/Source/os_q.c ****     nbr_tasks   = 0u;
 1369              		.loc 1 241 5 view .LVU516
 242:rtos/uCOS-III/Source/os_q.c ****     switch (opt) {
 1370              		.loc 1 242 5 view .LVU517
 243:rtos/uCOS-III/Source/os_q.c ****         case OS_OPT_DEL_NO_PEND:                                /* Delete message queue only if no 
 1371              		.loc 1 243 5 view .LVU518
 1372 0052 44B1     		cbz	r4, .L107
 1373 0054 012C     		cmp	r4, #1
 1374 0056 2BD0     		beq	.L112
 285:rtos/uCOS-III/Source/os_q.c ****             *p_err = OS_ERR_OPT_INVALID;
 1375              		.loc 1 285 14 view .LVU519
 285:rtos/uCOS-III/Source/os_q.c ****             *p_err = OS_ERR_OPT_INVALID;
 1376              		.loc 1 285 14 view .LVU520
 285:rtos/uCOS-III/Source/os_q.c ****             *p_err = OS_ERR_OPT_INVALID;
 1377              		.loc 1 285 14 view .LVU521
 1378 0058 FFF7FEFF 		bl	CPU_SR_Restore
ARM GAS  /tmp/cc61ansq.s 			page 48


 1379              	.LVL130:
 285:rtos/uCOS-III/Source/os_q.c ****             *p_err = OS_ERR_OPT_INVALID;
 1380              		.loc 1 285 14 view .LVU522
 285:rtos/uCOS-III/Source/os_q.c ****             *p_err = OS_ERR_OPT_INVALID;
 1381              		.loc 1 285 14 view .LVU523
 286:rtos/uCOS-III/Source/os_q.c ****              break;
 1382              		.loc 1 286 13 view .LVU524
 286:rtos/uCOS-III/Source/os_q.c ****              break;
 1383              		.loc 1 286 20 is_stmt 0 view .LVU525
 1384 005c 45F62563 		movw	r3, #24101
 1385 0060 3380     		strh	r3, [r6]	@ movhi
 287:rtos/uCOS-III/Source/os_q.c ****     }
 1386              		.loc 1 287 14 is_stmt 1 view .LVU526
 242:rtos/uCOS-III/Source/os_q.c ****     switch (opt) {
 1387              		.loc 1 242 17 is_stmt 0 view .LVU527
 1388 0062 0024     		movs	r4, #0
 287:rtos/uCOS-III/Source/os_q.c ****     }
 1389              		.loc 1 287 14 view .LVU528
 1390 0064 E0E7     		b	.L103
 1391              	.LVL131:
 1392              	.L107:
 245:rtos/uCOS-III/Source/os_q.c **** #if (OS_CFG_DBG_EN > 0u)
 1393              		.loc 1 245 14 is_stmt 1 view .LVU529
 245:rtos/uCOS-III/Source/os_q.c **** #if (OS_CFG_DBG_EN > 0u)
 1394              		.loc 1 245 29 is_stmt 0 view .LVU530
 1395 0066 6B68     		ldr	r3, [r5, #4]
 245:rtos/uCOS-III/Source/os_q.c **** #if (OS_CFG_DBG_EN > 0u)
 1396              		.loc 1 245 17 view .LVU531
 1397 0068 2BB1     		cbz	r3, .L117
 255:rtos/uCOS-III/Source/os_q.c ****                 *p_err = OS_ERR_TASK_WAITING;
 1398              		.loc 1 255 18 is_stmt 1 view .LVU532
 255:rtos/uCOS-III/Source/os_q.c ****                 *p_err = OS_ERR_TASK_WAITING;
 1399              		.loc 1 255 18 view .LVU533
 255:rtos/uCOS-III/Source/os_q.c ****                 *p_err = OS_ERR_TASK_WAITING;
 1400              		.loc 1 255 18 view .LVU534
 1401 006a FFF7FEFF 		bl	CPU_SR_Restore
 1402              	.LVL132:
 255:rtos/uCOS-III/Source/os_q.c ****                 *p_err = OS_ERR_TASK_WAITING;
 1403              		.loc 1 255 18 view .LVU535
 255:rtos/uCOS-III/Source/os_q.c ****                 *p_err = OS_ERR_TASK_WAITING;
 1404              		.loc 1 255 18 view .LVU536
 256:rtos/uCOS-III/Source/os_q.c ****              }
 1405              		.loc 1 256 17 view .LVU537
 256:rtos/uCOS-III/Source/os_q.c ****              }
 1406              		.loc 1 256 24 is_stmt 0 view .LVU538
 1407 006e 47F25F13 		movw	r3, #29023
 1408 0072 3380     		strh	r3, [r6]	@ movhi
 1409 0074 D8E7     		b	.L103
 1410              	.LVL133:
 1411              	.L117:
 250:rtos/uCOS-III/Source/os_q.c ****                  OS_QClr(p_q);
 1412              		.loc 1 250 37 is_stmt 1 view .LVU539
 251:rtos/uCOS-III/Source/os_q.c ****                  CPU_CRITICAL_EXIT();
 1413              		.loc 1 251 18 view .LVU540
 1414 0076 2846     		mov	r0, r5
 1415              	.LVL134:
 251:rtos/uCOS-III/Source/os_q.c ****                  CPU_CRITICAL_EXIT();
ARM GAS  /tmp/cc61ansq.s 			page 49


 1416              		.loc 1 251 18 is_stmt 0 view .LVU541
 1417 0078 FFF7FEFF 		bl	OS_QClr
 1418              	.LVL135:
 252:rtos/uCOS-III/Source/os_q.c ****                 *p_err = OS_ERR_NONE;
 1419              		.loc 1 252 18 is_stmt 1 view .LVU542
 252:rtos/uCOS-III/Source/os_q.c ****                 *p_err = OS_ERR_NONE;
 1420              		.loc 1 252 18 view .LVU543
 252:rtos/uCOS-III/Source/os_q.c ****                 *p_err = OS_ERR_NONE;
 1421              		.loc 1 252 18 view .LVU544
 1422 007c 3846     		mov	r0, r7
 1423 007e FFF7FEFF 		bl	CPU_SR_Restore
 1424              	.LVL136:
 252:rtos/uCOS-III/Source/os_q.c ****                 *p_err = OS_ERR_NONE;
 1425              		.loc 1 252 18 view .LVU545
 252:rtos/uCOS-III/Source/os_q.c ****                 *p_err = OS_ERR_NONE;
 1426              		.loc 1 252 18 view .LVU546
 253:rtos/uCOS-III/Source/os_q.c ****              } else {
 1427              		.loc 1 253 17 view .LVU547
 253:rtos/uCOS-III/Source/os_q.c ****              } else {
 1428              		.loc 1 253 24 is_stmt 0 view .LVU548
 1429 0082 0023     		movs	r3, #0
 1430 0084 3380     		strh	r3, [r6]	@ movhi
 1431 0086 CFE7     		b	.L103
 1432              	.LVL137:
 1433              	.L111:
 267:rtos/uCOS-III/Source/os_q.c ****                  OS_PendAbort(p_tcb,
 1434              		.loc 1 267 18 is_stmt 1 view .LVU549
 268:rtos/uCOS-III/Source/os_q.c ****                               ts,
 1435              		.loc 1 268 18 view .LVU550
 1436 0088 0222     		movs	r2, #2
 1437 008a 0021     		movs	r1, #0
 1438 008c FFF7FEFF 		bl	OS_PendAbort
 1439              	.LVL138:
 271:rtos/uCOS-III/Source/os_q.c ****              }
 1440              		.loc 1 271 18 view .LVU551
 271:rtos/uCOS-III/Source/os_q.c ****              }
 1441              		.loc 1 271 27 is_stmt 0 view .LVU552
 1442 0090 0134     		adds	r4, r4, #1
 1443              	.LVL139:
 271:rtos/uCOS-III/Source/os_q.c ****              }
 1444              		.loc 1 271 27 view .LVU553
 1445 0092 A4B2     		uxth	r4, r4
 1446              	.LVL140:
 1447              	.L108:
 266:rtos/uCOS-III/Source/os_q.c ****                  p_tcb = p_pend_list->HeadPtr;
 1448              		.loc 1 266 20 is_stmt 1 view .LVU554
 266:rtos/uCOS-III/Source/os_q.c ****                  p_tcb = p_pend_list->HeadPtr;
 1449              		.loc 1 266 32 is_stmt 0 view .LVU555
 1450 0094 6868     		ldr	r0, [r5, #4]
 266:rtos/uCOS-III/Source/os_q.c ****                  p_tcb = p_pend_list->HeadPtr;
 1451              		.loc 1 266 20 view .LVU556
 1452 0096 0028     		cmp	r0, #0
 1453 0098 F6D1     		bne	.L111
 277:rtos/uCOS-III/Source/os_q.c ****              OS_QClr(p_q);
 1454              		.loc 1 277 33 is_stmt 1 view .LVU557
 278:rtos/uCOS-III/Source/os_q.c ****              CPU_CRITICAL_EXIT();
 1455              		.loc 1 278 14 view .LVU558
ARM GAS  /tmp/cc61ansq.s 			page 50


 1456 009a 2846     		mov	r0, r5
 1457 009c FFF7FEFF 		bl	OS_QClr
 1458              	.LVL141:
 279:rtos/uCOS-III/Source/os_q.c ****              OSSched();                                         /* Find highest priority task ready
 1459              		.loc 1 279 14 view .LVU559
 279:rtos/uCOS-III/Source/os_q.c ****              OSSched();                                         /* Find highest priority task ready
 1460              		.loc 1 279 14 view .LVU560
 279:rtos/uCOS-III/Source/os_q.c ****              OSSched();                                         /* Find highest priority task ready
 1461              		.loc 1 279 14 view .LVU561
 1462 00a0 3846     		mov	r0, r7
 1463 00a2 FFF7FEFF 		bl	CPU_SR_Restore
 1464              	.LVL142:
 279:rtos/uCOS-III/Source/os_q.c ****              OSSched();                                         /* Find highest priority task ready
 1465              		.loc 1 279 14 view .LVU562
 279:rtos/uCOS-III/Source/os_q.c ****              OSSched();                                         /* Find highest priority task ready
 1466              		.loc 1 279 14 view .LVU563
 280:rtos/uCOS-III/Source/os_q.c ****             *p_err = OS_ERR_NONE;
 1467              		.loc 1 280 14 view .LVU564
 1468 00a6 FFF7FEFF 		bl	OSSched
 1469              	.LVL143:
 281:rtos/uCOS-III/Source/os_q.c ****              break;
 1470              		.loc 1 281 13 view .LVU565
 281:rtos/uCOS-III/Source/os_q.c ****              break;
 1471              		.loc 1 281 20 is_stmt 0 view .LVU566
 1472 00aa 0023     		movs	r3, #0
 1473 00ac 3380     		strh	r3, [r6]	@ movhi
 282:rtos/uCOS-III/Source/os_q.c **** 
 1474              		.loc 1 282 14 is_stmt 1 view .LVU567
 1475 00ae BBE7     		b	.L103
 1476              	.LVL144:
 1477              	.L112:
 243:rtos/uCOS-III/Source/os_q.c ****         case OS_OPT_DEL_NO_PEND:                                /* Delete message queue only if no 
 1478              		.loc 1 243 5 is_stmt 0 view .LVU568
 1479 00b0 0024     		movs	r4, #0
 1480 00b2 EFE7     		b	.L108
 1481              	.L119:
 1482              		.align	2
 1483              	.L118:
 1484 00b4 00000000 		.word	OSIntNestingCtr
 1485 00b8 00000000 		.word	OSRunning
 1486 00bc 51554555 		.word	1430607185
 1487              		.cfi_endproc
 1488              	.LFE1:
 1490              		.text
 1491              	.Letext0:
 1492              		.file 2 "rtos/uC-CPU/ARM-Cortex-M/ARMv7-M/GNU/cpu.h"
 1493              		.file 3 "rtos/uC-CPU/cpu_core.h"
 1494              		.file 4 "rtos/uCOS-III/Source/os_type.h"
 1495              		.file 5 "rtos/uCOS-III/Source/os.h"
 1496              		.file 6 "rtos/uCOS-III/Ports/ARM-Cortex-M/ARMv7-M/GNU/os_cpu.h"
ARM GAS  /tmp/cc61ansq.s 			page 51


DEFINED SYMBOLS
                            *ABS*:0000000000000000 os_q.c
     /tmp/cc61ansq.s:18     .text.OSQCreate:0000000000000000 $t
     /tmp/cc61ansq.s:26     .text.OSQCreate:0000000000000000 OSQCreate
     /tmp/cc61ansq.s:164    .text.OSQCreate:0000000000000068 $d
     /tmp/cc61ansq.s:170    .text.OSQFlush:0000000000000000 $t
     /tmp/cc61ansq.s:177    .text.OSQFlush:0000000000000000 OSQFlush
     /tmp/cc61ansq.s:300    .text.OSQFlush:0000000000000064 $d
     /tmp/cc61ansq.s:307    .text.OSQPend:0000000000000000 $t
     /tmp/cc61ansq.s:314    .text.OSQPend:0000000000000000 OSQPend
     /tmp/cc61ansq.s:474    .text.OSQPend:00000000000000a0 $d
     /tmp/cc61ansq.s:479    .text.OSQPend:00000000000000a4 $t
     /tmp/cc61ansq.s:705    .text.OSQPend:0000000000000188 $d
     /tmp/cc61ansq.s:714    .text.OSQPendAbort:0000000000000000 $t
     /tmp/cc61ansq.s:721    .text.OSQPendAbort:0000000000000000 OSQPendAbort
     /tmp/cc61ansq.s:929    .text.OSQPendAbort:00000000000000b8 $d
     /tmp/cc61ansq.s:936    .text.OSQPost:0000000000000000 $t
     /tmp/cc61ansq.s:943    .text.OSQPost:0000000000000000 OSQPost
     /tmp/cc61ansq.s:1188   .text.OSQPost:00000000000000e8 $d
     /tmp/cc61ansq.s:1194   .text.OS_QClr:0000000000000000 $t
     /tmp/cc61ansq.s:1201   .text.OS_QClr:0000000000000000 OS_QClr
     /tmp/cc61ansq.s:1246   .text.OS_QClr:0000000000000024 $d
     /tmp/cc61ansq.s:1251   .text.OSQDel:0000000000000000 $t
     /tmp/cc61ansq.s:1258   .text.OSQDel:0000000000000000 OSQDel
     /tmp/cc61ansq.s:1484   .text.OSQDel:00000000000000b4 $d
                           .group:0000000000000000 wm4.0.0f5aa60db9403f389c005f20ecce4286
                           .group:0000000000000000 wm4.os.h.38.05c7a360e844508f9424830362f7eef3
                           .group:0000000000000000 wm4.os_cfg.h.36.1682609214807c39119743015cd1b75b
                           .group:0000000000000000 wm4.os_cfg_app.h.36.9d01bed009cfc3a5184d9a87250e45bf
                           .group:0000000000000000 wm4.cpu_core.h.51.7b35a59c319673f88ae4a256248776ec
                           .group:0000000000000000 wm4.cpu_def.h.46.baa122a2898bdc40bb50d1f21ead1515
                           .group:0000000000000000 wm4.cpu_cfg.h.45.38a6a562da8b04490c382a226238c57e
                           .group:0000000000000000 wm4.cpu.h.171.3cb15ee3ccb812cbfdf76d1fbfb9eda0
                           .group:0000000000000000 wm4.lib_def.h.66.6ab2a012067a8e1f4289db5765835062
                           .group:0000000000000000 wm4.cpu_core.h.143.d3b700e12b3a14ed3bee14c822b49a7d
                           .group:0000000000000000 wm4.os_cpu.h.45.281d793567585e56a091270c28fc7efc
                           .group:0000000000000000 wm4.os_trace.h.37.a6badbf6e748c370e142a9584653748e
                           .group:0000000000000000 wm4.os.h.95.7b45e7e080367d299efd03f7510809bc

UNDEFINED SYMBOLS
CPU_SR_Save
OS_MsgQInit
OS_PendListInit
CPU_SR_Restore
OSIntNestingCtr
OS_MsgQFreeAll
OSRunning
OS_MsgQGet
OS_Pend
OSSched
OSSchedLockNestingCtr
OSTCBCurPtr
OS_PendAbort
OS_Post
OS_MsgQPut

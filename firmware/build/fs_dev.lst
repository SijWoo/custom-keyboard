ARM GAS  /tmp/cccHmdnc.s 			page 1


   1              		.cpu cortex-m4
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"fs_dev.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.text.FSDev_HandleErr,"ax",%progbits
  18              		.align	1
  19              		.arch armv7e-m
  20              		.syntax unified
  21              		.thumb
  22              		.thumb_func
  23              		.fpu fpv4-sp-d16
  25              	FSDev_HandleErr:
  26              	.LVL0:
  27              	.LFB32:
  28              		.file 1 "rtos/uC-FS/Source/fs_dev.c"
   1:rtos/uC-FS/Source/fs_dev.c **** /*
   2:rtos/uC-FS/Source/fs_dev.c **** ***************************************************************************************************
   3:rtos/uC-FS/Source/fs_dev.c **** *                                                uC/FS
   4:rtos/uC-FS/Source/fs_dev.c **** *                                      The Embedded File System
   5:rtos/uC-FS/Source/fs_dev.c **** *
   6:rtos/uC-FS/Source/fs_dev.c **** *                         (c) Copyright 2008-2019; Silicon Laboratories Inc.,
   7:rtos/uC-FS/Source/fs_dev.c **** *                                400 W. Cesar Chavez, Austin, TX 78701
   8:rtos/uC-FS/Source/fs_dev.c **** *
   9:rtos/uC-FS/Source/fs_dev.c **** *                   All rights reserved. Protected by international copyright laws.
  10:rtos/uC-FS/Source/fs_dev.c **** *
  11:rtos/uC-FS/Source/fs_dev.c **** *                  Your use of this software is subject to your acceptance of the terms
  12:rtos/uC-FS/Source/fs_dev.c **** *                  of a Silicon Labs Micrium software license, which can be obtained by
  13:rtos/uC-FS/Source/fs_dev.c **** *                  contacting info@micrium.com. If you do not agree to the terms of this
  14:rtos/uC-FS/Source/fs_dev.c **** *                  license, you may not use this software.
  15:rtos/uC-FS/Source/fs_dev.c **** *
  16:rtos/uC-FS/Source/fs_dev.c **** *                  Please help us continue to provide the Embedded community with the finest
  17:rtos/uC-FS/Source/fs_dev.c **** *                  software available. Your honesty is greatly appreciated.
  18:rtos/uC-FS/Source/fs_dev.c **** *
  19:rtos/uC-FS/Source/fs_dev.c **** *                    You can find our product's documentation at: doc.micrium.com
  20:rtos/uC-FS/Source/fs_dev.c **** *
  21:rtos/uC-FS/Source/fs_dev.c **** *                          For more information visit us at: www.micrium.com
  22:rtos/uC-FS/Source/fs_dev.c **** ***************************************************************************************************
  23:rtos/uC-FS/Source/fs_dev.c **** */
  24:rtos/uC-FS/Source/fs_dev.c **** 
  25:rtos/uC-FS/Source/fs_dev.c **** /*
  26:rtos/uC-FS/Source/fs_dev.c **** ***************************************************************************************************
  27:rtos/uC-FS/Source/fs_dev.c **** *
  28:rtos/uC-FS/Source/fs_dev.c **** *                                 FILE SYSTEM SUITE DEVICE MANAGEMENT
  29:rtos/uC-FS/Source/fs_dev.c **** *
  30:rtos/uC-FS/Source/fs_dev.c **** * Filename : fs_dev.c
ARM GAS  /tmp/cccHmdnc.s 			page 2


  31:rtos/uC-FS/Source/fs_dev.c **** * Version  : v4.07.06
  32:rtos/uC-FS/Source/fs_dev.c **** ***************************************************************************************************
  33:rtos/uC-FS/Source/fs_dev.c **** */
  34:rtos/uC-FS/Source/fs_dev.c **** 
  35:rtos/uC-FS/Source/fs_dev.c **** /*
  36:rtos/uC-FS/Source/fs_dev.c **** ***************************************************************************************************
  37:rtos/uC-FS/Source/fs_dev.c **** *                                               MODULE
  38:rtos/uC-FS/Source/fs_dev.c **** ***************************************************************************************************
  39:rtos/uC-FS/Source/fs_dev.c **** */
  40:rtos/uC-FS/Source/fs_dev.c **** 
  41:rtos/uC-FS/Source/fs_dev.c **** #define  MICRIUM_SOURCE
  42:rtos/uC-FS/Source/fs_dev.c **** #define  FS_DEV_MODULE
  43:rtos/uC-FS/Source/fs_dev.c **** 
  44:rtos/uC-FS/Source/fs_dev.c **** 
  45:rtos/uC-FS/Source/fs_dev.c **** /*
  46:rtos/uC-FS/Source/fs_dev.c **** ***************************************************************************************************
  47:rtos/uC-FS/Source/fs_dev.c **** *                                            INCLUDE FILES
  48:rtos/uC-FS/Source/fs_dev.c **** ***************************************************************************************************
  49:rtos/uC-FS/Source/fs_dev.c **** */
  50:rtos/uC-FS/Source/fs_dev.c **** 
  51:rtos/uC-FS/Source/fs_dev.c **** #include  <cpu.h>
  52:rtos/uC-FS/Source/fs_dev.c **** #include  <cpu_core.h>
  53:rtos/uC-FS/Source/fs_dev.c **** #include  <lib_ascii.h>
  54:rtos/uC-FS/Source/fs_dev.c **** #include  <lib_mem.h>
  55:rtos/uC-FS/Source/fs_dev.c **** #include  <lib_str.h>
  56:rtos/uC-FS/Source/fs_dev.c **** #include  "fs.h"
  57:rtos/uC-FS/Source/fs_dev.c **** #include  "fs_buf.h"
  58:rtos/uC-FS/Source/fs_dev.c **** #include  "fs_dev.h"
  59:rtos/uC-FS/Source/fs_dev.c **** #include  "fs_partition.h"
  60:rtos/uC-FS/Source/fs_dev.c **** 
  61:rtos/uC-FS/Source/fs_dev.c **** 
  62:rtos/uC-FS/Source/fs_dev.c **** /*
  63:rtos/uC-FS/Source/fs_dev.c **** ***************************************************************************************************
  64:rtos/uC-FS/Source/fs_dev.c **** *                                            LOCAL DEFINES
  65:rtos/uC-FS/Source/fs_dev.c **** ***************************************************************************************************
  66:rtos/uC-FS/Source/fs_dev.c **** */
  67:rtos/uC-FS/Source/fs_dev.c **** 
  68:rtos/uC-FS/Source/fs_dev.c **** 
  69:rtos/uC-FS/Source/fs_dev.c **** /*
  70:rtos/uC-FS/Source/fs_dev.c **** ***************************************************************************************************
  71:rtos/uC-FS/Source/fs_dev.c **** *                                           LOCAL CONSTANTS
  72:rtos/uC-FS/Source/fs_dev.c **** ***************************************************************************************************
  73:rtos/uC-FS/Source/fs_dev.c **** */
  74:rtos/uC-FS/Source/fs_dev.c **** 
  75:rtos/uC-FS/Source/fs_dev.c **** 
  76:rtos/uC-FS/Source/fs_dev.c **** /*
  77:rtos/uC-FS/Source/fs_dev.c **** ***************************************************************************************************
  78:rtos/uC-FS/Source/fs_dev.c **** *                                          LOCAL DATA TYPES
  79:rtos/uC-FS/Source/fs_dev.c **** ***************************************************************************************************
  80:rtos/uC-FS/Source/fs_dev.c **** */
  81:rtos/uC-FS/Source/fs_dev.c **** 
  82:rtos/uC-FS/Source/fs_dev.c **** 
  83:rtos/uC-FS/Source/fs_dev.c **** /*
  84:rtos/uC-FS/Source/fs_dev.c **** ***************************************************************************************************
  85:rtos/uC-FS/Source/fs_dev.c **** *                                            LOCAL TABLES
  86:rtos/uC-FS/Source/fs_dev.c **** ***************************************************************************************************
  87:rtos/uC-FS/Source/fs_dev.c **** */
ARM GAS  /tmp/cccHmdnc.s 			page 3


  88:rtos/uC-FS/Source/fs_dev.c **** 
  89:rtos/uC-FS/Source/fs_dev.c **** 
  90:rtos/uC-FS/Source/fs_dev.c **** /*
  91:rtos/uC-FS/Source/fs_dev.c **** ***************************************************************************************************
  92:rtos/uC-FS/Source/fs_dev.c **** *                                       LOCAL GLOBAL VARIABLES
  93:rtos/uC-FS/Source/fs_dev.c **** ***************************************************************************************************
  94:rtos/uC-FS/Source/fs_dev.c **** */
  95:rtos/uC-FS/Source/fs_dev.c **** 
  96:rtos/uC-FS/Source/fs_dev.c **** static  FS_DEV_API  **FS_DevDrvTbl;                             /* Tbl of dev drv.                 
  97:rtos/uC-FS/Source/fs_dev.c **** static  FS_QTY        FS_DevDrvCntMax;                          /* Max nbr of dev drv.             
  98:rtos/uC-FS/Source/fs_dev.c **** 
  99:rtos/uC-FS/Source/fs_dev.c **** static  MEM_POOL      FSDev_Pool;                               /* Pool of devices.                
 100:rtos/uC-FS/Source/fs_dev.c **** static  FS_DEV      **FSDev_Tbl;                                /* Tbl of dev.                     
 101:rtos/uC-FS/Source/fs_dev.c **** 
 102:rtos/uC-FS/Source/fs_dev.c **** static  FS_QTY        FSDev_DevCntMax;                          /* Maximum number of open devices. 
 103:rtos/uC-FS/Source/fs_dev.c **** static  FS_QTY        FSDev_Cnt;
 104:rtos/uC-FS/Source/fs_dev.c **** 
 105:rtos/uC-FS/Source/fs_dev.c **** 
 106:rtos/uC-FS/Source/fs_dev.c **** /*
 107:rtos/uC-FS/Source/fs_dev.c **** ***************************************************************************************************
 108:rtos/uC-FS/Source/fs_dev.c **** *                                            LOCAL MACRO'S
 109:rtos/uC-FS/Source/fs_dev.c **** ***************************************************************************************************
 110:rtos/uC-FS/Source/fs_dev.c **** */
 111:rtos/uC-FS/Source/fs_dev.c **** 
 112:rtos/uC-FS/Source/fs_dev.c **** #define  FS_DEV_IS_VALID_SIZE(size)            (((size) > 0u) ? (DEF_YES) : (DEF_NO))
 113:rtos/uC-FS/Source/fs_dev.c **** #define  FS_DEV_IS_VALID_SEC_SIZE(sec_size) (( ((sec_size) <= FS_MaxSecSizeGet())              && \
 114:rtos/uC-FS/Source/fs_dev.c ****                                               (((sec_size) ==  512u) || ((sec_size) == 1024u)  || \
 115:rtos/uC-FS/Source/fs_dev.c ****                                                ((sec_size) == 2048u) || ((sec_size) == 4096u)))    
 116:rtos/uC-FS/Source/fs_dev.c **** 
 117:rtos/uC-FS/Source/fs_dev.c **** 
 118:rtos/uC-FS/Source/fs_dev.c **** 
 119:rtos/uC-FS/Source/fs_dev.c **** /*
 120:rtos/uC-FS/Source/fs_dev.c **** ***************************************************************************************************
 121:rtos/uC-FS/Source/fs_dev.c **** *                                      LOCAL FUNCTION PROTOTYPES
 122:rtos/uC-FS/Source/fs_dev.c **** ***************************************************************************************************
 123:rtos/uC-FS/Source/fs_dev.c **** */
 124:rtos/uC-FS/Source/fs_dev.c **** 
 125:rtos/uC-FS/Source/fs_dev.c **** static  FS_DEV_API  *FS_DevDrvFind  (const  CPU_CHAR  *name_dev);   /* Find device driver by name. 
 126:rtos/uC-FS/Source/fs_dev.c **** 
 127:rtos/uC-FS/Source/fs_dev.c **** static  void         FSDev_HandleErr(       FS_DEV    *p_dev,   /* Handle error from device access.
 128:rtos/uC-FS/Source/fs_dev.c ****                                             FS_ERR     err);
 129:rtos/uC-FS/Source/fs_dev.c **** 
 130:rtos/uC-FS/Source/fs_dev.c **** 
 131:rtos/uC-FS/Source/fs_dev.c ****                                                                 /* ------------------- NAME PARSING
 132:rtos/uC-FS/Source/fs_dev.c **** static  CPU_CHAR    *FSDev_NameParse(       CPU_CHAR  *name_full,   /* Extract name & unit number o
 133:rtos/uC-FS/Source/fs_dev.c ****                                             CPU_CHAR  *name_dev,
 134:rtos/uC-FS/Source/fs_dev.c ****                                             FS_QTY    *p_unit_nbr);
 135:rtos/uC-FS/Source/fs_dev.c **** 
 136:rtos/uC-FS/Source/fs_dev.c **** 
 137:rtos/uC-FS/Source/fs_dev.c ****                                                                 /* ------------- DEVICE OBJECT MANA
 138:rtos/uC-FS/Source/fs_dev.c **** static  void         FSDev_ObjClr   (       FS_DEV    *p_dev);  /* Clear    a device object.       
 139:rtos/uC-FS/Source/fs_dev.c **** 
 140:rtos/uC-FS/Source/fs_dev.c **** static  FS_DEV      *FSDev_ObjFind  (       CPU_CHAR  *name_dev);   /* Find a device object by name
 141:rtos/uC-FS/Source/fs_dev.c **** 
 142:rtos/uC-FS/Source/fs_dev.c **** static  void         FSDev_ObjFree  (       FS_DEV    *p_dev);  /* Free     a device object.       
 143:rtos/uC-FS/Source/fs_dev.c **** 
 144:rtos/uC-FS/Source/fs_dev.c **** static  FS_DEV      *FSDev_ObjGet   (       void);              /* Allocate a device object.       
ARM GAS  /tmp/cccHmdnc.s 			page 4


 145:rtos/uC-FS/Source/fs_dev.c **** 
 146:rtos/uC-FS/Source/fs_dev.c **** 
 147:rtos/uC-FS/Source/fs_dev.c **** /*
 148:rtos/uC-FS/Source/fs_dev.c **** ***************************************************************************************************
 149:rtos/uC-FS/Source/fs_dev.c **** *                                     LOCAL CONFIGURATION ERRORS
 150:rtos/uC-FS/Source/fs_dev.c **** ***************************************************************************************************
 151:rtos/uC-FS/Source/fs_dev.c **** */
 152:rtos/uC-FS/Source/fs_dev.c **** 
 153:rtos/uC-FS/Source/fs_dev.c **** 
 154:rtos/uC-FS/Source/fs_dev.c **** /*
 155:rtos/uC-FS/Source/fs_dev.c **** ***************************************************************************************************
 156:rtos/uC-FS/Source/fs_dev.c **** *                                           FS_DevDrvAdd()
 157:rtos/uC-FS/Source/fs_dev.c **** *
 158:rtos/uC-FS/Source/fs_dev.c **** * Description : Add a device driver to the file system.
 159:rtos/uC-FS/Source/fs_dev.c **** *
 160:rtos/uC-FS/Source/fs_dev.c **** * Argument(s) : p_dev_drv   Pointer to a device driver.
 161:rtos/uC-FS/Source/fs_dev.c **** *
 162:rtos/uC-FS/Source/fs_dev.c **** *               p_err       Pointer to variable that will receive the return error code from this f
 163:rtos/uC-FS/Source/fs_dev.c **** *
 164:rtos/uC-FS/Source/fs_dev.c **** *                               FS_ERR_NONE                        Device driver added.
 165:rtos/uC-FS/Source/fs_dev.c **** *                               FS_ERR_NULL_PTR                    Argument 'p_dev_drv' passed a NU
 166:rtos/uC-FS/Source/fs_dev.c **** *                               FS_ERR_DEV_DRV_ALREADY_ADDED       Device driver already added.
 167:rtos/uC-FS/Source/fs_dev.c **** *                               FS_ERR_DEV_DRV_INVALID_NAME        Device driver name invalid.
 168:rtos/uC-FS/Source/fs_dev.c **** *                               FS_ERR_DEV_DRV_NO_TBL_POS_AVAIL    No device driver table position 
 169:rtos/uC-FS/Source/fs_dev.c **** *
 170:rtos/uC-FS/Source/fs_dev.c **** * Return(s)   : none.
 171:rtos/uC-FS/Source/fs_dev.c **** *
 172:rtos/uC-FS/Source/fs_dev.c **** * Note(s)     : (1) The 'NameGet()' device driver interface function MUST return a valid name :
 173:rtos/uC-FS/Source/fs_dev.c **** *
 174:rtos/uC-FS/Source/fs_dev.c **** *                   (a) The name must be unique (e.g., a name that is not returned by any other dev
 175:rtos/uC-FS/Source/fs_dev.c **** *                       driver);
 176:rtos/uC-FS/Source/fs_dev.c **** *                   (b) The name must NOT include any of the characters ':', '\' or '/';
 177:rtos/uC-FS/Source/fs_dev.c **** *                   (c) The name must contain fewer than FS_CFG_MAX_DEV_DRV_NAME_LEN characters;
 178:rtos/uC-FS/Source/fs_dev.c **** *                   (d) The name must NOT be an empty string.
 179:rtos/uC-FS/Source/fs_dev.c **** *
 180:rtos/uC-FS/Source/fs_dev.c **** *               (2) The 'Init()' device driver interface function is called to initialize driver
 181:rtos/uC-FS/Source/fs_dev.c **** *                   structures & any hardware for detecting the presence of devices (for a removabl
 182:rtos/uC-FS/Source/fs_dev.c **** *                   medium).
 183:rtos/uC-FS/Source/fs_dev.c **** ***************************************************************************************************
 184:rtos/uC-FS/Source/fs_dev.c **** */
 185:rtos/uC-FS/Source/fs_dev.c **** 
 186:rtos/uC-FS/Source/fs_dev.c **** void  FS_DevDrvAdd (FS_DEV_API  *p_dev_drv,
 187:rtos/uC-FS/Source/fs_dev.c ****                     FS_ERR      *p_err)
 188:rtos/uC-FS/Source/fs_dev.c **** {
 189:rtos/uC-FS/Source/fs_dev.c ****            CPU_SIZE_T    str_len;
 190:rtos/uC-FS/Source/fs_dev.c ****            CPU_CHAR     *p_colon;
 191:rtos/uC-FS/Source/fs_dev.c ****            FS_DEV_API   *p_dev_drv_dup;
 192:rtos/uC-FS/Source/fs_dev.c ****     const  CPU_CHAR     *name_dev;
 193:rtos/uC-FS/Source/fs_dev.c ****            FS_QTY        ix;
 194:rtos/uC-FS/Source/fs_dev.c **** 
 195:rtos/uC-FS/Source/fs_dev.c **** 
 196:rtos/uC-FS/Source/fs_dev.c **** #if (FS_CFG_ERR_ARG_CHK_EXT_EN == DEF_ENABLED)                  /* ------------------ VALIDATE ARGS
 197:rtos/uC-FS/Source/fs_dev.c ****     if (p_err == (FS_ERR *)0) {                                 /* Validate error ptr.             
 198:rtos/uC-FS/Source/fs_dev.c ****         CPU_SW_EXCEPTION(;);
 199:rtos/uC-FS/Source/fs_dev.c ****     }
 200:rtos/uC-FS/Source/fs_dev.c ****     if (p_dev_drv == (FS_DEV_API *)0) {                         /* Validate dev drv ptr.           
 201:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_NULL_PTR;
ARM GAS  /tmp/cccHmdnc.s 			page 5


 202:rtos/uC-FS/Source/fs_dev.c ****         return;
 203:rtos/uC-FS/Source/fs_dev.c ****     }
 204:rtos/uC-FS/Source/fs_dev.c **** #endif
 205:rtos/uC-FS/Source/fs_dev.c **** 
 206:rtos/uC-FS/Source/fs_dev.c **** 
 207:rtos/uC-FS/Source/fs_dev.c **** 
 208:rtos/uC-FS/Source/fs_dev.c ****                                                                 /* ----------------- ACQUIRE FS LOC
 209:rtos/uC-FS/Source/fs_dev.c ****     FS_OS_Lock(p_err);
 210:rtos/uC-FS/Source/fs_dev.c ****     if (*p_err != FS_ERR_NONE) {
 211:rtos/uC-FS/Source/fs_dev.c ****         return;
 212:rtos/uC-FS/Source/fs_dev.c ****     }
 213:rtos/uC-FS/Source/fs_dev.c **** 
 214:rtos/uC-FS/Source/fs_dev.c **** 
 215:rtos/uC-FS/Source/fs_dev.c **** 
 216:rtos/uC-FS/Source/fs_dev.c ****                                                                 /* -------------------- TEST NAME -
 217:rtos/uC-FS/Source/fs_dev.c ****     name_dev = p_dev_drv->NameGet();                            /* Get dev drv name (see Note #1). 
 218:rtos/uC-FS/Source/fs_dev.c ****     if (name_dev == (CPU_CHAR *)0) {                            /* Rtn if name is NULL ptr.        
 219:rtos/uC-FS/Source/fs_dev.c ****         FS_OS_Unlock();
 220:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_DEV_DRV_INVALID_NAME;
 221:rtos/uC-FS/Source/fs_dev.c ****         return;
 222:rtos/uC-FS/Source/fs_dev.c ****     }
 223:rtos/uC-FS/Source/fs_dev.c **** 
 224:rtos/uC-FS/Source/fs_dev.c ****     str_len = Str_Len_N(name_dev, FS_CFG_MAX_DEV_DRV_NAME_LEN + 1u);
 225:rtos/uC-FS/Source/fs_dev.c ****     if ((str_len <                          1u) ||              /* Rtn if name is empty str (see No
 226:rtos/uC-FS/Source/fs_dev.c ****         (str_len > FS_CFG_MAX_DEV_DRV_NAME_LEN)) {              /* ... or name is too long  (see No
 227:rtos/uC-FS/Source/fs_dev.c ****         FS_OS_Unlock();
 228:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_DEV_DRV_INVALID_NAME;
 229:rtos/uC-FS/Source/fs_dev.c ****         return;
 230:rtos/uC-FS/Source/fs_dev.c ****     }
 231:rtos/uC-FS/Source/fs_dev.c **** 
 232:rtos/uC-FS/Source/fs_dev.c ****     p_colon = Str_Char_N(name_dev, FS_CFG_MAX_DEV_DRV_NAME_LEN, FS_CHAR_DEV_SEP);
 233:rtos/uC-FS/Source/fs_dev.c ****     if (p_colon != (CPU_CHAR *)0) {                             /* Rtn if name contains ':' (see No
 234:rtos/uC-FS/Source/fs_dev.c ****         FS_OS_Unlock();
 235:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_DEV_DRV_INVALID_NAME;
 236:rtos/uC-FS/Source/fs_dev.c ****         return;
 237:rtos/uC-FS/Source/fs_dev.c ****     }
 238:rtos/uC-FS/Source/fs_dev.c **** 
 239:rtos/uC-FS/Source/fs_dev.c ****     p_colon = Str_Char_N(name_dev, FS_CFG_MAX_DEV_DRV_NAME_LEN, FS_CHAR_PATH_SEP_ALT);
 240:rtos/uC-FS/Source/fs_dev.c ****     if (p_colon != (CPU_CHAR *)0) {                             /* Rtn if name contains '/' (see No
 241:rtos/uC-FS/Source/fs_dev.c ****         FS_OS_Unlock();
 242:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_DEV_DRV_INVALID_NAME;
 243:rtos/uC-FS/Source/fs_dev.c ****         return;
 244:rtos/uC-FS/Source/fs_dev.c ****     }
 245:rtos/uC-FS/Source/fs_dev.c **** 
 246:rtos/uC-FS/Source/fs_dev.c ****     p_colon = Str_Char_N(name_dev, FS_CFG_MAX_DEV_DRV_NAME_LEN, FS_CHAR_PATH_SEP);
 247:rtos/uC-FS/Source/fs_dev.c ****     if (p_colon != (CPU_CHAR *)0) {                             /* Rtn if name contains '\' (see No
 248:rtos/uC-FS/Source/fs_dev.c ****         FS_OS_Unlock();
 249:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_DEV_DRV_INVALID_NAME;
 250:rtos/uC-FS/Source/fs_dev.c ****         return;
 251:rtos/uC-FS/Source/fs_dev.c ****     }
 252:rtos/uC-FS/Source/fs_dev.c **** 
 253:rtos/uC-FS/Source/fs_dev.c **** 
 254:rtos/uC-FS/Source/fs_dev.c ****                                                                 /* ------------------ TEST DUP NAME
 255:rtos/uC-FS/Source/fs_dev.c ****     p_dev_drv_dup = FS_DevDrvFind(name_dev);                    /* Chk if name dup'd (see Note #1a)
 256:rtos/uC-FS/Source/fs_dev.c ****     if (p_dev_drv_dup != (FS_DEV_API *)0) {
 257:rtos/uC-FS/Source/fs_dev.c ****         FS_OS_Unlock();
 258:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_DEV_DRV_ALREADY_ADDED;
ARM GAS  /tmp/cccHmdnc.s 			page 6


 259:rtos/uC-FS/Source/fs_dev.c ****         return;
 260:rtos/uC-FS/Source/fs_dev.c ****     }
 261:rtos/uC-FS/Source/fs_dev.c **** 
 262:rtos/uC-FS/Source/fs_dev.c ****                                                                 /* ------------ FIND EMPTY SLOT IN 
 263:rtos/uC-FS/Source/fs_dev.c ****     for (ix = 0u; ix < FS_DevDrvCntMax; ix++) {
 264:rtos/uC-FS/Source/fs_dev.c ****         if (FS_DevDrvTbl[ix] == DEF_NULL) {
 265:rtos/uC-FS/Source/fs_dev.c ****             break;
 266:rtos/uC-FS/Source/fs_dev.c ****         }
 267:rtos/uC-FS/Source/fs_dev.c ****     }
 268:rtos/uC-FS/Source/fs_dev.c ****     if (ix >= FS_DevDrvCntMax) {
 269:rtos/uC-FS/Source/fs_dev.c ****         FS_OS_Unlock();
 270:rtos/uC-FS/Source/fs_dev.c ****         FS_TRACE_INFO(("FS_DevDrvAdd(): Could not alloc drv from pool. Opened driver limit reached.
 271:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_DEV_DRV_NONE_AVAIL;
 272:rtos/uC-FS/Source/fs_dev.c ****         return;
 273:rtos/uC-FS/Source/fs_dev.c ****     }
 274:rtos/uC-FS/Source/fs_dev.c **** 
 275:rtos/uC-FS/Source/fs_dev.c **** 
 276:rtos/uC-FS/Source/fs_dev.c ****                                                                 /* ---------------- INIT & ADD TO T
 277:rtos/uC-FS/Source/fs_dev.c ****     p_dev_drv->Init(p_err);                                     /* Init dev drv (see Note #2).     
 278:rtos/uC-FS/Source/fs_dev.c ****     if (*p_err != FS_ERR_NONE) {
 279:rtos/uC-FS/Source/fs_dev.c ****         FS_OS_Unlock();
 280:rtos/uC-FS/Source/fs_dev.c ****         return;
 281:rtos/uC-FS/Source/fs_dev.c ****     }
 282:rtos/uC-FS/Source/fs_dev.c ****     FS_DevDrvTbl[ix] = p_dev_drv;                                /* Add name to tbl.               
 283:rtos/uC-FS/Source/fs_dev.c **** 
 284:rtos/uC-FS/Source/fs_dev.c **** 
 285:rtos/uC-FS/Source/fs_dev.c **** 
 286:rtos/uC-FS/Source/fs_dev.c ****                                                                 /* ----------------- RELEASE FS LOC
 287:rtos/uC-FS/Source/fs_dev.c ****     FS_OS_Unlock();
 288:rtos/uC-FS/Source/fs_dev.c **** 
 289:rtos/uC-FS/Source/fs_dev.c ****    *p_err = FS_ERR_NONE;
 290:rtos/uC-FS/Source/fs_dev.c **** }
 291:rtos/uC-FS/Source/fs_dev.c **** 
 292:rtos/uC-FS/Source/fs_dev.c **** 
 293:rtos/uC-FS/Source/fs_dev.c **** /*
 294:rtos/uC-FS/Source/fs_dev.c **** ***************************************************************************************************
 295:rtos/uC-FS/Source/fs_dev.c **** *                                              FSDev_Close()
 296:rtos/uC-FS/Source/fs_dev.c **** *
 297:rtos/uC-FS/Source/fs_dev.c **** * Description : Close & free a device.
 298:rtos/uC-FS/Source/fs_dev.c **** *
 299:rtos/uC-FS/Source/fs_dev.c **** * Argument(s) : name_dev    Device name.
 300:rtos/uC-FS/Source/fs_dev.c **** *
 301:rtos/uC-FS/Source/fs_dev.c **** *               p_err       Pointer to variable that will receive the return error code from this f
 302:rtos/uC-FS/Source/fs_dev.c **** *
 303:rtos/uC-FS/Source/fs_dev.c **** *                               FS_ERR_NONE             Device closed successfully.
 304:rtos/uC-FS/Source/fs_dev.c **** *                               FS_ERR_DEV_FIXED        Device is fixed (cannot be closed).
 305:rtos/uC-FS/Source/fs_dev.c **** *                               FS_ERR_DEV_NOT_OPEN     Device is not open.
 306:rtos/uC-FS/Source/fs_dev.c **** *                               FS_ERR_NAME_NULL        Argument 'p_name_dev' passed a NULL pointer
 307:rtos/uC-FS/Source/fs_dev.c **** *
 308:rtos/uC-FS/Source/fs_dev.c **** * Return(s)   : none.
 309:rtos/uC-FS/Source/fs_dev.c **** *
 310:rtos/uC-FS/Source/fs_dev.c **** * Note(s)     : none.
 311:rtos/uC-FS/Source/fs_dev.c **** ***************************************************************************************************
 312:rtos/uC-FS/Source/fs_dev.c **** */
 313:rtos/uC-FS/Source/fs_dev.c **** 
 314:rtos/uC-FS/Source/fs_dev.c **** void  FSDev_Close (CPU_CHAR  *name_dev,
 315:rtos/uC-FS/Source/fs_dev.c ****                    FS_ERR    *p_err)
ARM GAS  /tmp/cccHmdnc.s 			page 7


 316:rtos/uC-FS/Source/fs_dev.c **** {
 317:rtos/uC-FS/Source/fs_dev.c ****     FS_DEV       *p_dev;
 318:rtos/uC-FS/Source/fs_dev.c ****     FS_CTR        ref_cnt;
 319:rtos/uC-FS/Source/fs_dev.c ****     CPU_BOOLEAN   dev_lock_ok;
 320:rtos/uC-FS/Source/fs_dev.c **** 
 321:rtos/uC-FS/Source/fs_dev.c **** 
 322:rtos/uC-FS/Source/fs_dev.c **** 
 323:rtos/uC-FS/Source/fs_dev.c **** #if (FS_CFG_ERR_ARG_CHK_EXT_EN == DEF_ENABLED)                  /* ------------------- VALIDATE ARG
 324:rtos/uC-FS/Source/fs_dev.c ****     if (p_err == (FS_ERR *)0) {                                 /* Validate error ptr.             
 325:rtos/uC-FS/Source/fs_dev.c ****         CPU_SW_EXCEPTION(;);
 326:rtos/uC-FS/Source/fs_dev.c ****     }
 327:rtos/uC-FS/Source/fs_dev.c ****     if (name_dev == (CPU_CHAR *)0) {                            /* Validate name ptr.              
 328:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_NAME_NULL;
 329:rtos/uC-FS/Source/fs_dev.c ****         return;
 330:rtos/uC-FS/Source/fs_dev.c ****     }
 331:rtos/uC-FS/Source/fs_dev.c **** #endif
 332:rtos/uC-FS/Source/fs_dev.c **** 
 333:rtos/uC-FS/Source/fs_dev.c **** 
 334:rtos/uC-FS/Source/fs_dev.c **** 
 335:rtos/uC-FS/Source/fs_dev.c ****                                                                 /* ----------------- ACQUIRE DEV LO
 336:rtos/uC-FS/Source/fs_dev.c ****     p_dev = FSDev_Acquire(name_dev);
 337:rtos/uC-FS/Source/fs_dev.c ****     if (p_dev == (FS_DEV *)0) {                                 /* Rtn err if dev not found.       
 338:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_DEV_NOT_OPEN;
 339:rtos/uC-FS/Source/fs_dev.c ****         return;
 340:rtos/uC-FS/Source/fs_dev.c ****     }
 341:rtos/uC-FS/Source/fs_dev.c **** 
 342:rtos/uC-FS/Source/fs_dev.c ****     ref_cnt = p_dev->RefCnt;                                    /* Check if volume is open on devic
 343:rtos/uC-FS/Source/fs_dev.c ****     if (ref_cnt > 2u) {
 344:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_DEV_VOL_OPEN;                            /* ... rtn err.                    
 345:rtos/uC-FS/Source/fs_dev.c ****         FSDev_Release(p_dev);
 346:rtos/uC-FS/Source/fs_dev.c ****         return;
 347:rtos/uC-FS/Source/fs_dev.c ****     }
 348:rtos/uC-FS/Source/fs_dev.c **** 
 349:rtos/uC-FS/Source/fs_dev.c ****     dev_lock_ok = FSDev_Lock(p_dev);
 350:rtos/uC-FS/Source/fs_dev.c ****     if (dev_lock_ok == DEF_NO) {
 351:rtos/uC-FS/Source/fs_dev.c ****         FSDev_Release(p_dev);
 352:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_OS_LOCK;
 353:rtos/uC-FS/Source/fs_dev.c ****         return;
 354:rtos/uC-FS/Source/fs_dev.c ****     }
 355:rtos/uC-FS/Source/fs_dev.c **** 
 356:rtos/uC-FS/Source/fs_dev.c **** 
 357:rtos/uC-FS/Source/fs_dev.c **** 
 358:rtos/uC-FS/Source/fs_dev.c ****                                                                 /* ------------------- VALIDATE DEV
 359:rtos/uC-FS/Source/fs_dev.c ****     switch (p_dev->State) {
 360:rtos/uC-FS/Source/fs_dev.c ****         case FS_DEV_STATE_OPEN:
 361:rtos/uC-FS/Source/fs_dev.c ****         case FS_DEV_STATE_PRESENT:
 362:rtos/uC-FS/Source/fs_dev.c ****         case FS_DEV_STATE_LOW_FMT_VALID:
 363:rtos/uC-FS/Source/fs_dev.c ****              break;
 364:rtos/uC-FS/Source/fs_dev.c **** 
 365:rtos/uC-FS/Source/fs_dev.c **** 
 366:rtos/uC-FS/Source/fs_dev.c ****         case FS_DEV_STATE_CLOSED:                               /* Dev is already closing or not rd
 367:rtos/uC-FS/Source/fs_dev.c ****         case FS_DEV_STATE_CLOSING:
 368:rtos/uC-FS/Source/fs_dev.c ****         case FS_DEV_STATE_OPENING:
 369:rtos/uC-FS/Source/fs_dev.c ****         default:
 370:rtos/uC-FS/Source/fs_dev.c ****              FSDev_ReleaseUnlock(p_dev);                        /* ... nothing can be done.        
 371:rtos/uC-FS/Source/fs_dev.c ****             *p_err = FS_ERR_DEV_NOT_OPEN;
 372:rtos/uC-FS/Source/fs_dev.c ****              return;
ARM GAS  /tmp/cccHmdnc.s 			page 8


 373:rtos/uC-FS/Source/fs_dev.c ****     }
 374:rtos/uC-FS/Source/fs_dev.c **** 
 375:rtos/uC-FS/Source/fs_dev.c **** 
 376:rtos/uC-FS/Source/fs_dev.c ****                                                                 /* --------------------- CLOSE DEV 
 377:rtos/uC-FS/Source/fs_dev.c ****     p_dev->DevDrvPtr->Close(p_dev);                             /* Close dev.                      
 378:rtos/uC-FS/Source/fs_dev.c **** 
 379:rtos/uC-FS/Source/fs_dev.c ****     p_dev->State = FS_DEV_STATE_CLOSING;
 380:rtos/uC-FS/Source/fs_dev.c **** 
 381:rtos/uC-FS/Source/fs_dev.c **** 
 382:rtos/uC-FS/Source/fs_dev.c **** 
 383:rtos/uC-FS/Source/fs_dev.c ****                                                                 /* ----------------- RELEASE DEV LO
 384:rtos/uC-FS/Source/fs_dev.c ****     FSDev_ReleaseUnlock(p_dev);
 385:rtos/uC-FS/Source/fs_dev.c ****     FSDev_Release(p_dev);                                       /* Release dev ref init.           
 386:rtos/uC-FS/Source/fs_dev.c **** 
 387:rtos/uC-FS/Source/fs_dev.c ****    *p_err = FS_ERR_NONE;
 388:rtos/uC-FS/Source/fs_dev.c **** }
 389:rtos/uC-FS/Source/fs_dev.c **** 
 390:rtos/uC-FS/Source/fs_dev.c **** 
 391:rtos/uC-FS/Source/fs_dev.c **** /*
 392:rtos/uC-FS/Source/fs_dev.c **** ***************************************************************************************************
 393:rtos/uC-FS/Source/fs_dev.c **** *                                        FSDev_GetNbrPartitions()
 394:rtos/uC-FS/Source/fs_dev.c **** *
 395:rtos/uC-FS/Source/fs_dev.c **** * Description : Get number of partitions on a device.
 396:rtos/uC-FS/Source/fs_dev.c **** *
 397:rtos/uC-FS/Source/fs_dev.c **** * Argument(s) : name_dev    Device name.
 398:rtos/uC-FS/Source/fs_dev.c **** *
 399:rtos/uC-FS/Source/fs_dev.c **** *               p_err       Pointer to variable that will receive the return error code from this f
 400:rtos/uC-FS/Source/fs_dev.c **** *
 401:rtos/uC-FS/Source/fs_dev.c **** *                               FS_ERR_NONE                    Number of partitions obtained.
 402:rtos/uC-FS/Source/fs_dev.c **** *                               FS_ERR_NAME_NULL               Argument 'name_dev' passed a NULL po
 403:rtos/uC-FS/Source/fs_dev.c **** *
 404:rtos/uC-FS/Source/fs_dev.c **** *                                                              ------- RETURNED BY FSDev_AcquireLoc
 405:rtos/uC-FS/Source/fs_dev.c **** *                               FS_ERR_DEV_NOT_OPEN            Device is not open.
 406:rtos/uC-FS/Source/fs_dev.c **** *                               FS_ERR_DEV_NOT_PRESENT         Device is not present.
 407:rtos/uC-FS/Source/fs_dev.c **** *                               FS_ERR_DEV_INVALID_LOW_FMT     Device needs to be low-level formatt
 408:rtos/uC-FS/Source/fs_dev.c **** *
 409:rtos/uC-FS/Source/fs_dev.c **** *                                                              --- RETURNED BY FSPartition_GetNbrPa
 410:rtos/uC-FS/Source/fs_dev.c **** *                               FS_ERR_DEV_IO                  Device I/O error.
 411:rtos/uC-FS/Source/fs_dev.c **** *                               FS_ERR_DEV_NOT_PRESENT         Device is not present.
 412:rtos/uC-FS/Source/fs_dev.c **** *                               FS_ERR_DEV_TIMEOUT             Device timeout error.
 413:rtos/uC-FS/Source/fs_dev.c **** *
 414:rtos/uC-FS/Source/fs_dev.c **** * Return(s)   : Number of partitions on the device, if no error was encountered.
 415:rtos/uC-FS/Source/fs_dev.c **** *               Zero,                               otherwise.
 416:rtos/uC-FS/Source/fs_dev.c **** *
 417:rtos/uC-FS/Source/fs_dev.c **** * Note(s)     : (1) Device state change will result from device I/O, not present or timeout error.
 418:rtos/uC-FS/Source/fs_dev.c **** *
 419:rtos/uC-FS/Source/fs_dev.c **** *                   (a) Errors resulting from device access are handled in internal functions calle
 420:rtos/uC-FS/Source/fs_dev.c **** *                      'FSPartition_GetNbrPartitions()'.
 421:rtos/uC-FS/Source/fs_dev.c **** ***************************************************************************************************
 422:rtos/uC-FS/Source/fs_dev.c **** */
 423:rtos/uC-FS/Source/fs_dev.c **** 
 424:rtos/uC-FS/Source/fs_dev.c **** #if   (FS_CFG_PARTITION_EN == DEF_ENABLED)
 425:rtos/uC-FS/Source/fs_dev.c **** FS_PARTITION_NBR  FSDev_GetNbrPartitions (CPU_CHAR  *name_dev,
 426:rtos/uC-FS/Source/fs_dev.c ****                                           FS_ERR    *p_err)
 427:rtos/uC-FS/Source/fs_dev.c **** {
 428:rtos/uC-FS/Source/fs_dev.c ****     FS_DEV            *p_dev;
 429:rtos/uC-FS/Source/fs_dev.c ****     FS_PARTITION_NBR   nbr_partitions;
ARM GAS  /tmp/cccHmdnc.s 			page 9


 430:rtos/uC-FS/Source/fs_dev.c **** 
 431:rtos/uC-FS/Source/fs_dev.c **** 
 432:rtos/uC-FS/Source/fs_dev.c **** #if (FS_CFG_ERR_ARG_CHK_EXT_EN == DEF_ENABLED)                  /* ------------------- VALIDATE ARG
 433:rtos/uC-FS/Source/fs_dev.c ****     if (p_err == (FS_ERR *)0) {                                 /* Validate error ptr.             
 434:rtos/uC-FS/Source/fs_dev.c ****         CPU_SW_EXCEPTION((FS_PARTITION_NBR)0);
 435:rtos/uC-FS/Source/fs_dev.c ****     }
 436:rtos/uC-FS/Source/fs_dev.c ****     if (name_dev == (CPU_CHAR *)0) {                            /* Validate name ptr.              
 437:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_NAME_NULL;
 438:rtos/uC-FS/Source/fs_dev.c ****         return ((FS_PARTITION_NBR)0);
 439:rtos/uC-FS/Source/fs_dev.c ****     }
 440:rtos/uC-FS/Source/fs_dev.c **** #endif
 441:rtos/uC-FS/Source/fs_dev.c **** 
 442:rtos/uC-FS/Source/fs_dev.c **** 
 443:rtos/uC-FS/Source/fs_dev.c **** 
 444:rtos/uC-FS/Source/fs_dev.c ****                                                                 /* ----------------- ACQUIRE DEV LO
 445:rtos/uC-FS/Source/fs_dev.c ****     p_dev = FSDev_AcquireLockChk(name_dev, p_err);
 446:rtos/uC-FS/Source/fs_dev.c ****     (void)p_err;                                               /* Err ignored. Ret val chk'd instea
 447:rtos/uC-FS/Source/fs_dev.c ****     if (p_dev == (FS_DEV *)0) {                                 /* Rtn err if dev not found.       
 448:rtos/uC-FS/Source/fs_dev.c ****         return ((FS_PARTITION_NBR)0);
 449:rtos/uC-FS/Source/fs_dev.c ****     }
 450:rtos/uC-FS/Source/fs_dev.c **** 
 451:rtos/uC-FS/Source/fs_dev.c **** 
 452:rtos/uC-FS/Source/fs_dev.c **** 
 453:rtos/uC-FS/Source/fs_dev.c ****                                                                 /* ---------------- GET NBR PARTITI
 454:rtos/uC-FS/Source/fs_dev.c ****     nbr_partitions = FSPartition_GetNbrPartitions(p_dev, p_err);
 455:rtos/uC-FS/Source/fs_dev.c **** 
 456:rtos/uC-FS/Source/fs_dev.c ****                                                                 /* ----------------- RELEASE DEV LO
 457:rtos/uC-FS/Source/fs_dev.c ****     FSDev_ReleaseUnlock(p_dev);
 458:rtos/uC-FS/Source/fs_dev.c **** 
 459:rtos/uC-FS/Source/fs_dev.c **** 
 460:rtos/uC-FS/Source/fs_dev.c **** 
 461:rtos/uC-FS/Source/fs_dev.c ****                                                                 /* ------------------------ RTN ---
 462:rtos/uC-FS/Source/fs_dev.c ****     return (nbr_partitions);
 463:rtos/uC-FS/Source/fs_dev.c **** }
 464:rtos/uC-FS/Source/fs_dev.c **** #endif
 465:rtos/uC-FS/Source/fs_dev.c **** 
 466:rtos/uC-FS/Source/fs_dev.c **** 
 467:rtos/uC-FS/Source/fs_dev.c **** /*
 468:rtos/uC-FS/Source/fs_dev.c **** ***************************************************************************************************
 469:rtos/uC-FS/Source/fs_dev.c **** *                                           FSDev_IO_Ctrl()
 470:rtos/uC-FS/Source/fs_dev.c **** *
 471:rtos/uC-FS/Source/fs_dev.c **** * Description : Perform device I/O control operation.
 472:rtos/uC-FS/Source/fs_dev.c **** *
 473:rtos/uC-FS/Source/fs_dev.c **** * Argument(s) : name_dev    Device name.
 474:rtos/uC-FS/Source/fs_dev.c **** *
 475:rtos/uC-FS/Source/fs_dev.c **** *               opt         Control command.
 476:rtos/uC-FS/Source/fs_dev.c **** *
 477:rtos/uC-FS/Source/fs_dev.c **** *               p_data      Buffer which holds data to be used for operation.
 478:rtos/uC-FS/Source/fs_dev.c **** *                              OR
 479:rtos/uC-FS/Source/fs_dev.c **** *                           Buffer in which data will be stored as a result of operation.
 480:rtos/uC-FS/Source/fs_dev.c **** *
 481:rtos/uC-FS/Source/fs_dev.c **** *               p_err       Pointer to variable that will receive return the error code from this f
 482:rtos/uC-FS/Source/fs_dev.c **** *
 483:rtos/uC-FS/Source/fs_dev.c **** *                               FS_ERR_NONE                    Control operation performed successf
 484:rtos/uC-FS/Source/fs_dev.c **** *                               FS_ERR_NAME_NULL               Argument 'name_dev' passed a NULL po
 485:rtos/uC-FS/Source/fs_dev.c **** *
 486:rtos/uC-FS/Source/fs_dev.c **** *                                                              --- RETURNED BY FSDev_AcquireLockChk
ARM GAS  /tmp/cccHmdnc.s 			page 10


 487:rtos/uC-FS/Source/fs_dev.c **** *                               FS_ERR_DEV_NOT_OPEN            Device is not open.
 488:rtos/uC-FS/Source/fs_dev.c **** *                               FS_ERR_DEV_NOT_PRESENT         Device is not present.
 489:rtos/uC-FS/Source/fs_dev.c **** *                               FS_ERR_DEV_INVALID_LOW_FMT     Device needs to be low-level formatt
 490:rtos/uC-FS/Source/fs_dev.c **** *
 491:rtos/uC-FS/Source/fs_dev.c **** *                                                              ----- RETURNED BY DEV DRV's IO_CTRL(
 492:rtos/uC-FS/Source/fs_dev.c **** *                               FS_ERR_DEV_INVALID_IO_CTRL     I/O control operation unknown to dri
 493:rtos/uC-FS/Source/fs_dev.c **** *                               FS_ERR_DEV_INVALID_UNIT_NBR    Device unit number is invalid.
 494:rtos/uC-FS/Source/fs_dev.c **** *                               FS_ERR_DEV_IO                  Device I/O error.
 495:rtos/uC-FS/Source/fs_dev.c **** *                               FS_ERR_DEV_TIMEOUT             Device timeout.
 496:rtos/uC-FS/Source/fs_dev.c **** *
 497:rtos/uC-FS/Source/fs_dev.c **** * Return(s)   : none.
 498:rtos/uC-FS/Source/fs_dev.c **** *
 499:rtos/uC-FS/Source/fs_dev.c **** * Note(s)     : (1) Defined I/O control operations are :
 500:rtos/uC-FS/Source/fs_dev.c **** *
 501:rtos/uC-FS/Source/fs_dev.c **** *                                                        ---------------- GENERIC OPTIONS ---------
 502:rtos/uC-FS/Source/fs_dev.c **** *                   (a) FS_DEV_IO_CTRL_REFRESH:          Refresh device.
 503:rtos/uC-FS/Source/fs_dev.c **** *                   (b) FS_DEV_IO_CTRL_LOW_FMT           Low-level format device.
 504:rtos/uC-FS/Source/fs_dev.c **** *                   (c) FS_DEV_IO_CTRL_LOW_MOUNT         Low-level mount device.
 505:rtos/uC-FS/Source/fs_dev.c **** *                   (d) FS_DEV_IO_CTRL_LOW_UNMOUNT       Low-level unmount device.
 506:rtos/uC-FS/Source/fs_dev.c **** *                   (e) FS_DEV_IO_CTRL_LOW_COMPACT       Low-level compact device.
 507:rtos/uC-FS/Source/fs_dev.c **** *                   (f) FS_DEV_IO_CTRL_LOW_COMPACT       Low-level defragment device.
 508:rtos/uC-FS/Source/fs_dev.c **** *                   (g) FS_DEV_IO_CTRL_SEC_RELEASE       Release data in sector.
 509:rtos/uC-FS/Source/fs_dev.c **** *                   (h) FS_DEV_IO_CTRL_PHY_RD            Read  physical device.
 510:rtos/uC-FS/Source/fs_dev.c **** *                   (i) FS_DEV_IO_CTRL_PHY_WR            Write physical device.
 511:rtos/uC-FS/Source/fs_dev.c **** *                   (j) FS_DEV_IO_CTRL_PHY_RD_PAGE       Read  physical device page.
 512:rtos/uC-FS/Source/fs_dev.c **** *                   (k) FS_DEV_IO_CTRL_PHY_WR_PAGE       Write physical device page.
 513:rtos/uC-FS/Source/fs_dev.c **** *                   (l) FS_DEV_IO_CTRL_PHY_ERASE_BLK     Erase physical device block.
 514:rtos/uC-FS/Source/fs_dev.c **** *                   (m) FS_DEV_IO_CTRL_PHY_ERASE_CHIP    Erase physical device.
 515:rtos/uC-FS/Source/fs_dev.c **** *
 516:rtos/uC-FS/Source/fs_dev.c **** *                                                        ---------- SD-DRIVER SPECIFIC OPTIONS ----
 517:rtos/uC-FS/Source/fs_dev.c **** *                   (n) FS_DEV_IO_CTRL_SD_QUERY          Get info about SD/MMC card.
 518:rtos/uC-FS/Source/fs_dev.c **** *                   (o) FS_DEV_IO_CTRL_SD_RD_CID         Read SD/MMC card Card ID register.
 519:rtos/uC-FS/Source/fs_dev.c **** *                   (p) FS_DEV_IO_CTRL_SD_RD_CSD         Read SD/MMC card Card-Specific Data regist
 520:rtos/uC-FS/Source/fs_dev.c **** *
 521:rtos/uC-FS/Source/fs_dev.c **** *               (2) Device state change will result from device I/O, not present or timeout error.
 522:rtos/uC-FS/Source/fs_dev.c **** ***************************************************************************************************
 523:rtos/uC-FS/Source/fs_dev.c **** */
 524:rtos/uC-FS/Source/fs_dev.c **** 
 525:rtos/uC-FS/Source/fs_dev.c **** void  FSDev_IO_Ctrl (CPU_CHAR    *name_dev,
 526:rtos/uC-FS/Source/fs_dev.c ****                      CPU_INT08U   opt,
 527:rtos/uC-FS/Source/fs_dev.c ****                      void        *p_data,
 528:rtos/uC-FS/Source/fs_dev.c ****                      FS_ERR      *p_err)
 529:rtos/uC-FS/Source/fs_dev.c **** {
 530:rtos/uC-FS/Source/fs_dev.c ****     FS_DEV       *p_dev;
 531:rtos/uC-FS/Source/fs_dev.c ****     CPU_BOOLEAN   lock_success;
 532:rtos/uC-FS/Source/fs_dev.c **** 
 533:rtos/uC-FS/Source/fs_dev.c **** 
 534:rtos/uC-FS/Source/fs_dev.c **** #if (FS_CFG_ERR_ARG_CHK_EXT_EN == DEF_ENABLED)                  /* ------------------- VALIDATE ARG
 535:rtos/uC-FS/Source/fs_dev.c ****     if (p_err == (FS_ERR *)0) {                                 /* Validate error ptr.             
 536:rtos/uC-FS/Source/fs_dev.c ****         CPU_SW_EXCEPTION(;);
 537:rtos/uC-FS/Source/fs_dev.c ****     }
 538:rtos/uC-FS/Source/fs_dev.c ****     if (name_dev == (CPU_CHAR *)0) {                            /* Validate name ptr.              
 539:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_NAME_NULL;
 540:rtos/uC-FS/Source/fs_dev.c ****         return;
 541:rtos/uC-FS/Source/fs_dev.c ****     }
 542:rtos/uC-FS/Source/fs_dev.c **** #endif
 543:rtos/uC-FS/Source/fs_dev.c **** 
ARM GAS  /tmp/cccHmdnc.s 			page 11


 544:rtos/uC-FS/Source/fs_dev.c **** 
 545:rtos/uC-FS/Source/fs_dev.c **** 
 546:rtos/uC-FS/Source/fs_dev.c ****                                                                 /* ----------------- ACQUIRE DEV LO
 547:rtos/uC-FS/Source/fs_dev.c ****     p_dev = FSDev_Acquire(name_dev);
 548:rtos/uC-FS/Source/fs_dev.c **** 
 549:rtos/uC-FS/Source/fs_dev.c ****     if (p_dev == (FS_DEV *)0) {                                 /* Rtn err if dev not found.       
 550:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_DEV_NOT_OPEN;
 551:rtos/uC-FS/Source/fs_dev.c ****         return;
 552:rtos/uC-FS/Source/fs_dev.c ****     }
 553:rtos/uC-FS/Source/fs_dev.c **** 
 554:rtos/uC-FS/Source/fs_dev.c ****     lock_success = FSDev_Lock(p_dev);
 555:rtos/uC-FS/Source/fs_dev.c ****     if (lock_success != DEF_YES) {
 556:rtos/uC-FS/Source/fs_dev.c ****         FSDev_Release(p_dev);
 557:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_OS_LOCK;
 558:rtos/uC-FS/Source/fs_dev.c ****         return;
 559:rtos/uC-FS/Source/fs_dev.c ****     }
 560:rtos/uC-FS/Source/fs_dev.c **** 
 561:rtos/uC-FS/Source/fs_dev.c **** 
 562:rtos/uC-FS/Source/fs_dev.c **** 
 563:rtos/uC-FS/Source/fs_dev.c ****                                                                 /* ------------------- VALIDATE DEV
 564:rtos/uC-FS/Source/fs_dev.c ****     switch (p_dev->State) {
 565:rtos/uC-FS/Source/fs_dev.c ****         case FS_DEV_STATE_OPEN:
 566:rtos/uC-FS/Source/fs_dev.c ****         case FS_DEV_STATE_PRESENT:
 567:rtos/uC-FS/Source/fs_dev.c ****         case FS_DEV_STATE_LOW_FMT_VALID:
 568:rtos/uC-FS/Source/fs_dev.c ****              break;
 569:rtos/uC-FS/Source/fs_dev.c **** 
 570:rtos/uC-FS/Source/fs_dev.c **** 
 571:rtos/uC-FS/Source/fs_dev.c ****         case FS_DEV_STATE_CLOSED:                               /* Dev closed or not rdy ...       
 572:rtos/uC-FS/Source/fs_dev.c ****         case FS_DEV_STATE_CLOSING:
 573:rtos/uC-FS/Source/fs_dev.c ****         case FS_DEV_STATE_OPENING:
 574:rtos/uC-FS/Source/fs_dev.c ****         default:
 575:rtos/uC-FS/Source/fs_dev.c ****              FSDev_ReleaseUnlock(p_dev);                        /* ... so nothing can be done.     
 576:rtos/uC-FS/Source/fs_dev.c ****             *p_err = FS_ERR_DEV_NOT_OPEN;
 577:rtos/uC-FS/Source/fs_dev.c ****              return;
 578:rtos/uC-FS/Source/fs_dev.c ****     }
 579:rtos/uC-FS/Source/fs_dev.c **** 
 580:rtos/uC-FS/Source/fs_dev.c **** 
 581:rtos/uC-FS/Source/fs_dev.c **** 
 582:rtos/uC-FS/Source/fs_dev.c ****                                                                 /* ----------------- PERFORM I/O CT
 583:rtos/uC-FS/Source/fs_dev.c ****     p_dev->DevDrvPtr->IO_Ctrl(p_dev,
 584:rtos/uC-FS/Source/fs_dev.c ****                               opt,
 585:rtos/uC-FS/Source/fs_dev.c ****                               p_data,
 586:rtos/uC-FS/Source/fs_dev.c ****                               p_err);
 587:rtos/uC-FS/Source/fs_dev.c **** 
 588:rtos/uC-FS/Source/fs_dev.c ****     FSDev_HandleErr(p_dev, *p_err);                             /* See Note #2.                    
 589:rtos/uC-FS/Source/fs_dev.c **** 
 590:rtos/uC-FS/Source/fs_dev.c **** 
 591:rtos/uC-FS/Source/fs_dev.c **** 
 592:rtos/uC-FS/Source/fs_dev.c ****                                                                 /* ----------------- RELEASE DEV LO
 593:rtos/uC-FS/Source/fs_dev.c ****     FSDev_ReleaseUnlock(p_dev);
 594:rtos/uC-FS/Source/fs_dev.c **** }
 595:rtos/uC-FS/Source/fs_dev.c **** 
 596:rtos/uC-FS/Source/fs_dev.c **** 
 597:rtos/uC-FS/Source/fs_dev.c **** /*
 598:rtos/uC-FS/Source/fs_dev.c **** ***************************************************************************************************
 599:rtos/uC-FS/Source/fs_dev.c **** *                                            FSDev_Open()
 600:rtos/uC-FS/Source/fs_dev.c **** *
ARM GAS  /tmp/cccHmdnc.s 			page 12


 601:rtos/uC-FS/Source/fs_dev.c **** * Description : Open a device.
 602:rtos/uC-FS/Source/fs_dev.c **** *
 603:rtos/uC-FS/Source/fs_dev.c **** * Argument(s) : name_dev    Device name.  See Note #1.
 604:rtos/uC-FS/Source/fs_dev.c **** *
 605:rtos/uC-FS/Source/fs_dev.c **** *               p_dev_cfg   Pointer to device configuration.
 606:rtos/uC-FS/Source/fs_dev.c **** *               ---------   Validated in device driver 'Open()' function.
 607:rtos/uC-FS/Source/fs_dev.c **** *
 608:rtos/uC-FS/Source/fs_dev.c **** *               p_err       Pointer to variable that will receive the return error code from this f
 609:rtos/uC-FS/Source/fs_dev.c **** *                           (see Note #2) :
 610:rtos/uC-FS/Source/fs_dev.c **** *
 611:rtos/uC-FS/Source/fs_dev.c **** *                               FS_ERR_NONE                     Device opened successfully.
 612:rtos/uC-FS/Source/fs_dev.c **** *                               FS_ERR_DEV_ALREADY_OPEN         Device is already open.
 613:rtos/uC-FS/Source/fs_dev.c **** *                               FS_ERR_DEV_INVALID_NAME         Specified device name not valid.
 614:rtos/uC-FS/Source/fs_dev.c **** *                               FS_ERR_DEV_INVALID_SEC_SIZE     Invalid device sector size.
 615:rtos/uC-FS/Source/fs_dev.c **** *                               FS_ERR_DEV_INVALID_SIZE         Invalid device size.
 616:rtos/uC-FS/Source/fs_dev.c **** *                               FS_ERR_DEV_NONE_AVAIL           No devices available.
 617:rtos/uC-FS/Source/fs_dev.c **** *                               FS_ERR_DEV_UNKNOWN              Unknown device error.
 618:rtos/uC-FS/Source/fs_dev.c **** *                               FS_ERR_NAME_NULL                Argument 'name_dev' passed a NULL p
 619:rtos/uC-FS/Source/fs_dev.c **** *
 620:rtos/uC-FS/Source/fs_dev.c **** *                                                               ------ RETURNED BY DEV DRV's Open()
 621:rtos/uC-FS/Source/fs_dev.c **** *                               FS_ERR_DEV_INVALID_LOW_FMT      Device needs to be low-level format
 622:rtos/uC-FS/Source/fs_dev.c **** *                               FS_ERR_DEV_INVALID_UNIT_NBR     Device unit number is invalid.
 623:rtos/uC-FS/Source/fs_dev.c **** *                               FS_ERR_DEV_IO                   Device I/O error.
 624:rtos/uC-FS/Source/fs_dev.c **** *                               FS_ERR_DEV_NOT_PRESENT          Device is not present.
 625:rtos/uC-FS/Source/fs_dev.c **** *                               FS_ERR_DEV_TIMEOUT              Device timeout error.
 626:rtos/uC-FS/Source/fs_dev.c **** *
 627:rtos/uC-FS/Source/fs_dev.c **** * Return(s)   : none.
 628:rtos/uC-FS/Source/fs_dev.c **** *
 629:rtos/uC-FS/Source/fs_dev.c **** * Note(s)     : (1) Valid device names follow the pattern
 630:rtos/uC-FS/Source/fs_dev.c **** *
 631:rtos/uC-FS/Source/fs_dev.c **** *                       <dev_drv_name>:<unit>:
 632:rtos/uC-FS/Source/fs_dev.c **** *
 633:rtos/uC-FS/Source/fs_dev.c **** *                   where   <dev_drv_name> is the name of the device driver, identical to the strin
 634:rtos/uC-FS/Source/fs_dev.c **** *                                          returned by the device driver's 'NameGet()' function.
 635:rtos/uC-FS/Source/fs_dev.c **** *
 636:rtos/uC-FS/Source/fs_dev.c **** *                           <unit>         is the unit number of the device instance.
 637:rtos/uC-FS/Source/fs_dev.c **** *
 638:rtos/uC-FS/Source/fs_dev.c **** *                   (a) A name is invalid if ...
 639:rtos/uC-FS/Source/fs_dev.c **** *
 640:rtos/uC-FS/Source/fs_dev.c **** *                       (1) ... it cannot be parsed :
 641:rtos/uC-FS/Source/fs_dev.c **** *
 642:rtos/uC-FS/Source/fs_dev.c **** *                           (a) Device name is empty string (e.g., first character is colon or NULL
 643:rtos/uC-FS/Source/fs_dev.c **** *                           (b) Device name too long.
 644:rtos/uC-FS/Source/fs_dev.c **** *                           (c) No first  colon found.
 645:rtos/uC-FS/Source/fs_dev.c **** *                           (d) Device driver name too long.
 646:rtos/uC-FS/Source/fs_dev.c **** *                           (e) No second colon found.
 647:rtos/uC-FS/Source/fs_dev.c **** *                           (f) Illegal unit number.
 648:rtos/uC-FS/Source/fs_dev.c **** *                           (g) Consecutive colons found.
 649:rtos/uC-FS/Source/fs_dev.c **** *
 650:rtos/uC-FS/Source/fs_dev.c **** *                       (2) ... it includes text after a valid device name.
 651:rtos/uC-FS/Source/fs_dev.c **** *
 652:rtos/uC-FS/Source/fs_dev.c **** *                       (3) ... it is an empty string.
 653:rtos/uC-FS/Source/fs_dev.c **** *
 654:rtos/uC-FS/Source/fs_dev.c **** *                       (4) ... device driver could not be found with matching name.
 655:rtos/uC-FS/Source/fs_dev.c **** *
 656:rtos/uC-FS/Source/fs_dev.c **** *               (2) The return error code from this function SHOULD always be checked by the callin
 657:rtos/uC-FS/Source/fs_dev.c **** *                   application to determine if the device was successfully opened.  Repeated calls
ARM GAS  /tmp/cccHmdnc.s 			page 13


 658:rtos/uC-FS/Source/fs_dev.c **** *                   'FSDev_Open()' resulting in errors that do not indicate failure to open (like
 659:rtos/uC-FS/Source/fs_dev.c **** *                   FS_ERR_DEV_INVALID_LOW_FMT) without matching 'FSDev_Close()' calls may exhaust 
 660:rtos/uC-FS/Source/fs_dev.c **** *                   supply of device structures.
 661:rtos/uC-FS/Source/fs_dev.c **** *
 662:rtos/uC-FS/Source/fs_dev.c **** *                   (a) If FS_ERR_NONE is returned, then the device has been added to the file syst
 663:rtos/uC-FS/Source/fs_dev.c **** *                       is immediately accessible.
 664:rtos/uC-FS/Source/fs_dev.c **** *
 665:rtos/uC-FS/Source/fs_dev.c **** *                   (b) If FS_DEV_INVALID_LOW_FMT is returned, then the device has been added to th
 666:rtos/uC-FS/Source/fs_dev.c **** *                       system & is present, but needs to be low-level formatted.
 667:rtos/uC-FS/Source/fs_dev.c **** *
 668:rtos/uC-FS/Source/fs_dev.c **** *                   (c) If FS_ERR_DEV_NOT_PRESENT, FS_ERR_DEV_IO or FS_ERR_DEV_TIMEOUT is returned,
 669:rtos/uC-FS/Source/fs_dev.c **** *                       the device has been added to the file system, though it is probably not pre
 670:rtos/uC-FS/Source/fs_dev.c **** *                       The device will need to be either closed & re-added, or refreshed.
 671:rtos/uC-FS/Source/fs_dev.c **** *
 672:rtos/uC-FS/Source/fs_dev.c **** *                   (d) If FS_ERR_DEV_INVALID_NAME, FS_ERR_DEV_INVALID_SEC_SIZE, FS_ERR_DEV_INVALID
 673:rtos/uC-FS/Source/fs_dev.c **** *                       FS_ERR_DEV_INVALID_UNIT_NBR or FS_ERR_DEV_NONE_AVAIL is returned, then the 
 674:rtos/uC-FS/Source/fs_dev.c **** *                       has NOT been added to the file system.
 675:rtos/uC-FS/Source/fs_dev.c **** *
 676:rtos/uC-FS/Source/fs_dev.c **** *                   (e) If FS_ERR_DEV_UNKNOWN is returned, then the device driver is in an indeterm
 677:rtos/uC-FS/Source/fs_dev.c **** *                       state.  The system MAY need to be restarted & the device driver should be
 678:rtos/uC-FS/Source/fs_dev.c **** *                       examined for errors.  The device has NOT been added to the file system.
 679:rtos/uC-FS/Source/fs_dev.c **** ***************************************************************************************************
 680:rtos/uC-FS/Source/fs_dev.c **** */
 681:rtos/uC-FS/Source/fs_dev.c **** 
 682:rtos/uC-FS/Source/fs_dev.c **** void  FSDev_Open (CPU_CHAR  *name_dev,
 683:rtos/uC-FS/Source/fs_dev.c ****                   void      *p_dev_cfg,
 684:rtos/uC-FS/Source/fs_dev.c ****                   FS_ERR    *p_err)
 685:rtos/uC-FS/Source/fs_dev.c **** {
 686:rtos/uC-FS/Source/fs_dev.c ****     FS_DEV       *p_dev;
 687:rtos/uC-FS/Source/fs_dev.c ****     FS_DEV_API   *p_dev_drv;
 688:rtos/uC-FS/Source/fs_dev.c ****     FS_DEV_INFO   dev_info;
 689:rtos/uC-FS/Source/fs_dev.c ****     CPU_CHAR      name_dev_copy[FS_CFG_MAX_DEV_NAME_LEN + 1u];
 690:rtos/uC-FS/Source/fs_dev.c ****     CPU_CHAR     *name_file;
 691:rtos/uC-FS/Source/fs_dev.c ****     FS_ERR        query_err;
 692:rtos/uC-FS/Source/fs_dev.c ****     FS_QTY        unit_nbr;
 693:rtos/uC-FS/Source/fs_dev.c ****     CPU_BOOLEAN   lock_success;
 694:rtos/uC-FS/Source/fs_dev.c **** 
 695:rtos/uC-FS/Source/fs_dev.c **** 
 696:rtos/uC-FS/Source/fs_dev.c **** #if (FS_CFG_ERR_ARG_CHK_EXT_EN == DEF_ENABLED)                  /* ------------------- VALIDATE ARG
 697:rtos/uC-FS/Source/fs_dev.c ****     if (p_err == (FS_ERR *)0) {                                 /* Validate error ptr.             
 698:rtos/uC-FS/Source/fs_dev.c ****         CPU_SW_EXCEPTION(;);
 699:rtos/uC-FS/Source/fs_dev.c ****     }
 700:rtos/uC-FS/Source/fs_dev.c ****     if (name_dev == (CPU_CHAR *)0) {                            /* Validate name ptr.              
 701:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_NAME_NULL;
 702:rtos/uC-FS/Source/fs_dev.c ****         return;
 703:rtos/uC-FS/Source/fs_dev.c ****     }
 704:rtos/uC-FS/Source/fs_dev.c **** #endif
 705:rtos/uC-FS/Source/fs_dev.c **** 
 706:rtos/uC-FS/Source/fs_dev.c **** 
 707:rtos/uC-FS/Source/fs_dev.c ****                                                                 /* ------------------ PARSE DEV NAM
 708:rtos/uC-FS/Source/fs_dev.c ****     name_file = FSDev_NameParse( name_dev,                      /* Parse dev name.                 
 709:rtos/uC-FS/Source/fs_dev.c ****                                  name_dev_copy,
 710:rtos/uC-FS/Source/fs_dev.c ****                                 &unit_nbr);
 711:rtos/uC-FS/Source/fs_dev.c **** 
 712:rtos/uC-FS/Source/fs_dev.c ****     if (name_file == (CPU_CHAR *)0) {                           /* Name could not be parsed (see No
 713:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_DEV_INVALID_NAME;
 714:rtos/uC-FS/Source/fs_dev.c ****         return;
ARM GAS  /tmp/cccHmdnc.s 			page 14


 715:rtos/uC-FS/Source/fs_dev.c ****     }
 716:rtos/uC-FS/Source/fs_dev.c **** 
 717:rtos/uC-FS/Source/fs_dev.c ****     if (*name_file != (CPU_CHAR)ASCII_CHAR_NULL) {              /* Name inc's text after good dev n
 718:rtos/uC-FS/Source/fs_dev.c ****         *p_err = FS_ERR_DEV_INVALID_NAME;
 719:rtos/uC-FS/Source/fs_dev.c ****          return;
 720:rtos/uC-FS/Source/fs_dev.c ****     }
 721:rtos/uC-FS/Source/fs_dev.c **** 
 722:rtos/uC-FS/Source/fs_dev.c ****     if (name_dev_copy[0] == (CPU_CHAR)ASCII_CHAR_NULL) {        /* Dev name is empty str (see Note 
 723:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_DEV_INVALID_NAME;
 724:rtos/uC-FS/Source/fs_dev.c ****         return;
 725:rtos/uC-FS/Source/fs_dev.c ****     }
 726:rtos/uC-FS/Source/fs_dev.c **** 
 727:rtos/uC-FS/Source/fs_dev.c **** 
 728:rtos/uC-FS/Source/fs_dev.c **** 
 729:rtos/uC-FS/Source/fs_dev.c ****                                                                 /* ------------------ ACQUIRE FS LO
 730:rtos/uC-FS/Source/fs_dev.c ****     FS_OS_Lock(p_err);
 731:rtos/uC-FS/Source/fs_dev.c ****     if (*p_err != FS_ERR_NONE) {
 732:rtos/uC-FS/Source/fs_dev.c ****          return;
 733:rtos/uC-FS/Source/fs_dev.c ****     }
 734:rtos/uC-FS/Source/fs_dev.c **** 
 735:rtos/uC-FS/Source/fs_dev.c ****     p_dev = FSDev_ObjFind(name_dev);
 736:rtos/uC-FS/Source/fs_dev.c ****     if (p_dev != (FS_DEV *)0) {                                 /* If dev already open ...         
 737:rtos/uC-FS/Source/fs_dev.c ****         FS_OS_Unlock();
 738:rtos/uC-FS/Source/fs_dev.c **** 
 739:rtos/uC-FS/Source/fs_dev.c ****         if (p_dev->State == FS_DEV_STATE_LOW_FMT_VALID) {       /* Chk if dev has been low level fm
 740:rtos/uC-FS/Source/fs_dev.c ****            *p_err = FS_ERR_DEV_ALREADY_OPEN;
 741:rtos/uC-FS/Source/fs_dev.c ****         } else {
 742:rtos/uC-FS/Source/fs_dev.c ****            *p_err = FS_ERR_DEV_INVALID_LOW_FMT;                 /* Return err that will prompt for 
 743:rtos/uC-FS/Source/fs_dev.c ****         }
 744:rtos/uC-FS/Source/fs_dev.c ****         return;
 745:rtos/uC-FS/Source/fs_dev.c ****     }
 746:rtos/uC-FS/Source/fs_dev.c **** 
 747:rtos/uC-FS/Source/fs_dev.c **** 
 748:rtos/uC-FS/Source/fs_dev.c **** 
 749:rtos/uC-FS/Source/fs_dev.c ****                                                                 /* ------------------- FIND DEV DRV
 750:rtos/uC-FS/Source/fs_dev.c ****     p_dev_drv = FS_DevDrvFind(&name_dev_copy[0]);
 751:rtos/uC-FS/Source/fs_dev.c ****     if (p_dev_drv == (FS_DEV_API *)0) {                         /* If dev drv NOT found (see Note #
 752:rtos/uC-FS/Source/fs_dev.c ****         FS_OS_Unlock();
 753:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_DEV_INVALID_NAME;                        /* ... rtn err.                    
 754:rtos/uC-FS/Source/fs_dev.c ****         return;
 755:rtos/uC-FS/Source/fs_dev.c ****     }
 756:rtos/uC-FS/Source/fs_dev.c **** 
 757:rtos/uC-FS/Source/fs_dev.c **** 
 758:rtos/uC-FS/Source/fs_dev.c **** 
 759:rtos/uC-FS/Source/fs_dev.c ****                                                                 /* ------------------- ALLOCATE DEV
 760:rtos/uC-FS/Source/fs_dev.c ****     p_dev = FSDev_ObjGet();                                     /* Get dev.                        
 761:rtos/uC-FS/Source/fs_dev.c ****     if (p_dev == (FS_DEV *)0) {
 762:rtos/uC-FS/Source/fs_dev.c ****         FS_OS_Unlock();
 763:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_DEV_NONE_AVAIL;
 764:rtos/uC-FS/Source/fs_dev.c ****         return;
 765:rtos/uC-FS/Source/fs_dev.c ****     }
 766:rtos/uC-FS/Source/fs_dev.c **** 
 767:rtos/uC-FS/Source/fs_dev.c ****     p_dev->DevDrvPtr         = p_dev_drv;
 768:rtos/uC-FS/Source/fs_dev.c ****     p_dev->UnitNbr           = unit_nbr;
 769:rtos/uC-FS/Source/fs_dev.c ****     p_dev->State             = FS_DEV_STATE_OPENING;
 770:rtos/uC-FS/Source/fs_dev.c ****     p_dev->RefCnt            = 1u;
 771:rtos/uC-FS/Source/fs_dev.c ****     (void)Str_Copy_N(&p_dev->Name[0], name_dev, FS_CFG_MAX_DEV_NAME_LEN);
ARM GAS  /tmp/cccHmdnc.s 			page 15


 772:rtos/uC-FS/Source/fs_dev.c ****     FS_OS_Unlock();
 773:rtos/uC-FS/Source/fs_dev.c **** 
 774:rtos/uC-FS/Source/fs_dev.c **** 
 775:rtos/uC-FS/Source/fs_dev.c **** 
 776:rtos/uC-FS/Source/fs_dev.c ****                                                                 /* ----------------- ACQUIRE DEV LO
 777:rtos/uC-FS/Source/fs_dev.c ****     lock_success = FSDev_Lock(p_dev);
 778:rtos/uC-FS/Source/fs_dev.c ****     if (lock_success != DEF_YES) {
 779:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_OS_LOCK;
 780:rtos/uC-FS/Source/fs_dev.c ****         return;
 781:rtos/uC-FS/Source/fs_dev.c ****     }
 782:rtos/uC-FS/Source/fs_dev.c **** 
 783:rtos/uC-FS/Source/fs_dev.c **** 
 784:rtos/uC-FS/Source/fs_dev.c **** 
 785:rtos/uC-FS/Source/fs_dev.c ****                                                                 /* --------------------- OPEN DEV -
 786:rtos/uC-FS/Source/fs_dev.c ****     p_dev_drv->Open(p_dev, p_dev_cfg, p_err);                   /* Open dev.                       
 787:rtos/uC-FS/Source/fs_dev.c **** 
 788:rtos/uC-FS/Source/fs_dev.c **** 
 789:rtos/uC-FS/Source/fs_dev.c ****     switch (*p_err) {
 790:rtos/uC-FS/Source/fs_dev.c ****         case FS_ERR_NONE:                                       /* See Note #2a.                   
 791:rtos/uC-FS/Source/fs_dev.c ****              p_dev_drv->Query(p_dev, &dev_info, &query_err);    /* Get dev info.                   
 792:rtos/uC-FS/Source/fs_dev.c ****              if (query_err != FS_ERR_NONE) {
 793:rtos/uC-FS/Source/fs_dev.c ****                 *p_err = query_err;
 794:rtos/uC-FS/Source/fs_dev.c ****                  break;
 795:rtos/uC-FS/Source/fs_dev.c ****              }
 796:rtos/uC-FS/Source/fs_dev.c ****              p_dev->Fixed = dev_info.Fixed;
 797:rtos/uC-FS/Source/fs_dev.c **** 
 798:rtos/uC-FS/Source/fs_dev.c ****                                                                 /* Validate size & sec size.       
 799:rtos/uC-FS/Source/fs_dev.c ****              if (FS_DEV_IS_VALID_SIZE(dev_info.Size) == DEF_YES) {
 800:rtos/uC-FS/Source/fs_dev.c ****                  if (FS_DEV_IS_VALID_SEC_SIZE(dev_info.SecSize) == DEF_YES) {
 801:rtos/uC-FS/Source/fs_dev.c ****                      p_dev->State   = FS_DEV_STATE_LOW_FMT_VALID;
 802:rtos/uC-FS/Source/fs_dev.c ****                      p_dev->Size    = dev_info.Size;
 803:rtos/uC-FS/Source/fs_dev.c ****                      p_dev->SecSize = dev_info.SecSize;
 804:rtos/uC-FS/Source/fs_dev.c ****                  } else {
 805:rtos/uC-FS/Source/fs_dev.c ****                      FS_TRACE_INFO(("FSDev_Open(): invalid device sector size: %u\r\n", dev_info.Se
 806:rtos/uC-FS/Source/fs_dev.c ****                     *p_err = FS_ERR_DEV_INVALID_SEC_SIZE;
 807:rtos/uC-FS/Source/fs_dev.c ****                  }
 808:rtos/uC-FS/Source/fs_dev.c ****              } else {
 809:rtos/uC-FS/Source/fs_dev.c ****                 *p_err = FS_ERR_DEV_INVALID_SIZE;
 810:rtos/uC-FS/Source/fs_dev.c ****              }
 811:rtos/uC-FS/Source/fs_dev.c ****              break;
 812:rtos/uC-FS/Source/fs_dev.c **** 
 813:rtos/uC-FS/Source/fs_dev.c **** 
 814:rtos/uC-FS/Source/fs_dev.c ****         case FS_ERR_DEV_INVALID_LOW_FMT:                        /* Invalid low fmt (see Note #2b). 
 815:rtos/uC-FS/Source/fs_dev.c ****         case FS_ERR_DEV_INCOMPATIBLE_LOW_PARAMS:
 816:rtos/uC-FS/Source/fs_dev.c ****         case FS_ERR_DEV_CORRUPT_LOW_FMT:
 817:rtos/uC-FS/Source/fs_dev.c ****              p_dev_drv->Query(p_dev, &dev_info, &query_err);
 818:rtos/uC-FS/Source/fs_dev.c ****              if (query_err != FS_ERR_NONE) {
 819:rtos/uC-FS/Source/fs_dev.c ****                 *p_err = query_err;
 820:rtos/uC-FS/Source/fs_dev.c ****                  break;
 821:rtos/uC-FS/Source/fs_dev.c ****              }
 822:rtos/uC-FS/Source/fs_dev.c ****              p_dev->Fixed = dev_info.Fixed;
 823:rtos/uC-FS/Source/fs_dev.c ****              p_dev->State = FS_DEV_STATE_PRESENT;
 824:rtos/uC-FS/Source/fs_dev.c ****              break;
 825:rtos/uC-FS/Source/fs_dev.c **** 
 826:rtos/uC-FS/Source/fs_dev.c **** 
 827:rtos/uC-FS/Source/fs_dev.c ****         case FS_ERR_DEV_NOT_PRESENT:                            /* Device access err (see Notes #2c
 828:rtos/uC-FS/Source/fs_dev.c ****         case FS_ERR_DEV_IO:
ARM GAS  /tmp/cccHmdnc.s 			page 16


 829:rtos/uC-FS/Source/fs_dev.c ****         case FS_ERR_DEV_TIMEOUT:
 830:rtos/uC-FS/Source/fs_dev.c ****              p_dev_drv->Query(p_dev, &dev_info, &query_err);
 831:rtos/uC-FS/Source/fs_dev.c ****              if (query_err != FS_ERR_NONE) {
 832:rtos/uC-FS/Source/fs_dev.c ****                 *p_err = query_err;
 833:rtos/uC-FS/Source/fs_dev.c ****                  break;
 834:rtos/uC-FS/Source/fs_dev.c ****              }
 835:rtos/uC-FS/Source/fs_dev.c ****              p_dev->Fixed = dev_info.Fixed;
 836:rtos/uC-FS/Source/fs_dev.c ****              p_dev->State = FS_DEV_STATE_OPEN;
 837:rtos/uC-FS/Source/fs_dev.c ****              break;
 838:rtos/uC-FS/Source/fs_dev.c **** 
 839:rtos/uC-FS/Source/fs_dev.c **** 
 840:rtos/uC-FS/Source/fs_dev.c ****         case FS_ERR_DEV_INVALID_UNIT_NBR:                       /* See Notes #2d.                  
 841:rtos/uC-FS/Source/fs_dev.c ****         case FS_ERR_DEV_INVALID_CFG:
 842:rtos/uC-FS/Source/fs_dev.c ****         case FS_ERR_DEV_INVALID_LOW_PARAMS:
 843:rtos/uC-FS/Source/fs_dev.c ****         case FS_ERR_DEV_ALREADY_OPEN:
 844:rtos/uC-FS/Source/fs_dev.c ****         case FS_ERR_MEM_ALLOC:
 845:rtos/uC-FS/Source/fs_dev.c ****              break;
 846:rtos/uC-FS/Source/fs_dev.c **** 
 847:rtos/uC-FS/Source/fs_dev.c **** 
 848:rtos/uC-FS/Source/fs_dev.c ****         default:
 849:rtos/uC-FS/Source/fs_dev.c ****             *p_err = FS_ERR_DEV_UNKNOWN;
 850:rtos/uC-FS/Source/fs_dev.c ****              break;
 851:rtos/uC-FS/Source/fs_dev.c ****     }
 852:rtos/uC-FS/Source/fs_dev.c **** 
 853:rtos/uC-FS/Source/fs_dev.c **** 
 854:rtos/uC-FS/Source/fs_dev.c **** 
 855:rtos/uC-FS/Source/fs_dev.c ****                                                                 /* ------------------- HANDLE ERROR
 856:rtos/uC-FS/Source/fs_dev.c ****     switch (*p_err) {
 857:rtos/uC-FS/Source/fs_dev.c ****         case FS_ERR_NONE:
 858:rtos/uC-FS/Source/fs_dev.c ****         case FS_ERR_DEV_INVALID_LOW_FMT:
 859:rtos/uC-FS/Source/fs_dev.c ****         case FS_ERR_DEV_INCOMPATIBLE_LOW_PARAMS:
 860:rtos/uC-FS/Source/fs_dev.c ****         case FS_ERR_DEV_CORRUPT_LOW_FMT:
 861:rtos/uC-FS/Source/fs_dev.c ****         case FS_ERR_DEV_NOT_PRESENT:
 862:rtos/uC-FS/Source/fs_dev.c ****         case FS_ERR_DEV_IO:
 863:rtos/uC-FS/Source/fs_dev.c ****         case FS_ERR_DEV_TIMEOUT:
 864:rtos/uC-FS/Source/fs_dev.c ****              FSDev_Unlock(p_dev);                               /* Unlock dev but keep dev ref.    
 865:rtos/uC-FS/Source/fs_dev.c ****              break;
 866:rtos/uC-FS/Source/fs_dev.c **** 
 867:rtos/uC-FS/Source/fs_dev.c **** 
 868:rtos/uC-FS/Source/fs_dev.c ****         case FS_ERR_DEV_INVALID_UNIT_NBR:
 869:rtos/uC-FS/Source/fs_dev.c ****         case FS_ERR_DEV_INVALID_SEC_SIZE:
 870:rtos/uC-FS/Source/fs_dev.c ****         case FS_ERR_DEV_INVALID_SIZE:
 871:rtos/uC-FS/Source/fs_dev.c ****         case FS_ERR_DEV_ALREADY_OPEN:
 872:rtos/uC-FS/Source/fs_dev.c ****         case FS_ERR_DEV_INVALID_CFG:
 873:rtos/uC-FS/Source/fs_dev.c ****         case FS_ERR_DEV_UNKNOWN:
 874:rtos/uC-FS/Source/fs_dev.c ****         case FS_ERR_MEM_ALLOC:
 875:rtos/uC-FS/Source/fs_dev.c ****         default:
 876:rtos/uC-FS/Source/fs_dev.c ****              p_dev_drv->Close(p_dev);
 877:rtos/uC-FS/Source/fs_dev.c ****              p_dev->State = FS_DEV_STATE_CLOSING;
 878:rtos/uC-FS/Source/fs_dev.c ****              FSDev_ReleaseUnlock(p_dev);
 879:rtos/uC-FS/Source/fs_dev.c ****              break;
 880:rtos/uC-FS/Source/fs_dev.c ****     }
 881:rtos/uC-FS/Source/fs_dev.c **** }
 882:rtos/uC-FS/Source/fs_dev.c **** 
 883:rtos/uC-FS/Source/fs_dev.c **** 
 884:rtos/uC-FS/Source/fs_dev.c **** /*
 885:rtos/uC-FS/Source/fs_dev.c **** ***************************************************************************************************
ARM GAS  /tmp/cccHmdnc.s 			page 17


 886:rtos/uC-FS/Source/fs_dev.c **** *                                          FSDev_PartitionAdd()
 887:rtos/uC-FS/Source/fs_dev.c **** *
 888:rtos/uC-FS/Source/fs_dev.c **** * Description : Add a partition to a device.
 889:rtos/uC-FS/Source/fs_dev.c **** *
 890:rtos/uC-FS/Source/fs_dev.c **** * Argument(s) : name_dev        Device name.
 891:rtos/uC-FS/Source/fs_dev.c **** *
 892:rtos/uC-FS/Source/fs_dev.c **** *               partition_size  Size, in sectors, of the partition to add.
 893:rtos/uC-FS/Source/fs_dev.c **** *
 894:rtos/uC-FS/Source/fs_dev.c **** *               p_err           Pointer to variable that will receive the return error code from th
 895:rtos/uC-FS/Source/fs_dev.c **** *
 896:rtos/uC-FS/Source/fs_dev.c **** *                                   FS_ERR_NONE                      Partition added.
 897:rtos/uC-FS/Source/fs_dev.c **** *                                   FS_ERR_NAME_NULL                 Argument 'name_dev' passed a N
 898:rtos/uC-FS/Source/fs_dev.c **** *
 899:rtos/uC-FS/Source/fs_dev.c **** *                                                                    --- RETURNED BY FSDev_AcquireL
 900:rtos/uC-FS/Source/fs_dev.c **** *                                   FS_ERR_DEV_NOT_OPEN              Device is not open.
 901:rtos/uC-FS/Source/fs_dev.c **** *                                   FS_ERR_DEV_NOT_PRESENT           Device is not present.
 902:rtos/uC-FS/Source/fs_dev.c **** *                                   FS_ERR_DEV_INVALID_LOW_FMT       Device needs to be low-level f
 903:rtos/uC-FS/Source/fs_dev.c **** *
 904:rtos/uC-FS/Source/fs_dev.c **** *                                                                    ------ RETURNED BY FSPartition
 905:rtos/uC-FS/Source/fs_dev.c **** *                                   FS_ERR_DEV_IO                    Device I/O error.
 906:rtos/uC-FS/Source/fs_dev.c **** *                                   FS_ERR_DEV_TIMEOUT               Device timeout error.
 907:rtos/uC-FS/Source/fs_dev.c **** *                                   FS_ERR_INVALID_SIG               Invalid MBR signature.
 908:rtos/uC-FS/Source/fs_dev.c **** *                                   FS_ERR_INVALID_PARTITION         Invalid partition.
 909:rtos/uC-FS/Source/fs_dev.c **** *                                   FS_ERR_PARTITION_INVALID_SIZE    Partition size invalid.
 910:rtos/uC-FS/Source/fs_dev.c **** *
 911:rtos/uC-FS/Source/fs_dev.c **** * Return(s)   : The index of the created partition.  The first partition on the device has an index
 912:rtos/uC-FS/Source/fs_dev.c **** *               If an error occurs, the function returns FS_INVALID_PARTITION_NBR.
 913:rtos/uC-FS/Source/fs_dev.c **** *
 914:rtos/uC-FS/Source/fs_dev.c **** * Note(s)     : (1) Device state change will result from device I/O, not present or timeout error.
 915:rtos/uC-FS/Source/fs_dev.c **** *
 916:rtos/uC-FS/Source/fs_dev.c **** *                   (a) Errors resulting from device access are handled in local functions called b
 917:rtos/uC-FS/Source/fs_dev.c **** *                      'FSPartition_Add()'.
 918:rtos/uC-FS/Source/fs_dev.c **** ***************************************************************************************************
 919:rtos/uC-FS/Source/fs_dev.c **** */
 920:rtos/uC-FS/Source/fs_dev.c **** 
 921:rtos/uC-FS/Source/fs_dev.c **** #if (FS_CFG_PARTITION_EN == DEF_ENABLED)
 922:rtos/uC-FS/Source/fs_dev.c **** #if (FS_CFG_RD_ONLY_EN   == DEF_DISABLED)
 923:rtos/uC-FS/Source/fs_dev.c **** FS_PARTITION_NBR   FSDev_PartitionAdd (CPU_CHAR    *name_dev,
 924:rtos/uC-FS/Source/fs_dev.c ****                                        FS_SEC_QTY   partition_size,
 925:rtos/uC-FS/Source/fs_dev.c ****                                        FS_ERR      *p_err)
 926:rtos/uC-FS/Source/fs_dev.c **** {
 927:rtos/uC-FS/Source/fs_dev.c ****     FS_DEV            *p_dev;
 928:rtos/uC-FS/Source/fs_dev.c ****     FS_PARTITION_NBR   partition_nbr;
 929:rtos/uC-FS/Source/fs_dev.c **** 
 930:rtos/uC-FS/Source/fs_dev.c **** 
 931:rtos/uC-FS/Source/fs_dev.c **** #if (FS_CFG_ERR_ARG_CHK_EXT_EN == DEF_ENABLED)                  /* ------------------- VALIDATE ARG
 932:rtos/uC-FS/Source/fs_dev.c ****     if (p_err == (FS_ERR *)0) {                                 /* Validate error ptr.             
 933:rtos/uC-FS/Source/fs_dev.c ****         CPU_SW_EXCEPTION((FS_PARTITION_NBR)0);
 934:rtos/uC-FS/Source/fs_dev.c ****     }
 935:rtos/uC-FS/Source/fs_dev.c ****     if (name_dev == (CPU_CHAR *)0) {                            /* Validate name ptr.              
 936:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_NAME_NULL;
 937:rtos/uC-FS/Source/fs_dev.c ****         return ((FS_PARTITION_NBR)0);
 938:rtos/uC-FS/Source/fs_dev.c ****     }
 939:rtos/uC-FS/Source/fs_dev.c **** #endif
 940:rtos/uC-FS/Source/fs_dev.c **** 
 941:rtos/uC-FS/Source/fs_dev.c **** 
 942:rtos/uC-FS/Source/fs_dev.c **** 
ARM GAS  /tmp/cccHmdnc.s 			page 18


 943:rtos/uC-FS/Source/fs_dev.c ****                                                                 /* ----------------- ACQUIRE DEV LO
 944:rtos/uC-FS/Source/fs_dev.c ****     p_dev = FSDev_AcquireLockChk(name_dev, p_err);
 945:rtos/uC-FS/Source/fs_dev.c ****     (void)p_err;                                               /* Err ignored. Ret val chk'd instea
 946:rtos/uC-FS/Source/fs_dev.c ****     if (p_dev == (FS_DEV *)0) {                                 /* Rtn err if dev not found.       
 947:rtos/uC-FS/Source/fs_dev.c ****         return ((FS_PARTITION_NBR)0);
 948:rtos/uC-FS/Source/fs_dev.c ****     }
 949:rtos/uC-FS/Source/fs_dev.c **** 
 950:rtos/uC-FS/Source/fs_dev.c **** 
 951:rtos/uC-FS/Source/fs_dev.c **** 
 952:rtos/uC-FS/Source/fs_dev.c ****                                                                 /* ------------------- ADD PARTITIO
 953:rtos/uC-FS/Source/fs_dev.c ****     partition_nbr = FSPartition_Add(p_dev, partition_size, p_err);
 954:rtos/uC-FS/Source/fs_dev.c **** 
 955:rtos/uC-FS/Source/fs_dev.c ****                                                                 /* ----------------- RELEASE DEV LO
 956:rtos/uC-FS/Source/fs_dev.c ****     FSDev_ReleaseUnlock(p_dev);
 957:rtos/uC-FS/Source/fs_dev.c **** 
 958:rtos/uC-FS/Source/fs_dev.c ****     return (partition_nbr);
 959:rtos/uC-FS/Source/fs_dev.c **** }
 960:rtos/uC-FS/Source/fs_dev.c **** #endif
 961:rtos/uC-FS/Source/fs_dev.c **** #endif
 962:rtos/uC-FS/Source/fs_dev.c **** 
 963:rtos/uC-FS/Source/fs_dev.c **** 
 964:rtos/uC-FS/Source/fs_dev.c **** /*
 965:rtos/uC-FS/Source/fs_dev.c **** ***************************************************************************************************
 966:rtos/uC-FS/Source/fs_dev.c **** *                                          FSDev_PartitionFind()
 967:rtos/uC-FS/Source/fs_dev.c **** *
 968:rtos/uC-FS/Source/fs_dev.c **** * Description : Find a partition on a device.
 969:rtos/uC-FS/Source/fs_dev.c **** *
 970:rtos/uC-FS/Source/fs_dev.c **** * Argument(s) : name_dev            Device name.
 971:rtos/uC-FS/Source/fs_dev.c **** *
 972:rtos/uC-FS/Source/fs_dev.c **** *               partition_nbr       Index of the partition to find.
 973:rtos/uC-FS/Source/fs_dev.c **** *
 974:rtos/uC-FS/Source/fs_dev.c **** *               p_partition_entry   Pointer to variable that will receive the partition information
 975:rtos/uC-FS/Source/fs_dev.c **** *
 976:rtos/uC-FS/Source/fs_dev.c **** *               p_err               Pointer to variable that will receive the return error code fro
 977:rtos/uC-FS/Source/fs_dev.c **** *                                   function :
 978:rtos/uC-FS/Source/fs_dev.c **** *
 979:rtos/uC-FS/Source/fs_dev.c **** *                                       FS_ERR_NONE                      Partition found.
 980:rtos/uC-FS/Source/fs_dev.c **** *                                       FS_ERR_NAME_NULL                 Argument 'name_dev' passed
 981:rtos/uC-FS/Source/fs_dev.c **** *                                       FS_ERR_NULL_PTR                  Argument 'p_partition_entr
 982:rtos/uC-FS/Source/fs_dev.c **** *                                                                            a NULL pointer.
 983:rtos/uC-FS/Source/fs_dev.c **** *
 984:rtos/uC-FS/Source/fs_dev.c **** *                                                                        --- RETURNED BY FSDev_Acqu
 985:rtos/uC-FS/Source/fs_dev.c **** *                                       FS_ERR_DEV_NOT_OPEN              Device is not open.
 986:rtos/uC-FS/Source/fs_dev.c **** *                                       FS_ERR_DEV_NOT_PRESENT           Device is not present.
 987:rtos/uC-FS/Source/fs_dev.c **** *                                       FS_ERR_DEV_INVALID_LOW_FMT       Device needs to be low-lev
 988:rtos/uC-FS/Source/fs_dev.c **** *
 989:rtos/uC-FS/Source/fs_dev.c **** *                                                                        ----- RETURNED BY FSPartit
 990:rtos/uC-FS/Source/fs_dev.c **** *                                       FS_ERR_PARTITION_NOT_FOUND       Partition not found.
 991:rtos/uC-FS/Source/fs_dev.c **** *                                       FS_ERR_INVALID_SIG               Invalid MBR signature.
 992:rtos/uC-FS/Source/fs_dev.c **** *                                       FS_ERR_PARTITION_INVALID_NBR     Invalid partition number.
 993:rtos/uC-FS/Source/fs_dev.c **** *                                       FS_ERR_DEV_INVALID_LOW_FMT       Device needs to be low-lev
 994:rtos/uC-FS/Source/fs_dev.c **** *                                       FS_ERR_DEV_IO                    Device I/O error.
 995:rtos/uC-FS/Source/fs_dev.c **** *                                       FS_ERR_DEV_TIMEOUT               Device timeout error.
 996:rtos/uC-FS/Source/fs_dev.c **** *                                       FS_ERR_DEV_NOT_PRESENT           Device is not present.
 997:rtos/uC-FS/Source/fs_dev.c **** *
 998:rtos/uC-FS/Source/fs_dev.c **** * Return(s)   : none.
 999:rtos/uC-FS/Source/fs_dev.c **** *
ARM GAS  /tmp/cccHmdnc.s 			page 19


1000:rtos/uC-FS/Source/fs_dev.c **** * Note(s)     : (1) Device state change will result from device I/O, not present or timeout error.
1001:rtos/uC-FS/Source/fs_dev.c **** *
1002:rtos/uC-FS/Source/fs_dev.c **** *                   (a) Errors resulting from device access are handled in internal functions calle
1003:rtos/uC-FS/Source/fs_dev.c **** *                      'FSPartition_Find()'.
1004:rtos/uC-FS/Source/fs_dev.c **** ***************************************************************************************************
1005:rtos/uC-FS/Source/fs_dev.c **** */
1006:rtos/uC-FS/Source/fs_dev.c **** 
1007:rtos/uC-FS/Source/fs_dev.c **** #if (FS_CFG_PARTITION_EN == DEF_ENABLED)
1008:rtos/uC-FS/Source/fs_dev.c **** void  FSDev_PartitionFind (CPU_CHAR            *name_dev,
1009:rtos/uC-FS/Source/fs_dev.c ****                            FS_PARTITION_NBR     partition_nbr,
1010:rtos/uC-FS/Source/fs_dev.c ****                            FS_PARTITION_ENTRY  *p_partition_entry,
1011:rtos/uC-FS/Source/fs_dev.c ****                            FS_ERR              *p_err)
1012:rtos/uC-FS/Source/fs_dev.c **** {
1013:rtos/uC-FS/Source/fs_dev.c ****     FS_DEV  *p_dev;
1014:rtos/uC-FS/Source/fs_dev.c **** 
1015:rtos/uC-FS/Source/fs_dev.c **** 
1016:rtos/uC-FS/Source/fs_dev.c **** #if (FS_CFG_ERR_ARG_CHK_EXT_EN == DEF_ENABLED)                  /* ------------------- VALIDATE ARG
1017:rtos/uC-FS/Source/fs_dev.c ****     if (p_err == (FS_ERR *)0) {                                 /* Validate error ptr.             
1018:rtos/uC-FS/Source/fs_dev.c ****         CPU_SW_EXCEPTION(;);
1019:rtos/uC-FS/Source/fs_dev.c ****     }
1020:rtos/uC-FS/Source/fs_dev.c ****     if (name_dev == (CPU_CHAR *)0) {                            /* Validate name ptr.              
1021:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_NAME_NULL;
1022:rtos/uC-FS/Source/fs_dev.c ****         return;
1023:rtos/uC-FS/Source/fs_dev.c ****     }
1024:rtos/uC-FS/Source/fs_dev.c ****     if (p_partition_entry == (FS_PARTITION_ENTRY *)0) {         /* Validate partition entry ptr.   
1025:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_NULL_PTR;
1026:rtos/uC-FS/Source/fs_dev.c ****         return;
1027:rtos/uC-FS/Source/fs_dev.c ****     }
1028:rtos/uC-FS/Source/fs_dev.c **** #endif
1029:rtos/uC-FS/Source/fs_dev.c **** 
1030:rtos/uC-FS/Source/fs_dev.c **** 
1031:rtos/uC-FS/Source/fs_dev.c **** 
1032:rtos/uC-FS/Source/fs_dev.c ****                                                                 /* ------------------- DFLT RTN VAR
1033:rtos/uC-FS/Source/fs_dev.c ****    p_partition_entry->Start = 0u;
1034:rtos/uC-FS/Source/fs_dev.c ****    p_partition_entry->Size  = 0u;
1035:rtos/uC-FS/Source/fs_dev.c ****    p_partition_entry->Type  = 0u;
1036:rtos/uC-FS/Source/fs_dev.c **** 
1037:rtos/uC-FS/Source/fs_dev.c **** 
1038:rtos/uC-FS/Source/fs_dev.c **** 
1039:rtos/uC-FS/Source/fs_dev.c ****                                                                 /* ----------------- ACQUIRE DEV LO
1040:rtos/uC-FS/Source/fs_dev.c ****     p_dev = FSDev_AcquireLockChk(name_dev, p_err);
1041:rtos/uC-FS/Source/fs_dev.c ****     (void)p_err;                                               /* Err ignored. Ret val chk'd instea
1042:rtos/uC-FS/Source/fs_dev.c ****     if (p_dev == (FS_DEV *)0) {                                 /* Rtn err if dev not found.       
1043:rtos/uC-FS/Source/fs_dev.c ****         return;
1044:rtos/uC-FS/Source/fs_dev.c ****     }
1045:rtos/uC-FS/Source/fs_dev.c **** 
1046:rtos/uC-FS/Source/fs_dev.c **** 
1047:rtos/uC-FS/Source/fs_dev.c **** 
1048:rtos/uC-FS/Source/fs_dev.c ****                                                                 /* ------------------ FIND PARTITIO
1049:rtos/uC-FS/Source/fs_dev.c **** #if (FS_CFG_PARTITION_EN == DEF_ENABLED)
1050:rtos/uC-FS/Source/fs_dev.c ****     FSPartition_Find(p_dev,
1051:rtos/uC-FS/Source/fs_dev.c ****                      partition_nbr,
1052:rtos/uC-FS/Source/fs_dev.c ****                      p_partition_entry,
1053:rtos/uC-FS/Source/fs_dev.c ****                      p_err);
1054:rtos/uC-FS/Source/fs_dev.c **** #else
1055:rtos/uC-FS/Source/fs_dev.c ****     FSPartition_FindSimple(p_dev,
1056:rtos/uC-FS/Source/fs_dev.c ****                            p_partition_entry,
ARM GAS  /tmp/cccHmdnc.s 			page 20


1057:rtos/uC-FS/Source/fs_dev.c ****                            p_err);
1058:rtos/uC-FS/Source/fs_dev.c **** #endif
1059:rtos/uC-FS/Source/fs_dev.c **** 
1060:rtos/uC-FS/Source/fs_dev.c ****                                                                 /* ----------------- RELEASE DEV LO
1061:rtos/uC-FS/Source/fs_dev.c ****     FSDev_ReleaseUnlock(p_dev);
1062:rtos/uC-FS/Source/fs_dev.c **** }
1063:rtos/uC-FS/Source/fs_dev.c **** #endif
1064:rtos/uC-FS/Source/fs_dev.c **** 
1065:rtos/uC-FS/Source/fs_dev.c **** 
1066:rtos/uC-FS/Source/fs_dev.c **** /*
1067:rtos/uC-FS/Source/fs_dev.c **** ***************************************************************************************************
1068:rtos/uC-FS/Source/fs_dev.c **** *                                          FSDev_PartitionInit()
1069:rtos/uC-FS/Source/fs_dev.c **** *
1070:rtos/uC-FS/Source/fs_dev.c **** * Description : Initialize the partition structure on a device.
1071:rtos/uC-FS/Source/fs_dev.c **** *
1072:rtos/uC-FS/Source/fs_dev.c **** * Argument(s) : name_dev        Device name.
1073:rtos/uC-FS/Source/fs_dev.c **** *
1074:rtos/uC-FS/Source/fs_dev.c **** *               partition_size  Size of partition, in sectors.
1075:rtos/uC-FS/Source/fs_dev.c **** *                                   OR
1076:rtos/uC-FS/Source/fs_dev.c **** *                               0, if partition will occupy entire device.
1077:rtos/uC-FS/Source/fs_dev.c **** *
1078:rtos/uC-FS/Source/fs_dev.c **** *               p_err           Pointer to variable that will receive the return error code from th
1079:rtos/uC-FS/Source/fs_dev.c **** *
1080:rtos/uC-FS/Source/fs_dev.c **** *                                   FS_ERR_NONE                      Partition found.
1081:rtos/uC-FS/Source/fs_dev.c **** *                                   FS_ERR_DEV_VOL_OPEN              Volume open on device.
1082:rtos/uC-FS/Source/fs_dev.c **** *                                   FS_ERR_NAME_NULL                 Argument 'name_dev' passed a N
1083:rtos/uC-FS/Source/fs_dev.c **** *                                   FS_ERR_PARTITION_INVALID_SIZE    Partition size invalid.
1084:rtos/uC-FS/Source/fs_dev.c **** *
1085:rtos/uC-FS/Source/fs_dev.c **** *                                                                    --- RETURNED BY FSDev_AcquireL
1086:rtos/uC-FS/Source/fs_dev.c **** *                                   FS_ERR_DEV_NOT_OPEN              Device is not open.
1087:rtos/uC-FS/Source/fs_dev.c **** *                                   FS_ERR_DEV_NOT_PRESENT           Device is not present.
1088:rtos/uC-FS/Source/fs_dev.c **** *                                   FS_ERR_DEV_INVALID_LOW_FMT       Device needs to be low-level f
1089:rtos/uC-FS/Source/fs_dev.c **** *
1090:rtos/uC-FS/Source/fs_dev.c **** *                                                                    ----- RETURNED BY FSPartition_
1091:rtos/uC-FS/Source/fs_dev.c **** *                                   FS_ERR_DEV_IO                    Device I/O error.
1092:rtos/uC-FS/Source/fs_dev.c **** *                                   FS_ERR_DEV_TIMEOUT               Device timeout error.
1093:rtos/uC-FS/Source/fs_dev.c **** *
1094:rtos/uC-FS/Source/fs_dev.c **** * Return(s)   : none.
1095:rtos/uC-FS/Source/fs_dev.c **** *
1096:rtos/uC-FS/Source/fs_dev.c **** * Note(s)     : (1) Function blocked if a volume is open on the device.  All volume (& files) MUST 
1097:rtos/uC-FS/Source/fs_dev.c **** *                   closed prior to initializing the partition structure, since it will obliterate 
1098:rtos/uC-FS/Source/fs_dev.c **** *                   existing file system.
1099:rtos/uC-FS/Source/fs_dev.c **** *
1100:rtos/uC-FS/Source/fs_dev.c **** *               (2) Device state change will result from device I/O, not present or timeout error.
1101:rtos/uC-FS/Source/fs_dev.c **** *
1102:rtos/uC-FS/Source/fs_dev.c **** *                   (a) Errors resulting from device access are handled in internal functions calle
1103:rtos/uC-FS/Source/fs_dev.c **** *                      'FSPartition_Init()'.
1104:rtos/uC-FS/Source/fs_dev.c **** ***************************************************************************************************
1105:rtos/uC-FS/Source/fs_dev.c **** */
1106:rtos/uC-FS/Source/fs_dev.c **** 
1107:rtos/uC-FS/Source/fs_dev.c **** #if (FS_CFG_RD_ONLY_EN == DEF_DISABLED)
1108:rtos/uC-FS/Source/fs_dev.c **** void  FSDev_PartitionInit (CPU_CHAR    *name_dev,
1109:rtos/uC-FS/Source/fs_dev.c ****                            FS_SEC_QTY   partition_size,
1110:rtos/uC-FS/Source/fs_dev.c ****                            FS_ERR      *p_err)
1111:rtos/uC-FS/Source/fs_dev.c **** {
1112:rtos/uC-FS/Source/fs_dev.c ****     FS_DEV  *p_dev;
1113:rtos/uC-FS/Source/fs_dev.c **** 
ARM GAS  /tmp/cccHmdnc.s 			page 21


1114:rtos/uC-FS/Source/fs_dev.c **** 
1115:rtos/uC-FS/Source/fs_dev.c **** #if (FS_CFG_ERR_ARG_CHK_EXT_EN == DEF_ENABLED)                  /* ------------------- VALIDATE ARG
1116:rtos/uC-FS/Source/fs_dev.c ****     if (p_err == (FS_ERR *)0) {                                 /* Validate error ptr.             
1117:rtos/uC-FS/Source/fs_dev.c ****         CPU_SW_EXCEPTION(;);
1118:rtos/uC-FS/Source/fs_dev.c ****     }
1119:rtos/uC-FS/Source/fs_dev.c ****     if (name_dev == (CPU_CHAR *)0) {                            /* Validate name ptr.              
1120:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_NAME_NULL;
1121:rtos/uC-FS/Source/fs_dev.c ****         return;
1122:rtos/uC-FS/Source/fs_dev.c ****     }
1123:rtos/uC-FS/Source/fs_dev.c **** #endif
1124:rtos/uC-FS/Source/fs_dev.c **** 
1125:rtos/uC-FS/Source/fs_dev.c **** 
1126:rtos/uC-FS/Source/fs_dev.c **** 
1127:rtos/uC-FS/Source/fs_dev.c ****                                                                 /* ----------------- ACQUIRE DEV LO
1128:rtos/uC-FS/Source/fs_dev.c ****     p_dev = FSDev_AcquireLockChk(name_dev, p_err);
1129:rtos/uC-FS/Source/fs_dev.c ****     (void)p_err;                                               /* Err ignored. Ret val chk'd instea
1130:rtos/uC-FS/Source/fs_dev.c ****     if (p_dev == (FS_DEV *)0) {                                 /* Rtn err if dev not found.       
1131:rtos/uC-FS/Source/fs_dev.c ****         return;
1132:rtos/uC-FS/Source/fs_dev.c ****     }
1133:rtos/uC-FS/Source/fs_dev.c **** 
1134:rtos/uC-FS/Source/fs_dev.c ****     if (p_dev->VolCnt != (FS_QTY)0) {                           /* See Notes #1.                   
1135:rtos/uC-FS/Source/fs_dev.c ****         FSDev_ReleaseUnlock(p_dev);
1136:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_DEV_VOL_OPEN;
1137:rtos/uC-FS/Source/fs_dev.c ****         return;
1138:rtos/uC-FS/Source/fs_dev.c ****     }
1139:rtos/uC-FS/Source/fs_dev.c **** 
1140:rtos/uC-FS/Source/fs_dev.c ****     if (partition_size > p_dev->Size) {                         /* Chk partition size.             
1141:rtos/uC-FS/Source/fs_dev.c ****         FSDev_ReleaseUnlock(p_dev);
1142:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_PARTITION_INVALID_SIZE;
1143:rtos/uC-FS/Source/fs_dev.c ****         return;
1144:rtos/uC-FS/Source/fs_dev.c ****     }
1145:rtos/uC-FS/Source/fs_dev.c **** 
1146:rtos/uC-FS/Source/fs_dev.c **** 
1147:rtos/uC-FS/Source/fs_dev.c **** 
1148:rtos/uC-FS/Source/fs_dev.c ****                                                                 /* ------------- INIT PARTITION STR
1149:rtos/uC-FS/Source/fs_dev.c ****     if (partition_size == 0u) {
1150:rtos/uC-FS/Source/fs_dev.c ****         partition_size =  p_dev->Size;
1151:rtos/uC-FS/Source/fs_dev.c ****     }
1152:rtos/uC-FS/Source/fs_dev.c **** 
1153:rtos/uC-FS/Source/fs_dev.c ****     FSPartition_Init(p_dev,
1154:rtos/uC-FS/Source/fs_dev.c ****                      partition_size,
1155:rtos/uC-FS/Source/fs_dev.c ****                      p_err);
1156:rtos/uC-FS/Source/fs_dev.c **** 
1157:rtos/uC-FS/Source/fs_dev.c ****                                                                 /* ----------------- RELEASE DEV LO
1158:rtos/uC-FS/Source/fs_dev.c ****     FSDev_ReleaseUnlock(p_dev);
1159:rtos/uC-FS/Source/fs_dev.c **** }
1160:rtos/uC-FS/Source/fs_dev.c **** #endif
1161:rtos/uC-FS/Source/fs_dev.c **** 
1162:rtos/uC-FS/Source/fs_dev.c **** 
1163:rtos/uC-FS/Source/fs_dev.c **** /*
1164:rtos/uC-FS/Source/fs_dev.c **** ***************************************************************************************************
1165:rtos/uC-FS/Source/fs_dev.c **** *                                            FSDev_Query()
1166:rtos/uC-FS/Source/fs_dev.c **** *
1167:rtos/uC-FS/Source/fs_dev.c **** * Description : Obtain information about a device.
1168:rtos/uC-FS/Source/fs_dev.c **** *
1169:rtos/uC-FS/Source/fs_dev.c **** * Argument(s) : name_dev    Device name.
1170:rtos/uC-FS/Source/fs_dev.c **** *
ARM GAS  /tmp/cccHmdnc.s 			page 22


1171:rtos/uC-FS/Source/fs_dev.c **** *               p_info      Pointer to structure that will receive device information.
1172:rtos/uC-FS/Source/fs_dev.c **** *
1173:rtos/uC-FS/Source/fs_dev.c **** *               p_err       Pointer to variable that will receive the return error code from this f
1174:rtos/uC-FS/Source/fs_dev.c **** *
1175:rtos/uC-FS/Source/fs_dev.c **** *                               FS_ERR_NONE                   Complete device information obtained.
1176:rtos/uC-FS/Source/fs_dev.c **** *                               FS_ERR_NAME_NULL              Argument 'name_dev' passed a NULL poi
1177:rtos/uC-FS/Source/fs_dev.c **** *                               FS_ERR_NULL_PTR               Argument 'p_info' passed a NULL point
1178:rtos/uC-FS/Source/fs_dev.c **** *
1179:rtos/uC-FS/Source/fs_dev.c **** *                                                             ---- RETURNED BY FSDev_AcquireLockChk
1180:rtos/uC-FS/Source/fs_dev.c **** *                               FS_ERR_DEV_NOT_OPEN           Device is not open.
1181:rtos/uC-FS/Source/fs_dev.c **** *                               FS_ERR_DEV_NOT_PRESENT        Device is not present.
1182:rtos/uC-FS/Source/fs_dev.c **** *                               FS_ERR_DEV_INVALID_LOW_FMT    Device needs to be low-level formatte
1183:rtos/uC-FS/Source/fs_dev.c **** *
1184:rtos/uC-FS/Source/fs_dev.c **** *                                                             ----- RETURNED BY FSDev_QueryLocked()
1185:rtos/uC-FS/Source/fs_dev.c **** *                               FS_ERR_DEV_INVALID_SEC_NBR    Sector start or count invalid.
1186:rtos/uC-FS/Source/fs_dev.c **** *                               FS_ERR_DEV_IO                 Device I/O error.
1187:rtos/uC-FS/Source/fs_dev.c **** *                               FS_ERR_DEV_TIMEOUT            Device timeout error.
1188:rtos/uC-FS/Source/fs_dev.c **** *
1189:rtos/uC-FS/Source/fs_dev.c **** * Return(s)   : none.
1190:rtos/uC-FS/Source/fs_dev.c **** *
1191:rtos/uC-FS/Source/fs_dev.c **** * Note(s)     : (1) Device state change will result from device I/O, not present or timeout error.
1192:rtos/uC-FS/Source/fs_dev.c **** *
1193:rtos/uC-FS/Source/fs_dev.c **** *                   (a) Errors resulting from device access are handled in 'FSDev_QueryLocked()'.
1194:rtos/uC-FS/Source/fs_dev.c **** *
1195:rtos/uC-FS/Source/fs_dev.c **** *               (2) In case the media is not present it's not possible to call FSDev_QueryLocked()
1196:rtos/uC-FS/Source/fs_dev.c **** *                   which may assume a media is present. In that case assuming the device itself is
1197:rtos/uC-FS/Source/fs_dev.c **** *                   available the 'State' and 'Fixed' fields of p_info are filled from the device d
1198:rtos/uC-FS/Source/fs_dev.c **** *                   Both 'SecSize' and 'Size' will be set to 0. An appropriate error is returned as
1199:rtos/uC-FS/Source/fs_dev.c **** *                   to why the device was inaccessible.
1200:rtos/uC-FS/Source/fs_dev.c **** *
1201:rtos/uC-FS/Source/fs_dev.c **** *                   (a) The device info will not be valid if a fatal error such as FS_ERR_DEV_NOT_O
1202:rtos/uC-FS/Source/fs_dev.c **** *                       or FS_ERR_OS_LOCK is returned.
1203:rtos/uC-FS/Source/fs_dev.c **** ***************************************************************************************************
1204:rtos/uC-FS/Source/fs_dev.c **** */
1205:rtos/uC-FS/Source/fs_dev.c **** 
1206:rtos/uC-FS/Source/fs_dev.c **** void  FSDev_Query (CPU_CHAR     *name_dev,
1207:rtos/uC-FS/Source/fs_dev.c ****                    FS_DEV_INFO  *p_info,
1208:rtos/uC-FS/Source/fs_dev.c ****                    FS_ERR       *p_err)
1209:rtos/uC-FS/Source/fs_dev.c **** {
1210:rtos/uC-FS/Source/fs_dev.c ****     FS_DEV       *p_dev;
1211:rtos/uC-FS/Source/fs_dev.c ****     CPU_BOOLEAN   lock_success;
1212:rtos/uC-FS/Source/fs_dev.c **** 
1213:rtos/uC-FS/Source/fs_dev.c **** 
1214:rtos/uC-FS/Source/fs_dev.c **** #if (FS_CFG_ERR_ARG_CHK_EXT_EN == DEF_ENABLED)                  /* ------------------- VALIDATE ARG
1215:rtos/uC-FS/Source/fs_dev.c ****     if (p_err == DEF_NULL) {                                    /* Validate error ptr.             
1216:rtos/uC-FS/Source/fs_dev.c ****         CPU_SW_EXCEPTION(;);
1217:rtos/uC-FS/Source/fs_dev.c ****     }
1218:rtos/uC-FS/Source/fs_dev.c ****     if (name_dev == DEF_NULL) {                                 /* Validate name ptr.              
1219:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_NAME_NULL;
1220:rtos/uC-FS/Source/fs_dev.c ****         return;
1221:rtos/uC-FS/Source/fs_dev.c ****     }
1222:rtos/uC-FS/Source/fs_dev.c ****     if (p_info == DEF_NULL) {                                   /* Validate info ptr.              
1223:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_NULL_PTR;
1224:rtos/uC-FS/Source/fs_dev.c ****         return;
1225:rtos/uC-FS/Source/fs_dev.c ****     }
1226:rtos/uC-FS/Source/fs_dev.c **** #endif
1227:rtos/uC-FS/Source/fs_dev.c **** 
ARM GAS  /tmp/cccHmdnc.s 			page 23


1228:rtos/uC-FS/Source/fs_dev.c **** 
1229:rtos/uC-FS/Source/fs_dev.c ****     p_dev = FSDev_AcquireLockChk(name_dev,  p_err);
1230:rtos/uC-FS/Source/fs_dev.c ****     (void)p_err;                                               /* Err ignored. Ret val chk'd instea
1231:rtos/uC-FS/Source/fs_dev.c ****     if (p_dev != DEF_NULL) {                                    /* If media is present go ahead wit
1232:rtos/uC-FS/Source/fs_dev.c ****         FSDev_QueryLocked(p_dev, p_info, p_err);
1233:rtos/uC-FS/Source/fs_dev.c ****         p_info->State = p_dev->State;
1234:rtos/uC-FS/Source/fs_dev.c ****     } else {                                                    /* Otherwise use the info stored in
1235:rtos/uC-FS/Source/fs_dev.c ****         p_dev = FSDev_Acquire(name_dev);                        /* Acquire dev ref.                
1236:rtos/uC-FS/Source/fs_dev.c ****         if (p_dev == DEF_NULL) {                                /* Rtn err if dev not found.       
1237:rtos/uC-FS/Source/fs_dev.c ****            *p_err = FS_ERR_DEV_NOT_OPEN;
1238:rtos/uC-FS/Source/fs_dev.c ****             return;
1239:rtos/uC-FS/Source/fs_dev.c ****         }
1240:rtos/uC-FS/Source/fs_dev.c **** 
1241:rtos/uC-FS/Source/fs_dev.c ****         lock_success = FSDev_Lock(p_dev);
1242:rtos/uC-FS/Source/fs_dev.c ****         if (lock_success != DEF_YES) {
1243:rtos/uC-FS/Source/fs_dev.c ****             FSDev_Release(p_dev);
1244:rtos/uC-FS/Source/fs_dev.c ****            *p_err = FS_ERR_OS_LOCK;
1245:rtos/uC-FS/Source/fs_dev.c ****             return;
1246:rtos/uC-FS/Source/fs_dev.c ****         }
1247:rtos/uC-FS/Source/fs_dev.c **** 
1248:rtos/uC-FS/Source/fs_dev.c ****         p_info->State   = p_dev->State;
1249:rtos/uC-FS/Source/fs_dev.c ****         p_info->Fixed   = p_dev->Fixed;
1250:rtos/uC-FS/Source/fs_dev.c ****         p_info->Size    = 0u;
1251:rtos/uC-FS/Source/fs_dev.c ****         p_info->SecSize = 0u;
1252:rtos/uC-FS/Source/fs_dev.c ****     }
1253:rtos/uC-FS/Source/fs_dev.c **** 
1254:rtos/uC-FS/Source/fs_dev.c ****     FSDev_ReleaseUnlock(p_dev);
1255:rtos/uC-FS/Source/fs_dev.c **** }
1256:rtos/uC-FS/Source/fs_dev.c **** 
1257:rtos/uC-FS/Source/fs_dev.c **** 
1258:rtos/uC-FS/Source/fs_dev.c **** /*
1259:rtos/uC-FS/Source/fs_dev.c **** ***************************************************************************************************
1260:rtos/uC-FS/Source/fs_dev.c **** *                                               FSDev_Rd()
1261:rtos/uC-FS/Source/fs_dev.c **** *
1262:rtos/uC-FS/Source/fs_dev.c **** * Description : Read data from device sector(s).
1263:rtos/uC-FS/Source/fs_dev.c **** *
1264:rtos/uC-FS/Source/fs_dev.c **** * Argument(s) : name_dev    Device name.
1265:rtos/uC-FS/Source/fs_dev.c **** *
1266:rtos/uC-FS/Source/fs_dev.c **** *               p_dest      Pointer to destination buffer.
1267:rtos/uC-FS/Source/fs_dev.c **** *
1268:rtos/uC-FS/Source/fs_dev.c **** *               start       Start sector of read.
1269:rtos/uC-FS/Source/fs_dev.c **** *               -----       Argument checked in 'FSDev_RdLocked()'.
1270:rtos/uC-FS/Source/fs_dev.c **** *
1271:rtos/uC-FS/Source/fs_dev.c **** *               cnt         Number of sectors to read.
1272:rtos/uC-FS/Source/fs_dev.c **** *               ---         Argument checked in 'FSDev_RdLocked()'.
1273:rtos/uC-FS/Source/fs_dev.c **** *
1274:rtos/uC-FS/Source/fs_dev.c **** *               p_err       Pointer to variable that will receive the return error code from this f
1275:rtos/uC-FS/Source/fs_dev.c **** *
1276:rtos/uC-FS/Source/fs_dev.c **** *                               FS_ERR_NONE                    Sector(s) read.
1277:rtos/uC-FS/Source/fs_dev.c **** *                               FS_ERR_NAME_NULL               Argument 'name_dev' passed a NULL po
1278:rtos/uC-FS/Source/fs_dev.c **** *                               FS_ERR_NULL_PTR                Argument 'p_dest' passed a NULL poin
1279:rtos/uC-FS/Source/fs_dev.c **** *
1280:rtos/uC-FS/Source/fs_dev.c **** *                                                              --- RETURNED BY FSDev_AcquireLockChk
1281:rtos/uC-FS/Source/fs_dev.c **** *                               FS_ERR_DEV_NOT_OPEN            Device is not open.
1282:rtos/uC-FS/Source/fs_dev.c **** *                               FS_ERR_DEV_NOT_PRESENT         Device is not present.
1283:rtos/uC-FS/Source/fs_dev.c **** *                               FS_ERR_DEV_INVALID_LOW_FMT     Device needs to be low-level formatt
1284:rtos/uC-FS/Source/fs_dev.c **** *
ARM GAS  /tmp/cccHmdnc.s 			page 24


1285:rtos/uC-FS/Source/fs_dev.c **** *                                                              ------ RETURNED BY FSDev_RdLocked() 
1286:rtos/uC-FS/Source/fs_dev.c **** *                               FS_ERR_DEV_INVALID_SEC_NBR     Sector start or count invalid.
1287:rtos/uC-FS/Source/fs_dev.c **** *                               FS_ERR_DEV_IO                  Device I/O error.
1288:rtos/uC-FS/Source/fs_dev.c **** *                               FS_ERR_DEV_TIMEOUT             Device timeout error.
1289:rtos/uC-FS/Source/fs_dev.c **** *
1290:rtos/uC-FS/Source/fs_dev.c **** * Return(s)   : none.
1291:rtos/uC-FS/Source/fs_dev.c **** *
1292:rtos/uC-FS/Source/fs_dev.c **** * Note(s)     : (1) Device state change will result from device I/O, not present or timeout error.
1293:rtos/uC-FS/Source/fs_dev.c **** *
1294:rtos/uC-FS/Source/fs_dev.c **** *                   (a) Errors resulting from device access are handled in 'FSDev_RdLocked()'.
1295:rtos/uC-FS/Source/fs_dev.c **** ***************************************************************************************************
1296:rtos/uC-FS/Source/fs_dev.c **** */
1297:rtos/uC-FS/Source/fs_dev.c **** 
1298:rtos/uC-FS/Source/fs_dev.c **** void  FSDev_Rd (CPU_CHAR    *name_dev,
1299:rtos/uC-FS/Source/fs_dev.c ****                 void        *p_dest,
1300:rtos/uC-FS/Source/fs_dev.c ****                 FS_SEC_NBR   start,
1301:rtos/uC-FS/Source/fs_dev.c ****                 FS_SEC_QTY   cnt,
1302:rtos/uC-FS/Source/fs_dev.c ****                 FS_ERR      *p_err)
1303:rtos/uC-FS/Source/fs_dev.c **** {
1304:rtos/uC-FS/Source/fs_dev.c ****     FS_DEV  *p_dev;
1305:rtos/uC-FS/Source/fs_dev.c **** 
1306:rtos/uC-FS/Source/fs_dev.c **** 
1307:rtos/uC-FS/Source/fs_dev.c **** 
1308:rtos/uC-FS/Source/fs_dev.c **** #if (FS_CFG_ERR_ARG_CHK_EXT_EN == DEF_ENABLED)                  /* ------------------- VALIDATE ARG
1309:rtos/uC-FS/Source/fs_dev.c ****     if (p_err == (FS_ERR *)0) {                                 /* Validate error ptr.             
1310:rtos/uC-FS/Source/fs_dev.c ****         CPU_SW_EXCEPTION(;);
1311:rtos/uC-FS/Source/fs_dev.c ****     }
1312:rtos/uC-FS/Source/fs_dev.c ****     if (name_dev == (CPU_CHAR *)0) {                            /* Validate name ptr.              
1313:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_NAME_NULL;
1314:rtos/uC-FS/Source/fs_dev.c ****         return;
1315:rtos/uC-FS/Source/fs_dev.c ****     }
1316:rtos/uC-FS/Source/fs_dev.c ****     if (p_dest == (void *)0) {                                  /* Validate dest ptr.              
1317:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_NULL_PTR;
1318:rtos/uC-FS/Source/fs_dev.c ****         return;
1319:rtos/uC-FS/Source/fs_dev.c ****     }
1320:rtos/uC-FS/Source/fs_dev.c **** #endif
1321:rtos/uC-FS/Source/fs_dev.c **** 
1322:rtos/uC-FS/Source/fs_dev.c **** 
1323:rtos/uC-FS/Source/fs_dev.c **** 
1324:rtos/uC-FS/Source/fs_dev.c ****                                                                 /* ----------------- ACQUIRE DEV LO
1325:rtos/uC-FS/Source/fs_dev.c ****     p_dev = FSDev_AcquireLockChk(name_dev, p_err);
1326:rtos/uC-FS/Source/fs_dev.c ****     (void)p_err;                                               /* Err ignored. Ret val chk'd instea
1327:rtos/uC-FS/Source/fs_dev.c ****     if (p_dev == (FS_DEV *)0) {                                 /* Rtn err if dev not found.       
1328:rtos/uC-FS/Source/fs_dev.c ****         return;
1329:rtos/uC-FS/Source/fs_dev.c ****     }
1330:rtos/uC-FS/Source/fs_dev.c **** 
1331:rtos/uC-FS/Source/fs_dev.c **** 
1332:rtos/uC-FS/Source/fs_dev.c **** 
1333:rtos/uC-FS/Source/fs_dev.c ****                                                                 /* ---------------------- RD DEV --
1334:rtos/uC-FS/Source/fs_dev.c ****     FSDev_RdLocked(p_dev, p_dest, start, cnt, p_err);
1335:rtos/uC-FS/Source/fs_dev.c **** 
1336:rtos/uC-FS/Source/fs_dev.c ****                                                                 /* ----------------- RELEASE DEV LO
1337:rtos/uC-FS/Source/fs_dev.c ****     FSDev_ReleaseUnlock(p_dev);
1338:rtos/uC-FS/Source/fs_dev.c **** }
1339:rtos/uC-FS/Source/fs_dev.c **** 
1340:rtos/uC-FS/Source/fs_dev.c **** 
1341:rtos/uC-FS/Source/fs_dev.c **** /*
ARM GAS  /tmp/cccHmdnc.s 			page 25


1342:rtos/uC-FS/Source/fs_dev.c **** ***************************************************************************************************
1343:rtos/uC-FS/Source/fs_dev.c **** *                                             FSDev_Refresh()
1344:rtos/uC-FS/Source/fs_dev.c **** *
1345:rtos/uC-FS/Source/fs_dev.c **** * Description : Refresh a device.
1346:rtos/uC-FS/Source/fs_dev.c **** *
1347:rtos/uC-FS/Source/fs_dev.c **** * Argument(s) : name_dev    Device name.
1348:rtos/uC-FS/Source/fs_dev.c **** *
1349:rtos/uC-FS/Source/fs_dev.c **** *               p_err       Pointer to variable that will receive the return error code from this f
1350:rtos/uC-FS/Source/fs_dev.c **** *
1351:rtos/uC-FS/Source/fs_dev.c **** *                               FS_ERR_NONE                    Device refreshed.
1352:rtos/uC-FS/Source/fs_dev.c **** *                               FS_ERR_NAME_NULL               Argument 'name_dev' passed a NULL po
1353:rtos/uC-FS/Source/fs_dev.c **** *                               FS_ERR_DEV_NOT_OPEN            Device is not open.
1354:rtos/uC-FS/Source/fs_dev.c **** *                               FS_ERR_DEV_VOL_OPEN            Volume open on device.
1355:rtos/uC-FS/Source/fs_dev.c **** *
1356:rtos/uC-FS/Source/fs_dev.c **** *                                                              ---------- FSDev_RefreshLocked() ---
1357:rtos/uC-FS/Source/fs_dev.c **** *                               FS_ERR_DEV_INVALID_SEC_SIZE    Invalid device sector size.
1358:rtos/uC-FS/Source/fs_dev.c **** *                               FS_ERR_DEV_INVALID_SIZE        Invalid device size.
1359:rtos/uC-FS/Source/fs_dev.c **** *                               FS_ERR_DEV_UNKNOWN             Unknown device error.
1360:rtos/uC-FS/Source/fs_dev.c **** *                               FS_ERR_DEV_INVALID_UNIT_NBR    Device unit number is invalid.
1361:rtos/uC-FS/Source/fs_dev.c **** *                               FS_ERR_DEV_IO                  Device I/O error.
1362:rtos/uC-FS/Source/fs_dev.c **** *                               FS_ERR_DEV_NOT_PRESENT         Device is not present.
1363:rtos/uC-FS/Source/fs_dev.c **** *                               FS_ERR_DEV_TIMEOUT             Device timeout.
1364:rtos/uC-FS/Source/fs_dev.c **** *
1365:rtos/uC-FS/Source/fs_dev.c **** * Return(s)   : DEF_YES, if device has     changed.
1366:rtos/uC-FS/Source/fs_dev.c **** *               DEF_NO,  if device has NOT changed.
1367:rtos/uC-FS/Source/fs_dev.c **** *
1368:rtos/uC-FS/Source/fs_dev.c **** * Note(s)     : (1) If device has changed, all volumes open on the device must be refreshed & all f
1369:rtos/uC-FS/Source/fs_dev.c **** *                   closed and reopened.
1370:rtos/uC-FS/Source/fs_dev.c **** *
1371:rtos/uC-FS/Source/fs_dev.c **** *               (2) Device state change will result from device I/O, not present or timeout error.
1372:rtos/uC-FS/Source/fs_dev.c **** *
1373:rtos/uC-FS/Source/fs_dev.c **** *                   (a) Errors resulting from device access are handled in 'FSDev_RefreshLocked()'.
1374:rtos/uC-FS/Source/fs_dev.c **** ***************************************************************************************************
1375:rtos/uC-FS/Source/fs_dev.c **** */
1376:rtos/uC-FS/Source/fs_dev.c **** 
1377:rtos/uC-FS/Source/fs_dev.c **** CPU_BOOLEAN  FSDev_Refresh (CPU_CHAR  *name_dev,
1378:rtos/uC-FS/Source/fs_dev.c ****                             FS_ERR    *p_err)
1379:rtos/uC-FS/Source/fs_dev.c **** {
1380:rtos/uC-FS/Source/fs_dev.c ****     FS_DEV       *p_dev;
1381:rtos/uC-FS/Source/fs_dev.c ****     CPU_BOOLEAN   chngd;
1382:rtos/uC-FS/Source/fs_dev.c ****     CPU_BOOLEAN   lock_success;
1383:rtos/uC-FS/Source/fs_dev.c **** 
1384:rtos/uC-FS/Source/fs_dev.c **** 
1385:rtos/uC-FS/Source/fs_dev.c **** #if (FS_CFG_ERR_ARG_CHK_EXT_EN == DEF_ENABLED)                  /* ------------------- VALIDATE PTR
1386:rtos/uC-FS/Source/fs_dev.c ****     if (p_err == (FS_ERR *)0) {                                 /* Validate error ptr.             
1387:rtos/uC-FS/Source/fs_dev.c ****         CPU_SW_EXCEPTION(DEF_NO);
1388:rtos/uC-FS/Source/fs_dev.c ****     }
1389:rtos/uC-FS/Source/fs_dev.c ****     if (name_dev == (CPU_CHAR *)0) {
1390:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_NAME_NULL;
1391:rtos/uC-FS/Source/fs_dev.c ****         return (DEF_NO);
1392:rtos/uC-FS/Source/fs_dev.c ****     }
1393:rtos/uC-FS/Source/fs_dev.c **** #endif
1394:rtos/uC-FS/Source/fs_dev.c **** 
1395:rtos/uC-FS/Source/fs_dev.c **** 
1396:rtos/uC-FS/Source/fs_dev.c **** 
1397:rtos/uC-FS/Source/fs_dev.c ****                                                                 /* ----------------- ACQUIRE DEV LO
1398:rtos/uC-FS/Source/fs_dev.c ****     p_dev = FSDev_Acquire(name_dev);
ARM GAS  /tmp/cccHmdnc.s 			page 26


1399:rtos/uC-FS/Source/fs_dev.c ****     if (p_dev == (FS_DEV *)0) {                                 /* Rtn err if dev not found.       
1400:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_DEV_NOT_OPEN;
1401:rtos/uC-FS/Source/fs_dev.c ****         return (DEF_NO);
1402:rtos/uC-FS/Source/fs_dev.c ****     }
1403:rtos/uC-FS/Source/fs_dev.c **** 
1404:rtos/uC-FS/Source/fs_dev.c ****     lock_success = FSDev_Lock(p_dev);
1405:rtos/uC-FS/Source/fs_dev.c ****     if (lock_success != DEF_YES) {
1406:rtos/uC-FS/Source/fs_dev.c ****         FSDev_Release(p_dev);
1407:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_OS_LOCK;
1408:rtos/uC-FS/Source/fs_dev.c ****         return (DEF_NO);
1409:rtos/uC-FS/Source/fs_dev.c ****     }
1410:rtos/uC-FS/Source/fs_dev.c **** 
1411:rtos/uC-FS/Source/fs_dev.c **** 
1412:rtos/uC-FS/Source/fs_dev.c **** 
1413:rtos/uC-FS/Source/fs_dev.c ****                                                                 /* ------------------- VALIDATE DEV
1414:rtos/uC-FS/Source/fs_dev.c ****     switch (p_dev->State) {
1415:rtos/uC-FS/Source/fs_dev.c ****         case FS_DEV_STATE_OPEN:
1416:rtos/uC-FS/Source/fs_dev.c ****         case FS_DEV_STATE_PRESENT:
1417:rtos/uC-FS/Source/fs_dev.c ****         case FS_DEV_STATE_LOW_FMT_VALID:
1418:rtos/uC-FS/Source/fs_dev.c ****              break;
1419:rtos/uC-FS/Source/fs_dev.c **** 
1420:rtos/uC-FS/Source/fs_dev.c **** 
1421:rtos/uC-FS/Source/fs_dev.c ****         case FS_DEV_STATE_CLOSED:
1422:rtos/uC-FS/Source/fs_dev.c ****         case FS_DEV_STATE_CLOSING:
1423:rtos/uC-FS/Source/fs_dev.c ****         case FS_DEV_STATE_OPENING:
1424:rtos/uC-FS/Source/fs_dev.c ****         default:
1425:rtos/uC-FS/Source/fs_dev.c ****              FSDev_ReleaseUnlock(p_dev);
1426:rtos/uC-FS/Source/fs_dev.c ****             *p_err = FS_ERR_DEV_NOT_OPEN;
1427:rtos/uC-FS/Source/fs_dev.c ****              return (DEF_NO);
1428:rtos/uC-FS/Source/fs_dev.c ****     }
1429:rtos/uC-FS/Source/fs_dev.c **** 
1430:rtos/uC-FS/Source/fs_dev.c **** 
1431:rtos/uC-FS/Source/fs_dev.c **** 
1432:rtos/uC-FS/Source/fs_dev.c ****                                                                 /* -------------------- REFRESH DEV
1433:rtos/uC-FS/Source/fs_dev.c ****     chngd = FSDev_RefreshLocked(p_dev, p_err);
1434:rtos/uC-FS/Source/fs_dev.c **** 
1435:rtos/uC-FS/Source/fs_dev.c ****                                                                 /* ----------------- RELEASE DEV LO
1436:rtos/uC-FS/Source/fs_dev.c ****     FSDev_ReleaseUnlock(p_dev);
1437:rtos/uC-FS/Source/fs_dev.c **** 
1438:rtos/uC-FS/Source/fs_dev.c ****     return (chngd);
1439:rtos/uC-FS/Source/fs_dev.c **** }
1440:rtos/uC-FS/Source/fs_dev.c **** 
1441:rtos/uC-FS/Source/fs_dev.c **** 
1442:rtos/uC-FS/Source/fs_dev.c **** /*
1443:rtos/uC-FS/Source/fs_dev.c **** ***************************************************************************************************
1444:rtos/uC-FS/Source/fs_dev.c **** *                                              FSDev_Sync()
1445:rtos/uC-FS/Source/fs_dev.c **** *
1446:rtos/uC-FS/Source/fs_dev.c **** * Description : Synchronize a device. Performs any pending operation that would otherwise prevent t
1447:rtos/uC-FS/Source/fs_dev.c **** *               device from being remounted in the current state.
1448:rtos/uC-FS/Source/fs_dev.c **** *
1449:rtos/uC-FS/Source/fs_dev.c **** * Argument(s) : name_dev    Device name.
1450:rtos/uC-FS/Source/fs_dev.c **** *
1451:rtos/uC-FS/Source/fs_dev.c **** *               p_err       Pointer to variable that will receive the return error code from this f
1452:rtos/uC-FS/Source/fs_dev.c **** *
1453:rtos/uC-FS/Source/fs_dev.c **** *                               TBD
1454:rtos/uC-FS/Source/fs_dev.c **** *
1455:rtos/uC-FS/Source/fs_dev.c **** * Return(s)   : none.
ARM GAS  /tmp/cccHmdnc.s 			page 27


1456:rtos/uC-FS/Source/fs_dev.c **** *
1457:rtos/uC-FS/Source/fs_dev.c **** * Note(s)     : (1) Doesn't flush volume caches or file buffers. Those must be flushed prior to cal
1458:rtos/uC-FS/Source/fs_dev.c **** *                   this function to ensure a volume is fully synchronized.
1459:rtos/uC-FS/Source/fs_dev.c **** ***************************************************************************************************
1460:rtos/uC-FS/Source/fs_dev.c **** */
1461:rtos/uC-FS/Source/fs_dev.c **** 
1462:rtos/uC-FS/Source/fs_dev.c **** #if (FS_CFG_RD_ONLY_EN == DEF_DISABLED)
1463:rtos/uC-FS/Source/fs_dev.c **** void  FSDev_Sync (CPU_CHAR  *name_dev,
1464:rtos/uC-FS/Source/fs_dev.c ****                   FS_ERR    *p_err)
1465:rtos/uC-FS/Source/fs_dev.c **** {
1466:rtos/uC-FS/Source/fs_dev.c ****     FS_DEV       *p_dev;
1467:rtos/uC-FS/Source/fs_dev.c ****     CPU_BOOLEAN   lock_success;
1468:rtos/uC-FS/Source/fs_dev.c **** 
1469:rtos/uC-FS/Source/fs_dev.c **** 
1470:rtos/uC-FS/Source/fs_dev.c **** #if (FS_CFG_ERR_ARG_CHK_EXT_EN == DEF_ENABLED)                  /* ------------------- VALIDATE PTR
1471:rtos/uC-FS/Source/fs_dev.c ****     if (p_err == (FS_ERR *)0) {                                 /* Validate error ptr.             
1472:rtos/uC-FS/Source/fs_dev.c ****         CPU_SW_EXCEPTION(DEF_NO);
1473:rtos/uC-FS/Source/fs_dev.c ****     }
1474:rtos/uC-FS/Source/fs_dev.c ****     if (name_dev == (CPU_CHAR *)0) {
1475:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_NAME_NULL;
1476:rtos/uC-FS/Source/fs_dev.c ****         return;
1477:rtos/uC-FS/Source/fs_dev.c ****     }
1478:rtos/uC-FS/Source/fs_dev.c **** #endif
1479:rtos/uC-FS/Source/fs_dev.c **** 
1480:rtos/uC-FS/Source/fs_dev.c **** 
1481:rtos/uC-FS/Source/fs_dev.c **** 
1482:rtos/uC-FS/Source/fs_dev.c ****                                                                 /* ----------------- ACQUIRE DEV LO
1483:rtos/uC-FS/Source/fs_dev.c ****     p_dev = FSDev_Acquire(name_dev);
1484:rtos/uC-FS/Source/fs_dev.c ****     if (p_dev == (FS_DEV *)0) {                                 /* Rtn err if dev not found.       
1485:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_DEV_NOT_OPEN;
1486:rtos/uC-FS/Source/fs_dev.c ****         return;
1487:rtos/uC-FS/Source/fs_dev.c ****     }
1488:rtos/uC-FS/Source/fs_dev.c **** 
1489:rtos/uC-FS/Source/fs_dev.c ****     lock_success = FSDev_Lock(p_dev);
1490:rtos/uC-FS/Source/fs_dev.c ****     if (lock_success != DEF_YES) {
1491:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_OS_LOCK;
1492:rtos/uC-FS/Source/fs_dev.c ****         return;
1493:rtos/uC-FS/Source/fs_dev.c ****     }
1494:rtos/uC-FS/Source/fs_dev.c **** 
1495:rtos/uC-FS/Source/fs_dev.c **** 
1496:rtos/uC-FS/Source/fs_dev.c **** 
1497:rtos/uC-FS/Source/fs_dev.c ****                                                                 /* ------------------- VALIDATE DEV
1498:rtos/uC-FS/Source/fs_dev.c ****     switch (p_dev->State) {
1499:rtos/uC-FS/Source/fs_dev.c ****         case FS_DEV_STATE_OPEN:
1500:rtos/uC-FS/Source/fs_dev.c ****         case FS_DEV_STATE_PRESENT:
1501:rtos/uC-FS/Source/fs_dev.c ****         case FS_DEV_STATE_LOW_FMT_VALID:
1502:rtos/uC-FS/Source/fs_dev.c ****              break;
1503:rtos/uC-FS/Source/fs_dev.c **** 
1504:rtos/uC-FS/Source/fs_dev.c **** 
1505:rtos/uC-FS/Source/fs_dev.c ****         case FS_DEV_STATE_CLOSED:
1506:rtos/uC-FS/Source/fs_dev.c ****         case FS_DEV_STATE_CLOSING:
1507:rtos/uC-FS/Source/fs_dev.c ****         case FS_DEV_STATE_OPENING:
1508:rtos/uC-FS/Source/fs_dev.c ****         default:
1509:rtos/uC-FS/Source/fs_dev.c ****              FSDev_ReleaseUnlock(p_dev);
1510:rtos/uC-FS/Source/fs_dev.c ****             *p_err = FS_ERR_DEV_NOT_OPEN;
1511:rtos/uC-FS/Source/fs_dev.c ****              return;
1512:rtos/uC-FS/Source/fs_dev.c ****     }
ARM GAS  /tmp/cccHmdnc.s 			page 28


1513:rtos/uC-FS/Source/fs_dev.c **** 
1514:rtos/uC-FS/Source/fs_dev.c **** 
1515:rtos/uC-FS/Source/fs_dev.c **** 
1516:rtos/uC-FS/Source/fs_dev.c ****                                                                 /* --------------------- SYNC DEV -
1517:rtos/uC-FS/Source/fs_dev.c ****     FSDev_SyncLocked(p_dev, p_err);
1518:rtos/uC-FS/Source/fs_dev.c **** 
1519:rtos/uC-FS/Source/fs_dev.c ****                                                                 /* ----------------- RELEASE DEV LO
1520:rtos/uC-FS/Source/fs_dev.c ****     FSDev_ReleaseUnlock(p_dev);
1521:rtos/uC-FS/Source/fs_dev.c **** }
1522:rtos/uC-FS/Source/fs_dev.c **** #endif
1523:rtos/uC-FS/Source/fs_dev.c **** 
1524:rtos/uC-FS/Source/fs_dev.c **** 
1525:rtos/uC-FS/Source/fs_dev.c **** /*
1526:rtos/uC-FS/Source/fs_dev.c **** ***************************************************************************************************
1527:rtos/uC-FS/Source/fs_dev.c **** *                                               FSDev_Wr()
1528:rtos/uC-FS/Source/fs_dev.c **** *
1529:rtos/uC-FS/Source/fs_dev.c **** * Description : Write data to device sector(s).
1530:rtos/uC-FS/Source/fs_dev.c **** *
1531:rtos/uC-FS/Source/fs_dev.c **** * Argument(s) : name_dev    Device name.
1532:rtos/uC-FS/Source/fs_dev.c **** *
1533:rtos/uC-FS/Source/fs_dev.c **** *               p_src       Pointer to source buffer.
1534:rtos/uC-FS/Source/fs_dev.c **** *
1535:rtos/uC-FS/Source/fs_dev.c **** *               start       Start sector of write.
1536:rtos/uC-FS/Source/fs_dev.c **** *               -----       Argument checked in FSDev_WrLocked().
1537:rtos/uC-FS/Source/fs_dev.c **** *
1538:rtos/uC-FS/Source/fs_dev.c **** *               cnt         Number of sectors to write.
1539:rtos/uC-FS/Source/fs_dev.c **** *               ---         Argument checked in FSDev_WrLocked().
1540:rtos/uC-FS/Source/fs_dev.c **** *
1541:rtos/uC-FS/Source/fs_dev.c **** *               p_err       Pointer to variable that will receive the return error code from this f
1542:rtos/uC-FS/Source/fs_dev.c **** *
1543:rtos/uC-FS/Source/fs_dev.c **** *                               FS_ERR_NONE                    Sector(s) written.
1544:rtos/uC-FS/Source/fs_dev.c **** *                               FS_ERR_NAME_NULL               Argument 'name_dev' passed a NULL po
1545:rtos/uC-FS/Source/fs_dev.c **** *                               FS_ERR_NULL_PTR                Argument 'p_src' passed a NULL point
1546:rtos/uC-FS/Source/fs_dev.c **** *
1547:rtos/uC-FS/Source/fs_dev.c **** *                                                              --- RETURNED BY FSDev_AcquireLockChk
1548:rtos/uC-FS/Source/fs_dev.c **** *                               FS_ERR_DEV_NOT_OPEN            Device is not open.
1549:rtos/uC-FS/Source/fs_dev.c **** *                               FS_ERR_DEV_NOT_PRESENT         Device is not present.
1550:rtos/uC-FS/Source/fs_dev.c **** *                               FS_ERR_DEV_INVALID_LOW_FMT     Device needs to be low-level formatt
1551:rtos/uC-FS/Source/fs_dev.c **** *
1552:rtos/uC-FS/Source/fs_dev.c **** *                                                              ------ RETURNED BY FSDev_WrLocked() 
1553:rtos/uC-FS/Source/fs_dev.c **** *                               FS_ERR_DEV_INVALID_SEC_NBR     Sector start or count invalid.
1554:rtos/uC-FS/Source/fs_dev.c **** *                               FS_ERR_DEV_IO                  Device I/O error.
1555:rtos/uC-FS/Source/fs_dev.c **** *                               FS_ERR_DEV_TIMEOUT             Device timeout error.
1556:rtos/uC-FS/Source/fs_dev.c **** *
1557:rtos/uC-FS/Source/fs_dev.c **** * Return(s)   : none.
1558:rtos/uC-FS/Source/fs_dev.c **** *
1559:rtos/uC-FS/Source/fs_dev.c **** * Note(s)     : (1) Device state change will result from device I/O, not present or timeout error.
1560:rtos/uC-FS/Source/fs_dev.c **** *
1561:rtos/uC-FS/Source/fs_dev.c **** *                   (a) Errors resulting from device access are handled in 'FSDev_WrLocked()'.
1562:rtos/uC-FS/Source/fs_dev.c **** ***************************************************************************************************
1563:rtos/uC-FS/Source/fs_dev.c **** */
1564:rtos/uC-FS/Source/fs_dev.c **** 
1565:rtos/uC-FS/Source/fs_dev.c **** #if (FS_CFG_RD_ONLY_EN == DEF_DISABLED)
1566:rtos/uC-FS/Source/fs_dev.c **** void  FSDev_Wr (CPU_CHAR    *name_dev,
1567:rtos/uC-FS/Source/fs_dev.c ****                 void        *p_src,
1568:rtos/uC-FS/Source/fs_dev.c ****                 FS_SEC_NBR   start,
1569:rtos/uC-FS/Source/fs_dev.c ****                 FS_SEC_QTY   cnt,
ARM GAS  /tmp/cccHmdnc.s 			page 29


1570:rtos/uC-FS/Source/fs_dev.c ****                 FS_ERR      *p_err)
1571:rtos/uC-FS/Source/fs_dev.c **** {
1572:rtos/uC-FS/Source/fs_dev.c ****     FS_DEV  *p_dev;
1573:rtos/uC-FS/Source/fs_dev.c **** 
1574:rtos/uC-FS/Source/fs_dev.c **** 
1575:rtos/uC-FS/Source/fs_dev.c **** 
1576:rtos/uC-FS/Source/fs_dev.c **** #if (FS_CFG_ERR_ARG_CHK_EXT_EN == DEF_ENABLED)                  /* ------------------- VALIDATE ARG
1577:rtos/uC-FS/Source/fs_dev.c ****     if (p_err == (FS_ERR *)0) {                                 /* Validate error ptr.             
1578:rtos/uC-FS/Source/fs_dev.c ****         CPU_SW_EXCEPTION(;);
1579:rtos/uC-FS/Source/fs_dev.c ****     }
1580:rtos/uC-FS/Source/fs_dev.c ****     if (name_dev == (CPU_CHAR *)0) {                            /* Validate name ptr.              
1581:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_NAME_NULL;
1582:rtos/uC-FS/Source/fs_dev.c ****         return;
1583:rtos/uC-FS/Source/fs_dev.c ****     }
1584:rtos/uC-FS/Source/fs_dev.c ****     if (p_src == (void *)0) {                                   /* Validate src ptr.               
1585:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_NULL_PTR;
1586:rtos/uC-FS/Source/fs_dev.c ****         return;
1587:rtos/uC-FS/Source/fs_dev.c ****     }
1588:rtos/uC-FS/Source/fs_dev.c **** #endif
1589:rtos/uC-FS/Source/fs_dev.c **** 
1590:rtos/uC-FS/Source/fs_dev.c **** 
1591:rtos/uC-FS/Source/fs_dev.c **** 
1592:rtos/uC-FS/Source/fs_dev.c ****                                                                 /* ----------------- ACQUIRE DEV LO
1593:rtos/uC-FS/Source/fs_dev.c ****     p_dev = FSDev_AcquireLockChk(name_dev, p_err);
1594:rtos/uC-FS/Source/fs_dev.c ****     (void)p_err;                                               /* Err ignored. Ret val chk'd instea
1595:rtos/uC-FS/Source/fs_dev.c ****     if (p_dev == (FS_DEV *)0) {                                 /* Rtn err if dev not found.       
1596:rtos/uC-FS/Source/fs_dev.c ****         return;
1597:rtos/uC-FS/Source/fs_dev.c ****     }
1598:rtos/uC-FS/Source/fs_dev.c **** 
1599:rtos/uC-FS/Source/fs_dev.c **** 
1600:rtos/uC-FS/Source/fs_dev.c **** 
1601:rtos/uC-FS/Source/fs_dev.c ****                                                                 /* ---------------------- WR DEV --
1602:rtos/uC-FS/Source/fs_dev.c ****     FSDev_WrLocked(p_dev, p_src, start, cnt, p_err);
1603:rtos/uC-FS/Source/fs_dev.c **** 
1604:rtos/uC-FS/Source/fs_dev.c ****                                                                 /* ----------------- RELEASE DEV LO
1605:rtos/uC-FS/Source/fs_dev.c ****     FSDev_ReleaseUnlock(p_dev);
1606:rtos/uC-FS/Source/fs_dev.c **** }
1607:rtos/uC-FS/Source/fs_dev.c **** #endif
1608:rtos/uC-FS/Source/fs_dev.c **** 
1609:rtos/uC-FS/Source/fs_dev.c **** 
1610:rtos/uC-FS/Source/fs_dev.c **** /*
1611:rtos/uC-FS/Source/fs_dev.c **** ***************************************************************************************************
1612:rtos/uC-FS/Source/fs_dev.c **** *                                           FSDev_Invalidate()
1613:rtos/uC-FS/Source/fs_dev.c **** *
1614:rtos/uC-FS/Source/fs_dev.c **** * Description : Invalidate files and volumes opened on the device.
1615:rtos/uC-FS/Source/fs_dev.c **** *
1616:rtos/uC-FS/Source/fs_dev.c **** * Argument(s) : name_dev    Device name.
1617:rtos/uC-FS/Source/fs_dev.c **** *
1618:rtos/uC-FS/Source/fs_dev.c **** *               p_err       Pointer to variable that will receive the return error code from this f
1619:rtos/uC-FS/Source/fs_dev.c **** *
1620:rtos/uC-FS/Source/fs_dev.c **** *                               FS_ERR_NONE                    Sector(s) written.
1621:rtos/uC-FS/Source/fs_dev.c **** *                               FS_ERR_NAME_NULL               Argument 'name_dev' passed a NULL po
1622:rtos/uC-FS/Source/fs_dev.c **** *                               FS_ERR_NULL_PTR                Argument 'p_src' passed a NULL point
1623:rtos/uC-FS/Source/fs_dev.c **** *
1624:rtos/uC-FS/Source/fs_dev.c **** *                                                              --- RETURNED BY FSDev_AcquireLockChk
1625:rtos/uC-FS/Source/fs_dev.c **** *                               FS_ERR_DEV_NOT_OPEN            Device is not open.
1626:rtos/uC-FS/Source/fs_dev.c **** *                               FS_ERR_DEV_NOT_PRESENT         Device is not present.
ARM GAS  /tmp/cccHmdnc.s 			page 30


1627:rtos/uC-FS/Source/fs_dev.c **** *                               FS_ERR_DEV_INVALID_LOW_FMT     Device needs to be low-level formatt
1628:rtos/uC-FS/Source/fs_dev.c **** *
1629:rtos/uC-FS/Source/fs_dev.c **** * Return(s)   : none.
1630:rtos/uC-FS/Source/fs_dev.c **** *
1631:rtos/uC-FS/Source/fs_dev.c **** * Note(s)     : (1) Operations performed after invalidation on previously opened files and volumes 
1632:rtos/uC-FS/Source/fs_dev.c **** *                   fail with error FS_ERR_DEV_CHNGD.
1633:rtos/uC-FS/Source/fs_dev.c **** *
1634:rtos/uC-FS/Source/fs_dev.c **** *               (2) Invalidation will also automatically happen if a removable media is changed.
1635:rtos/uC-FS/Source/fs_dev.c **** *
1636:rtos/uC-FS/Source/fs_dev.c **** ***************************************************************************************************
1637:rtos/uC-FS/Source/fs_dev.c **** */
1638:rtos/uC-FS/Source/fs_dev.c **** 
1639:rtos/uC-FS/Source/fs_dev.c **** void FSDev_Invalidate (CPU_CHAR  *name_dev,
1640:rtos/uC-FS/Source/fs_dev.c ****                        FS_ERR    *p_err)
1641:rtos/uC-FS/Source/fs_dev.c **** {
1642:rtos/uC-FS/Source/fs_dev.c ****     FS_DEV  *p_dev;
1643:rtos/uC-FS/Source/fs_dev.c **** 
1644:rtos/uC-FS/Source/fs_dev.c **** 
1645:rtos/uC-FS/Source/fs_dev.c **** #if (FS_CFG_ERR_ARG_CHK_EXT_EN == DEF_ENABLED)                  /* ------------------- VALIDATE ARG
1646:rtos/uC-FS/Source/fs_dev.c ****     if (p_err == (FS_ERR *)0) {                                 /* Validate error ptr.             
1647:rtos/uC-FS/Source/fs_dev.c ****         CPU_SW_EXCEPTION(;);
1648:rtos/uC-FS/Source/fs_dev.c ****     }
1649:rtos/uC-FS/Source/fs_dev.c ****     if (name_dev == (CPU_CHAR *)0) {                            /* Validate name ptr.              
1650:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_NAME_NULL;
1651:rtos/uC-FS/Source/fs_dev.c ****         return;
1652:rtos/uC-FS/Source/fs_dev.c ****     }
1653:rtos/uC-FS/Source/fs_dev.c **** #endif
1654:rtos/uC-FS/Source/fs_dev.c **** 
1655:rtos/uC-FS/Source/fs_dev.c **** 
1656:rtos/uC-FS/Source/fs_dev.c ****                                                                 /* ----------------- ACQUIRE DEV LO
1657:rtos/uC-FS/Source/fs_dev.c ****     p_dev = FSDev_AcquireLockChk(name_dev, p_err);
1658:rtos/uC-FS/Source/fs_dev.c ****     (void)p_err;                                               /* Err ignored. Ret val chk'd instea
1659:rtos/uC-FS/Source/fs_dev.c ****     if (p_dev == DEF_NULL) {                                    /* Rtn err if dev not found.       
1660:rtos/uC-FS/Source/fs_dev.c ****         if(*p_err == FS_ERR_NONE) {
1661:rtos/uC-FS/Source/fs_dev.c ****            *p_err = FS_ERR_DEV;
1662:rtos/uC-FS/Source/fs_dev.c ****         }
1663:rtos/uC-FS/Source/fs_dev.c ****         return;
1664:rtos/uC-FS/Source/fs_dev.c ****     }
1665:rtos/uC-FS/Source/fs_dev.c ****     *p_err = FS_ERR_NONE;                                       /* Err clr'd if invalidation can be
1666:rtos/uC-FS/Source/fs_dev.c **** 
1667:rtos/uC-FS/Source/fs_dev.c **** 
1668:rtos/uC-FS/Source/fs_dev.c **** 	                                                            /* ----------- INVALIDATE FILES AND VO
1669:rtos/uC-FS/Source/fs_dev.c ****     p_dev->RefreshCnt++;
1670:rtos/uC-FS/Source/fs_dev.c **** 
1671:rtos/uC-FS/Source/fs_dev.c **** 		                                                        /* ----------------- RELEASE DEV LOCK ---
1672:rtos/uC-FS/Source/fs_dev.c ****     FSDev_ReleaseUnlock(p_dev);
1673:rtos/uC-FS/Source/fs_dev.c **** 
1674:rtos/uC-FS/Source/fs_dev.c **** }
1675:rtos/uC-FS/Source/fs_dev.c **** 
1676:rtos/uC-FS/Source/fs_dev.c **** 
1677:rtos/uC-FS/Source/fs_dev.c **** /*
1678:rtos/uC-FS/Source/fs_dev.c **** ***************************************************************************************************
1679:rtos/uC-FS/Source/fs_dev.c **** *                                         FSDev_AccessLock()
1680:rtos/uC-FS/Source/fs_dev.c **** *
1681:rtos/uC-FS/Source/fs_dev.c **** * Description : Acquire global device access lock and block high level uC/FS operations on that dev
1682:rtos/uC-FS/Source/fs_dev.c **** *
1683:rtos/uC-FS/Source/fs_dev.c **** * Argument(s) : name_dev    Device name.
ARM GAS  /tmp/cccHmdnc.s 			page 31


1684:rtos/uC-FS/Source/fs_dev.c **** *
1685:rtos/uC-FS/Source/fs_dev.c **** *               timeout     Time to wait for a lock in milliseconds (See note #2).
1686:rtos/uC-FS/Source/fs_dev.c **** *
1687:rtos/uC-FS/Source/fs_dev.c **** *               p_err       Pointer to variable that will receive the return error code from this f
1688:rtos/uC-FS/Source/fs_dev.c **** *
1689:rtos/uC-FS/Source/fs_dev.c **** *                               FS_ERR_NONE                    Sector(s) written.
1690:rtos/uC-FS/Source/fs_dev.c **** *                               FS_ERR_NAME_NULL               Argument 'name_dev' passed a NULL po
1691:rtos/uC-FS/Source/fs_dev.c **** *                               FS_ERR_DEV_NOT_OPEN            Device is not open.
1692:rtos/uC-FS/Source/fs_dev.c **** *                                                              --- RETURNED BY FS_OS_DevAccessLock(
1693:rtos/uC-FS/Source/fs_dev.c **** *                               FS_ERR_OS_LOCK                 File system device access NOT acquir
1694:rtos/uC-FS/Source/fs_dev.c **** *                               FS_ERR_OS_LOCK_TIMEOUT         File system device access timed out.
1695:rtos/uC-FS/Source/fs_dev.c **** *
1696:rtos/uC-FS/Source/fs_dev.c **** * Return(s)   : none.
1697:rtos/uC-FS/Source/fs_dev.c **** *
1698:rtos/uC-FS/Source/fs_dev.c **** * Note(s)     : (1) Used when the application wants to perform low level device operations without
1699:rtos/uC-FS/Source/fs_dev.c **** *                   interference from other tasks performing high level(FSFile_*) operations.
1700:rtos/uC-FS/Source/fs_dev.c **** *
1701:rtos/uC-FS/Source/fs_dev.c **** *               (2) May be ignored for OS without timeout support.
1702:rtos/uC-FS/Source/fs_dev.c **** *
1703:rtos/uC-FS/Source/fs_dev.c **** ***************************************************************************************************
1704:rtos/uC-FS/Source/fs_dev.c **** */
1705:rtos/uC-FS/Source/fs_dev.c **** 
1706:rtos/uC-FS/Source/fs_dev.c **** void  FSDev_AccessLock (CPU_CHAR   *name_dev,
1707:rtos/uC-FS/Source/fs_dev.c ****                         CPU_INT32U  timeout,
1708:rtos/uC-FS/Source/fs_dev.c ****                         FS_ERR     *p_err)
1709:rtos/uC-FS/Source/fs_dev.c **** {
1710:rtos/uC-FS/Source/fs_dev.c ****     FS_DEV  *p_dev;
1711:rtos/uC-FS/Source/fs_dev.c **** 
1712:rtos/uC-FS/Source/fs_dev.c **** 
1713:rtos/uC-FS/Source/fs_dev.c **** #if (FS_CFG_ERR_ARG_CHK_EXT_EN == DEF_ENABLED)                  /* ------------------- VALIDATE PTR
1714:rtos/uC-FS/Source/fs_dev.c ****     if (p_err == DEF_NULL) {                                    /* Validate error ptr.             
1715:rtos/uC-FS/Source/fs_dev.c ****         CPU_SW_EXCEPTION(DEF_NO);
1716:rtos/uC-FS/Source/fs_dev.c ****     }
1717:rtos/uC-FS/Source/fs_dev.c ****     if (name_dev == DEF_NULL) {
1718:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_NAME_NULL;
1719:rtos/uC-FS/Source/fs_dev.c ****         return;
1720:rtos/uC-FS/Source/fs_dev.c ****     }
1721:rtos/uC-FS/Source/fs_dev.c **** #endif
1722:rtos/uC-FS/Source/fs_dev.c **** 
1723:rtos/uC-FS/Source/fs_dev.c ****    *p_err = FS_ERR_NONE;
1724:rtos/uC-FS/Source/fs_dev.c **** 
1725:rtos/uC-FS/Source/fs_dev.c ****     p_dev = FSDev_Acquire(name_dev);
1726:rtos/uC-FS/Source/fs_dev.c ****     if (p_dev == DEF_NULL) {
1727:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_DEV_NOT_OPEN;
1728:rtos/uC-FS/Source/fs_dev.c ****         return;
1729:rtos/uC-FS/Source/fs_dev.c ****     }
1730:rtos/uC-FS/Source/fs_dev.c **** 
1731:rtos/uC-FS/Source/fs_dev.c ****                                                                 /* -------------- ACQUIRE DEV ACCES
1732:rtos/uC-FS/Source/fs_dev.c ****     FS_OS_DevAccessLock(p_dev->ID, timeout, p_err);
1733:rtos/uC-FS/Source/fs_dev.c ****     if (*p_err != FS_ERR_NONE) {
1734:rtos/uC-FS/Source/fs_dev.c ****         FSDev_Release(p_dev);
1735:rtos/uC-FS/Source/fs_dev.c ****         return;
1736:rtos/uC-FS/Source/fs_dev.c ****     }
1737:rtos/uC-FS/Source/fs_dev.c **** 
1738:rtos/uC-FS/Source/fs_dev.c ****     FSDev_Release(p_dev);
1739:rtos/uC-FS/Source/fs_dev.c **** 
1740:rtos/uC-FS/Source/fs_dev.c ****     return;
ARM GAS  /tmp/cccHmdnc.s 			page 32


1741:rtos/uC-FS/Source/fs_dev.c **** }
1742:rtos/uC-FS/Source/fs_dev.c **** 
1743:rtos/uC-FS/Source/fs_dev.c **** 
1744:rtos/uC-FS/Source/fs_dev.c **** /*
1745:rtos/uC-FS/Source/fs_dev.c **** ***************************************************************************************************
1746:rtos/uC-FS/Source/fs_dev.c **** *                                        FSDev_AccessUnlock()
1747:rtos/uC-FS/Source/fs_dev.c **** *
1748:rtos/uC-FS/Source/fs_dev.c **** * Description : Release device access lock.
1749:rtos/uC-FS/Source/fs_dev.c **** *
1750:rtos/uC-FS/Source/fs_dev.c **** * Argument(s) : name_dev    Device name.
1751:rtos/uC-FS/Source/fs_dev.c **** *
1752:rtos/uC-FS/Source/fs_dev.c **** *               p_err       Pointer to variable that will receive the return error code from this f
1753:rtos/uC-FS/Source/fs_dev.c **** *
1754:rtos/uC-FS/Source/fs_dev.c **** *                               FS_ERR_NONE                    Sector(s) written.
1755:rtos/uC-FS/Source/fs_dev.c **** *                               FS_ERR_NAME_NULL               Argument 'name_dev' passed a NULL po
1756:rtos/uC-FS/Source/fs_dev.c **** *                               FS_ERR_DEV_NOT_OPEN            Device is not open.
1757:rtos/uC-FS/Source/fs_dev.c **** *
1758:rtos/uC-FS/Source/fs_dev.c **** * Return(s)   : none.
1759:rtos/uC-FS/Source/fs_dev.c **** *
1760:rtos/uC-FS/Source/fs_dev.c **** * Note(s)     : none.
1761:rtos/uC-FS/Source/fs_dev.c **** ***************************************************************************************************
1762:rtos/uC-FS/Source/fs_dev.c **** */
1763:rtos/uC-FS/Source/fs_dev.c **** 
1764:rtos/uC-FS/Source/fs_dev.c **** void  FSDev_AccessUnlock (CPU_CHAR  *name_dev,
1765:rtos/uC-FS/Source/fs_dev.c ****                           FS_ERR      *p_err)
1766:rtos/uC-FS/Source/fs_dev.c **** {
1767:rtos/uC-FS/Source/fs_dev.c ****     FS_DEV  *p_dev;
1768:rtos/uC-FS/Source/fs_dev.c **** 
1769:rtos/uC-FS/Source/fs_dev.c **** 
1770:rtos/uC-FS/Source/fs_dev.c **** #if (FS_CFG_ERR_ARG_CHK_EXT_EN == DEF_ENABLED)                  /* ------------------- VALIDATE PTR
1771:rtos/uC-FS/Source/fs_dev.c ****     if (p_err == DEF_NULL) {                                    /* Validate error ptr.             
1772:rtos/uC-FS/Source/fs_dev.c ****         CPU_SW_EXCEPTION(DEF_NO);
1773:rtos/uC-FS/Source/fs_dev.c ****     }
1774:rtos/uC-FS/Source/fs_dev.c ****     if (name_dev == DEF_NULL) {
1775:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_NAME_NULL;
1776:rtos/uC-FS/Source/fs_dev.c ****         return;
1777:rtos/uC-FS/Source/fs_dev.c ****     }
1778:rtos/uC-FS/Source/fs_dev.c **** #endif
1779:rtos/uC-FS/Source/fs_dev.c **** 
1780:rtos/uC-FS/Source/fs_dev.c ****    *p_err = FS_ERR_NONE;
1781:rtos/uC-FS/Source/fs_dev.c **** 
1782:rtos/uC-FS/Source/fs_dev.c ****     p_dev = FSDev_Acquire(name_dev);
1783:rtos/uC-FS/Source/fs_dev.c ****     if (p_dev == DEF_NULL) {
1784:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_DEV_NOT_OPEN;
1785:rtos/uC-FS/Source/fs_dev.c ****         return;
1786:rtos/uC-FS/Source/fs_dev.c ****     }
1787:rtos/uC-FS/Source/fs_dev.c **** 
1788:rtos/uC-FS/Source/fs_dev.c ****                                                                 /* ------------- RELEASE DEV ACCESS
1789:rtos/uC-FS/Source/fs_dev.c ****     FS_OS_DevAccessUnlock(p_dev->ID);
1790:rtos/uC-FS/Source/fs_dev.c **** 
1791:rtos/uC-FS/Source/fs_dev.c ****     FSDev_Release(p_dev);
1792:rtos/uC-FS/Source/fs_dev.c **** }
1793:rtos/uC-FS/Source/fs_dev.c **** 
1794:rtos/uC-FS/Source/fs_dev.c **** 
1795:rtos/uC-FS/Source/fs_dev.c **** /*
1796:rtos/uC-FS/Source/fs_dev.c **** ***************************************************************************************************
1797:rtos/uC-FS/Source/fs_dev.c **** ***************************************************************************************************
ARM GAS  /tmp/cccHmdnc.s 			page 33


1798:rtos/uC-FS/Source/fs_dev.c **** *                                     DEVICE MANAGEMENT FUNCTIONS
1799:rtos/uC-FS/Source/fs_dev.c **** ***************************************************************************************************
1800:rtos/uC-FS/Source/fs_dev.c **** ***************************************************************************************************
1801:rtos/uC-FS/Source/fs_dev.c **** */
1802:rtos/uC-FS/Source/fs_dev.c **** 
1803:rtos/uC-FS/Source/fs_dev.c **** /*
1804:rtos/uC-FS/Source/fs_dev.c **** ***************************************************************************************************
1805:rtos/uC-FS/Source/fs_dev.c **** *                                          FSDev_GetDevCnt()
1806:rtos/uC-FS/Source/fs_dev.c **** *
1807:rtos/uC-FS/Source/fs_dev.c **** * Description : Get the number of open devices.
1808:rtos/uC-FS/Source/fs_dev.c **** *
1809:rtos/uC-FS/Source/fs_dev.c **** * Argument(s) : none.
1810:rtos/uC-FS/Source/fs_dev.c **** *
1811:rtos/uC-FS/Source/fs_dev.c **** * Return(s)   : The number of open devices.
1812:rtos/uC-FS/Source/fs_dev.c **** *
1813:rtos/uC-FS/Source/fs_dev.c **** * Note(s)     : none.
1814:rtos/uC-FS/Source/fs_dev.c **** ***************************************************************************************************
1815:rtos/uC-FS/Source/fs_dev.c **** */
1816:rtos/uC-FS/Source/fs_dev.c **** 
1817:rtos/uC-FS/Source/fs_dev.c **** FS_QTY  FSDev_GetDevCnt (void)
1818:rtos/uC-FS/Source/fs_dev.c **** {
1819:rtos/uC-FS/Source/fs_dev.c ****     FS_QTY  dev_cnt;
1820:rtos/uC-FS/Source/fs_dev.c ****     FS_ERR  err;
1821:rtos/uC-FS/Source/fs_dev.c **** 
1822:rtos/uC-FS/Source/fs_dev.c **** 
1823:rtos/uC-FS/Source/fs_dev.c ****                                                                 /* ------------------ ACQUIRE FS LO
1824:rtos/uC-FS/Source/fs_dev.c ****     FS_OS_Lock(&err);
1825:rtos/uC-FS/Source/fs_dev.c ****     if (err != FS_ERR_NONE) {
1826:rtos/uC-FS/Source/fs_dev.c ****         return (0u);
1827:rtos/uC-FS/Source/fs_dev.c ****     }
1828:rtos/uC-FS/Source/fs_dev.c **** 
1829:rtos/uC-FS/Source/fs_dev.c **** 
1830:rtos/uC-FS/Source/fs_dev.c **** 
1831:rtos/uC-FS/Source/fs_dev.c ****                                                                 /* -------------------- GET DEV CNT
1832:rtos/uC-FS/Source/fs_dev.c ****     dev_cnt = FSDev_Cnt;
1833:rtos/uC-FS/Source/fs_dev.c **** 
1834:rtos/uC-FS/Source/fs_dev.c **** 
1835:rtos/uC-FS/Source/fs_dev.c **** 
1836:rtos/uC-FS/Source/fs_dev.c ****                                                                 /* ------------------ RELEASE FS LO
1837:rtos/uC-FS/Source/fs_dev.c ****     FS_OS_Unlock();
1838:rtos/uC-FS/Source/fs_dev.c **** 
1839:rtos/uC-FS/Source/fs_dev.c ****     return (dev_cnt);
1840:rtos/uC-FS/Source/fs_dev.c **** }
1841:rtos/uC-FS/Source/fs_dev.c **** 
1842:rtos/uC-FS/Source/fs_dev.c **** 
1843:rtos/uC-FS/Source/fs_dev.c **** /*
1844:rtos/uC-FS/Source/fs_dev.c **** ***************************************************************************************************
1845:rtos/uC-FS/Source/fs_dev.c **** *                                        FSDev_GetDevCntMax()
1846:rtos/uC-FS/Source/fs_dev.c **** *
1847:rtos/uC-FS/Source/fs_dev.c **** * Description : Get the maximum possible number of open devices.
1848:rtos/uC-FS/Source/fs_dev.c **** *
1849:rtos/uC-FS/Source/fs_dev.c **** * Argument(s) : none.
1850:rtos/uC-FS/Source/fs_dev.c **** *
1851:rtos/uC-FS/Source/fs_dev.c **** * Return(s)   : The maximum number of open devices.
1852:rtos/uC-FS/Source/fs_dev.c **** *
1853:rtos/uC-FS/Source/fs_dev.c **** * Note(s)     : none.
1854:rtos/uC-FS/Source/fs_dev.c **** ***************************************************************************************************
ARM GAS  /tmp/cccHmdnc.s 			page 34


1855:rtos/uC-FS/Source/fs_dev.c **** */
1856:rtos/uC-FS/Source/fs_dev.c **** 
1857:rtos/uC-FS/Source/fs_dev.c **** FS_QTY  FSDev_GetDevCntMax (void)
1858:rtos/uC-FS/Source/fs_dev.c **** {
1859:rtos/uC-FS/Source/fs_dev.c ****     FS_QTY  dev_cnt_max;
1860:rtos/uC-FS/Source/fs_dev.c **** 
1861:rtos/uC-FS/Source/fs_dev.c **** 
1862:rtos/uC-FS/Source/fs_dev.c ****                                                                 /* ------------------ GET DEV CNT M
1863:rtos/uC-FS/Source/fs_dev.c ****     dev_cnt_max = FSDev_DevCntMax;
1864:rtos/uC-FS/Source/fs_dev.c **** 
1865:rtos/uC-FS/Source/fs_dev.c ****     return (dev_cnt_max);
1866:rtos/uC-FS/Source/fs_dev.c **** }
1867:rtos/uC-FS/Source/fs_dev.c **** 
1868:rtos/uC-FS/Source/fs_dev.c **** 
1869:rtos/uC-FS/Source/fs_dev.c **** /*
1870:rtos/uC-FS/Source/fs_dev.c **** ***************************************************************************************************
1871:rtos/uC-FS/Source/fs_dev.c **** *                                         FSDev_GetDevName()
1872:rtos/uC-FS/Source/fs_dev.c **** *
1873:rtos/uC-FS/Source/fs_dev.c **** * Description : Get name of the nth open device.
1874:rtos/uC-FS/Source/fs_dev.c **** *
1875:rtos/uC-FS/Source/fs_dev.c **** * Argument(s) : dev_nbr     Number of device to get.
1876:rtos/uC-FS/Source/fs_dev.c **** *
1877:rtos/uC-FS/Source/fs_dev.c **** *               name_dev    String buffer that will receive the device name (see Note #2).
1878:rtos/uC-FS/Source/fs_dev.c **** *
1879:rtos/uC-FS/Source/fs_dev.c **** * Return(s)   : none.
1880:rtos/uC-FS/Source/fs_dev.c **** *
1881:rtos/uC-FS/Source/fs_dev.c **** * Note(s)     : (1) 'name_dev' MUST be a character array of 'FS_CFG_MAX_DEV_NAME_LEN + 1' character
1882:rtos/uC-FS/Source/fs_dev.c **** *
1883:rtos/uC-FS/Source/fs_dev.c **** *               (2) If the device does not exist 'name_dev' will receive an empty string.
1884:rtos/uC-FS/Source/fs_dev.c **** ***************************************************************************************************
1885:rtos/uC-FS/Source/fs_dev.c **** */
1886:rtos/uC-FS/Source/fs_dev.c **** 
1887:rtos/uC-FS/Source/fs_dev.c **** void  FSDev_GetDevName (FS_QTY     dev_nbr,
1888:rtos/uC-FS/Source/fs_dev.c ****                         CPU_CHAR  *name_dev)
1889:rtos/uC-FS/Source/fs_dev.c **** {
1890:rtos/uC-FS/Source/fs_dev.c ****     FS_ERR    err;
1891:rtos/uC-FS/Source/fs_dev.c ****     FS_QTY    dev_ix;
1892:rtos/uC-FS/Source/fs_dev.c ****     FS_QTY    dev_cnt_cur;
1893:rtos/uC-FS/Source/fs_dev.c **** 
1894:rtos/uC-FS/Source/fs_dev.c **** 
1895:rtos/uC-FS/Source/fs_dev.c **** #if (FS_CFG_ERR_ARG_CHK_EXT_EN == DEF_ENABLED)                  /* ------------------- VALIDATE ARG
1896:rtos/uC-FS/Source/fs_dev.c ****     if (name_dev == (CPU_CHAR *)0) {                            /* Validate name ptr.              
1897:rtos/uC-FS/Source/fs_dev.c ****         return;
1898:rtos/uC-FS/Source/fs_dev.c ****     }
1899:rtos/uC-FS/Source/fs_dev.c **** #endif
1900:rtos/uC-FS/Source/fs_dev.c **** 
1901:rtos/uC-FS/Source/fs_dev.c ****     name_dev[0] = (CPU_CHAR)ASCII_CHAR_NULL;                    /* See Note #2.                    
1902:rtos/uC-FS/Source/fs_dev.c **** 
1903:rtos/uC-FS/Source/fs_dev.c **** 
1904:rtos/uC-FS/Source/fs_dev.c ****                                                                 /* ------------------ ACQUIRE FS LO
1905:rtos/uC-FS/Source/fs_dev.c ****     FS_OS_Lock(&err);
1906:rtos/uC-FS/Source/fs_dev.c ****     if (err != FS_ERR_NONE) {
1907:rtos/uC-FS/Source/fs_dev.c ****         return;
1908:rtos/uC-FS/Source/fs_dev.c ****     }
1909:rtos/uC-FS/Source/fs_dev.c **** 
1910:rtos/uC-FS/Source/fs_dev.c **** 
1911:rtos/uC-FS/Source/fs_dev.c ****                                                                 /* ------------------- GET DEV NAME
ARM GAS  /tmp/cccHmdnc.s 			page 35


1912:rtos/uC-FS/Source/fs_dev.c ****     dev_cnt_cur = 0u;
1913:rtos/uC-FS/Source/fs_dev.c ****     for (dev_ix = 0u; dev_ix < FSDev_DevCntMax; dev_ix++) {
1914:rtos/uC-FS/Source/fs_dev.c ****         if (FSDev_Tbl[dev_ix] != DEF_NULL) {
1915:rtos/uC-FS/Source/fs_dev.c ****             if (dev_cnt_cur == dev_nbr) {
1916:rtos/uC-FS/Source/fs_dev.c ****                 Str_Copy_N(name_dev,
1917:rtos/uC-FS/Source/fs_dev.c ****                            FSDev_Tbl[dev_ix]->Name,
1918:rtos/uC-FS/Source/fs_dev.c ****                            FS_CFG_MAX_DEV_NAME_LEN);
1919:rtos/uC-FS/Source/fs_dev.c ****                 break;
1920:rtos/uC-FS/Source/fs_dev.c ****             } else {
1921:rtos/uC-FS/Source/fs_dev.c ****                 dev_cnt_cur++;
1922:rtos/uC-FS/Source/fs_dev.c ****             }
1923:rtos/uC-FS/Source/fs_dev.c ****         }
1924:rtos/uC-FS/Source/fs_dev.c ****     }
1925:rtos/uC-FS/Source/fs_dev.c **** 
1926:rtos/uC-FS/Source/fs_dev.c **** 
1927:rtos/uC-FS/Source/fs_dev.c ****                                                                 /* ------------------ RELEASE FS LO
1928:rtos/uC-FS/Source/fs_dev.c ****     FS_OS_Unlock();
1929:rtos/uC-FS/Source/fs_dev.c **** }
1930:rtos/uC-FS/Source/fs_dev.c **** 
1931:rtos/uC-FS/Source/fs_dev.c **** 
1932:rtos/uC-FS/Source/fs_dev.c **** /*
1933:rtos/uC-FS/Source/fs_dev.c **** ***************************************************************************************************
1934:rtos/uC-FS/Source/fs_dev.c **** ***************************************************************************************************
1935:rtos/uC-FS/Source/fs_dev.c **** *                                         INTERNAL FUNCTIONS
1936:rtos/uC-FS/Source/fs_dev.c **** ***************************************************************************************************
1937:rtos/uC-FS/Source/fs_dev.c **** ***************************************************************************************************
1938:rtos/uC-FS/Source/fs_dev.c **** */
1939:rtos/uC-FS/Source/fs_dev.c **** 
1940:rtos/uC-FS/Source/fs_dev.c **** /*
1941:rtos/uC-FS/Source/fs_dev.c **** ***************************************************************************************************
1942:rtos/uC-FS/Source/fs_dev.c **** *                                         FSDev_ModuleInit()
1943:rtos/uC-FS/Source/fs_dev.c **** *
1944:rtos/uC-FS/Source/fs_dev.c **** * Description : Initialize File System Device Management module.
1945:rtos/uC-FS/Source/fs_dev.c **** *
1946:rtos/uC-FS/Source/fs_dev.c **** * Argument(s) : dev_cnt         Number of devices to allocate.
1947:rtos/uC-FS/Source/fs_dev.c **** *
1948:rtos/uC-FS/Source/fs_dev.c **** *               dev_drv_cnt     Number of device drivers to allocate.
1949:rtos/uC-FS/Source/fs_dev.c **** *
1950:rtos/uC-FS/Source/fs_dev.c **** *               p_err           Pointer to variable that will receive the return error code from th
1951:rtos/uC-FS/Source/fs_dev.c **** *               ----------      Argument validated by caller.
1952:rtos/uC-FS/Source/fs_dev.c **** *
1953:rtos/uC-FS/Source/fs_dev.c **** *                                   FS_ERR_NONE         Module initialized.
1954:rtos/uC-FS/Source/fs_dev.c **** *                                   FS_ERR_MEM_ALLOC    Memory could not be allocated.
1955:rtos/uC-FS/Source/fs_dev.c **** *
1956:rtos/uC-FS/Source/fs_dev.c **** * Return(s)   : none.
1957:rtos/uC-FS/Source/fs_dev.c **** *
1958:rtos/uC-FS/Source/fs_dev.c **** * Note(s)     : (1) In the DEVICE-ONLY BUILD, FSDev_ModuleInit() MUST be called ...
1959:rtos/uC-FS/Source/fs_dev.c **** *
1960:rtos/uC-FS/Source/fs_dev.c **** *                   (a) ONLY ONCE from a product's application; ...
1961:rtos/uC-FS/Source/fs_dev.c **** *                   (b) (1) AFTER  product's OS has been initialized
1962:rtos/uC-FS/Source/fs_dev.c **** *                       (2) BEFORE product's application calls any file system suite function(s).
1963:rtos/uC-FS/Source/fs_dev.c **** *
1964:rtos/uC-FS/Source/fs_dev.c **** *               (2) In the FULL BUILD, FSDev_ModuleInit() should NOT be called by application funct
1965:rtos/uC-FS/Source/fs_dev.c **** ***************************************************************************************************
1966:rtos/uC-FS/Source/fs_dev.c **** */
1967:rtos/uC-FS/Source/fs_dev.c **** 
1968:rtos/uC-FS/Source/fs_dev.c **** void  FSDev_ModuleInit (FS_QTY   dev_cnt,
ARM GAS  /tmp/cccHmdnc.s 			page 36


1969:rtos/uC-FS/Source/fs_dev.c ****                         FS_QTY   dev_drv_cnt,
1970:rtos/uC-FS/Source/fs_dev.c ****                         FS_ERR  *p_err)
1971:rtos/uC-FS/Source/fs_dev.c **** {
1972:rtos/uC-FS/Source/fs_dev.c ****     CPU_SIZE_T  octets_reqd;
1973:rtos/uC-FS/Source/fs_dev.c ****     LIB_ERR     pool_err;
1974:rtos/uC-FS/Source/fs_dev.c **** 
1975:rtos/uC-FS/Source/fs_dev.c **** 
1976:rtos/uC-FS/Source/fs_dev.c **** #if (FS_CFG_TRIAL_EN == DEF_ENABLED)
1977:rtos/uC-FS/Source/fs_dev.c ****     if (dev_cnt > FS_TRIAL_MAX_DEV_CNT) {                       /* Trial limitation: max 1 dev.    
1978:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_INVALID_CFG;
1979:rtos/uC-FS/Source/fs_dev.c ****         return;
1980:rtos/uC-FS/Source/fs_dev.c ****     }
1981:rtos/uC-FS/Source/fs_dev.c **** #endif
1982:rtos/uC-FS/Source/fs_dev.c **** 
1983:rtos/uC-FS/Source/fs_dev.c ****     FSDev_DevCntMax = 0u;
1984:rtos/uC-FS/Source/fs_dev.c ****     FSDev_Cnt       = 0u;
1985:rtos/uC-FS/Source/fs_dev.c **** 
1986:rtos/uC-FS/Source/fs_dev.c ****                                                                 /* ---------------- PERFORM FS/OS I
1987:rtos/uC-FS/Source/fs_dev.c ****     FS_OS_Init(p_err);                                          /* See 'FS_Init()  Note #4'.       
1988:rtos/uC-FS/Source/fs_dev.c ****     if (*p_err != FS_ERR_NONE) {
1989:rtos/uC-FS/Source/fs_dev.c ****         return;
1990:rtos/uC-FS/Source/fs_dev.c ****     }
1991:rtos/uC-FS/Source/fs_dev.c **** 
1992:rtos/uC-FS/Source/fs_dev.c **** 
1993:rtos/uC-FS/Source/fs_dev.c **** 
1994:rtos/uC-FS/Source/fs_dev.c ****                                                                 /* -------------- PERFORM FS/OS DEV
1995:rtos/uC-FS/Source/fs_dev.c ****     FS_OS_DevInit(dev_cnt, p_err);
1996:rtos/uC-FS/Source/fs_dev.c ****     if (*p_err != FS_ERR_NONE) {
1997:rtos/uC-FS/Source/fs_dev.c ****         return;
1998:rtos/uC-FS/Source/fs_dev.c ****     }
1999:rtos/uC-FS/Source/fs_dev.c **** 
2000:rtos/uC-FS/Source/fs_dev.c **** 
2001:rtos/uC-FS/Source/fs_dev.c **** 
2002:rtos/uC-FS/Source/fs_dev.c ****                                                                 /* ------------------ INIT DEV POOL
2003:rtos/uC-FS/Source/fs_dev.c ****     Mem_PoolCreate(&FSDev_Pool,
2004:rtos/uC-FS/Source/fs_dev.c ****                     DEF_NULL,
2005:rtos/uC-FS/Source/fs_dev.c ****                     0,
2006:rtos/uC-FS/Source/fs_dev.c ****                     dev_cnt,
2007:rtos/uC-FS/Source/fs_dev.c ****                     sizeof(FS_DEV),
2008:rtos/uC-FS/Source/fs_dev.c ****                     sizeof(CPU_ALIGN),
2009:rtos/uC-FS/Source/fs_dev.c ****                    &octets_reqd,
2010:rtos/uC-FS/Source/fs_dev.c ****                    &pool_err);
2011:rtos/uC-FS/Source/fs_dev.c **** 
2012:rtos/uC-FS/Source/fs_dev.c ****     if (pool_err != LIB_MEM_ERR_NONE) {
2013:rtos/uC-FS/Source/fs_dev.c ****        *p_err  = FS_ERR_MEM_ALLOC;
2014:rtos/uC-FS/Source/fs_dev.c ****         FS_TRACE_INFO(("FSDev_ModuleInit(): Could not alloc mem for devs: %d octets required.\r\n",
2015:rtos/uC-FS/Source/fs_dev.c ****         return;
2016:rtos/uC-FS/Source/fs_dev.c ****     }
2017:rtos/uC-FS/Source/fs_dev.c **** 
2018:rtos/uC-FS/Source/fs_dev.c ****     FSDev_Tbl = (FS_DEV **)Mem_HeapAlloc(dev_cnt * sizeof(FS_DEV *),
2019:rtos/uC-FS/Source/fs_dev.c ****                                          sizeof(CPU_ALIGN),
2020:rtos/uC-FS/Source/fs_dev.c ****                                         &octets_reqd,
2021:rtos/uC-FS/Source/fs_dev.c ****                                         &pool_err);
2022:rtos/uC-FS/Source/fs_dev.c ****     if (pool_err != LIB_MEM_ERR_NONE) {
2023:rtos/uC-FS/Source/fs_dev.c ****        *p_err  = FS_ERR_MEM_ALLOC;
2024:rtos/uC-FS/Source/fs_dev.c ****         FS_TRACE_INFO(("FSDev_ModuleInit(): Could not alloc mem for devs: %d octets required.\r\n",
2025:rtos/uC-FS/Source/fs_dev.c ****         return;
ARM GAS  /tmp/cccHmdnc.s 			page 37


2026:rtos/uC-FS/Source/fs_dev.c ****     }
2027:rtos/uC-FS/Source/fs_dev.c **** 
2028:rtos/uC-FS/Source/fs_dev.c ****     Mem_Clr(FSDev_Tbl, dev_cnt * sizeof(FS_DEV *));
2029:rtos/uC-FS/Source/fs_dev.c **** 
2030:rtos/uC-FS/Source/fs_dev.c ****     FSDev_DevCntMax = dev_cnt;
2031:rtos/uC-FS/Source/fs_dev.c **** 
2032:rtos/uC-FS/Source/fs_dev.c ****                                                                 /* ----------------- INIT DEV DRV T
2033:rtos/uC-FS/Source/fs_dev.c ****     FS_DevDrvTbl = (FS_DEV_API  **)Mem_HeapAlloc(dev_drv_cnt * sizeof(FS_DEV_API *),
2034:rtos/uC-FS/Source/fs_dev.c ****                                                  sizeof(CPU_ALIGN),
2035:rtos/uC-FS/Source/fs_dev.c ****                                                 &octets_reqd,
2036:rtos/uC-FS/Source/fs_dev.c ****                                                 &pool_err);
2037:rtos/uC-FS/Source/fs_dev.c ****     if (pool_err != LIB_MEM_ERR_NONE) {
2038:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_MEM_ALLOC;
2039:rtos/uC-FS/Source/fs_dev.c ****         FS_TRACE_INFO(("FSDev_ModuleInit(): Could not alloc mem for dev drv tbl: %d octets required
2040:rtos/uC-FS/Source/fs_dev.c ****         return;
2041:rtos/uC-FS/Source/fs_dev.c ****     }
2042:rtos/uC-FS/Source/fs_dev.c **** 
2043:rtos/uC-FS/Source/fs_dev.c ****     Mem_Clr(FS_DevDrvTbl, dev_drv_cnt * sizeof(FS_DEV_API *));
2044:rtos/uC-FS/Source/fs_dev.c **** 
2045:rtos/uC-FS/Source/fs_dev.c ****     FS_DevDrvCntMax = dev_drv_cnt;
2046:rtos/uC-FS/Source/fs_dev.c **** }
2047:rtos/uC-FS/Source/fs_dev.c **** 
2048:rtos/uC-FS/Source/fs_dev.c **** 
2049:rtos/uC-FS/Source/fs_dev.c **** /*
2050:rtos/uC-FS/Source/fs_dev.c **** ***************************************************************************************************
2051:rtos/uC-FS/Source/fs_dev.c **** *                                       FSDev_AcquireLockChk()
2052:rtos/uC-FS/Source/fs_dev.c **** *
2053:rtos/uC-FS/Source/fs_dev.c **** * Description : Acquire device reference & lock.
2054:rtos/uC-FS/Source/fs_dev.c **** *
2055:rtos/uC-FS/Source/fs_dev.c **** * Argument(s) : name_dev    Device name.
2056:rtos/uC-FS/Source/fs_dev.c **** *
2057:rtos/uC-FS/Source/fs_dev.c **** *               p_err       Pointer to variable that will receive the return error code from this f
2058:rtos/uC-FS/Source/fs_dev.c **** *               ----------  Argument validated by caller.
2059:rtos/uC-FS/Source/fs_dev.c **** *
2060:rtos/uC-FS/Source/fs_dev.c **** *                               FS_ERR_NONE                   Device present & lock acquired.
2061:rtos/uC-FS/Source/fs_dev.c **** *                               FS_ERR_DEV_NOT_OPEN           Device is not open.
2062:rtos/uC-FS/Source/fs_dev.c **** *                               FS_ERR_DEV_NOT_PRESENT        Device is not present.
2063:rtos/uC-FS/Source/fs_dev.c **** *                               FS_ERR_DEV_INVALID_LOW_FMT    Device needs to be low-level formatte
2064:rtos/uC-FS/Source/fs_dev.c **** *
2065:rtos/uC-FS/Source/fs_dev.c **** * Return(s)   : Pointer to a device, if found.
2066:rtos/uC-FS/Source/fs_dev.c **** *               Pointer to NULL,     otherwise.
2067:rtos/uC-FS/Source/fs_dev.c **** *
2068:rtos/uC-FS/Source/fs_dev.c **** * Note(s)     : none.
2069:rtos/uC-FS/Source/fs_dev.c **** ***************************************************************************************************
2070:rtos/uC-FS/Source/fs_dev.c **** */
2071:rtos/uC-FS/Source/fs_dev.c **** 
2072:rtos/uC-FS/Source/fs_dev.c **** FS_DEV  *FSDev_AcquireLockChk (CPU_CHAR  *name_dev,
2073:rtos/uC-FS/Source/fs_dev.c ****                                FS_ERR    *p_err)
2074:rtos/uC-FS/Source/fs_dev.c **** {
2075:rtos/uC-FS/Source/fs_dev.c ****     FS_DEV       *p_dev;
2076:rtos/uC-FS/Source/fs_dev.c ****     CPU_BOOLEAN   lock_success;
2077:rtos/uC-FS/Source/fs_dev.c **** 
2078:rtos/uC-FS/Source/fs_dev.c **** 
2079:rtos/uC-FS/Source/fs_dev.c ****                                                                 /* ----------------- ACQUIRE DEV LO
2080:rtos/uC-FS/Source/fs_dev.c ****     p_dev = FSDev_Acquire(name_dev);                            /* Acquire dev ref.                
2081:rtos/uC-FS/Source/fs_dev.c ****     if (p_dev == (FS_DEV *)0) {                                 /* Rtn err if dev not found.       
2082:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_DEV_NOT_OPEN;
ARM GAS  /tmp/cccHmdnc.s 			page 38


2083:rtos/uC-FS/Source/fs_dev.c ****         return ((FS_DEV *)0);
2084:rtos/uC-FS/Source/fs_dev.c ****     }
2085:rtos/uC-FS/Source/fs_dev.c **** 
2086:rtos/uC-FS/Source/fs_dev.c ****     lock_success = FSDev_Lock(p_dev);
2087:rtos/uC-FS/Source/fs_dev.c ****     if (lock_success != DEF_YES) {
2088:rtos/uC-FS/Source/fs_dev.c ****         FSDev_Release(p_dev);
2089:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_OS_LOCK;
2090:rtos/uC-FS/Source/fs_dev.c ****         return ((FS_DEV *)0);
2091:rtos/uC-FS/Source/fs_dev.c ****     }
2092:rtos/uC-FS/Source/fs_dev.c **** 
2093:rtos/uC-FS/Source/fs_dev.c **** 
2094:rtos/uC-FS/Source/fs_dev.c **** 
2095:rtos/uC-FS/Source/fs_dev.c ****                                                                 /* ------------------- VALIDATE DEV
2096:rtos/uC-FS/Source/fs_dev.c ****     if (p_dev->State == FS_DEV_STATE_OPEN) {                    /* Dev not present ...             
2097:rtos/uC-FS/Source/fs_dev.c ****        (void)FSDev_RefreshLocked(p_dev, p_err);                 /* ... try to reopen dev.          
2098:rtos/uC-FS/Source/fs_dev.c ****         if (*p_err != FS_ERR_NONE) {
2099:rtos/uC-FS/Source/fs_dev.c ****             FSDev_ReleaseUnlock(p_dev);
2100:rtos/uC-FS/Source/fs_dev.c ****             return DEF_NULL;
2101:rtos/uC-FS/Source/fs_dev.c ****         }
2102:rtos/uC-FS/Source/fs_dev.c ****     }
2103:rtos/uC-FS/Source/fs_dev.c **** 
2104:rtos/uC-FS/Source/fs_dev.c ****     switch (p_dev->State) {
2105:rtos/uC-FS/Source/fs_dev.c ****         case FS_DEV_STATE_OPEN:                                 /* Dev not present.                
2106:rtos/uC-FS/Source/fs_dev.c ****             *p_err = FS_ERR_DEV_NOT_PRESENT;
2107:rtos/uC-FS/Source/fs_dev.c ****              break;
2108:rtos/uC-FS/Source/fs_dev.c **** 
2109:rtos/uC-FS/Source/fs_dev.c **** 
2110:rtos/uC-FS/Source/fs_dev.c ****         case FS_DEV_STATE_PRESENT:                              /* Dev not low fmt'd: app MUST fmt 
2111:rtos/uC-FS/Source/fs_dev.c ****             *p_err = FS_ERR_DEV_INVALID_LOW_FMT;
2112:rtos/uC-FS/Source/fs_dev.c ****              break;
2113:rtos/uC-FS/Source/fs_dev.c **** 
2114:rtos/uC-FS/Source/fs_dev.c **** 
2115:rtos/uC-FS/Source/fs_dev.c ****         case FS_DEV_STATE_LOW_FMT_VALID:                        /* Dev present.                    
2116:rtos/uC-FS/Source/fs_dev.c ****              break;
2117:rtos/uC-FS/Source/fs_dev.c **** 
2118:rtos/uC-FS/Source/fs_dev.c **** 
2119:rtos/uC-FS/Source/fs_dev.c ****         case FS_DEV_STATE_CLOSED:                               /* Dev closed, closing or opening: 
2120:rtos/uC-FS/Source/fs_dev.c ****         case FS_DEV_STATE_CLOSING:
2121:rtos/uC-FS/Source/fs_dev.c ****         case FS_DEV_STATE_OPENING:
2122:rtos/uC-FS/Source/fs_dev.c ****         default:
2123:rtos/uC-FS/Source/fs_dev.c ****             *p_err = FS_ERR_DEV_NOT_OPEN;
2124:rtos/uC-FS/Source/fs_dev.c ****              break;
2125:rtos/uC-FS/Source/fs_dev.c ****     }
2126:rtos/uC-FS/Source/fs_dev.c **** 
2127:rtos/uC-FS/Source/fs_dev.c ****     if (p_dev->State != FS_DEV_STATE_LOW_FMT_VALID) {           /* If still not present & low fmt'd
2128:rtos/uC-FS/Source/fs_dev.c ****         FSDev_ReleaseUnlock(p_dev);
2129:rtos/uC-FS/Source/fs_dev.c ****         return ((FS_DEV *)0);                                   /* ... rtn.                        
2130:rtos/uC-FS/Source/fs_dev.c ****     }
2131:rtos/uC-FS/Source/fs_dev.c **** 
2132:rtos/uC-FS/Source/fs_dev.c **** 
2133:rtos/uC-FS/Source/fs_dev.c ****                                                                 /* ------------------------ RTN ---
2134:rtos/uC-FS/Source/fs_dev.c ****    *p_err = FS_ERR_NONE;
2135:rtos/uC-FS/Source/fs_dev.c ****     return (p_dev);
2136:rtos/uC-FS/Source/fs_dev.c **** }
2137:rtos/uC-FS/Source/fs_dev.c **** 
2138:rtos/uC-FS/Source/fs_dev.c **** 
2139:rtos/uC-FS/Source/fs_dev.c **** /*
ARM GAS  /tmp/cccHmdnc.s 			page 39


2140:rtos/uC-FS/Source/fs_dev.c **** ***************************************************************************************************
2141:rtos/uC-FS/Source/fs_dev.c **** *                                           FSDev_Acquire()
2142:rtos/uC-FS/Source/fs_dev.c **** *
2143:rtos/uC-FS/Source/fs_dev.c **** * Description : Acquire device reference.
2144:rtos/uC-FS/Source/fs_dev.c **** *
2145:rtos/uC-FS/Source/fs_dev.c **** * Argument(s) : name_dev    Device name.
2146:rtos/uC-FS/Source/fs_dev.c **** *               ----------  Argument validated by caller.
2147:rtos/uC-FS/Source/fs_dev.c **** *
2148:rtos/uC-FS/Source/fs_dev.c **** * Return(s)   : Pointer to a device, if found.
2149:rtos/uC-FS/Source/fs_dev.c **** *               Pointer to NULL,     otherwise.
2150:rtos/uC-FS/Source/fs_dev.c **** *
2151:rtos/uC-FS/Source/fs_dev.c **** * Note(s)     : none.
2152:rtos/uC-FS/Source/fs_dev.c **** ***************************************************************************************************
2153:rtos/uC-FS/Source/fs_dev.c **** */
2154:rtos/uC-FS/Source/fs_dev.c **** 
2155:rtos/uC-FS/Source/fs_dev.c **** FS_DEV  *FSDev_Acquire (CPU_CHAR  *name_dev)
2156:rtos/uC-FS/Source/fs_dev.c **** {
2157:rtos/uC-FS/Source/fs_dev.c ****     FS_DEV  *p_dev;
2158:rtos/uC-FS/Source/fs_dev.c ****     FS_ERR   err;
2159:rtos/uC-FS/Source/fs_dev.c **** 
2160:rtos/uC-FS/Source/fs_dev.c **** 
2161:rtos/uC-FS/Source/fs_dev.c ****                                                                 /* ------------------ ACQUIRE FS LO
2162:rtos/uC-FS/Source/fs_dev.c ****     FS_OS_Lock(&err);
2163:rtos/uC-FS/Source/fs_dev.c ****     if (err != FS_ERR_NONE) {
2164:rtos/uC-FS/Source/fs_dev.c ****         return ((FS_DEV *)0);
2165:rtos/uC-FS/Source/fs_dev.c ****     }
2166:rtos/uC-FS/Source/fs_dev.c **** 
2167:rtos/uC-FS/Source/fs_dev.c **** 
2168:rtos/uC-FS/Source/fs_dev.c **** 
2169:rtos/uC-FS/Source/fs_dev.c ****                                                                 /* --------------------- FIND DEV -
2170:rtos/uC-FS/Source/fs_dev.c ****     p_dev = FSDev_ObjFind(name_dev);                            /* Find dev.                       
2171:rtos/uC-FS/Source/fs_dev.c **** 
2172:rtos/uC-FS/Source/fs_dev.c ****     if (p_dev == (FS_DEV *)0) {                                 /* Rtn NULL if dev not found.      
2173:rtos/uC-FS/Source/fs_dev.c ****         FS_OS_Unlock();
2174:rtos/uC-FS/Source/fs_dev.c ****         return ((FS_DEV *)0);
2175:rtos/uC-FS/Source/fs_dev.c ****     }
2176:rtos/uC-FS/Source/fs_dev.c **** 
2177:rtos/uC-FS/Source/fs_dev.c ****     p_dev->RefCnt++;
2178:rtos/uC-FS/Source/fs_dev.c **** 
2179:rtos/uC-FS/Source/fs_dev.c **** 
2180:rtos/uC-FS/Source/fs_dev.c **** 
2181:rtos/uC-FS/Source/fs_dev.c ****                                                                 /* ------------------ RELEASE FS LO
2182:rtos/uC-FS/Source/fs_dev.c ****     FS_OS_Unlock();
2183:rtos/uC-FS/Source/fs_dev.c **** 
2184:rtos/uC-FS/Source/fs_dev.c ****     return (p_dev);
2185:rtos/uC-FS/Source/fs_dev.c **** }
2186:rtos/uC-FS/Source/fs_dev.c **** 
2187:rtos/uC-FS/Source/fs_dev.c **** 
2188:rtos/uC-FS/Source/fs_dev.c **** /*
2189:rtos/uC-FS/Source/fs_dev.c **** ***************************************************************************************************
2190:rtos/uC-FS/Source/fs_dev.c **** *                                        FSDev_ReleaseUnlock()
2191:rtos/uC-FS/Source/fs_dev.c **** *
2192:rtos/uC-FS/Source/fs_dev.c **** * Description : Release device reference & lock.
2193:rtos/uC-FS/Source/fs_dev.c **** *
2194:rtos/uC-FS/Source/fs_dev.c **** * Argument(s) : p_dev       Pointer to device.
2195:rtos/uC-FS/Source/fs_dev.c **** *               -----       Argument validated by caller.
2196:rtos/uC-FS/Source/fs_dev.c **** *
ARM GAS  /tmp/cccHmdnc.s 			page 40


2197:rtos/uC-FS/Source/fs_dev.c **** * Return(s)   : none.
2198:rtos/uC-FS/Source/fs_dev.c **** *
2199:rtos/uC-FS/Source/fs_dev.c **** * Note(s)     : none.
2200:rtos/uC-FS/Source/fs_dev.c **** ***************************************************************************************************
2201:rtos/uC-FS/Source/fs_dev.c **** */
2202:rtos/uC-FS/Source/fs_dev.c **** 
2203:rtos/uC-FS/Source/fs_dev.c **** void  FSDev_ReleaseUnlock (FS_DEV  *p_dev)
2204:rtos/uC-FS/Source/fs_dev.c **** {
2205:rtos/uC-FS/Source/fs_dev.c ****     FSDev_Unlock(p_dev);
2206:rtos/uC-FS/Source/fs_dev.c ****     FSDev_Release(p_dev);
2207:rtos/uC-FS/Source/fs_dev.c **** }
2208:rtos/uC-FS/Source/fs_dev.c **** 
2209:rtos/uC-FS/Source/fs_dev.c **** 
2210:rtos/uC-FS/Source/fs_dev.c **** /*
2211:rtos/uC-FS/Source/fs_dev.c **** ***************************************************************************************************
2212:rtos/uC-FS/Source/fs_dev.c **** *                                           FSDev_Release()
2213:rtos/uC-FS/Source/fs_dev.c **** *
2214:rtos/uC-FS/Source/fs_dev.c **** * Description : Release device reference.
2215:rtos/uC-FS/Source/fs_dev.c **** *
2216:rtos/uC-FS/Source/fs_dev.c **** * Argument(s) : p_dev       Pointer to device.
2217:rtos/uC-FS/Source/fs_dev.c **** *               -----       Argument validated by caller.
2218:rtos/uC-FS/Source/fs_dev.c **** *
2219:rtos/uC-FS/Source/fs_dev.c **** * Return(s)   : none.
2220:rtos/uC-FS/Source/fs_dev.c **** *
2221:rtos/uC-FS/Source/fs_dev.c **** * Note(s)     : none.
2222:rtos/uC-FS/Source/fs_dev.c **** ***************************************************************************************************
2223:rtos/uC-FS/Source/fs_dev.c **** */
2224:rtos/uC-FS/Source/fs_dev.c **** 
2225:rtos/uC-FS/Source/fs_dev.c **** void  FSDev_Release (FS_DEV  *p_dev)
2226:rtos/uC-FS/Source/fs_dev.c **** {
2227:rtos/uC-FS/Source/fs_dev.c ****     FS_ERR  err;
2228:rtos/uC-FS/Source/fs_dev.c ****     FS_CTR  ref_cnt;
2229:rtos/uC-FS/Source/fs_dev.c **** 
2230:rtos/uC-FS/Source/fs_dev.c **** 
2231:rtos/uC-FS/Source/fs_dev.c ****                                                                 /* ------------------ ACQUIRE FS LO
2232:rtos/uC-FS/Source/fs_dev.c ****     FS_OS_Lock(&err);
2233:rtos/uC-FS/Source/fs_dev.c ****     if (err != FS_ERR_NONE) {
2234:rtos/uC-FS/Source/fs_dev.c ****         return;
2235:rtos/uC-FS/Source/fs_dev.c ****     }
2236:rtos/uC-FS/Source/fs_dev.c **** 
2237:rtos/uC-FS/Source/fs_dev.c **** 
2238:rtos/uC-FS/Source/fs_dev.c **** 
2239:rtos/uC-FS/Source/fs_dev.c ****                                                                 /* -------------------- DEC REF CNT
2240:rtos/uC-FS/Source/fs_dev.c ****     ref_cnt = p_dev->RefCnt;
2241:rtos/uC-FS/Source/fs_dev.c ****     if (ref_cnt == 1u) {
2242:rtos/uC-FS/Source/fs_dev.c ****         FSDev_ObjFree(p_dev);
2243:rtos/uC-FS/Source/fs_dev.c ****     } else if (ref_cnt > 0u) {
2244:rtos/uC-FS/Source/fs_dev.c ****         p_dev->RefCnt = ref_cnt - 1u;
2245:rtos/uC-FS/Source/fs_dev.c ****     } else {
2246:rtos/uC-FS/Source/fs_dev.c ****         FS_TRACE_DBG(("FSDev_Release(): Release cnt dec'd to zero.\r\n"));
2247:rtos/uC-FS/Source/fs_dev.c ****     }
2248:rtos/uC-FS/Source/fs_dev.c **** 
2249:rtos/uC-FS/Source/fs_dev.c **** 
2250:rtos/uC-FS/Source/fs_dev.c **** 
2251:rtos/uC-FS/Source/fs_dev.c ****                                                                 /* ------------------ RELEASE FS LO
2252:rtos/uC-FS/Source/fs_dev.c ****     FS_OS_Unlock();
2253:rtos/uC-FS/Source/fs_dev.c **** }
ARM GAS  /tmp/cccHmdnc.s 			page 41


2254:rtos/uC-FS/Source/fs_dev.c **** 
2255:rtos/uC-FS/Source/fs_dev.c **** 
2256:rtos/uC-FS/Source/fs_dev.c **** /*
2257:rtos/uC-FS/Source/fs_dev.c **** ***************************************************************************************************
2258:rtos/uC-FS/Source/fs_dev.c **** *                                            FSDev_Lock()
2259:rtos/uC-FS/Source/fs_dev.c **** *
2260:rtos/uC-FS/Source/fs_dev.c **** * Description : Acquire device lock.
2261:rtos/uC-FS/Source/fs_dev.c **** *
2262:rtos/uC-FS/Source/fs_dev.c **** * Argument(s) : p_dev       Pointer to device.
2263:rtos/uC-FS/Source/fs_dev.c **** *               -----       Argument validated by caller.
2264:rtos/uC-FS/Source/fs_dev.c **** *
2265:rtos/uC-FS/Source/fs_dev.c **** * Return(s)   : DEF_YES, if device lock     acquired.
2266:rtos/uC-FS/Source/fs_dev.c **** *               DEF_NO,  if device lock NOT acquired.
2267:rtos/uC-FS/Source/fs_dev.c **** *
2268:rtos/uC-FS/Source/fs_dev.c **** * Note(s)     : none.
2269:rtos/uC-FS/Source/fs_dev.c **** ***************************************************************************************************
2270:rtos/uC-FS/Source/fs_dev.c **** */
2271:rtos/uC-FS/Source/fs_dev.c **** 
2272:rtos/uC-FS/Source/fs_dev.c **** CPU_BOOLEAN  FSDev_Lock (FS_DEV  *p_dev)
2273:rtos/uC-FS/Source/fs_dev.c **** {
2274:rtos/uC-FS/Source/fs_dev.c ****     FS_ERR  err;
2275:rtos/uC-FS/Source/fs_dev.c **** 
2276:rtos/uC-FS/Source/fs_dev.c **** 
2277:rtos/uC-FS/Source/fs_dev.c ****                                                                 /* ----------------- ACQUIRE DEV LO
2278:rtos/uC-FS/Source/fs_dev.c ****     FS_OS_DevLock(p_dev->ID, &err);
2279:rtos/uC-FS/Source/fs_dev.c ****     if (err != FS_ERR_NONE) {
2280:rtos/uC-FS/Source/fs_dev.c ****         return (DEF_NO);
2281:rtos/uC-FS/Source/fs_dev.c ****     }
2282:rtos/uC-FS/Source/fs_dev.c **** 
2283:rtos/uC-FS/Source/fs_dev.c ****     return (DEF_YES);
2284:rtos/uC-FS/Source/fs_dev.c **** }
2285:rtos/uC-FS/Source/fs_dev.c **** 
2286:rtos/uC-FS/Source/fs_dev.c **** 
2287:rtos/uC-FS/Source/fs_dev.c **** /*
2288:rtos/uC-FS/Source/fs_dev.c **** ***************************************************************************************************
2289:rtos/uC-FS/Source/fs_dev.c **** *                                           FSDev_Unlock()
2290:rtos/uC-FS/Source/fs_dev.c **** *
2291:rtos/uC-FS/Source/fs_dev.c **** * Description : Release device lock.
2292:rtos/uC-FS/Source/fs_dev.c **** *
2293:rtos/uC-FS/Source/fs_dev.c **** * Argument(s) : p_dev       Pointer to device.
2294:rtos/uC-FS/Source/fs_dev.c **** *               -----       Argument validated by caller.
2295:rtos/uC-FS/Source/fs_dev.c **** *
2296:rtos/uC-FS/Source/fs_dev.c **** * Return(s)   : none.
2297:rtos/uC-FS/Source/fs_dev.c **** *
2298:rtos/uC-FS/Source/fs_dev.c **** * Note(s)     : none.
2299:rtos/uC-FS/Source/fs_dev.c **** ***************************************************************************************************
2300:rtos/uC-FS/Source/fs_dev.c **** */
2301:rtos/uC-FS/Source/fs_dev.c **** 
2302:rtos/uC-FS/Source/fs_dev.c **** void  FSDev_Unlock (FS_DEV  *p_dev)
2303:rtos/uC-FS/Source/fs_dev.c **** {
2304:rtos/uC-FS/Source/fs_dev.c ****                                                                 /* ----------------- RELEASE DEV LO
2305:rtos/uC-FS/Source/fs_dev.c ****     FS_OS_DevUnlock(p_dev->ID);
2306:rtos/uC-FS/Source/fs_dev.c **** }
2307:rtos/uC-FS/Source/fs_dev.c **** 
2308:rtos/uC-FS/Source/fs_dev.c **** 
2309:rtos/uC-FS/Source/fs_dev.c **** /*
2310:rtos/uC-FS/Source/fs_dev.c **** ***************************************************************************************************
ARM GAS  /tmp/cccHmdnc.s 			page 42


2311:rtos/uC-FS/Source/fs_dev.c **** *                                         FSDev_QueryLocked()
2312:rtos/uC-FS/Source/fs_dev.c **** *
2313:rtos/uC-FS/Source/fs_dev.c **** * Description : Obtain info about a device.
2314:rtos/uC-FS/Source/fs_dev.c **** *
2315:rtos/uC-FS/Source/fs_dev.c **** * Argument(s) : p_dev       Pointer to device.
2316:rtos/uC-FS/Source/fs_dev.c **** *               ----------  Argument validated by caller.
2317:rtos/uC-FS/Source/fs_dev.c **** *
2318:rtos/uC-FS/Source/fs_dev.c **** *               p_info      Pointer to structure that will receive device information.
2319:rtos/uC-FS/Source/fs_dev.c **** *               ----------  Argument validated by caller.
2320:rtos/uC-FS/Source/fs_dev.c **** *
2321:rtos/uC-FS/Source/fs_dev.c **** *               p_err       Pointer to variable that will receive the return error code from this f
2322:rtos/uC-FS/Source/fs_dev.c **** *               ----------  Argument validated by caller.
2323:rtos/uC-FS/Source/fs_dev.c **** *
2324:rtos/uC-FS/Source/fs_dev.c **** *                               FS_ERR_NONE                    Device information obtained.
2325:rtos/uC-FS/Source/fs_dev.c **** *
2326:rtos/uC-FS/Source/fs_dev.c **** *                                                              ------ RETURNED BY DEV DRV's Query()
2327:rtos/uC-FS/Source/fs_dev.c **** *                               FS_ERR_DEV_INVALID_LOW_FMT     Device needs to be low-level formatt
2328:rtos/uC-FS/Source/fs_dev.c **** *                               FS_ERR_DEV_IO                  Device I/O error.
2329:rtos/uC-FS/Source/fs_dev.c **** *                               FS_ERR_DEV_TIMEOUT             Device timeout error.
2330:rtos/uC-FS/Source/fs_dev.c **** *                               FS_ERR_DEV_NOT_PRESENT         Device is not present.
2331:rtos/uC-FS/Source/fs_dev.c **** *
2332:rtos/uC-FS/Source/fs_dev.c **** * Return(s)   : none.
2333:rtos/uC-FS/Source/fs_dev.c **** *
2334:rtos/uC-FS/Source/fs_dev.c **** * Note(s)     : (1) The function caller MUST have acquired a reference to the device & hold the dev
2335:rtos/uC-FS/Source/fs_dev.c **** *
2336:rtos/uC-FS/Source/fs_dev.c **** *               (2) Device state change will result from device I/O, not present or timeout error.
2337:rtos/uC-FS/Source/fs_dev.c **** ***************************************************************************************************
2338:rtos/uC-FS/Source/fs_dev.c **** */
2339:rtos/uC-FS/Source/fs_dev.c **** 
2340:rtos/uC-FS/Source/fs_dev.c **** void  FSDev_QueryLocked (FS_DEV       *p_dev,
2341:rtos/uC-FS/Source/fs_dev.c ****                          FS_DEV_INFO  *p_info,
2342:rtos/uC-FS/Source/fs_dev.c ****                          FS_ERR       *p_err)
2343:rtos/uC-FS/Source/fs_dev.c **** {
2344:rtos/uC-FS/Source/fs_dev.c ****                                                                 /* ------------------- GET DEV INFO
2345:rtos/uC-FS/Source/fs_dev.c ****     p_dev->DevDrvPtr->Query(p_dev,                              /* Get dev info.                   
2346:rtos/uC-FS/Source/fs_dev.c ****                             p_info,
2347:rtos/uC-FS/Source/fs_dev.c ****                             p_err);
2348:rtos/uC-FS/Source/fs_dev.c **** 
2349:rtos/uC-FS/Source/fs_dev.c **** 
2350:rtos/uC-FS/Source/fs_dev.c **** 
2351:rtos/uC-FS/Source/fs_dev.c ****                                                                 /* -------------------- HANDLE ERR 
2352:rtos/uC-FS/Source/fs_dev.c ****     FSDev_HandleErr(p_dev, *p_err);                             /* See Note #2.                    
2353:rtos/uC-FS/Source/fs_dev.c ****     p_info->State = p_dev->State;
2354:rtos/uC-FS/Source/fs_dev.c **** }
2355:rtos/uC-FS/Source/fs_dev.c **** 
2356:rtos/uC-FS/Source/fs_dev.c **** 
2357:rtos/uC-FS/Source/fs_dev.c **** /*
2358:rtos/uC-FS/Source/fs_dev.c **** ***************************************************************************************************
2359:rtos/uC-FS/Source/fs_dev.c **** *                                          FSDev_RdLocked()
2360:rtos/uC-FS/Source/fs_dev.c **** *
2361:rtos/uC-FS/Source/fs_dev.c **** * Description : Read data from device sector(s).
2362:rtos/uC-FS/Source/fs_dev.c **** *
2363:rtos/uC-FS/Source/fs_dev.c **** * Argument(s) : p_dev       Pointer to device.
2364:rtos/uC-FS/Source/fs_dev.c **** *               ----------  Argument validated by caller.
2365:rtos/uC-FS/Source/fs_dev.c **** *
2366:rtos/uC-FS/Source/fs_dev.c **** *               p_dest      Pointer to destination buffer.
2367:rtos/uC-FS/Source/fs_dev.c **** *               ----------  Argument validated by caller.
ARM GAS  /tmp/cccHmdnc.s 			page 43


2368:rtos/uC-FS/Source/fs_dev.c **** *
2369:rtos/uC-FS/Source/fs_dev.c **** *               start       Start sector of read.
2370:rtos/uC-FS/Source/fs_dev.c **** *
2371:rtos/uC-FS/Source/fs_dev.c **** *               cnt         Number of sectors to read.
2372:rtos/uC-FS/Source/fs_dev.c **** *
2373:rtos/uC-FS/Source/fs_dev.c **** *               p_err       Pointer to variable that will receive the return error code from this f
2374:rtos/uC-FS/Source/fs_dev.c **** *               ----------  Argument validated by caller.
2375:rtos/uC-FS/Source/fs_dev.c **** *
2376:rtos/uC-FS/Source/fs_dev.c **** *                               FS_ERR_NONE                    Device sector(s) read.
2377:rtos/uC-FS/Source/fs_dev.c **** *                               FS_ERR_DEV_INVALID_SEC_NBR     Sector start or count invalid.
2378:rtos/uC-FS/Source/fs_dev.c **** *
2379:rtos/uC-FS/Source/fs_dev.c **** *                                                              ------- RETURNED BY DEV DRV's Rd() -
2380:rtos/uC-FS/Source/fs_dev.c **** *                               FS_ERR_DEV_INVALID_LOW_FMT     Device needs to be low-level formatt
2381:rtos/uC-FS/Source/fs_dev.c **** *                               FS_ERR_DEV_IO                  Device I/O error.
2382:rtos/uC-FS/Source/fs_dev.c **** *                               FS_ERR_DEV_TIMEOUT             Device timeout error.
2383:rtos/uC-FS/Source/fs_dev.c **** *                               FS_ERR_DEV_NOT_PRESENT         Device is not present.
2384:rtos/uC-FS/Source/fs_dev.c **** *
2385:rtos/uC-FS/Source/fs_dev.c **** * Return(s)   : none.
2386:rtos/uC-FS/Source/fs_dev.c **** *
2387:rtos/uC-FS/Source/fs_dev.c **** * Note(s)     : (1) The function caller MUST have acquired a reference to the device & hold the dev
2388:rtos/uC-FS/Source/fs_dev.c **** *
2389:rtos/uC-FS/Source/fs_dev.c **** *               (2) Device state change will result from device I/O, not present or timeout error.
2390:rtos/uC-FS/Source/fs_dev.c **** ***************************************************************************************************
2391:rtos/uC-FS/Source/fs_dev.c **** */
2392:rtos/uC-FS/Source/fs_dev.c **** 
2393:rtos/uC-FS/Source/fs_dev.c **** void  FSDev_RdLocked (FS_DEV      *p_dev,
2394:rtos/uC-FS/Source/fs_dev.c ****                       void        *p_dest,
2395:rtos/uC-FS/Source/fs_dev.c ****                       FS_SEC_NBR   start,
2396:rtos/uC-FS/Source/fs_dev.c ****                       FS_SEC_QTY   cnt,
2397:rtos/uC-FS/Source/fs_dev.c ****                       FS_ERR      *p_err)
2398:rtos/uC-FS/Source/fs_dev.c **** {
2399:rtos/uC-FS/Source/fs_dev.c ****     FS_SEC_QTY  size;
2400:rtos/uC-FS/Source/fs_dev.c **** 
2401:rtos/uC-FS/Source/fs_dev.c **** 
2402:rtos/uC-FS/Source/fs_dev.c **** 
2403:rtos/uC-FS/Source/fs_dev.c ****                                                                 /* ------------------ VALIDATE ARGS
2404:rtos/uC-FS/Source/fs_dev.c ****     size = p_dev->Size;
2405:rtos/uC-FS/Source/fs_dev.c **** 
2406:rtos/uC-FS/Source/fs_dev.c ****     if (cnt == 0u) {
2407:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_NONE;
2408:rtos/uC-FS/Source/fs_dev.c ****         return;
2409:rtos/uC-FS/Source/fs_dev.c ****     }
2410:rtos/uC-FS/Source/fs_dev.c **** 
2411:rtos/uC-FS/Source/fs_dev.c ****     if (start > size) {
2412:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_DEV_INVALID_SEC_NBR;
2413:rtos/uC-FS/Source/fs_dev.c ****         return;
2414:rtos/uC-FS/Source/fs_dev.c ****     }
2415:rtos/uC-FS/Source/fs_dev.c **** 
2416:rtos/uC-FS/Source/fs_dev.c ****     if (start + cnt > size) {
2417:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_DEV_INVALID_SEC_NBR;
2418:rtos/uC-FS/Source/fs_dev.c ****         return;
2419:rtos/uC-FS/Source/fs_dev.c ****     }
2420:rtos/uC-FS/Source/fs_dev.c **** 
2421:rtos/uC-FS/Source/fs_dev.c **** 
2422:rtos/uC-FS/Source/fs_dev.c **** 
2423:rtos/uC-FS/Source/fs_dev.c ****                                                                 /* ---------------------- RD DEV --
2424:rtos/uC-FS/Source/fs_dev.c ****     p_dev->DevDrvPtr->Rd(p_dev,
ARM GAS  /tmp/cccHmdnc.s 			page 44


2425:rtos/uC-FS/Source/fs_dev.c ****                          p_dest,
2426:rtos/uC-FS/Source/fs_dev.c ****                          start,
2427:rtos/uC-FS/Source/fs_dev.c ****                          cnt,
2428:rtos/uC-FS/Source/fs_dev.c ****                          p_err);
2429:rtos/uC-FS/Source/fs_dev.c **** 
2430:rtos/uC-FS/Source/fs_dev.c **** 
2431:rtos/uC-FS/Source/fs_dev.c **** 
2432:rtos/uC-FS/Source/fs_dev.c ****                                                                 /* ----------------- UPDATE DEV STA
2433:rtos/uC-FS/Source/fs_dev.c ****     FS_CTR_STAT_ADD(p_dev->StatRdSecCtr, (FS_CTR)cnt);
2434:rtos/uC-FS/Source/fs_dev.c **** 
2435:rtos/uC-FS/Source/fs_dev.c **** 
2436:rtos/uC-FS/Source/fs_dev.c **** 
2437:rtos/uC-FS/Source/fs_dev.c ****                                                                 /* -------------------- HANDLE ERR 
2438:rtos/uC-FS/Source/fs_dev.c ****     FSDev_HandleErr(p_dev, *p_err);                             /* See Note #2.                    
2439:rtos/uC-FS/Source/fs_dev.c **** }
2440:rtos/uC-FS/Source/fs_dev.c **** 
2441:rtos/uC-FS/Source/fs_dev.c **** 
2442:rtos/uC-FS/Source/fs_dev.c **** /*
2443:rtos/uC-FS/Source/fs_dev.c **** ***************************************************************************************************
2444:rtos/uC-FS/Source/fs_dev.c **** *                                          FSDev_RefreshLocked()
2445:rtos/uC-FS/Source/fs_dev.c **** *
2446:rtos/uC-FS/Source/fs_dev.c **** * Description : Refresh a device.
2447:rtos/uC-FS/Source/fs_dev.c **** *
2448:rtos/uC-FS/Source/fs_dev.c **** * Argument(s) : p_dev       Pointer to device.
2449:rtos/uC-FS/Source/fs_dev.c **** *               ----------  Argument validated by caller.
2450:rtos/uC-FS/Source/fs_dev.c **** *
2451:rtos/uC-FS/Source/fs_dev.c **** *               p_err       Pointer to variable that will receive the return error code from this f
2452:rtos/uC-FS/Source/fs_dev.c **** *               ----------  Argument validated by caller.
2453:rtos/uC-FS/Source/fs_dev.c **** *
2454:rtos/uC-FS/Source/fs_dev.c **** *                               FS_ERR_NONE                    Device refreshed & present.
2455:rtos/uC-FS/Source/fs_dev.c **** *                               FS_ERR_DEV_INVALID_SEC_SIZE    Invalid device sector size.
2456:rtos/uC-FS/Source/fs_dev.c **** *                               FS_ERR_DEV_INVALID_SIZE        Invalid device size.
2457:rtos/uC-FS/Source/fs_dev.c **** *                               FS_ERR_DEV_UNKNOWN             Unknown device error.
2458:rtos/uC-FS/Source/fs_dev.c **** *
2459:rtos/uC-FS/Source/fs_dev.c **** *                                                              ----- RETURNED BY DEV DRV's IO_Ctrl(
2460:rtos/uC-FS/Source/fs_dev.c **** *                               FS_ERR_DEV_INVALID_UNIT_NBR    Device unit number is invalid.
2461:rtos/uC-FS/Source/fs_dev.c **** *                               FS_ERR_DEV_IO                  Device I/O error.
2462:rtos/uC-FS/Source/fs_dev.c **** *                               FS_ERR_DEV_NOT_OPEN            Device is not open.
2463:rtos/uC-FS/Source/fs_dev.c **** *                               FS_ERR_DEV_NOT_PRESENT         Device is not present.
2464:rtos/uC-FS/Source/fs_dev.c **** *                               FS_ERR_DEV_TIMEOUT             Device timeout.
2465:rtos/uC-FS/Source/fs_dev.c **** *
2466:rtos/uC-FS/Source/fs_dev.c **** * Return(s)   : DEF_YES, if device has     changed.
2467:rtos/uC-FS/Source/fs_dev.c **** *               DEF_NO,  if device has NOT changed.
2468:rtos/uC-FS/Source/fs_dev.c **** *
2469:rtos/uC-FS/Source/fs_dev.c **** * Note(s)     : (1) The function caller MUST have acquired a reference to the device & hold the dev
2470:rtos/uC-FS/Source/fs_dev.c **** *
2471:rtos/uC-FS/Source/fs_dev.c **** *               (2) If device has changed, all volumes open on the device must be refreshed & all f
2472:rtos/uC-FS/Source/fs_dev.c **** *                   closed and reopened.
2473:rtos/uC-FS/Source/fs_dev.c **** ***************************************************************************************************
2474:rtos/uC-FS/Source/fs_dev.c **** */
2475:rtos/uC-FS/Source/fs_dev.c **** 
2476:rtos/uC-FS/Source/fs_dev.c **** CPU_BOOLEAN  FSDev_RefreshLocked (FS_DEV  *p_dev,
2477:rtos/uC-FS/Source/fs_dev.c ****                                   FS_ERR  *p_err)
2478:rtos/uC-FS/Source/fs_dev.c **** {
2479:rtos/uC-FS/Source/fs_dev.c ****     FS_DEV_INFO   dev_info;
2480:rtos/uC-FS/Source/fs_dev.c ****     CPU_BOOLEAN   chngd;
2481:rtos/uC-FS/Source/fs_dev.c ****     CPU_BOOLEAN   chngd_dev;
ARM GAS  /tmp/cccHmdnc.s 			page 45


2482:rtos/uC-FS/Source/fs_dev.c ****     FS_SEC_SIZE   sec_size_prev;
2483:rtos/uC-FS/Source/fs_dev.c ****     FS_SEC_QTY    size_prev;
2484:rtos/uC-FS/Source/fs_dev.c ****     FS_STATE      state_prev;
2485:rtos/uC-FS/Source/fs_dev.c ****     FS_ERR        query_err;
2486:rtos/uC-FS/Source/fs_dev.c **** 
2487:rtos/uC-FS/Source/fs_dev.c **** 
2488:rtos/uC-FS/Source/fs_dev.c ****                                                                 /* -------------------- REFRESH DEV
2489:rtos/uC-FS/Source/fs_dev.c ****     sec_size_prev = p_dev->SecSize;
2490:rtos/uC-FS/Source/fs_dev.c ****     size_prev     = p_dev->Size;
2491:rtos/uC-FS/Source/fs_dev.c ****     state_prev    = p_dev->State;
2492:rtos/uC-FS/Source/fs_dev.c **** 
2493:rtos/uC-FS/Source/fs_dev.c ****     p_dev->DevDrvPtr->IO_Ctrl(         p_dev,
2494:rtos/uC-FS/Source/fs_dev.c ****                                        FS_DEV_IO_CTRL_REFRESH,
2495:rtos/uC-FS/Source/fs_dev.c ****                               (void *)&chngd_dev,
2496:rtos/uC-FS/Source/fs_dev.c ****                                        p_err);
2497:rtos/uC-FS/Source/fs_dev.c **** 
2498:rtos/uC-FS/Source/fs_dev.c ****     FSDev_HandleErr(p_dev, *p_err);
2499:rtos/uC-FS/Source/fs_dev.c **** 
2500:rtos/uC-FS/Source/fs_dev.c ****     if (*p_err == FS_ERR_DEV_INVALID_IO_CTRL) {                 /* If dev drv does not support I/O 
2501:rtos/uC-FS/Source/fs_dev.c ****         switch (p_dev->State) {
2502:rtos/uC-FS/Source/fs_dev.c ****             case FS_DEV_STATE_LOW_FMT_VALID:
2503:rtos/uC-FS/Source/fs_dev.c ****                 *p_err = FS_ERR_NONE;
2504:rtos/uC-FS/Source/fs_dev.c ****                  break;
2505:rtos/uC-FS/Source/fs_dev.c **** 
2506:rtos/uC-FS/Source/fs_dev.c **** 
2507:rtos/uC-FS/Source/fs_dev.c ****             case FS_DEV_STATE_PRESENT:
2508:rtos/uC-FS/Source/fs_dev.c ****                 *p_err = FS_ERR_DEV_INVALID_LOW_FMT;
2509:rtos/uC-FS/Source/fs_dev.c ****                  break;
2510:rtos/uC-FS/Source/fs_dev.c **** 
2511:rtos/uC-FS/Source/fs_dev.c **** 
2512:rtos/uC-FS/Source/fs_dev.c ****             case FS_DEV_STATE_OPEN:
2513:rtos/uC-FS/Source/fs_dev.c ****             default:
2514:rtos/uC-FS/Source/fs_dev.c ****                 *p_err = FS_ERR_DEV_NOT_PRESENT;
2515:rtos/uC-FS/Source/fs_dev.c ****                  break;
2516:rtos/uC-FS/Source/fs_dev.c ****         }
2517:rtos/uC-FS/Source/fs_dev.c **** 
2518:rtos/uC-FS/Source/fs_dev.c ****         return (DEF_NO);                                        /* ... dev is unchanged.           
2519:rtos/uC-FS/Source/fs_dev.c ****     }
2520:rtos/uC-FS/Source/fs_dev.c **** 
2521:rtos/uC-FS/Source/fs_dev.c **** 
2522:rtos/uC-FS/Source/fs_dev.c **** 
2523:rtos/uC-FS/Source/fs_dev.c ****                                                                 /* ---------------- DETERMINE DEV S
2524:rtos/uC-FS/Source/fs_dev.c ****     switch (*p_err) {
2525:rtos/uC-FS/Source/fs_dev.c ****         case FS_ERR_NONE:
2526:rtos/uC-FS/Source/fs_dev.c ****                                                                 /* Get dev info.                   
2527:rtos/uC-FS/Source/fs_dev.c ****              p_dev->DevDrvPtr->Query(p_dev, &dev_info, &query_err);
2528:rtos/uC-FS/Source/fs_dev.c ****              if(query_err != FS_ERR_NONE) {
2529:rtos/uC-FS/Source/fs_dev.c ****                 *p_err = query_err;
2530:rtos/uC-FS/Source/fs_dev.c ****                  return (DEF_NO);
2531:rtos/uC-FS/Source/fs_dev.c ****              }
2532:rtos/uC-FS/Source/fs_dev.c ****              p_dev->Fixed = dev_info.Fixed;
2533:rtos/uC-FS/Source/fs_dev.c ****                                                                 /* Validate size & sec size.       
2534:rtos/uC-FS/Source/fs_dev.c ****              if (FS_DEV_IS_VALID_SIZE(dev_info.Size) == DEF_YES) {
2535:rtos/uC-FS/Source/fs_dev.c ****                  if (FS_DEV_IS_VALID_SEC_SIZE(dev_info.SecSize) == DEF_YES) {
2536:rtos/uC-FS/Source/fs_dev.c ****                      p_dev->State   = FS_DEV_STATE_LOW_FMT_VALID;
2537:rtos/uC-FS/Source/fs_dev.c ****                      p_dev->Size    = dev_info.Size;
2538:rtos/uC-FS/Source/fs_dev.c ****                      p_dev->SecSize = dev_info.SecSize;
ARM GAS  /tmp/cccHmdnc.s 			page 46


2539:rtos/uC-FS/Source/fs_dev.c ****                  } else {
2540:rtos/uC-FS/Source/fs_dev.c ****                     *p_err = FS_ERR_DEV_INVALID_SEC_SIZE;
2541:rtos/uC-FS/Source/fs_dev.c ****                  }
2542:rtos/uC-FS/Source/fs_dev.c ****              } else {
2543:rtos/uC-FS/Source/fs_dev.c ****                 *p_err = FS_ERR_DEV_INVALID_SIZE;
2544:rtos/uC-FS/Source/fs_dev.c ****              }
2545:rtos/uC-FS/Source/fs_dev.c ****              break;
2546:rtos/uC-FS/Source/fs_dev.c **** 
2547:rtos/uC-FS/Source/fs_dev.c **** 
2548:rtos/uC-FS/Source/fs_dev.c ****         case FS_ERR_DEV_INVALID_LOW_FMT:
2549:rtos/uC-FS/Source/fs_dev.c ****              p_dev->DevDrvPtr->Query(p_dev, &dev_info, &query_err);
2550:rtos/uC-FS/Source/fs_dev.c ****              if(query_err != FS_ERR_NONE) {
2551:rtos/uC-FS/Source/fs_dev.c ****                 *p_err = query_err;
2552:rtos/uC-FS/Source/fs_dev.c ****                  return (DEF_NO);
2553:rtos/uC-FS/Source/fs_dev.c ****              }
2554:rtos/uC-FS/Source/fs_dev.c ****              p_dev->Fixed = dev_info.Fixed;
2555:rtos/uC-FS/Source/fs_dev.c ****              p_dev->State = FS_DEV_STATE_PRESENT;
2556:rtos/uC-FS/Source/fs_dev.c ****              break;
2557:rtos/uC-FS/Source/fs_dev.c **** 
2558:rtos/uC-FS/Source/fs_dev.c **** 
2559:rtos/uC-FS/Source/fs_dev.c ****         case FS_ERR_DEV_NOT_PRESENT:
2560:rtos/uC-FS/Source/fs_dev.c ****         case FS_ERR_DEV_IO:
2561:rtos/uC-FS/Source/fs_dev.c ****         case FS_ERR_DEV_TIMEOUT:
2562:rtos/uC-FS/Source/fs_dev.c ****         case FS_ERR_DEV_INVALID_UNIT_NBR:
2563:rtos/uC-FS/Source/fs_dev.c ****         case FS_ERR_DEV_INVALID_CFG:
2564:rtos/uC-FS/Source/fs_dev.c ****              p_dev->DevDrvPtr->Query(p_dev, &dev_info, &query_err);
2565:rtos/uC-FS/Source/fs_dev.c ****              if(query_err != FS_ERR_NONE) {
2566:rtos/uC-FS/Source/fs_dev.c ****                 *p_err = query_err;
2567:rtos/uC-FS/Source/fs_dev.c ****                  return (DEF_NO);
2568:rtos/uC-FS/Source/fs_dev.c ****              }
2569:rtos/uC-FS/Source/fs_dev.c ****              p_dev->Fixed = dev_info.Fixed;
2570:rtos/uC-FS/Source/fs_dev.c ****              p_dev->State = FS_DEV_STATE_OPEN;
2571:rtos/uC-FS/Source/fs_dev.c ****              break;
2572:rtos/uC-FS/Source/fs_dev.c **** 
2573:rtos/uC-FS/Source/fs_dev.c **** 
2574:rtos/uC-FS/Source/fs_dev.c ****         case FS_ERR_DEV_ALREADY_OPEN:
2575:rtos/uC-FS/Source/fs_dev.c ****         default:
2576:rtos/uC-FS/Source/fs_dev.c ****             *p_err = FS_ERR_DEV_UNKNOWN;
2577:rtos/uC-FS/Source/fs_dev.c ****              p_dev->State = FS_DEV_STATE_OPEN;
2578:rtos/uC-FS/Source/fs_dev.c ****              break;
2579:rtos/uC-FS/Source/fs_dev.c ****     }
2580:rtos/uC-FS/Source/fs_dev.c **** 
2581:rtos/uC-FS/Source/fs_dev.c **** 
2582:rtos/uC-FS/Source/fs_dev.c **** 
2583:rtos/uC-FS/Source/fs_dev.c ****                                                                 /* -------------------- HANDLE CHNG
2584:rtos/uC-FS/Source/fs_dev.c ****     chngd = (state_prev != p_dev->State) ? DEF_YES : DEF_NO;    /* Chk state change.               
2585:rtos/uC-FS/Source/fs_dev.c **** 
2586:rtos/uC-FS/Source/fs_dev.c ****     if (chngd == DEF_NO) {
2587:rtos/uC-FS/Source/fs_dev.c ****         switch (p_dev->State) {
2588:rtos/uC-FS/Source/fs_dev.c ****             case FS_DEV_STATE_PRESENT:                          /* If dev present ...              
2589:rtos/uC-FS/Source/fs_dev.c ****                  chngd = chngd_dev;                             /* ... dev chngd if drv asserts dev
2590:rtos/uC-FS/Source/fs_dev.c ****                  break;
2591:rtos/uC-FS/Source/fs_dev.c **** 
2592:rtos/uC-FS/Source/fs_dev.c **** 
2593:rtos/uC-FS/Source/fs_dev.c ****             case FS_DEV_STATE_LOW_FMT_VALID:                    /* If dev present & low fmt'd      
2594:rtos/uC-FS/Source/fs_dev.c ****                  if (chngd_dev == DEF_NO) {                     /* ... even if drv asserts dev not 
2595:rtos/uC-FS/Source/fs_dev.c ****                                                                 /* ... chk dev params.             
ARM GAS  /tmp/cccHmdnc.s 			page 47


2596:rtos/uC-FS/Source/fs_dev.c ****                      if ((sec_size_prev != p_dev->SecSize) ||
2597:rtos/uC-FS/Source/fs_dev.c ****                          (size_prev     != p_dev->Size)) {
2598:rtos/uC-FS/Source/fs_dev.c ****                         chngd = DEF_YES;
2599:rtos/uC-FS/Source/fs_dev.c ****                      }
2600:rtos/uC-FS/Source/fs_dev.c **** 
2601:rtos/uC-FS/Source/fs_dev.c ****                  } else {                                       /* If drv asserts dev chngd ...    
2602:rtos/uC-FS/Source/fs_dev.c ****                     chngd = DEF_YES;                            /* ... dev chngd.                  
2603:rtos/uC-FS/Source/fs_dev.c ****                  }
2604:rtos/uC-FS/Source/fs_dev.c ****                  break;
2605:rtos/uC-FS/Source/fs_dev.c **** 
2606:rtos/uC-FS/Source/fs_dev.c **** 
2607:rtos/uC-FS/Source/fs_dev.c ****             case FS_DEV_STATE_CLOSED:
2608:rtos/uC-FS/Source/fs_dev.c ****             case FS_DEV_STATE_CLOSING:
2609:rtos/uC-FS/Source/fs_dev.c ****             case FS_DEV_STATE_OPENING:
2610:rtos/uC-FS/Source/fs_dev.c ****             case FS_DEV_STATE_OPEN:
2611:rtos/uC-FS/Source/fs_dev.c ****             default:
2612:rtos/uC-FS/Source/fs_dev.c ****                  break;
2613:rtos/uC-FS/Source/fs_dev.c ****         }
2614:rtos/uC-FS/Source/fs_dev.c ****     }
2615:rtos/uC-FS/Source/fs_dev.c **** 
2616:rtos/uC-FS/Source/fs_dev.c ****     if (chngd == DEF_YES) {
2617:rtos/uC-FS/Source/fs_dev.c ****         p_dev->RefreshCnt++;
2618:rtos/uC-FS/Source/fs_dev.c ****     }
2619:rtos/uC-FS/Source/fs_dev.c **** 
2620:rtos/uC-FS/Source/fs_dev.c ****     return (chngd);
2621:rtos/uC-FS/Source/fs_dev.c **** }
2622:rtos/uC-FS/Source/fs_dev.c **** 
2623:rtos/uC-FS/Source/fs_dev.c **** 
2624:rtos/uC-FS/Source/fs_dev.c **** /*
2625:rtos/uC-FS/Source/fs_dev.c **** ***************************************************************************************************
2626:rtos/uC-FS/Source/fs_dev.c **** *                                        FSDev_ReleaseLocked()
2627:rtos/uC-FS/Source/fs_dev.c **** *
2628:rtos/uC-FS/Source/fs_dev.c **** * Description : Release device sector(s).
2629:rtos/uC-FS/Source/fs_dev.c **** *
2630:rtos/uC-FS/Source/fs_dev.c **** * Argument(s) : p_dev       Pointer to device.
2631:rtos/uC-FS/Source/fs_dev.c **** *               ----------  Argument validated by caller.
2632:rtos/uC-FS/Source/fs_dev.c **** *
2633:rtos/uC-FS/Source/fs_dev.c **** *               start       Start sector of released.
2634:rtos/uC-FS/Source/fs_dev.c **** *
2635:rtos/uC-FS/Source/fs_dev.c **** *               cnt         Number of sectors to released.
2636:rtos/uC-FS/Source/fs_dev.c **** *
2637:rtos/uC-FS/Source/fs_dev.c **** *               p_err       Pointer to variable that will receive the return error code from this f
2638:rtos/uC-FS/Source/fs_dev.c **** *               ----------  Argument validated by caller.
2639:rtos/uC-FS/Source/fs_dev.c **** *
2640:rtos/uC-FS/Source/fs_dev.c **** *                               FS_ERR_NONE                    Device sector(s) released.
2641:rtos/uC-FS/Source/fs_dev.c **** *                               FS_ERR_DEV_INVALID_SEC_NBR     Sector start or count invalid.
2642:rtos/uC-FS/Source/fs_dev.c **** *
2643:rtos/uC-FS/Source/fs_dev.c **** *                                                              ----- RETURNED BY DEV DRV's IO_Ctrl(
2644:rtos/uC-FS/Source/fs_dev.c **** *                               FS_ERR_DEV_INVALID_LOW_FMT     Device needs to be low-level formatt
2645:rtos/uC-FS/Source/fs_dev.c **** *                               FS_ERR_DEV_IO                  Device I/O error.
2646:rtos/uC-FS/Source/fs_dev.c **** *                               FS_ERR_DEV_TIMEOUT             Device timeout error.
2647:rtos/uC-FS/Source/fs_dev.c **** *                               FS_ERR_DEV_NOT_PRESENT         Device is not present.
2648:rtos/uC-FS/Source/fs_dev.c **** *
2649:rtos/uC-FS/Source/fs_dev.c **** * Return(s)   : none.
2650:rtos/uC-FS/Source/fs_dev.c **** *
2651:rtos/uC-FS/Source/fs_dev.c **** * Note(s)     : (1) The function caller MUST have acquired a reference to the device & hold the dev
2652:rtos/uC-FS/Source/fs_dev.c **** *
ARM GAS  /tmp/cccHmdnc.s 			page 48


2653:rtos/uC-FS/Source/fs_dev.c **** *               (2) Device state change will result from device I/O, not present or timeout error.
2654:rtos/uC-FS/Source/fs_dev.c **** ***************************************************************************************************
2655:rtos/uC-FS/Source/fs_dev.c **** */
2656:rtos/uC-FS/Source/fs_dev.c **** 
2657:rtos/uC-FS/Source/fs_dev.c **** #if (FS_CFG_RD_ONLY_EN == DEF_DISABLED)
2658:rtos/uC-FS/Source/fs_dev.c **** void  FSDev_ReleaseLocked (FS_DEV      *p_dev,
2659:rtos/uC-FS/Source/fs_dev.c ****                            FS_SEC_NBR   start,
2660:rtos/uC-FS/Source/fs_dev.c ****                            FS_SEC_QTY   cnt,
2661:rtos/uC-FS/Source/fs_dev.c ****                            FS_ERR      *p_err)
2662:rtos/uC-FS/Source/fs_dev.c **** {
2663:rtos/uC-FS/Source/fs_dev.c ****     FS_SEC_QTY  size;
2664:rtos/uC-FS/Source/fs_dev.c **** 
2665:rtos/uC-FS/Source/fs_dev.c **** 
2666:rtos/uC-FS/Source/fs_dev.c ****                                                                 /* ------------------ VALIDATE ARGS
2667:rtos/uC-FS/Source/fs_dev.c ****     size = p_dev->Size;
2668:rtos/uC-FS/Source/fs_dev.c **** 
2669:rtos/uC-FS/Source/fs_dev.c ****     if (cnt == 0u) {
2670:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_NONE;
2671:rtos/uC-FS/Source/fs_dev.c ****         return;
2672:rtos/uC-FS/Source/fs_dev.c ****     }
2673:rtos/uC-FS/Source/fs_dev.c **** 
2674:rtos/uC-FS/Source/fs_dev.c ****     if (start > size) {
2675:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_DEV_INVALID_SEC_NBR;
2676:rtos/uC-FS/Source/fs_dev.c ****         return;
2677:rtos/uC-FS/Source/fs_dev.c ****     }
2678:rtos/uC-FS/Source/fs_dev.c **** 
2679:rtos/uC-FS/Source/fs_dev.c ****     if (start + cnt > size) {
2680:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_DEV_INVALID_SEC_NBR;
2681:rtos/uC-FS/Source/fs_dev.c ****         return;
2682:rtos/uC-FS/Source/fs_dev.c ****     }
2683:rtos/uC-FS/Source/fs_dev.c **** 
2684:rtos/uC-FS/Source/fs_dev.c **** 
2685:rtos/uC-FS/Source/fs_dev.c **** 
2686:rtos/uC-FS/Source/fs_dev.c ****                                                                 /* ------------------- RELEASE SECs
2687:rtos/uC-FS/Source/fs_dev.c ****    *p_err = FS_ERR_NONE;
2688:rtos/uC-FS/Source/fs_dev.c ****     while ((*p_err == FS_ERR_NONE) &&
2689:rtos/uC-FS/Source/fs_dev.c ****            ( cnt    > 0u         )   ) {
2690:rtos/uC-FS/Source/fs_dev.c ****         p_dev->DevDrvPtr->IO_Ctrl(         p_dev,
2691:rtos/uC-FS/Source/fs_dev.c ****                                            FS_DEV_IO_CTRL_SEC_RELEASE,
2692:rtos/uC-FS/Source/fs_dev.c ****                                   (void *)&start,
2693:rtos/uC-FS/Source/fs_dev.c ****                                            p_err);
2694:rtos/uC-FS/Source/fs_dev.c **** 
2695:rtos/uC-FS/Source/fs_dev.c ****         cnt--;
2696:rtos/uC-FS/Source/fs_dev.c ****         start++;
2697:rtos/uC-FS/Source/fs_dev.c ****     }
2698:rtos/uC-FS/Source/fs_dev.c **** 
2699:rtos/uC-FS/Source/fs_dev.c **** 
2700:rtos/uC-FS/Source/fs_dev.c ****                                                                 /* -------------------- HANDLE ERR 
2701:rtos/uC-FS/Source/fs_dev.c ****     if (*p_err == FS_ERR_DEV_INVALID_IO_CTRL) {
2702:rtos/uC-FS/Source/fs_dev.c ****         *p_err =  FS_ERR_NONE;
2703:rtos/uC-FS/Source/fs_dev.c ****     }
2704:rtos/uC-FS/Source/fs_dev.c **** 
2705:rtos/uC-FS/Source/fs_dev.c ****     FSDev_HandleErr(p_dev, *p_err);                             /* See Note #2.                    
2706:rtos/uC-FS/Source/fs_dev.c **** }
2707:rtos/uC-FS/Source/fs_dev.c **** #endif
2708:rtos/uC-FS/Source/fs_dev.c **** 
2709:rtos/uC-FS/Source/fs_dev.c **** 
ARM GAS  /tmp/cccHmdnc.s 			page 49


2710:rtos/uC-FS/Source/fs_dev.c **** /*
2711:rtos/uC-FS/Source/fs_dev.c **** ***************************************************************************************************
2712:rtos/uC-FS/Source/fs_dev.c **** *                                           FSDev_SyncLocked()
2713:rtos/uC-FS/Source/fs_dev.c **** *
2714:rtos/uC-FS/Source/fs_dev.c **** * Description : Synchronize a device. Perform any pending operation that would otherwise prevent th
2715:rtos/uC-FS/Source/fs_dev.c **** *               device from being remounted in the current state.
2716:rtos/uC-FS/Source/fs_dev.c **** *
2717:rtos/uC-FS/Source/fs_dev.c **** * Argument(s) : p_dev       Pointer to device.
2718:rtos/uC-FS/Source/fs_dev.c **** *               ----------  Argument validated by caller.
2719:rtos/uC-FS/Source/fs_dev.c **** *
2720:rtos/uC-FS/Source/fs_dev.c **** *               p_err       Pointer to variable that will receive the return error code from this f
2721:rtos/uC-FS/Source/fs_dev.c **** *               ----------  Argument validated by caller.
2722:rtos/uC-FS/Source/fs_dev.c **** *
2723:rtos/uC-FS/Source/fs_dev.c **** *                              TDB
2724:rtos/uC-FS/Source/fs_dev.c **** *
2725:rtos/uC-FS/Source/fs_dev.c **** * Return(s)   : none.
2726:rtos/uC-FS/Source/fs_dev.c **** *
2727:rtos/uC-FS/Source/fs_dev.c **** * Note(s)     : (1) The function caller MUST have acquired a reference to the device & hold the dev
2728:rtos/uC-FS/Source/fs_dev.c **** *
2729:rtos/uC-FS/Source/fs_dev.c **** ***************************************************************************************************
2730:rtos/uC-FS/Source/fs_dev.c **** */
2731:rtos/uC-FS/Source/fs_dev.c **** 
2732:rtos/uC-FS/Source/fs_dev.c **** #if (FS_CFG_RD_ONLY_EN == DEF_DISABLED)
2733:rtos/uC-FS/Source/fs_dev.c **** void  FSDev_SyncLocked (FS_DEV  *p_dev,
2734:rtos/uC-FS/Source/fs_dev.c ****                         FS_ERR  *p_err)
2735:rtos/uC-FS/Source/fs_dev.c **** {
2736:rtos/uC-FS/Source/fs_dev.c ****     p_dev->DevDrvPtr->IO_Ctrl(p_dev,
2737:rtos/uC-FS/Source/fs_dev.c ****                               FS_DEV_IO_CTRL_SYNC,
2738:rtos/uC-FS/Source/fs_dev.c ****                               DEF_NULL,
2739:rtos/uC-FS/Source/fs_dev.c ****                               p_err);
2740:rtos/uC-FS/Source/fs_dev.c **** }
2741:rtos/uC-FS/Source/fs_dev.c **** #endif
2742:rtos/uC-FS/Source/fs_dev.c **** 
2743:rtos/uC-FS/Source/fs_dev.c **** 
2744:rtos/uC-FS/Source/fs_dev.c **** /*
2745:rtos/uC-FS/Source/fs_dev.c **** ***************************************************************************************************
2746:rtos/uC-FS/Source/fs_dev.c **** *                                          FSDev_WrLocked()
2747:rtos/uC-FS/Source/fs_dev.c **** *
2748:rtos/uC-FS/Source/fs_dev.c **** * Description : Write data to device sector(s).
2749:rtos/uC-FS/Source/fs_dev.c **** *
2750:rtos/uC-FS/Source/fs_dev.c **** * Argument(s) : p_dev       Pointer to device.
2751:rtos/uC-FS/Source/fs_dev.c **** *               ----------  Argument validated by caller.
2752:rtos/uC-FS/Source/fs_dev.c **** *
2753:rtos/uC-FS/Source/fs_dev.c **** *               p_src       Pointer to source buffer.
2754:rtos/uC-FS/Source/fs_dev.c **** *               ----------  Argument validated by caller.
2755:rtos/uC-FS/Source/fs_dev.c **** *
2756:rtos/uC-FS/Source/fs_dev.c **** *               start       Start sector of write.
2757:rtos/uC-FS/Source/fs_dev.c **** *
2758:rtos/uC-FS/Source/fs_dev.c **** *               cnt         Number of sectors to write.
2759:rtos/uC-FS/Source/fs_dev.c **** *
2760:rtos/uC-FS/Source/fs_dev.c **** *               p_err       Pointer to variable that will receive the return error code from this f
2761:rtos/uC-FS/Source/fs_dev.c **** *               ----------  Argument validated by caller.
2762:rtos/uC-FS/Source/fs_dev.c **** *
2763:rtos/uC-FS/Source/fs_dev.c **** *                               FS_ERR_NONE                    Device sector(s) read.
2764:rtos/uC-FS/Source/fs_dev.c **** *                               FS_ERR_DEV_INVALID_SEC_NBR     Sector start or count invalid.
2765:rtos/uC-FS/Source/fs_dev.c **** *
2766:rtos/uC-FS/Source/fs_dev.c **** *                                                              ------- RETURNED BY DEV DRV's Wr() -
ARM GAS  /tmp/cccHmdnc.s 			page 50


2767:rtos/uC-FS/Source/fs_dev.c **** *                               FS_ERR_DEV_INVALID_LOW_FMT     Device needs to be low-level formatt
2768:rtos/uC-FS/Source/fs_dev.c **** *                               FS_ERR_DEV_IO                  Device I/O error.
2769:rtos/uC-FS/Source/fs_dev.c **** *                               FS_ERR_DEV_TIMEOUT             Device timeout error.
2770:rtos/uC-FS/Source/fs_dev.c **** *                               FS_ERR_DEV_NOT_PRESENT         Device is not present.
2771:rtos/uC-FS/Source/fs_dev.c **** *
2772:rtos/uC-FS/Source/fs_dev.c **** * Return(s)   : none.
2773:rtos/uC-FS/Source/fs_dev.c **** *
2774:rtos/uC-FS/Source/fs_dev.c **** * Note(s)     : (1) The function caller MUST have acquired a reference to the device & hold the dev
2775:rtos/uC-FS/Source/fs_dev.c **** *
2776:rtos/uC-FS/Source/fs_dev.c **** *               (2) Device state change will result from device I/O, not present or timeout error.
2777:rtos/uC-FS/Source/fs_dev.c **** ***************************************************************************************************
2778:rtos/uC-FS/Source/fs_dev.c **** */
2779:rtos/uC-FS/Source/fs_dev.c **** 
2780:rtos/uC-FS/Source/fs_dev.c **** #if (FS_CFG_RD_ONLY_EN == DEF_DISABLED)
2781:rtos/uC-FS/Source/fs_dev.c **** void  FSDev_WrLocked (FS_DEV      *p_dev,
2782:rtos/uC-FS/Source/fs_dev.c ****                       void        *p_src,
2783:rtos/uC-FS/Source/fs_dev.c ****                       FS_SEC_NBR   start,
2784:rtos/uC-FS/Source/fs_dev.c ****                       FS_SEC_QTY   cnt,
2785:rtos/uC-FS/Source/fs_dev.c ****                       FS_ERR      *p_err)
2786:rtos/uC-FS/Source/fs_dev.c **** {
2787:rtos/uC-FS/Source/fs_dev.c ****     FS_SEC_QTY    size;
2788:rtos/uC-FS/Source/fs_dev.c **** #if (FS_CFG_DBG_WR_VERIFY_EN == DEF_ENABLED)
2789:rtos/uC-FS/Source/fs_dev.c ****     FS_BUF       *p_buf;
2790:rtos/uC-FS/Source/fs_dev.c ****     FS_SEC_NBR    sec;
2791:rtos/uC-FS/Source/fs_dev.c ****     void         *p_dest;
2792:rtos/uC-FS/Source/fs_dev.c ****     CPU_INT08U   *p_src_08;
2793:rtos/uC-FS/Source/fs_dev.c ****     CPU_BOOLEAN   cmp;
2794:rtos/uC-FS/Source/fs_dev.c ****     FS_ERR        verify_err;
2795:rtos/uC-FS/Source/fs_dev.c **** #endif
2796:rtos/uC-FS/Source/fs_dev.c **** 
2797:rtos/uC-FS/Source/fs_dev.c **** 
2798:rtos/uC-FS/Source/fs_dev.c ****                                                                 /* ------------------ VALIDATE ARGS
2799:rtos/uC-FS/Source/fs_dev.c ****     size = p_dev->Size;
2800:rtos/uC-FS/Source/fs_dev.c **** 
2801:rtos/uC-FS/Source/fs_dev.c ****     if (cnt == 0u) {
2802:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_NONE;
2803:rtos/uC-FS/Source/fs_dev.c ****         return;
2804:rtos/uC-FS/Source/fs_dev.c ****     }
2805:rtos/uC-FS/Source/fs_dev.c **** 
2806:rtos/uC-FS/Source/fs_dev.c ****     if (start > size) {
2807:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_DEV_INVALID_SEC_NBR;
2808:rtos/uC-FS/Source/fs_dev.c ****         return;
2809:rtos/uC-FS/Source/fs_dev.c ****     }
2810:rtos/uC-FS/Source/fs_dev.c **** 
2811:rtos/uC-FS/Source/fs_dev.c ****     if (start + cnt > size) {
2812:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_DEV_INVALID_SEC_NBR;
2813:rtos/uC-FS/Source/fs_dev.c ****         return;
2814:rtos/uC-FS/Source/fs_dev.c ****     }
2815:rtos/uC-FS/Source/fs_dev.c **** 
2816:rtos/uC-FS/Source/fs_dev.c **** 
2817:rtos/uC-FS/Source/fs_dev.c **** 
2818:rtos/uC-FS/Source/fs_dev.c ****                                                                 /* ---------------------- WR DEV --
2819:rtos/uC-FS/Source/fs_dev.c ****     p_dev->DevDrvPtr->Wr(p_dev,
2820:rtos/uC-FS/Source/fs_dev.c ****                          p_src,
2821:rtos/uC-FS/Source/fs_dev.c ****                          start,
2822:rtos/uC-FS/Source/fs_dev.c ****                          cnt,
2823:rtos/uC-FS/Source/fs_dev.c ****                          p_err);
ARM GAS  /tmp/cccHmdnc.s 			page 51


2824:rtos/uC-FS/Source/fs_dev.c **** 
2825:rtos/uC-FS/Source/fs_dev.c **** 
2826:rtos/uC-FS/Source/fs_dev.c **** 
2827:rtos/uC-FS/Source/fs_dev.c ****                                                                 /* ----------------- UPDATE DEV STA
2828:rtos/uC-FS/Source/fs_dev.c ****     FS_CTR_STAT_ADD(p_dev->StatWrSecCtr, (FS_CTR)cnt);
2829:rtos/uC-FS/Source/fs_dev.c **** 
2830:rtos/uC-FS/Source/fs_dev.c **** 
2831:rtos/uC-FS/Source/fs_dev.c **** 
2832:rtos/uC-FS/Source/fs_dev.c ****                                                                 /* -------------------- HANDLE ERR 
2833:rtos/uC-FS/Source/fs_dev.c ****     FSDev_HandleErr(p_dev, *p_err);                             /* See Note #2.                    
2834:rtos/uC-FS/Source/fs_dev.c **** 
2835:rtos/uC-FS/Source/fs_dev.c **** 
2836:rtos/uC-FS/Source/fs_dev.c **** 
2837:rtos/uC-FS/Source/fs_dev.c ****                                                                 /* --------------------- VERIFY WR 
2838:rtos/uC-FS/Source/fs_dev.c **** #if (FS_CFG_DBG_WR_VERIFY_EN == DEF_ENABLED)
2839:rtos/uC-FS/Source/fs_dev.c ****     if (*p_err == FS_ERR_NONE) {
2840:rtos/uC-FS/Source/fs_dev.c ****         p_buf = FSBuf_Get((FS_VOL *)0);                         /* Alloc buf.                      
2841:rtos/uC-FS/Source/fs_dev.c ****         if (p_buf == (FS_BUF *)0) {                             /* If no buf ...                   
2842:rtos/uC-FS/Source/fs_dev.c ****             FS_TRACE_DBG(("FSDev_WrLocked(): Could not verify wr, buf could not be alloc'd.\r\n"));
2843:rtos/uC-FS/Source/fs_dev.c ****             return;                                             /* ... just rtn.                   
2844:rtos/uC-FS/Source/fs_dev.c ****         }
2845:rtos/uC-FS/Source/fs_dev.c **** 
2846:rtos/uC-FS/Source/fs_dev.c ****         sec      =  start;
2847:rtos/uC-FS/Source/fs_dev.c ****         p_dest   =  p_buf->DataPtr;
2848:rtos/uC-FS/Source/fs_dev.c ****         p_src_08 = (CPU_INT08U *)p_src;
2849:rtos/uC-FS/Source/fs_dev.c ****         while (cnt > 0u) {
2850:rtos/uC-FS/Source/fs_dev.c ****             p_dev->DevDrvPtr->Rd(p_dev,                         /* Rd data wr.                     
2851:rtos/uC-FS/Source/fs_dev.c ****                                  p_dest,
2852:rtos/uC-FS/Source/fs_dev.c ****                                  sec,
2853:rtos/uC-FS/Source/fs_dev.c ****                                  1u,
2854:rtos/uC-FS/Source/fs_dev.c ****                                 &verify_err);
2855:rtos/uC-FS/Source/fs_dev.c **** 
2856:rtos/uC-FS/Source/fs_dev.c ****             if (verify_err != FS_ERR_NONE) {
2857:rtos/uC-FS/Source/fs_dev.c ****                 FS_TRACE_DBG(("FSDev_WrLocked(): Wr verify failed; could not rd dev.\r\n"));
2858:rtos/uC-FS/Source/fs_dev.c ****                 FSBuf_Free(p_buf);
2859:rtos/uC-FS/Source/fs_dev.c ****                 return;
2860:rtos/uC-FS/Source/fs_dev.c ****             }
2861:rtos/uC-FS/Source/fs_dev.c **** 
2862:rtos/uC-FS/Source/fs_dev.c ****             cmp = Mem_Cmp((void       *)p_dest,                 /* Cmp data wr to data rd.         
2863:rtos/uC-FS/Source/fs_dev.c ****                           (void       *)p_src_08,
2864:rtos/uC-FS/Source/fs_dev.c ****                           (CPU_SIZE_T  )p_dev->SecSize);
2865:rtos/uC-FS/Source/fs_dev.c **** 
2866:rtos/uC-FS/Source/fs_dev.c ****             if (cmp != DEF_YES) {
2867:rtos/uC-FS/Source/fs_dev.c ****                 FS_TRACE_DBG(("FSDev_WrLocked(): Wr verify failed at sec %d.\r\n", sec));
2868:rtos/uC-FS/Source/fs_dev.c ****                 FSBuf_Free(p_buf);
2869:rtos/uC-FS/Source/fs_dev.c ****                 return;
2870:rtos/uC-FS/Source/fs_dev.c ****             }
2871:rtos/uC-FS/Source/fs_dev.c **** 
2872:rtos/uC-FS/Source/fs_dev.c ****             cnt--;
2873:rtos/uC-FS/Source/fs_dev.c ****             sec++;
2874:rtos/uC-FS/Source/fs_dev.c ****             p_src_08 += p_dev->SecSize;
2875:rtos/uC-FS/Source/fs_dev.c ****         }
2876:rtos/uC-FS/Source/fs_dev.c **** 
2877:rtos/uC-FS/Source/fs_dev.c ****         FSBuf_Free(p_buf);
2878:rtos/uC-FS/Source/fs_dev.c ****     }
2879:rtos/uC-FS/Source/fs_dev.c **** #endif
2880:rtos/uC-FS/Source/fs_dev.c **** }
ARM GAS  /tmp/cccHmdnc.s 			page 52


2881:rtos/uC-FS/Source/fs_dev.c **** #endif
2882:rtos/uC-FS/Source/fs_dev.c **** 
2883:rtos/uC-FS/Source/fs_dev.c **** 
2884:rtos/uC-FS/Source/fs_dev.c **** /*
2885:rtos/uC-FS/Source/fs_dev.c **** ***************************************************************************************************
2886:rtos/uC-FS/Source/fs_dev.c **** *                                            FSDev_VolAdd()
2887:rtos/uC-FS/Source/fs_dev.c **** *
2888:rtos/uC-FS/Source/fs_dev.c **** * Description : Add volume to open volume list.
2889:rtos/uC-FS/Source/fs_dev.c **** *
2890:rtos/uC-FS/Source/fs_dev.c **** * Argument(s) : p_dev       Pointer to device.
2891:rtos/uC-FS/Source/fs_dev.c **** *               ----------  Argument validated by caller.
2892:rtos/uC-FS/Source/fs_dev.c **** *
2893:rtos/uC-FS/Source/fs_dev.c **** *               p_vol       Pointer to volume.
2894:rtos/uC-FS/Source/fs_dev.c **** *               ----------  Argument validated by caller.
2895:rtos/uC-FS/Source/fs_dev.c **** *
2896:rtos/uC-FS/Source/fs_dev.c **** * Return(s)   : none.
2897:rtos/uC-FS/Source/fs_dev.c **** *
2898:rtos/uC-FS/Source/fs_dev.c **** * Note(s)     : (1) The function caller MUST have acquired a reference to the device & hold the dev
2899:rtos/uC-FS/Source/fs_dev.c **** ***************************************************************************************************
2900:rtos/uC-FS/Source/fs_dev.c **** */
2901:rtos/uC-FS/Source/fs_dev.c **** 
2902:rtos/uC-FS/Source/fs_dev.c **** void  FSDev_VolAdd (FS_DEV  *p_dev,
2903:rtos/uC-FS/Source/fs_dev.c ****                     FS_VOL  *p_vol)
2904:rtos/uC-FS/Source/fs_dev.c **** {
2905:rtos/uC-FS/Source/fs_dev.c ****    (void)p_vol;                                                 /*lint --e{550} Suppress "Symbol no
2906:rtos/uC-FS/Source/fs_dev.c **** 
2907:rtos/uC-FS/Source/fs_dev.c ****     p_dev->VolCnt++;
2908:rtos/uC-FS/Source/fs_dev.c **** }
2909:rtos/uC-FS/Source/fs_dev.c **** 
2910:rtos/uC-FS/Source/fs_dev.c **** 
2911:rtos/uC-FS/Source/fs_dev.c **** /*
2912:rtos/uC-FS/Source/fs_dev.c **** ***************************************************************************************************
2913:rtos/uC-FS/Source/fs_dev.c **** *                                          FSDev_VolRemove()
2914:rtos/uC-FS/Source/fs_dev.c **** *
2915:rtos/uC-FS/Source/fs_dev.c **** * Description : Remove volume from open volume list.
2916:rtos/uC-FS/Source/fs_dev.c **** *
2917:rtos/uC-FS/Source/fs_dev.c **** * Argument(s) : p_dev       Pointer to device.
2918:rtos/uC-FS/Source/fs_dev.c **** *               ----------  Argument validated by caller.
2919:rtos/uC-FS/Source/fs_dev.c **** *
2920:rtos/uC-FS/Source/fs_dev.c **** *               p_vol       Pointer to volume.
2921:rtos/uC-FS/Source/fs_dev.c **** *               ----------  Argument validated by caller.
2922:rtos/uC-FS/Source/fs_dev.c **** *
2923:rtos/uC-FS/Source/fs_dev.c **** * Return(s)   : none.
2924:rtos/uC-FS/Source/fs_dev.c **** *
2925:rtos/uC-FS/Source/fs_dev.c **** * Note(s)     : (1) The function caller MUST have acquired a reference to the device & hold the dev
2926:rtos/uC-FS/Source/fs_dev.c **** ***************************************************************************************************
2927:rtos/uC-FS/Source/fs_dev.c **** */
2928:rtos/uC-FS/Source/fs_dev.c **** 
2929:rtos/uC-FS/Source/fs_dev.c **** void  FSDev_VolRemove (FS_DEV  *p_dev,
2930:rtos/uC-FS/Source/fs_dev.c ****                        FS_VOL  *p_vol)
2931:rtos/uC-FS/Source/fs_dev.c **** {
2932:rtos/uC-FS/Source/fs_dev.c ****    (void)p_vol;                                                 /*lint --e{550} Suppress "Symbol no
2933:rtos/uC-FS/Source/fs_dev.c **** 
2934:rtos/uC-FS/Source/fs_dev.c ****     p_dev->VolCnt--;
2935:rtos/uC-FS/Source/fs_dev.c **** }
2936:rtos/uC-FS/Source/fs_dev.c **** 
2937:rtos/uC-FS/Source/fs_dev.c **** /*
ARM GAS  /tmp/cccHmdnc.s 			page 53


2938:rtos/uC-FS/Source/fs_dev.c **** ***************************************************************************************************
2939:rtos/uC-FS/Source/fs_dev.c **** ***************************************************************************************************
2940:rtos/uC-FS/Source/fs_dev.c **** *                                           LOCAL FUNCTIONS
2941:rtos/uC-FS/Source/fs_dev.c **** ***************************************************************************************************
2942:rtos/uC-FS/Source/fs_dev.c **** ***************************************************************************************************
2943:rtos/uC-FS/Source/fs_dev.c **** */
2944:rtos/uC-FS/Source/fs_dev.c **** 
2945:rtos/uC-FS/Source/fs_dev.c **** /*
2946:rtos/uC-FS/Source/fs_dev.c **** ***************************************************************************************************
2947:rtos/uC-FS/Source/fs_dev.c **** *                                           FS_DevDrvFind()
2948:rtos/uC-FS/Source/fs_dev.c **** *
2949:rtos/uC-FS/Source/fs_dev.c **** * Description : Find device driver by name.
2950:rtos/uC-FS/Source/fs_dev.c **** *
2951:rtos/uC-FS/Source/fs_dev.c **** * Argument(s) : name_dev    Pointer to a device name.
2952:rtos/uC-FS/Source/fs_dev.c **** *               ----------  Argument validated by caller.
2953:rtos/uC-FS/Source/fs_dev.c **** *
2954:rtos/uC-FS/Source/fs_dev.c **** * Return(s)   : Pointer to device driver.
2955:rtos/uC-FS/Source/fs_dev.c **** *
2956:rtos/uC-FS/Source/fs_dev.c **** * Note(s)     : (1) The function caller MUST hold the file system lock.
2957:rtos/uC-FS/Source/fs_dev.c **** ***************************************************************************************************
2958:rtos/uC-FS/Source/fs_dev.c **** */
2959:rtos/uC-FS/Source/fs_dev.c **** 
2960:rtos/uC-FS/Source/fs_dev.c **** static  FS_DEV_API  *FS_DevDrvFind (const  CPU_CHAR  *name_dev)
2961:rtos/uC-FS/Source/fs_dev.c **** {
2962:rtos/uC-FS/Source/fs_dev.c ****            FS_QTY        ix;
2963:rtos/uC-FS/Source/fs_dev.c ****            CPU_INT16S    cmp;
2964:rtos/uC-FS/Source/fs_dev.c ****            FS_DEV_API   *p_dev_drv;
2965:rtos/uC-FS/Source/fs_dev.c ****     const  CPU_CHAR     *p_name_drv;
2966:rtos/uC-FS/Source/fs_dev.c **** 
2967:rtos/uC-FS/Source/fs_dev.c **** 
2968:rtos/uC-FS/Source/fs_dev.c ****     p_dev_drv = DEF_NULL;
2969:rtos/uC-FS/Source/fs_dev.c **** 
2970:rtos/uC-FS/Source/fs_dev.c **** 
2971:rtos/uC-FS/Source/fs_dev.c ****     for (ix = 0u; ix < FS_DevDrvCntMax; ix++) {
2972:rtos/uC-FS/Source/fs_dev.c ****         if (FS_DevDrvTbl[ix] != DEF_NULL) {
2973:rtos/uC-FS/Source/fs_dev.c ****             p_name_drv = FS_DevDrvTbl[ix]->NameGet();
2974:rtos/uC-FS/Source/fs_dev.c ****             cmp        = Str_Cmp_N(name_dev, p_name_drv, FS_CFG_MAX_DEV_DRV_NAME_LEN);
2975:rtos/uC-FS/Source/fs_dev.c ****             if (cmp == 0) {
2976:rtos/uC-FS/Source/fs_dev.c ****                 p_dev_drv = FS_DevDrvTbl[ix];
2977:rtos/uC-FS/Source/fs_dev.c ****                 break;
2978:rtos/uC-FS/Source/fs_dev.c ****             }
2979:rtos/uC-FS/Source/fs_dev.c ****         }
2980:rtos/uC-FS/Source/fs_dev.c ****     }
2981:rtos/uC-FS/Source/fs_dev.c **** 
2982:rtos/uC-FS/Source/fs_dev.c ****     if (p_dev_drv == DEF_NULL) {
2983:rtos/uC-FS/Source/fs_dev.c ****         return (DEF_NULL);
2984:rtos/uC-FS/Source/fs_dev.c ****     }
2985:rtos/uC-FS/Source/fs_dev.c **** 
2986:rtos/uC-FS/Source/fs_dev.c ****     return (p_dev_drv);
2987:rtos/uC-FS/Source/fs_dev.c **** }
2988:rtos/uC-FS/Source/fs_dev.c **** 
2989:rtos/uC-FS/Source/fs_dev.c **** 
2990:rtos/uC-FS/Source/fs_dev.c **** /*
2991:rtos/uC-FS/Source/fs_dev.c **** ***************************************************************************************************
2992:rtos/uC-FS/Source/fs_dev.c **** *                                          FSDev_HandleErr()
2993:rtos/uC-FS/Source/fs_dev.c **** *
2994:rtos/uC-FS/Source/fs_dev.c **** * Description : Handle error from device access.
ARM GAS  /tmp/cccHmdnc.s 			page 54


2995:rtos/uC-FS/Source/fs_dev.c **** *
2996:rtos/uC-FS/Source/fs_dev.c **** * Argument(s) : p_dev       Pointer to device.
2997:rtos/uC-FS/Source/fs_dev.c **** *               -----       Argument validated by caller.
2998:rtos/uC-FS/Source/fs_dev.c **** *
2999:rtos/uC-FS/Source/fs_dev.c **** *               err         Error returned by device driver access :
3000:rtos/uC-FS/Source/fs_dev.c **** *
3001:rtos/uC-FS/Source/fs_dev.c **** *                               FS_ERR_DEV_IO                 Device I/O error.
3002:rtos/uC-FS/Source/fs_dev.c **** *                               FS_ERR_DEV_INVALID_LOW_FMT    Device needs to be low-level formatte
3003:rtos/uC-FS/Source/fs_dev.c **** *                               FS_ERR_DEV_NOT_OPEN           Device is not open.
3004:rtos/uC-FS/Source/fs_dev.c **** *                               FS_ERR_DEV_NOT_PRESENT        Device is not present.
3005:rtos/uC-FS/Source/fs_dev.c **** *                               FS_ERR_DEV_TIMEOUT            Device timeout error.
3006:rtos/uC-FS/Source/fs_dev.c **** *
3007:rtos/uC-FS/Source/fs_dev.c **** * Return(s)   : none.
3008:rtos/uC-FS/Source/fs_dev.c **** *
3009:rtos/uC-FS/Source/fs_dev.c **** * Note(s)     : (1) The function caller MUST have acquired a reference to the device & hold the dev
3010:rtos/uC-FS/Source/fs_dev.c **** ***************************************************************************************************
3011:rtos/uC-FS/Source/fs_dev.c **** */
3012:rtos/uC-FS/Source/fs_dev.c **** 
3013:rtos/uC-FS/Source/fs_dev.c **** static  void  FSDev_HandleErr (FS_DEV  *p_dev,
3014:rtos/uC-FS/Source/fs_dev.c ****                                FS_ERR   err)
3015:rtos/uC-FS/Source/fs_dev.c **** {
  29              		.loc 1 3015 1 view -0
  30              		.cfi_startproc
  31              		@ args = 0, pretend = 0, frame = 0
  32              		@ frame_needed = 0, uses_anonymous_args = 0
  33              		@ link register save eliminated.
3016:rtos/uC-FS/Source/fs_dev.c ****     FS_STATE   state_prev;
  34              		.loc 1 3016 5 view .LVU1
3017:rtos/uC-FS/Source/fs_dev.c ****     FS_STATE   state_next;
  35              		.loc 1 3017 5 view .LVU2
3018:rtos/uC-FS/Source/fs_dev.c **** 
3019:rtos/uC-FS/Source/fs_dev.c **** 
3020:rtos/uC-FS/Source/fs_dev.c ****     state_prev = p_dev->State;
  36              		.loc 1 3020 5 view .LVU3
  37              		.loc 1 3020 16 is_stmt 0 view .LVU4
  38 0000 8288     		ldrh	r2, [r0, #4]
  39              	.LVL1:
3021:rtos/uC-FS/Source/fs_dev.c ****     state_next = state_prev;
  40              		.loc 1 3021 5 is_stmt 1 view .LVU5
3022:rtos/uC-FS/Source/fs_dev.c **** 
3023:rtos/uC-FS/Source/fs_dev.c ****     switch (err) {
  41              		.loc 1 3023 5 view .LVU6
  42 0002 40F24313 		movw	r3, #323
  43 0006 9942     		cmp	r1, r3
  44 0008 14D0     		beq	.L5
  45 000a B1F5A27F 		cmp	r1, #324
  46 000e 0AD2     		bcs	.L3
  47 0010 B1F59D7F 		cmp	r1, #314
  48 0014 10D1     		bne	.L6
3024:rtos/uC-FS/Source/fs_dev.c ****         case FS_ERR_DEV_INVALID_IO_CTRL:
3025:rtos/uC-FS/Source/fs_dev.c ****         case FS_ERR_NONE:
3026:rtos/uC-FS/Source/fs_dev.c ****              break;
3027:rtos/uC-FS/Source/fs_dev.c **** 
3028:rtos/uC-FS/Source/fs_dev.c **** 
3029:rtos/uC-FS/Source/fs_dev.c ****         case FS_ERR_DEV_INVALID_LOW_FMT:
3030:rtos/uC-FS/Source/fs_dev.c ****              state_next = FS_DEV_STATE_PRESENT;
  49              		.loc 1 3030 25 is_stmt 0 view .LVU7
ARM GAS  /tmp/cccHmdnc.s 			page 55


  50 0016 0423     		movs	r3, #4
  51              	.LVL2:
  52              	.L2:
3031:rtos/uC-FS/Source/fs_dev.c ****              break;
3032:rtos/uC-FS/Source/fs_dev.c **** 
3033:rtos/uC-FS/Source/fs_dev.c **** 
3034:rtos/uC-FS/Source/fs_dev.c ****         case FS_ERR_DEV_IO:
3035:rtos/uC-FS/Source/fs_dev.c ****         case FS_ERR_DEV_NOT_OPEN:
3036:rtos/uC-FS/Source/fs_dev.c ****         case FS_ERR_DEV_NOT_PRESENT:
3037:rtos/uC-FS/Source/fs_dev.c ****         case FS_ERR_DEV_TIMEOUT:
3038:rtos/uC-FS/Source/fs_dev.c ****              state_next = FS_DEV_STATE_OPEN;
3039:rtos/uC-FS/Source/fs_dev.c ****              break;
3040:rtos/uC-FS/Source/fs_dev.c **** 
3041:rtos/uC-FS/Source/fs_dev.c **** 
3042:rtos/uC-FS/Source/fs_dev.c ****         default:
3043:rtos/uC-FS/Source/fs_dev.c ****              break;
3044:rtos/uC-FS/Source/fs_dev.c ****     }
3045:rtos/uC-FS/Source/fs_dev.c **** 
3046:rtos/uC-FS/Source/fs_dev.c ****     if (state_next != state_prev) {                             /* If dev state chnged ...         
  53              		.loc 1 3046 5 is_stmt 1 view .LVU8
  54              		.loc 1 3046 8 is_stmt 0 view .LVU9
  55 0018 9342     		cmp	r3, r2
  56 001a 03D0     		beq	.L1
3047:rtos/uC-FS/Source/fs_dev.c ****         p_dev->State = state_next;
  57              		.loc 1 3047 9 is_stmt 1 view .LVU10
  58              		.loc 1 3047 22 is_stmt 0 view .LVU11
  59 001c 8380     		strh	r3, [r0, #4]	@ movhi
3048:rtos/uC-FS/Source/fs_dev.c ****         p_dev->RefreshCnt++;                                    /* ... inc refresh cnt to invalidat
  60              		.loc 1 3048 9 is_stmt 1 view .LVU12
  61              		.loc 1 3048 14 is_stmt 0 view .LVU13
  62 001e C368     		ldr	r3, [r0, #12]
  63              	.LVL3:
  64              		.loc 1 3048 26 view .LVU14
  65 0020 0133     		adds	r3, r3, #1
  66 0022 C360     		str	r3, [r0, #12]
  67              	.LVL4:
  68              	.L1:
3049:rtos/uC-FS/Source/fs_dev.c ****     }
3050:rtos/uC-FS/Source/fs_dev.c **** }
  69              		.loc 1 3050 1 view .LVU15
  70 0024 7047     		bx	lr
  71              	.LVL5:
  72              	.L3:
3023:rtos/uC-FS/Source/fs_dev.c ****         case FS_ERR_DEV_INVALID_IO_CTRL:
  73              		.loc 1 3023 5 view .LVU16
  74 0026 A1F24511 		subw	r1, r1, #325
  75              	.LVL6:
3023:rtos/uC-FS/Source/fs_dev.c ****         case FS_ERR_DEV_INVALID_IO_CTRL:
  76              		.loc 1 3023 5 view .LVU17
  77 002a 89B2     		uxth	r1, r1
  78 002c 0229     		cmp	r1, #2
  79 002e 05D9     		bls	.L7
  80 0030 1346     		mov	r3, r2
  81 0032 F1E7     		b	.L2
  82              	.LVL7:
  83              	.L5:
3038:rtos/uC-FS/Source/fs_dev.c ****              break;
ARM GAS  /tmp/cccHmdnc.s 			page 56


  84              		.loc 1 3038 25 view .LVU18
  85 0034 0323     		movs	r3, #3
  86 0036 EFE7     		b	.L2
  87              	.L6:
3023:rtos/uC-FS/Source/fs_dev.c ****         case FS_ERR_DEV_INVALID_IO_CTRL:
  88              		.loc 1 3023 5 view .LVU19
  89 0038 1346     		mov	r3, r2
  90 003a EDE7     		b	.L2
  91              	.LVL8:
  92              	.L7:
3038:rtos/uC-FS/Source/fs_dev.c ****              break;
  93              		.loc 1 3038 25 view .LVU20
  94 003c 0323     		movs	r3, #3
  95 003e EBE7     		b	.L2
  96              		.cfi_endproc
  97              	.LFE32:
  99              		.section	.text.FS_DevDrvFind,"ax",%progbits
 100              		.align	1
 101              		.syntax unified
 102              		.thumb
 103              		.thumb_func
 104              		.fpu fpv4-sp-d16
 106              	FS_DevDrvFind:
 107              	.LVL9:
 108              	.LFB31:
2961:rtos/uC-FS/Source/fs_dev.c ****            FS_QTY        ix;
 109              		.loc 1 2961 1 is_stmt 1 view -0
 110              		.cfi_startproc
 111              		@ args = 0, pretend = 0, frame = 0
 112              		@ frame_needed = 0, uses_anonymous_args = 0
2961:rtos/uC-FS/Source/fs_dev.c ****            FS_QTY        ix;
 113              		.loc 1 2961 1 is_stmt 0 view .LVU22
 114 0000 70B5     		push	{r4, r5, r6, lr}
 115              	.LCFI0:
 116              		.cfi_def_cfa_offset 16
 117              		.cfi_offset 4, -16
 118              		.cfi_offset 5, -12
 119              		.cfi_offset 6, -8
 120              		.cfi_offset 14, -4
 121 0002 0546     		mov	r5, r0
2962:rtos/uC-FS/Source/fs_dev.c ****            CPU_INT16S    cmp;
 122              		.loc 1 2962 12 is_stmt 1 view .LVU23
2963:rtos/uC-FS/Source/fs_dev.c ****            FS_DEV_API   *p_dev_drv;
 123              		.loc 1 2963 12 view .LVU24
2964:rtos/uC-FS/Source/fs_dev.c ****     const  CPU_CHAR     *p_name_drv;
 124              		.loc 1 2964 12 view .LVU25
2965:rtos/uC-FS/Source/fs_dev.c **** 
 125              		.loc 1 2965 5 view .LVU26
2968:rtos/uC-FS/Source/fs_dev.c **** 
 126              		.loc 1 2968 5 view .LVU27
 127              	.LVL10:
2971:rtos/uC-FS/Source/fs_dev.c ****         if (FS_DevDrvTbl[ix] != DEF_NULL) {
 128              		.loc 1 2971 5 view .LVU28
2971:rtos/uC-FS/Source/fs_dev.c ****         if (FS_DevDrvTbl[ix] != DEF_NULL) {
 129              		.loc 1 2971 13 is_stmt 0 view .LVU29
 130 0004 0024     		movs	r4, #0
2971:rtos/uC-FS/Source/fs_dev.c ****         if (FS_DevDrvTbl[ix] != DEF_NULL) {
ARM GAS  /tmp/cccHmdnc.s 			page 57


 131              		.loc 1 2971 5 view .LVU30
 132 0006 01E0     		b	.L9
 133              	.LVL11:
 134              	.L10:
2971:rtos/uC-FS/Source/fs_dev.c ****         if (FS_DevDrvTbl[ix] != DEF_NULL) {
 135              		.loc 1 2971 41 is_stmt 1 discriminator 2 view .LVU31
2971:rtos/uC-FS/Source/fs_dev.c ****         if (FS_DevDrvTbl[ix] != DEF_NULL) {
 136              		.loc 1 2971 43 is_stmt 0 discriminator 2 view .LVU32
 137 0008 0134     		adds	r4, r4, #1
 138              	.LVL12:
2971:rtos/uC-FS/Source/fs_dev.c ****         if (FS_DevDrvTbl[ix] != DEF_NULL) {
 139              		.loc 1 2971 43 discriminator 2 view .LVU33
 140 000a A4B2     		uxth	r4, r4
 141              	.LVL13:
 142              	.L9:
2971:rtos/uC-FS/Source/fs_dev.c ****         if (FS_DevDrvTbl[ix] != DEF_NULL) {
 143              		.loc 1 2971 19 is_stmt 1 discriminator 1 view .LVU34
2971:rtos/uC-FS/Source/fs_dev.c ****         if (FS_DevDrvTbl[ix] != DEF_NULL) {
 144              		.loc 1 2971 22 is_stmt 0 discriminator 1 view .LVU35
 145 000c 0C4B     		ldr	r3, .L15
 146 000e 1B88     		ldrh	r3, [r3]
2971:rtos/uC-FS/Source/fs_dev.c ****         if (FS_DevDrvTbl[ix] != DEF_NULL) {
 147              		.loc 1 2971 5 discriminator 1 view .LVU36
 148 0010 A342     		cmp	r3, r4
 149 0012 13D9     		bls	.L14
2972:rtos/uC-FS/Source/fs_dev.c ****             p_name_drv = FS_DevDrvTbl[ix]->NameGet();
 150              		.loc 1 2972 9 is_stmt 1 view .LVU37
2972:rtos/uC-FS/Source/fs_dev.c ****             p_name_drv = FS_DevDrvTbl[ix]->NameGet();
 151              		.loc 1 2972 25 is_stmt 0 view .LVU38
 152 0014 A600     		lsls	r6, r4, #2
 153 0016 0B4B     		ldr	r3, .L15+4
 154 0018 1B68     		ldr	r3, [r3]
 155 001a 53F82430 		ldr	r3, [r3, r4, lsl #2]
2972:rtos/uC-FS/Source/fs_dev.c ****             p_name_drv = FS_DevDrvTbl[ix]->NameGet();
 156              		.loc 1 2972 12 view .LVU39
 157 001e 002B     		cmp	r3, #0
 158 0020 F2D0     		beq	.L10
2973:rtos/uC-FS/Source/fs_dev.c ****             cmp        = Str_Cmp_N(name_dev, p_name_drv, FS_CFG_MAX_DEV_DRV_NAME_LEN);
 159              		.loc 1 2973 13 is_stmt 1 view .LVU40
2973:rtos/uC-FS/Source/fs_dev.c ****             cmp        = Str_Cmp_N(name_dev, p_name_drv, FS_CFG_MAX_DEV_DRV_NAME_LEN);
 160              		.loc 1 2973 42 is_stmt 0 view .LVU41
 161 0022 1B68     		ldr	r3, [r3]
2973:rtos/uC-FS/Source/fs_dev.c ****             cmp        = Str_Cmp_N(name_dev, p_name_drv, FS_CFG_MAX_DEV_DRV_NAME_LEN);
 162              		.loc 1 2973 26 view .LVU42
 163 0024 9847     		blx	r3
 164              	.LVL14:
 165 0026 0146     		mov	r1, r0
 166              	.LVL15:
2974:rtos/uC-FS/Source/fs_dev.c ****             if (cmp == 0) {
 167              		.loc 1 2974 13 is_stmt 1 view .LVU43
2974:rtos/uC-FS/Source/fs_dev.c ****             if (cmp == 0) {
 168              		.loc 1 2974 26 is_stmt 0 view .LVU44
 169 0028 0A22     		movs	r2, #10
 170 002a 2846     		mov	r0, r5
 171              	.LVL16:
2974:rtos/uC-FS/Source/fs_dev.c ****             if (cmp == 0) {
 172              		.loc 1 2974 26 view .LVU45
ARM GAS  /tmp/cccHmdnc.s 			page 58


 173 002c FFF7FEFF 		bl	Str_Cmp_N
 174              	.LVL17:
2975:rtos/uC-FS/Source/fs_dev.c ****                 p_dev_drv = FS_DevDrvTbl[ix];
 175              		.loc 1 2975 13 is_stmt 1 view .LVU46
2975:rtos/uC-FS/Source/fs_dev.c ****                 p_dev_drv = FS_DevDrvTbl[ix];
 176              		.loc 1 2975 16 is_stmt 0 view .LVU47
 177 0030 0028     		cmp	r0, #0
 178 0032 E9D1     		bne	.L10
2976:rtos/uC-FS/Source/fs_dev.c ****                 break;
 179              		.loc 1 2976 17 is_stmt 1 view .LVU48
2976:rtos/uC-FS/Source/fs_dev.c ****                 break;
 180              		.loc 1 2976 41 is_stmt 0 view .LVU49
 181 0034 034B     		ldr	r3, .L15+4
 182 0036 1B68     		ldr	r3, [r3]
2976:rtos/uC-FS/Source/fs_dev.c ****                 break;
 183              		.loc 1 2976 27 view .LVU50
 184 0038 9859     		ldr	r0, [r3, r6]
 185              	.LVL18:
2977:rtos/uC-FS/Source/fs_dev.c ****             }
 186              		.loc 1 2977 17 is_stmt 1 view .LVU51
 187 003a 00E0     		b	.L8
 188              	.LVL19:
 189              	.L14:
2968:rtos/uC-FS/Source/fs_dev.c **** 
 190              		.loc 1 2968 15 is_stmt 0 view .LVU52
 191 003c 0020     		movs	r0, #0
2982:rtos/uC-FS/Source/fs_dev.c ****         return (DEF_NULL);
 192              		.loc 1 2982 5 is_stmt 1 view .LVU53
 193              	.LVL20:
 194              	.L8:
2987:rtos/uC-FS/Source/fs_dev.c **** 
 195              		.loc 1 2987 1 is_stmt 0 view .LVU54
 196 003e 70BD     		pop	{r4, r5, r6, pc}
 197              	.LVL21:
 198              	.L16:
2987:rtos/uC-FS/Source/fs_dev.c **** 
 199              		.loc 1 2987 1 view .LVU55
 200              		.align	2
 201              	.L15:
 202 0040 00000000 		.word	.LANCHOR1
 203 0044 00000000 		.word	.LANCHOR0
 204              		.cfi_endproc
 205              	.LFE31:
 207              		.section	.text.FSDev_ObjFind,"ax",%progbits
 208              		.align	1
 209              		.syntax unified
 210              		.thumb
 211              		.thumb_func
 212              		.fpu fpv4-sp-d16
 214              	FSDev_ObjFind:
 215              	.LVL22:
 216              	.LFB34:
3051:rtos/uC-FS/Source/fs_dev.c **** 
3052:rtos/uC-FS/Source/fs_dev.c **** 
3053:rtos/uC-FS/Source/fs_dev.c **** /*
3054:rtos/uC-FS/Source/fs_dev.c **** ***************************************************************************************************
3055:rtos/uC-FS/Source/fs_dev.c **** *                                            FSDev_ObjClr()
ARM GAS  /tmp/cccHmdnc.s 			page 59


3056:rtos/uC-FS/Source/fs_dev.c **** *
3057:rtos/uC-FS/Source/fs_dev.c **** * Description : Clear a device object.
3058:rtos/uC-FS/Source/fs_dev.c **** *
3059:rtos/uC-FS/Source/fs_dev.c **** * Argument(s) : p_dev       Pointer to device.
3060:rtos/uC-FS/Source/fs_dev.c **** *               ----------  Argument validated by caller.
3061:rtos/uC-FS/Source/fs_dev.c **** *
3062:rtos/uC-FS/Source/fs_dev.c **** * Return(s)   : none.
3063:rtos/uC-FS/Source/fs_dev.c **** *
3064:rtos/uC-FS/Source/fs_dev.c **** * Note(s)     : (1) The function caller MUST hold the file system lock.
3065:rtos/uC-FS/Source/fs_dev.c **** ***************************************************************************************************
3066:rtos/uC-FS/Source/fs_dev.c **** */
3067:rtos/uC-FS/Source/fs_dev.c **** 
3068:rtos/uC-FS/Source/fs_dev.c **** static  void  FSDev_ObjClr (FS_DEV  *p_dev)
3069:rtos/uC-FS/Source/fs_dev.c **** {
3070:rtos/uC-FS/Source/fs_dev.c ****     p_dev->ID           =  0u;
3071:rtos/uC-FS/Source/fs_dev.c ****     p_dev->State        =  FS_DEV_STATE_CLOSED;
3072:rtos/uC-FS/Source/fs_dev.c ****     p_dev->RefCnt       =  0u;
3073:rtos/uC-FS/Source/fs_dev.c ****     p_dev->RefreshCnt   =  0u;
3074:rtos/uC-FS/Source/fs_dev.c **** 
3075:rtos/uC-FS/Source/fs_dev.c ****     Mem_Set((void       *)&p_dev->Name[0],
3076:rtos/uC-FS/Source/fs_dev.c ****             (CPU_INT08U  ) ASCII_CHAR_NULL,
3077:rtos/uC-FS/Source/fs_dev.c ****             (CPU_SIZE_T  )(FS_CFG_MAX_DEV_NAME_LEN + 1u));
3078:rtos/uC-FS/Source/fs_dev.c **** 
3079:rtos/uC-FS/Source/fs_dev.c ****     p_dev->UnitNbr      =  0u;
3080:rtos/uC-FS/Source/fs_dev.c ****     p_dev->Size         =  0u;
3081:rtos/uC-FS/Source/fs_dev.c ****     p_dev->SecSize      =  0u;
3082:rtos/uC-FS/Source/fs_dev.c ****     p_dev->Fixed        =  DEF_NO;
3083:rtos/uC-FS/Source/fs_dev.c **** 
3084:rtos/uC-FS/Source/fs_dev.c ****     p_dev->VolCnt       =  0u;
3085:rtos/uC-FS/Source/fs_dev.c ****     p_dev->DevDrvPtr    = (FS_DEV_API *)0;
3086:rtos/uC-FS/Source/fs_dev.c ****     p_dev->DataPtr      =  DEF_NULL;
3087:rtos/uC-FS/Source/fs_dev.c **** 
3088:rtos/uC-FS/Source/fs_dev.c **** #if (FS_CFG_CTR_STAT_EN == DEF_ENABLED)
3089:rtos/uC-FS/Source/fs_dev.c ****     p_dev->StatRdSecCtr =  0u;
3090:rtos/uC-FS/Source/fs_dev.c ****     p_dev->StatWrSecCtr =  0u;
3091:rtos/uC-FS/Source/fs_dev.c **** #endif
3092:rtos/uC-FS/Source/fs_dev.c **** }
3093:rtos/uC-FS/Source/fs_dev.c **** 
3094:rtos/uC-FS/Source/fs_dev.c **** 
3095:rtos/uC-FS/Source/fs_dev.c **** /*
3096:rtos/uC-FS/Source/fs_dev.c **** ***************************************************************************************************
3097:rtos/uC-FS/Source/fs_dev.c **** *                                           FSDev_ObjFind()
3098:rtos/uC-FS/Source/fs_dev.c **** *
3099:rtos/uC-FS/Source/fs_dev.c **** * Description : Find a device object by name.
3100:rtos/uC-FS/Source/fs_dev.c **** *
3101:rtos/uC-FS/Source/fs_dev.c **** * Argument(s) : name_dev    Pointer to device name.
3102:rtos/uC-FS/Source/fs_dev.c **** *               ----------  Argument validated by caller.
3103:rtos/uC-FS/Source/fs_dev.c **** *
3104:rtos/uC-FS/Source/fs_dev.c **** * Return(s)   : Pointer to a device, if found.
3105:rtos/uC-FS/Source/fs_dev.c **** *               Pointer to NULL,     otherwise.
3106:rtos/uC-FS/Source/fs_dev.c **** *
3107:rtos/uC-FS/Source/fs_dev.c **** * Note(s)     : (1) The function caller MUST hold the file system lock.
3108:rtos/uC-FS/Source/fs_dev.c **** ***************************************************************************************************
3109:rtos/uC-FS/Source/fs_dev.c **** */
3110:rtos/uC-FS/Source/fs_dev.c **** 
3111:rtos/uC-FS/Source/fs_dev.c **** static  FS_DEV  *FSDev_ObjFind (CPU_CHAR  *name_dev)
3112:rtos/uC-FS/Source/fs_dev.c **** {
ARM GAS  /tmp/cccHmdnc.s 			page 60


 217              		.loc 1 3112 1 is_stmt 1 view -0
 218              		.cfi_startproc
 219              		@ args = 0, pretend = 0, frame = 0
 220              		@ frame_needed = 0, uses_anonymous_args = 0
 221              		.loc 1 3112 1 is_stmt 0 view .LVU57
 222 0000 70B5     		push	{r4, r5, r6, lr}
 223              	.LCFI1:
 224              		.cfi_def_cfa_offset 16
 225              		.cfi_offset 4, -16
 226              		.cfi_offset 5, -12
 227              		.cfi_offset 6, -8
 228              		.cfi_offset 14, -4
 229 0002 0546     		mov	r5, r0
3113:rtos/uC-FS/Source/fs_dev.c ****     CPU_INT16S   cmp;
 230              		.loc 1 3113 5 is_stmt 1 view .LVU58
3114:rtos/uC-FS/Source/fs_dev.c ****     FS_DEV      *p_dev;
 231              		.loc 1 3114 5 view .LVU59
3115:rtos/uC-FS/Source/fs_dev.c ****     FS_QTY       dev_ix;
 232              		.loc 1 3115 5 view .LVU60
3116:rtos/uC-FS/Source/fs_dev.c **** 
3117:rtos/uC-FS/Source/fs_dev.c **** 
3118:rtos/uC-FS/Source/fs_dev.c ****     p_dev = DEF_NULL;
 233              		.loc 1 3118 5 view .LVU61
 234              	.LVL23:
3119:rtos/uC-FS/Source/fs_dev.c **** 
3120:rtos/uC-FS/Source/fs_dev.c ****     for (dev_ix = 0u; dev_ix < FSDev_DevCntMax; dev_ix++) {
 235              		.loc 1 3120 5 view .LVU62
 236              		.loc 1 3120 17 is_stmt 0 view .LVU63
 237 0004 0024     		movs	r4, #0
 238              		.loc 1 3120 5 view .LVU64
 239 0006 01E0     		b	.L18
 240              	.LVL24:
 241              	.L19:
 242              		.loc 1 3120 49 is_stmt 1 discriminator 2 view .LVU65
 243              		.loc 1 3120 55 is_stmt 0 discriminator 2 view .LVU66
 244 0008 0134     		adds	r4, r4, #1
 245              	.LVL25:
 246              		.loc 1 3120 55 discriminator 2 view .LVU67
 247 000a A4B2     		uxth	r4, r4
 248              	.LVL26:
 249              	.L18:
 250              		.loc 1 3120 23 is_stmt 1 discriminator 1 view .LVU68
 251              		.loc 1 3120 30 is_stmt 0 discriminator 1 view .LVU69
 252 000c 0B4B     		ldr	r3, .L24
 253 000e 1B88     		ldrh	r3, [r3]
 254              		.loc 1 3120 5 discriminator 1 view .LVU70
 255 0010 A342     		cmp	r3, r4
 256 0012 11D9     		bls	.L23
3121:rtos/uC-FS/Source/fs_dev.c ****         if (FSDev_Tbl[dev_ix]!= DEF_NULL) {
 257              		.loc 1 3121 9 is_stmt 1 view .LVU71
 258              		.loc 1 3121 22 is_stmt 0 view .LVU72
 259 0014 A600     		lsls	r6, r4, #2
 260 0016 0A4B     		ldr	r3, .L24+4
 261 0018 1B68     		ldr	r3, [r3]
 262 001a 53F82410 		ldr	r1, [r3, r4, lsl #2]
 263              		.loc 1 3121 12 view .LVU73
 264 001e 0029     		cmp	r1, #0
ARM GAS  /tmp/cccHmdnc.s 			page 61


 265 0020 F2D0     		beq	.L19
3122:rtos/uC-FS/Source/fs_dev.c ****             cmp = Str_Cmp_N(name_dev, FSDev_Tbl[dev_ix]->Name, FS_CFG_MAX_DEV_NAME_LEN);
 266              		.loc 1 3122 13 is_stmt 1 view .LVU74
 267              		.loc 1 3122 19 is_stmt 0 view .LVU75
 268 0022 0F22     		movs	r2, #15
 269 0024 1031     		adds	r1, r1, #16
 270 0026 2846     		mov	r0, r5
 271 0028 FFF7FEFF 		bl	Str_Cmp_N
 272              	.LVL27:
3123:rtos/uC-FS/Source/fs_dev.c ****             if (cmp == 0) {
 273              		.loc 1 3123 13 is_stmt 1 view .LVU76
 274              		.loc 1 3123 16 is_stmt 0 view .LVU77
 275 002c 0028     		cmp	r0, #0
 276 002e EBD1     		bne	.L19
3124:rtos/uC-FS/Source/fs_dev.c ****                 p_dev = FSDev_Tbl[dev_ix];
 277              		.loc 1 3124 17 is_stmt 1 view .LVU78
 278              		.loc 1 3124 34 is_stmt 0 view .LVU79
 279 0030 034B     		ldr	r3, .L24+4
 280 0032 1B68     		ldr	r3, [r3]
 281              		.loc 1 3124 23 view .LVU80
 282 0034 9859     		ldr	r0, [r3, r6]
 283              	.LVL28:
3125:rtos/uC-FS/Source/fs_dev.c ****                 break;
 284              		.loc 1 3125 17 is_stmt 1 view .LVU81
 285 0036 00E0     		b	.L17
 286              	.LVL29:
 287              	.L23:
3118:rtos/uC-FS/Source/fs_dev.c **** 
 288              		.loc 1 3118 11 is_stmt 0 view .LVU82
 289 0038 0020     		movs	r0, #0
3126:rtos/uC-FS/Source/fs_dev.c ****             }
3127:rtos/uC-FS/Source/fs_dev.c ****         }
3128:rtos/uC-FS/Source/fs_dev.c ****     }
3129:rtos/uC-FS/Source/fs_dev.c **** 
3130:rtos/uC-FS/Source/fs_dev.c ****     return (p_dev);
 290              		.loc 1 3130 5 is_stmt 1 view .LVU83
 291              	.LVL30:
 292              	.L17:
3131:rtos/uC-FS/Source/fs_dev.c **** }
 293              		.loc 1 3131 1 is_stmt 0 view .LVU84
 294 003a 70BD     		pop	{r4, r5, r6, pc}
 295              	.LVL31:
 296              	.L25:
 297              		.loc 1 3131 1 view .LVU85
 298              		.align	2
 299              	.L24:
 300 003c 00000000 		.word	.LANCHOR3
 301 0040 00000000 		.word	.LANCHOR2
 302              		.cfi_endproc
 303              	.LFE34:
 305              		.section	.text.FSDev_NameParse,"ax",%progbits
 306              		.align	1
 307              		.syntax unified
 308              		.thumb
 309              		.thumb_func
 310              		.fpu fpv4-sp-d16
 312              	FSDev_NameParse:
ARM GAS  /tmp/cccHmdnc.s 			page 62


 313              	.LVL32:
 314              	.LFB37:
3132:rtos/uC-FS/Source/fs_dev.c **** 
3133:rtos/uC-FS/Source/fs_dev.c **** 
3134:rtos/uC-FS/Source/fs_dev.c **** /*
3135:rtos/uC-FS/Source/fs_dev.c **** ***************************************************************************************************
3136:rtos/uC-FS/Source/fs_dev.c **** *                                           FSDev_ObjFree()
3137:rtos/uC-FS/Source/fs_dev.c **** *
3138:rtos/uC-FS/Source/fs_dev.c **** * Description : Free a device object.
3139:rtos/uC-FS/Source/fs_dev.c **** *
3140:rtos/uC-FS/Source/fs_dev.c **** * Argument(s) : p_dev       Pointer to a device.
3141:rtos/uC-FS/Source/fs_dev.c **** *               ----------  Argument validated by caller.
3142:rtos/uC-FS/Source/fs_dev.c **** *
3143:rtos/uC-FS/Source/fs_dev.c **** * Return(s)   : none.
3144:rtos/uC-FS/Source/fs_dev.c **** *
3145:rtos/uC-FS/Source/fs_dev.c **** * Note(s)     : (1) The function caller MUST hold the file system lock.
3146:rtos/uC-FS/Source/fs_dev.c **** ***************************************************************************************************
3147:rtos/uC-FS/Source/fs_dev.c **** */
3148:rtos/uC-FS/Source/fs_dev.c **** 
3149:rtos/uC-FS/Source/fs_dev.c **** static  void  FSDev_ObjFree (FS_DEV  *p_dev)
3150:rtos/uC-FS/Source/fs_dev.c **** {
3151:rtos/uC-FS/Source/fs_dev.c ****     LIB_ERR  pool_err;
3152:rtos/uC-FS/Source/fs_dev.c **** 
3153:rtos/uC-FS/Source/fs_dev.c **** 
3154:rtos/uC-FS/Source/fs_dev.c ****     FSDev_Tbl[p_dev->ID] = DEF_NULL;
3155:rtos/uC-FS/Source/fs_dev.c **** 
3156:rtos/uC-FS/Source/fs_dev.c **** #if (FS_CFG_DBG_MEM_CLR_EN == DEF_ENABLED)
3157:rtos/uC-FS/Source/fs_dev.c ****     FSDev_ObjClr(p_dev);
3158:rtos/uC-FS/Source/fs_dev.c **** #endif
3159:rtos/uC-FS/Source/fs_dev.c **** 
3160:rtos/uC-FS/Source/fs_dev.c ****     Mem_PoolBlkFree(        &FSDev_Pool,
3161:rtos/uC-FS/Source/fs_dev.c ****                     (void *) p_dev,
3162:rtos/uC-FS/Source/fs_dev.c ****                             &pool_err);
3163:rtos/uC-FS/Source/fs_dev.c **** 
3164:rtos/uC-FS/Source/fs_dev.c ****     if (pool_err != LIB_MEM_ERR_NONE) {
3165:rtos/uC-FS/Source/fs_dev.c ****         FS_TRACE_INFO(("FSDev_ObjFree(): Could not free dev to pool.\r\n"));
3166:rtos/uC-FS/Source/fs_dev.c ****         CPU_SW_EXCEPTION(;);
3167:rtos/uC-FS/Source/fs_dev.c ****     }
3168:rtos/uC-FS/Source/fs_dev.c **** 
3169:rtos/uC-FS/Source/fs_dev.c ****     FSDev_Cnt--;
3170:rtos/uC-FS/Source/fs_dev.c **** }
3171:rtos/uC-FS/Source/fs_dev.c **** 
3172:rtos/uC-FS/Source/fs_dev.c **** 
3173:rtos/uC-FS/Source/fs_dev.c **** /*
3174:rtos/uC-FS/Source/fs_dev.c **** ***************************************************************************************************
3175:rtos/uC-FS/Source/fs_dev.c **** *                                            FSDev_ObjGet()
3176:rtos/uC-FS/Source/fs_dev.c **** *
3177:rtos/uC-FS/Source/fs_dev.c **** * Description : Allocate & initialize a device object.
3178:rtos/uC-FS/Source/fs_dev.c **** *
3179:rtos/uC-FS/Source/fs_dev.c **** * Argument(s) : none.
3180:rtos/uC-FS/Source/fs_dev.c **** *
3181:rtos/uC-FS/Source/fs_dev.c **** * Return(s)   : Pointer to a device, if NO errors.
3182:rtos/uC-FS/Source/fs_dev.c **** *               Pointer to NULL,     otherwise.
3183:rtos/uC-FS/Source/fs_dev.c **** *
3184:rtos/uC-FS/Source/fs_dev.c **** * Note(s)     : (1) The function caller MUST hold the file system lock.
3185:rtos/uC-FS/Source/fs_dev.c **** ***************************************************************************************************
3186:rtos/uC-FS/Source/fs_dev.c **** */
ARM GAS  /tmp/cccHmdnc.s 			page 63


3187:rtos/uC-FS/Source/fs_dev.c **** 
3188:rtos/uC-FS/Source/fs_dev.c **** static  FS_DEV  *FSDev_ObjGet (void)
3189:rtos/uC-FS/Source/fs_dev.c **** {
3190:rtos/uC-FS/Source/fs_dev.c ****     FS_DEV   *p_dev    = DEF_NULL;
3191:rtos/uC-FS/Source/fs_dev.c ****     LIB_ERR   pool_err;
3192:rtos/uC-FS/Source/fs_dev.c ****     FS_QTY    dev_ix;
3193:rtos/uC-FS/Source/fs_dev.c **** 
3194:rtos/uC-FS/Source/fs_dev.c **** 
3195:rtos/uC-FS/Source/fs_dev.c ****     for (dev_ix = 0u; dev_ix < FSDev_DevCntMax; dev_ix++) {
3196:rtos/uC-FS/Source/fs_dev.c ****         if (FSDev_Tbl[dev_ix] == DEF_NULL) {
3197:rtos/uC-FS/Source/fs_dev.c ****             break;
3198:rtos/uC-FS/Source/fs_dev.c ****         }
3199:rtos/uC-FS/Source/fs_dev.c ****     }
3200:rtos/uC-FS/Source/fs_dev.c **** 
3201:rtos/uC-FS/Source/fs_dev.c ****     if (dev_ix >= FSDev_DevCntMax) {
3202:rtos/uC-FS/Source/fs_dev.c ****         goto exit_fail;
3203:rtos/uC-FS/Source/fs_dev.c ****     }
3204:rtos/uC-FS/Source/fs_dev.c **** 
3205:rtos/uC-FS/Source/fs_dev.c ****     p_dev = (FS_DEV *)Mem_PoolBlkGet(&FSDev_Pool,
3206:rtos/uC-FS/Source/fs_dev.c ****                                       sizeof(FS_DEV),
3207:rtos/uC-FS/Source/fs_dev.c ****                                      &pool_err);
3208:rtos/uC-FS/Source/fs_dev.c ****     (void)pool_err;                                            /* Err ignored. Ret val chk'd instea
3209:rtos/uC-FS/Source/fs_dev.c ****     if (p_dev == (FS_DEV *)0) {
3210:rtos/uC-FS/Source/fs_dev.c ****         goto exit_fail;
3211:rtos/uC-FS/Source/fs_dev.c ****     }
3212:rtos/uC-FS/Source/fs_dev.c **** 
3213:rtos/uC-FS/Source/fs_dev.c ****     FSDev_ObjClr(p_dev);
3214:rtos/uC-FS/Source/fs_dev.c **** 
3215:rtos/uC-FS/Source/fs_dev.c ****     FSDev_Tbl[dev_ix] = p_dev;
3216:rtos/uC-FS/Source/fs_dev.c **** 
3217:rtos/uC-FS/Source/fs_dev.c ****     FSDev_Cnt++;
3218:rtos/uC-FS/Source/fs_dev.c **** 
3219:rtos/uC-FS/Source/fs_dev.c ****     p_dev->ID = dev_ix;
3220:rtos/uC-FS/Source/fs_dev.c **** 
3221:rtos/uC-FS/Source/fs_dev.c ****     return (p_dev);
3222:rtos/uC-FS/Source/fs_dev.c **** 
3223:rtos/uC-FS/Source/fs_dev.c **** exit_fail:
3224:rtos/uC-FS/Source/fs_dev.c ****     FS_TRACE_INFO(("FSDev_ObjGet(): Could not alloc dev from pool. Opened device limit reached.\r\n
3225:rtos/uC-FS/Source/fs_dev.c ****     return (p_dev);
3226:rtos/uC-FS/Source/fs_dev.c **** }
3227:rtos/uC-FS/Source/fs_dev.c **** 
3228:rtos/uC-FS/Source/fs_dev.c **** 
3229:rtos/uC-FS/Source/fs_dev.c **** /*
3230:rtos/uC-FS/Source/fs_dev.c **** ***************************************************************************************************
3231:rtos/uC-FS/Source/fs_dev.c **** *                                          FSDev_NameParse()
3232:rtos/uC-FS/Source/fs_dev.c **** *
3233:rtos/uC-FS/Source/fs_dev.c **** * Description : Extract name & unit number of device.
3234:rtos/uC-FS/Source/fs_dev.c **** *
3235:rtos/uC-FS/Source/fs_dev.c **** * Argument(s) : name_full       Full file name.
3236:rtos/uC-FS/Source/fs_dev.c **** *               ----------      Argument validated by caller.
3237:rtos/uC-FS/Source/fs_dev.c **** *
3238:rtos/uC-FS/Source/fs_dev.c **** *               name_dev        String that will receive the device base name.
3239:rtos/uC-FS/Source/fs_dev.c **** *                                   OR
3240:rtos/uC-FS/Source/fs_dev.c **** *                               String that will receive empty string if device name is not specifi
3241:rtos/uC-FS/Source/fs_dev.c **** *               ----------      Argument validated by caller.
3242:rtos/uC-FS/Source/fs_dev.c **** *
3243:rtos/uC-FS/Source/fs_dev.c **** *               p_unit_nbr      Pointer to variable that will receive the unit number.
ARM GAS  /tmp/cccHmdnc.s 			page 64


3244:rtos/uC-FS/Source/fs_dev.c **** *               ----------      Argument validated by caller.
3245:rtos/uC-FS/Source/fs_dev.c **** *
3246:rtos/uC-FS/Source/fs_dev.c **** * Return(s)   : Pointer to start of string after device name.
3247:rtos/uC-FS/Source/fs_dev.c **** *
3248:rtos/uC-FS/Source/fs_dev.c **** * Note(s)     : (1) See 'FSDev_Open() Notes #1a'.
3249:rtos/uC-FS/Source/fs_dev.c **** *
3250:rtos/uC-FS/Source/fs_dev.c **** *               (2) 'name_dev' MUST point to a character array of FS_CFG_MAX_DEV_NAME_LEN
3251:rtos/uC-FS/Source/fs_dev.c **** *                   characters.
3252:rtos/uC-FS/Source/fs_dev.c **** *
3253:rtos/uC-FS/Source/fs_dev.c **** *               (3) The last character in a valid device name is the second colon.  Consequently, t
3254:rtos/uC-FS/Source/fs_dev.c **** *                   return pointer from this function, if no error is returned, should be checked t
3255:rtos/uC-FS/Source/fs_dev.c **** *                   certain that it is a pointer to a NULL character.
3256:rtos/uC-FS/Source/fs_dev.c **** ***************************************************************************************************
3257:rtos/uC-FS/Source/fs_dev.c **** */
3258:rtos/uC-FS/Source/fs_dev.c **** 
3259:rtos/uC-FS/Source/fs_dev.c **** static  CPU_CHAR  *FSDev_NameParse (CPU_CHAR  *name_full,
3260:rtos/uC-FS/Source/fs_dev.c ****                                     CPU_CHAR  *name_dev,
3261:rtos/uC-FS/Source/fs_dev.c ****                                     FS_QTY    *p_unit_nbr)
3262:rtos/uC-FS/Source/fs_dev.c **** {
 315              		.loc 1 3262 1 is_stmt 1 view -0
 316              		.cfi_startproc
 317              		@ args = 0, pretend = 0, frame = 0
 318              		@ frame_needed = 0, uses_anonymous_args = 0
 319              		.loc 1 3262 1 is_stmt 0 view .LVU87
 320 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 321              	.LCFI2:
 322              		.cfi_def_cfa_offset 24
 323              		.cfi_offset 3, -24
 324              		.cfi_offset 4, -20
 325              		.cfi_offset 5, -16
 326              		.cfi_offset 6, -12
 327              		.cfi_offset 7, -8
 328              		.cfi_offset 14, -4
 329 0002 0446     		mov	r4, r0
 330 0004 0F46     		mov	r7, r1
 331 0006 1646     		mov	r6, r2
3263:rtos/uC-FS/Source/fs_dev.c ****     CPU_CHAR     *p_colon;
 332              		.loc 1 3263 5 is_stmt 1 view .LVU88
3264:rtos/uC-FS/Source/fs_dev.c ****     CPU_SIZE_T    dev_name_len;
 333              		.loc 1 3264 5 view .LVU89
3265:rtos/uC-FS/Source/fs_dev.c ****     CPU_SIZE_T    dev_drv_name_len;
 334              		.loc 1 3265 5 view .LVU90
3266:rtos/uC-FS/Source/fs_dev.c ****     CPU_BOOLEAN   dig;
 335              		.loc 1 3266 5 view .LVU91
3267:rtos/uC-FS/Source/fs_dev.c ****     CPU_CHAR     *p_name_rem;
 336              		.loc 1 3267 5 view .LVU92
3268:rtos/uC-FS/Source/fs_dev.c ****     CPU_BOOLEAN   ok;
 337              		.loc 1 3268 5 view .LVU93
3269:rtos/uC-FS/Source/fs_dev.c ****     FS_QTY        unit_nbr;
 338              		.loc 1 3269 5 view .LVU94
3270:rtos/uC-FS/Source/fs_dev.c **** 
3271:rtos/uC-FS/Source/fs_dev.c **** 
3272:rtos/uC-FS/Source/fs_dev.c ****     Mem_Clr((void *)name_dev, FS_CFG_MAX_DEV_NAME_LEN + 1u);
 339              		.loc 1 3272 5 view .LVU95
 340 0008 1021     		movs	r1, #16
 341              	.LVL33:
 342              		.loc 1 3272 5 is_stmt 0 view .LVU96
ARM GAS  /tmp/cccHmdnc.s 			page 65


 343 000a 3846     		mov	r0, r7
 344              	.LVL34:
 345              		.loc 1 3272 5 view .LVU97
 346 000c FFF7FEFF 		bl	Mem_Clr
 347              	.LVL35:
3273:rtos/uC-FS/Source/fs_dev.c **** 
3274:rtos/uC-FS/Source/fs_dev.c ****    *p_unit_nbr = 0u;                                            /* Assign dflt rtn val.            
 348              		.loc 1 3274 4 is_stmt 1 view .LVU98
 349              		.loc 1 3274 16 is_stmt 0 view .LVU99
 350 0010 0023     		movs	r3, #0
 351 0012 3380     		strh	r3, [r6]	@ movhi
3275:rtos/uC-FS/Source/fs_dev.c **** 
3276:rtos/uC-FS/Source/fs_dev.c **** 
3277:rtos/uC-FS/Source/fs_dev.c **** 
3278:rtos/uC-FS/Source/fs_dev.c ****                                                                 /* ----------------- CHK DEV NAME L
3279:rtos/uC-FS/Source/fs_dev.c ****     dev_name_len = Str_Len_N(name_full, FS_CFG_MAX_DEV_NAME_LEN + 1u);
 352              		.loc 1 3279 5 is_stmt 1 view .LVU100
 353              		.loc 1 3279 20 is_stmt 0 view .LVU101
 354 0014 1021     		movs	r1, #16
 355 0016 2046     		mov	r0, r4
 356 0018 FFF7FEFF 		bl	Str_Len_N
 357              	.LVL36:
3280:rtos/uC-FS/Source/fs_dev.c ****     if (dev_name_len > FS_CFG_MAX_DEV_NAME_LEN) {               /* Rtn err if dev name too long.   
 358              		.loc 1 3280 5 is_stmt 1 view .LVU102
 359              		.loc 1 3280 8 is_stmt 0 view .LVU103
 360 001c 0F28     		cmp	r0, #15
 361 001e 42D8     		bhi	.L34
3281:rtos/uC-FS/Source/fs_dev.c ****         return ((CPU_CHAR *)0);
3282:rtos/uC-FS/Source/fs_dev.c ****     }
3283:rtos/uC-FS/Source/fs_dev.c **** 
3284:rtos/uC-FS/Source/fs_dev.c **** 
3285:rtos/uC-FS/Source/fs_dev.c **** 
3286:rtos/uC-FS/Source/fs_dev.c ****                                                                 /* ------------------ FIND 1st COLO
3287:rtos/uC-FS/Source/fs_dev.c ****     p_colon = Str_Char_N(name_full, FS_CFG_MAX_DEV_NAME_LEN, FS_CHAR_DEV_SEP);
 362              		.loc 1 3287 5 is_stmt 1 view .LVU104
 363              		.loc 1 3287 15 is_stmt 0 view .LVU105
 364 0020 3A22     		movs	r2, #58
 365 0022 0F21     		movs	r1, #15
 366 0024 2046     		mov	r0, r4
 367              	.LVL37:
 368              		.loc 1 3287 15 view .LVU106
 369 0026 FFF7FEFF 		bl	Str_Char_N
 370              	.LVL38:
3288:rtos/uC-FS/Source/fs_dev.c **** 
3289:rtos/uC-FS/Source/fs_dev.c ****     if (p_colon == (CPU_CHAR *)0) {                             /* Rtn err if 1st colon not found  
 371              		.loc 1 3289 5 is_stmt 1 view .LVU107
 372              		.loc 1 3289 8 is_stmt 0 view .LVU108
 373 002a 0546     		mov	r5, r0
 374 002c 0028     		cmp	r0, #0
 375 002e 3BD0     		beq	.L26
3290:rtos/uC-FS/Source/fs_dev.c ****         return ((CPU_CHAR *)0);
3291:rtos/uC-FS/Source/fs_dev.c ****     }
3292:rtos/uC-FS/Source/fs_dev.c **** 
3293:rtos/uC-FS/Source/fs_dev.c ****     if (p_colon == name_full) {                                 /* Rtn err if 1st char is colon.   
 376              		.loc 1 3293 5 is_stmt 1 view .LVU109
 377              		.loc 1 3293 8 is_stmt 0 view .LVU110
 378 0030 8442     		cmp	r4, r0
ARM GAS  /tmp/cccHmdnc.s 			page 66


 379 0032 3BD0     		beq	.L35
3294:rtos/uC-FS/Source/fs_dev.c ****         return ((CPU_CHAR *)0);
3295:rtos/uC-FS/Source/fs_dev.c ****     }
3296:rtos/uC-FS/Source/fs_dev.c **** 
3297:rtos/uC-FS/Source/fs_dev.c ****     dev_drv_name_len = (CPU_SIZE_T)(p_colon - name_full);       /*lint !e946 !e947 Both pts are in 
 380              		.loc 1 3297 5 is_stmt 1 view .LVU111
 381              		.loc 1 3297 45 is_stmt 0 view .LVU112
 382 0034 021B     		subs	r2, r0, r4
 383              	.LVL39:
3298:rtos/uC-FS/Source/fs_dev.c **** 
3299:rtos/uC-FS/Source/fs_dev.c ****     if (dev_drv_name_len > FS_CFG_MAX_DEV_DRV_NAME_LEN) {       /* Rtn err if dev drv name too long
 384              		.loc 1 3299 5 is_stmt 1 view .LVU113
 385              		.loc 1 3299 8 is_stmt 0 view .LVU114
 386 0036 0A2A     		cmp	r2, #10
 387 0038 3AD8     		bhi	.L36
3300:rtos/uC-FS/Source/fs_dev.c ****         return ((CPU_CHAR *)0);
3301:rtos/uC-FS/Source/fs_dev.c ****     }
3302:rtos/uC-FS/Source/fs_dev.c **** 
3303:rtos/uC-FS/Source/fs_dev.c **** 
3304:rtos/uC-FS/Source/fs_dev.c **** 
3305:rtos/uC-FS/Source/fs_dev.c ****                                                                 /* ------------------- COPY DEV NAM
3306:rtos/uC-FS/Source/fs_dev.c ****     Str_Copy_N(name_dev,
 388              		.loc 1 3306 5 is_stmt 1 view .LVU115
 389 003a 2146     		mov	r1, r4
 390 003c 3846     		mov	r0, r7
 391              	.LVL40:
 392              		.loc 1 3306 5 is_stmt 0 view .LVU116
 393 003e FFF7FEFF 		bl	Str_Copy_N
 394              	.LVL41:
3307:rtos/uC-FS/Source/fs_dev.c ****                name_full,
3308:rtos/uC-FS/Source/fs_dev.c ****                dev_drv_name_len);
3309:rtos/uC-FS/Source/fs_dev.c **** 
3310:rtos/uC-FS/Source/fs_dev.c **** 
3311:rtos/uC-FS/Source/fs_dev.c **** 
3312:rtos/uC-FS/Source/fs_dev.c ****                                                                 /* ------------------ FIND 2nd COLO
3313:rtos/uC-FS/Source/fs_dev.c ****     name_full = p_colon + 1u;
 395              		.loc 1 3313 5 is_stmt 1 view .LVU117
 396              		.loc 1 3313 15 is_stmt 0 view .LVU118
 397 0042 6C1C     		adds	r4, r5, #1
 398              	.LVL42:
3314:rtos/uC-FS/Source/fs_dev.c ****     p_colon   = Str_Char_N(name_full, FS_CFG_MAX_DEV_NAME_LEN, FS_CHAR_DEV_SEP);
 399              		.loc 1 3314 5 is_stmt 1 view .LVU119
 400              		.loc 1 3314 17 is_stmt 0 view .LVU120
 401 0044 3A22     		movs	r2, #58
 402 0046 0F21     		movs	r1, #15
 403 0048 2046     		mov	r0, r4
 404 004a FFF7FEFF 		bl	Str_Char_N
 405              	.LVL43:
3315:rtos/uC-FS/Source/fs_dev.c **** 
3316:rtos/uC-FS/Source/fs_dev.c ****     if (p_colon == (CPU_CHAR *)0) {                             /* Rtn err if 2nd colon not found. 
 406              		.loc 1 3316 5 is_stmt 1 view .LVU121
 407              		.loc 1 3316 8 is_stmt 0 view .LVU122
 408 004e 0546     		mov	r5, r0
 409              	.LVL44:
 410              		.loc 1 3316 8 view .LVU123
 411 0050 20B1     		cbz	r0, .L41
3317:rtos/uC-FS/Source/fs_dev.c ****         name_dev[0] = (CPU_CHAR)ASCII_CHAR_NULL;
ARM GAS  /tmp/cccHmdnc.s 			page 67


3318:rtos/uC-FS/Source/fs_dev.c ****         return ((CPU_CHAR *)0);
3319:rtos/uC-FS/Source/fs_dev.c ****     }
3320:rtos/uC-FS/Source/fs_dev.c **** 
3321:rtos/uC-FS/Source/fs_dev.c ****     if (p_colon == name_full) {                                 /* Rtn err if two consecutive colon
 412              		.loc 1 3321 5 is_stmt 1 view .LVU124
 413              		.loc 1 3321 8 is_stmt 0 view .LVU125
 414 0052 8442     		cmp	r4, r0
 415 0054 05D0     		beq	.L42
3322:rtos/uC-FS/Source/fs_dev.c ****         name_dev[0] = (CPU_CHAR)ASCII_CHAR_NULL;
3323:rtos/uC-FS/Source/fs_dev.c ****         return ((CPU_CHAR *)0);
3324:rtos/uC-FS/Source/fs_dev.c ****     }
3325:rtos/uC-FS/Source/fs_dev.c **** 
3326:rtos/uC-FS/Source/fs_dev.c **** 
3327:rtos/uC-FS/Source/fs_dev.c **** 
3328:rtos/uC-FS/Source/fs_dev.c ****                                                                 /* ------------------ PARSE UNIT NB
3329:rtos/uC-FS/Source/fs_dev.c ****     unit_nbr = 0u;
 416              		.loc 1 3329 14 view .LVU126
 417 0056 0022     		movs	r2, #0
3330:rtos/uC-FS/Source/fs_dev.c ****     ok       = DEF_YES;
 418              		.loc 1 3330 14 view .LVU127
 419 0058 0120     		movs	r0, #1
 420              	.LVL45:
 421              		.loc 1 3330 14 view .LVU128
 422 005a 07E0     		b	.L29
 423              	.LVL46:
 424              	.L41:
3317:rtos/uC-FS/Source/fs_dev.c ****         name_dev[0] = (CPU_CHAR)ASCII_CHAR_NULL;
 425              		.loc 1 3317 9 is_stmt 1 view .LVU129
3317:rtos/uC-FS/Source/fs_dev.c ****         name_dev[0] = (CPU_CHAR)ASCII_CHAR_NULL;
 426              		.loc 1 3317 21 is_stmt 0 view .LVU130
 427 005c 0023     		movs	r3, #0
 428 005e 3B70     		strb	r3, [r7]
3318:rtos/uC-FS/Source/fs_dev.c ****     }
 429              		.loc 1 3318 9 is_stmt 1 view .LVU131
3318:rtos/uC-FS/Source/fs_dev.c ****     }
 430              		.loc 1 3318 16 is_stmt 0 view .LVU132
 431 0060 22E0     		b	.L26
 432              	.L42:
3322:rtos/uC-FS/Source/fs_dev.c ****         name_dev[0] = (CPU_CHAR)ASCII_CHAR_NULL;
 433              		.loc 1 3322 9 is_stmt 1 view .LVU133
3322:rtos/uC-FS/Source/fs_dev.c ****         name_dev[0] = (CPU_CHAR)ASCII_CHAR_NULL;
 434              		.loc 1 3322 21 is_stmt 0 view .LVU134
 435 0062 0025     		movs	r5, #0
 436 0064 3D70     		strb	r5, [r7]
3323:rtos/uC-FS/Source/fs_dev.c ****     }
 437              		.loc 1 3323 9 is_stmt 1 view .LVU135
3323:rtos/uC-FS/Source/fs_dev.c ****     }
 438              		.loc 1 3323 16 is_stmt 0 view .LVU136
 439 0066 1FE0     		b	.L26
 440              	.LVL47:
 441              	.L38:
3331:rtos/uC-FS/Source/fs_dev.c **** 
3332:rtos/uC-FS/Source/fs_dev.c ****     while ((name_full <  p_colon ) &&                           /*lint !e946 !e947 Both pts are in 
3333:rtos/uC-FS/Source/fs_dev.c ****            (ok        == DEF_YES)) {                            /* Parse unit nbr.                 
3334:rtos/uC-FS/Source/fs_dev.c ****         dig = ASCII_IS_DIG(*name_full);
3335:rtos/uC-FS/Source/fs_dev.c ****         if (dig == DEF_YES) {                                   /* Digit found.                    
3336:rtos/uC-FS/Source/fs_dev.c ****             if (unit_nbr > 24u) {                               /* Unit nbr ovf.                   
ARM GAS  /tmp/cccHmdnc.s 			page 68


3337:rtos/uC-FS/Source/fs_dev.c ****                 ok = DEF_NO;
3338:rtos/uC-FS/Source/fs_dev.c ****             } else {
3339:rtos/uC-FS/Source/fs_dev.c ****                 unit_nbr *=  DEF_NBR_BASE_DEC;
3340:rtos/uC-FS/Source/fs_dev.c ****                 unit_nbr += (FS_QTY)*name_full - (FS_QTY)ASCII_CHAR_DIGIT_ZERO;
3341:rtos/uC-FS/Source/fs_dev.c ****             }
3342:rtos/uC-FS/Source/fs_dev.c ****         } else {                                                /* Non-digit found.                
3343:rtos/uC-FS/Source/fs_dev.c ****             ok = DEF_NO;
 442              		.loc 1 3343 16 view .LVU137
 443 0068 0020     		movs	r0, #0
 444              	.LVL48:
 445              	.L30:
3344:rtos/uC-FS/Source/fs_dev.c ****         }
3345:rtos/uC-FS/Source/fs_dev.c ****         name_full++;
 446              		.loc 1 3345 9 is_stmt 1 view .LVU138
 447              		.loc 1 3345 18 is_stmt 0 view .LVU139
 448 006a 0134     		adds	r4, r4, #1
 449              	.LVL49:
 450              	.L29:
3332:rtos/uC-FS/Source/fs_dev.c ****            (ok        == DEF_YES)) {                            /* Parse unit nbr.                 
 451              		.loc 1 3332 11 is_stmt 1 view .LVU140
 452 006c AC42     		cmp	r4, r5
 453 006e 13D2     		bcs	.L31
3332:rtos/uC-FS/Source/fs_dev.c ****            (ok        == DEF_YES)) {                            /* Parse unit nbr.                 
 454              		.loc 1 3332 36 is_stmt 0 discriminator 1 view .LVU141
 455 0070 90B1     		cbz	r0, .L31
3334:rtos/uC-FS/Source/fs_dev.c ****         if (dig == DEF_YES) {                                   /* Digit found.                    
 456              		.loc 1 3334 9 is_stmt 1 view .LVU142
3334:rtos/uC-FS/Source/fs_dev.c ****         if (dig == DEF_YES) {                                   /* Digit found.                    
 457              		.loc 1 3334 15 is_stmt 0 view .LVU143
 458 0072 2178     		ldrb	r1, [r4]	@ zero_extendqisi2
 459 0074 A1F13003 		sub	r3, r1, #48
 460 0078 DBB2     		uxtb	r3, r3
3334:rtos/uC-FS/Source/fs_dev.c ****         if (dig == DEF_YES) {                                   /* Digit found.                    
 461              		.loc 1 3334 13 view .LVU144
 462 007a 092B     		cmp	r3, #9
 463 007c F4D8     		bhi	.L38
 464              	.LVL50:
3335:rtos/uC-FS/Source/fs_dev.c ****             if (unit_nbr > 24u) {                               /* Unit nbr ovf.                   
 465              		.loc 1 3335 9 is_stmt 1 view .LVU145
3336:rtos/uC-FS/Source/fs_dev.c ****                 ok = DEF_NO;
 466              		.loc 1 3336 13 view .LVU146
3336:rtos/uC-FS/Source/fs_dev.c ****                 ok = DEF_NO;
 467              		.loc 1 3336 16 is_stmt 0 view .LVU147
 468 007e 182A     		cmp	r2, #24
 469 0080 08D8     		bhi	.L39
3339:rtos/uC-FS/Source/fs_dev.c ****                 unit_nbr += (FS_QTY)*name_full - (FS_QTY)ASCII_CHAR_DIGIT_ZERO;
 470              		.loc 1 3339 17 is_stmt 1 view .LVU148
3339:rtos/uC-FS/Source/fs_dev.c ****                 unit_nbr += (FS_QTY)*name_full - (FS_QTY)ASCII_CHAR_DIGIT_ZERO;
 471              		.loc 1 3339 26 is_stmt 0 view .LVU149
 472 0082 02EB8202 		add	r2, r2, r2, lsl #2
 473              	.LVL51:
3339:rtos/uC-FS/Source/fs_dev.c ****                 unit_nbr += (FS_QTY)*name_full - (FS_QTY)ASCII_CHAR_DIGIT_ZERO;
 474              		.loc 1 3339 26 view .LVU150
 475 0086 5200     		lsls	r2, r2, #1
 476 0088 92B2     		uxth	r2, r2
 477              	.LVL52:
3340:rtos/uC-FS/Source/fs_dev.c ****             }
ARM GAS  /tmp/cccHmdnc.s 			page 69


 478              		.loc 1 3340 17 is_stmt 1 view .LVU151
3340:rtos/uC-FS/Source/fs_dev.c ****             }
 479              		.loc 1 3340 26 is_stmt 0 view .LVU152
 480 008a 1144     		add	r1, r1, r2
 481 008c 89B2     		uxth	r1, r1
 482 008e 3039     		subs	r1, r1, #48
 483 0090 8AB2     		uxth	r2, r1
 484              	.LVL53:
3340:rtos/uC-FS/Source/fs_dev.c ****             }
 485              		.loc 1 3340 26 view .LVU153
 486 0092 EAE7     		b	.L30
 487              	.L39:
3337:rtos/uC-FS/Source/fs_dev.c ****             } else {
 488              		.loc 1 3337 20 view .LVU154
 489 0094 0020     		movs	r0, #0
 490              	.LVL54:
3337:rtos/uC-FS/Source/fs_dev.c ****             } else {
 491              		.loc 1 3337 20 view .LVU155
 492 0096 E8E7     		b	.L30
 493              	.LVL55:
 494              	.L31:
3346:rtos/uC-FS/Source/fs_dev.c ****     }
3347:rtos/uC-FS/Source/fs_dev.c **** 
3348:rtos/uC-FS/Source/fs_dev.c **** 
3349:rtos/uC-FS/Source/fs_dev.c ****     if (ok == DEF_NO) {                                         /* Invalid unit nbr.               
 495              		.loc 1 3349 5 is_stmt 1 view .LVU156
 496              		.loc 1 3349 8 is_stmt 0 view .LVU157
 497 0098 10B1     		cbz	r0, .L43
3350:rtos/uC-FS/Source/fs_dev.c ****        *p_unit_nbr = 0u;
3351:rtos/uC-FS/Source/fs_dev.c ****         return ((CPU_CHAR *)0);
3352:rtos/uC-FS/Source/fs_dev.c ****     } else {
3353:rtos/uC-FS/Source/fs_dev.c ****         p_name_rem = p_colon + 1u;
 498              		.loc 1 3353 9 is_stmt 1 view .LVU158
 499              		.loc 1 3353 20 is_stmt 0 view .LVU159
 500 009a 0135     		adds	r5, r5, #1
 501              	.LVL56:
3354:rtos/uC-FS/Source/fs_dev.c ****        *p_unit_nbr = unit_nbr;
 502              		.loc 1 3354 8 is_stmt 1 view .LVU160
 503              		.loc 1 3354 20 is_stmt 0 view .LVU161
 504 009c 3280     		strh	r2, [r6]	@ movhi
3355:rtos/uC-FS/Source/fs_dev.c ****         return (p_name_rem);
 505              		.loc 1 3355 9 is_stmt 1 view .LVU162
 506              		.loc 1 3355 16 is_stmt 0 view .LVU163
 507 009e 03E0     		b	.L26
 508              	.LVL57:
 509              	.L43:
3350:rtos/uC-FS/Source/fs_dev.c ****        *p_unit_nbr = 0u;
 510              		.loc 1 3350 8 is_stmt 1 view .LVU164
3350:rtos/uC-FS/Source/fs_dev.c ****        *p_unit_nbr = 0u;
 511              		.loc 1 3350 20 is_stmt 0 view .LVU165
 512 00a0 0025     		movs	r5, #0
 513              	.LVL58:
3350:rtos/uC-FS/Source/fs_dev.c ****        *p_unit_nbr = 0u;
 514              		.loc 1 3350 20 view .LVU166
 515 00a2 3580     		strh	r5, [r6]	@ movhi
3351:rtos/uC-FS/Source/fs_dev.c ****     } else {
 516              		.loc 1 3351 9 is_stmt 1 view .LVU167
ARM GAS  /tmp/cccHmdnc.s 			page 70


3351:rtos/uC-FS/Source/fs_dev.c ****     } else {
 517              		.loc 1 3351 16 is_stmt 0 view .LVU168
 518 00a4 00E0     		b	.L26
 519              	.LVL59:
 520              	.L34:
3281:rtos/uC-FS/Source/fs_dev.c ****     }
 521              		.loc 1 3281 16 view .LVU169
 522 00a6 0025     		movs	r5, #0
 523              	.LVL60:
 524              	.L26:
3356:rtos/uC-FS/Source/fs_dev.c ****     }
3357:rtos/uC-FS/Source/fs_dev.c **** }
 525              		.loc 1 3357 1 view .LVU170
 526 00a8 2846     		mov	r0, r5
 527 00aa F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 528              	.LVL61:
 529              	.L35:
3294:rtos/uC-FS/Source/fs_dev.c ****     }
 530              		.loc 1 3294 16 view .LVU171
 531 00ac 0025     		movs	r5, #0
 532 00ae FBE7     		b	.L26
 533              	.LVL62:
 534              	.L36:
3300:rtos/uC-FS/Source/fs_dev.c ****     }
 535              		.loc 1 3300 16 view .LVU172
 536 00b0 0025     		movs	r5, #0
 537 00b2 F9E7     		b	.L26
 538              		.cfi_endproc
 539              	.LFE37:
 541              		.section	.text.FSDev_ObjClr,"ax",%progbits
 542              		.align	1
 543              		.syntax unified
 544              		.thumb
 545              		.thumb_func
 546              		.fpu fpv4-sp-d16
 548              	FSDev_ObjClr:
 549              	.LVL63:
 550              	.LFB33:
3069:rtos/uC-FS/Source/fs_dev.c ****     p_dev->ID           =  0u;
 551              		.loc 1 3069 1 is_stmt 1 view -0
 552              		.cfi_startproc
 553              		@ args = 0, pretend = 0, frame = 0
 554              		@ frame_needed = 0, uses_anonymous_args = 0
3069:rtos/uC-FS/Source/fs_dev.c ****     p_dev->ID           =  0u;
 555              		.loc 1 3069 1 is_stmt 0 view .LVU174
 556 0000 38B5     		push	{r3, r4, r5, lr}
 557              	.LCFI3:
 558              		.cfi_def_cfa_offset 16
 559              		.cfi_offset 3, -16
 560              		.cfi_offset 4, -12
 561              		.cfi_offset 5, -8
 562              		.cfi_offset 14, -4
 563 0002 0446     		mov	r4, r0
3070:rtos/uC-FS/Source/fs_dev.c ****     p_dev->State        =  FS_DEV_STATE_CLOSED;
 564              		.loc 1 3070 5 is_stmt 1 view .LVU175
3070:rtos/uC-FS/Source/fs_dev.c ****     p_dev->State        =  FS_DEV_STATE_CLOSED;
 565              		.loc 1 3070 25 is_stmt 0 view .LVU176
ARM GAS  /tmp/cccHmdnc.s 			page 71


 566 0004 0025     		movs	r5, #0
 567 0006 0560     		str	r5, [r0]
3071:rtos/uC-FS/Source/fs_dev.c ****     p_dev->RefCnt       =  0u;
 568              		.loc 1 3071 5 is_stmt 1 view .LVU177
3071:rtos/uC-FS/Source/fs_dev.c ****     p_dev->RefCnt       =  0u;
 569              		.loc 1 3071 25 is_stmt 0 view .LVU178
 570 0008 8580     		strh	r5, [r0, #4]	@ movhi
3072:rtos/uC-FS/Source/fs_dev.c ****     p_dev->RefreshCnt   =  0u;
 571              		.loc 1 3072 5 is_stmt 1 view .LVU179
3072:rtos/uC-FS/Source/fs_dev.c ****     p_dev->RefreshCnt   =  0u;
 572              		.loc 1 3072 25 is_stmt 0 view .LVU180
 573 000a 8560     		str	r5, [r0, #8]
3073:rtos/uC-FS/Source/fs_dev.c **** 
 574              		.loc 1 3073 5 is_stmt 1 view .LVU181
3073:rtos/uC-FS/Source/fs_dev.c **** 
 575              		.loc 1 3073 25 is_stmt 0 view .LVU182
 576 000c C560     		str	r5, [r0, #12]
3075:rtos/uC-FS/Source/fs_dev.c ****             (CPU_INT08U  ) ASCII_CHAR_NULL,
 577              		.loc 1 3075 5 is_stmt 1 view .LVU183
 578 000e 1022     		movs	r2, #16
 579 0010 2946     		mov	r1, r5
 580 0012 1044     		add	r0, r0, r2
 581              	.LVL64:
3075:rtos/uC-FS/Source/fs_dev.c ****             (CPU_INT08U  ) ASCII_CHAR_NULL,
 582              		.loc 1 3075 5 is_stmt 0 view .LVU184
 583 0014 FFF7FEFF 		bl	Mem_Set
 584              	.LVL65:
3079:rtos/uC-FS/Source/fs_dev.c ****     p_dev->Size         =  0u;
 585              		.loc 1 3079 5 is_stmt 1 view .LVU185
3079:rtos/uC-FS/Source/fs_dev.c ****     p_dev->Size         =  0u;
 586              		.loc 1 3079 25 is_stmt 0 view .LVU186
 587 0018 2584     		strh	r5, [r4, #32]	@ movhi
3080:rtos/uC-FS/Source/fs_dev.c ****     p_dev->SecSize      =  0u;
 588              		.loc 1 3080 5 is_stmt 1 view .LVU187
3080:rtos/uC-FS/Source/fs_dev.c ****     p_dev->SecSize      =  0u;
 589              		.loc 1 3080 25 is_stmt 0 view .LVU188
 590 001a 6562     		str	r5, [r4, #36]
3081:rtos/uC-FS/Source/fs_dev.c ****     p_dev->Fixed        =  DEF_NO;
 591              		.loc 1 3081 5 is_stmt 1 view .LVU189
3081:rtos/uC-FS/Source/fs_dev.c ****     p_dev->Fixed        =  DEF_NO;
 592              		.loc 1 3081 25 is_stmt 0 view .LVU190
 593 001c A562     		str	r5, [r4, #40]
3082:rtos/uC-FS/Source/fs_dev.c **** 
 594              		.loc 1 3082 5 is_stmt 1 view .LVU191
3082:rtos/uC-FS/Source/fs_dev.c **** 
 595              		.loc 1 3082 25 is_stmt 0 view .LVU192
 596 001e 84F82C50 		strb	r5, [r4, #44]
3084:rtos/uC-FS/Source/fs_dev.c ****     p_dev->DevDrvPtr    = (FS_DEV_API *)0;
 597              		.loc 1 3084 5 is_stmt 1 view .LVU193
3084:rtos/uC-FS/Source/fs_dev.c ****     p_dev->DevDrvPtr    = (FS_DEV_API *)0;
 598              		.loc 1 3084 25 is_stmt 0 view .LVU194
 599 0022 E585     		strh	r5, [r4, #46]	@ movhi
3085:rtos/uC-FS/Source/fs_dev.c ****     p_dev->DataPtr      =  DEF_NULL;
 600              		.loc 1 3085 5 is_stmt 1 view .LVU195
3085:rtos/uC-FS/Source/fs_dev.c ****     p_dev->DataPtr      =  DEF_NULL;
 601              		.loc 1 3085 25 is_stmt 0 view .LVU196
 602 0024 2563     		str	r5, [r4, #48]
ARM GAS  /tmp/cccHmdnc.s 			page 72


3086:rtos/uC-FS/Source/fs_dev.c **** 
 603              		.loc 1 3086 5 is_stmt 1 view .LVU197
3086:rtos/uC-FS/Source/fs_dev.c **** 
 604              		.loc 1 3086 25 is_stmt 0 view .LVU198
 605 0026 6563     		str	r5, [r4, #52]
3092:rtos/uC-FS/Source/fs_dev.c **** 
 606              		.loc 1 3092 1 view .LVU199
 607 0028 38BD     		pop	{r3, r4, r5, pc}
3092:rtos/uC-FS/Source/fs_dev.c **** 
 608              		.loc 1 3092 1 view .LVU200
 609              		.cfi_endproc
 610              	.LFE33:
 612              		.section	.text.FSDev_ObjGet,"ax",%progbits
 613              		.align	1
 614              		.syntax unified
 615              		.thumb
 616              		.thumb_func
 617              		.fpu fpv4-sp-d16
 619              	FSDev_ObjGet:
 620              	.LFB36:
3189:rtos/uC-FS/Source/fs_dev.c ****     FS_DEV   *p_dev    = DEF_NULL;
 621              		.loc 1 3189 1 is_stmt 1 view -0
 622              		.cfi_startproc
 623              		@ args = 0, pretend = 0, frame = 8
 624              		@ frame_needed = 0, uses_anonymous_args = 0
 625 0000 30B5     		push	{r4, r5, lr}
 626              	.LCFI4:
 627              		.cfi_def_cfa_offset 12
 628              		.cfi_offset 4, -12
 629              		.cfi_offset 5, -8
 630              		.cfi_offset 14, -4
 631 0002 83B0     		sub	sp, sp, #12
 632              	.LCFI5:
 633              		.cfi_def_cfa_offset 24
3190:rtos/uC-FS/Source/fs_dev.c ****     LIB_ERR   pool_err;
 634              		.loc 1 3190 5 view .LVU202
 635              	.LVL66:
3191:rtos/uC-FS/Source/fs_dev.c ****     FS_QTY    dev_ix;
 636              		.loc 1 3191 5 view .LVU203
3192:rtos/uC-FS/Source/fs_dev.c **** 
 637              		.loc 1 3192 5 view .LVU204
3195:rtos/uC-FS/Source/fs_dev.c ****         if (FSDev_Tbl[dev_ix] == DEF_NULL) {
 638              		.loc 1 3195 5 view .LVU205
3195:rtos/uC-FS/Source/fs_dev.c ****         if (FSDev_Tbl[dev_ix] == DEF_NULL) {
 639              		.loc 1 3195 17 is_stmt 0 view .LVU206
 640 0004 0024     		movs	r4, #0
 641              	.LVL67:
 642              	.L47:
3195:rtos/uC-FS/Source/fs_dev.c ****         if (FSDev_Tbl[dev_ix] == DEF_NULL) {
 643              		.loc 1 3195 23 is_stmt 1 discriminator 1 view .LVU207
3195:rtos/uC-FS/Source/fs_dev.c ****         if (FSDev_Tbl[dev_ix] == DEF_NULL) {
 644              		.loc 1 3195 30 is_stmt 0 discriminator 1 view .LVU208
 645 0006 134B     		ldr	r3, .L53
 646 0008 1B88     		ldrh	r3, [r3]
3195:rtos/uC-FS/Source/fs_dev.c ****         if (FSDev_Tbl[dev_ix] == DEF_NULL) {
 647              		.loc 1 3195 5 discriminator 1 view .LVU209
 648 000a A342     		cmp	r3, r4
ARM GAS  /tmp/cccHmdnc.s 			page 73


 649 000c 07D9     		bls	.L48
3196:rtos/uC-FS/Source/fs_dev.c ****             break;
 650              		.loc 1 3196 9 is_stmt 1 view .LVU210
3196:rtos/uC-FS/Source/fs_dev.c ****             break;
 651              		.loc 1 3196 22 is_stmt 0 view .LVU211
 652 000e 124A     		ldr	r2, .L53+4
 653 0010 1268     		ldr	r2, [r2]
 654 0012 52F82420 		ldr	r2, [r2, r4, lsl #2]
3196:rtos/uC-FS/Source/fs_dev.c ****             break;
 655              		.loc 1 3196 12 view .LVU212
 656 0016 12B1     		cbz	r2, .L48
3195:rtos/uC-FS/Source/fs_dev.c ****         if (FSDev_Tbl[dev_ix] == DEF_NULL) {
 657              		.loc 1 3195 49 is_stmt 1 discriminator 2 view .LVU213
3195:rtos/uC-FS/Source/fs_dev.c ****         if (FSDev_Tbl[dev_ix] == DEF_NULL) {
 658              		.loc 1 3195 55 is_stmt 0 discriminator 2 view .LVU214
 659 0018 0134     		adds	r4, r4, #1
 660              	.LVL68:
3195:rtos/uC-FS/Source/fs_dev.c ****         if (FSDev_Tbl[dev_ix] == DEF_NULL) {
 661              		.loc 1 3195 55 discriminator 2 view .LVU215
 662 001a A4B2     		uxth	r4, r4
 663              	.LVL69:
3195:rtos/uC-FS/Source/fs_dev.c ****         if (FSDev_Tbl[dev_ix] == DEF_NULL) {
 664              		.loc 1 3195 55 discriminator 2 view .LVU216
 665 001c F3E7     		b	.L47
 666              	.L48:
3201:rtos/uC-FS/Source/fs_dev.c ****         goto exit_fail;
 667              		.loc 1 3201 5 is_stmt 1 view .LVU217
3201:rtos/uC-FS/Source/fs_dev.c ****         goto exit_fail;
 668              		.loc 1 3201 8 is_stmt 0 view .LVU218
 669 001e A342     		cmp	r3, r4
 670 0020 15D9     		bls	.L51
3205:rtos/uC-FS/Source/fs_dev.c ****                                       sizeof(FS_DEV),
 671              		.loc 1 3205 5 is_stmt 1 view .LVU219
3205:rtos/uC-FS/Source/fs_dev.c ****                                       sizeof(FS_DEV),
 672              		.loc 1 3205 23 is_stmt 0 view .LVU220
 673 0022 0DF10602 		add	r2, sp, #6
 674 0026 3821     		movs	r1, #56
 675 0028 0C48     		ldr	r0, .L53+8
 676 002a FFF7FEFF 		bl	Mem_PoolBlkGet
 677              	.LVL70:
3208:rtos/uC-FS/Source/fs_dev.c ****     if (p_dev == (FS_DEV *)0) {
 678              		.loc 1 3208 5 is_stmt 1 view .LVU221
3209:rtos/uC-FS/Source/fs_dev.c ****         goto exit_fail;
 679              		.loc 1 3209 5 view .LVU222
3209:rtos/uC-FS/Source/fs_dev.c ****         goto exit_fail;
 680              		.loc 1 3209 8 is_stmt 0 view .LVU223
 681 002e 0546     		mov	r5, r0
 682 0030 50B1     		cbz	r0, .L46
3213:rtos/uC-FS/Source/fs_dev.c **** 
 683              		.loc 1 3213 5 is_stmt 1 view .LVU224
 684 0032 FFF7FEFF 		bl	FSDev_ObjClr
 685              	.LVL71:
3215:rtos/uC-FS/Source/fs_dev.c **** 
 686              		.loc 1 3215 5 view .LVU225
3215:rtos/uC-FS/Source/fs_dev.c **** 
 687              		.loc 1 3215 14 is_stmt 0 view .LVU226
 688 0036 084B     		ldr	r3, .L53+4
ARM GAS  /tmp/cccHmdnc.s 			page 74


 689 0038 1B68     		ldr	r3, [r3]
3215:rtos/uC-FS/Source/fs_dev.c **** 
 690              		.loc 1 3215 23 view .LVU227
 691 003a 43F82450 		str	r5, [r3, r4, lsl #2]
3217:rtos/uC-FS/Source/fs_dev.c **** 
 692              		.loc 1 3217 5 is_stmt 1 view .LVU228
3217:rtos/uC-FS/Source/fs_dev.c **** 
 693              		.loc 1 3217 14 is_stmt 0 view .LVU229
 694 003e 084A     		ldr	r2, .L53+12
 695 0040 1388     		ldrh	r3, [r2]
 696 0042 0133     		adds	r3, r3, #1
 697 0044 1380     		strh	r3, [r2]	@ movhi
3219:rtos/uC-FS/Source/fs_dev.c **** 
 698              		.loc 1 3219 5 is_stmt 1 view .LVU230
3219:rtos/uC-FS/Source/fs_dev.c **** 
 699              		.loc 1 3219 15 is_stmt 0 view .LVU231
 700 0046 2C60     		str	r4, [r5]
3221:rtos/uC-FS/Source/fs_dev.c **** 
 701              		.loc 1 3221 5 is_stmt 1 view .LVU232
 702              	.LVL72:
 703              	.L46:
3226:rtos/uC-FS/Source/fs_dev.c **** 
 704              		.loc 1 3226 1 is_stmt 0 view .LVU233
 705 0048 2846     		mov	r0, r5
 706 004a 03B0     		add	sp, sp, #12
 707              	.LCFI6:
 708              		.cfi_remember_state
 709              		.cfi_def_cfa_offset 12
 710              		@ sp needed
 711 004c 30BD     		pop	{r4, r5, pc}
 712              	.LVL73:
 713              	.L51:
 714              	.LCFI7:
 715              		.cfi_restore_state
3190:rtos/uC-FS/Source/fs_dev.c ****     LIB_ERR   pool_err;
 716              		.loc 1 3190 15 view .LVU234
 717 004e 0025     		movs	r5, #0
 718              	.LVL74:
3190:rtos/uC-FS/Source/fs_dev.c ****     LIB_ERR   pool_err;
 719              		.loc 1 3190 15 view .LVU235
 720 0050 FAE7     		b	.L46
 721              	.L54:
 722 0052 00BF     		.align	2
 723              	.L53:
 724 0054 00000000 		.word	.LANCHOR3
 725 0058 00000000 		.word	.LANCHOR2
 726 005c 00000000 		.word	.LANCHOR4
 727 0060 00000000 		.word	.LANCHOR5
 728              		.cfi_endproc
 729              	.LFE36:
 731              		.section	.text.FSDev_ObjFree,"ax",%progbits
 732              		.align	1
 733              		.syntax unified
 734              		.thumb
 735              		.thumb_func
 736              		.fpu fpv4-sp-d16
 738              	FSDev_ObjFree:
ARM GAS  /tmp/cccHmdnc.s 			page 75


 739              	.LVL75:
 740              	.LFB35:
3150:rtos/uC-FS/Source/fs_dev.c ****     LIB_ERR  pool_err;
 741              		.loc 1 3150 1 is_stmt 1 view -0
 742              		.cfi_startproc
 743              		@ args = 0, pretend = 0, frame = 8
 744              		@ frame_needed = 0, uses_anonymous_args = 0
3150:rtos/uC-FS/Source/fs_dev.c ****     LIB_ERR  pool_err;
 745              		.loc 1 3150 1 is_stmt 0 view .LVU237
 746 0000 10B5     		push	{r4, lr}
 747              	.LCFI8:
 748              		.cfi_def_cfa_offset 8
 749              		.cfi_offset 4, -8
 750              		.cfi_offset 14, -4
 751 0002 82B0     		sub	sp, sp, #8
 752              	.LCFI9:
 753              		.cfi_def_cfa_offset 16
 754 0004 0446     		mov	r4, r0
3151:rtos/uC-FS/Source/fs_dev.c **** 
 755              		.loc 1 3151 5 is_stmt 1 view .LVU238
3154:rtos/uC-FS/Source/fs_dev.c **** 
 756              		.loc 1 3154 5 view .LVU239
3154:rtos/uC-FS/Source/fs_dev.c **** 
 757              		.loc 1 3154 20 is_stmt 0 view .LVU240
 758 0006 0268     		ldr	r2, [r0]
3154:rtos/uC-FS/Source/fs_dev.c **** 
 759              		.loc 1 3154 14 view .LVU241
 760 0008 0D4B     		ldr	r3, .L59
 761 000a 1B68     		ldr	r3, [r3]
3154:rtos/uC-FS/Source/fs_dev.c **** 
 762              		.loc 1 3154 26 view .LVU242
 763 000c 0021     		movs	r1, #0
 764 000e 43F82210 		str	r1, [r3, r2, lsl #2]
3157:rtos/uC-FS/Source/fs_dev.c **** #endif
 765              		.loc 1 3157 5 is_stmt 1 view .LVU243
 766 0012 FFF7FEFF 		bl	FSDev_ObjClr
 767              	.LVL76:
3160:rtos/uC-FS/Source/fs_dev.c ****                     (void *) p_dev,
 768              		.loc 1 3160 5 view .LVU244
 769 0016 0DF10602 		add	r2, sp, #6
 770 001a 2146     		mov	r1, r4
 771 001c 0948     		ldr	r0, .L59+4
 772 001e FFF7FEFF 		bl	Mem_PoolBlkFree
 773              	.LVL77:
3164:rtos/uC-FS/Source/fs_dev.c ****         FS_TRACE_INFO(("FSDev_ObjFree(): Could not free dev to pool.\r\n"));
 774              		.loc 1 3164 5 view .LVU245
3164:rtos/uC-FS/Source/fs_dev.c ****         FS_TRACE_INFO(("FSDev_ObjFree(): Could not free dev to pool.\r\n"));
 775              		.loc 1 3164 18 is_stmt 0 view .LVU246
 776 0022 BDF80620 		ldrh	r2, [sp, #6]
3164:rtos/uC-FS/Source/fs_dev.c ****         FS_TRACE_INFO(("FSDev_ObjFree(): Could not free dev to pool.\r\n"));
 777              		.loc 1 3164 8 view .LVU247
 778 0026 42F21073 		movw	r3, #10000
 779 002a 9A42     		cmp	r2, r3
 780 002c 05D1     		bne	.L58
 781              	.L56:
3166:rtos/uC-FS/Source/fs_dev.c ****     }
 782              		.loc 1 3166 9 is_stmt 1 discriminator 1 view .LVU248
ARM GAS  /tmp/cccHmdnc.s 			page 76


3169:rtos/uC-FS/Source/fs_dev.c **** }
 783              		.loc 1 3169 5 discriminator 1 view .LVU249
3169:rtos/uC-FS/Source/fs_dev.c **** }
 784              		.loc 1 3169 14 is_stmt 0 discriminator 1 view .LVU250
 785 002e 064A     		ldr	r2, .L59+8
 786 0030 1388     		ldrh	r3, [r2]
 787 0032 013B     		subs	r3, r3, #1
 788 0034 1380     		strh	r3, [r2]	@ movhi
3170:rtos/uC-FS/Source/fs_dev.c **** 
 789              		.loc 1 3170 1 discriminator 1 view .LVU251
 790 0036 02B0     		add	sp, sp, #8
 791              	.LCFI10:
 792              		.cfi_remember_state
 793              		.cfi_def_cfa_offset 8
 794              		@ sp needed
 795 0038 10BD     		pop	{r4, pc}
 796              	.LVL78:
 797              	.L58:
 798              	.LCFI11:
 799              		.cfi_restore_state
3165:rtos/uC-FS/Source/fs_dev.c ****         CPU_SW_EXCEPTION(;);
 800              		.loc 1 3165 76 is_stmt 1 view .LVU252
3166:rtos/uC-FS/Source/fs_dev.c ****     }
 801              		.loc 1 3166 9 view .LVU253
3166:rtos/uC-FS/Source/fs_dev.c ****     }
 802              		.loc 1 3166 9 view .LVU254
 803 003a FFF7FEFF 		bl	CPU_SW_Exception
 804              	.LVL79:
 805 003e F6E7     		b	.L56
 806              	.L60:
 807              		.align	2
 808              	.L59:
 809 0040 00000000 		.word	.LANCHOR2
 810 0044 00000000 		.word	.LANCHOR4
 811 0048 00000000 		.word	.LANCHOR5
 812              		.cfi_endproc
 813              	.LFE35:
 815              		.section	.text.FS_DevDrvAdd,"ax",%progbits
 816              		.align	1
 817              		.global	FS_DevDrvAdd
 818              		.syntax unified
 819              		.thumb
 820              		.thumb_func
 821              		.fpu fpv4-sp-d16
 823              	FS_DevDrvAdd:
 824              	.LVL80:
 825              	.LFB0:
 188:rtos/uC-FS/Source/fs_dev.c ****            CPU_SIZE_T    str_len;
 826              		.loc 1 188 1 view -0
 827              		.cfi_startproc
 828              		@ args = 0, pretend = 0, frame = 0
 829              		@ frame_needed = 0, uses_anonymous_args = 0
 188:rtos/uC-FS/Source/fs_dev.c ****            CPU_SIZE_T    str_len;
 830              		.loc 1 188 1 is_stmt 0 view .LVU256
 831 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 832              	.LCFI12:
 833              		.cfi_def_cfa_offset 24
ARM GAS  /tmp/cccHmdnc.s 			page 77


 834              		.cfi_offset 3, -24
 835              		.cfi_offset 4, -20
 836              		.cfi_offset 5, -16
 837              		.cfi_offset 6, -12
 838              		.cfi_offset 7, -8
 839              		.cfi_offset 14, -4
 840 0002 0446     		mov	r4, r0
 189:rtos/uC-FS/Source/fs_dev.c ****            CPU_CHAR     *p_colon;
 841              		.loc 1 189 12 is_stmt 1 view .LVU257
 190:rtos/uC-FS/Source/fs_dev.c ****            FS_DEV_API   *p_dev_drv_dup;
 842              		.loc 1 190 12 view .LVU258
 191:rtos/uC-FS/Source/fs_dev.c ****     const  CPU_CHAR     *name_dev;
 843              		.loc 1 191 12 view .LVU259
 192:rtos/uC-FS/Source/fs_dev.c ****            FS_QTY        ix;
 844              		.loc 1 192 5 view .LVU260
 193:rtos/uC-FS/Source/fs_dev.c **** 
 845              		.loc 1 193 12 view .LVU261
 197:rtos/uC-FS/Source/fs_dev.c ****         CPU_SW_EXCEPTION(;);
 846              		.loc 1 197 5 view .LVU262
 197:rtos/uC-FS/Source/fs_dev.c ****         CPU_SW_EXCEPTION(;);
 847              		.loc 1 197 8 is_stmt 0 view .LVU263
 848 0004 0D46     		mov	r5, r1
 849 0006 D9B1     		cbz	r1, .L76
 850              	.LVL81:
 851              	.L62:
 198:rtos/uC-FS/Source/fs_dev.c ****     }
 852              		.loc 1 198 9 is_stmt 1 discriminator 1 view .LVU264
 200:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_NULL_PTR;
 853              		.loc 1 200 5 discriminator 1 view .LVU265
 200:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_NULL_PTR;
 854              		.loc 1 200 8 is_stmt 0 discriminator 1 view .LVU266
 855 0008 ECB1     		cbz	r4, .L77
 209:rtos/uC-FS/Source/fs_dev.c ****     if (*p_err != FS_ERR_NONE) {
 856              		.loc 1 209 5 is_stmt 1 view .LVU267
 857 000a 2846     		mov	r0, r5
 858 000c FFF7FEFF 		bl	FS_OS_Lock
 859              	.LVL82:
 210:rtos/uC-FS/Source/fs_dev.c ****         return;
 860              		.loc 1 210 5 view .LVU268
 210:rtos/uC-FS/Source/fs_dev.c ****         return;
 861              		.loc 1 210 9 is_stmt 0 view .LVU269
 862 0010 2E88     		ldrh	r6, [r5]
 210:rtos/uC-FS/Source/fs_dev.c ****         return;
 863              		.loc 1 210 8 view .LVU270
 864 0012 D6B9     		cbnz	r6, .L61
 217:rtos/uC-FS/Source/fs_dev.c ****     if (name_dev == (CPU_CHAR *)0) {                            /* Rtn if name is NULL ptr.        
 865              		.loc 1 217 5 is_stmt 1 view .LVU271
 217:rtos/uC-FS/Source/fs_dev.c ****     if (name_dev == (CPU_CHAR *)0) {                            /* Rtn if name is NULL ptr.        
 866              		.loc 1 217 25 is_stmt 0 view .LVU272
 867 0014 2368     		ldr	r3, [r4]
 217:rtos/uC-FS/Source/fs_dev.c ****     if (name_dev == (CPU_CHAR *)0) {                            /* Rtn if name is NULL ptr.        
 868              		.loc 1 217 16 view .LVU273
 869 0016 9847     		blx	r3
 870              	.LVL83:
 218:rtos/uC-FS/Source/fs_dev.c ****         FS_OS_Unlock();
 871              		.loc 1 218 5 is_stmt 1 view .LVU274
 218:rtos/uC-FS/Source/fs_dev.c ****         FS_OS_Unlock();
ARM GAS  /tmp/cccHmdnc.s 			page 78


 872              		.loc 1 218 8 is_stmt 0 view .LVU275
 873 0018 0746     		mov	r7, r0
 874 001a B8B1     		cbz	r0, .L78
 224:rtos/uC-FS/Source/fs_dev.c ****     if ((str_len <                          1u) ||              /* Rtn if name is empty str (see No
 875              		.loc 1 224 5 is_stmt 1 view .LVU276
 224:rtos/uC-FS/Source/fs_dev.c ****     if ((str_len <                          1u) ||              /* Rtn if name is empty str (see No
 876              		.loc 1 224 15 is_stmt 0 view .LVU277
 877 001c 0B21     		movs	r1, #11
 878 001e FFF7FEFF 		bl	Str_Len_N
 879              	.LVL84:
 225:rtos/uC-FS/Source/fs_dev.c ****         (str_len > FS_CFG_MAX_DEV_DRV_NAME_LEN)) {              /* ... or name is too long  (see No
 880              		.loc 1 225 5 is_stmt 1 view .LVU278
 225:rtos/uC-FS/Source/fs_dev.c ****         (str_len > FS_CFG_MAX_DEV_DRV_NAME_LEN)) {              /* ... or name is too long  (see No
 881              		.loc 1 225 49 is_stmt 0 view .LVU279
 882 0022 0138     		subs	r0, r0, #1
 883              	.LVL85:
 225:rtos/uC-FS/Source/fs_dev.c ****         (str_len > FS_CFG_MAX_DEV_DRV_NAME_LEN)) {              /* ... or name is too long  (see No
 884              		.loc 1 225 8 view .LVU280
 885 0024 0928     		cmp	r0, #9
 886 0026 17D8     		bhi	.L79
 232:rtos/uC-FS/Source/fs_dev.c ****     if (p_colon != (CPU_CHAR *)0) {                             /* Rtn if name contains ':' (see No
 887              		.loc 1 232 5 is_stmt 1 view .LVU281
 232:rtos/uC-FS/Source/fs_dev.c ****     if (p_colon != (CPU_CHAR *)0) {                             /* Rtn if name contains ':' (see No
 888              		.loc 1 232 15 is_stmt 0 view .LVU282
 889 0028 3A22     		movs	r2, #58
 890 002a 0A21     		movs	r1, #10
 891 002c 3846     		mov	r0, r7
 892              	.LVL86:
 232:rtos/uC-FS/Source/fs_dev.c ****     if (p_colon != (CPU_CHAR *)0) {                             /* Rtn if name contains ':' (see No
 893              		.loc 1 232 15 view .LVU283
 894 002e FFF7FEFF 		bl	Str_Char_N
 895              	.LVL87:
 233:rtos/uC-FS/Source/fs_dev.c ****         FS_OS_Unlock();
 896              		.loc 1 233 5 is_stmt 1 view .LVU284
 233:rtos/uC-FS/Source/fs_dev.c ****         FS_OS_Unlock();
 897              		.loc 1 233 8 is_stmt 0 view .LVU285
 898 0032 B8B1     		cbz	r0, .L67
 234:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_DEV_DRV_INVALID_NAME;
 899              		.loc 1 234 9 is_stmt 1 view .LVU286
 900 0034 FFF7FEFF 		bl	FS_OS_Unlock
 901              	.LVL88:
 235:rtos/uC-FS/Source/fs_dev.c ****         return;
 902              		.loc 1 235 8 view .LVU287
 235:rtos/uC-FS/Source/fs_dev.c ****         return;
 903              		.loc 1 235 15 is_stmt 0 view .LVU288
 904 0038 40F29113 		movw	r3, #401
 905 003c 2B80     		strh	r3, [r5]	@ movhi
 236:rtos/uC-FS/Source/fs_dev.c ****     }
 906              		.loc 1 236 9 is_stmt 1 view .LVU289
 907 003e 04E0     		b	.L61
 908              	.LVL89:
 909              	.L76:
 198:rtos/uC-FS/Source/fs_dev.c ****     }
 910              		.loc 1 198 9 view .LVU290
 198:rtos/uC-FS/Source/fs_dev.c ****     }
 911              		.loc 1 198 9 view .LVU291
 912 0040 FFF7FEFF 		bl	CPU_SW_Exception
ARM GAS  /tmp/cccHmdnc.s 			page 79


 913              	.LVL90:
 198:rtos/uC-FS/Source/fs_dev.c ****     }
 914              		.loc 1 198 9 is_stmt 0 view .LVU292
 915 0044 E0E7     		b	.L62
 916              	.L77:
 201:rtos/uC-FS/Source/fs_dev.c ****         return;
 917              		.loc 1 201 8 is_stmt 1 view .LVU293
 201:rtos/uC-FS/Source/fs_dev.c ****         return;
 918              		.loc 1 201 15 is_stmt 0 view .LVU294
 919 0046 1323     		movs	r3, #19
 920 0048 2B80     		strh	r3, [r5]	@ movhi
 202:rtos/uC-FS/Source/fs_dev.c ****     }
 921              		.loc 1 202 9 is_stmt 1 view .LVU295
 922              	.L61:
 290:rtos/uC-FS/Source/fs_dev.c **** 
 923              		.loc 1 290 1 is_stmt 0 view .LVU296
 924 004a F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 925              	.LVL91:
 926              	.L78:
 219:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_DEV_DRV_INVALID_NAME;
 927              		.loc 1 219 9 is_stmt 1 view .LVU297
 928 004c FFF7FEFF 		bl	FS_OS_Unlock
 929              	.LVL92:
 220:rtos/uC-FS/Source/fs_dev.c ****         return;
 930              		.loc 1 220 8 view .LVU298
 220:rtos/uC-FS/Source/fs_dev.c ****         return;
 931              		.loc 1 220 15 is_stmt 0 view .LVU299
 932 0050 40F29113 		movw	r3, #401
 933 0054 2B80     		strh	r3, [r5]	@ movhi
 221:rtos/uC-FS/Source/fs_dev.c ****     }
 934              		.loc 1 221 9 is_stmt 1 view .LVU300
 935 0056 F8E7     		b	.L61
 936              	.LVL93:
 937              	.L79:
 227:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_DEV_DRV_INVALID_NAME;
 938              		.loc 1 227 9 view .LVU301
 939 0058 FFF7FEFF 		bl	FS_OS_Unlock
 940              	.LVL94:
 228:rtos/uC-FS/Source/fs_dev.c ****         return;
 941              		.loc 1 228 8 view .LVU302
 228:rtos/uC-FS/Source/fs_dev.c ****         return;
 942              		.loc 1 228 15 is_stmt 0 view .LVU303
 943 005c 40F29113 		movw	r3, #401
 944 0060 2B80     		strh	r3, [r5]	@ movhi
 229:rtos/uC-FS/Source/fs_dev.c ****     }
 945              		.loc 1 229 9 is_stmt 1 view .LVU304
 946 0062 F2E7     		b	.L61
 947              	.LVL95:
 948              	.L67:
 239:rtos/uC-FS/Source/fs_dev.c ****     if (p_colon != (CPU_CHAR *)0) {                             /* Rtn if name contains '/' (see No
 949              		.loc 1 239 5 view .LVU305
 239:rtos/uC-FS/Source/fs_dev.c ****     if (p_colon != (CPU_CHAR *)0) {                             /* Rtn if name contains '/' (see No
 950              		.loc 1 239 15 is_stmt 0 view .LVU306
 951 0064 2F22     		movs	r2, #47
 952 0066 0A21     		movs	r1, #10
 953 0068 3846     		mov	r0, r7
 954              	.LVL96:
ARM GAS  /tmp/cccHmdnc.s 			page 80


 239:rtos/uC-FS/Source/fs_dev.c ****     if (p_colon != (CPU_CHAR *)0) {                             /* Rtn if name contains '/' (see No
 955              		.loc 1 239 15 view .LVU307
 956 006a FFF7FEFF 		bl	Str_Char_N
 957              	.LVL97:
 240:rtos/uC-FS/Source/fs_dev.c ****         FS_OS_Unlock();
 958              		.loc 1 240 5 is_stmt 1 view .LVU308
 240:rtos/uC-FS/Source/fs_dev.c ****         FS_OS_Unlock();
 959              		.loc 1 240 8 is_stmt 0 view .LVU309
 960 006e 28B1     		cbz	r0, .L68
 241:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_DEV_DRV_INVALID_NAME;
 961              		.loc 1 241 9 is_stmt 1 view .LVU310
 962 0070 FFF7FEFF 		bl	FS_OS_Unlock
 963              	.LVL98:
 242:rtos/uC-FS/Source/fs_dev.c ****         return;
 964              		.loc 1 242 8 view .LVU311
 242:rtos/uC-FS/Source/fs_dev.c ****         return;
 965              		.loc 1 242 15 is_stmt 0 view .LVU312
 966 0074 40F29113 		movw	r3, #401
 967 0078 2B80     		strh	r3, [r5]	@ movhi
 243:rtos/uC-FS/Source/fs_dev.c ****     }
 968              		.loc 1 243 9 is_stmt 1 view .LVU313
 969 007a E6E7     		b	.L61
 970              	.LVL99:
 971              	.L68:
 246:rtos/uC-FS/Source/fs_dev.c ****     if (p_colon != (CPU_CHAR *)0) {                             /* Rtn if name contains '\' (see No
 972              		.loc 1 246 5 view .LVU314
 246:rtos/uC-FS/Source/fs_dev.c ****     if (p_colon != (CPU_CHAR *)0) {                             /* Rtn if name contains '\' (see No
 973              		.loc 1 246 15 is_stmt 0 view .LVU315
 974 007c 5C22     		movs	r2, #92
 975 007e 0A21     		movs	r1, #10
 976 0080 3846     		mov	r0, r7
 977              	.LVL100:
 246:rtos/uC-FS/Source/fs_dev.c ****     if (p_colon != (CPU_CHAR *)0) {                             /* Rtn if name contains '\' (see No
 978              		.loc 1 246 15 view .LVU316
 979 0082 FFF7FEFF 		bl	Str_Char_N
 980              	.LVL101:
 247:rtos/uC-FS/Source/fs_dev.c ****         FS_OS_Unlock();
 981              		.loc 1 247 5 is_stmt 1 view .LVU317
 247:rtos/uC-FS/Source/fs_dev.c ****         FS_OS_Unlock();
 982              		.loc 1 247 8 is_stmt 0 view .LVU318
 983 0086 28B1     		cbz	r0, .L69
 248:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_DEV_DRV_INVALID_NAME;
 984              		.loc 1 248 9 is_stmt 1 view .LVU319
 985 0088 FFF7FEFF 		bl	FS_OS_Unlock
 986              	.LVL102:
 249:rtos/uC-FS/Source/fs_dev.c ****         return;
 987              		.loc 1 249 8 view .LVU320
 249:rtos/uC-FS/Source/fs_dev.c ****         return;
 988              		.loc 1 249 15 is_stmt 0 view .LVU321
 989 008c 40F29113 		movw	r3, #401
 990 0090 2B80     		strh	r3, [r5]	@ movhi
 250:rtos/uC-FS/Source/fs_dev.c ****     }
 991              		.loc 1 250 9 is_stmt 1 view .LVU322
 992 0092 DAE7     		b	.L61
 993              	.LVL103:
 994              	.L69:
 255:rtos/uC-FS/Source/fs_dev.c ****     if (p_dev_drv_dup != (FS_DEV_API *)0) {
ARM GAS  /tmp/cccHmdnc.s 			page 81


 995              		.loc 1 255 5 view .LVU323
 255:rtos/uC-FS/Source/fs_dev.c ****     if (p_dev_drv_dup != (FS_DEV_API *)0) {
 996              		.loc 1 255 21 is_stmt 0 view .LVU324
 997 0094 3846     		mov	r0, r7
 998              	.LVL104:
 255:rtos/uC-FS/Source/fs_dev.c ****     if (p_dev_drv_dup != (FS_DEV_API *)0) {
 999              		.loc 1 255 21 view .LVU325
 1000 0096 FFF7FEFF 		bl	FS_DevDrvFind
 1001              	.LVL105:
 256:rtos/uC-FS/Source/fs_dev.c ****         FS_OS_Unlock();
 1002              		.loc 1 256 5 is_stmt 1 view .LVU326
 256:rtos/uC-FS/Source/fs_dev.c ****         FS_OS_Unlock();
 1003              		.loc 1 256 8 is_stmt 0 view .LVU327
 1004 009a 58B9     		cbnz	r0, .L80
 1005              	.L70:
 1006              	.LVL106:
 263:rtos/uC-FS/Source/fs_dev.c ****         if (FS_DevDrvTbl[ix] == DEF_NULL) {
 1007              		.loc 1 263 19 is_stmt 1 discriminator 1 view .LVU328
 263:rtos/uC-FS/Source/fs_dev.c ****         if (FS_DevDrvTbl[ix] == DEF_NULL) {
 1008              		.loc 1 263 22 is_stmt 0 discriminator 1 view .LVU329
 1009 009c 154B     		ldr	r3, .L83
 1010 009e 1B88     		ldrh	r3, [r3]
 263:rtos/uC-FS/Source/fs_dev.c ****         if (FS_DevDrvTbl[ix] == DEF_NULL) {
 1011              		.loc 1 263 5 discriminator 1 view .LVU330
 1012 00a0 B342     		cmp	r3, r6
 1013 00a2 0DD9     		bls	.L71
 264:rtos/uC-FS/Source/fs_dev.c ****             break;
 1014              		.loc 1 264 9 is_stmt 1 view .LVU331
 264:rtos/uC-FS/Source/fs_dev.c ****             break;
 1015              		.loc 1 264 25 is_stmt 0 view .LVU332
 1016 00a4 144A     		ldr	r2, .L83+4
 1017 00a6 1268     		ldr	r2, [r2]
 1018 00a8 52F82620 		ldr	r2, [r2, r6, lsl #2]
 264:rtos/uC-FS/Source/fs_dev.c ****             break;
 1019              		.loc 1 264 12 view .LVU333
 1020 00ac 42B1     		cbz	r2, .L71
 263:rtos/uC-FS/Source/fs_dev.c ****         if (FS_DevDrvTbl[ix] == DEF_NULL) {
 1021              		.loc 1 263 41 is_stmt 1 discriminator 2 view .LVU334
 263:rtos/uC-FS/Source/fs_dev.c ****         if (FS_DevDrvTbl[ix] == DEF_NULL) {
 1022              		.loc 1 263 43 is_stmt 0 discriminator 2 view .LVU335
 1023 00ae 0136     		adds	r6, r6, #1
 1024              	.LVL107:
 263:rtos/uC-FS/Source/fs_dev.c ****         if (FS_DevDrvTbl[ix] == DEF_NULL) {
 1025              		.loc 1 263 43 discriminator 2 view .LVU336
 1026 00b0 B6B2     		uxth	r6, r6
 1027              	.LVL108:
 263:rtos/uC-FS/Source/fs_dev.c ****         if (FS_DevDrvTbl[ix] == DEF_NULL) {
 1028              		.loc 1 263 43 discriminator 2 view .LVU337
 1029 00b2 F3E7     		b	.L70
 1030              	.LVL109:
 1031              	.L80:
 257:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_DEV_DRV_ALREADY_ADDED;
 1032              		.loc 1 257 9 is_stmt 1 view .LVU338
 1033 00b4 FFF7FEFF 		bl	FS_OS_Unlock
 1034              	.LVL110:
 258:rtos/uC-FS/Source/fs_dev.c ****         return;
 1035              		.loc 1 258 8 view .LVU339
ARM GAS  /tmp/cccHmdnc.s 			page 82


 258:rtos/uC-FS/Source/fs_dev.c ****         return;
 1036              		.loc 1 258 15 is_stmt 0 view .LVU340
 1037 00b8 4FF4C873 		mov	r3, #400
 1038 00bc 2B80     		strh	r3, [r5]	@ movhi
 259:rtos/uC-FS/Source/fs_dev.c ****     }
 1039              		.loc 1 259 9 is_stmt 1 view .LVU341
 1040 00be C4E7     		b	.L61
 1041              	.LVL111:
 1042              	.L71:
 268:rtos/uC-FS/Source/fs_dev.c ****         FS_OS_Unlock();
 1043              		.loc 1 268 5 view .LVU342
 268:rtos/uC-FS/Source/fs_dev.c ****         FS_OS_Unlock();
 1044              		.loc 1 268 8 is_stmt 0 view .LVU343
 1045 00c0 B342     		cmp	r3, r6
 1046 00c2 0DD9     		bls	.L81
 277:rtos/uC-FS/Source/fs_dev.c ****     if (*p_err != FS_ERR_NONE) {
 1047              		.loc 1 277 5 is_stmt 1 view .LVU344
 277:rtos/uC-FS/Source/fs_dev.c ****     if (*p_err != FS_ERR_NONE) {
 1048              		.loc 1 277 14 is_stmt 0 view .LVU345
 1049 00c4 6368     		ldr	r3, [r4, #4]
 277:rtos/uC-FS/Source/fs_dev.c ****     if (*p_err != FS_ERR_NONE) {
 1050              		.loc 1 277 5 view .LVU346
 1051 00c6 2846     		mov	r0, r5
 1052              	.LVL112:
 277:rtos/uC-FS/Source/fs_dev.c ****     if (*p_err != FS_ERR_NONE) {
 1053              		.loc 1 277 5 view .LVU347
 1054 00c8 9847     		blx	r3
 1055              	.LVL113:
 278:rtos/uC-FS/Source/fs_dev.c ****         FS_OS_Unlock();
 1056              		.loc 1 278 5 is_stmt 1 view .LVU348
 278:rtos/uC-FS/Source/fs_dev.c ****         FS_OS_Unlock();
 1057              		.loc 1 278 9 is_stmt 0 view .LVU349
 1058 00ca 2B88     		ldrh	r3, [r5]
 278:rtos/uC-FS/Source/fs_dev.c ****         FS_OS_Unlock();
 1059              		.loc 1 278 8 view .LVU350
 1060 00cc 73B9     		cbnz	r3, .L82
 282:rtos/uC-FS/Source/fs_dev.c **** 
 1061              		.loc 1 282 5 is_stmt 1 view .LVU351
 282:rtos/uC-FS/Source/fs_dev.c **** 
 1062              		.loc 1 282 17 is_stmt 0 view .LVU352
 1063 00ce 0A4B     		ldr	r3, .L83+4
 1064 00d0 1B68     		ldr	r3, [r3]
 282:rtos/uC-FS/Source/fs_dev.c **** 
 1065              		.loc 1 282 22 view .LVU353
 1066 00d2 43F82640 		str	r4, [r3, r6, lsl #2]
 287:rtos/uC-FS/Source/fs_dev.c **** 
 1067              		.loc 1 287 5 is_stmt 1 view .LVU354
 1068 00d6 FFF7FEFF 		bl	FS_OS_Unlock
 1069              	.LVL114:
 289:rtos/uC-FS/Source/fs_dev.c **** }
 1070              		.loc 1 289 4 view .LVU355
 289:rtos/uC-FS/Source/fs_dev.c **** }
 1071              		.loc 1 289 11 is_stmt 0 view .LVU356
 1072 00da 0023     		movs	r3, #0
 1073 00dc 2B80     		strh	r3, [r5]	@ movhi
 1074 00de B4E7     		b	.L61
 1075              	.LVL115:
ARM GAS  /tmp/cccHmdnc.s 			page 83


 1076              	.L81:
 269:rtos/uC-FS/Source/fs_dev.c ****         FS_TRACE_INFO(("FS_DevDrvAdd(): Could not alloc drv from pool. Opened driver limit reached.
 1077              		.loc 1 269 9 is_stmt 1 view .LVU357
 1078 00e0 FFF7FEFF 		bl	FS_OS_Unlock
 1079              	.LVL116:
 270:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_DEV_DRV_NONE_AVAIL;
 1080              		.loc 1 270 107 view .LVU358
 271:rtos/uC-FS/Source/fs_dev.c ****         return;
 1081              		.loc 1 271 8 view .LVU359
 271:rtos/uC-FS/Source/fs_dev.c ****         return;
 1082              		.loc 1 271 15 is_stmt 0 view .LVU360
 1083 00e4 4FF4C973 		mov	r3, #402
 1084 00e8 2B80     		strh	r3, [r5]	@ movhi
 272:rtos/uC-FS/Source/fs_dev.c ****     }
 1085              		.loc 1 272 9 is_stmt 1 view .LVU361
 1086 00ea AEE7     		b	.L61
 1087              	.L82:
 279:rtos/uC-FS/Source/fs_dev.c ****         return;
 1088              		.loc 1 279 9 view .LVU362
 1089 00ec FFF7FEFF 		bl	FS_OS_Unlock
 1090              	.LVL117:
 280:rtos/uC-FS/Source/fs_dev.c ****     }
 1091              		.loc 1 280 9 view .LVU363
 1092 00f0 ABE7     		b	.L61
 1093              	.L84:
 1094 00f2 00BF     		.align	2
 1095              	.L83:
 1096 00f4 00000000 		.word	.LANCHOR1
 1097 00f8 00000000 		.word	.LANCHOR0
 1098              		.cfi_endproc
 1099              	.LFE0:
 1101              		.section	.text.FSDev_GetDevCnt,"ax",%progbits
 1102              		.align	1
 1103              		.global	FSDev_GetDevCnt
 1104              		.syntax unified
 1105              		.thumb
 1106              		.thumb_func
 1107              		.fpu fpv4-sp-d16
 1109              	FSDev_GetDevCnt:
 1110              	.LFB13:
1818:rtos/uC-FS/Source/fs_dev.c ****     FS_QTY  dev_cnt;
 1111              		.loc 1 1818 1 view -0
 1112              		.cfi_startproc
 1113              		@ args = 0, pretend = 0, frame = 8
 1114              		@ frame_needed = 0, uses_anonymous_args = 0
 1115 0000 10B5     		push	{r4, lr}
 1116              	.LCFI13:
 1117              		.cfi_def_cfa_offset 8
 1118              		.cfi_offset 4, -8
 1119              		.cfi_offset 14, -4
 1120 0002 82B0     		sub	sp, sp, #8
 1121              	.LCFI14:
 1122              		.cfi_def_cfa_offset 16
1819:rtos/uC-FS/Source/fs_dev.c ****     FS_ERR  err;
 1123              		.loc 1 1819 5 view .LVU365
1820:rtos/uC-FS/Source/fs_dev.c **** 
 1124              		.loc 1 1820 5 view .LVU366
ARM GAS  /tmp/cccHmdnc.s 			page 84


1824:rtos/uC-FS/Source/fs_dev.c ****     if (err != FS_ERR_NONE) {
 1125              		.loc 1 1824 5 view .LVU367
 1126 0004 0DF10600 		add	r0, sp, #6
 1127 0008 FFF7FEFF 		bl	FS_OS_Lock
 1128              	.LVL118:
1825:rtos/uC-FS/Source/fs_dev.c ****         return (0u);
 1129              		.loc 1 1825 5 view .LVU368
1825:rtos/uC-FS/Source/fs_dev.c ****         return (0u);
 1130              		.loc 1 1825 13 is_stmt 0 view .LVU369
 1131 000c BDF80630 		ldrh	r3, [sp, #6]
1825:rtos/uC-FS/Source/fs_dev.c ****         return (0u);
 1132              		.loc 1 1825 8 view .LVU370
 1133 0010 1BB1     		cbz	r3, .L89
1826:rtos/uC-FS/Source/fs_dev.c ****     }
 1134              		.loc 1 1826 16 view .LVU371
 1135 0012 0024     		movs	r4, #0
 1136              	.L86:
1840:rtos/uC-FS/Source/fs_dev.c **** 
 1137              		.loc 1 1840 1 view .LVU372
 1138 0014 2046     		mov	r0, r4
 1139 0016 02B0     		add	sp, sp, #8
 1140              	.LCFI15:
 1141              		.cfi_remember_state
 1142              		.cfi_def_cfa_offset 8
 1143              		@ sp needed
 1144 0018 10BD     		pop	{r4, pc}
 1145              	.L89:
 1146              	.LCFI16:
 1147              		.cfi_restore_state
1832:rtos/uC-FS/Source/fs_dev.c **** 
 1148              		.loc 1 1832 5 is_stmt 1 view .LVU373
1832:rtos/uC-FS/Source/fs_dev.c **** 
 1149              		.loc 1 1832 13 is_stmt 0 view .LVU374
 1150 001a 024B     		ldr	r3, .L90
 1151 001c 1C88     		ldrh	r4, [r3]
 1152              	.LVL119:
1837:rtos/uC-FS/Source/fs_dev.c **** 
 1153              		.loc 1 1837 5 is_stmt 1 view .LVU375
 1154 001e FFF7FEFF 		bl	FS_OS_Unlock
 1155              	.LVL120:
1839:rtos/uC-FS/Source/fs_dev.c **** }
 1156              		.loc 1 1839 5 view .LVU376
1839:rtos/uC-FS/Source/fs_dev.c **** }
 1157              		.loc 1 1839 12 is_stmt 0 view .LVU377
 1158 0022 F7E7     		b	.L86
 1159              	.L91:
 1160              		.align	2
 1161              	.L90:
 1162 0024 00000000 		.word	.LANCHOR5
 1163              		.cfi_endproc
 1164              	.LFE13:
 1166              		.section	.text.FSDev_GetDevCntMax,"ax",%progbits
 1167              		.align	1
 1168              		.global	FSDev_GetDevCntMax
 1169              		.syntax unified
 1170              		.thumb
 1171              		.thumb_func
ARM GAS  /tmp/cccHmdnc.s 			page 85


 1172              		.fpu fpv4-sp-d16
 1174              	FSDev_GetDevCntMax:
 1175              	.LFB14:
1858:rtos/uC-FS/Source/fs_dev.c ****     FS_QTY  dev_cnt_max;
 1176              		.loc 1 1858 1 is_stmt 1 view -0
 1177              		.cfi_startproc
 1178              		@ args = 0, pretend = 0, frame = 0
 1179              		@ frame_needed = 0, uses_anonymous_args = 0
 1180              		@ link register save eliminated.
1859:rtos/uC-FS/Source/fs_dev.c **** 
 1181              		.loc 1 1859 5 view .LVU379
1863:rtos/uC-FS/Source/fs_dev.c **** 
 1182              		.loc 1 1863 5 view .LVU380
 1183              	.LVL121:
1865:rtos/uC-FS/Source/fs_dev.c **** }
 1184              		.loc 1 1865 5 view .LVU381
1866:rtos/uC-FS/Source/fs_dev.c **** 
 1185              		.loc 1 1866 1 is_stmt 0 view .LVU382
 1186 0000 014B     		ldr	r3, .L93
 1187 0002 1888     		ldrh	r0, [r3]
 1188 0004 7047     		bx	lr
 1189              	.L94:
 1190 0006 00BF     		.align	2
 1191              	.L93:
 1192 0008 00000000 		.word	.LANCHOR3
 1193              		.cfi_endproc
 1194              	.LFE14:
 1196              		.section	.text.FSDev_GetDevName,"ax",%progbits
 1197              		.align	1
 1198              		.global	FSDev_GetDevName
 1199              		.syntax unified
 1200              		.thumb
 1201              		.thumb_func
 1202              		.fpu fpv4-sp-d16
 1204              	FSDev_GetDevName:
 1205              	.LVL122:
 1206              	.LFB15:
1889:rtos/uC-FS/Source/fs_dev.c ****     FS_ERR    err;
 1207              		.loc 1 1889 1 is_stmt 1 view -0
 1208              		.cfi_startproc
 1209              		@ args = 0, pretend = 0, frame = 8
 1210              		@ frame_needed = 0, uses_anonymous_args = 0
1890:rtos/uC-FS/Source/fs_dev.c ****     FS_QTY    dev_ix;
 1211              		.loc 1 1890 5 view .LVU384
1891:rtos/uC-FS/Source/fs_dev.c ****     FS_QTY    dev_cnt_cur;
 1212              		.loc 1 1891 5 view .LVU385
1892:rtos/uC-FS/Source/fs_dev.c **** 
 1213              		.loc 1 1892 5 view .LVU386
1896:rtos/uC-FS/Source/fs_dev.c ****         return;
 1214              		.loc 1 1896 5 view .LVU387
1896:rtos/uC-FS/Source/fs_dev.c ****         return;
 1215              		.loc 1 1896 8 is_stmt 0 view .LVU388
 1216 0000 41B3     		cbz	r1, .L104
1889:rtos/uC-FS/Source/fs_dev.c ****     FS_ERR    err;
 1217              		.loc 1 1889 1 view .LVU389
 1218 0002 30B5     		push	{r4, r5, lr}
 1219              	.LCFI17:
ARM GAS  /tmp/cccHmdnc.s 			page 86


 1220              		.cfi_def_cfa_offset 12
 1221              		.cfi_offset 4, -12
 1222              		.cfi_offset 5, -8
 1223              		.cfi_offset 14, -4
 1224 0004 83B0     		sub	sp, sp, #12
 1225              	.LCFI18:
 1226              		.cfi_def_cfa_offset 24
 1227 0006 0446     		mov	r4, r0
 1228 0008 0D46     		mov	r5, r1
1901:rtos/uC-FS/Source/fs_dev.c **** 
 1229              		.loc 1 1901 5 is_stmt 1 view .LVU390
1901:rtos/uC-FS/Source/fs_dev.c **** 
 1230              		.loc 1 1901 17 is_stmt 0 view .LVU391
 1231 000a 0023     		movs	r3, #0
 1232 000c 0B70     		strb	r3, [r1]
1905:rtos/uC-FS/Source/fs_dev.c ****     if (err != FS_ERR_NONE) {
 1233              		.loc 1 1905 5 is_stmt 1 view .LVU392
 1234 000e 0DF10600 		add	r0, sp, #6
 1235              	.LVL123:
1905:rtos/uC-FS/Source/fs_dev.c ****     if (err != FS_ERR_NONE) {
 1236              		.loc 1 1905 5 is_stmt 0 view .LVU393
 1237 0012 FFF7FEFF 		bl	FS_OS_Lock
 1238              	.LVL124:
1906:rtos/uC-FS/Source/fs_dev.c ****         return;
 1239              		.loc 1 1906 5 is_stmt 1 view .LVU394
1906:rtos/uC-FS/Source/fs_dev.c ****         return;
 1240              		.loc 1 1906 13 is_stmt 0 view .LVU395
 1241 0016 BDF80630 		ldrh	r3, [sp, #6]
1906:rtos/uC-FS/Source/fs_dev.c ****         return;
 1242              		.loc 1 1906 8 view .LVU396
 1243 001a 43B9     		cbnz	r3, .L95
1912:rtos/uC-FS/Source/fs_dev.c ****     for (dev_ix = 0u; dev_ix < FSDev_DevCntMax; dev_ix++) {
 1244              		.loc 1 1912 17 view .LVU397
 1245 001c 1A46     		mov	r2, r3
 1246 001e 0AE0     		b	.L97
 1247              	.LVL125:
 1248              	.L107:
1916:rtos/uC-FS/Source/fs_dev.c ****                            FSDev_Tbl[dev_ix]->Name,
 1249              		.loc 1 1916 17 is_stmt 1 view .LVU398
 1250 0020 0F22     		movs	r2, #15
 1251              	.LVL126:
1916:rtos/uC-FS/Source/fs_dev.c ****                            FSDev_Tbl[dev_ix]->Name,
 1252              		.loc 1 1916 17 is_stmt 0 view .LVU399
 1253 0022 1031     		adds	r1, r1, #16
 1254 0024 2846     		mov	r0, r5
 1255 0026 FFF7FEFF 		bl	Str_Copy_N
 1256              	.LVL127:
1919:rtos/uC-FS/Source/fs_dev.c ****             } else {
 1257              		.loc 1 1919 17 is_stmt 1 view .LVU400
 1258              	.L100:
1928:rtos/uC-FS/Source/fs_dev.c **** }
 1259              		.loc 1 1928 5 view .LVU401
 1260 002a FFF7FEFF 		bl	FS_OS_Unlock
 1261              	.LVL128:
 1262              	.L95:
1929:rtos/uC-FS/Source/fs_dev.c **** 
 1263              		.loc 1 1929 1 is_stmt 0 view .LVU402
ARM GAS  /tmp/cccHmdnc.s 			page 87


 1264 002e 03B0     		add	sp, sp, #12
 1265              	.LCFI19:
 1266              		.cfi_remember_state
 1267              		.cfi_def_cfa_offset 12
 1268              		@ sp needed
 1269 0030 30BD     		pop	{r4, r5, pc}
 1270              	.LVL129:
 1271              	.L98:
 1272              	.LCFI20:
 1273              		.cfi_restore_state
1913:rtos/uC-FS/Source/fs_dev.c ****         if (FSDev_Tbl[dev_ix] != DEF_NULL) {
 1274              		.loc 1 1913 49 is_stmt 1 discriminator 2 view .LVU403
1913:rtos/uC-FS/Source/fs_dev.c ****         if (FSDev_Tbl[dev_ix] != DEF_NULL) {
 1275              		.loc 1 1913 55 is_stmt 0 discriminator 2 view .LVU404
 1276 0032 0133     		adds	r3, r3, #1
 1277              	.LVL130:
1913:rtos/uC-FS/Source/fs_dev.c ****         if (FSDev_Tbl[dev_ix] != DEF_NULL) {
 1278              		.loc 1 1913 55 discriminator 2 view .LVU405
 1279 0034 9BB2     		uxth	r3, r3
 1280              	.LVL131:
 1281              	.L97:
1913:rtos/uC-FS/Source/fs_dev.c ****         if (FSDev_Tbl[dev_ix] != DEF_NULL) {
 1282              		.loc 1 1913 23 is_stmt 1 discriminator 1 view .LVU406
1913:rtos/uC-FS/Source/fs_dev.c ****         if (FSDev_Tbl[dev_ix] != DEF_NULL) {
 1283              		.loc 1 1913 30 is_stmt 0 discriminator 1 view .LVU407
 1284 0036 0849     		ldr	r1, .L108
 1285 0038 0988     		ldrh	r1, [r1]
1913:rtos/uC-FS/Source/fs_dev.c ****         if (FSDev_Tbl[dev_ix] != DEF_NULL) {
 1286              		.loc 1 1913 5 discriminator 1 view .LVU408
 1287 003a 9942     		cmp	r1, r3
 1288 003c F5D9     		bls	.L100
1914:rtos/uC-FS/Source/fs_dev.c ****             if (dev_cnt_cur == dev_nbr) {
 1289              		.loc 1 1914 9 is_stmt 1 view .LVU409
1914:rtos/uC-FS/Source/fs_dev.c ****             if (dev_cnt_cur == dev_nbr) {
 1290              		.loc 1 1914 22 is_stmt 0 view .LVU410
 1291 003e 0749     		ldr	r1, .L108+4
 1292 0040 0968     		ldr	r1, [r1]
 1293 0042 51F82310 		ldr	r1, [r1, r3, lsl #2]
1914:rtos/uC-FS/Source/fs_dev.c ****             if (dev_cnt_cur == dev_nbr) {
 1294              		.loc 1 1914 12 view .LVU411
 1295 0046 0029     		cmp	r1, #0
 1296 0048 F3D0     		beq	.L98
1915:rtos/uC-FS/Source/fs_dev.c ****                 Str_Copy_N(name_dev,
 1297              		.loc 1 1915 13 is_stmt 1 view .LVU412
1915:rtos/uC-FS/Source/fs_dev.c ****                 Str_Copy_N(name_dev,
 1298              		.loc 1 1915 16 is_stmt 0 view .LVU413
 1299 004a A242     		cmp	r2, r4
 1300 004c E8D0     		beq	.L107
1921:rtos/uC-FS/Source/fs_dev.c ****             }
 1301              		.loc 1 1921 17 is_stmt 1 view .LVU414
1921:rtos/uC-FS/Source/fs_dev.c ****             }
 1302              		.loc 1 1921 28 is_stmt 0 view .LVU415
 1303 004e 0132     		adds	r2, r2, #1
 1304              	.LVL132:
1921:rtos/uC-FS/Source/fs_dev.c ****             }
 1305              		.loc 1 1921 28 view .LVU416
 1306 0050 92B2     		uxth	r2, r2
ARM GAS  /tmp/cccHmdnc.s 			page 88


 1307              	.LVL133:
1921:rtos/uC-FS/Source/fs_dev.c ****             }
 1308              		.loc 1 1921 28 view .LVU417
 1309 0052 EEE7     		b	.L98
 1310              	.LVL134:
 1311              	.L104:
 1312              	.LCFI21:
 1313              		.cfi_def_cfa_offset 0
 1314              		.cfi_restore 4
 1315              		.cfi_restore 5
 1316              		.cfi_restore 14
1921:rtos/uC-FS/Source/fs_dev.c ****             }
 1317              		.loc 1 1921 28 view .LVU418
 1318 0054 7047     		bx	lr
 1319              	.L109:
 1320 0056 00BF     		.align	2
 1321              	.L108:
 1322 0058 00000000 		.word	.LANCHOR3
 1323 005c 00000000 		.word	.LANCHOR2
 1324              		.cfi_endproc
 1325              	.LFE15:
 1327              		.section	.text.FSDev_ModuleInit,"ax",%progbits
 1328              		.align	1
 1329              		.global	FSDev_ModuleInit
 1330              		.syntax unified
 1331              		.thumb
 1332              		.thumb_func
 1333              		.fpu fpv4-sp-d16
 1335              	FSDev_ModuleInit:
 1336              	.LVL135:
 1337              	.LFB16:
1971:rtos/uC-FS/Source/fs_dev.c ****     CPU_SIZE_T  octets_reqd;
 1338              		.loc 1 1971 1 is_stmt 1 view -0
 1339              		.cfi_startproc
 1340              		@ args = 0, pretend = 0, frame = 8
 1341              		@ frame_needed = 0, uses_anonymous_args = 0
1971:rtos/uC-FS/Source/fs_dev.c ****     CPU_SIZE_T  octets_reqd;
 1342              		.loc 1 1971 1 is_stmt 0 view .LVU420
 1343 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 1344              	.LCFI22:
 1345              		.cfi_def_cfa_offset 20
 1346              		.cfi_offset 4, -20
 1347              		.cfi_offset 5, -16
 1348              		.cfi_offset 6, -12
 1349              		.cfi_offset 7, -8
 1350              		.cfi_offset 14, -4
 1351 0002 87B0     		sub	sp, sp, #28
 1352              	.LCFI23:
 1353              		.cfi_def_cfa_offset 48
 1354 0004 0546     		mov	r5, r0
 1355 0006 0E46     		mov	r6, r1
 1356 0008 1446     		mov	r4, r2
1972:rtos/uC-FS/Source/fs_dev.c ****     LIB_ERR     pool_err;
 1357              		.loc 1 1972 5 is_stmt 1 view .LVU421
1973:rtos/uC-FS/Source/fs_dev.c **** 
 1358              		.loc 1 1973 5 view .LVU422
1983:rtos/uC-FS/Source/fs_dev.c ****     FSDev_Cnt       = 0u;
ARM GAS  /tmp/cccHmdnc.s 			page 89


 1359              		.loc 1 1983 5 view .LVU423
1983:rtos/uC-FS/Source/fs_dev.c ****     FSDev_Cnt       = 0u;
 1360              		.loc 1 1983 21 is_stmt 0 view .LVU424
 1361 000a 0023     		movs	r3, #0
 1362 000c 2D4A     		ldr	r2, .L118
 1363              	.LVL136:
1983:rtos/uC-FS/Source/fs_dev.c ****     FSDev_Cnt       = 0u;
 1364              		.loc 1 1983 21 view .LVU425
 1365 000e 1380     		strh	r3, [r2]	@ movhi
1984:rtos/uC-FS/Source/fs_dev.c **** 
 1366              		.loc 1 1984 5 is_stmt 1 view .LVU426
1984:rtos/uC-FS/Source/fs_dev.c **** 
 1367              		.loc 1 1984 21 is_stmt 0 view .LVU427
 1368 0010 2D4A     		ldr	r2, .L118+4
 1369 0012 1380     		strh	r3, [r2]	@ movhi
1987:rtos/uC-FS/Source/fs_dev.c ****     if (*p_err != FS_ERR_NONE) {
 1370              		.loc 1 1987 5 is_stmt 1 view .LVU428
 1371 0014 2046     		mov	r0, r4
 1372              	.LVL137:
1987:rtos/uC-FS/Source/fs_dev.c ****     if (*p_err != FS_ERR_NONE) {
 1373              		.loc 1 1987 5 is_stmt 0 view .LVU429
 1374 0016 FFF7FEFF 		bl	FS_OS_Init
 1375              	.LVL138:
1988:rtos/uC-FS/Source/fs_dev.c ****         return;
 1376              		.loc 1 1988 5 is_stmt 1 view .LVU430
1988:rtos/uC-FS/Source/fs_dev.c ****         return;
 1377              		.loc 1 1988 9 is_stmt 0 view .LVU431
 1378 001a 2388     		ldrh	r3, [r4]
1988:rtos/uC-FS/Source/fs_dev.c ****         return;
 1379              		.loc 1 1988 8 view .LVU432
 1380 001c 0BB1     		cbz	r3, .L117
 1381              	.L110:
2046:rtos/uC-FS/Source/fs_dev.c **** 
 1382              		.loc 1 2046 1 view .LVU433
 1383 001e 07B0     		add	sp, sp, #28
 1384              	.LCFI24:
 1385              		.cfi_remember_state
 1386              		.cfi_def_cfa_offset 20
 1387              		@ sp needed
 1388 0020 F0BD     		pop	{r4, r5, r6, r7, pc}
 1389              	.LVL139:
 1390              	.L117:
 1391              	.LCFI25:
 1392              		.cfi_restore_state
1995:rtos/uC-FS/Source/fs_dev.c ****     if (*p_err != FS_ERR_NONE) {
 1393              		.loc 1 1995 5 is_stmt 1 view .LVU434
 1394 0022 2146     		mov	r1, r4
 1395 0024 2846     		mov	r0, r5
 1396 0026 FFF7FEFF 		bl	FS_OS_DevInit
 1397              	.LVL140:
1996:rtos/uC-FS/Source/fs_dev.c ****         return;
 1398              		.loc 1 1996 5 view .LVU435
1996:rtos/uC-FS/Source/fs_dev.c ****         return;
 1399              		.loc 1 1996 9 is_stmt 0 view .LVU436
 1400 002a 2388     		ldrh	r3, [r4]
1996:rtos/uC-FS/Source/fs_dev.c ****         return;
 1401              		.loc 1 1996 8 view .LVU437
ARM GAS  /tmp/cccHmdnc.s 			page 90


 1402 002c 002B     		cmp	r3, #0
 1403 002e F6D1     		bne	.L110
2003:rtos/uC-FS/Source/fs_dev.c ****                     DEF_NULL,
 1404              		.loc 1 2003 5 is_stmt 1 view .LVU438
 1405 0030 0DF11203 		add	r3, sp, #18
 1406 0034 0393     		str	r3, [sp, #12]
 1407 0036 05AB     		add	r3, sp, #20
 1408 0038 0293     		str	r3, [sp, #8]
 1409 003a 0423     		movs	r3, #4
 1410 003c 0193     		str	r3, [sp, #4]
 1411 003e 3823     		movs	r3, #56
 1412 0040 0093     		str	r3, [sp]
 1413 0042 2B46     		mov	r3, r5
 1414 0044 0022     		movs	r2, #0
 1415 0046 1146     		mov	r1, r2
 1416 0048 2048     		ldr	r0, .L118+8
 1417 004a FFF7FEFF 		bl	Mem_PoolCreate
 1418              	.LVL141:
2012:rtos/uC-FS/Source/fs_dev.c ****        *p_err  = FS_ERR_MEM_ALLOC;
 1419              		.loc 1 2012 5 view .LVU439
2012:rtos/uC-FS/Source/fs_dev.c ****        *p_err  = FS_ERR_MEM_ALLOC;
 1420              		.loc 1 2012 18 is_stmt 0 view .LVU440
 1421 004e BDF81220 		ldrh	r2, [sp, #18]
2012:rtos/uC-FS/Source/fs_dev.c ****        *p_err  = FS_ERR_MEM_ALLOC;
 1422              		.loc 1 2012 8 view .LVU441
 1423 0052 42F21073 		movw	r3, #10000
 1424 0056 9A42     		cmp	r2, r3
 1425 0058 02D0     		beq	.L112
2013:rtos/uC-FS/Source/fs_dev.c ****         FS_TRACE_INFO(("FSDev_ModuleInit(): Could not alloc mem for devs: %d octets required.\r\n",
 1426              		.loc 1 2013 8 is_stmt 1 view .LVU442
2013:rtos/uC-FS/Source/fs_dev.c ****         FS_TRACE_INFO(("FSDev_ModuleInit(): Could not alloc mem for devs: %d octets required.\r\n",
 1427              		.loc 1 2013 16 is_stmt 0 view .LVU443
 1428 005a 1123     		movs	r3, #17
 1429 005c 2380     		strh	r3, [r4]	@ movhi
2014:rtos/uC-FS/Source/fs_dev.c ****         return;
 1430              		.loc 1 2014 114 is_stmt 1 view .LVU444
2015:rtos/uC-FS/Source/fs_dev.c ****     }
 1431              		.loc 1 2015 9 view .LVU445
 1432 005e DEE7     		b	.L110
 1433              	.L112:
2018:rtos/uC-FS/Source/fs_dev.c ****                                          sizeof(CPU_ALIGN),
 1434              		.loc 1 2018 5 view .LVU446
2018:rtos/uC-FS/Source/fs_dev.c ****                                          sizeof(CPU_ALIGN),
 1435              		.loc 1 2018 28 is_stmt 0 view .LVU447
 1436 0060 AF00     		lsls	r7, r5, #2
 1437 0062 0DF11203 		add	r3, sp, #18
 1438 0066 05AA     		add	r2, sp, #20
 1439 0068 0421     		movs	r1, #4
 1440 006a 3846     		mov	r0, r7
 1441 006c FFF7FEFF 		bl	Mem_HeapAlloc
 1442              	.LVL142:
2018:rtos/uC-FS/Source/fs_dev.c ****                                          sizeof(CPU_ALIGN),
 1443              		.loc 1 2018 15 view .LVU448
 1444 0070 174B     		ldr	r3, .L118+12
 1445 0072 1860     		str	r0, [r3]
2022:rtos/uC-FS/Source/fs_dev.c ****        *p_err  = FS_ERR_MEM_ALLOC;
 1446              		.loc 1 2022 5 is_stmt 1 view .LVU449
ARM GAS  /tmp/cccHmdnc.s 			page 91


2022:rtos/uC-FS/Source/fs_dev.c ****        *p_err  = FS_ERR_MEM_ALLOC;
 1447              		.loc 1 2022 18 is_stmt 0 view .LVU450
 1448 0074 BDF81220 		ldrh	r2, [sp, #18]
2022:rtos/uC-FS/Source/fs_dev.c ****        *p_err  = FS_ERR_MEM_ALLOC;
 1449              		.loc 1 2022 8 view .LVU451
 1450 0078 42F21073 		movw	r3, #10000
 1451 007c 9A42     		cmp	r2, r3
 1452 007e 02D0     		beq	.L113
2023:rtos/uC-FS/Source/fs_dev.c ****         FS_TRACE_INFO(("FSDev_ModuleInit(): Could not alloc mem for devs: %d octets required.\r\n",
 1453              		.loc 1 2023 8 is_stmt 1 view .LVU452
2023:rtos/uC-FS/Source/fs_dev.c ****         FS_TRACE_INFO(("FSDev_ModuleInit(): Could not alloc mem for devs: %d octets required.\r\n",
 1454              		.loc 1 2023 16 is_stmt 0 view .LVU453
 1455 0080 1123     		movs	r3, #17
 1456 0082 2380     		strh	r3, [r4]	@ movhi
2024:rtos/uC-FS/Source/fs_dev.c ****         return;
 1457              		.loc 1 2024 114 is_stmt 1 view .LVU454
2025:rtos/uC-FS/Source/fs_dev.c ****     }
 1458              		.loc 1 2025 9 view .LVU455
 1459 0084 CBE7     		b	.L110
 1460              	.L113:
2028:rtos/uC-FS/Source/fs_dev.c **** 
 1461              		.loc 1 2028 5 view .LVU456
 1462 0086 3946     		mov	r1, r7
 1463 0088 FFF7FEFF 		bl	Mem_Clr
 1464              	.LVL143:
2030:rtos/uC-FS/Source/fs_dev.c **** 
 1465              		.loc 1 2030 5 view .LVU457
2030:rtos/uC-FS/Source/fs_dev.c **** 
 1466              		.loc 1 2030 21 is_stmt 0 view .LVU458
 1467 008c 0D4B     		ldr	r3, .L118
 1468 008e 1D80     		strh	r5, [r3]	@ movhi
2033:rtos/uC-FS/Source/fs_dev.c ****                                                  sizeof(CPU_ALIGN),
 1469              		.loc 1 2033 5 is_stmt 1 view .LVU459
2033:rtos/uC-FS/Source/fs_dev.c ****                                                  sizeof(CPU_ALIGN),
 1470              		.loc 1 2033 36 is_stmt 0 view .LVU460
 1471 0090 B500     		lsls	r5, r6, #2
 1472 0092 0DF11203 		add	r3, sp, #18
 1473 0096 05AA     		add	r2, sp, #20
 1474 0098 0421     		movs	r1, #4
 1475 009a 2846     		mov	r0, r5
 1476 009c FFF7FEFF 		bl	Mem_HeapAlloc
 1477              	.LVL144:
2033:rtos/uC-FS/Source/fs_dev.c ****                                                  sizeof(CPU_ALIGN),
 1478              		.loc 1 2033 18 view .LVU461
 1479 00a0 0C4B     		ldr	r3, .L118+16
 1480 00a2 1860     		str	r0, [r3]
2037:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_MEM_ALLOC;
 1481              		.loc 1 2037 5 is_stmt 1 view .LVU462
2037:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_MEM_ALLOC;
 1482              		.loc 1 2037 18 is_stmt 0 view .LVU463
 1483 00a4 BDF81220 		ldrh	r2, [sp, #18]
2037:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_MEM_ALLOC;
 1484              		.loc 1 2037 8 view .LVU464
 1485 00a8 42F21073 		movw	r3, #10000
 1486 00ac 9A42     		cmp	r2, r3
 1487 00ae 02D0     		beq	.L114
2038:rtos/uC-FS/Source/fs_dev.c ****         FS_TRACE_INFO(("FSDev_ModuleInit(): Could not alloc mem for dev drv tbl: %d octets required
ARM GAS  /tmp/cccHmdnc.s 			page 92


 1488              		.loc 1 2038 8 is_stmt 1 view .LVU465
2038:rtos/uC-FS/Source/fs_dev.c ****         FS_TRACE_INFO(("FSDev_ModuleInit(): Could not alloc mem for dev drv tbl: %d octets required
 1489              		.loc 1 2038 15 is_stmt 0 view .LVU466
 1490 00b0 1123     		movs	r3, #17
 1491 00b2 2380     		strh	r3, [r4]	@ movhi
2039:rtos/uC-FS/Source/fs_dev.c ****         return;
 1492              		.loc 1 2039 121 is_stmt 1 view .LVU467
2040:rtos/uC-FS/Source/fs_dev.c ****     }
 1493              		.loc 1 2040 9 view .LVU468
 1494 00b4 B3E7     		b	.L110
 1495              	.L114:
2043:rtos/uC-FS/Source/fs_dev.c **** 
 1496              		.loc 1 2043 5 view .LVU469
 1497 00b6 2946     		mov	r1, r5
 1498 00b8 FFF7FEFF 		bl	Mem_Clr
 1499              	.LVL145:
2045:rtos/uC-FS/Source/fs_dev.c **** }
 1500              		.loc 1 2045 5 view .LVU470
2045:rtos/uC-FS/Source/fs_dev.c **** }
 1501              		.loc 1 2045 21 is_stmt 0 view .LVU471
 1502 00bc 064B     		ldr	r3, .L118+20
 1503 00be 1E80     		strh	r6, [r3]	@ movhi
 1504 00c0 ADE7     		b	.L110
 1505              	.L119:
 1506 00c2 00BF     		.align	2
 1507              	.L118:
 1508 00c4 00000000 		.word	.LANCHOR3
 1509 00c8 00000000 		.word	.LANCHOR5
 1510 00cc 00000000 		.word	.LANCHOR4
 1511 00d0 00000000 		.word	.LANCHOR2
 1512 00d4 00000000 		.word	.LANCHOR0
 1513 00d8 00000000 		.word	.LANCHOR1
 1514              		.cfi_endproc
 1515              	.LFE16:
 1517              		.section	.text.FSDev_Acquire,"ax",%progbits
 1518              		.align	1
 1519              		.global	FSDev_Acquire
 1520              		.syntax unified
 1521              		.thumb
 1522              		.thumb_func
 1523              		.fpu fpv4-sp-d16
 1525              	FSDev_Acquire:
 1526              	.LVL146:
 1527              	.LFB18:
2156:rtos/uC-FS/Source/fs_dev.c ****     FS_DEV  *p_dev;
 1528              		.loc 1 2156 1 is_stmt 1 view -0
 1529              		.cfi_startproc
 1530              		@ args = 0, pretend = 0, frame = 8
 1531              		@ frame_needed = 0, uses_anonymous_args = 0
2156:rtos/uC-FS/Source/fs_dev.c ****     FS_DEV  *p_dev;
 1532              		.loc 1 2156 1 is_stmt 0 view .LVU473
 1533 0000 10B5     		push	{r4, lr}
 1534              	.LCFI26:
 1535              		.cfi_def_cfa_offset 8
 1536              		.cfi_offset 4, -8
 1537              		.cfi_offset 14, -4
 1538 0002 82B0     		sub	sp, sp, #8
ARM GAS  /tmp/cccHmdnc.s 			page 93


 1539              	.LCFI27:
 1540              		.cfi_def_cfa_offset 16
 1541 0004 0446     		mov	r4, r0
2157:rtos/uC-FS/Source/fs_dev.c ****     FS_ERR   err;
 1542              		.loc 1 2157 5 is_stmt 1 view .LVU474
2158:rtos/uC-FS/Source/fs_dev.c **** 
 1543              		.loc 1 2158 5 view .LVU475
2162:rtos/uC-FS/Source/fs_dev.c ****     if (err != FS_ERR_NONE) {
 1544              		.loc 1 2162 5 view .LVU476
 1545 0006 0DF10600 		add	r0, sp, #6
 1546              	.LVL147:
2162:rtos/uC-FS/Source/fs_dev.c ****     if (err != FS_ERR_NONE) {
 1547              		.loc 1 2162 5 is_stmt 0 view .LVU477
 1548 000a FFF7FEFF 		bl	FS_OS_Lock
 1549              	.LVL148:
2163:rtos/uC-FS/Source/fs_dev.c ****         return ((FS_DEV *)0);
 1550              		.loc 1 2163 5 is_stmt 1 view .LVU478
2163:rtos/uC-FS/Source/fs_dev.c ****         return ((FS_DEV *)0);
 1551              		.loc 1 2163 13 is_stmt 0 view .LVU479
 1552 000e BDF80630 		ldrh	r3, [sp, #6]
2163:rtos/uC-FS/Source/fs_dev.c ****         return ((FS_DEV *)0);
 1553              		.loc 1 2163 8 view .LVU480
 1554 0012 7BB9     		cbnz	r3, .L123
2170:rtos/uC-FS/Source/fs_dev.c **** 
 1555              		.loc 1 2170 5 is_stmt 1 view .LVU481
2170:rtos/uC-FS/Source/fs_dev.c **** 
 1556              		.loc 1 2170 13 is_stmt 0 view .LVU482
 1557 0014 2046     		mov	r0, r4
 1558 0016 FFF7FEFF 		bl	FSDev_ObjFind
 1559              	.LVL149:
2172:rtos/uC-FS/Source/fs_dev.c ****         FS_OS_Unlock();
 1560              		.loc 1 2172 5 is_stmt 1 view .LVU483
2172:rtos/uC-FS/Source/fs_dev.c ****         FS_OS_Unlock();
 1561              		.loc 1 2172 8 is_stmt 0 view .LVU484
 1562 001a 0446     		mov	r4, r0
 1563              	.LVL150:
2172:rtos/uC-FS/Source/fs_dev.c ****         FS_OS_Unlock();
 1564              		.loc 1 2172 8 view .LVU485
 1565 001c 38B1     		cbz	r0, .L125
2177:rtos/uC-FS/Source/fs_dev.c **** 
 1566              		.loc 1 2177 5 is_stmt 1 view .LVU486
2177:rtos/uC-FS/Source/fs_dev.c **** 
 1567              		.loc 1 2177 10 is_stmt 0 view .LVU487
 1568 001e 8368     		ldr	r3, [r0, #8]
2177:rtos/uC-FS/Source/fs_dev.c **** 
 1569              		.loc 1 2177 18 view .LVU488
 1570 0020 0133     		adds	r3, r3, #1
 1571 0022 8360     		str	r3, [r0, #8]
2182:rtos/uC-FS/Source/fs_dev.c **** 
 1572              		.loc 1 2182 5 is_stmt 1 view .LVU489
 1573 0024 FFF7FEFF 		bl	FS_OS_Unlock
 1574              	.LVL151:
2184:rtos/uC-FS/Source/fs_dev.c **** }
 1575              		.loc 1 2184 5 view .LVU490
 1576              	.L120:
2185:rtos/uC-FS/Source/fs_dev.c **** 
 1577              		.loc 1 2185 1 is_stmt 0 view .LVU491
ARM GAS  /tmp/cccHmdnc.s 			page 94


 1578 0028 2046     		mov	r0, r4
 1579 002a 02B0     		add	sp, sp, #8
 1580              	.LCFI28:
 1581              		.cfi_remember_state
 1582              		.cfi_def_cfa_offset 8
 1583              		@ sp needed
 1584 002c 10BD     		pop	{r4, pc}
 1585              	.LVL152:
 1586              	.L125:
 1587              	.LCFI29:
 1588              		.cfi_restore_state
2173:rtos/uC-FS/Source/fs_dev.c ****         return ((FS_DEV *)0);
 1589              		.loc 1 2173 9 is_stmt 1 view .LVU492
 1590 002e FFF7FEFF 		bl	FS_OS_Unlock
 1591              	.LVL153:
2174:rtos/uC-FS/Source/fs_dev.c ****     }
 1592              		.loc 1 2174 9 view .LVU493
2174:rtos/uC-FS/Source/fs_dev.c ****     }
 1593              		.loc 1 2174 16 is_stmt 0 view .LVU494
 1594 0032 F9E7     		b	.L120
 1595              	.LVL154:
 1596              	.L123:
2164:rtos/uC-FS/Source/fs_dev.c ****     }
 1597              		.loc 1 2164 16 view .LVU495
 1598 0034 0024     		movs	r4, #0
 1599              	.LVL155:
2164:rtos/uC-FS/Source/fs_dev.c ****     }
 1600              		.loc 1 2164 16 view .LVU496
 1601 0036 F7E7     		b	.L120
 1602              		.cfi_endproc
 1603              	.LFE18:
 1605              		.section	.text.FSDev_Release,"ax",%progbits
 1606              		.align	1
 1607              		.global	FSDev_Release
 1608              		.syntax unified
 1609              		.thumb
 1610              		.thumb_func
 1611              		.fpu fpv4-sp-d16
 1613              	FSDev_Release:
 1614              	.LVL156:
 1615              	.LFB20:
2226:rtos/uC-FS/Source/fs_dev.c ****     FS_ERR  err;
 1616              		.loc 1 2226 1 is_stmt 1 view -0
 1617              		.cfi_startproc
 1618              		@ args = 0, pretend = 0, frame = 8
 1619              		@ frame_needed = 0, uses_anonymous_args = 0
2226:rtos/uC-FS/Source/fs_dev.c ****     FS_ERR  err;
 1620              		.loc 1 2226 1 is_stmt 0 view .LVU498
 1621 0000 10B5     		push	{r4, lr}
 1622              	.LCFI30:
 1623              		.cfi_def_cfa_offset 8
 1624              		.cfi_offset 4, -8
 1625              		.cfi_offset 14, -4
 1626 0002 82B0     		sub	sp, sp, #8
 1627              	.LCFI31:
 1628              		.cfi_def_cfa_offset 16
 1629 0004 0446     		mov	r4, r0
ARM GAS  /tmp/cccHmdnc.s 			page 95


2227:rtos/uC-FS/Source/fs_dev.c ****     FS_CTR  ref_cnt;
 1630              		.loc 1 2227 5 is_stmt 1 view .LVU499
2228:rtos/uC-FS/Source/fs_dev.c **** 
 1631              		.loc 1 2228 5 view .LVU500
2232:rtos/uC-FS/Source/fs_dev.c ****     if (err != FS_ERR_NONE) {
 1632              		.loc 1 2232 5 view .LVU501
 1633 0006 0DF10600 		add	r0, sp, #6
 1634              	.LVL157:
2232:rtos/uC-FS/Source/fs_dev.c ****     if (err != FS_ERR_NONE) {
 1635              		.loc 1 2232 5 is_stmt 0 view .LVU502
 1636 000a FFF7FEFF 		bl	FS_OS_Lock
 1637              	.LVL158:
2233:rtos/uC-FS/Source/fs_dev.c ****         return;
 1638              		.loc 1 2233 5 is_stmt 1 view .LVU503
2233:rtos/uC-FS/Source/fs_dev.c ****         return;
 1639              		.loc 1 2233 13 is_stmt 0 view .LVU504
 1640 000e BDF80630 		ldrh	r3, [sp, #6]
2233:rtos/uC-FS/Source/fs_dev.c ****         return;
 1641              		.loc 1 2233 8 view .LVU505
 1642 0012 3BB9     		cbnz	r3, .L126
2240:rtos/uC-FS/Source/fs_dev.c ****     if (ref_cnt == 1u) {
 1643              		.loc 1 2240 5 is_stmt 1 view .LVU506
2240:rtos/uC-FS/Source/fs_dev.c ****     if (ref_cnt == 1u) {
 1644              		.loc 1 2240 13 is_stmt 0 view .LVU507
 1645 0014 A368     		ldr	r3, [r4, #8]
 1646              	.LVL159:
2241:rtos/uC-FS/Source/fs_dev.c ****         FSDev_ObjFree(p_dev);
 1647              		.loc 1 2241 5 is_stmt 1 view .LVU508
2241:rtos/uC-FS/Source/fs_dev.c ****         FSDev_ObjFree(p_dev);
 1648              		.loc 1 2241 8 is_stmt 0 view .LVU509
 1649 0016 012B     		cmp	r3, #1
 1650 0018 06D0     		beq	.L132
2243:rtos/uC-FS/Source/fs_dev.c ****         p_dev->RefCnt = ref_cnt - 1u;
 1651              		.loc 1 2243 12 is_stmt 1 view .LVU510
2243:rtos/uC-FS/Source/fs_dev.c ****         p_dev->RefCnt = ref_cnt - 1u;
 1652              		.loc 1 2243 15 is_stmt 0 view .LVU511
 1653 001a 0BB1     		cbz	r3, .L130
2244:rtos/uC-FS/Source/fs_dev.c ****     } else {
 1654              		.loc 1 2244 9 is_stmt 1 view .LVU512
2244:rtos/uC-FS/Source/fs_dev.c ****     } else {
 1655              		.loc 1 2244 33 is_stmt 0 view .LVU513
 1656 001c 013B     		subs	r3, r3, #1
 1657              	.LVL160:
2244:rtos/uC-FS/Source/fs_dev.c ****     } else {
 1658              		.loc 1 2244 23 view .LVU514
 1659 001e A360     		str	r3, [r4, #8]
 1660              	.LVL161:
 1661              	.L130:
2246:rtos/uC-FS/Source/fs_dev.c ****     }
 1662              		.loc 1 2246 74 is_stmt 1 view .LVU515
2252:rtos/uC-FS/Source/fs_dev.c **** }
 1663              		.loc 1 2252 5 view .LVU516
 1664 0020 FFF7FEFF 		bl	FS_OS_Unlock
 1665              	.LVL162:
 1666              	.L126:
2253:rtos/uC-FS/Source/fs_dev.c **** 
 1667              		.loc 1 2253 1 is_stmt 0 view .LVU517
ARM GAS  /tmp/cccHmdnc.s 			page 96


 1668 0024 02B0     		add	sp, sp, #8
 1669              	.LCFI32:
 1670              		.cfi_remember_state
 1671              		.cfi_def_cfa_offset 8
 1672              		@ sp needed
 1673 0026 10BD     		pop	{r4, pc}
 1674              	.LVL163:
 1675              	.L132:
 1676              	.LCFI33:
 1677              		.cfi_restore_state
2242:rtos/uC-FS/Source/fs_dev.c ****     } else if (ref_cnt > 0u) {
 1678              		.loc 1 2242 9 is_stmt 1 view .LVU518
 1679 0028 2046     		mov	r0, r4
 1680 002a FFF7FEFF 		bl	FSDev_ObjFree
 1681              	.LVL164:
2242:rtos/uC-FS/Source/fs_dev.c ****     } else if (ref_cnt > 0u) {
 1682              		.loc 1 2242 9 is_stmt 0 view .LVU519
 1683 002e F7E7     		b	.L130
 1684              		.cfi_endproc
 1685              	.LFE20:
 1687              		.section	.text.FSDev_AccessLock,"ax",%progbits
 1688              		.align	1
 1689              		.global	FSDev_AccessLock
 1690              		.syntax unified
 1691              		.thumb
 1692              		.thumb_func
 1693              		.fpu fpv4-sp-d16
 1695              	FSDev_AccessLock:
 1696              	.LVL165:
 1697              	.LFB11:
1709:rtos/uC-FS/Source/fs_dev.c ****     FS_DEV  *p_dev;
 1698              		.loc 1 1709 1 is_stmt 1 view -0
 1699              		.cfi_startproc
 1700              		@ args = 0, pretend = 0, frame = 0
 1701              		@ frame_needed = 0, uses_anonymous_args = 0
1709:rtos/uC-FS/Source/fs_dev.c ****     FS_DEV  *p_dev;
 1702              		.loc 1 1709 1 is_stmt 0 view .LVU521
 1703 0000 70B5     		push	{r4, r5, r6, lr}
 1704              	.LCFI34:
 1705              		.cfi_def_cfa_offset 16
 1706              		.cfi_offset 4, -16
 1707              		.cfi_offset 5, -12
 1708              		.cfi_offset 6, -8
 1709              		.cfi_offset 14, -4
 1710 0002 0446     		mov	r4, r0
 1711 0004 0D46     		mov	r5, r1
1710:rtos/uC-FS/Source/fs_dev.c **** 
 1712              		.loc 1 1710 5 is_stmt 1 view .LVU522
1714:rtos/uC-FS/Source/fs_dev.c ****         CPU_SW_EXCEPTION(DEF_NO);
 1713              		.loc 1 1714 5 view .LVU523
1714:rtos/uC-FS/Source/fs_dev.c ****         CPU_SW_EXCEPTION(DEF_NO);
 1714              		.loc 1 1714 8 is_stmt 0 view .LVU524
 1715 0006 1646     		mov	r6, r2
 1716 0008 92B1     		cbz	r2, .L140
 1717              	.LVL166:
 1718              	.L134:
1715:rtos/uC-FS/Source/fs_dev.c ****     }
ARM GAS  /tmp/cccHmdnc.s 			page 97


 1719              		.loc 1 1715 9 is_stmt 1 discriminator 1 view .LVU525
1717:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_NAME_NULL;
 1720              		.loc 1 1717 5 discriminator 1 view .LVU526
1717:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_NAME_NULL;
 1721              		.loc 1 1717 8 is_stmt 0 discriminator 1 view .LVU527
 1722 000a A4B1     		cbz	r4, .L141
1723:rtos/uC-FS/Source/fs_dev.c **** 
 1723              		.loc 1 1723 4 is_stmt 1 view .LVU528
1723:rtos/uC-FS/Source/fs_dev.c **** 
 1724              		.loc 1 1723 11 is_stmt 0 view .LVU529
 1725 000c 0023     		movs	r3, #0
 1726 000e 3380     		strh	r3, [r6]	@ movhi
1725:rtos/uC-FS/Source/fs_dev.c ****     if (p_dev == DEF_NULL) {
 1727              		.loc 1 1725 5 is_stmt 1 view .LVU530
1725:rtos/uC-FS/Source/fs_dev.c ****     if (p_dev == DEF_NULL) {
 1728              		.loc 1 1725 13 is_stmt 0 view .LVU531
 1729 0010 2046     		mov	r0, r4
 1730 0012 FFF7FEFF 		bl	FSDev_Acquire
 1731              	.LVL167:
1726:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_DEV_NOT_OPEN;
 1732              		.loc 1 1726 5 is_stmt 1 view .LVU532
1726:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_DEV_NOT_OPEN;
 1733              		.loc 1 1726 8 is_stmt 0 view .LVU533
 1734 0016 0446     		mov	r4, r0
 1735              	.LVL168:
1726:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_DEV_NOT_OPEN;
 1736              		.loc 1 1726 8 view .LVU534
 1737 0018 88B1     		cbz	r0, .L142
1732:rtos/uC-FS/Source/fs_dev.c ****     if (*p_err != FS_ERR_NONE) {
 1738              		.loc 1 1732 5 is_stmt 1 view .LVU535
 1739 001a 3246     		mov	r2, r6
 1740 001c 2946     		mov	r1, r5
 1741 001e 0068     		ldr	r0, [r0]
 1742              	.LVL169:
1732:rtos/uC-FS/Source/fs_dev.c ****     if (*p_err != FS_ERR_NONE) {
 1743              		.loc 1 1732 5 is_stmt 0 view .LVU536
 1744 0020 FFF7FEFF 		bl	FS_OS_DevAccessLock
 1745              	.LVL170:
1733:rtos/uC-FS/Source/fs_dev.c ****         FSDev_Release(p_dev);
 1746              		.loc 1 1733 5 is_stmt 1 view .LVU537
1733:rtos/uC-FS/Source/fs_dev.c ****         FSDev_Release(p_dev);
 1747              		.loc 1 1733 9 is_stmt 0 view .LVU538
 1748 0024 3388     		ldrh	r3, [r6]
1733:rtos/uC-FS/Source/fs_dev.c ****         FSDev_Release(p_dev);
 1749              		.loc 1 1733 8 view .LVU539
 1750 0026 73B9     		cbnz	r3, .L143
1738:rtos/uC-FS/Source/fs_dev.c **** 
 1751              		.loc 1 1738 5 is_stmt 1 view .LVU540
 1752 0028 2046     		mov	r0, r4
 1753 002a FFF7FEFF 		bl	FSDev_Release
 1754              	.LVL171:
1740:rtos/uC-FS/Source/fs_dev.c **** }
 1755              		.loc 1 1740 5 view .LVU541
 1756              	.L133:
1741:rtos/uC-FS/Source/fs_dev.c **** 
 1757              		.loc 1 1741 1 is_stmt 0 view .LVU542
 1758 002e 70BD     		pop	{r4, r5, r6, pc}
ARM GAS  /tmp/cccHmdnc.s 			page 98


 1759              	.LVL172:
 1760              	.L140:
1715:rtos/uC-FS/Source/fs_dev.c ****     }
 1761              		.loc 1 1715 9 is_stmt 1 view .LVU543
1715:rtos/uC-FS/Source/fs_dev.c ****     }
 1762              		.loc 1 1715 9 view .LVU544
 1763 0030 FFF7FEFF 		bl	CPU_SW_Exception
 1764              	.LVL173:
1715:rtos/uC-FS/Source/fs_dev.c ****     }
 1765              		.loc 1 1715 9 is_stmt 0 view .LVU545
 1766 0034 E9E7     		b	.L134
 1767              	.L141:
1718:rtos/uC-FS/Source/fs_dev.c ****         return;
 1768              		.loc 1 1718 8 is_stmt 1 view .LVU546
1718:rtos/uC-FS/Source/fs_dev.c ****         return;
 1769              		.loc 1 1718 15 is_stmt 0 view .LVU547
 1770 0036 40F28933 		movw	r3, #905
 1771 003a 3380     		strh	r3, [r6]	@ movhi
1719:rtos/uC-FS/Source/fs_dev.c ****     }
 1772              		.loc 1 1719 9 is_stmt 1 view .LVU548
 1773 003c F7E7     		b	.L133
 1774              	.LVL174:
 1775              	.L142:
1727:rtos/uC-FS/Source/fs_dev.c ****         return;
 1776              		.loc 1 1727 8 view .LVU549
1727:rtos/uC-FS/Source/fs_dev.c ****         return;
 1777              		.loc 1 1727 15 is_stmt 0 view .LVU550
 1778 003e 40F24513 		movw	r3, #325
 1779 0042 3380     		strh	r3, [r6]	@ movhi
1728:rtos/uC-FS/Source/fs_dev.c ****     }
 1780              		.loc 1 1728 9 is_stmt 1 view .LVU551
 1781 0044 F3E7     		b	.L133
 1782              	.LVL175:
 1783              	.L143:
1734:rtos/uC-FS/Source/fs_dev.c ****         return;
 1784              		.loc 1 1734 9 view .LVU552
 1785 0046 2046     		mov	r0, r4
 1786 0048 FFF7FEFF 		bl	FSDev_Release
 1787              	.LVL176:
1735:rtos/uC-FS/Source/fs_dev.c ****     }
 1788              		.loc 1 1735 9 view .LVU553
 1789 004c EFE7     		b	.L133
 1790              		.cfi_endproc
 1791              	.LFE11:
 1793              		.section	.text.FSDev_AccessUnlock,"ax",%progbits
 1794              		.align	1
 1795              		.global	FSDev_AccessUnlock
 1796              		.syntax unified
 1797              		.thumb
 1798              		.thumb_func
 1799              		.fpu fpv4-sp-d16
 1801              	FSDev_AccessUnlock:
 1802              	.LVL177:
 1803              	.LFB12:
1766:rtos/uC-FS/Source/fs_dev.c ****     FS_DEV  *p_dev;
 1804              		.loc 1 1766 1 view -0
 1805              		.cfi_startproc
ARM GAS  /tmp/cccHmdnc.s 			page 99


 1806              		@ args = 0, pretend = 0, frame = 0
 1807              		@ frame_needed = 0, uses_anonymous_args = 0
1766:rtos/uC-FS/Source/fs_dev.c ****     FS_DEV  *p_dev;
 1808              		.loc 1 1766 1 is_stmt 0 view .LVU555
 1809 0000 38B5     		push	{r3, r4, r5, lr}
 1810              	.LCFI35:
 1811              		.cfi_def_cfa_offset 16
 1812              		.cfi_offset 3, -16
 1813              		.cfi_offset 4, -12
 1814              		.cfi_offset 5, -8
 1815              		.cfi_offset 14, -4
 1816 0002 0446     		mov	r4, r0
1767:rtos/uC-FS/Source/fs_dev.c **** 
 1817              		.loc 1 1767 5 is_stmt 1 view .LVU556
1771:rtos/uC-FS/Source/fs_dev.c ****         CPU_SW_EXCEPTION(DEF_NO);
 1818              		.loc 1 1771 5 view .LVU557
1771:rtos/uC-FS/Source/fs_dev.c ****         CPU_SW_EXCEPTION(DEF_NO);
 1819              		.loc 1 1771 8 is_stmt 0 view .LVU558
 1820 0004 0D46     		mov	r5, r1
 1821 0006 71B1     		cbz	r1, .L150
 1822              	.LVL178:
 1823              	.L145:
1772:rtos/uC-FS/Source/fs_dev.c ****     }
 1824              		.loc 1 1772 9 is_stmt 1 discriminator 1 view .LVU559
1774:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_NAME_NULL;
 1825              		.loc 1 1774 5 discriminator 1 view .LVU560
1774:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_NAME_NULL;
 1826              		.loc 1 1774 8 is_stmt 0 discriminator 1 view .LVU561
 1827 0008 84B1     		cbz	r4, .L151
1780:rtos/uC-FS/Source/fs_dev.c **** 
 1828              		.loc 1 1780 4 is_stmt 1 view .LVU562
1780:rtos/uC-FS/Source/fs_dev.c **** 
 1829              		.loc 1 1780 11 is_stmt 0 view .LVU563
 1830 000a 0023     		movs	r3, #0
 1831 000c 2B80     		strh	r3, [r5]	@ movhi
1782:rtos/uC-FS/Source/fs_dev.c ****     if (p_dev == DEF_NULL) {
 1832              		.loc 1 1782 5 is_stmt 1 view .LVU564
1782:rtos/uC-FS/Source/fs_dev.c ****     if (p_dev == DEF_NULL) {
 1833              		.loc 1 1782 13 is_stmt 0 view .LVU565
 1834 000e 2046     		mov	r0, r4
 1835 0010 FFF7FEFF 		bl	FSDev_Acquire
 1836              	.LVL179:
1783:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_DEV_NOT_OPEN;
 1837              		.loc 1 1783 5 is_stmt 1 view .LVU566
1783:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_DEV_NOT_OPEN;
 1838              		.loc 1 1783 8 is_stmt 0 view .LVU567
 1839 0014 0446     		mov	r4, r0
 1840              	.LVL180:
1783:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_DEV_NOT_OPEN;
 1841              		.loc 1 1783 8 view .LVU568
 1842 0016 68B1     		cbz	r0, .L152
1789:rtos/uC-FS/Source/fs_dev.c **** 
 1843              		.loc 1 1789 5 is_stmt 1 view .LVU569
 1844 0018 0068     		ldr	r0, [r0]
 1845              	.LVL181:
1789:rtos/uC-FS/Source/fs_dev.c **** 
 1846              		.loc 1 1789 5 is_stmt 0 view .LVU570
ARM GAS  /tmp/cccHmdnc.s 			page 100


 1847 001a FFF7FEFF 		bl	FS_OS_DevAccessUnlock
 1848              	.LVL182:
1791:rtos/uC-FS/Source/fs_dev.c **** }
 1849              		.loc 1 1791 5 is_stmt 1 view .LVU571
 1850 001e 2046     		mov	r0, r4
 1851 0020 FFF7FEFF 		bl	FSDev_Release
 1852              	.LVL183:
 1853              	.L144:
1792:rtos/uC-FS/Source/fs_dev.c **** 
 1854              		.loc 1 1792 1 is_stmt 0 view .LVU572
 1855 0024 38BD     		pop	{r3, r4, r5, pc}
 1856              	.LVL184:
 1857              	.L150:
1772:rtos/uC-FS/Source/fs_dev.c ****     }
 1858              		.loc 1 1772 9 is_stmt 1 view .LVU573
1772:rtos/uC-FS/Source/fs_dev.c ****     }
 1859              		.loc 1 1772 9 view .LVU574
 1860 0026 FFF7FEFF 		bl	CPU_SW_Exception
 1861              	.LVL185:
1772:rtos/uC-FS/Source/fs_dev.c ****     }
 1862              		.loc 1 1772 9 is_stmt 0 view .LVU575
 1863 002a EDE7     		b	.L145
 1864              	.L151:
1775:rtos/uC-FS/Source/fs_dev.c ****         return;
 1865              		.loc 1 1775 8 is_stmt 1 view .LVU576
1775:rtos/uC-FS/Source/fs_dev.c ****         return;
 1866              		.loc 1 1775 15 is_stmt 0 view .LVU577
 1867 002c 40F28933 		movw	r3, #905
 1868 0030 2B80     		strh	r3, [r5]	@ movhi
1776:rtos/uC-FS/Source/fs_dev.c ****     }
 1869              		.loc 1 1776 9 is_stmt 1 view .LVU578
 1870 0032 F7E7     		b	.L144
 1871              	.LVL186:
 1872              	.L152:
1784:rtos/uC-FS/Source/fs_dev.c ****         return;
 1873              		.loc 1 1784 8 view .LVU579
1784:rtos/uC-FS/Source/fs_dev.c ****         return;
 1874              		.loc 1 1784 15 is_stmt 0 view .LVU580
 1875 0034 40F24513 		movw	r3, #325
 1876 0038 2B80     		strh	r3, [r5]	@ movhi
1785:rtos/uC-FS/Source/fs_dev.c ****     }
 1877              		.loc 1 1785 9 is_stmt 1 view .LVU581
 1878 003a F3E7     		b	.L144
 1879              		.cfi_endproc
 1880              	.LFE12:
 1882              		.section	.text.FSDev_Lock,"ax",%progbits
 1883              		.align	1
 1884              		.global	FSDev_Lock
 1885              		.syntax unified
 1886              		.thumb
 1887              		.thumb_func
 1888              		.fpu fpv4-sp-d16
 1890              	FSDev_Lock:
 1891              	.LVL187:
 1892              	.LFB21:
2273:rtos/uC-FS/Source/fs_dev.c ****     FS_ERR  err;
 1893              		.loc 1 2273 1 view -0
ARM GAS  /tmp/cccHmdnc.s 			page 101


 1894              		.cfi_startproc
 1895              		@ args = 0, pretend = 0, frame = 8
 1896              		@ frame_needed = 0, uses_anonymous_args = 0
2273:rtos/uC-FS/Source/fs_dev.c ****     FS_ERR  err;
 1897              		.loc 1 2273 1 is_stmt 0 view .LVU583
 1898 0000 00B5     		push	{lr}
 1899              	.LCFI36:
 1900              		.cfi_def_cfa_offset 4
 1901              		.cfi_offset 14, -4
 1902 0002 83B0     		sub	sp, sp, #12
 1903              	.LCFI37:
 1904              		.cfi_def_cfa_offset 16
2274:rtos/uC-FS/Source/fs_dev.c **** 
 1905              		.loc 1 2274 5 is_stmt 1 view .LVU584
2278:rtos/uC-FS/Source/fs_dev.c ****     if (err != FS_ERR_NONE) {
 1906              		.loc 1 2278 5 view .LVU585
 1907 0004 0DF10601 		add	r1, sp, #6
 1908 0008 0068     		ldr	r0, [r0]
 1909              	.LVL188:
2278:rtos/uC-FS/Source/fs_dev.c ****     if (err != FS_ERR_NONE) {
 1910              		.loc 1 2278 5 is_stmt 0 view .LVU586
 1911 000a FFF7FEFF 		bl	FS_OS_DevLock
 1912              	.LVL189:
2279:rtos/uC-FS/Source/fs_dev.c ****         return (DEF_NO);
 1913              		.loc 1 2279 5 is_stmt 1 view .LVU587
2279:rtos/uC-FS/Source/fs_dev.c ****         return (DEF_NO);
 1914              		.loc 1 2279 13 is_stmt 0 view .LVU588
 1915 000e BDF80630 		ldrh	r3, [sp, #6]
2279:rtos/uC-FS/Source/fs_dev.c ****         return (DEF_NO);
 1916              		.loc 1 2279 8 view .LVU589
 1917 0012 1BB9     		cbnz	r3, .L155
2283:rtos/uC-FS/Source/fs_dev.c **** }
 1918              		.loc 1 2283 12 view .LVU590
 1919 0014 0120     		movs	r0, #1
 1920              	.L154:
2284:rtos/uC-FS/Source/fs_dev.c **** 
 1921              		.loc 1 2284 1 view .LVU591
 1922 0016 03B0     		add	sp, sp, #12
 1923              	.LCFI38:
 1924              		.cfi_remember_state
 1925              		.cfi_def_cfa_offset 4
 1926              		@ sp needed
 1927 0018 5DF804FB 		ldr	pc, [sp], #4
 1928              	.L155:
 1929              	.LCFI39:
 1930              		.cfi_restore_state
2280:rtos/uC-FS/Source/fs_dev.c ****     }
 1931              		.loc 1 2280 16 view .LVU592
 1932 001c 0020     		movs	r0, #0
 1933 001e FAE7     		b	.L154
 1934              		.cfi_endproc
 1935              	.LFE21:
 1937              		.section	.text.FSDev_Unlock,"ax",%progbits
 1938              		.align	1
 1939              		.global	FSDev_Unlock
 1940              		.syntax unified
 1941              		.thumb
ARM GAS  /tmp/cccHmdnc.s 			page 102


 1942              		.thumb_func
 1943              		.fpu fpv4-sp-d16
 1945              	FSDev_Unlock:
 1946              	.LVL190:
 1947              	.LFB22:
2303:rtos/uC-FS/Source/fs_dev.c ****                                                                 /* ----------------- RELEASE DEV LO
 1948              		.loc 1 2303 1 is_stmt 1 view -0
 1949              		.cfi_startproc
 1950              		@ args = 0, pretend = 0, frame = 0
 1951              		@ frame_needed = 0, uses_anonymous_args = 0
2303:rtos/uC-FS/Source/fs_dev.c ****                                                                 /* ----------------- RELEASE DEV LO
 1952              		.loc 1 2303 1 is_stmt 0 view .LVU594
 1953 0000 08B5     		push	{r3, lr}
 1954              	.LCFI40:
 1955              		.cfi_def_cfa_offset 8
 1956              		.cfi_offset 3, -8
 1957              		.cfi_offset 14, -4
2305:rtos/uC-FS/Source/fs_dev.c **** }
 1958              		.loc 1 2305 5 is_stmt 1 view .LVU595
 1959 0002 0068     		ldr	r0, [r0]
 1960              	.LVL191:
2305:rtos/uC-FS/Source/fs_dev.c **** }
 1961              		.loc 1 2305 5 is_stmt 0 view .LVU596
 1962 0004 FFF7FEFF 		bl	FS_OS_DevUnlock
 1963              	.LVL192:
2306:rtos/uC-FS/Source/fs_dev.c **** 
 1964              		.loc 1 2306 1 view .LVU597
 1965 0008 08BD     		pop	{r3, pc}
 1966              		.cfi_endproc
 1967              	.LFE22:
 1969              		.section	.text.FSDev_ReleaseUnlock,"ax",%progbits
 1970              		.align	1
 1971              		.global	FSDev_ReleaseUnlock
 1972              		.syntax unified
 1973              		.thumb
 1974              		.thumb_func
 1975              		.fpu fpv4-sp-d16
 1977              	FSDev_ReleaseUnlock:
 1978              	.LVL193:
 1979              	.LFB19:
2204:rtos/uC-FS/Source/fs_dev.c ****     FSDev_Unlock(p_dev);
 1980              		.loc 1 2204 1 is_stmt 1 view -0
 1981              		.cfi_startproc
 1982              		@ args = 0, pretend = 0, frame = 0
 1983              		@ frame_needed = 0, uses_anonymous_args = 0
2204:rtos/uC-FS/Source/fs_dev.c ****     FSDev_Unlock(p_dev);
 1984              		.loc 1 2204 1 is_stmt 0 view .LVU599
 1985 0000 10B5     		push	{r4, lr}
 1986              	.LCFI41:
 1987              		.cfi_def_cfa_offset 8
 1988              		.cfi_offset 4, -8
 1989              		.cfi_offset 14, -4
 1990 0002 0446     		mov	r4, r0
2205:rtos/uC-FS/Source/fs_dev.c ****     FSDev_Release(p_dev);
 1991              		.loc 1 2205 5 is_stmt 1 view .LVU600
 1992 0004 FFF7FEFF 		bl	FSDev_Unlock
 1993              	.LVL194:
ARM GAS  /tmp/cccHmdnc.s 			page 103


2206:rtos/uC-FS/Source/fs_dev.c **** }
 1994              		.loc 1 2206 5 view .LVU601
 1995 0008 2046     		mov	r0, r4
 1996 000a FFF7FEFF 		bl	FSDev_Release
 1997              	.LVL195:
2207:rtos/uC-FS/Source/fs_dev.c **** 
 1998              		.loc 1 2207 1 is_stmt 0 view .LVU602
 1999 000e 10BD     		pop	{r4, pc}
2207:rtos/uC-FS/Source/fs_dev.c **** 
 2000              		.loc 1 2207 1 view .LVU603
 2001              		.cfi_endproc
 2002              	.LFE19:
 2004              		.section	.text.FSDev_Close,"ax",%progbits
 2005              		.align	1
 2006              		.global	FSDev_Close
 2007              		.syntax unified
 2008              		.thumb
 2009              		.thumb_func
 2010              		.fpu fpv4-sp-d16
 2012              	FSDev_Close:
 2013              	.LVL196:
 2014              	.LFB1:
 316:rtos/uC-FS/Source/fs_dev.c ****     FS_DEV       *p_dev;
 2015              		.loc 1 316 1 is_stmt 1 view -0
 2016              		.cfi_startproc
 2017              		@ args = 0, pretend = 0, frame = 0
 2018              		@ frame_needed = 0, uses_anonymous_args = 0
 316:rtos/uC-FS/Source/fs_dev.c ****     FS_DEV       *p_dev;
 2019              		.loc 1 316 1 is_stmt 0 view .LVU605
 2020 0000 38B5     		push	{r3, r4, r5, lr}
 2021              	.LCFI42:
 2022              		.cfi_def_cfa_offset 16
 2023              		.cfi_offset 3, -16
 2024              		.cfi_offset 4, -12
 2025              		.cfi_offset 5, -8
 2026              		.cfi_offset 14, -4
 2027 0002 0446     		mov	r4, r0
 317:rtos/uC-FS/Source/fs_dev.c ****     FS_CTR        ref_cnt;
 2028              		.loc 1 317 5 is_stmt 1 view .LVU606
 318:rtos/uC-FS/Source/fs_dev.c ****     CPU_BOOLEAN   dev_lock_ok;
 2029              		.loc 1 318 5 view .LVU607
 319:rtos/uC-FS/Source/fs_dev.c **** 
 2030              		.loc 1 319 5 view .LVU608
 324:rtos/uC-FS/Source/fs_dev.c ****         CPU_SW_EXCEPTION(;);
 2031              		.loc 1 324 5 view .LVU609
 324:rtos/uC-FS/Source/fs_dev.c ****         CPU_SW_EXCEPTION(;);
 2032              		.loc 1 324 8 is_stmt 0 view .LVU610
 2033 0004 0D46     		mov	r5, r1
 2034 0006 F1B1     		cbz	r1, .L170
 2035              	.LVL197:
 2036              	.L162:
 325:rtos/uC-FS/Source/fs_dev.c ****     }
 2037              		.loc 1 325 9 is_stmt 1 discriminator 1 view .LVU611
 327:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_NAME_NULL;
 2038              		.loc 1 327 5 discriminator 1 view .LVU612
 327:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_NAME_NULL;
 2039              		.loc 1 327 8 is_stmt 0 discriminator 1 view .LVU613
ARM GAS  /tmp/cccHmdnc.s 			page 104


 2040 0008 04B3     		cbz	r4, .L171
 336:rtos/uC-FS/Source/fs_dev.c ****     if (p_dev == (FS_DEV *)0) {                                 /* Rtn err if dev not found.       
 2041              		.loc 1 336 5 is_stmt 1 view .LVU614
 336:rtos/uC-FS/Source/fs_dev.c ****     if (p_dev == (FS_DEV *)0) {                                 /* Rtn err if dev not found.       
 2042              		.loc 1 336 13 is_stmt 0 view .LVU615
 2043 000a 2046     		mov	r0, r4
 2044 000c FFF7FEFF 		bl	FSDev_Acquire
 2045              	.LVL198:
 337:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_DEV_NOT_OPEN;
 2046              		.loc 1 337 5 is_stmt 1 view .LVU616
 337:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_DEV_NOT_OPEN;
 2047              		.loc 1 337 8 is_stmt 0 view .LVU617
 2048 0010 0446     		mov	r4, r0
 2049              	.LVL199:
 337:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_DEV_NOT_OPEN;
 2050              		.loc 1 337 8 view .LVU618
 2051 0012 F8B1     		cbz	r0, .L172
 342:rtos/uC-FS/Source/fs_dev.c ****     if (ref_cnt > 2u) {
 2052              		.loc 1 342 5 is_stmt 1 view .LVU619
 342:rtos/uC-FS/Source/fs_dev.c ****     if (ref_cnt > 2u) {
 2053              		.loc 1 342 13 is_stmt 0 view .LVU620
 2054 0014 8368     		ldr	r3, [r0, #8]
 2055              	.LVL200:
 343:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_DEV_VOL_OPEN;                            /* ... rtn err.                    
 2056              		.loc 1 343 5 is_stmt 1 view .LVU621
 343:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_DEV_VOL_OPEN;                            /* ... rtn err.                    
 2057              		.loc 1 343 8 is_stmt 0 view .LVU622
 2058 0016 022B     		cmp	r3, #2
 2059 0018 20D8     		bhi	.L173
 349:rtos/uC-FS/Source/fs_dev.c ****     if (dev_lock_ok == DEF_NO) {
 2060              		.loc 1 349 5 is_stmt 1 view .LVU623
 349:rtos/uC-FS/Source/fs_dev.c ****     if (dev_lock_ok == DEF_NO) {
 2061              		.loc 1 349 19 is_stmt 0 view .LVU624
 2062 001a FFF7FEFF 		bl	FSDev_Lock
 2063              	.LVL201:
 350:rtos/uC-FS/Source/fs_dev.c ****         FSDev_Release(p_dev);
 2064              		.loc 1 350 5 is_stmt 1 view .LVU625
 350:rtos/uC-FS/Source/fs_dev.c ****         FSDev_Release(p_dev);
 2065              		.loc 1 350 8 is_stmt 0 view .LVU626
 2066 001e 18B3     		cbz	r0, .L174
 359:rtos/uC-FS/Source/fs_dev.c ****         case FS_DEV_STATE_OPEN:
 2067              		.loc 1 359 5 is_stmt 1 view .LVU627
 359:rtos/uC-FS/Source/fs_dev.c ****         case FS_DEV_STATE_OPEN:
 2068              		.loc 1 359 18 is_stmt 0 view .LVU628
 2069 0020 A388     		ldrh	r3, [r4, #4]
 359:rtos/uC-FS/Source/fs_dev.c ****         case FS_DEV_STATE_OPEN:
 2070              		.loc 1 359 5 view .LVU629
 2071 0022 033B     		subs	r3, r3, #3
 2072 0024 022B     		cmp	r3, #2
 2073 0026 26D8     		bhi	.L175
 363:rtos/uC-FS/Source/fs_dev.c **** 
 2074              		.loc 1 363 14 is_stmt 1 view .LVU630
 377:rtos/uC-FS/Source/fs_dev.c **** 
 2075              		.loc 1 377 5 view .LVU631
 377:rtos/uC-FS/Source/fs_dev.c **** 
 2076              		.loc 1 377 10 is_stmt 0 view .LVU632
 2077 0028 236B     		ldr	r3, [r4, #48]
ARM GAS  /tmp/cccHmdnc.s 			page 105


 377:rtos/uC-FS/Source/fs_dev.c **** 
 2078              		.loc 1 377 21 view .LVU633
 2079 002a DB68     		ldr	r3, [r3, #12]
 377:rtos/uC-FS/Source/fs_dev.c **** 
 2080              		.loc 1 377 5 view .LVU634
 2081 002c 2046     		mov	r0, r4
 2082              	.LVL202:
 377:rtos/uC-FS/Source/fs_dev.c **** 
 2083              		.loc 1 377 5 view .LVU635
 2084 002e 9847     		blx	r3
 2085              	.LVL203:
 379:rtos/uC-FS/Source/fs_dev.c **** 
 2086              		.loc 1 379 5 is_stmt 1 view .LVU636
 379:rtos/uC-FS/Source/fs_dev.c **** 
 2087              		.loc 1 379 18 is_stmt 0 view .LVU637
 2088 0030 0123     		movs	r3, #1
 2089 0032 A380     		strh	r3, [r4, #4]	@ movhi
 384:rtos/uC-FS/Source/fs_dev.c ****     FSDev_Release(p_dev);                                       /* Release dev ref init.           
 2090              		.loc 1 384 5 is_stmt 1 view .LVU638
 2091 0034 2046     		mov	r0, r4
 2092 0036 FFF7FEFF 		bl	FSDev_ReleaseUnlock
 2093              	.LVL204:
 385:rtos/uC-FS/Source/fs_dev.c **** 
 2094              		.loc 1 385 5 view .LVU639
 2095 003a 2046     		mov	r0, r4
 2096 003c FFF7FEFF 		bl	FSDev_Release
 2097              	.LVL205:
 387:rtos/uC-FS/Source/fs_dev.c **** }
 2098              		.loc 1 387 4 view .LVU640
 387:rtos/uC-FS/Source/fs_dev.c **** }
 2099              		.loc 1 387 11 is_stmt 0 view .LVU641
 2100 0040 0023     		movs	r3, #0
 2101 0042 2B80     		strh	r3, [r5]	@ movhi
 2102 0044 05E0     		b	.L161
 2103              	.LVL206:
 2104              	.L170:
 325:rtos/uC-FS/Source/fs_dev.c ****     }
 2105              		.loc 1 325 9 is_stmt 1 view .LVU642
 325:rtos/uC-FS/Source/fs_dev.c ****     }
 2106              		.loc 1 325 9 view .LVU643
 2107 0046 FFF7FEFF 		bl	CPU_SW_Exception
 2108              	.LVL207:
 325:rtos/uC-FS/Source/fs_dev.c ****     }
 2109              		.loc 1 325 9 is_stmt 0 view .LVU644
 2110 004a DDE7     		b	.L162
 2111              	.L171:
 328:rtos/uC-FS/Source/fs_dev.c ****         return;
 2112              		.loc 1 328 8 is_stmt 1 view .LVU645
 328:rtos/uC-FS/Source/fs_dev.c ****         return;
 2113              		.loc 1 328 15 is_stmt 0 view .LVU646
 2114 004c 40F28933 		movw	r3, #905
 2115 0050 2B80     		strh	r3, [r5]	@ movhi
 329:rtos/uC-FS/Source/fs_dev.c ****     }
 2116              		.loc 1 329 9 is_stmt 1 view .LVU647
 2117              	.LVL208:
 2118              	.L161:
 388:rtos/uC-FS/Source/fs_dev.c **** 
ARM GAS  /tmp/cccHmdnc.s 			page 106


 2119              		.loc 1 388 1 is_stmt 0 view .LVU648
 2120 0052 38BD     		pop	{r3, r4, r5, pc}
 2121              	.LVL209:
 2122              	.L172:
 338:rtos/uC-FS/Source/fs_dev.c ****         return;
 2123              		.loc 1 338 8 is_stmt 1 view .LVU649
 338:rtos/uC-FS/Source/fs_dev.c ****         return;
 2124              		.loc 1 338 15 is_stmt 0 view .LVU650
 2125 0054 40F24513 		movw	r3, #325
 2126 0058 2B80     		strh	r3, [r5]	@ movhi
 339:rtos/uC-FS/Source/fs_dev.c ****     }
 2127              		.loc 1 339 9 is_stmt 1 view .LVU651
 2128 005a FAE7     		b	.L161
 2129              	.LVL210:
 2130              	.L173:
 344:rtos/uC-FS/Source/fs_dev.c ****         FSDev_Release(p_dev);
 2131              		.loc 1 344 8 view .LVU652
 344:rtos/uC-FS/Source/fs_dev.c ****         FSDev_Release(p_dev);
 2132              		.loc 1 344 15 is_stmt 0 view .LVU653
 2133 005c 40F24B13 		movw	r3, #331
 2134              	.LVL211:
 344:rtos/uC-FS/Source/fs_dev.c ****         FSDev_Release(p_dev);
 2135              		.loc 1 344 15 view .LVU654
 2136 0060 2B80     		strh	r3, [r5]	@ movhi
 2137              	.LVL212:
 345:rtos/uC-FS/Source/fs_dev.c ****         return;
 2138              		.loc 1 345 9 is_stmt 1 view .LVU655
 2139 0062 FFF7FEFF 		bl	FSDev_Release
 2140              	.LVL213:
 346:rtos/uC-FS/Source/fs_dev.c ****     }
 2141              		.loc 1 346 9 view .LVU656
 2142 0066 F4E7     		b	.L161
 2143              	.LVL214:
 2144              	.L174:
 351:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_OS_LOCK;
 2145              		.loc 1 351 9 view .LVU657
 2146 0068 2046     		mov	r0, r4
 2147              	.LVL215:
 351:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_OS_LOCK;
 2148              		.loc 1 351 9 is_stmt 0 view .LVU658
 2149 006a FFF7FEFF 		bl	FSDev_Release
 2150              	.LVL216:
 352:rtos/uC-FS/Source/fs_dev.c ****         return;
 2151              		.loc 1 352 8 is_stmt 1 view .LVU659
 352:rtos/uC-FS/Source/fs_dev.c ****         return;
 2152              		.loc 1 352 15 is_stmt 0 view .LVU660
 2153 006e 40F2DD53 		movw	r3, #1501
 2154 0072 2B80     		strh	r3, [r5]	@ movhi
 353:rtos/uC-FS/Source/fs_dev.c ****     }
 2155              		.loc 1 353 9 is_stmt 1 view .LVU661
 2156 0074 EDE7     		b	.L161
 2157              	.LVL217:
 2158              	.L175:
 370:rtos/uC-FS/Source/fs_dev.c ****             *p_err = FS_ERR_DEV_NOT_OPEN;
 2159              		.loc 1 370 14 view .LVU662
 2160 0076 2046     		mov	r0, r4
 2161              	.LVL218:
ARM GAS  /tmp/cccHmdnc.s 			page 107


 370:rtos/uC-FS/Source/fs_dev.c ****             *p_err = FS_ERR_DEV_NOT_OPEN;
 2162              		.loc 1 370 14 is_stmt 0 view .LVU663
 2163 0078 FFF7FEFF 		bl	FSDev_ReleaseUnlock
 2164              	.LVL219:
 371:rtos/uC-FS/Source/fs_dev.c ****              return;
 2165              		.loc 1 371 13 is_stmt 1 view .LVU664
 371:rtos/uC-FS/Source/fs_dev.c ****              return;
 2166              		.loc 1 371 20 is_stmt 0 view .LVU665
 2167 007c 40F24513 		movw	r3, #325
 2168 0080 2B80     		strh	r3, [r5]	@ movhi
 372:rtos/uC-FS/Source/fs_dev.c ****     }
 2169              		.loc 1 372 14 is_stmt 1 view .LVU666
 2170 0082 E6E7     		b	.L161
 2171              		.cfi_endproc
 2172              	.LFE1:
 2174              		.section	.text.FSDev_IO_Ctrl,"ax",%progbits
 2175              		.align	1
 2176              		.global	FSDev_IO_Ctrl
 2177              		.syntax unified
 2178              		.thumb
 2179              		.thumb_func
 2180              		.fpu fpv4-sp-d16
 2182              	FSDev_IO_Ctrl:
 2183              	.LVL220:
 2184              	.LFB2:
 529:rtos/uC-FS/Source/fs_dev.c ****     FS_DEV       *p_dev;
 2185              		.loc 1 529 1 view -0
 2186              		.cfi_startproc
 2187              		@ args = 0, pretend = 0, frame = 0
 2188              		@ frame_needed = 0, uses_anonymous_args = 0
 529:rtos/uC-FS/Source/fs_dev.c ****     FS_DEV       *p_dev;
 2189              		.loc 1 529 1 is_stmt 0 view .LVU668
 2190 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 2191              	.LCFI43:
 2192              		.cfi_def_cfa_offset 24
 2193              		.cfi_offset 4, -24
 2194              		.cfi_offset 5, -20
 2195              		.cfi_offset 6, -16
 2196              		.cfi_offset 7, -12
 2197              		.cfi_offset 8, -8
 2198              		.cfi_offset 14, -4
 2199 0004 0446     		mov	r4, r0
 2200 0006 0F46     		mov	r7, r1
 2201 0008 1646     		mov	r6, r2
 530:rtos/uC-FS/Source/fs_dev.c ****     CPU_BOOLEAN   lock_success;
 2202              		.loc 1 530 5 is_stmt 1 view .LVU669
 531:rtos/uC-FS/Source/fs_dev.c **** 
 2203              		.loc 1 531 5 view .LVU670
 535:rtos/uC-FS/Source/fs_dev.c ****         CPU_SW_EXCEPTION(;);
 2204              		.loc 1 535 5 view .LVU671
 535:rtos/uC-FS/Source/fs_dev.c ****         CPU_SW_EXCEPTION(;);
 2205              		.loc 1 535 8 is_stmt 0 view .LVU672
 2206 000a 1D46     		mov	r5, r3
 2207 000c EBB1     		cbz	r3, .L184
 2208              	.LVL221:
 2209              	.L177:
 536:rtos/uC-FS/Source/fs_dev.c ****     }
ARM GAS  /tmp/cccHmdnc.s 			page 108


 2210              		.loc 1 536 9 is_stmt 1 discriminator 1 view .LVU673
 538:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_NAME_NULL;
 2211              		.loc 1 538 5 discriminator 1 view .LVU674
 538:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_NAME_NULL;
 2212              		.loc 1 538 8 is_stmt 0 discriminator 1 view .LVU675
 2213 000e FCB1     		cbz	r4, .L185
 547:rtos/uC-FS/Source/fs_dev.c **** 
 2214              		.loc 1 547 5 is_stmt 1 view .LVU676
 547:rtos/uC-FS/Source/fs_dev.c **** 
 2215              		.loc 1 547 13 is_stmt 0 view .LVU677
 2216 0010 2046     		mov	r0, r4
 2217 0012 FFF7FEFF 		bl	FSDev_Acquire
 2218              	.LVL222:
 549:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_DEV_NOT_OPEN;
 2219              		.loc 1 549 5 is_stmt 1 view .LVU678
 549:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_DEV_NOT_OPEN;
 2220              		.loc 1 549 8 is_stmt 0 view .LVU679
 2221 0016 0446     		mov	r4, r0
 2222              	.LVL223:
 549:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_DEV_NOT_OPEN;
 2223              		.loc 1 549 8 view .LVU680
 2224 0018 F8B1     		cbz	r0, .L186
 554:rtos/uC-FS/Source/fs_dev.c ****     if (lock_success != DEF_YES) {
 2225              		.loc 1 554 5 is_stmt 1 view .LVU681
 554:rtos/uC-FS/Source/fs_dev.c ****     if (lock_success != DEF_YES) {
 2226              		.loc 1 554 20 is_stmt 0 view .LVU682
 2227 001a FFF7FEFF 		bl	FSDev_Lock
 2228              	.LVL224:
 555:rtos/uC-FS/Source/fs_dev.c ****         FSDev_Release(p_dev);
 2229              		.loc 1 555 5 is_stmt 1 view .LVU683
 555:rtos/uC-FS/Source/fs_dev.c ****         FSDev_Release(p_dev);
 2230              		.loc 1 555 8 is_stmt 0 view .LVU684
 2231 001e 0128     		cmp	r0, #1
 2232 0020 1FD1     		bne	.L187
 564:rtos/uC-FS/Source/fs_dev.c ****         case FS_DEV_STATE_OPEN:
 2233              		.loc 1 564 5 is_stmt 1 view .LVU685
 564:rtos/uC-FS/Source/fs_dev.c ****         case FS_DEV_STATE_OPEN:
 2234              		.loc 1 564 18 is_stmt 0 view .LVU686
 2235 0022 A388     		ldrh	r3, [r4, #4]
 564:rtos/uC-FS/Source/fs_dev.c ****         case FS_DEV_STATE_OPEN:
 2236              		.loc 1 564 5 view .LVU687
 2237 0024 033B     		subs	r3, r3, #3
 2238 0026 022B     		cmp	r3, #2
 2239 0028 22D8     		bhi	.L188
 568:rtos/uC-FS/Source/fs_dev.c **** 
 2240              		.loc 1 568 14 is_stmt 1 view .LVU688
 583:rtos/uC-FS/Source/fs_dev.c ****                               opt,
 2241              		.loc 1 583 5 view .LVU689
 583:rtos/uC-FS/Source/fs_dev.c ****                               opt,
 2242              		.loc 1 583 10 is_stmt 0 view .LVU690
 2243 002a 236B     		ldr	r3, [r4, #48]
 583:rtos/uC-FS/Source/fs_dev.c ****                               opt,
 2244              		.loc 1 583 21 view .LVU691
 2245 002c D3F81C80 		ldr	r8, [r3, #28]
 583:rtos/uC-FS/Source/fs_dev.c ****                               opt,
 2246              		.loc 1 583 5 view .LVU692
 2247 0030 2B46     		mov	r3, r5
ARM GAS  /tmp/cccHmdnc.s 			page 109


 2248 0032 3246     		mov	r2, r6
 2249 0034 3946     		mov	r1, r7
 2250 0036 2046     		mov	r0, r4
 2251              	.LVL225:
 583:rtos/uC-FS/Source/fs_dev.c ****                               opt,
 2252              		.loc 1 583 5 view .LVU693
 2253 0038 C047     		blx	r8
 2254              	.LVL226:
 588:rtos/uC-FS/Source/fs_dev.c **** 
 2255              		.loc 1 588 5 is_stmt 1 view .LVU694
 2256 003a 2988     		ldrh	r1, [r5]
 2257 003c 2046     		mov	r0, r4
 2258 003e FFF7FEFF 		bl	FSDev_HandleErr
 2259              	.LVL227:
 593:rtos/uC-FS/Source/fs_dev.c **** }
 2260              		.loc 1 593 5 view .LVU695
 2261 0042 2046     		mov	r0, r4
 2262 0044 FFF7FEFF 		bl	FSDev_ReleaseUnlock
 2263              	.LVL228:
 2264 0048 05E0     		b	.L176
 2265              	.LVL229:
 2266              	.L184:
 536:rtos/uC-FS/Source/fs_dev.c ****     }
 2267              		.loc 1 536 9 view .LVU696
 536:rtos/uC-FS/Source/fs_dev.c ****     }
 2268              		.loc 1 536 9 view .LVU697
 2269 004a FFF7FEFF 		bl	CPU_SW_Exception
 2270              	.LVL230:
 536:rtos/uC-FS/Source/fs_dev.c ****     }
 2271              		.loc 1 536 9 is_stmt 0 view .LVU698
 2272 004e DEE7     		b	.L177
 2273              	.L185:
 539:rtos/uC-FS/Source/fs_dev.c ****         return;
 2274              		.loc 1 539 8 is_stmt 1 view .LVU699
 539:rtos/uC-FS/Source/fs_dev.c ****         return;
 2275              		.loc 1 539 15 is_stmt 0 view .LVU700
 2276 0050 40F28933 		movw	r3, #905
 2277 0054 2B80     		strh	r3, [r5]	@ movhi
 540:rtos/uC-FS/Source/fs_dev.c ****     }
 2278              		.loc 1 540 9 is_stmt 1 view .LVU701
 2279              	.LVL231:
 2280              	.L176:
 594:rtos/uC-FS/Source/fs_dev.c **** 
 2281              		.loc 1 594 1 is_stmt 0 view .LVU702
 2282 0056 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 2283              	.LVL232:
 2284              	.L186:
 550:rtos/uC-FS/Source/fs_dev.c ****         return;
 2285              		.loc 1 550 8 is_stmt 1 view .LVU703
 550:rtos/uC-FS/Source/fs_dev.c ****         return;
 2286              		.loc 1 550 15 is_stmt 0 view .LVU704
 2287 005a 40F24513 		movw	r3, #325
 2288 005e 2B80     		strh	r3, [r5]	@ movhi
 551:rtos/uC-FS/Source/fs_dev.c ****     }
 2289              		.loc 1 551 9 is_stmt 1 view .LVU705
 2290 0060 F9E7     		b	.L176
 2291              	.LVL233:
ARM GAS  /tmp/cccHmdnc.s 			page 110


 2292              	.L187:
 556:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_OS_LOCK;
 2293              		.loc 1 556 9 view .LVU706
 2294 0062 2046     		mov	r0, r4
 2295              	.LVL234:
 556:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_OS_LOCK;
 2296              		.loc 1 556 9 is_stmt 0 view .LVU707
 2297 0064 FFF7FEFF 		bl	FSDev_Release
 2298              	.LVL235:
 557:rtos/uC-FS/Source/fs_dev.c ****         return;
 2299              		.loc 1 557 8 is_stmt 1 view .LVU708
 557:rtos/uC-FS/Source/fs_dev.c ****         return;
 2300              		.loc 1 557 15 is_stmt 0 view .LVU709
 2301 0068 40F2DD53 		movw	r3, #1501
 2302 006c 2B80     		strh	r3, [r5]	@ movhi
 558:rtos/uC-FS/Source/fs_dev.c ****     }
 2303              		.loc 1 558 9 is_stmt 1 view .LVU710
 2304 006e F2E7     		b	.L176
 2305              	.LVL236:
 2306              	.L188:
 575:rtos/uC-FS/Source/fs_dev.c ****             *p_err = FS_ERR_DEV_NOT_OPEN;
 2307              		.loc 1 575 14 view .LVU711
 2308 0070 2046     		mov	r0, r4
 2309              	.LVL237:
 575:rtos/uC-FS/Source/fs_dev.c ****             *p_err = FS_ERR_DEV_NOT_OPEN;
 2310              		.loc 1 575 14 is_stmt 0 view .LVU712
 2311 0072 FFF7FEFF 		bl	FSDev_ReleaseUnlock
 2312              	.LVL238:
 576:rtos/uC-FS/Source/fs_dev.c ****              return;
 2313              		.loc 1 576 13 is_stmt 1 view .LVU713
 576:rtos/uC-FS/Source/fs_dev.c ****              return;
 2314              		.loc 1 576 20 is_stmt 0 view .LVU714
 2315 0076 40F24513 		movw	r3, #325
 2316 007a 2B80     		strh	r3, [r5]	@ movhi
 577:rtos/uC-FS/Source/fs_dev.c ****     }
 2317              		.loc 1 577 14 is_stmt 1 view .LVU715
 2318 007c EBE7     		b	.L176
 2319              		.cfi_endproc
 2320              	.LFE2:
 2322              		.section	.text.FSDev_Open,"ax",%progbits
 2323              		.align	1
 2324              		.global	FSDev_Open
 2325              		.syntax unified
 2326              		.thumb
 2327              		.thumb_func
 2328              		.fpu fpv4-sp-d16
 2330              	FSDev_Open:
 2331              	.LVL239:
 2332              	.LFB3:
 685:rtos/uC-FS/Source/fs_dev.c ****     FS_DEV       *p_dev;
 2333              		.loc 1 685 1 view -0
 2334              		.cfi_startproc
 2335              		@ args = 0, pretend = 0, frame = 40
 2336              		@ frame_needed = 0, uses_anonymous_args = 0
 685:rtos/uC-FS/Source/fs_dev.c ****     FS_DEV       *p_dev;
 2337              		.loc 1 685 1 is_stmt 0 view .LVU717
 2338 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
ARM GAS  /tmp/cccHmdnc.s 			page 111


 2339              	.LCFI44:
 2340              		.cfi_def_cfa_offset 24
 2341              		.cfi_offset 4, -24
 2342              		.cfi_offset 5, -20
 2343              		.cfi_offset 6, -16
 2344              		.cfi_offset 7, -12
 2345              		.cfi_offset 8, -8
 2346              		.cfi_offset 14, -4
 2347 0004 8AB0     		sub	sp, sp, #40
 2348              	.LCFI45:
 2349              		.cfi_def_cfa_offset 64
 2350 0006 0446     		mov	r4, r0
 2351 0008 8846     		mov	r8, r1
 686:rtos/uC-FS/Source/fs_dev.c ****     FS_DEV_API   *p_dev_drv;
 2352              		.loc 1 686 5 is_stmt 1 view .LVU718
 687:rtos/uC-FS/Source/fs_dev.c ****     FS_DEV_INFO   dev_info;
 2353              		.loc 1 687 5 view .LVU719
 688:rtos/uC-FS/Source/fs_dev.c ****     CPU_CHAR      name_dev_copy[FS_CFG_MAX_DEV_NAME_LEN + 1u];
 2354              		.loc 1 688 5 view .LVU720
 689:rtos/uC-FS/Source/fs_dev.c ****     CPU_CHAR     *name_file;
 2355              		.loc 1 689 5 view .LVU721
 690:rtos/uC-FS/Source/fs_dev.c ****     FS_ERR        query_err;
 2356              		.loc 1 690 5 view .LVU722
 691:rtos/uC-FS/Source/fs_dev.c ****     FS_QTY        unit_nbr;
 2357              		.loc 1 691 5 view .LVU723
 692:rtos/uC-FS/Source/fs_dev.c ****     CPU_BOOLEAN   lock_success;
 2358              		.loc 1 692 5 view .LVU724
 693:rtos/uC-FS/Source/fs_dev.c **** 
 2359              		.loc 1 693 5 view .LVU725
 697:rtos/uC-FS/Source/fs_dev.c ****         CPU_SW_EXCEPTION(;);
 2360              		.loc 1 697 5 view .LVU726
 697:rtos/uC-FS/Source/fs_dev.c ****         CPU_SW_EXCEPTION(;);
 2361              		.loc 1 697 8 is_stmt 0 view .LVU727
 2362 000a 1546     		mov	r5, r2
 2363 000c 7AB1     		cbz	r2, .L221
 2364              	.LVL240:
 2365              	.L190:
 698:rtos/uC-FS/Source/fs_dev.c ****     }
 2366              		.loc 1 698 9 is_stmt 1 discriminator 1 view .LVU728
 700:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_NAME_NULL;
 2367              		.loc 1 700 5 discriminator 1 view .LVU729
 700:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_NAME_NULL;
 2368              		.loc 1 700 8 is_stmt 0 discriminator 1 view .LVU730
 2369 000e 8CB1     		cbz	r4, .L222
 708:rtos/uC-FS/Source/fs_dev.c ****                                  name_dev_copy,
 2370              		.loc 1 708 5 is_stmt 1 view .LVU731
 708:rtos/uC-FS/Source/fs_dev.c ****                                  name_dev_copy,
 2371              		.loc 1 708 17 is_stmt 0 view .LVU732
 2372 0010 01AA     		add	r2, sp, #4
 2373 0012 02A9     		add	r1, sp, #8
 2374 0014 2046     		mov	r0, r4
 2375 0016 FFF7FEFF 		bl	FSDev_NameParse
 2376              	.LVL241:
 712:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_DEV_INVALID_NAME;
 2377              		.loc 1 712 5 is_stmt 1 view .LVU733
 712:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_DEV_INVALID_NAME;
 2378              		.loc 1 712 8 is_stmt 0 view .LVU734
ARM GAS  /tmp/cccHmdnc.s 			page 112


 2379 001a 88B1     		cbz	r0, .L223
 717:rtos/uC-FS/Source/fs_dev.c ****         *p_err = FS_ERR_DEV_INVALID_NAME;
 2380              		.loc 1 717 5 is_stmt 1 view .LVU735
 717:rtos/uC-FS/Source/fs_dev.c ****         *p_err = FS_ERR_DEV_INVALID_NAME;
 2381              		.loc 1 717 9 is_stmt 0 view .LVU736
 2382 001c 0378     		ldrb	r3, [r0]	@ zero_extendqisi2
 717:rtos/uC-FS/Source/fs_dev.c ****         *p_err = FS_ERR_DEV_INVALID_NAME;
 2383              		.loc 1 717 8 view .LVU737
 2384 001e 9BB9     		cbnz	r3, .L224
 722:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_DEV_INVALID_NAME;
 2385              		.loc 1 722 5 is_stmt 1 view .LVU738
 722:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_DEV_INVALID_NAME;
 2386              		.loc 1 722 22 is_stmt 0 view .LVU739
 2387 0020 9DF80830 		ldrb	r3, [sp, #8]	@ zero_extendqisi2
 722:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_DEV_INVALID_NAME;
 2388              		.loc 1 722 8 view .LVU740
 2389 0024 A3B9     		cbnz	r3, .L195
 723:rtos/uC-FS/Source/fs_dev.c ****         return;
 2390              		.loc 1 723 8 is_stmt 1 view .LVU741
 723:rtos/uC-FS/Source/fs_dev.c ****         return;
 2391              		.loc 1 723 15 is_stmt 0 view .LVU742
 2392 0026 40F23D13 		movw	r3, #317
 2393 002a 2B80     		strh	r3, [r5]	@ movhi
 724:rtos/uC-FS/Source/fs_dev.c ****     }
 2394              		.loc 1 724 9 is_stmt 1 view .LVU743
 2395 002c 05E0     		b	.L189
 2396              	.LVL242:
 2397              	.L221:
 698:rtos/uC-FS/Source/fs_dev.c ****     }
 2398              		.loc 1 698 9 view .LVU744
 698:rtos/uC-FS/Source/fs_dev.c ****     }
 2399              		.loc 1 698 9 view .LVU745
 2400 002e FFF7FEFF 		bl	CPU_SW_Exception
 2401              	.LVL243:
 698:rtos/uC-FS/Source/fs_dev.c ****     }
 2402              		.loc 1 698 9 is_stmt 0 view .LVU746
 2403 0032 ECE7     		b	.L190
 2404              	.L222:
 701:rtos/uC-FS/Source/fs_dev.c ****         return;
 2405              		.loc 1 701 8 is_stmt 1 view .LVU747
 701:rtos/uC-FS/Source/fs_dev.c ****         return;
 2406              		.loc 1 701 15 is_stmt 0 view .LVU748
 2407 0034 40F28933 		movw	r3, #905
 2408 0038 2B80     		strh	r3, [r5]	@ movhi
 702:rtos/uC-FS/Source/fs_dev.c ****     }
 2409              		.loc 1 702 9 is_stmt 1 view .LVU749
 2410              	.LVL244:
 2411              	.L189:
 881:rtos/uC-FS/Source/fs_dev.c **** 
 2412              		.loc 1 881 1 is_stmt 0 view .LVU750
 2413 003a 0AB0     		add	sp, sp, #40
 2414              	.LCFI46:
 2415              		.cfi_remember_state
 2416              		.cfi_def_cfa_offset 24
 2417              		@ sp needed
 2418 003c BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 2419              	.LVL245:
ARM GAS  /tmp/cccHmdnc.s 			page 113


 2420              	.L223:
 2421              	.LCFI47:
 2422              		.cfi_restore_state
 713:rtos/uC-FS/Source/fs_dev.c ****         return;
 2423              		.loc 1 713 8 is_stmt 1 view .LVU751
 713:rtos/uC-FS/Source/fs_dev.c ****         return;
 2424              		.loc 1 713 15 is_stmt 0 view .LVU752
 2425 0040 40F23D13 		movw	r3, #317
 2426 0044 2B80     		strh	r3, [r5]	@ movhi
 714:rtos/uC-FS/Source/fs_dev.c ****     }
 2427              		.loc 1 714 9 is_stmt 1 view .LVU753
 2428 0046 F8E7     		b	.L189
 2429              	.L224:
 718:rtos/uC-FS/Source/fs_dev.c ****          return;
 2430              		.loc 1 718 9 view .LVU754
 718:rtos/uC-FS/Source/fs_dev.c ****          return;
 2431              		.loc 1 718 16 is_stmt 0 view .LVU755
 2432 0048 40F23D13 		movw	r3, #317
 2433 004c 2B80     		strh	r3, [r5]	@ movhi
 719:rtos/uC-FS/Source/fs_dev.c ****     }
 2434              		.loc 1 719 10 is_stmt 1 view .LVU756
 2435 004e F4E7     		b	.L189
 2436              	.L195:
 730:rtos/uC-FS/Source/fs_dev.c ****     if (*p_err != FS_ERR_NONE) {
 2437              		.loc 1 730 5 view .LVU757
 2438 0050 2846     		mov	r0, r5
 2439              	.LVL246:
 730:rtos/uC-FS/Source/fs_dev.c ****     if (*p_err != FS_ERR_NONE) {
 2440              		.loc 1 730 5 is_stmt 0 view .LVU758
 2441 0052 FFF7FEFF 		bl	FS_OS_Lock
 2442              	.LVL247:
 731:rtos/uC-FS/Source/fs_dev.c ****          return;
 2443              		.loc 1 731 5 is_stmt 1 view .LVU759
 731:rtos/uC-FS/Source/fs_dev.c ****          return;
 2444              		.loc 1 731 9 is_stmt 0 view .LVU760
 2445 0056 2B88     		ldrh	r3, [r5]
 731:rtos/uC-FS/Source/fs_dev.c ****          return;
 2446              		.loc 1 731 8 view .LVU761
 2447 0058 002B     		cmp	r3, #0
 2448 005a EED1     		bne	.L189
 735:rtos/uC-FS/Source/fs_dev.c ****     if (p_dev != (FS_DEV *)0) {                                 /* If dev already open ...         
 2449              		.loc 1 735 5 is_stmt 1 view .LVU762
 735:rtos/uC-FS/Source/fs_dev.c ****     if (p_dev != (FS_DEV *)0) {                                 /* If dev already open ...         
 2450              		.loc 1 735 13 is_stmt 0 view .LVU763
 2451 005c 2046     		mov	r0, r4
 2452 005e FFF7FEFF 		bl	FSDev_ObjFind
 2453              	.LVL248:
 736:rtos/uC-FS/Source/fs_dev.c ****         FS_OS_Unlock();
 2454              		.loc 1 736 5 is_stmt 1 view .LVU764
 736:rtos/uC-FS/Source/fs_dev.c ****         FS_OS_Unlock();
 2455              		.loc 1 736 8 is_stmt 0 view .LVU765
 2456 0062 0646     		mov	r6, r0
 2457 0064 60B1     		cbz	r0, .L196
 737:rtos/uC-FS/Source/fs_dev.c **** 
 2458              		.loc 1 737 9 is_stmt 1 view .LVU766
 2459 0066 FFF7FEFF 		bl	FS_OS_Unlock
 2460              	.LVL249:
ARM GAS  /tmp/cccHmdnc.s 			page 114


 739:rtos/uC-FS/Source/fs_dev.c ****            *p_err = FS_ERR_DEV_ALREADY_OPEN;
 2461              		.loc 1 739 9 view .LVU767
 739:rtos/uC-FS/Source/fs_dev.c ****            *p_err = FS_ERR_DEV_ALREADY_OPEN;
 2462              		.loc 1 739 18 is_stmt 0 view .LVU768
 2463 006a B388     		ldrh	r3, [r6, #4]
 739:rtos/uC-FS/Source/fs_dev.c ****            *p_err = FS_ERR_DEV_ALREADY_OPEN;
 2464              		.loc 1 739 12 view .LVU769
 2465 006c 052B     		cmp	r3, #5
 2466 006e 03D0     		beq	.L225
 742:rtos/uC-FS/Source/fs_dev.c ****         }
 2467              		.loc 1 742 12 is_stmt 1 view .LVU770
 742:rtos/uC-FS/Source/fs_dev.c ****         }
 2468              		.loc 1 742 19 is_stmt 0 view .LVU771
 2469 0070 4FF49D73 		mov	r3, #314
 2470 0074 2B80     		strh	r3, [r5]	@ movhi
 744:rtos/uC-FS/Source/fs_dev.c ****     }
 2471              		.loc 1 744 9 is_stmt 1 view .LVU772
 2472 0076 E0E7     		b	.L189
 2473              	.L225:
 740:rtos/uC-FS/Source/fs_dev.c ****         } else {
 2474              		.loc 1 740 12 view .LVU773
 740:rtos/uC-FS/Source/fs_dev.c ****         } else {
 2475              		.loc 1 740 19 is_stmt 0 view .LVU774
 2476 0078 40F22D13 		movw	r3, #301
 2477 007c 2B80     		strh	r3, [r5]	@ movhi
 2478 007e DCE7     		b	.L189
 2479              	.LVL250:
 2480              	.L196:
 750:rtos/uC-FS/Source/fs_dev.c ****     if (p_dev_drv == (FS_DEV_API *)0) {                         /* If dev drv NOT found (see Note #
 2481              		.loc 1 750 5 is_stmt 1 view .LVU775
 750:rtos/uC-FS/Source/fs_dev.c ****     if (p_dev_drv == (FS_DEV_API *)0) {                         /* If dev drv NOT found (see Note #
 2482              		.loc 1 750 17 is_stmt 0 view .LVU776
 2483 0080 02A8     		add	r0, sp, #8
 2484              	.LVL251:
 750:rtos/uC-FS/Source/fs_dev.c ****     if (p_dev_drv == (FS_DEV_API *)0) {                         /* If dev drv NOT found (see Note #
 2485              		.loc 1 750 17 view .LVU777
 2486 0082 FFF7FEFF 		bl	FS_DevDrvFind
 2487              	.LVL252:
 751:rtos/uC-FS/Source/fs_dev.c ****         FS_OS_Unlock();
 2488              		.loc 1 751 5 is_stmt 1 view .LVU778
 751:rtos/uC-FS/Source/fs_dev.c ****         FS_OS_Unlock();
 2489              		.loc 1 751 8 is_stmt 0 view .LVU779
 2490 0086 0746     		mov	r7, r0
 2491 0088 D8B1     		cbz	r0, .L226
 760:rtos/uC-FS/Source/fs_dev.c ****     if (p_dev == (FS_DEV *)0) {
 2492              		.loc 1 760 5 is_stmt 1 view .LVU780
 760:rtos/uC-FS/Source/fs_dev.c ****     if (p_dev == (FS_DEV *)0) {
 2493              		.loc 1 760 13 is_stmt 0 view .LVU781
 2494 008a FFF7FEFF 		bl	FSDev_ObjGet
 2495              	.LVL253:
 761:rtos/uC-FS/Source/fs_dev.c ****         FS_OS_Unlock();
 2496              		.loc 1 761 5 is_stmt 1 view .LVU782
 761:rtos/uC-FS/Source/fs_dev.c ****         FS_OS_Unlock();
 2497              		.loc 1 761 8 is_stmt 0 view .LVU783
 2498 008e 0646     		mov	r6, r0
 2499 0090 E8B1     		cbz	r0, .L227
 767:rtos/uC-FS/Source/fs_dev.c ****     p_dev->UnitNbr           = unit_nbr;
ARM GAS  /tmp/cccHmdnc.s 			page 115


 2500              		.loc 1 767 5 is_stmt 1 view .LVU784
 767:rtos/uC-FS/Source/fs_dev.c ****     p_dev->UnitNbr           = unit_nbr;
 2501              		.loc 1 767 30 is_stmt 0 view .LVU785
 2502 0092 0763     		str	r7, [r0, #48]
 768:rtos/uC-FS/Source/fs_dev.c ****     p_dev->State             = FS_DEV_STATE_OPENING;
 2503              		.loc 1 768 5 is_stmt 1 view .LVU786
 768:rtos/uC-FS/Source/fs_dev.c ****     p_dev->State             = FS_DEV_STATE_OPENING;
 2504              		.loc 1 768 30 is_stmt 0 view .LVU787
 2505 0094 BDF80430 		ldrh	r3, [sp, #4]
 2506 0098 0384     		strh	r3, [r0, #32]	@ movhi
 769:rtos/uC-FS/Source/fs_dev.c ****     p_dev->RefCnt            = 1u;
 2507              		.loc 1 769 5 is_stmt 1 view .LVU788
 769:rtos/uC-FS/Source/fs_dev.c ****     p_dev->RefCnt            = 1u;
 2508              		.loc 1 769 30 is_stmt 0 view .LVU789
 2509 009a 0223     		movs	r3, #2
 2510 009c 8380     		strh	r3, [r0, #4]	@ movhi
 770:rtos/uC-FS/Source/fs_dev.c ****     (void)Str_Copy_N(&p_dev->Name[0], name_dev, FS_CFG_MAX_DEV_NAME_LEN);
 2511              		.loc 1 770 5 is_stmt 1 view .LVU790
 770:rtos/uC-FS/Source/fs_dev.c ****     (void)Str_Copy_N(&p_dev->Name[0], name_dev, FS_CFG_MAX_DEV_NAME_LEN);
 2512              		.loc 1 770 30 is_stmt 0 view .LVU791
 2513 009e 0123     		movs	r3, #1
 2514 00a0 8360     		str	r3, [r0, #8]
 771:rtos/uC-FS/Source/fs_dev.c ****     FS_OS_Unlock();
 2515              		.loc 1 771 5 is_stmt 1 view .LVU792
 771:rtos/uC-FS/Source/fs_dev.c ****     FS_OS_Unlock();
 2516              		.loc 1 771 11 is_stmt 0 view .LVU793
 2517 00a2 0F22     		movs	r2, #15
 2518 00a4 2146     		mov	r1, r4
 2519 00a6 1030     		adds	r0, r0, #16
 2520              	.LVL254:
 771:rtos/uC-FS/Source/fs_dev.c ****     FS_OS_Unlock();
 2521              		.loc 1 771 11 view .LVU794
 2522 00a8 FFF7FEFF 		bl	Str_Copy_N
 2523              	.LVL255:
 772:rtos/uC-FS/Source/fs_dev.c **** 
 2524              		.loc 1 772 5 is_stmt 1 view .LVU795
 2525 00ac FFF7FEFF 		bl	FS_OS_Unlock
 2526              	.LVL256:
 777:rtos/uC-FS/Source/fs_dev.c ****     if (lock_success != DEF_YES) {
 2527              		.loc 1 777 5 view .LVU796
 777:rtos/uC-FS/Source/fs_dev.c ****     if (lock_success != DEF_YES) {
 2528              		.loc 1 777 20 is_stmt 0 view .LVU797
 2529 00b0 3046     		mov	r0, r6
 2530 00b2 FFF7FEFF 		bl	FSDev_Lock
 2531              	.LVL257:
 778:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_OS_LOCK;
 2532              		.loc 1 778 5 is_stmt 1 view .LVU798
 778:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_OS_LOCK;
 2533              		.loc 1 778 8 is_stmt 0 view .LVU799
 2534 00b6 0128     		cmp	r0, #1
 2535 00b8 0FD0     		beq	.L201
 779:rtos/uC-FS/Source/fs_dev.c ****         return;
 2536              		.loc 1 779 8 is_stmt 1 view .LVU800
 779:rtos/uC-FS/Source/fs_dev.c ****         return;
 2537              		.loc 1 779 15 is_stmt 0 view .LVU801
 2538 00ba 40F2DD53 		movw	r3, #1501
 2539 00be 2B80     		strh	r3, [r5]	@ movhi
ARM GAS  /tmp/cccHmdnc.s 			page 116


 780:rtos/uC-FS/Source/fs_dev.c ****     }
 2540              		.loc 1 780 9 is_stmt 1 view .LVU802
 2541 00c0 BBE7     		b	.L189
 2542              	.LVL258:
 2543              	.L226:
 752:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_DEV_INVALID_NAME;                        /* ... rtn err.                    
 2544              		.loc 1 752 9 view .LVU803
 2545 00c2 FFF7FEFF 		bl	FS_OS_Unlock
 2546              	.LVL259:
 753:rtos/uC-FS/Source/fs_dev.c ****         return;
 2547              		.loc 1 753 8 view .LVU804
 753:rtos/uC-FS/Source/fs_dev.c ****         return;
 2548              		.loc 1 753 15 is_stmt 0 view .LVU805
 2549 00c6 40F23D13 		movw	r3, #317
 2550 00ca 2B80     		strh	r3, [r5]	@ movhi
 754:rtos/uC-FS/Source/fs_dev.c ****     }
 2551              		.loc 1 754 9 is_stmt 1 view .LVU806
 2552 00cc B5E7     		b	.L189
 2553              	.LVL260:
 2554              	.L227:
 762:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_DEV_NONE_AVAIL;
 2555              		.loc 1 762 9 view .LVU807
 2556 00ce FFF7FEFF 		bl	FS_OS_Unlock
 2557              	.LVL261:
 763:rtos/uC-FS/Source/fs_dev.c ****         return;
 2558              		.loc 1 763 8 view .LVU808
 763:rtos/uC-FS/Source/fs_dev.c ****         return;
 2559              		.loc 1 763 15 is_stmt 0 view .LVU809
 2560 00d2 4FF4A273 		mov	r3, #324
 2561 00d6 2B80     		strh	r3, [r5]	@ movhi
 764:rtos/uC-FS/Source/fs_dev.c ****     }
 2562              		.loc 1 764 9 is_stmt 1 view .LVU810
 2563 00d8 AFE7     		b	.L189
 2564              	.LVL262:
 2565              	.L201:
 786:rtos/uC-FS/Source/fs_dev.c **** 
 2566              		.loc 1 786 5 view .LVU811
 786:rtos/uC-FS/Source/fs_dev.c **** 
 2567              		.loc 1 786 14 is_stmt 0 view .LVU812
 2568 00da BB68     		ldr	r3, [r7, #8]
 786:rtos/uC-FS/Source/fs_dev.c **** 
 2569              		.loc 1 786 5 view .LVU813
 2570 00dc 2A46     		mov	r2, r5
 2571 00de 4146     		mov	r1, r8
 2572 00e0 3046     		mov	r0, r6
 2573              	.LVL263:
 786:rtos/uC-FS/Source/fs_dev.c **** 
 2574              		.loc 1 786 5 view .LVU814
 2575 00e2 9847     		blx	r3
 2576              	.LVL264:
 789:rtos/uC-FS/Source/fs_dev.c ****         case FS_ERR_NONE:                                       /* See Note #2a.                   
 2577              		.loc 1 789 5 is_stmt 1 view .LVU815
 789:rtos/uC-FS/Source/fs_dev.c ****         case FS_ERR_NONE:                                       /* See Note #2a.                   
 2578              		.loc 1 789 13 is_stmt 0 view .LVU816
 2579 00e4 2B88     		ldrh	r3, [r5]
 789:rtos/uC-FS/Source/fs_dev.c ****         case FS_ERR_NONE:                                       /* See Note #2a.                   
 2580              		.loc 1 789 5 view .LVU817
ARM GAS  /tmp/cccHmdnc.s 			page 117


 2581 00e6 B3F5A87F 		cmp	r3, #336
 2582 00ea 28D2     		bcs	.L202
 2583 00ec B3F5967F 		cmp	r3, #300
 2584 00f0 17D9     		bls	.L228
 2585 00f2 A3F22D13 		subw	r3, r3, #301
 2586 00f6 222B     		cmp	r3, #34
 2587 00f8 21D8     		bhi	.L202
 2588 00fa DFE803F0 		tbb	[pc, r3]
 2589              	.L207:
 2590 00fe 23       		.byte	(.L205-.L207)/2
 2591 00ff 20       		.byte	(.L202-.L207)/2
 2592 0100 20       		.byte	(.L202-.L207)/2
 2593 0101 20       		.byte	(.L202-.L207)/2
 2594 0102 20       		.byte	(.L202-.L207)/2
 2595 0103 20       		.byte	(.L202-.L207)/2
 2596 0104 20       		.byte	(.L202-.L207)/2
 2597 0105 20       		.byte	(.L202-.L207)/2
 2598 0106 20       		.byte	(.L202-.L207)/2
 2599 0107 20       		.byte	(.L202-.L207)/2
 2600 0108 23       		.byte	(.L205-.L207)/2
 2601 0109 20       		.byte	(.L202-.L207)/2
 2602 010a 20       		.byte	(.L202-.L207)/2
 2603 010b 64       		.byte	(.L206-.L207)/2
 2604 010c 23       		.byte	(.L205-.L207)/2
 2605 010d 20       		.byte	(.L202-.L207)/2
 2606 010e 20       		.byte	(.L202-.L207)/2
 2607 010f 20       		.byte	(.L202-.L207)/2
 2608 0110 20       		.byte	(.L202-.L207)/2
 2609 0111 20       		.byte	(.L202-.L207)/2
 2610 0112 20       		.byte	(.L202-.L207)/2
 2611 0113 23       		.byte	(.L205-.L207)/2
 2612 0114 76       		.byte	(.L208-.L207)/2
 2613 0115 20       		.byte	(.L202-.L207)/2
 2614 0116 20       		.byte	(.L202-.L207)/2
 2615 0117 76       		.byte	(.L208-.L207)/2
 2616 0118 76       		.byte	(.L208-.L207)/2
 2617 0119 20       		.byte	(.L202-.L207)/2
 2618 011a 20       		.byte	(.L202-.L207)/2
 2619 011b 20       		.byte	(.L202-.L207)/2
 2620 011c 20       		.byte	(.L202-.L207)/2
 2621 011d 64       		.byte	(.L206-.L207)/2
 2622 011e 20       		.byte	(.L202-.L207)/2
 2623 011f 20       		.byte	(.L202-.L207)/2
 2624 0120 64       		.byte	(.L206-.L207)/2
 2625 0121 00       		.p2align 1
 2626              	.L228:
 2627 0122 53B9     		cbnz	r3, .L229
 791:rtos/uC-FS/Source/fs_dev.c ****              if (query_err != FS_ERR_NONE) {
 2628              		.loc 1 791 14 is_stmt 1 view .LVU818
 791:rtos/uC-FS/Source/fs_dev.c ****              if (query_err != FS_ERR_NONE) {
 2629              		.loc 1 791 23 is_stmt 0 view .LVU819
 2630 0124 BB69     		ldr	r3, [r7, #24]
 791:rtos/uC-FS/Source/fs_dev.c ****              if (query_err != FS_ERR_NONE) {
 2631              		.loc 1 791 14 view .LVU820
 2632 0126 0DF10602 		add	r2, sp, #6
 2633 012a 06A9     		add	r1, sp, #24
 2634 012c 3046     		mov	r0, r6
ARM GAS  /tmp/cccHmdnc.s 			page 118


 2635 012e 9847     		blx	r3
 2636              	.LVL265:
 792:rtos/uC-FS/Source/fs_dev.c ****                 *p_err = query_err;
 2637              		.loc 1 792 14 is_stmt 1 view .LVU821
 792:rtos/uC-FS/Source/fs_dev.c ****                 *p_err = query_err;
 2638              		.loc 1 792 28 is_stmt 0 view .LVU822
 2639 0130 BDF80630 		ldrh	r3, [sp, #6]
 792:rtos/uC-FS/Source/fs_dev.c ****                 *p_err = query_err;
 2640              		.loc 1 792 17 view .LVU823
 2641 0134 03B3     		cbz	r3, .L209
 793:rtos/uC-FS/Source/fs_dev.c ****                  break;
 2642              		.loc 1 793 17 is_stmt 1 view .LVU824
 793:rtos/uC-FS/Source/fs_dev.c ****                  break;
 2643              		.loc 1 793 24 is_stmt 0 view .LVU825
 2644 0136 2B80     		strh	r3, [r5]	@ movhi
 794:rtos/uC-FS/Source/fs_dev.c ****              }
 2645              		.loc 1 794 18 is_stmt 1 view .LVU826
 2646 0138 04E0     		b	.L205
 2647              	.L229:
 789:rtos/uC-FS/Source/fs_dev.c ****         case FS_ERR_NONE:                                       /* See Note #2a.                   
 2648              		.loc 1 789 5 is_stmt 0 view .LVU827
 2649 013a 112B     		cmp	r3, #17
 2650 013c 02D0     		beq	.L205
 2651              	.L202:
 849:rtos/uC-FS/Source/fs_dev.c ****              break;
 2652              		.loc 1 849 13 is_stmt 1 view .LVU828
 849:rtos/uC-FS/Source/fs_dev.c ****              break;
 2653              		.loc 1 849 20 is_stmt 0 view .LVU829
 2654 013e 4FF4A573 		mov	r3, #330
 2655 0142 2B80     		strh	r3, [r5]	@ movhi
 850:rtos/uC-FS/Source/fs_dev.c ****     }
 2656              		.loc 1 850 14 is_stmt 1 view .LVU830
 2657              	.LVL266:
 2658              	.L205:
 856:rtos/uC-FS/Source/fs_dev.c ****         case FS_ERR_NONE:
 2659              		.loc 1 856 5 view .LVU831
 856:rtos/uC-FS/Source/fs_dev.c ****         case FS_ERR_NONE:
 2660              		.loc 1 856 13 is_stmt 0 view .LVU832
 2661 0144 2B88     		ldrh	r3, [r5]
 856:rtos/uC-FS/Source/fs_dev.c ****         case FS_ERR_NONE:
 2662              		.loc 1 856 5 view .LVU833
 2663 0146 002B     		cmp	r3, #0
 2664 0148 61D0     		beq	.L215
 2665 014a B3F5A87F 		cmp	r3, #336
 2666 014e 62D2     		bcs	.L216
 2667 0150 B3F59D7F 		cmp	r3, #314
 2668 0154 5FD3     		bcc	.L216
 2669 0156 A3F59D73 		sub	r3, r3, #314
 2670 015a 152B     		cmp	r3, #21
 2671 015c 5BD8     		bhi	.L216
 2672 015e DFE803F0 		tbb	[pc, r3]
 2673              	.L217:
 2674 0162 56       		.byte	(.L215-.L217)/2
 2675 0163 5A       		.byte	(.L216-.L217)/2
 2676 0164 5A       		.byte	(.L216-.L217)/2
 2677 0165 5A       		.byte	(.L216-.L217)/2
 2678 0166 5A       		.byte	(.L216-.L217)/2
ARM GAS  /tmp/cccHmdnc.s 			page 119


 2679 0167 5A       		.byte	(.L216-.L217)/2
 2680 0168 5A       		.byte	(.L216-.L217)/2
 2681 0169 5A       		.byte	(.L216-.L217)/2
 2682 016a 5A       		.byte	(.L216-.L217)/2
 2683 016b 56       		.byte	(.L215-.L217)/2
 2684 016c 5A       		.byte	(.L216-.L217)/2
 2685 016d 5A       		.byte	(.L216-.L217)/2
 2686 016e 56       		.byte	(.L215-.L217)/2
 2687 016f 56       		.byte	(.L215-.L217)/2
 2688 0170 5A       		.byte	(.L216-.L217)/2
 2689 0171 5A       		.byte	(.L216-.L217)/2
 2690 0172 5A       		.byte	(.L216-.L217)/2
 2691 0173 5A       		.byte	(.L216-.L217)/2
 2692 0174 56       		.byte	(.L215-.L217)/2
 2693 0175 5A       		.byte	(.L216-.L217)/2
 2694 0176 5A       		.byte	(.L216-.L217)/2
 2695 0177 56       		.byte	(.L215-.L217)/2
 2696              	.LVL267:
 2697              		.p2align 1
 2698              	.L209:
 796:rtos/uC-FS/Source/fs_dev.c **** 
 2699              		.loc 1 796 14 is_stmt 1 view .LVU834
 796:rtos/uC-FS/Source/fs_dev.c **** 
 2700              		.loc 1 796 37 is_stmt 0 view .LVU835
 2701 0178 9DF82430 		ldrb	r3, [sp, #36]	@ zero_extendqisi2
 796:rtos/uC-FS/Source/fs_dev.c **** 
 2702              		.loc 1 796 27 view .LVU836
 2703 017c 86F82C30 		strb	r3, [r6, #44]
 799:rtos/uC-FS/Source/fs_dev.c ****                  if (FS_DEV_IS_VALID_SEC_SIZE(dev_info.SecSize) == DEF_YES) {
 2704              		.loc 1 799 14 is_stmt 1 view .LVU837
 799:rtos/uC-FS/Source/fs_dev.c ****                  if (FS_DEV_IS_VALID_SEC_SIZE(dev_info.SecSize) == DEF_YES) {
 2705              		.loc 1 799 18 is_stmt 0 view .LVU838
 2706 0180 079B     		ldr	r3, [sp, #28]
 799:rtos/uC-FS/Source/fs_dev.c ****                  if (FS_DEV_IS_VALID_SEC_SIZE(dev_info.SecSize) == DEF_YES) {
 2707              		.loc 1 799 17 view .LVU839
 2708 0182 1BB9     		cbnz	r3, .L230
 809:rtos/uC-FS/Source/fs_dev.c ****              }
 2709              		.loc 1 809 17 is_stmt 1 view .LVU840
 809:rtos/uC-FS/Source/fs_dev.c ****              }
 2710              		.loc 1 809 24 is_stmt 0 view .LVU841
 2711 0184 40F24113 		movw	r3, #321
 2712 0188 2B80     		strh	r3, [r5]	@ movhi
 2713 018a DBE7     		b	.L205
 2714              	.L230:
 800:rtos/uC-FS/Source/fs_dev.c ****                      p_dev->State   = FS_DEV_STATE_LOW_FMT_VALID;
 2715              		.loc 1 800 18 is_stmt 1 view .LVU842
 800:rtos/uC-FS/Source/fs_dev.c ****                      p_dev->State   = FS_DEV_STATE_LOW_FMT_VALID;
 2716              		.loc 1 800 22 is_stmt 0 view .LVU843
 2717 018c 089C     		ldr	r4, [sp, #32]
 2718              	.LVL268:
 800:rtos/uC-FS/Source/fs_dev.c ****                      p_dev->State   = FS_DEV_STATE_LOW_FMT_VALID;
 2719              		.loc 1 800 22 view .LVU844
 2720 018e FFF7FEFF 		bl	FS_MaxSecSizeGet
 2721              	.LVL269:
 800:rtos/uC-FS/Source/fs_dev.c ****                      p_dev->State   = FS_DEV_STATE_LOW_FMT_VALID;
 2722              		.loc 1 800 21 view .LVU845
 2723 0192 8442     		cmp	r4, r0
ARM GAS  /tmp/cccHmdnc.s 			page 120


 2724 0194 0CD8     		bhi	.L211
 800:rtos/uC-FS/Source/fs_dev.c ****                      p_dev->State   = FS_DEV_STATE_LOW_FMT_VALID;
 2725              		.loc 1 800 22 discriminator 1 view .LVU846
 2726 0196 089B     		ldr	r3, [sp, #32]
 800:rtos/uC-FS/Source/fs_dev.c ****                      p_dev->State   = FS_DEV_STATE_LOW_FMT_VALID;
 2727              		.loc 1 800 65 discriminator 1 view .LVU847
 2728 0198 B3F5007F 		cmp	r3, #512
 2729 019c 0CD0     		beq	.L212
 800:rtos/uC-FS/Source/fs_dev.c ****                      p_dev->State   = FS_DEV_STATE_LOW_FMT_VALID;
 2730              		.loc 1 800 22 discriminator 2 view .LVU848
 2731 019e B3F5806F 		cmp	r3, #1024
 2732 01a2 09D0     		beq	.L212
 800:rtos/uC-FS/Source/fs_dev.c ****                      p_dev->State   = FS_DEV_STATE_LOW_FMT_VALID;
 2733              		.loc 1 800 22 discriminator 3 view .LVU849
 2734 01a4 B3F5006F 		cmp	r3, #2048
 2735 01a8 06D0     		beq	.L212
 800:rtos/uC-FS/Source/fs_dev.c ****                      p_dev->State   = FS_DEV_STATE_LOW_FMT_VALID;
 2736              		.loc 1 800 22 discriminator 4 view .LVU850
 2737 01aa B3F5805F 		cmp	r3, #4096
 2738 01ae 03D0     		beq	.L212
 2739              	.L211:
 805:rtos/uC-FS/Source/fs_dev.c ****                     *p_err = FS_ERR_DEV_INVALID_SEC_SIZE;
 2740              		.loc 1 805 107 is_stmt 1 view .LVU851
 806:rtos/uC-FS/Source/fs_dev.c ****                  }
 2741              		.loc 1 806 21 view .LVU852
 806:rtos/uC-FS/Source/fs_dev.c ****                  }
 2742              		.loc 1 806 28 is_stmt 0 view .LVU853
 2743 01b0 4FF4A073 		mov	r3, #320
 2744 01b4 2B80     		strh	r3, [r5]	@ movhi
 2745 01b6 C5E7     		b	.L205
 2746              	.L212:
 801:rtos/uC-FS/Source/fs_dev.c ****                      p_dev->Size    = dev_info.Size;
 2747              		.loc 1 801 22 is_stmt 1 view .LVU854
 801:rtos/uC-FS/Source/fs_dev.c ****                      p_dev->Size    = dev_info.Size;
 2748              		.loc 1 801 37 is_stmt 0 view .LVU855
 2749 01b8 0523     		movs	r3, #5
 2750 01ba B380     		strh	r3, [r6, #4]	@ movhi
 802:rtos/uC-FS/Source/fs_dev.c ****                      p_dev->SecSize = dev_info.SecSize;
 2751              		.loc 1 802 22 is_stmt 1 view .LVU856
 802:rtos/uC-FS/Source/fs_dev.c ****                      p_dev->SecSize = dev_info.SecSize;
 2752              		.loc 1 802 47 is_stmt 0 view .LVU857
 2753 01bc 079B     		ldr	r3, [sp, #28]
 802:rtos/uC-FS/Source/fs_dev.c ****                      p_dev->SecSize = dev_info.SecSize;
 2754              		.loc 1 802 37 view .LVU858
 2755 01be 7362     		str	r3, [r6, #36]
 803:rtos/uC-FS/Source/fs_dev.c ****                  } else {
 2756              		.loc 1 803 22 is_stmt 1 view .LVU859
 803:rtos/uC-FS/Source/fs_dev.c ****                  } else {
 2757              		.loc 1 803 47 is_stmt 0 view .LVU860
 2758 01c0 089B     		ldr	r3, [sp, #32]
 803:rtos/uC-FS/Source/fs_dev.c ****                  } else {
 2759              		.loc 1 803 37 view .LVU861
 2760 01c2 B362     		str	r3, [r6, #40]
 2761 01c4 BEE7     		b	.L205
 2762              	.LVL270:
 2763              	.L206:
 817:rtos/uC-FS/Source/fs_dev.c ****              if (query_err != FS_ERR_NONE) {
ARM GAS  /tmp/cccHmdnc.s 			page 121


 2764              		.loc 1 817 14 is_stmt 1 view .LVU862
 817:rtos/uC-FS/Source/fs_dev.c ****              if (query_err != FS_ERR_NONE) {
 2765              		.loc 1 817 23 is_stmt 0 view .LVU863
 2766 01c6 BB69     		ldr	r3, [r7, #24]
 817:rtos/uC-FS/Source/fs_dev.c ****              if (query_err != FS_ERR_NONE) {
 2767              		.loc 1 817 14 view .LVU864
 2768 01c8 0DF10602 		add	r2, sp, #6
 2769 01cc 06A9     		add	r1, sp, #24
 2770 01ce 3046     		mov	r0, r6
 2771 01d0 9847     		blx	r3
 2772              	.LVL271:
 818:rtos/uC-FS/Source/fs_dev.c ****                 *p_err = query_err;
 2773              		.loc 1 818 14 is_stmt 1 view .LVU865
 818:rtos/uC-FS/Source/fs_dev.c ****                 *p_err = query_err;
 2774              		.loc 1 818 28 is_stmt 0 view .LVU866
 2775 01d2 BDF80630 		ldrh	r3, [sp, #6]
 818:rtos/uC-FS/Source/fs_dev.c ****                 *p_err = query_err;
 2776              		.loc 1 818 17 view .LVU867
 2777 01d6 0BB1     		cbz	r3, .L213
 819:rtos/uC-FS/Source/fs_dev.c ****                  break;
 2778              		.loc 1 819 17 is_stmt 1 view .LVU868
 819:rtos/uC-FS/Source/fs_dev.c ****                  break;
 2779              		.loc 1 819 24 is_stmt 0 view .LVU869
 2780 01d8 2B80     		strh	r3, [r5]	@ movhi
 820:rtos/uC-FS/Source/fs_dev.c ****              }
 2781              		.loc 1 820 18 is_stmt 1 view .LVU870
 2782 01da B3E7     		b	.L205
 2783              	.L213:
 822:rtos/uC-FS/Source/fs_dev.c ****              p_dev->State = FS_DEV_STATE_PRESENT;
 2784              		.loc 1 822 14 view .LVU871
 822:rtos/uC-FS/Source/fs_dev.c ****              p_dev->State = FS_DEV_STATE_PRESENT;
 2785              		.loc 1 822 37 is_stmt 0 view .LVU872
 2786 01dc 9DF82430 		ldrb	r3, [sp, #36]	@ zero_extendqisi2
 822:rtos/uC-FS/Source/fs_dev.c ****              p_dev->State = FS_DEV_STATE_PRESENT;
 2787              		.loc 1 822 27 view .LVU873
 2788 01e0 86F82C30 		strb	r3, [r6, #44]
 823:rtos/uC-FS/Source/fs_dev.c ****              break;
 2789              		.loc 1 823 14 is_stmt 1 view .LVU874
 823:rtos/uC-FS/Source/fs_dev.c ****              break;
 2790              		.loc 1 823 27 is_stmt 0 view .LVU875
 2791 01e4 0423     		movs	r3, #4
 2792 01e6 B380     		strh	r3, [r6, #4]	@ movhi
 824:rtos/uC-FS/Source/fs_dev.c **** 
 2793              		.loc 1 824 14 is_stmt 1 view .LVU876
 2794 01e8 ACE7     		b	.L205
 2795              	.L208:
 830:rtos/uC-FS/Source/fs_dev.c ****              if (query_err != FS_ERR_NONE) {
 2796              		.loc 1 830 14 view .LVU877
 830:rtos/uC-FS/Source/fs_dev.c ****              if (query_err != FS_ERR_NONE) {
 2797              		.loc 1 830 23 is_stmt 0 view .LVU878
 2798 01ea BB69     		ldr	r3, [r7, #24]
 830:rtos/uC-FS/Source/fs_dev.c ****              if (query_err != FS_ERR_NONE) {
 2799              		.loc 1 830 14 view .LVU879
 2800 01ec 0DF10602 		add	r2, sp, #6
 2801 01f0 06A9     		add	r1, sp, #24
 2802 01f2 3046     		mov	r0, r6
 2803 01f4 9847     		blx	r3
ARM GAS  /tmp/cccHmdnc.s 			page 122


 2804              	.LVL272:
 831:rtos/uC-FS/Source/fs_dev.c ****                 *p_err = query_err;
 2805              		.loc 1 831 14 is_stmt 1 view .LVU880
 831:rtos/uC-FS/Source/fs_dev.c ****                 *p_err = query_err;
 2806              		.loc 1 831 28 is_stmt 0 view .LVU881
 2807 01f6 BDF80630 		ldrh	r3, [sp, #6]
 831:rtos/uC-FS/Source/fs_dev.c ****                 *p_err = query_err;
 2808              		.loc 1 831 17 view .LVU882
 2809 01fa 0BB1     		cbz	r3, .L214
 832:rtos/uC-FS/Source/fs_dev.c ****                  break;
 2810              		.loc 1 832 17 is_stmt 1 view .LVU883
 832:rtos/uC-FS/Source/fs_dev.c ****                  break;
 2811              		.loc 1 832 24 is_stmt 0 view .LVU884
 2812 01fc 2B80     		strh	r3, [r5]	@ movhi
 833:rtos/uC-FS/Source/fs_dev.c ****              }
 2813              		.loc 1 833 18 is_stmt 1 view .LVU885
 2814 01fe A1E7     		b	.L205
 2815              	.L214:
 835:rtos/uC-FS/Source/fs_dev.c ****              p_dev->State = FS_DEV_STATE_OPEN;
 2816              		.loc 1 835 14 view .LVU886
 835:rtos/uC-FS/Source/fs_dev.c ****              p_dev->State = FS_DEV_STATE_OPEN;
 2817              		.loc 1 835 37 is_stmt 0 view .LVU887
 2818 0200 9DF82430 		ldrb	r3, [sp, #36]	@ zero_extendqisi2
 835:rtos/uC-FS/Source/fs_dev.c ****              p_dev->State = FS_DEV_STATE_OPEN;
 2819              		.loc 1 835 27 view .LVU888
 2820 0204 86F82C30 		strb	r3, [r6, #44]
 836:rtos/uC-FS/Source/fs_dev.c ****              break;
 2821              		.loc 1 836 14 is_stmt 1 view .LVU889
 836:rtos/uC-FS/Source/fs_dev.c ****              break;
 2822              		.loc 1 836 27 is_stmt 0 view .LVU890
 2823 0208 0323     		movs	r3, #3
 2824 020a B380     		strh	r3, [r6, #4]	@ movhi
 837:rtos/uC-FS/Source/fs_dev.c **** 
 2825              		.loc 1 837 14 is_stmt 1 view .LVU891
 2826 020c 9AE7     		b	.L205
 2827              	.LVL273:
 2828              	.L215:
 864:rtos/uC-FS/Source/fs_dev.c ****              break;
 2829              		.loc 1 864 14 view .LVU892
 2830 020e 3046     		mov	r0, r6
 2831 0210 FFF7FEFF 		bl	FSDev_Unlock
 2832              	.LVL274:
 865:rtos/uC-FS/Source/fs_dev.c **** 
 2833              		.loc 1 865 14 view .LVU893
 2834 0214 11E7     		b	.L189
 2835              	.L216:
 876:rtos/uC-FS/Source/fs_dev.c ****              p_dev->State = FS_DEV_STATE_CLOSING;
 2836              		.loc 1 876 14 view .LVU894
 876:rtos/uC-FS/Source/fs_dev.c ****              p_dev->State = FS_DEV_STATE_CLOSING;
 2837              		.loc 1 876 23 is_stmt 0 view .LVU895
 2838 0216 FB68     		ldr	r3, [r7, #12]
 876:rtos/uC-FS/Source/fs_dev.c ****              p_dev->State = FS_DEV_STATE_CLOSING;
 2839              		.loc 1 876 14 view .LVU896
 2840 0218 3046     		mov	r0, r6
 2841 021a 9847     		blx	r3
 2842              	.LVL275:
 877:rtos/uC-FS/Source/fs_dev.c ****              FSDev_ReleaseUnlock(p_dev);
ARM GAS  /tmp/cccHmdnc.s 			page 123


 2843              		.loc 1 877 14 is_stmt 1 view .LVU897
 877:rtos/uC-FS/Source/fs_dev.c ****              FSDev_ReleaseUnlock(p_dev);
 2844              		.loc 1 877 27 is_stmt 0 view .LVU898
 2845 021c 0123     		movs	r3, #1
 2846 021e B380     		strh	r3, [r6, #4]	@ movhi
 878:rtos/uC-FS/Source/fs_dev.c ****              break;
 2847              		.loc 1 878 14 is_stmt 1 view .LVU899
 2848 0220 3046     		mov	r0, r6
 2849 0222 FFF7FEFF 		bl	FSDev_ReleaseUnlock
 2850              	.LVL276:
 879:rtos/uC-FS/Source/fs_dev.c ****     }
 2851              		.loc 1 879 14 view .LVU900
 2852 0226 08E7     		b	.L189
 2853              		.cfi_endproc
 2854              	.LFE3:
 2856              		.section	.text.FSDev_QueryLocked,"ax",%progbits
 2857              		.align	1
 2858              		.global	FSDev_QueryLocked
 2859              		.syntax unified
 2860              		.thumb
 2861              		.thumb_func
 2862              		.fpu fpv4-sp-d16
 2864              	FSDev_QueryLocked:
 2865              	.LVL277:
 2866              	.LFB23:
2343:rtos/uC-FS/Source/fs_dev.c ****                                                                 /* ------------------- GET DEV INFO
 2867              		.loc 1 2343 1 view -0
 2868              		.cfi_startproc
 2869              		@ args = 0, pretend = 0, frame = 0
 2870              		@ frame_needed = 0, uses_anonymous_args = 0
2343:rtos/uC-FS/Source/fs_dev.c ****                                                                 /* ------------------- GET DEV INFO
 2871              		.loc 1 2343 1 is_stmt 0 view .LVU902
 2872 0000 70B5     		push	{r4, r5, r6, lr}
 2873              	.LCFI48:
 2874              		.cfi_def_cfa_offset 16
 2875              		.cfi_offset 4, -16
 2876              		.cfi_offset 5, -12
 2877              		.cfi_offset 6, -8
 2878              		.cfi_offset 14, -4
 2879 0002 0446     		mov	r4, r0
 2880 0004 0D46     		mov	r5, r1
 2881 0006 1646     		mov	r6, r2
2345:rtos/uC-FS/Source/fs_dev.c ****                             p_info,
 2882              		.loc 1 2345 5 is_stmt 1 view .LVU903
2345:rtos/uC-FS/Source/fs_dev.c ****                             p_info,
 2883              		.loc 1 2345 10 is_stmt 0 view .LVU904
 2884 0008 036B     		ldr	r3, [r0, #48]
2345:rtos/uC-FS/Source/fs_dev.c ****                             p_info,
 2885              		.loc 1 2345 21 view .LVU905
 2886 000a 9B69     		ldr	r3, [r3, #24]
2345:rtos/uC-FS/Source/fs_dev.c ****                             p_info,
 2887              		.loc 1 2345 5 view .LVU906
 2888 000c 9847     		blx	r3
 2889              	.LVL278:
2352:rtos/uC-FS/Source/fs_dev.c ****     p_info->State = p_dev->State;
 2890              		.loc 1 2352 5 is_stmt 1 view .LVU907
 2891 000e 3188     		ldrh	r1, [r6]
ARM GAS  /tmp/cccHmdnc.s 			page 124


 2892 0010 2046     		mov	r0, r4
 2893 0012 FFF7FEFF 		bl	FSDev_HandleErr
 2894              	.LVL279:
2353:rtos/uC-FS/Source/fs_dev.c **** }
 2895              		.loc 1 2353 5 view .LVU908
2353:rtos/uC-FS/Source/fs_dev.c **** }
 2896              		.loc 1 2353 26 is_stmt 0 view .LVU909
 2897 0016 A388     		ldrh	r3, [r4, #4]
2353:rtos/uC-FS/Source/fs_dev.c **** }
 2898              		.loc 1 2353 19 view .LVU910
 2899 0018 2B80     		strh	r3, [r5]	@ movhi
2354:rtos/uC-FS/Source/fs_dev.c **** 
 2900              		.loc 1 2354 1 view .LVU911
 2901 001a 70BD     		pop	{r4, r5, r6, pc}
2354:rtos/uC-FS/Source/fs_dev.c **** 
 2902              		.loc 1 2354 1 view .LVU912
 2903              		.cfi_endproc
 2904              	.LFE23:
 2906              		.section	.text.FSDev_RdLocked,"ax",%progbits
 2907              		.align	1
 2908              		.global	FSDev_RdLocked
 2909              		.syntax unified
 2910              		.thumb
 2911              		.thumb_func
 2912              		.fpu fpv4-sp-d16
 2914              	FSDev_RdLocked:
 2915              	.LVL280:
 2916              	.LFB24:
2398:rtos/uC-FS/Source/fs_dev.c ****     FS_SEC_QTY  size;
 2917              		.loc 1 2398 1 is_stmt 1 view -0
 2918              		.cfi_startproc
 2919              		@ args = 4, pretend = 0, frame = 0
 2920              		@ frame_needed = 0, uses_anonymous_args = 0
2398:rtos/uC-FS/Source/fs_dev.c ****     FS_SEC_QTY  size;
 2921              		.loc 1 2398 1 is_stmt 0 view .LVU914
 2922 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 2923              	.LCFI49:
 2924              		.cfi_def_cfa_offset 20
 2925              		.cfi_offset 4, -20
 2926              		.cfi_offset 5, -16
 2927              		.cfi_offset 6, -12
 2928              		.cfi_offset 7, -8
 2929              		.cfi_offset 14, -4
 2930 0002 83B0     		sub	sp, sp, #12
 2931              	.LCFI50:
 2932              		.cfi_def_cfa_offset 32
 2933 0004 0446     		mov	r4, r0
 2934 0006 089D     		ldr	r5, [sp, #32]
2399:rtos/uC-FS/Source/fs_dev.c **** 
 2935              		.loc 1 2399 5 is_stmt 1 view .LVU915
2404:rtos/uC-FS/Source/fs_dev.c **** 
 2936              		.loc 1 2404 5 view .LVU916
2404:rtos/uC-FS/Source/fs_dev.c **** 
 2937              		.loc 1 2404 10 is_stmt 0 view .LVU917
 2938 0008 406A     		ldr	r0, [r0, #36]
 2939              	.LVL281:
2406:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_NONE;
ARM GAS  /tmp/cccHmdnc.s 			page 125


 2940              		.loc 1 2406 5 is_stmt 1 view .LVU918
2406:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_NONE;
 2941              		.loc 1 2406 8 is_stmt 0 view .LVU919
 2942 000a 83B1     		cbz	r3, .L239
 2943 000c 1E46     		mov	r6, r3
2411:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_DEV_INVALID_SEC_NBR;
 2944              		.loc 1 2411 5 is_stmt 1 view .LVU920
2411:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_DEV_INVALID_SEC_NBR;
 2945              		.loc 1 2411 8 is_stmt 0 view .LVU921
 2946 000e 9042     		cmp	r0, r2
 2947 0010 10D3     		bcc	.L240
2416:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_DEV_INVALID_SEC_NBR;
 2948              		.loc 1 2416 5 is_stmt 1 view .LVU922
2416:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_DEV_INVALID_SEC_NBR;
 2949              		.loc 1 2416 15 is_stmt 0 view .LVU923
 2950 0012 1344     		add	r3, r3, r2
 2951              	.LVL282:
2416:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_DEV_INVALID_SEC_NBR;
 2952              		.loc 1 2416 8 view .LVU924
 2953 0014 8342     		cmp	r3, r0
 2954 0016 11D8     		bhi	.L241
2424:rtos/uC-FS/Source/fs_dev.c ****                          p_dest,
 2955              		.loc 1 2424 5 is_stmt 1 view .LVU925
2424:rtos/uC-FS/Source/fs_dev.c ****                          p_dest,
 2956              		.loc 1 2424 10 is_stmt 0 view .LVU926
 2957 0018 236B     		ldr	r3, [r4, #48]
2424:rtos/uC-FS/Source/fs_dev.c ****                          p_dest,
 2958              		.loc 1 2424 21 view .LVU927
 2959 001a 1F69     		ldr	r7, [r3, #16]
2424:rtos/uC-FS/Source/fs_dev.c ****                          p_dest,
 2960              		.loc 1 2424 5 view .LVU928
 2961 001c 0095     		str	r5, [sp]
 2962 001e 3346     		mov	r3, r6
 2963 0020 2046     		mov	r0, r4
 2964              	.LVL283:
2424:rtos/uC-FS/Source/fs_dev.c ****                          p_dest,
 2965              		.loc 1 2424 5 view .LVU929
 2966 0022 B847     		blx	r7
 2967              	.LVL284:
2433:rtos/uC-FS/Source/fs_dev.c **** 
 2968              		.loc 1 2433 54 is_stmt 1 view .LVU930
2438:rtos/uC-FS/Source/fs_dev.c **** }
 2969              		.loc 1 2438 5 view .LVU931
 2970 0024 2988     		ldrh	r1, [r5]
 2971 0026 2046     		mov	r0, r4
 2972 0028 FFF7FEFF 		bl	FSDev_HandleErr
 2973              	.LVL285:
 2974 002c 00E0     		b	.L233
 2975              	.LVL286:
 2976              	.L239:
2407:rtos/uC-FS/Source/fs_dev.c ****         return;
 2977              		.loc 1 2407 8 view .LVU932
2407:rtos/uC-FS/Source/fs_dev.c ****         return;
 2978              		.loc 1 2407 15 is_stmt 0 view .LVU933
 2979 002e 2B80     		strh	r3, [r5]	@ movhi
2408:rtos/uC-FS/Source/fs_dev.c ****     }
 2980              		.loc 1 2408 9 is_stmt 1 view .LVU934
ARM GAS  /tmp/cccHmdnc.s 			page 126


 2981              	.LVL287:
 2982              	.L233:
2439:rtos/uC-FS/Source/fs_dev.c **** 
 2983              		.loc 1 2439 1 is_stmt 0 view .LVU935
 2984 0030 03B0     		add	sp, sp, #12
 2985              	.LCFI51:
 2986              		.cfi_remember_state
 2987              		.cfi_def_cfa_offset 20
 2988              		@ sp needed
 2989 0032 F0BD     		pop	{r4, r5, r6, r7, pc}
 2990              	.LVL288:
 2991              	.L240:
 2992              	.LCFI52:
 2993              		.cfi_restore_state
2412:rtos/uC-FS/Source/fs_dev.c ****         return;
 2994              		.loc 1 2412 8 is_stmt 1 view .LVU936
2412:rtos/uC-FS/Source/fs_dev.c ****         return;
 2995              		.loc 1 2412 15 is_stmt 0 view .LVU937
 2996 0034 40F23F13 		movw	r3, #319
 2997              	.LVL289:
2412:rtos/uC-FS/Source/fs_dev.c ****         return;
 2998              		.loc 1 2412 15 view .LVU938
 2999 0038 2B80     		strh	r3, [r5]	@ movhi
2413:rtos/uC-FS/Source/fs_dev.c ****     }
 3000              		.loc 1 2413 9 is_stmt 1 view .LVU939
 3001 003a F9E7     		b	.L233
 3002              	.L241:
2417:rtos/uC-FS/Source/fs_dev.c ****         return;
 3003              		.loc 1 2417 8 view .LVU940
2417:rtos/uC-FS/Source/fs_dev.c ****         return;
 3004              		.loc 1 2417 15 is_stmt 0 view .LVU941
 3005 003c 40F23F13 		movw	r3, #319
 3006 0040 2B80     		strh	r3, [r5]	@ movhi
2418:rtos/uC-FS/Source/fs_dev.c ****     }
 3007              		.loc 1 2418 9 is_stmt 1 view .LVU942
 3008 0042 F5E7     		b	.L233
 3009              		.cfi_endproc
 3010              	.LFE24:
 3012              		.section	.text.FSDev_RefreshLocked,"ax",%progbits
 3013              		.align	1
 3014              		.global	FSDev_RefreshLocked
 3015              		.syntax unified
 3016              		.thumb
 3017              		.thumb_func
 3018              		.fpu fpv4-sp-d16
 3020              	FSDev_RefreshLocked:
 3021              	.LVL290:
 3022              	.LFB25:
2478:rtos/uC-FS/Source/fs_dev.c ****     FS_DEV_INFO   dev_info;
 3023              		.loc 1 2478 1 view -0
 3024              		.cfi_startproc
 3025              		@ args = 0, pretend = 0, frame = 24
 3026              		@ frame_needed = 0, uses_anonymous_args = 0
2478:rtos/uC-FS/Source/fs_dev.c ****     FS_DEV_INFO   dev_info;
 3027              		.loc 1 2478 1 is_stmt 0 view .LVU944
 3028 0000 2DE9F043 		push	{r4, r5, r6, r7, r8, r9, lr}
 3029              	.LCFI53:
ARM GAS  /tmp/cccHmdnc.s 			page 127


 3030              		.cfi_def_cfa_offset 28
 3031              		.cfi_offset 4, -28
 3032              		.cfi_offset 5, -24
 3033              		.cfi_offset 6, -20
 3034              		.cfi_offset 7, -16
 3035              		.cfi_offset 8, -12
 3036              		.cfi_offset 9, -8
 3037              		.cfi_offset 14, -4
 3038 0004 87B0     		sub	sp, sp, #28
 3039              	.LCFI54:
 3040              		.cfi_def_cfa_offset 56
 3041 0006 0446     		mov	r4, r0
 3042 0008 0D46     		mov	r5, r1
2479:rtos/uC-FS/Source/fs_dev.c ****     CPU_BOOLEAN   chngd;
 3043              		.loc 1 2479 5 is_stmt 1 view .LVU945
2480:rtos/uC-FS/Source/fs_dev.c ****     CPU_BOOLEAN   chngd_dev;
 3044              		.loc 1 2480 5 view .LVU946
2481:rtos/uC-FS/Source/fs_dev.c ****     FS_SEC_SIZE   sec_size_prev;
 3045              		.loc 1 2481 5 view .LVU947
2482:rtos/uC-FS/Source/fs_dev.c ****     FS_SEC_QTY    size_prev;
 3046              		.loc 1 2482 5 view .LVU948
2483:rtos/uC-FS/Source/fs_dev.c ****     FS_STATE      state_prev;
 3047              		.loc 1 2483 5 view .LVU949
2484:rtos/uC-FS/Source/fs_dev.c ****     FS_ERR        query_err;
 3048              		.loc 1 2484 5 view .LVU950
2485:rtos/uC-FS/Source/fs_dev.c **** 
 3049              		.loc 1 2485 5 view .LVU951
2489:rtos/uC-FS/Source/fs_dev.c ****     size_prev     = p_dev->Size;
 3050              		.loc 1 2489 5 view .LVU952
2489:rtos/uC-FS/Source/fs_dev.c ****     size_prev     = p_dev->Size;
 3051              		.loc 1 2489 19 is_stmt 0 view .LVU953
 3052 000a 866A     		ldr	r6, [r0, #40]
 3053              	.LVL291:
2490:rtos/uC-FS/Source/fs_dev.c ****     state_prev    = p_dev->State;
 3054              		.loc 1 2490 5 is_stmt 1 view .LVU954
2490:rtos/uC-FS/Source/fs_dev.c ****     state_prev    = p_dev->State;
 3055              		.loc 1 2490 19 is_stmt 0 view .LVU955
 3056 000c 476A     		ldr	r7, [r0, #36]
 3057              	.LVL292:
2491:rtos/uC-FS/Source/fs_dev.c **** 
 3058              		.loc 1 2491 5 is_stmt 1 view .LVU956
2491:rtos/uC-FS/Source/fs_dev.c **** 
 3059              		.loc 1 2491 19 is_stmt 0 view .LVU957
 3060 000e B0F80480 		ldrh	r8, [r0, #4]
 3061              	.LVL293:
2493:rtos/uC-FS/Source/fs_dev.c ****                                        FS_DEV_IO_CTRL_REFRESH,
 3062              		.loc 1 2493 5 is_stmt 1 view .LVU958
2493:rtos/uC-FS/Source/fs_dev.c ****                                        FS_DEV_IO_CTRL_REFRESH,
 3063              		.loc 1 2493 10 is_stmt 0 view .LVU959
 3064 0012 036B     		ldr	r3, [r0, #48]
2493:rtos/uC-FS/Source/fs_dev.c ****                                        FS_DEV_IO_CTRL_REFRESH,
 3065              		.loc 1 2493 21 view .LVU960
 3066 0014 D3F81C90 		ldr	r9, [r3, #28]
2493:rtos/uC-FS/Source/fs_dev.c ****                                        FS_DEV_IO_CTRL_REFRESH,
 3067              		.loc 1 2493 5 view .LVU961
 3068 0018 0B46     		mov	r3, r1
 3069 001a 0DF10702 		add	r2, sp, #7
ARM GAS  /tmp/cccHmdnc.s 			page 128


 3070 001e 0121     		movs	r1, #1
 3071              	.LVL294:
2493:rtos/uC-FS/Source/fs_dev.c ****                                        FS_DEV_IO_CTRL_REFRESH,
 3072              		.loc 1 2493 5 view .LVU962
 3073 0020 C847     		blx	r9
 3074              	.LVL295:
2498:rtos/uC-FS/Source/fs_dev.c **** 
 3075              		.loc 1 2498 5 is_stmt 1 view .LVU963
 3076 0022 2988     		ldrh	r1, [r5]
 3077 0024 2046     		mov	r0, r4
 3078 0026 FFF7FEFF 		bl	FSDev_HandleErr
 3079              	.LVL296:
2500:rtos/uC-FS/Source/fs_dev.c ****         switch (p_dev->State) {
 3080              		.loc 1 2500 5 view .LVU964
2500:rtos/uC-FS/Source/fs_dev.c ****         switch (p_dev->State) {
 3081              		.loc 1 2500 9 is_stmt 0 view .LVU965
 3082 002a 2B88     		ldrh	r3, [r5]
2500:rtos/uC-FS/Source/fs_dev.c ****         switch (p_dev->State) {
 3083              		.loc 1 2500 8 view .LVU966
 3084 002c 40F23912 		movw	r2, #313
 3085 0030 9342     		cmp	r3, r2
 3086 0032 15D0     		beq	.L269
2524:rtos/uC-FS/Source/fs_dev.c ****         case FS_ERR_NONE:
 3087              		.loc 1 2524 5 is_stmt 1 view .LVU967
 3088 0034 2BB3     		cbz	r3, .L248
 3089 0036 B3F5A47F 		cmp	r3, #328
 3090 003a 7CD2     		bcs	.L249
 3091 003c B3F59B7F 		cmp	r3, #310
 3092 0040 79D9     		bls	.L249
 3093 0042 A3F23713 		subw	r3, r3, #311
 3094 0046 102B     		cmp	r3, #16
 3095 0048 75D8     		bhi	.L249
 3096 004a DFE803F0 		tbb	[pc, r3]
 3097              	.L251:
 3098 004e 61       		.byte	(.L250-.L251)/2
 3099 004f 74       		.byte	(.L249-.L251)/2
 3100 0050 74       		.byte	(.L249-.L251)/2
 3101 0051 4E       		.byte	(.L252-.L251)/2
 3102 0052 74       		.byte	(.L249-.L251)/2
 3103 0053 74       		.byte	(.L249-.L251)/2
 3104 0054 74       		.byte	(.L249-.L251)/2
 3105 0055 74       		.byte	(.L249-.L251)/2
 3106 0056 74       		.byte	(.L249-.L251)/2
 3107 0057 74       		.byte	(.L249-.L251)/2
 3108 0058 74       		.byte	(.L249-.L251)/2
 3109 0059 61       		.byte	(.L250-.L251)/2
 3110 005a 61       		.byte	(.L250-.L251)/2
 3111 005b 74       		.byte	(.L249-.L251)/2
 3112 005c 74       		.byte	(.L249-.L251)/2
 3113 005d 61       		.byte	(.L250-.L251)/2
 3114 005e 61       		.byte	(.L250-.L251)/2
 3115 005f 00       		.p2align 1
 3116              	.L269:
2501:rtos/uC-FS/Source/fs_dev.c ****             case FS_DEV_STATE_LOW_FMT_VALID:
 3117              		.loc 1 2501 9 view .LVU968
2501:rtos/uC-FS/Source/fs_dev.c ****             case FS_DEV_STATE_LOW_FMT_VALID:
 3118              		.loc 1 2501 22 is_stmt 0 view .LVU969
ARM GAS  /tmp/cccHmdnc.s 			page 129


 3119 0060 A388     		ldrh	r3, [r4, #4]
2501:rtos/uC-FS/Source/fs_dev.c ****             case FS_DEV_STATE_LOW_FMT_VALID:
 3120              		.loc 1 2501 9 view .LVU970
 3121 0062 042B     		cmp	r3, #4
 3122 0064 05D0     		beq	.L244
 3123 0066 052B     		cmp	r3, #5
 3124 0068 07D1     		bne	.L245
2503:rtos/uC-FS/Source/fs_dev.c ****                  break;
 3125              		.loc 1 2503 17 is_stmt 1 view .LVU971
2503:rtos/uC-FS/Source/fs_dev.c ****                  break;
 3126              		.loc 1 2503 24 is_stmt 0 view .LVU972
 3127 006a 0023     		movs	r3, #0
 3128 006c 2B80     		strh	r3, [r5]	@ movhi
2504:rtos/uC-FS/Source/fs_dev.c **** 
 3129              		.loc 1 2504 18 is_stmt 1 view .LVU973
 3130              	.L246:
2518:rtos/uC-FS/Source/fs_dev.c ****     }
 3131              		.loc 1 2518 9 view .LVU974
2518:rtos/uC-FS/Source/fs_dev.c ****     }
 3132              		.loc 1 2518 16 is_stmt 0 view .LVU975
 3133 006e 0020     		movs	r0, #0
 3134 0070 6CE0     		b	.L247
 3135              	.L244:
2508:rtos/uC-FS/Source/fs_dev.c ****                  break;
 3136              		.loc 1 2508 17 is_stmt 1 view .LVU976
2508:rtos/uC-FS/Source/fs_dev.c ****                  break;
 3137              		.loc 1 2508 24 is_stmt 0 view .LVU977
 3138 0072 4FF49D73 		mov	r3, #314
 3139 0076 2B80     		strh	r3, [r5]	@ movhi
2509:rtos/uC-FS/Source/fs_dev.c **** 
 3140              		.loc 1 2509 18 is_stmt 1 view .LVU978
 3141 0078 F9E7     		b	.L246
 3142              	.L245:
2514:rtos/uC-FS/Source/fs_dev.c ****                  break;
 3143              		.loc 1 2514 17 view .LVU979
2514:rtos/uC-FS/Source/fs_dev.c ****                  break;
 3144              		.loc 1 2514 24 is_stmt 0 view .LVU980
 3145 007a 4FF4A373 		mov	r3, #326
 3146 007e 2B80     		strh	r3, [r5]	@ movhi
2515:rtos/uC-FS/Source/fs_dev.c ****         }
 3147              		.loc 1 2515 18 is_stmt 1 view .LVU981
 3148 0080 F5E7     		b	.L246
 3149              	.L248:
2527:rtos/uC-FS/Source/fs_dev.c ****              if(query_err != FS_ERR_NONE) {
 3150              		.loc 1 2527 14 view .LVU982
2527:rtos/uC-FS/Source/fs_dev.c ****              if(query_err != FS_ERR_NONE) {
 3151              		.loc 1 2527 19 is_stmt 0 view .LVU983
 3152 0082 236B     		ldr	r3, [r4, #48]
2527:rtos/uC-FS/Source/fs_dev.c ****              if(query_err != FS_ERR_NONE) {
 3153              		.loc 1 2527 30 view .LVU984
 3154 0084 9B69     		ldr	r3, [r3, #24]
2527:rtos/uC-FS/Source/fs_dev.c ****              if(query_err != FS_ERR_NONE) {
 3155              		.loc 1 2527 14 view .LVU985
 3156 0086 01AA     		add	r2, sp, #4
 3157 0088 02A9     		add	r1, sp, #8
 3158 008a 2046     		mov	r0, r4
 3159 008c 9847     		blx	r3
ARM GAS  /tmp/cccHmdnc.s 			page 130


 3160              	.LVL297:
2528:rtos/uC-FS/Source/fs_dev.c ****                 *p_err = query_err;
 3161              		.loc 1 2528 14 is_stmt 1 view .LVU986
2528:rtos/uC-FS/Source/fs_dev.c ****                 *p_err = query_err;
 3162              		.loc 1 2528 27 is_stmt 0 view .LVU987
 3163 008e BDF80430 		ldrh	r3, [sp, #4]
2528:rtos/uC-FS/Source/fs_dev.c ****                 *p_err = query_err;
 3164              		.loc 1 2528 16 view .LVU988
 3165 0092 4BB9     		cbnz	r3, .L270
2532:rtos/uC-FS/Source/fs_dev.c ****                                                                 /* Validate size & sec size.       
 3166              		.loc 1 2532 14 is_stmt 1 view .LVU989
2532:rtos/uC-FS/Source/fs_dev.c ****                                                                 /* Validate size & sec size.       
 3167              		.loc 1 2532 37 is_stmt 0 view .LVU990
 3168 0094 9DF81430 		ldrb	r3, [sp, #20]	@ zero_extendqisi2
2532:rtos/uC-FS/Source/fs_dev.c ****                                                                 /* Validate size & sec size.       
 3169              		.loc 1 2532 27 view .LVU991
 3170 0098 84F82C30 		strb	r3, [r4, #44]
2534:rtos/uC-FS/Source/fs_dev.c ****                  if (FS_DEV_IS_VALID_SEC_SIZE(dev_info.SecSize) == DEF_YES) {
 3171              		.loc 1 2534 14 is_stmt 1 view .LVU992
2534:rtos/uC-FS/Source/fs_dev.c ****                  if (FS_DEV_IS_VALID_SEC_SIZE(dev_info.SecSize) == DEF_YES) {
 3172              		.loc 1 2534 18 is_stmt 0 view .LVU993
 3173 009c 039B     		ldr	r3, [sp, #12]
2534:rtos/uC-FS/Source/fs_dev.c ****                  if (FS_DEV_IS_VALID_SEC_SIZE(dev_info.SecSize) == DEF_YES) {
 3174              		.loc 1 2534 17 view .LVU994
 3175 009e 33B9     		cbnz	r3, .L271
2543:rtos/uC-FS/Source/fs_dev.c ****              }
 3176              		.loc 1 2543 17 is_stmt 1 view .LVU995
2543:rtos/uC-FS/Source/fs_dev.c ****              }
 3177              		.loc 1 2543 24 is_stmt 0 view .LVU996
 3178 00a0 40F24113 		movw	r3, #321
 3179 00a4 2B80     		strh	r3, [r5]	@ movhi
 3180 00a6 4BE0     		b	.L257
 3181              	.L270:
2529:rtos/uC-FS/Source/fs_dev.c ****                  return (DEF_NO);
 3182              		.loc 1 2529 17 is_stmt 1 view .LVU997
2529:rtos/uC-FS/Source/fs_dev.c ****                  return (DEF_NO);
 3183              		.loc 1 2529 24 is_stmt 0 view .LVU998
 3184 00a8 2B80     		strh	r3, [r5]	@ movhi
2530:rtos/uC-FS/Source/fs_dev.c ****              }
 3185              		.loc 1 2530 18 is_stmt 1 view .LVU999
2530:rtos/uC-FS/Source/fs_dev.c ****              }
 3186              		.loc 1 2530 25 is_stmt 0 view .LVU1000
 3187 00aa 0020     		movs	r0, #0
 3188 00ac 4EE0     		b	.L247
 3189              	.L271:
2535:rtos/uC-FS/Source/fs_dev.c ****                      p_dev->State   = FS_DEV_STATE_LOW_FMT_VALID;
 3190              		.loc 1 2535 18 is_stmt 1 view .LVU1001
2535:rtos/uC-FS/Source/fs_dev.c ****                      p_dev->State   = FS_DEV_STATE_LOW_FMT_VALID;
 3191              		.loc 1 2535 22 is_stmt 0 view .LVU1002
 3192 00ae DDF81090 		ldr	r9, [sp, #16]
 3193 00b2 FFF7FEFF 		bl	FS_MaxSecSizeGet
 3194              	.LVL298:
2535:rtos/uC-FS/Source/fs_dev.c ****                      p_dev->State   = FS_DEV_STATE_LOW_FMT_VALID;
 3195              		.loc 1 2535 21 view .LVU1003
 3196 00b6 8145     		cmp	r9, r0
 3197 00b8 0CD8     		bhi	.L255
2535:rtos/uC-FS/Source/fs_dev.c ****                      p_dev->State   = FS_DEV_STATE_LOW_FMT_VALID;
ARM GAS  /tmp/cccHmdnc.s 			page 131


 3198              		.loc 1 2535 22 discriminator 1 view .LVU1004
 3199 00ba 049B     		ldr	r3, [sp, #16]
2535:rtos/uC-FS/Source/fs_dev.c ****                      p_dev->State   = FS_DEV_STATE_LOW_FMT_VALID;
 3200              		.loc 1 2535 65 discriminator 1 view .LVU1005
 3201 00bc B3F5007F 		cmp	r3, #512
 3202 00c0 0CD0     		beq	.L256
2535:rtos/uC-FS/Source/fs_dev.c ****                      p_dev->State   = FS_DEV_STATE_LOW_FMT_VALID;
 3203              		.loc 1 2535 22 discriminator 2 view .LVU1006
 3204 00c2 B3F5806F 		cmp	r3, #1024
 3205 00c6 09D0     		beq	.L256
2535:rtos/uC-FS/Source/fs_dev.c ****                      p_dev->State   = FS_DEV_STATE_LOW_FMT_VALID;
 3206              		.loc 1 2535 22 discriminator 3 view .LVU1007
 3207 00c8 B3F5006F 		cmp	r3, #2048
 3208 00cc 06D0     		beq	.L256
2535:rtos/uC-FS/Source/fs_dev.c ****                      p_dev->State   = FS_DEV_STATE_LOW_FMT_VALID;
 3209              		.loc 1 2535 22 discriminator 4 view .LVU1008
 3210 00ce B3F5805F 		cmp	r3, #4096
 3211 00d2 03D0     		beq	.L256
 3212              	.L255:
2540:rtos/uC-FS/Source/fs_dev.c ****                  }
 3213              		.loc 1 2540 21 is_stmt 1 view .LVU1009
2540:rtos/uC-FS/Source/fs_dev.c ****                  }
 3214              		.loc 1 2540 28 is_stmt 0 view .LVU1010
 3215 00d4 4FF4A073 		mov	r3, #320
 3216 00d8 2B80     		strh	r3, [r5]	@ movhi
 3217 00da 31E0     		b	.L257
 3218              	.L256:
2536:rtos/uC-FS/Source/fs_dev.c ****                      p_dev->Size    = dev_info.Size;
 3219              		.loc 1 2536 22 is_stmt 1 view .LVU1011
2536:rtos/uC-FS/Source/fs_dev.c ****                      p_dev->Size    = dev_info.Size;
 3220              		.loc 1 2536 37 is_stmt 0 view .LVU1012
 3221 00dc 0523     		movs	r3, #5
 3222 00de A380     		strh	r3, [r4, #4]	@ movhi
2537:rtos/uC-FS/Source/fs_dev.c ****                      p_dev->SecSize = dev_info.SecSize;
 3223              		.loc 1 2537 22 is_stmt 1 view .LVU1013
2537:rtos/uC-FS/Source/fs_dev.c ****                      p_dev->SecSize = dev_info.SecSize;
 3224              		.loc 1 2537 47 is_stmt 0 view .LVU1014
 3225 00e0 039B     		ldr	r3, [sp, #12]
2537:rtos/uC-FS/Source/fs_dev.c ****                      p_dev->SecSize = dev_info.SecSize;
 3226              		.loc 1 2537 37 view .LVU1015
 3227 00e2 6362     		str	r3, [r4, #36]
2538:rtos/uC-FS/Source/fs_dev.c ****                  } else {
 3228              		.loc 1 2538 22 is_stmt 1 view .LVU1016
2538:rtos/uC-FS/Source/fs_dev.c ****                  } else {
 3229              		.loc 1 2538 47 is_stmt 0 view .LVU1017
 3230 00e4 049B     		ldr	r3, [sp, #16]
2538:rtos/uC-FS/Source/fs_dev.c ****                  } else {
 3231              		.loc 1 2538 37 view .LVU1018
 3232 00e6 A362     		str	r3, [r4, #40]
 3233 00e8 2AE0     		b	.L257
 3234              	.L252:
2549:rtos/uC-FS/Source/fs_dev.c ****              if(query_err != FS_ERR_NONE) {
 3235              		.loc 1 2549 14 is_stmt 1 view .LVU1019
2549:rtos/uC-FS/Source/fs_dev.c ****              if(query_err != FS_ERR_NONE) {
 3236              		.loc 1 2549 19 is_stmt 0 view .LVU1020
 3237 00ea 236B     		ldr	r3, [r4, #48]
2549:rtos/uC-FS/Source/fs_dev.c ****              if(query_err != FS_ERR_NONE) {
ARM GAS  /tmp/cccHmdnc.s 			page 132


 3238              		.loc 1 2549 30 view .LVU1021
 3239 00ec 9B69     		ldr	r3, [r3, #24]
2549:rtos/uC-FS/Source/fs_dev.c ****              if(query_err != FS_ERR_NONE) {
 3240              		.loc 1 2549 14 view .LVU1022
 3241 00ee 01AA     		add	r2, sp, #4
 3242 00f0 02A9     		add	r1, sp, #8
 3243 00f2 2046     		mov	r0, r4
 3244 00f4 9847     		blx	r3
 3245              	.LVL299:
2550:rtos/uC-FS/Source/fs_dev.c ****                 *p_err = query_err;
 3246              		.loc 1 2550 14 is_stmt 1 view .LVU1023
2550:rtos/uC-FS/Source/fs_dev.c ****                 *p_err = query_err;
 3247              		.loc 1 2550 27 is_stmt 0 view .LVU1024
 3248 00f6 BDF80430 		ldrh	r3, [sp, #4]
2550:rtos/uC-FS/Source/fs_dev.c ****                 *p_err = query_err;
 3249              		.loc 1 2550 16 view .LVU1025
 3250 00fa 33B9     		cbnz	r3, .L272
2554:rtos/uC-FS/Source/fs_dev.c ****              p_dev->State = FS_DEV_STATE_PRESENT;
 3251              		.loc 1 2554 14 is_stmt 1 view .LVU1026
2554:rtos/uC-FS/Source/fs_dev.c ****              p_dev->State = FS_DEV_STATE_PRESENT;
 3252              		.loc 1 2554 37 is_stmt 0 view .LVU1027
 3253 00fc 9DF81430 		ldrb	r3, [sp, #20]	@ zero_extendqisi2
2554:rtos/uC-FS/Source/fs_dev.c ****              p_dev->State = FS_DEV_STATE_PRESENT;
 3254              		.loc 1 2554 27 view .LVU1028
 3255 0100 84F82C30 		strb	r3, [r4, #44]
2555:rtos/uC-FS/Source/fs_dev.c ****              break;
 3256              		.loc 1 2555 14 is_stmt 1 view .LVU1029
2555:rtos/uC-FS/Source/fs_dev.c ****              break;
 3257              		.loc 1 2555 27 is_stmt 0 view .LVU1030
 3258 0104 0423     		movs	r3, #4
 3259 0106 A380     		strh	r3, [r4, #4]	@ movhi
2556:rtos/uC-FS/Source/fs_dev.c **** 
 3260              		.loc 1 2556 14 is_stmt 1 view .LVU1031
 3261 0108 1AE0     		b	.L257
 3262              	.L272:
2551:rtos/uC-FS/Source/fs_dev.c ****                  return (DEF_NO);
 3263              		.loc 1 2551 17 view .LVU1032
2551:rtos/uC-FS/Source/fs_dev.c ****                  return (DEF_NO);
 3264              		.loc 1 2551 24 is_stmt 0 view .LVU1033
 3265 010a 2B80     		strh	r3, [r5]	@ movhi
2552:rtos/uC-FS/Source/fs_dev.c ****              }
 3266              		.loc 1 2552 18 is_stmt 1 view .LVU1034
2552:rtos/uC-FS/Source/fs_dev.c ****              }
 3267              		.loc 1 2552 25 is_stmt 0 view .LVU1035
 3268 010c 0020     		movs	r0, #0
 3269 010e 1DE0     		b	.L247
 3270              	.L250:
2564:rtos/uC-FS/Source/fs_dev.c ****              if(query_err != FS_ERR_NONE) {
 3271              		.loc 1 2564 14 is_stmt 1 view .LVU1036
2564:rtos/uC-FS/Source/fs_dev.c ****              if(query_err != FS_ERR_NONE) {
 3272              		.loc 1 2564 19 is_stmt 0 view .LVU1037
 3273 0110 236B     		ldr	r3, [r4, #48]
2564:rtos/uC-FS/Source/fs_dev.c ****              if(query_err != FS_ERR_NONE) {
 3274              		.loc 1 2564 30 view .LVU1038
 3275 0112 9B69     		ldr	r3, [r3, #24]
2564:rtos/uC-FS/Source/fs_dev.c ****              if(query_err != FS_ERR_NONE) {
 3276              		.loc 1 2564 14 view .LVU1039
ARM GAS  /tmp/cccHmdnc.s 			page 133


 3277 0114 01AA     		add	r2, sp, #4
 3278 0116 02A9     		add	r1, sp, #8
 3279 0118 2046     		mov	r0, r4
 3280 011a 9847     		blx	r3
 3281              	.LVL300:
2565:rtos/uC-FS/Source/fs_dev.c ****                 *p_err = query_err;
 3282              		.loc 1 2565 14 is_stmt 1 view .LVU1040
2565:rtos/uC-FS/Source/fs_dev.c ****                 *p_err = query_err;
 3283              		.loc 1 2565 27 is_stmt 0 view .LVU1041
 3284 011c BDF80430 		ldrh	r3, [sp, #4]
2565:rtos/uC-FS/Source/fs_dev.c ****                 *p_err = query_err;
 3285              		.loc 1 2565 16 view .LVU1042
 3286 0120 33B9     		cbnz	r3, .L273
2569:rtos/uC-FS/Source/fs_dev.c ****              p_dev->State = FS_DEV_STATE_OPEN;
 3287              		.loc 1 2569 14 is_stmt 1 view .LVU1043
2569:rtos/uC-FS/Source/fs_dev.c ****              p_dev->State = FS_DEV_STATE_OPEN;
 3288              		.loc 1 2569 37 is_stmt 0 view .LVU1044
 3289 0122 9DF81430 		ldrb	r3, [sp, #20]	@ zero_extendqisi2
2569:rtos/uC-FS/Source/fs_dev.c ****              p_dev->State = FS_DEV_STATE_OPEN;
 3290              		.loc 1 2569 27 view .LVU1045
 3291 0126 84F82C30 		strb	r3, [r4, #44]
2570:rtos/uC-FS/Source/fs_dev.c ****              break;
 3292              		.loc 1 2570 14 is_stmt 1 view .LVU1046
2570:rtos/uC-FS/Source/fs_dev.c ****              break;
 3293              		.loc 1 2570 27 is_stmt 0 view .LVU1047
 3294 012a 0323     		movs	r3, #3
 3295 012c A380     		strh	r3, [r4, #4]	@ movhi
2571:rtos/uC-FS/Source/fs_dev.c **** 
 3296              		.loc 1 2571 14 is_stmt 1 view .LVU1048
 3297 012e 07E0     		b	.L257
 3298              	.L273:
2566:rtos/uC-FS/Source/fs_dev.c ****                  return (DEF_NO);
 3299              		.loc 1 2566 17 view .LVU1049
2566:rtos/uC-FS/Source/fs_dev.c ****                  return (DEF_NO);
 3300              		.loc 1 2566 24 is_stmt 0 view .LVU1050
 3301 0130 2B80     		strh	r3, [r5]	@ movhi
2567:rtos/uC-FS/Source/fs_dev.c ****              }
 3302              		.loc 1 2567 18 is_stmt 1 view .LVU1051
2567:rtos/uC-FS/Source/fs_dev.c ****              }
 3303              		.loc 1 2567 25 is_stmt 0 view .LVU1052
 3304 0132 0020     		movs	r0, #0
 3305 0134 0AE0     		b	.L247
 3306              	.L249:
2576:rtos/uC-FS/Source/fs_dev.c ****              p_dev->State = FS_DEV_STATE_OPEN;
 3307              		.loc 1 2576 13 is_stmt 1 view .LVU1053
2576:rtos/uC-FS/Source/fs_dev.c ****              p_dev->State = FS_DEV_STATE_OPEN;
 3308              		.loc 1 2576 20 is_stmt 0 view .LVU1054
 3309 0136 4FF4A573 		mov	r3, #330
 3310 013a 2B80     		strh	r3, [r5]	@ movhi
2577:rtos/uC-FS/Source/fs_dev.c ****              break;
 3311              		.loc 1 2577 14 is_stmt 1 view .LVU1055
2577:rtos/uC-FS/Source/fs_dev.c ****              break;
 3312              		.loc 1 2577 27 is_stmt 0 view .LVU1056
 3313 013c 0323     		movs	r3, #3
 3314 013e A380     		strh	r3, [r4, #4]	@ movhi
2578:rtos/uC-FS/Source/fs_dev.c ****     }
 3315              		.loc 1 2578 14 is_stmt 1 view .LVU1057
ARM GAS  /tmp/cccHmdnc.s 			page 134


 3316              	.L257:
2584:rtos/uC-FS/Source/fs_dev.c **** 
 3317              		.loc 1 2584 5 view .LVU1058
2584:rtos/uC-FS/Source/fs_dev.c **** 
 3318              		.loc 1 2584 33 is_stmt 0 view .LVU1059
 3319 0140 A388     		ldrh	r3, [r4, #4]
2584:rtos/uC-FS/Source/fs_dev.c **** 
 3320              		.loc 1 2584 11 view .LVU1060
 3321 0142 4345     		cmp	r3, r8
 3322 0144 05D0     		beq	.L274
 3323 0146 0120     		movs	r0, #1
 3324              	.L260:
 3325              	.LVL301:
2616:rtos/uC-FS/Source/fs_dev.c ****         p_dev->RefreshCnt++;
 3326              		.loc 1 2616 5 is_stmt 1 view .LVU1061
2616:rtos/uC-FS/Source/fs_dev.c ****         p_dev->RefreshCnt++;
 3327              		.loc 1 2616 8 is_stmt 0 view .LVU1062
 3328 0148 0128     		cmp	r0, #1
 3329 014a 19D0     		beq	.L263
 3330              	.LVL302:
 3331              	.L247:
2621:rtos/uC-FS/Source/fs_dev.c **** 
 3332              		.loc 1 2621 1 view .LVU1063
 3333 014c 07B0     		add	sp, sp, #28
 3334              	.LCFI55:
 3335              		.cfi_remember_state
 3336              		.cfi_def_cfa_offset 28
 3337              		@ sp needed
 3338 014e BDE8F083 		pop	{r4, r5, r6, r7, r8, r9, pc}
 3339              	.LVL303:
 3340              	.L274:
 3341              	.LCFI56:
 3342              		.cfi_restore_state
2586:rtos/uC-FS/Source/fs_dev.c ****         switch (p_dev->State) {
 3343              		.loc 1 2586 5 is_stmt 1 view .LVU1064
2587:rtos/uC-FS/Source/fs_dev.c ****             case FS_DEV_STATE_PRESENT:                          /* If dev present ...              
 3344              		.loc 1 2587 9 view .LVU1065
 3345 0152 042B     		cmp	r3, #4
 3346 0154 03D0     		beq	.L261
 3347 0156 052B     		cmp	r3, #5
 3348 0158 04D0     		beq	.L262
 3349 015a 0020     		movs	r0, #0
 3350 015c F4E7     		b	.L260
 3351              	.L261:
2589:rtos/uC-FS/Source/fs_dev.c ****                  break;
 3352              		.loc 1 2589 18 view .LVU1066
2589:rtos/uC-FS/Source/fs_dev.c ****                  break;
 3353              		.loc 1 2589 24 is_stmt 0 view .LVU1067
 3354 015e 9DF80700 		ldrb	r0, [sp, #7]	@ zero_extendqisi2
 3355              	.LVL304:
2590:rtos/uC-FS/Source/fs_dev.c **** 
 3356              		.loc 1 2590 18 is_stmt 1 view .LVU1068
 3357 0162 F1E7     		b	.L260
 3358              	.LVL305:
 3359              	.L262:
2594:rtos/uC-FS/Source/fs_dev.c ****                                                                 /* ... chk dev params.             
 3360              		.loc 1 2594 18 view .LVU1069
ARM GAS  /tmp/cccHmdnc.s 			page 135


2594:rtos/uC-FS/Source/fs_dev.c ****                                                                 /* ... chk dev params.             
 3361              		.loc 1 2594 32 is_stmt 0 view .LVU1070
 3362 0164 9DF80700 		ldrb	r0, [sp, #7]	@ zero_extendqisi2
2594:rtos/uC-FS/Source/fs_dev.c ****                                                                 /* ... chk dev params.             
 3363              		.loc 1 2594 21 view .LVU1071
 3364 0168 48B9     		cbnz	r0, .L265
2596:rtos/uC-FS/Source/fs_dev.c ****                          (size_prev     != p_dev->Size)) {
 3365              		.loc 1 2596 22 is_stmt 1 view .LVU1072
2596:rtos/uC-FS/Source/fs_dev.c ****                          (size_prev     != p_dev->Size)) {
 3366              		.loc 1 2596 49 is_stmt 0 view .LVU1073
 3367 016a A36A     		ldr	r3, [r4, #40]
2596:rtos/uC-FS/Source/fs_dev.c ****                          (size_prev     != p_dev->Size)) {
 3368              		.loc 1 2596 25 view .LVU1074
 3369 016c B342     		cmp	r3, r6
 3370 016e 01D0     		beq	.L275
2598:rtos/uC-FS/Source/fs_dev.c ****                      }
 3371              		.loc 1 2598 31 view .LVU1075
 3372 0170 0120     		movs	r0, #1
 3373 0172 05E0     		b	.L263
 3374              	.L275:
2597:rtos/uC-FS/Source/fs_dev.c ****                         chngd = DEF_YES;
 3375              		.loc 1 2597 49 discriminator 1 view .LVU1076
 3376 0174 636A     		ldr	r3, [r4, #36]
2596:rtos/uC-FS/Source/fs_dev.c ****                          (size_prev     != p_dev->Size)) {
 3377              		.loc 1 2596 60 discriminator 1 view .LVU1077
 3378 0176 BB42     		cmp	r3, r7
 3379 0178 E6D0     		beq	.L260
2598:rtos/uC-FS/Source/fs_dev.c ****                      }
 3380              		.loc 1 2598 31 view .LVU1078
 3381 017a 0120     		movs	r0, #1
 3382 017c 00E0     		b	.L263
 3383              	.L265:
2602:rtos/uC-FS/Source/fs_dev.c ****                  }
 3384              		.loc 1 2602 27 view .LVU1079
 3385 017e 0120     		movs	r0, #1
 3386              	.LVL306:
 3387              	.L263:
2617:rtos/uC-FS/Source/fs_dev.c ****     }
 3388              		.loc 1 2617 9 is_stmt 1 view .LVU1080
2617:rtos/uC-FS/Source/fs_dev.c ****     }
 3389              		.loc 1 2617 14 is_stmt 0 view .LVU1081
 3390 0180 E368     		ldr	r3, [r4, #12]
2617:rtos/uC-FS/Source/fs_dev.c ****     }
 3391              		.loc 1 2617 26 view .LVU1082
 3392 0182 0133     		adds	r3, r3, #1
 3393 0184 E360     		str	r3, [r4, #12]
 3394 0186 E1E7     		b	.L247
 3395              		.cfi_endproc
 3396              	.LFE25:
 3398              		.section	.text.FSDev_Refresh,"ax",%progbits
 3399              		.align	1
 3400              		.global	FSDev_Refresh
 3401              		.syntax unified
 3402              		.thumb
 3403              		.thumb_func
 3404              		.fpu fpv4-sp-d16
 3406              	FSDev_Refresh:
ARM GAS  /tmp/cccHmdnc.s 			page 136


 3407              	.LVL307:
 3408              	.LFB7:
1379:rtos/uC-FS/Source/fs_dev.c ****     FS_DEV       *p_dev;
 3409              		.loc 1 1379 1 is_stmt 1 view -0
 3410              		.cfi_startproc
 3411              		@ args = 0, pretend = 0, frame = 0
 3412              		@ frame_needed = 0, uses_anonymous_args = 0
1379:rtos/uC-FS/Source/fs_dev.c ****     FS_DEV       *p_dev;
 3413              		.loc 1 1379 1 is_stmt 0 view .LVU1084
 3414 0000 70B5     		push	{r4, r5, r6, lr}
 3415              	.LCFI57:
 3416              		.cfi_def_cfa_offset 16
 3417              		.cfi_offset 4, -16
 3418              		.cfi_offset 5, -12
 3419              		.cfi_offset 6, -8
 3420              		.cfi_offset 14, -4
 3421 0002 0446     		mov	r4, r0
1380:rtos/uC-FS/Source/fs_dev.c ****     CPU_BOOLEAN   chngd;
 3422              		.loc 1 1380 5 is_stmt 1 view .LVU1085
1381:rtos/uC-FS/Source/fs_dev.c ****     CPU_BOOLEAN   lock_success;
 3423              		.loc 1 1381 5 view .LVU1086
1382:rtos/uC-FS/Source/fs_dev.c **** 
 3424              		.loc 1 1382 5 view .LVU1087
1386:rtos/uC-FS/Source/fs_dev.c ****         CPU_SW_EXCEPTION(DEF_NO);
 3425              		.loc 1 1386 5 view .LVU1088
1386:rtos/uC-FS/Source/fs_dev.c ****         CPU_SW_EXCEPTION(DEF_NO);
 3426              		.loc 1 1386 8 is_stmt 0 view .LVU1089
 3427 0004 0E46     		mov	r6, r1
 3428 0006 A9B1     		cbz	r1, .L284
 3429              	.LVL308:
 3430              	.L277:
1387:rtos/uC-FS/Source/fs_dev.c ****     }
 3431              		.loc 1 1387 9 is_stmt 1 discriminator 1 view .LVU1090
1389:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_NAME_NULL;
 3432              		.loc 1 1389 5 discriminator 1 view .LVU1091
1389:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_NAME_NULL;
 3433              		.loc 1 1389 8 is_stmt 0 discriminator 1 view .LVU1092
 3434 0008 BCB1     		cbz	r4, .L285
1398:rtos/uC-FS/Source/fs_dev.c ****     if (p_dev == (FS_DEV *)0) {                                 /* Rtn err if dev not found.       
 3435              		.loc 1 1398 5 is_stmt 1 view .LVU1093
1398:rtos/uC-FS/Source/fs_dev.c ****     if (p_dev == (FS_DEV *)0) {                                 /* Rtn err if dev not found.       
 3436              		.loc 1 1398 13 is_stmt 0 view .LVU1094
 3437 000a 2046     		mov	r0, r4
 3438 000c FFF7FEFF 		bl	FSDev_Acquire
 3439              	.LVL309:
1399:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_DEV_NOT_OPEN;
 3440              		.loc 1 1399 5 is_stmt 1 view .LVU1095
1399:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_DEV_NOT_OPEN;
 3441              		.loc 1 1399 8 is_stmt 0 view .LVU1096
 3442 0010 0546     		mov	r5, r0
 3443 0012 B8B1     		cbz	r0, .L286
1404:rtos/uC-FS/Source/fs_dev.c ****     if (lock_success != DEF_YES) {
 3444              		.loc 1 1404 5 is_stmt 1 view .LVU1097
1404:rtos/uC-FS/Source/fs_dev.c ****     if (lock_success != DEF_YES) {
 3445              		.loc 1 1404 20 is_stmt 0 view .LVU1098
 3446 0014 FFF7FEFF 		bl	FSDev_Lock
 3447              	.LVL310:
ARM GAS  /tmp/cccHmdnc.s 			page 137


1405:rtos/uC-FS/Source/fs_dev.c ****         FSDev_Release(p_dev);
 3448              		.loc 1 1405 5 is_stmt 1 view .LVU1099
1405:rtos/uC-FS/Source/fs_dev.c ****         FSDev_Release(p_dev);
 3449              		.loc 1 1405 8 is_stmt 0 view .LVU1100
 3450 0018 0128     		cmp	r0, #1
 3451 001a 18D1     		bne	.L287
1414:rtos/uC-FS/Source/fs_dev.c ****         case FS_DEV_STATE_OPEN:
 3452              		.loc 1 1414 5 is_stmt 1 view .LVU1101
1414:rtos/uC-FS/Source/fs_dev.c ****         case FS_DEV_STATE_OPEN:
 3453              		.loc 1 1414 18 is_stmt 0 view .LVU1102
 3454 001c AB88     		ldrh	r3, [r5, #4]
1414:rtos/uC-FS/Source/fs_dev.c ****         case FS_DEV_STATE_OPEN:
 3455              		.loc 1 1414 5 view .LVU1103
 3456 001e 033B     		subs	r3, r3, #3
 3457 0020 022B     		cmp	r3, #2
 3458 0022 1CD9     		bls	.L282
1425:rtos/uC-FS/Source/fs_dev.c ****             *p_err = FS_ERR_DEV_NOT_OPEN;
 3459              		.loc 1 1425 14 is_stmt 1 view .LVU1104
 3460 0024 2846     		mov	r0, r5
 3461              	.LVL311:
1425:rtos/uC-FS/Source/fs_dev.c ****             *p_err = FS_ERR_DEV_NOT_OPEN;
 3462              		.loc 1 1425 14 is_stmt 0 view .LVU1105
 3463 0026 FFF7FEFF 		bl	FSDev_ReleaseUnlock
 3464              	.LVL312:
1426:rtos/uC-FS/Source/fs_dev.c ****              return (DEF_NO);
 3465              		.loc 1 1426 13 is_stmt 1 view .LVU1106
1426:rtos/uC-FS/Source/fs_dev.c ****              return (DEF_NO);
 3466              		.loc 1 1426 20 is_stmt 0 view .LVU1107
 3467 002a 40F24513 		movw	r3, #325
 3468 002e 3380     		strh	r3, [r6]	@ movhi
1427:rtos/uC-FS/Source/fs_dev.c ****     }
 3469              		.loc 1 1427 14 is_stmt 1 view .LVU1108
1427:rtos/uC-FS/Source/fs_dev.c ****     }
 3470              		.loc 1 1427 21 is_stmt 0 view .LVU1109
 3471 0030 0024     		movs	r4, #0
 3472              	.LVL313:
1427:rtos/uC-FS/Source/fs_dev.c ****     }
 3473              		.loc 1 1427 21 view .LVU1110
 3474 0032 05E0     		b	.L279
 3475              	.LVL314:
 3476              	.L284:
1387:rtos/uC-FS/Source/fs_dev.c ****     }
 3477              		.loc 1 1387 9 is_stmt 1 view .LVU1111
1387:rtos/uC-FS/Source/fs_dev.c ****     }
 3478              		.loc 1 1387 9 view .LVU1112
 3479 0034 FFF7FEFF 		bl	CPU_SW_Exception
 3480              	.LVL315:
1387:rtos/uC-FS/Source/fs_dev.c ****     }
 3481              		.loc 1 1387 9 is_stmt 0 view .LVU1113
 3482 0038 E6E7     		b	.L277
 3483              	.L285:
1390:rtos/uC-FS/Source/fs_dev.c ****         return (DEF_NO);
 3484              		.loc 1 1390 8 is_stmt 1 view .LVU1114
1390:rtos/uC-FS/Source/fs_dev.c ****         return (DEF_NO);
 3485              		.loc 1 1390 15 is_stmt 0 view .LVU1115
 3486 003a 40F28933 		movw	r3, #905
 3487 003e 3380     		strh	r3, [r6]	@ movhi
ARM GAS  /tmp/cccHmdnc.s 			page 138


1391:rtos/uC-FS/Source/fs_dev.c ****     }
 3488              		.loc 1 1391 9 is_stmt 1 view .LVU1116
 3489              	.LVL316:
 3490              	.L279:
1439:rtos/uC-FS/Source/fs_dev.c **** 
 3491              		.loc 1 1439 1 is_stmt 0 view .LVU1117
 3492 0040 2046     		mov	r0, r4
 3493 0042 70BD     		pop	{r4, r5, r6, pc}
 3494              	.LVL317:
 3495              	.L286:
1400:rtos/uC-FS/Source/fs_dev.c ****         return (DEF_NO);
 3496              		.loc 1 1400 8 is_stmt 1 view .LVU1118
1400:rtos/uC-FS/Source/fs_dev.c ****         return (DEF_NO);
 3497              		.loc 1 1400 15 is_stmt 0 view .LVU1119
 3498 0044 40F24513 		movw	r3, #325
 3499 0048 3380     		strh	r3, [r6]	@ movhi
1401:rtos/uC-FS/Source/fs_dev.c ****     }
 3500              		.loc 1 1401 9 is_stmt 1 view .LVU1120
1401:rtos/uC-FS/Source/fs_dev.c ****     }
 3501              		.loc 1 1401 16 is_stmt 0 view .LVU1121
 3502 004a 0024     		movs	r4, #0
 3503              	.LVL318:
1401:rtos/uC-FS/Source/fs_dev.c ****     }
 3504              		.loc 1 1401 16 view .LVU1122
 3505 004c F8E7     		b	.L279
 3506              	.LVL319:
 3507              	.L287:
1406:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_OS_LOCK;
 3508              		.loc 1 1406 9 is_stmt 1 view .LVU1123
 3509 004e 2846     		mov	r0, r5
 3510              	.LVL320:
1406:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_OS_LOCK;
 3511              		.loc 1 1406 9 is_stmt 0 view .LVU1124
 3512 0050 FFF7FEFF 		bl	FSDev_Release
 3513              	.LVL321:
1407:rtos/uC-FS/Source/fs_dev.c ****         return (DEF_NO);
 3514              		.loc 1 1407 8 is_stmt 1 view .LVU1125
1407:rtos/uC-FS/Source/fs_dev.c ****         return (DEF_NO);
 3515              		.loc 1 1407 15 is_stmt 0 view .LVU1126
 3516 0054 40F2DD53 		movw	r3, #1501
 3517 0058 3380     		strh	r3, [r6]	@ movhi
1408:rtos/uC-FS/Source/fs_dev.c ****     }
 3518              		.loc 1 1408 9 is_stmt 1 view .LVU1127
1408:rtos/uC-FS/Source/fs_dev.c ****     }
 3519              		.loc 1 1408 16 is_stmt 0 view .LVU1128
 3520 005a 0024     		movs	r4, #0
 3521              	.LVL322:
1408:rtos/uC-FS/Source/fs_dev.c ****     }
 3522              		.loc 1 1408 16 view .LVU1129
 3523 005c F0E7     		b	.L279
 3524              	.LVL323:
 3525              	.L282:
1418:rtos/uC-FS/Source/fs_dev.c **** 
 3526              		.loc 1 1418 14 is_stmt 1 view .LVU1130
1433:rtos/uC-FS/Source/fs_dev.c **** 
 3527              		.loc 1 1433 5 view .LVU1131
1433:rtos/uC-FS/Source/fs_dev.c **** 
ARM GAS  /tmp/cccHmdnc.s 			page 139


 3528              		.loc 1 1433 13 is_stmt 0 view .LVU1132
 3529 005e 3146     		mov	r1, r6
 3530 0060 2846     		mov	r0, r5
 3531              	.LVL324:
1433:rtos/uC-FS/Source/fs_dev.c **** 
 3532              		.loc 1 1433 13 view .LVU1133
 3533 0062 FFF7FEFF 		bl	FSDev_RefreshLocked
 3534              	.LVL325:
 3535 0066 0446     		mov	r4, r0
 3536              	.LVL326:
1436:rtos/uC-FS/Source/fs_dev.c **** 
 3537              		.loc 1 1436 5 is_stmt 1 view .LVU1134
 3538 0068 2846     		mov	r0, r5
 3539 006a FFF7FEFF 		bl	FSDev_ReleaseUnlock
 3540              	.LVL327:
1438:rtos/uC-FS/Source/fs_dev.c **** }
 3541              		.loc 1 1438 5 view .LVU1135
1438:rtos/uC-FS/Source/fs_dev.c **** }
 3542              		.loc 1 1438 12 is_stmt 0 view .LVU1136
 3543 006e E7E7     		b	.L279
 3544              		.cfi_endproc
 3545              	.LFE7:
 3547              		.section	.text.FSDev_AcquireLockChk,"ax",%progbits
 3548              		.align	1
 3549              		.global	FSDev_AcquireLockChk
 3550              		.syntax unified
 3551              		.thumb
 3552              		.thumb_func
 3553              		.fpu fpv4-sp-d16
 3555              	FSDev_AcquireLockChk:
 3556              	.LVL328:
 3557              	.LFB17:
2074:rtos/uC-FS/Source/fs_dev.c ****     FS_DEV       *p_dev;
 3558              		.loc 1 2074 1 is_stmt 1 view -0
 3559              		.cfi_startproc
 3560              		@ args = 0, pretend = 0, frame = 0
 3561              		@ frame_needed = 0, uses_anonymous_args = 0
2074:rtos/uC-FS/Source/fs_dev.c ****     FS_DEV       *p_dev;
 3562              		.loc 1 2074 1 is_stmt 0 view .LVU1138
 3563 0000 38B5     		push	{r3, r4, r5, lr}
 3564              	.LCFI58:
 3565              		.cfi_def_cfa_offset 16
 3566              		.cfi_offset 3, -16
 3567              		.cfi_offset 4, -12
 3568              		.cfi_offset 5, -8
 3569              		.cfi_offset 14, -4
 3570 0002 0D46     		mov	r5, r1
2075:rtos/uC-FS/Source/fs_dev.c ****     CPU_BOOLEAN   lock_success;
 3571              		.loc 1 2075 5 is_stmt 1 view .LVU1139
2076:rtos/uC-FS/Source/fs_dev.c **** 
 3572              		.loc 1 2076 5 view .LVU1140
2080:rtos/uC-FS/Source/fs_dev.c ****     if (p_dev == (FS_DEV *)0) {                                 /* Rtn err if dev not found.       
 3573              		.loc 1 2080 5 view .LVU1141
2080:rtos/uC-FS/Source/fs_dev.c ****     if (p_dev == (FS_DEV *)0) {                                 /* Rtn err if dev not found.       
 3574              		.loc 1 2080 13 is_stmt 0 view .LVU1142
 3575 0004 FFF7FEFF 		bl	FSDev_Acquire
 3576              	.LVL329:
ARM GAS  /tmp/cccHmdnc.s 			page 140


2081:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_DEV_NOT_OPEN;
 3577              		.loc 1 2081 5 is_stmt 1 view .LVU1143
2081:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_DEV_NOT_OPEN;
 3578              		.loc 1 2081 8 is_stmt 0 view .LVU1144
 3579 0008 0446     		mov	r4, r0
 3580 000a 88B1     		cbz	r0, .L298
2086:rtos/uC-FS/Source/fs_dev.c ****     if (lock_success != DEF_YES) {
 3581              		.loc 1 2086 5 is_stmt 1 view .LVU1145
2086:rtos/uC-FS/Source/fs_dev.c ****     if (lock_success != DEF_YES) {
 3582              		.loc 1 2086 20 is_stmt 0 view .LVU1146
 3583 000c FFF7FEFF 		bl	FSDev_Lock
 3584              	.LVL330:
2087:rtos/uC-FS/Source/fs_dev.c ****         FSDev_Release(p_dev);
 3585              		.loc 1 2087 5 is_stmt 1 view .LVU1147
2087:rtos/uC-FS/Source/fs_dev.c ****         FSDev_Release(p_dev);
 3586              		.loc 1 2087 8 is_stmt 0 view .LVU1148
 3587 0010 0128     		cmp	r0, #1
 3588 0012 11D1     		bne	.L299
2096:rtos/uC-FS/Source/fs_dev.c ****        (void)FSDev_RefreshLocked(p_dev, p_err);                 /* ... try to reopen dev.          
 3589              		.loc 1 2096 5 is_stmt 1 view .LVU1149
2096:rtos/uC-FS/Source/fs_dev.c ****        (void)FSDev_RefreshLocked(p_dev, p_err);                 /* ... try to reopen dev.          
 3590              		.loc 1 2096 14 is_stmt 0 view .LVU1150
 3591 0014 A388     		ldrh	r3, [r4, #4]
2096:rtos/uC-FS/Source/fs_dev.c ****        (void)FSDev_RefreshLocked(p_dev, p_err);                 /* ... try to reopen dev.          
 3592              		.loc 1 2096 8 view .LVU1151
 3593 0016 032B     		cmp	r3, #3
 3594 0018 16D0     		beq	.L300
 3595              	.LVL331:
 3596              	.L292:
2104:rtos/uC-FS/Source/fs_dev.c ****         case FS_DEV_STATE_OPEN:                                 /* Dev not present.                
 3597              		.loc 1 2104 5 is_stmt 1 view .LVU1152
2104:rtos/uC-FS/Source/fs_dev.c ****         case FS_DEV_STATE_OPEN:                                 /* Dev not present.                
 3598              		.loc 1 2104 18 is_stmt 0 view .LVU1153
 3599 001a A388     		ldrh	r3, [r4, #4]
2104:rtos/uC-FS/Source/fs_dev.c ****         case FS_DEV_STATE_OPEN:                                 /* Dev not present.                
 3600              		.loc 1 2104 5 view .LVU1154
 3601 001c 042B     		cmp	r3, #4
 3602 001e 29D0     		beq	.L293
 3603 0020 052B     		cmp	r3, #5
 3604 0022 20D0     		beq	.L294
 3605 0024 032B     		cmp	r3, #3
 3606 0026 1BD0     		beq	.L301
2123:rtos/uC-FS/Source/fs_dev.c ****              break;
 3607              		.loc 1 2123 13 is_stmt 1 view .LVU1155
2123:rtos/uC-FS/Source/fs_dev.c ****              break;
 3608              		.loc 1 2123 20 is_stmt 0 view .LVU1156
 3609 0028 40F24513 		movw	r3, #325
 3610 002c 2B80     		strh	r3, [r5]	@ movhi
2124:rtos/uC-FS/Source/fs_dev.c ****     }
 3611              		.loc 1 2124 14 is_stmt 1 view .LVU1157
 3612 002e 1AE0     		b	.L294
 3613              	.LVL332:
 3614              	.L298:
2082:rtos/uC-FS/Source/fs_dev.c ****         return ((FS_DEV *)0);
 3615              		.loc 1 2082 8 view .LVU1158
2082:rtos/uC-FS/Source/fs_dev.c ****         return ((FS_DEV *)0);
 3616              		.loc 1 2082 15 is_stmt 0 view .LVU1159
ARM GAS  /tmp/cccHmdnc.s 			page 141


 3617 0030 40F24513 		movw	r3, #325
 3618 0034 2B80     		strh	r3, [r5]	@ movhi
2083:rtos/uC-FS/Source/fs_dev.c ****     }
 3619              		.loc 1 2083 9 is_stmt 1 view .LVU1160
2083:rtos/uC-FS/Source/fs_dev.c ****     }
 3620              		.loc 1 2083 16 is_stmt 0 view .LVU1161
 3621 0036 1BE0     		b	.L288
 3622              	.LVL333:
 3623              	.L299:
2088:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_OS_LOCK;
 3624              		.loc 1 2088 9 is_stmt 1 view .LVU1162
 3625 0038 2046     		mov	r0, r4
 3626              	.LVL334:
2088:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_OS_LOCK;
 3627              		.loc 1 2088 9 is_stmt 0 view .LVU1163
 3628 003a FFF7FEFF 		bl	FSDev_Release
 3629              	.LVL335:
2089:rtos/uC-FS/Source/fs_dev.c ****         return ((FS_DEV *)0);
 3630              		.loc 1 2089 8 is_stmt 1 view .LVU1164
2089:rtos/uC-FS/Source/fs_dev.c ****         return ((FS_DEV *)0);
 3631              		.loc 1 2089 15 is_stmt 0 view .LVU1165
 3632 003e 40F2DD53 		movw	r3, #1501
 3633 0042 2B80     		strh	r3, [r5]	@ movhi
2090:rtos/uC-FS/Source/fs_dev.c ****     }
 3634              		.loc 1 2090 9 is_stmt 1 view .LVU1166
2090:rtos/uC-FS/Source/fs_dev.c ****     }
 3635              		.loc 1 2090 16 is_stmt 0 view .LVU1167
 3636 0044 0024     		movs	r4, #0
 3637              	.LVL336:
2090:rtos/uC-FS/Source/fs_dev.c ****     }
 3638              		.loc 1 2090 16 view .LVU1168
 3639 0046 13E0     		b	.L288
 3640              	.LVL337:
 3641              	.L300:
2097:rtos/uC-FS/Source/fs_dev.c ****         if (*p_err != FS_ERR_NONE) {
 3642              		.loc 1 2097 8 is_stmt 1 view .LVU1169
2097:rtos/uC-FS/Source/fs_dev.c ****         if (*p_err != FS_ERR_NONE) {
 3643              		.loc 1 2097 14 is_stmt 0 view .LVU1170
 3644 0048 2946     		mov	r1, r5
 3645 004a 2046     		mov	r0, r4
 3646              	.LVL338:
2097:rtos/uC-FS/Source/fs_dev.c ****         if (*p_err != FS_ERR_NONE) {
 3647              		.loc 1 2097 14 view .LVU1171
 3648 004c FFF7FEFF 		bl	FSDev_RefreshLocked
 3649              	.LVL339:
2098:rtos/uC-FS/Source/fs_dev.c ****             FSDev_ReleaseUnlock(p_dev);
 3650              		.loc 1 2098 9 is_stmt 1 view .LVU1172
2098:rtos/uC-FS/Source/fs_dev.c ****             FSDev_ReleaseUnlock(p_dev);
 3651              		.loc 1 2098 13 is_stmt 0 view .LVU1173
 3652 0050 2B88     		ldrh	r3, [r5]
2098:rtos/uC-FS/Source/fs_dev.c ****             FSDev_ReleaseUnlock(p_dev);
 3653              		.loc 1 2098 12 view .LVU1174
 3654 0052 002B     		cmp	r3, #0
 3655 0054 E1D0     		beq	.L292
2099:rtos/uC-FS/Source/fs_dev.c ****             return DEF_NULL;
 3656              		.loc 1 2099 13 is_stmt 1 view .LVU1175
 3657 0056 2046     		mov	r0, r4
ARM GAS  /tmp/cccHmdnc.s 			page 142


 3658 0058 FFF7FEFF 		bl	FSDev_ReleaseUnlock
 3659              	.LVL340:
2100:rtos/uC-FS/Source/fs_dev.c ****         }
 3660              		.loc 1 2100 13 view .LVU1176
2100:rtos/uC-FS/Source/fs_dev.c ****         }
 3661              		.loc 1 2100 20 is_stmt 0 view .LVU1177
 3662 005c 0024     		movs	r4, #0
 3663              	.LVL341:
2100:rtos/uC-FS/Source/fs_dev.c ****         }
 3664              		.loc 1 2100 20 view .LVU1178
 3665 005e 07E0     		b	.L288
 3666              	.LVL342:
 3667              	.L301:
2106:rtos/uC-FS/Source/fs_dev.c ****              break;
 3668              		.loc 1 2106 13 is_stmt 1 view .LVU1179
2106:rtos/uC-FS/Source/fs_dev.c ****              break;
 3669              		.loc 1 2106 20 is_stmt 0 view .LVU1180
 3670 0060 4FF4A373 		mov	r3, #326
 3671 0064 2B80     		strh	r3, [r5]	@ movhi
2107:rtos/uC-FS/Source/fs_dev.c **** 
 3672              		.loc 1 2107 14 is_stmt 1 view .LVU1181
 3673              	.L294:
2127:rtos/uC-FS/Source/fs_dev.c ****         FSDev_ReleaseUnlock(p_dev);
 3674              		.loc 1 2127 5 view .LVU1182
2127:rtos/uC-FS/Source/fs_dev.c ****         FSDev_ReleaseUnlock(p_dev);
 3675              		.loc 1 2127 14 is_stmt 0 view .LVU1183
 3676 0066 A388     		ldrh	r3, [r4, #4]
2127:rtos/uC-FS/Source/fs_dev.c ****         FSDev_ReleaseUnlock(p_dev);
 3677              		.loc 1 2127 8 view .LVU1184
 3678 0068 052B     		cmp	r3, #5
 3679 006a 07D1     		bne	.L302
2134:rtos/uC-FS/Source/fs_dev.c ****     return (p_dev);
 3680              		.loc 1 2134 4 is_stmt 1 view .LVU1185
2134:rtos/uC-FS/Source/fs_dev.c ****     return (p_dev);
 3681              		.loc 1 2134 11 is_stmt 0 view .LVU1186
 3682 006c 0023     		movs	r3, #0
 3683 006e 2B80     		strh	r3, [r5]	@ movhi
2135:rtos/uC-FS/Source/fs_dev.c **** }
 3684              		.loc 1 2135 5 is_stmt 1 view .LVU1187
 3685              	.LVL343:
 3686              	.L288:
2136:rtos/uC-FS/Source/fs_dev.c **** 
 3687              		.loc 1 2136 1 is_stmt 0 view .LVU1188
 3688 0070 2046     		mov	r0, r4
 3689 0072 38BD     		pop	{r3, r4, r5, pc}
 3690              	.LVL344:
 3691              	.L293:
2111:rtos/uC-FS/Source/fs_dev.c ****              break;
 3692              		.loc 1 2111 13 is_stmt 1 view .LVU1189
2111:rtos/uC-FS/Source/fs_dev.c ****              break;
 3693              		.loc 1 2111 20 is_stmt 0 view .LVU1190
 3694 0074 4FF49D73 		mov	r3, #314
 3695 0078 2B80     		strh	r3, [r5]	@ movhi
2112:rtos/uC-FS/Source/fs_dev.c **** 
 3696              		.loc 1 2112 14 is_stmt 1 view .LVU1191
 3697 007a F4E7     		b	.L294
 3698              	.L302:
ARM GAS  /tmp/cccHmdnc.s 			page 143


2128:rtos/uC-FS/Source/fs_dev.c ****         return ((FS_DEV *)0);                                   /* ... rtn.                        
 3699              		.loc 1 2128 9 view .LVU1192
 3700 007c 2046     		mov	r0, r4
 3701 007e FFF7FEFF 		bl	FSDev_ReleaseUnlock
 3702              	.LVL345:
2129:rtos/uC-FS/Source/fs_dev.c ****     }
 3703              		.loc 1 2129 9 view .LVU1193
2129:rtos/uC-FS/Source/fs_dev.c ****     }
 3704              		.loc 1 2129 16 is_stmt 0 view .LVU1194
 3705 0082 0024     		movs	r4, #0
 3706              	.LVL346:
2129:rtos/uC-FS/Source/fs_dev.c ****     }
 3707              		.loc 1 2129 16 view .LVU1195
 3708 0084 F4E7     		b	.L288
 3709              		.cfi_endproc
 3710              	.LFE17:
 3712              		.section	.text.FSDev_PartitionInit,"ax",%progbits
 3713              		.align	1
 3714              		.global	FSDev_PartitionInit
 3715              		.syntax unified
 3716              		.thumb
 3717              		.thumb_func
 3718              		.fpu fpv4-sp-d16
 3720              	FSDev_PartitionInit:
 3721              	.LVL347:
 3722              	.LFB4:
1111:rtos/uC-FS/Source/fs_dev.c ****     FS_DEV  *p_dev;
 3723              		.loc 1 1111 1 is_stmt 1 view -0
 3724              		.cfi_startproc
 3725              		@ args = 0, pretend = 0, frame = 0
 3726              		@ frame_needed = 0, uses_anonymous_args = 0
1111:rtos/uC-FS/Source/fs_dev.c ****     FS_DEV  *p_dev;
 3727              		.loc 1 1111 1 is_stmt 0 view .LVU1197
 3728 0000 70B5     		push	{r4, r5, r6, lr}
 3729              	.LCFI59:
 3730              		.cfi_def_cfa_offset 16
 3731              		.cfi_offset 4, -16
 3732              		.cfi_offset 5, -12
 3733              		.cfi_offset 6, -8
 3734              		.cfi_offset 14, -4
 3735 0002 0446     		mov	r4, r0
 3736 0004 0D46     		mov	r5, r1
1112:rtos/uC-FS/Source/fs_dev.c **** 
 3737              		.loc 1 1112 5 is_stmt 1 view .LVU1198
1116:rtos/uC-FS/Source/fs_dev.c ****         CPU_SW_EXCEPTION(;);
 3738              		.loc 1 1116 5 view .LVU1199
1116:rtos/uC-FS/Source/fs_dev.c ****         CPU_SW_EXCEPTION(;);
 3739              		.loc 1 1116 8 is_stmt 0 view .LVU1200
 3740 0006 1646     		mov	r6, r2
 3741 0008 AAB1     		cbz	r2, .L311
 3742              	.LVL348:
 3743              	.L304:
1117:rtos/uC-FS/Source/fs_dev.c ****     }
 3744              		.loc 1 1117 9 is_stmt 1 discriminator 1 view .LVU1201
1119:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_NAME_NULL;
 3745              		.loc 1 1119 5 discriminator 1 view .LVU1202
1119:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_NAME_NULL;
ARM GAS  /tmp/cccHmdnc.s 			page 144


 3746              		.loc 1 1119 8 is_stmt 0 discriminator 1 view .LVU1203
 3747 000a BCB1     		cbz	r4, .L312
1128:rtos/uC-FS/Source/fs_dev.c ****     (void)p_err;                                               /* Err ignored. Ret val chk'd instea
 3748              		.loc 1 1128 5 is_stmt 1 view .LVU1204
1128:rtos/uC-FS/Source/fs_dev.c ****     (void)p_err;                                               /* Err ignored. Ret val chk'd instea
 3749              		.loc 1 1128 13 is_stmt 0 view .LVU1205
 3750 000c 3146     		mov	r1, r6
 3751 000e 2046     		mov	r0, r4
 3752 0010 FFF7FEFF 		bl	FSDev_AcquireLockChk
 3753              	.LVL349:
1129:rtos/uC-FS/Source/fs_dev.c ****     if (p_dev == (FS_DEV *)0) {                                 /* Rtn err if dev not found.       
 3754              		.loc 1 1129 5 is_stmt 1 view .LVU1206
1130:rtos/uC-FS/Source/fs_dev.c ****         return;
 3755              		.loc 1 1130 5 view .LVU1207
1130:rtos/uC-FS/Source/fs_dev.c ****         return;
 3756              		.loc 1 1130 8 is_stmt 0 view .LVU1208
 3757 0014 0446     		mov	r4, r0
 3758              	.LVL350:
1130:rtos/uC-FS/Source/fs_dev.c ****         return;
 3759              		.loc 1 1130 8 view .LVU1209
 3760 0016 68B1     		cbz	r0, .L303
1134:rtos/uC-FS/Source/fs_dev.c ****         FSDev_ReleaseUnlock(p_dev);
 3761              		.loc 1 1134 5 is_stmt 1 view .LVU1210
1134:rtos/uC-FS/Source/fs_dev.c ****         FSDev_ReleaseUnlock(p_dev);
 3762              		.loc 1 1134 14 is_stmt 0 view .LVU1211
 3763 0018 C38D     		ldrh	r3, [r0, #46]
1134:rtos/uC-FS/Source/fs_dev.c ****         FSDev_ReleaseUnlock(p_dev);
 3764              		.loc 1 1134 8 view .LVU1212
 3765 001a 9BB9     		cbnz	r3, .L313
1140:rtos/uC-FS/Source/fs_dev.c ****         FSDev_ReleaseUnlock(p_dev);
 3766              		.loc 1 1140 5 is_stmt 1 view .LVU1213
1140:rtos/uC-FS/Source/fs_dev.c ****         FSDev_ReleaseUnlock(p_dev);
 3767              		.loc 1 1140 31 is_stmt 0 view .LVU1214
 3768 001c 416A     		ldr	r1, [r0, #36]
1140:rtos/uC-FS/Source/fs_dev.c ****         FSDev_ReleaseUnlock(p_dev);
 3769              		.loc 1 1140 8 view .LVU1215
 3770 001e A942     		cmp	r1, r5
 3771 0020 16D3     		bcc	.L314
1149:rtos/uC-FS/Source/fs_dev.c ****         partition_size =  p_dev->Size;
 3772              		.loc 1 1149 5 is_stmt 1 view .LVU1216
1149:rtos/uC-FS/Source/fs_dev.c ****         partition_size =  p_dev->Size;
 3773              		.loc 1 1149 8 is_stmt 0 view .LVU1217
 3774 0022 05B1     		cbz	r5, .L309
 3775 0024 2946     		mov	r1, r5
 3776              	.L309:
 3777              	.LVL351:
1153:rtos/uC-FS/Source/fs_dev.c ****                      partition_size,
 3778              		.loc 1 1153 5 is_stmt 1 view .LVU1218
 3779 0026 3246     		mov	r2, r6
 3780 0028 2046     		mov	r0, r4
 3781              	.LVL352:
1153:rtos/uC-FS/Source/fs_dev.c ****                      partition_size,
 3782              		.loc 1 1153 5 is_stmt 0 view .LVU1219
 3783 002a FFF7FEFF 		bl	FSPartition_Init
 3784              	.LVL353:
1158:rtos/uC-FS/Source/fs_dev.c **** }
 3785              		.loc 1 1158 5 is_stmt 1 view .LVU1220
ARM GAS  /tmp/cccHmdnc.s 			page 145


 3786 002e 2046     		mov	r0, r4
 3787 0030 FFF7FEFF 		bl	FSDev_ReleaseUnlock
 3788              	.LVL354:
 3789              	.L303:
1159:rtos/uC-FS/Source/fs_dev.c **** #endif
 3790              		.loc 1 1159 1 is_stmt 0 view .LVU1221
 3791 0034 70BD     		pop	{r4, r5, r6, pc}
 3792              	.LVL355:
 3793              	.L311:
1117:rtos/uC-FS/Source/fs_dev.c ****     }
 3794              		.loc 1 1117 9 is_stmt 1 view .LVU1222
1117:rtos/uC-FS/Source/fs_dev.c ****     }
 3795              		.loc 1 1117 9 view .LVU1223
 3796 0036 FFF7FEFF 		bl	CPU_SW_Exception
 3797              	.LVL356:
1117:rtos/uC-FS/Source/fs_dev.c ****     }
 3798              		.loc 1 1117 9 is_stmt 0 view .LVU1224
 3799 003a E6E7     		b	.L304
 3800              	.L312:
1120:rtos/uC-FS/Source/fs_dev.c ****         return;
 3801              		.loc 1 1120 8 is_stmt 1 view .LVU1225
1120:rtos/uC-FS/Source/fs_dev.c ****         return;
 3802              		.loc 1 1120 15 is_stmt 0 view .LVU1226
 3803 003c 40F28933 		movw	r3, #905
 3804 0040 3380     		strh	r3, [r6]	@ movhi
1121:rtos/uC-FS/Source/fs_dev.c ****     }
 3805              		.loc 1 1121 9 is_stmt 1 view .LVU1227
 3806 0042 F7E7     		b	.L303
 3807              	.LVL357:
 3808              	.L313:
1135:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_DEV_VOL_OPEN;
 3809              		.loc 1 1135 9 view .LVU1228
 3810 0044 FFF7FEFF 		bl	FSDev_ReleaseUnlock
 3811              	.LVL358:
1136:rtos/uC-FS/Source/fs_dev.c ****         return;
 3812              		.loc 1 1136 8 view .LVU1229
1136:rtos/uC-FS/Source/fs_dev.c ****         return;
 3813              		.loc 1 1136 15 is_stmt 0 view .LVU1230
 3814 0048 40F24B13 		movw	r3, #331
 3815 004c 3380     		strh	r3, [r6]	@ movhi
1137:rtos/uC-FS/Source/fs_dev.c ****     }
 3816              		.loc 1 1137 9 is_stmt 1 view .LVU1231
 3817 004e F1E7     		b	.L303
 3818              	.LVL359:
 3819              	.L314:
1141:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_PARTITION_INVALID_SIZE;
 3820              		.loc 1 1141 9 view .LVU1232
 3821 0050 FFF7FEFF 		bl	FSDev_ReleaseUnlock
 3822              	.LVL360:
1142:rtos/uC-FS/Source/fs_dev.c ****         return;
 3823              		.loc 1 1142 8 view .LVU1233
1142:rtos/uC-FS/Source/fs_dev.c ****         return;
 3824              		.loc 1 1142 15 is_stmt 0 view .LVU1234
 3825 0054 4FF47B73 		mov	r3, #1004
 3826 0058 3380     		strh	r3, [r6]	@ movhi
1143:rtos/uC-FS/Source/fs_dev.c ****     }
 3827              		.loc 1 1143 9 is_stmt 1 view .LVU1235
ARM GAS  /tmp/cccHmdnc.s 			page 146


 3828 005a EBE7     		b	.L303
 3829              		.cfi_endproc
 3830              	.LFE4:
 3832              		.section	.text.FSDev_Query,"ax",%progbits
 3833              		.align	1
 3834              		.global	FSDev_Query
 3835              		.syntax unified
 3836              		.thumb
 3837              		.thumb_func
 3838              		.fpu fpv4-sp-d16
 3840              	FSDev_Query:
 3841              	.LVL361:
 3842              	.LFB5:
1209:rtos/uC-FS/Source/fs_dev.c ****     FS_DEV       *p_dev;
 3843              		.loc 1 1209 1 view -0
 3844              		.cfi_startproc
 3845              		@ args = 0, pretend = 0, frame = 0
 3846              		@ frame_needed = 0, uses_anonymous_args = 0
1209:rtos/uC-FS/Source/fs_dev.c ****     FS_DEV       *p_dev;
 3847              		.loc 1 1209 1 is_stmt 0 view .LVU1237
 3848 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 3849              	.LCFI60:
 3850              		.cfi_def_cfa_offset 24
 3851              		.cfi_offset 3, -24
 3852              		.cfi_offset 4, -20
 3853              		.cfi_offset 5, -16
 3854              		.cfi_offset 6, -12
 3855              		.cfi_offset 7, -8
 3856              		.cfi_offset 14, -4
 3857 0002 0546     		mov	r5, r0
 3858 0004 0C46     		mov	r4, r1
1210:rtos/uC-FS/Source/fs_dev.c ****     CPU_BOOLEAN   lock_success;
 3859              		.loc 1 1210 5 is_stmt 1 view .LVU1238
1211:rtos/uC-FS/Source/fs_dev.c **** 
 3860              		.loc 1 1211 5 view .LVU1239
1215:rtos/uC-FS/Source/fs_dev.c ****         CPU_SW_EXCEPTION(;);
 3861              		.loc 1 1215 5 view .LVU1240
1215:rtos/uC-FS/Source/fs_dev.c ****         CPU_SW_EXCEPTION(;);
 3862              		.loc 1 1215 8 is_stmt 0 view .LVU1241
 3863 0006 1746     		mov	r7, r2
 3864 0008 8AB1     		cbz	r2, .L325
 3865              	.LVL362:
 3866              	.L316:
1216:rtos/uC-FS/Source/fs_dev.c ****     }
 3867              		.loc 1 1216 9 is_stmt 1 discriminator 1 view .LVU1242
1218:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_NAME_NULL;
 3868              		.loc 1 1218 5 discriminator 1 view .LVU1243
1218:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_NAME_NULL;
 3869              		.loc 1 1218 8 is_stmt 0 discriminator 1 view .LVU1244
 3870 000a 9DB1     		cbz	r5, .L326
1222:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_NULL_PTR;
 3871              		.loc 1 1222 5 is_stmt 1 view .LVU1245
1222:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_NULL_PTR;
 3872              		.loc 1 1222 8 is_stmt 0 view .LVU1246
 3873 000c B4B1     		cbz	r4, .L327
1229:rtos/uC-FS/Source/fs_dev.c ****     (void)p_err;                                               /* Err ignored. Ret val chk'd instea
 3874              		.loc 1 1229 5 is_stmt 1 view .LVU1247
ARM GAS  /tmp/cccHmdnc.s 			page 147


1229:rtos/uC-FS/Source/fs_dev.c ****     (void)p_err;                                               /* Err ignored. Ret val chk'd instea
 3875              		.loc 1 1229 13 is_stmt 0 view .LVU1248
 3876 000e 3946     		mov	r1, r7
 3877 0010 2846     		mov	r0, r5
 3878 0012 FFF7FEFF 		bl	FSDev_AcquireLockChk
 3879              	.LVL363:
1230:rtos/uC-FS/Source/fs_dev.c ****     if (p_dev != DEF_NULL) {                                    /* If media is present go ahead wit
 3880              		.loc 1 1230 5 is_stmt 1 view .LVU1249
1231:rtos/uC-FS/Source/fs_dev.c ****         FSDev_QueryLocked(p_dev, p_info, p_err);
 3881              		.loc 1 1231 5 view .LVU1250
1231:rtos/uC-FS/Source/fs_dev.c ****         FSDev_QueryLocked(p_dev, p_info, p_err);
 3882              		.loc 1 1231 8 is_stmt 0 view .LVU1251
 3883 0016 0646     		mov	r6, r0
 3884 0018 98B1     		cbz	r0, .L320
1232:rtos/uC-FS/Source/fs_dev.c ****         p_info->State = p_dev->State;
 3885              		.loc 1 1232 9 is_stmt 1 view .LVU1252
 3886 001a 3A46     		mov	r2, r7
 3887 001c 2146     		mov	r1, r4
 3888 001e FFF7FEFF 		bl	FSDev_QueryLocked
 3889              	.LVL364:
1233:rtos/uC-FS/Source/fs_dev.c ****     } else {                                                    /* Otherwise use the info stored in
 3890              		.loc 1 1233 9 view .LVU1253
1233:rtos/uC-FS/Source/fs_dev.c ****     } else {                                                    /* Otherwise use the info stored in
 3891              		.loc 1 1233 30 is_stmt 0 view .LVU1254
 3892 0022 B388     		ldrh	r3, [r6, #4]
1233:rtos/uC-FS/Source/fs_dev.c ****     } else {                                                    /* Otherwise use the info stored in
 3893              		.loc 1 1233 23 view .LVU1255
 3894 0024 2380     		strh	r3, [r4]	@ movhi
 3895              	.L321:
1254:rtos/uC-FS/Source/fs_dev.c **** }
 3896              		.loc 1 1254 5 is_stmt 1 view .LVU1256
 3897 0026 3046     		mov	r0, r6
 3898 0028 FFF7FEFF 		bl	FSDev_ReleaseUnlock
 3899              	.LVL365:
 3900              	.L315:
1255:rtos/uC-FS/Source/fs_dev.c **** 
 3901              		.loc 1 1255 1 is_stmt 0 view .LVU1257
 3902 002c F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 3903              	.LVL366:
 3904              	.L325:
1216:rtos/uC-FS/Source/fs_dev.c ****     }
 3905              		.loc 1 1216 9 is_stmt 1 view .LVU1258
1216:rtos/uC-FS/Source/fs_dev.c ****     }
 3906              		.loc 1 1216 9 view .LVU1259
 3907 002e FFF7FEFF 		bl	CPU_SW_Exception
 3908              	.LVL367:
1216:rtos/uC-FS/Source/fs_dev.c ****     }
 3909              		.loc 1 1216 9 is_stmt 0 view .LVU1260
 3910 0032 EAE7     		b	.L316
 3911              	.L326:
1219:rtos/uC-FS/Source/fs_dev.c ****         return;
 3912              		.loc 1 1219 8 is_stmt 1 view .LVU1261
1219:rtos/uC-FS/Source/fs_dev.c ****         return;
 3913              		.loc 1 1219 15 is_stmt 0 view .LVU1262
 3914 0034 40F28933 		movw	r3, #905
 3915 0038 3B80     		strh	r3, [r7]	@ movhi
1220:rtos/uC-FS/Source/fs_dev.c ****     }
ARM GAS  /tmp/cccHmdnc.s 			page 148


 3916              		.loc 1 1220 9 is_stmt 1 view .LVU1263
 3917 003a F7E7     		b	.L315
 3918              	.L327:
1223:rtos/uC-FS/Source/fs_dev.c ****         return;
 3919              		.loc 1 1223 8 view .LVU1264
1223:rtos/uC-FS/Source/fs_dev.c ****         return;
 3920              		.loc 1 1223 15 is_stmt 0 view .LVU1265
 3921 003c 1323     		movs	r3, #19
 3922 003e 3B80     		strh	r3, [r7]	@ movhi
1224:rtos/uC-FS/Source/fs_dev.c ****     }
 3923              		.loc 1 1224 9 is_stmt 1 view .LVU1266
 3924 0040 F4E7     		b	.L315
 3925              	.LVL368:
 3926              	.L320:
1235:rtos/uC-FS/Source/fs_dev.c ****         if (p_dev == DEF_NULL) {                                /* Rtn err if dev not found.       
 3927              		.loc 1 1235 9 view .LVU1267
1235:rtos/uC-FS/Source/fs_dev.c ****         if (p_dev == DEF_NULL) {                                /* Rtn err if dev not found.       
 3928              		.loc 1 1235 17 is_stmt 0 view .LVU1268
 3929 0042 2846     		mov	r0, r5
 3930              	.LVL369:
1235:rtos/uC-FS/Source/fs_dev.c ****         if (p_dev == DEF_NULL) {                                /* Rtn err if dev not found.       
 3931              		.loc 1 1235 17 view .LVU1269
 3932 0044 FFF7FEFF 		bl	FSDev_Acquire
 3933              	.LVL370:
1236:rtos/uC-FS/Source/fs_dev.c ****            *p_err = FS_ERR_DEV_NOT_OPEN;
 3934              		.loc 1 1236 9 is_stmt 1 view .LVU1270
1236:rtos/uC-FS/Source/fs_dev.c ****            *p_err = FS_ERR_DEV_NOT_OPEN;
 3935              		.loc 1 1236 12 is_stmt 0 view .LVU1271
 3936 0048 0646     		mov	r6, r0
 3937 004a 60B1     		cbz	r0, .L328
1241:rtos/uC-FS/Source/fs_dev.c ****         if (lock_success != DEF_YES) {
 3938              		.loc 1 1241 9 is_stmt 1 view .LVU1272
1241:rtos/uC-FS/Source/fs_dev.c ****         if (lock_success != DEF_YES) {
 3939              		.loc 1 1241 24 is_stmt 0 view .LVU1273
 3940 004c FFF7FEFF 		bl	FSDev_Lock
 3941              	.LVL371:
1242:rtos/uC-FS/Source/fs_dev.c ****             FSDev_Release(p_dev);
 3942              		.loc 1 1242 9 is_stmt 1 view .LVU1274
1242:rtos/uC-FS/Source/fs_dev.c ****             FSDev_Release(p_dev);
 3943              		.loc 1 1242 12 is_stmt 0 view .LVU1275
 3944 0050 0128     		cmp	r0, #1
 3945 0052 0CD1     		bne	.L329
1248:rtos/uC-FS/Source/fs_dev.c ****         p_info->Fixed   = p_dev->Fixed;
 3946              		.loc 1 1248 9 is_stmt 1 view .LVU1276
1248:rtos/uC-FS/Source/fs_dev.c ****         p_info->Fixed   = p_dev->Fixed;
 3947              		.loc 1 1248 32 is_stmt 0 view .LVU1277
 3948 0054 B388     		ldrh	r3, [r6, #4]
1248:rtos/uC-FS/Source/fs_dev.c ****         p_info->Fixed   = p_dev->Fixed;
 3949              		.loc 1 1248 25 view .LVU1278
 3950 0056 2380     		strh	r3, [r4]	@ movhi
1249:rtos/uC-FS/Source/fs_dev.c ****         p_info->Size    = 0u;
 3951              		.loc 1 1249 9 is_stmt 1 view .LVU1279
1249:rtos/uC-FS/Source/fs_dev.c ****         p_info->Size    = 0u;
 3952              		.loc 1 1249 32 is_stmt 0 view .LVU1280
 3953 0058 96F82C30 		ldrb	r3, [r6, #44]	@ zero_extendqisi2
1249:rtos/uC-FS/Source/fs_dev.c ****         p_info->Size    = 0u;
 3954              		.loc 1 1249 25 view .LVU1281
ARM GAS  /tmp/cccHmdnc.s 			page 149


 3955 005c 2373     		strb	r3, [r4, #12]
1250:rtos/uC-FS/Source/fs_dev.c ****         p_info->SecSize = 0u;
 3956              		.loc 1 1250 9 is_stmt 1 view .LVU1282
1250:rtos/uC-FS/Source/fs_dev.c ****         p_info->SecSize = 0u;
 3957              		.loc 1 1250 25 is_stmt 0 view .LVU1283
 3958 005e 0023     		movs	r3, #0
 3959 0060 6360     		str	r3, [r4, #4]
1251:rtos/uC-FS/Source/fs_dev.c ****     }
 3960              		.loc 1 1251 9 is_stmt 1 view .LVU1284
1251:rtos/uC-FS/Source/fs_dev.c ****     }
 3961              		.loc 1 1251 25 is_stmt 0 view .LVU1285
 3962 0062 A360     		str	r3, [r4, #8]
 3963 0064 DFE7     		b	.L321
 3964              	.LVL372:
 3965              	.L328:
1237:rtos/uC-FS/Source/fs_dev.c ****             return;
 3966              		.loc 1 1237 12 is_stmt 1 view .LVU1286
1237:rtos/uC-FS/Source/fs_dev.c ****             return;
 3967              		.loc 1 1237 19 is_stmt 0 view .LVU1287
 3968 0066 40F24513 		movw	r3, #325
 3969 006a 3B80     		strh	r3, [r7]	@ movhi
1238:rtos/uC-FS/Source/fs_dev.c ****         }
 3970              		.loc 1 1238 13 is_stmt 1 view .LVU1288
 3971 006c DEE7     		b	.L315
 3972              	.LVL373:
 3973              	.L329:
1243:rtos/uC-FS/Source/fs_dev.c ****            *p_err = FS_ERR_OS_LOCK;
 3974              		.loc 1 1243 13 view .LVU1289
 3975 006e 3046     		mov	r0, r6
 3976              	.LVL374:
1243:rtos/uC-FS/Source/fs_dev.c ****            *p_err = FS_ERR_OS_LOCK;
 3977              		.loc 1 1243 13 is_stmt 0 view .LVU1290
 3978 0070 FFF7FEFF 		bl	FSDev_Release
 3979              	.LVL375:
1244:rtos/uC-FS/Source/fs_dev.c ****             return;
 3980              		.loc 1 1244 12 is_stmt 1 view .LVU1291
1244:rtos/uC-FS/Source/fs_dev.c ****             return;
 3981              		.loc 1 1244 19 is_stmt 0 view .LVU1292
 3982 0074 40F2DD53 		movw	r3, #1501
 3983 0078 3B80     		strh	r3, [r7]	@ movhi
1245:rtos/uC-FS/Source/fs_dev.c ****         }
 3984              		.loc 1 1245 13 is_stmt 1 view .LVU1293
 3985 007a D7E7     		b	.L315
 3986              		.cfi_endproc
 3987              	.LFE5:
 3989              		.section	.text.FSDev_Rd,"ax",%progbits
 3990              		.align	1
 3991              		.global	FSDev_Rd
 3992              		.syntax unified
 3993              		.thumb
 3994              		.thumb_func
 3995              		.fpu fpv4-sp-d16
 3997              	FSDev_Rd:
 3998              	.LVL376:
 3999              	.LFB6:
1303:rtos/uC-FS/Source/fs_dev.c ****     FS_DEV  *p_dev;
 4000              		.loc 1 1303 1 view -0
ARM GAS  /tmp/cccHmdnc.s 			page 150


 4001              		.cfi_startproc
 4002              		@ args = 4, pretend = 0, frame = 0
 4003              		@ frame_needed = 0, uses_anonymous_args = 0
1303:rtos/uC-FS/Source/fs_dev.c ****     FS_DEV  *p_dev;
 4004              		.loc 1 1303 1 is_stmt 0 view .LVU1295
 4005 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 4006              	.LCFI61:
 4007              		.cfi_def_cfa_offset 24
 4008              		.cfi_offset 4, -24
 4009              		.cfi_offset 5, -20
 4010              		.cfi_offset 6, -16
 4011              		.cfi_offset 7, -12
 4012              		.cfi_offset 8, -8
 4013              		.cfi_offset 14, -4
 4014 0004 82B0     		sub	sp, sp, #8
 4015              	.LCFI62:
 4016              		.cfi_def_cfa_offset 32
 4017 0006 0446     		mov	r4, r0
 4018 0008 0D46     		mov	r5, r1
 4019 000a 9046     		mov	r8, r2
 4020 000c 1F46     		mov	r7, r3
 4021 000e 089E     		ldr	r6, [sp, #32]
1304:rtos/uC-FS/Source/fs_dev.c **** 
 4022              		.loc 1 1304 5 is_stmt 1 view .LVU1296
1309:rtos/uC-FS/Source/fs_dev.c ****         CPU_SW_EXCEPTION(;);
 4023              		.loc 1 1309 5 view .LVU1297
1309:rtos/uC-FS/Source/fs_dev.c ****         CPU_SW_EXCEPTION(;);
 4024              		.loc 1 1309 8 is_stmt 0 view .LVU1298
 4025 0010 9EB1     		cbz	r6, .L336
 4026              	.LVL377:
 4027              	.L331:
1310:rtos/uC-FS/Source/fs_dev.c ****     }
 4028              		.loc 1 1310 9 is_stmt 1 discriminator 1 view .LVU1299
1312:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_NAME_NULL;
 4029              		.loc 1 1312 5 discriminator 1 view .LVU1300
1312:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_NAME_NULL;
 4030              		.loc 1 1312 8 is_stmt 0 discriminator 1 view .LVU1301
 4031 0012 ACB1     		cbz	r4, .L337
1316:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_NULL_PTR;
 4032              		.loc 1 1316 5 is_stmt 1 view .LVU1302
1316:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_NULL_PTR;
 4033              		.loc 1 1316 8 is_stmt 0 view .LVU1303
 4034 0014 C5B1     		cbz	r5, .L338
1325:rtos/uC-FS/Source/fs_dev.c ****     (void)p_err;                                               /* Err ignored. Ret val chk'd instea
 4035              		.loc 1 1325 5 is_stmt 1 view .LVU1304
1325:rtos/uC-FS/Source/fs_dev.c ****     (void)p_err;                                               /* Err ignored. Ret val chk'd instea
 4036              		.loc 1 1325 13 is_stmt 0 view .LVU1305
 4037 0016 3146     		mov	r1, r6
 4038 0018 2046     		mov	r0, r4
 4039 001a FFF7FEFF 		bl	FSDev_AcquireLockChk
 4040              	.LVL378:
1326:rtos/uC-FS/Source/fs_dev.c ****     if (p_dev == (FS_DEV *)0) {                                 /* Rtn err if dev not found.       
 4041              		.loc 1 1326 5 is_stmt 1 view .LVU1306
1327:rtos/uC-FS/Source/fs_dev.c ****         return;
 4042              		.loc 1 1327 5 view .LVU1307
1327:rtos/uC-FS/Source/fs_dev.c ****         return;
 4043              		.loc 1 1327 8 is_stmt 0 view .LVU1308
ARM GAS  /tmp/cccHmdnc.s 			page 151


 4044 001e 0446     		mov	r4, r0
 4045              	.LVL379:
1327:rtos/uC-FS/Source/fs_dev.c ****         return;
 4046              		.loc 1 1327 8 view .LVU1309
 4047 0020 40B1     		cbz	r0, .L330
1334:rtos/uC-FS/Source/fs_dev.c **** 
 4048              		.loc 1 1334 5 is_stmt 1 view .LVU1310
 4049 0022 0096     		str	r6, [sp]
 4050 0024 3B46     		mov	r3, r7
 4051 0026 4246     		mov	r2, r8
 4052 0028 2946     		mov	r1, r5
 4053 002a FFF7FEFF 		bl	FSDev_RdLocked
 4054              	.LVL380:
1337:rtos/uC-FS/Source/fs_dev.c **** }
 4055              		.loc 1 1337 5 view .LVU1311
 4056 002e 2046     		mov	r0, r4
 4057 0030 FFF7FEFF 		bl	FSDev_ReleaseUnlock
 4058              	.LVL381:
 4059              	.L330:
1338:rtos/uC-FS/Source/fs_dev.c **** 
 4060              		.loc 1 1338 1 is_stmt 0 view .LVU1312
 4061 0034 02B0     		add	sp, sp, #8
 4062              	.LCFI63:
 4063              		.cfi_remember_state
 4064              		.cfi_def_cfa_offset 24
 4065              		@ sp needed
 4066 0036 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 4067              	.LVL382:
 4068              	.L336:
 4069              	.LCFI64:
 4070              		.cfi_restore_state
1310:rtos/uC-FS/Source/fs_dev.c ****     }
 4071              		.loc 1 1310 9 is_stmt 1 view .LVU1313
1310:rtos/uC-FS/Source/fs_dev.c ****     }
 4072              		.loc 1 1310 9 view .LVU1314
 4073 003a FFF7FEFF 		bl	CPU_SW_Exception
 4074              	.LVL383:
1310:rtos/uC-FS/Source/fs_dev.c ****     }
 4075              		.loc 1 1310 9 is_stmt 0 view .LVU1315
 4076 003e E8E7     		b	.L331
 4077              	.L337:
1313:rtos/uC-FS/Source/fs_dev.c ****         return;
 4078              		.loc 1 1313 8 is_stmt 1 view .LVU1316
1313:rtos/uC-FS/Source/fs_dev.c ****         return;
 4079              		.loc 1 1313 15 is_stmt 0 view .LVU1317
 4080 0040 40F28933 		movw	r3, #905
 4081 0044 3380     		strh	r3, [r6]	@ movhi
1314:rtos/uC-FS/Source/fs_dev.c ****     }
 4082              		.loc 1 1314 9 is_stmt 1 view .LVU1318
 4083 0046 F5E7     		b	.L330
 4084              	.L338:
1317:rtos/uC-FS/Source/fs_dev.c ****         return;
 4085              		.loc 1 1317 8 view .LVU1319
1317:rtos/uC-FS/Source/fs_dev.c ****         return;
 4086              		.loc 1 1317 15 is_stmt 0 view .LVU1320
 4087 0048 1323     		movs	r3, #19
 4088 004a 3380     		strh	r3, [r6]	@ movhi
ARM GAS  /tmp/cccHmdnc.s 			page 152


1318:rtos/uC-FS/Source/fs_dev.c ****     }
 4089              		.loc 1 1318 9 is_stmt 1 view .LVU1321
 4090 004c F2E7     		b	.L330
 4091              		.cfi_endproc
 4092              	.LFE6:
 4094              		.section	.text.FSDev_Invalidate,"ax",%progbits
 4095              		.align	1
 4096              		.global	FSDev_Invalidate
 4097              		.syntax unified
 4098              		.thumb
 4099              		.thumb_func
 4100              		.fpu fpv4-sp-d16
 4102              	FSDev_Invalidate:
 4103              	.LVL384:
 4104              	.LFB10:
1641:rtos/uC-FS/Source/fs_dev.c ****     FS_DEV  *p_dev;
 4105              		.loc 1 1641 1 view -0
 4106              		.cfi_startproc
 4107              		@ args = 0, pretend = 0, frame = 0
 4108              		@ frame_needed = 0, uses_anonymous_args = 0
1641:rtos/uC-FS/Source/fs_dev.c ****     FS_DEV  *p_dev;
 4109              		.loc 1 1641 1 is_stmt 0 view .LVU1323
 4110 0000 38B5     		push	{r3, r4, r5, lr}
 4111              	.LCFI65:
 4112              		.cfi_def_cfa_offset 16
 4113              		.cfi_offset 3, -16
 4114              		.cfi_offset 4, -12
 4115              		.cfi_offset 5, -8
 4116              		.cfi_offset 14, -4
 4117 0002 0446     		mov	r4, r0
1642:rtos/uC-FS/Source/fs_dev.c **** 
 4118              		.loc 1 1642 5 is_stmt 1 view .LVU1324
1646:rtos/uC-FS/Source/fs_dev.c ****         CPU_SW_EXCEPTION(;);
 4119              		.loc 1 1646 5 view .LVU1325
1646:rtos/uC-FS/Source/fs_dev.c ****         CPU_SW_EXCEPTION(;);
 4120              		.loc 1 1646 8 is_stmt 0 view .LVU1326
 4121 0004 0D46     		mov	r5, r1
 4122 0006 69B1     		cbz	r1, .L346
 4123              	.LVL385:
 4124              	.L340:
1647:rtos/uC-FS/Source/fs_dev.c ****     }
 4125              		.loc 1 1647 9 is_stmt 1 discriminator 1 view .LVU1327
1649:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_NAME_NULL;
 4126              		.loc 1 1649 5 discriminator 1 view .LVU1328
1649:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_NAME_NULL;
 4127              		.loc 1 1649 8 is_stmt 0 discriminator 1 view .LVU1329
 4128 0008 7CB1     		cbz	r4, .L347
1657:rtos/uC-FS/Source/fs_dev.c ****     (void)p_err;                                               /* Err ignored. Ret val chk'd instea
 4129              		.loc 1 1657 5 is_stmt 1 view .LVU1330
1657:rtos/uC-FS/Source/fs_dev.c ****     (void)p_err;                                               /* Err ignored. Ret val chk'd instea
 4130              		.loc 1 1657 13 is_stmt 0 view .LVU1331
 4131 000a 2946     		mov	r1, r5
 4132 000c 2046     		mov	r0, r4
 4133 000e FFF7FEFF 		bl	FSDev_AcquireLockChk
 4134              	.LVL386:
1658:rtos/uC-FS/Source/fs_dev.c ****     if (p_dev == DEF_NULL) {                                    /* Rtn err if dev not found.       
 4135              		.loc 1 1658 5 is_stmt 1 view .LVU1332
ARM GAS  /tmp/cccHmdnc.s 			page 153


1659:rtos/uC-FS/Source/fs_dev.c ****         if(*p_err == FS_ERR_NONE) {
 4136              		.loc 1 1659 5 view .LVU1333
1659:rtos/uC-FS/Source/fs_dev.c ****         if(*p_err == FS_ERR_NONE) {
 4137              		.loc 1 1659 8 is_stmt 0 view .LVU1334
 4138 0012 70B1     		cbz	r0, .L348
1665:rtos/uC-FS/Source/fs_dev.c **** 
 4139              		.loc 1 1665 5 is_stmt 1 view .LVU1335
1665:rtos/uC-FS/Source/fs_dev.c **** 
 4140              		.loc 1 1665 12 is_stmt 0 view .LVU1336
 4141 0014 0022     		movs	r2, #0
 4142 0016 2A80     		strh	r2, [r5]	@ movhi
1669:rtos/uC-FS/Source/fs_dev.c **** 
 4143              		.loc 1 1669 5 is_stmt 1 view .LVU1337
1669:rtos/uC-FS/Source/fs_dev.c **** 
 4144              		.loc 1 1669 10 is_stmt 0 view .LVU1338
 4145 0018 C268     		ldr	r2, [r0, #12]
1669:rtos/uC-FS/Source/fs_dev.c **** 
 4146              		.loc 1 1669 22 view .LVU1339
 4147 001a 0132     		adds	r2, r2, #1
 4148 001c C260     		str	r2, [r0, #12]
1672:rtos/uC-FS/Source/fs_dev.c **** 
 4149              		.loc 1 1672 5 is_stmt 1 view .LVU1340
 4150 001e FFF7FEFF 		bl	FSDev_ReleaseUnlock
 4151              	.LVL387:
 4152              	.L339:
1674:rtos/uC-FS/Source/fs_dev.c **** 
 4153              		.loc 1 1674 1 is_stmt 0 view .LVU1341
 4154 0022 38BD     		pop	{r3, r4, r5, pc}
 4155              	.LVL388:
 4156              	.L346:
1647:rtos/uC-FS/Source/fs_dev.c ****     }
 4157              		.loc 1 1647 9 is_stmt 1 view .LVU1342
1647:rtos/uC-FS/Source/fs_dev.c ****     }
 4158              		.loc 1 1647 9 view .LVU1343
 4159 0024 FFF7FEFF 		bl	CPU_SW_Exception
 4160              	.LVL389:
1647:rtos/uC-FS/Source/fs_dev.c ****     }
 4161              		.loc 1 1647 9 is_stmt 0 view .LVU1344
 4162 0028 EEE7     		b	.L340
 4163              	.L347:
1650:rtos/uC-FS/Source/fs_dev.c ****         return;
 4164              		.loc 1 1650 8 is_stmt 1 view .LVU1345
1650:rtos/uC-FS/Source/fs_dev.c ****         return;
 4165              		.loc 1 1650 15 is_stmt 0 view .LVU1346
 4166 002a 40F28933 		movw	r3, #905
 4167 002e 2B80     		strh	r3, [r5]	@ movhi
1651:rtos/uC-FS/Source/fs_dev.c ****     }
 4168              		.loc 1 1651 9 is_stmt 1 view .LVU1347
 4169 0030 F7E7     		b	.L339
 4170              	.LVL390:
 4171              	.L348:
1660:rtos/uC-FS/Source/fs_dev.c ****            *p_err = FS_ERR_DEV;
 4172              		.loc 1 1660 9 view .LVU1348
1660:rtos/uC-FS/Source/fs_dev.c ****            *p_err = FS_ERR_DEV;
 4173              		.loc 1 1660 12 is_stmt 0 view .LVU1349
 4174 0032 2B88     		ldrh	r3, [r5]
1660:rtos/uC-FS/Source/fs_dev.c ****            *p_err = FS_ERR_DEV;
ARM GAS  /tmp/cccHmdnc.s 			page 154


 4175              		.loc 1 1660 11 view .LVU1350
 4176 0034 002B     		cmp	r3, #0
 4177 0036 F4D1     		bne	.L339
1661:rtos/uC-FS/Source/fs_dev.c ****         }
 4178              		.loc 1 1661 12 is_stmt 1 view .LVU1351
1661:rtos/uC-FS/Source/fs_dev.c ****         }
 4179              		.loc 1 1661 19 is_stmt 0 view .LVU1352
 4180 0038 4FF49673 		mov	r3, #300
 4181 003c 2B80     		strh	r3, [r5]	@ movhi
1663:rtos/uC-FS/Source/fs_dev.c ****     }
 4182              		.loc 1 1663 9 is_stmt 1 view .LVU1353
 4183 003e F0E7     		b	.L339
 4184              		.cfi_endproc
 4185              	.LFE10:
 4187              		.section	.text.FSDev_ReleaseLocked,"ax",%progbits
 4188              		.align	1
 4189              		.global	FSDev_ReleaseLocked
 4190              		.syntax unified
 4191              		.thumb
 4192              		.thumb_func
 4193              		.fpu fpv4-sp-d16
 4195              	FSDev_ReleaseLocked:
 4196              	.LVL391:
 4197              	.LFB26:
2662:rtos/uC-FS/Source/fs_dev.c ****     FS_SEC_QTY  size;
 4198              		.loc 1 2662 1 view -0
 4199              		.cfi_startproc
 4200              		@ args = 0, pretend = 0, frame = 8
 4201              		@ frame_needed = 0, uses_anonymous_args = 0
2662:rtos/uC-FS/Source/fs_dev.c ****     FS_SEC_QTY  size;
 4202              		.loc 1 2662 1 is_stmt 0 view .LVU1355
 4203 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 4204              	.LCFI66:
 4205              		.cfi_def_cfa_offset 20
 4206              		.cfi_offset 4, -20
 4207              		.cfi_offset 5, -16
 4208              		.cfi_offset 6, -12
 4209              		.cfi_offset 7, -8
 4210              		.cfi_offset 14, -4
 4211 0002 83B0     		sub	sp, sp, #12
 4212              	.LCFI67:
 4213              		.cfi_def_cfa_offset 32
 4214 0004 0191     		str	r1, [sp, #4]
 4215 0006 1C46     		mov	r4, r3
2663:rtos/uC-FS/Source/fs_dev.c **** 
 4216              		.loc 1 2663 5 is_stmt 1 view .LVU1356
2667:rtos/uC-FS/Source/fs_dev.c **** 
 4217              		.loc 1 2667 5 view .LVU1357
2667:rtos/uC-FS/Source/fs_dev.c **** 
 4218              		.loc 1 2667 10 is_stmt 0 view .LVU1358
 4219 0008 416A     		ldr	r1, [r0, #36]
 4220              	.LVL392:
2669:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_NONE;
 4221              		.loc 1 2669 5 is_stmt 1 view .LVU1359
2669:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_NONE;
 4222              		.loc 1 2669 8 is_stmt 0 view .LVU1360
 4223 000a 52B1     		cbz	r2, .L359
ARM GAS  /tmp/cccHmdnc.s 			page 155


 4224 000c 0546     		mov	r5, r0
 4225 000e 1646     		mov	r6, r2
2674:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_DEV_INVALID_SEC_NBR;
 4226              		.loc 1 2674 5 is_stmt 1 view .LVU1361
2674:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_DEV_INVALID_SEC_NBR;
 4227              		.loc 1 2674 15 is_stmt 0 view .LVU1362
 4228 0010 019B     		ldr	r3, [sp, #4]
 4229              	.LVL393:
2674:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_DEV_INVALID_SEC_NBR;
 4230              		.loc 1 2674 8 view .LVU1363
 4231 0012 8B42     		cmp	r3, r1
 4232 0014 09D8     		bhi	.L360
2679:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_DEV_INVALID_SEC_NBR;
 4233              		.loc 1 2679 5 is_stmt 1 view .LVU1364
2679:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_DEV_INVALID_SEC_NBR;
 4234              		.loc 1 2679 15 is_stmt 0 view .LVU1365
 4235 0016 1344     		add	r3, r3, r2
2679:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_DEV_INVALID_SEC_NBR;
 4236              		.loc 1 2679 8 view .LVU1366
 4237 0018 8B42     		cmp	r3, r1
 4238 001a 0AD8     		bhi	.L361
2687:rtos/uC-FS/Source/fs_dev.c ****     while ((*p_err == FS_ERR_NONE) &&
 4239              		.loc 1 2687 4 is_stmt 1 view .LVU1367
2687:rtos/uC-FS/Source/fs_dev.c ****     while ((*p_err == FS_ERR_NONE) &&
 4240              		.loc 1 2687 11 is_stmt 0 view .LVU1368
 4241 001c 0023     		movs	r3, #0
 4242 001e 2380     		strh	r3, [r4]	@ movhi
 4243              	.LVL394:
2688:rtos/uC-FS/Source/fs_dev.c ****            ( cnt    > 0u         )   ) {
 4244              		.loc 1 2688 5 is_stmt 1 view .LVU1369
2688:rtos/uC-FS/Source/fs_dev.c ****            ( cnt    > 0u         )   ) {
 4245              		.loc 1 2688 11 is_stmt 0 view .LVU1370
 4246 0020 16E0     		b	.L354
 4247              	.LVL395:
 4248              	.L359:
2670:rtos/uC-FS/Source/fs_dev.c ****         return;
 4249              		.loc 1 2670 8 is_stmt 1 view .LVU1371
2670:rtos/uC-FS/Source/fs_dev.c ****         return;
 4250              		.loc 1 2670 15 is_stmt 0 view .LVU1372
 4251 0022 0023     		movs	r3, #0
 4252              	.LVL396:
2670:rtos/uC-FS/Source/fs_dev.c ****         return;
 4253              		.loc 1 2670 15 view .LVU1373
 4254 0024 2380     		strh	r3, [r4]	@ movhi
 4255              	.LVL397:
2671:rtos/uC-FS/Source/fs_dev.c ****     }
 4256              		.loc 1 2671 9 is_stmt 1 view .LVU1374
 4257              	.L349:
2706:rtos/uC-FS/Source/fs_dev.c **** #endif
 4258              		.loc 1 2706 1 is_stmt 0 view .LVU1375
 4259 0026 03B0     		add	sp, sp, #12
 4260              	.LCFI68:
 4261              		.cfi_remember_state
 4262              		.cfi_def_cfa_offset 20
 4263              		@ sp needed
 4264 0028 F0BD     		pop	{r4, r5, r6, r7, pc}
 4265              	.LVL398:
ARM GAS  /tmp/cccHmdnc.s 			page 156


 4266              	.L360:
 4267              	.LCFI69:
 4268              		.cfi_restore_state
2675:rtos/uC-FS/Source/fs_dev.c ****         return;
 4269              		.loc 1 2675 8 is_stmt 1 view .LVU1376
2675:rtos/uC-FS/Source/fs_dev.c ****         return;
 4270              		.loc 1 2675 15 is_stmt 0 view .LVU1377
 4271 002a 40F23F13 		movw	r3, #319
 4272              	.LVL399:
2675:rtos/uC-FS/Source/fs_dev.c ****         return;
 4273              		.loc 1 2675 15 view .LVU1378
 4274 002e 2380     		strh	r3, [r4]	@ movhi
 4275              	.LVL400:
2676:rtos/uC-FS/Source/fs_dev.c ****     }
 4276              		.loc 1 2676 9 is_stmt 1 view .LVU1379
 4277 0030 F9E7     		b	.L349
 4278              	.LVL401:
 4279              	.L361:
2680:rtos/uC-FS/Source/fs_dev.c ****         return;
 4280              		.loc 1 2680 8 view .LVU1380
2680:rtos/uC-FS/Source/fs_dev.c ****         return;
 4281              		.loc 1 2680 15 is_stmt 0 view .LVU1381
 4282 0032 40F23F13 		movw	r3, #319
 4283 0036 2380     		strh	r3, [r4]	@ movhi
 4284              	.LVL402:
2681:rtos/uC-FS/Source/fs_dev.c ****     }
 4285              		.loc 1 2681 9 is_stmt 1 view .LVU1382
 4286 0038 F5E7     		b	.L349
 4287              	.LVL403:
 4288              	.L356:
2690:rtos/uC-FS/Source/fs_dev.c ****                                            FS_DEV_IO_CTRL_SEC_RELEASE,
 4289              		.loc 1 2690 9 view .LVU1383
2690:rtos/uC-FS/Source/fs_dev.c ****                                            FS_DEV_IO_CTRL_SEC_RELEASE,
 4290              		.loc 1 2690 14 is_stmt 0 view .LVU1384
 4291 003a 2B6B     		ldr	r3, [r5, #48]
2690:rtos/uC-FS/Source/fs_dev.c ****                                            FS_DEV_IO_CTRL_SEC_RELEASE,
 4292              		.loc 1 2690 25 view .LVU1385
 4293 003c DF69     		ldr	r7, [r3, #28]
2690:rtos/uC-FS/Source/fs_dev.c ****                                            FS_DEV_IO_CTRL_SEC_RELEASE,
 4294              		.loc 1 2690 9 view .LVU1386
 4295 003e 2346     		mov	r3, r4
 4296 0040 01AA     		add	r2, sp, #4
 4297 0042 0721     		movs	r1, #7
 4298 0044 2846     		mov	r0, r5
 4299 0046 B847     		blx	r7
 4300              	.LVL404:
2695:rtos/uC-FS/Source/fs_dev.c ****         start++;
 4301              		.loc 1 2695 9 is_stmt 1 view .LVU1387
2695:rtos/uC-FS/Source/fs_dev.c ****         start++;
 4302              		.loc 1 2695 12 is_stmt 0 view .LVU1388
 4303 0048 013E     		subs	r6, r6, #1
 4304              	.LVL405:
2696:rtos/uC-FS/Source/fs_dev.c ****     }
 4305              		.loc 1 2696 9 is_stmt 1 view .LVU1389
2696:rtos/uC-FS/Source/fs_dev.c ****     }
 4306              		.loc 1 2696 14 is_stmt 0 view .LVU1390
 4307 004a 019A     		ldr	r2, [sp, #4]
ARM GAS  /tmp/cccHmdnc.s 			page 157


 4308 004c 0132     		adds	r2, r2, #1
 4309 004e 0192     		str	r2, [sp, #4]
 4310              	.L354:
2688:rtos/uC-FS/Source/fs_dev.c ****            ( cnt    > 0u         )   ) {
 4311              		.loc 1 2688 11 is_stmt 1 view .LVU1391
2688:rtos/uC-FS/Source/fs_dev.c ****            ( cnt    > 0u         )   ) {
 4312              		.loc 1 2688 13 is_stmt 0 view .LVU1392
 4313 0050 2388     		ldrh	r3, [r4]
2688:rtos/uC-FS/Source/fs_dev.c ****            ( cnt    > 0u         )   ) {
 4314              		.loc 1 2688 11 view .LVU1393
 4315 0052 0BB9     		cbnz	r3, .L355
2688:rtos/uC-FS/Source/fs_dev.c ****            ( cnt    > 0u         )   ) {
 4316              		.loc 1 2688 36 discriminator 1 view .LVU1394
 4317 0054 002E     		cmp	r6, #0
 4318 0056 F0D1     		bne	.L356
 4319              	.L355:
2701:rtos/uC-FS/Source/fs_dev.c ****         *p_err =  FS_ERR_NONE;
 4320              		.loc 1 2701 5 is_stmt 1 view .LVU1395
2701:rtos/uC-FS/Source/fs_dev.c ****         *p_err =  FS_ERR_NONE;
 4321              		.loc 1 2701 8 is_stmt 0 view .LVU1396
 4322 0058 40F23912 		movw	r2, #313
 4323 005c 9342     		cmp	r3, r2
 4324 005e 04D0     		beq	.L362
 4325              	.L357:
2705:rtos/uC-FS/Source/fs_dev.c **** }
 4326              		.loc 1 2705 5 is_stmt 1 view .LVU1397
 4327 0060 2188     		ldrh	r1, [r4]
 4328 0062 2846     		mov	r0, r5
 4329 0064 FFF7FEFF 		bl	FSDev_HandleErr
 4330              	.LVL406:
 4331 0068 DDE7     		b	.L349
 4332              	.L362:
2702:rtos/uC-FS/Source/fs_dev.c ****     }
 4333              		.loc 1 2702 9 view .LVU1398
2702:rtos/uC-FS/Source/fs_dev.c ****     }
 4334              		.loc 1 2702 16 is_stmt 0 view .LVU1399
 4335 006a 0023     		movs	r3, #0
 4336 006c 2380     		strh	r3, [r4]	@ movhi
 4337 006e F7E7     		b	.L357
 4338              		.cfi_endproc
 4339              	.LFE26:
 4341              		.section	.text.FSDev_SyncLocked,"ax",%progbits
 4342              		.align	1
 4343              		.global	FSDev_SyncLocked
 4344              		.syntax unified
 4345              		.thumb
 4346              		.thumb_func
 4347              		.fpu fpv4-sp-d16
 4349              	FSDev_SyncLocked:
 4350              	.LVL407:
 4351              	.LFB27:
2735:rtos/uC-FS/Source/fs_dev.c ****     p_dev->DevDrvPtr->IO_Ctrl(p_dev,
 4352              		.loc 1 2735 1 is_stmt 1 view -0
 4353              		.cfi_startproc
 4354              		@ args = 0, pretend = 0, frame = 0
 4355              		@ frame_needed = 0, uses_anonymous_args = 0
2735:rtos/uC-FS/Source/fs_dev.c ****     p_dev->DevDrvPtr->IO_Ctrl(p_dev,
ARM GAS  /tmp/cccHmdnc.s 			page 158


 4356              		.loc 1 2735 1 is_stmt 0 view .LVU1401
 4357 0000 10B5     		push	{r4, lr}
 4358              	.LCFI70:
 4359              		.cfi_def_cfa_offset 8
 4360              		.cfi_offset 4, -8
 4361              		.cfi_offset 14, -4
 4362 0002 0B46     		mov	r3, r1
2736:rtos/uC-FS/Source/fs_dev.c ****                               FS_DEV_IO_CTRL_SYNC,
 4363              		.loc 1 2736 5 is_stmt 1 view .LVU1402
2736:rtos/uC-FS/Source/fs_dev.c ****                               FS_DEV_IO_CTRL_SYNC,
 4364              		.loc 1 2736 10 is_stmt 0 view .LVU1403
 4365 0004 026B     		ldr	r2, [r0, #48]
2736:rtos/uC-FS/Source/fs_dev.c ****                               FS_DEV_IO_CTRL_SYNC,
 4366              		.loc 1 2736 21 view .LVU1404
 4367 0006 D469     		ldr	r4, [r2, #28]
2736:rtos/uC-FS/Source/fs_dev.c ****                               FS_DEV_IO_CTRL_SYNC,
 4368              		.loc 1 2736 5 view .LVU1405
 4369 0008 0022     		movs	r2, #0
 4370 000a 1021     		movs	r1, #16
 4371              	.LVL408:
2736:rtos/uC-FS/Source/fs_dev.c ****                               FS_DEV_IO_CTRL_SYNC,
 4372              		.loc 1 2736 5 view .LVU1406
 4373 000c A047     		blx	r4
 4374              	.LVL409:
2740:rtos/uC-FS/Source/fs_dev.c **** #endif
 4375              		.loc 1 2740 1 view .LVU1407
 4376 000e 10BD     		pop	{r4, pc}
 4377              		.cfi_endproc
 4378              	.LFE27:
 4380              		.section	.text.FSDev_Sync,"ax",%progbits
 4381              		.align	1
 4382              		.global	FSDev_Sync
 4383              		.syntax unified
 4384              		.thumb
 4385              		.thumb_func
 4386              		.fpu fpv4-sp-d16
 4388              	FSDev_Sync:
 4389              	.LVL410:
 4390              	.LFB8:
1465:rtos/uC-FS/Source/fs_dev.c ****     FS_DEV       *p_dev;
 4391              		.loc 1 1465 1 is_stmt 1 view -0
 4392              		.cfi_startproc
 4393              		@ args = 0, pretend = 0, frame = 0
 4394              		@ frame_needed = 0, uses_anonymous_args = 0
1465:rtos/uC-FS/Source/fs_dev.c ****     FS_DEV       *p_dev;
 4395              		.loc 1 1465 1 is_stmt 0 view .LVU1409
 4396 0000 38B5     		push	{r3, r4, r5, lr}
 4397              	.LCFI71:
 4398              		.cfi_def_cfa_offset 16
 4399              		.cfi_offset 3, -16
 4400              		.cfi_offset 4, -12
 4401              		.cfi_offset 5, -8
 4402              		.cfi_offset 14, -4
 4403 0002 0446     		mov	r4, r0
1466:rtos/uC-FS/Source/fs_dev.c ****     CPU_BOOLEAN   lock_success;
 4404              		.loc 1 1466 5 is_stmt 1 view .LVU1410
1467:rtos/uC-FS/Source/fs_dev.c **** 
ARM GAS  /tmp/cccHmdnc.s 			page 159


 4405              		.loc 1 1467 5 view .LVU1411
1471:rtos/uC-FS/Source/fs_dev.c ****         CPU_SW_EXCEPTION(DEF_NO);
 4406              		.loc 1 1471 5 view .LVU1412
1471:rtos/uC-FS/Source/fs_dev.c ****         CPU_SW_EXCEPTION(DEF_NO);
 4407              		.loc 1 1471 8 is_stmt 0 view .LVU1413
 4408 0004 0D46     		mov	r5, r1
 4409 0006 69B1     		cbz	r1, .L373
 4410              	.LVL411:
 4411              	.L366:
1472:rtos/uC-FS/Source/fs_dev.c ****     }
 4412              		.loc 1 1472 9 is_stmt 1 discriminator 1 view .LVU1414
1474:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_NAME_NULL;
 4413              		.loc 1 1474 5 discriminator 1 view .LVU1415
1474:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_NAME_NULL;
 4414              		.loc 1 1474 8 is_stmt 0 discriminator 1 view .LVU1416
 4415 0008 7CB1     		cbz	r4, .L374
1483:rtos/uC-FS/Source/fs_dev.c ****     if (p_dev == (FS_DEV *)0) {                                 /* Rtn err if dev not found.       
 4416              		.loc 1 1483 5 is_stmt 1 view .LVU1417
1483:rtos/uC-FS/Source/fs_dev.c ****     if (p_dev == (FS_DEV *)0) {                                 /* Rtn err if dev not found.       
 4417              		.loc 1 1483 13 is_stmt 0 view .LVU1418
 4418 000a 2046     		mov	r0, r4
 4419 000c FFF7FEFF 		bl	FSDev_Acquire
 4420              	.LVL412:
1484:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_DEV_NOT_OPEN;
 4421              		.loc 1 1484 5 is_stmt 1 view .LVU1419
1484:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_DEV_NOT_OPEN;
 4422              		.loc 1 1484 8 is_stmt 0 view .LVU1420
 4423 0010 0446     		mov	r4, r0
 4424              	.LVL413:
1484:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_DEV_NOT_OPEN;
 4425              		.loc 1 1484 8 view .LVU1421
 4426 0012 70B1     		cbz	r0, .L375
1489:rtos/uC-FS/Source/fs_dev.c ****     if (lock_success != DEF_YES) {
 4427              		.loc 1 1489 5 is_stmt 1 view .LVU1422
1489:rtos/uC-FS/Source/fs_dev.c ****     if (lock_success != DEF_YES) {
 4428              		.loc 1 1489 20 is_stmt 0 view .LVU1423
 4429 0014 FFF7FEFF 		bl	FSDev_Lock
 4430              	.LVL414:
1490:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_OS_LOCK;
 4431              		.loc 1 1490 5 is_stmt 1 view .LVU1424
1490:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_OS_LOCK;
 4432              		.loc 1 1490 8 is_stmt 0 view .LVU1425
 4433 0018 0128     		cmp	r0, #1
 4434 001a 0ED0     		beq	.L370
1491:rtos/uC-FS/Source/fs_dev.c ****         return;
 4435              		.loc 1 1491 8 is_stmt 1 view .LVU1426
1491:rtos/uC-FS/Source/fs_dev.c ****         return;
 4436              		.loc 1 1491 15 is_stmt 0 view .LVU1427
 4437 001c 40F2DD53 		movw	r3, #1501
 4438 0020 2B80     		strh	r3, [r5]	@ movhi
1492:rtos/uC-FS/Source/fs_dev.c ****     }
 4439              		.loc 1 1492 9 is_stmt 1 view .LVU1428
 4440 0022 05E0     		b	.L365
 4441              	.LVL415:
 4442              	.L373:
1472:rtos/uC-FS/Source/fs_dev.c ****     }
 4443              		.loc 1 1472 9 view .LVU1429
ARM GAS  /tmp/cccHmdnc.s 			page 160


1472:rtos/uC-FS/Source/fs_dev.c ****     }
 4444              		.loc 1 1472 9 view .LVU1430
 4445 0024 FFF7FEFF 		bl	CPU_SW_Exception
 4446              	.LVL416:
1472:rtos/uC-FS/Source/fs_dev.c ****     }
 4447              		.loc 1 1472 9 is_stmt 0 view .LVU1431
 4448 0028 EEE7     		b	.L366
 4449              	.L374:
1475:rtos/uC-FS/Source/fs_dev.c ****         return;
 4450              		.loc 1 1475 8 is_stmt 1 view .LVU1432
1475:rtos/uC-FS/Source/fs_dev.c ****         return;
 4451              		.loc 1 1475 15 is_stmt 0 view .LVU1433
 4452 002a 40F28933 		movw	r3, #905
 4453 002e 2B80     		strh	r3, [r5]	@ movhi
1476:rtos/uC-FS/Source/fs_dev.c ****     }
 4454              		.loc 1 1476 9 is_stmt 1 view .LVU1434
 4455              	.LVL417:
 4456              	.L365:
1521:rtos/uC-FS/Source/fs_dev.c **** #endif
 4457              		.loc 1 1521 1 is_stmt 0 view .LVU1435
 4458 0030 38BD     		pop	{r3, r4, r5, pc}
 4459              	.LVL418:
 4460              	.L375:
1485:rtos/uC-FS/Source/fs_dev.c ****         return;
 4461              		.loc 1 1485 8 is_stmt 1 view .LVU1436
1485:rtos/uC-FS/Source/fs_dev.c ****         return;
 4462              		.loc 1 1485 15 is_stmt 0 view .LVU1437
 4463 0032 40F24513 		movw	r3, #325
 4464 0036 2B80     		strh	r3, [r5]	@ movhi
1486:rtos/uC-FS/Source/fs_dev.c ****     }
 4465              		.loc 1 1486 9 is_stmt 1 view .LVU1438
 4466 0038 FAE7     		b	.L365
 4467              	.LVL419:
 4468              	.L370:
1498:rtos/uC-FS/Source/fs_dev.c ****         case FS_DEV_STATE_OPEN:
 4469              		.loc 1 1498 5 view .LVU1439
1498:rtos/uC-FS/Source/fs_dev.c ****         case FS_DEV_STATE_OPEN:
 4470              		.loc 1 1498 18 is_stmt 0 view .LVU1440
 4471 003a A388     		ldrh	r3, [r4, #4]
1498:rtos/uC-FS/Source/fs_dev.c ****         case FS_DEV_STATE_OPEN:
 4472              		.loc 1 1498 5 view .LVU1441
 4473 003c 033B     		subs	r3, r3, #3
 4474 003e 022B     		cmp	r3, #2
 4475 0040 06D9     		bls	.L371
1509:rtos/uC-FS/Source/fs_dev.c ****             *p_err = FS_ERR_DEV_NOT_OPEN;
 4476              		.loc 1 1509 14 is_stmt 1 view .LVU1442
 4477 0042 2046     		mov	r0, r4
 4478              	.LVL420:
1509:rtos/uC-FS/Source/fs_dev.c ****             *p_err = FS_ERR_DEV_NOT_OPEN;
 4479              		.loc 1 1509 14 is_stmt 0 view .LVU1443
 4480 0044 FFF7FEFF 		bl	FSDev_ReleaseUnlock
 4481              	.LVL421:
1510:rtos/uC-FS/Source/fs_dev.c ****              return;
 4482              		.loc 1 1510 13 is_stmt 1 view .LVU1444
1510:rtos/uC-FS/Source/fs_dev.c ****              return;
 4483              		.loc 1 1510 20 is_stmt 0 view .LVU1445
 4484 0048 40F24513 		movw	r3, #325
ARM GAS  /tmp/cccHmdnc.s 			page 161


 4485 004c 2B80     		strh	r3, [r5]	@ movhi
1511:rtos/uC-FS/Source/fs_dev.c ****     }
 4486              		.loc 1 1511 14 is_stmt 1 view .LVU1446
 4487 004e EFE7     		b	.L365
 4488              	.LVL422:
 4489              	.L371:
1502:rtos/uC-FS/Source/fs_dev.c **** 
 4490              		.loc 1 1502 14 view .LVU1447
1517:rtos/uC-FS/Source/fs_dev.c **** 
 4491              		.loc 1 1517 5 view .LVU1448
 4492 0050 2946     		mov	r1, r5
 4493 0052 2046     		mov	r0, r4
 4494              	.LVL423:
1517:rtos/uC-FS/Source/fs_dev.c **** 
 4495              		.loc 1 1517 5 is_stmt 0 view .LVU1449
 4496 0054 FFF7FEFF 		bl	FSDev_SyncLocked
 4497              	.LVL424:
1520:rtos/uC-FS/Source/fs_dev.c **** }
 4498              		.loc 1 1520 5 is_stmt 1 view .LVU1450
 4499 0058 2046     		mov	r0, r4
 4500 005a FFF7FEFF 		bl	FSDev_ReleaseUnlock
 4501              	.LVL425:
 4502 005e E7E7     		b	.L365
 4503              		.cfi_endproc
 4504              	.LFE8:
 4506              		.section	.text.FSDev_WrLocked,"ax",%progbits
 4507              		.align	1
 4508              		.global	FSDev_WrLocked
 4509              		.syntax unified
 4510              		.thumb
 4511              		.thumb_func
 4512              		.fpu fpv4-sp-d16
 4514              	FSDev_WrLocked:
 4515              	.LVL426:
 4516              	.LFB28:
2786:rtos/uC-FS/Source/fs_dev.c ****     FS_SEC_QTY    size;
 4517              		.loc 1 2786 1 view -0
 4518              		.cfi_startproc
 4519              		@ args = 4, pretend = 0, frame = 0
 4520              		@ frame_needed = 0, uses_anonymous_args = 0
2786:rtos/uC-FS/Source/fs_dev.c ****     FS_SEC_QTY    size;
 4521              		.loc 1 2786 1 is_stmt 0 view .LVU1452
 4522 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 4523              	.LCFI72:
 4524              		.cfi_def_cfa_offset 20
 4525              		.cfi_offset 4, -20
 4526              		.cfi_offset 5, -16
 4527              		.cfi_offset 6, -12
 4528              		.cfi_offset 7, -8
 4529              		.cfi_offset 14, -4
 4530 0002 83B0     		sub	sp, sp, #12
 4531              	.LCFI73:
 4532              		.cfi_def_cfa_offset 32
 4533 0004 0446     		mov	r4, r0
 4534 0006 089D     		ldr	r5, [sp, #32]
2787:rtos/uC-FS/Source/fs_dev.c **** #if (FS_CFG_DBG_WR_VERIFY_EN == DEF_ENABLED)
 4535              		.loc 1 2787 5 is_stmt 1 view .LVU1453
ARM GAS  /tmp/cccHmdnc.s 			page 162


2799:rtos/uC-FS/Source/fs_dev.c **** 
 4536              		.loc 1 2799 5 view .LVU1454
2799:rtos/uC-FS/Source/fs_dev.c **** 
 4537              		.loc 1 2799 10 is_stmt 0 view .LVU1455
 4538 0008 406A     		ldr	r0, [r0, #36]
 4539              	.LVL427:
2801:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_NONE;
 4540              		.loc 1 2801 5 is_stmt 1 view .LVU1456
2801:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_NONE;
 4541              		.loc 1 2801 8 is_stmt 0 view .LVU1457
 4542 000a 83B1     		cbz	r3, .L382
 4543 000c 1E46     		mov	r6, r3
2806:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_DEV_INVALID_SEC_NBR;
 4544              		.loc 1 2806 5 is_stmt 1 view .LVU1458
2806:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_DEV_INVALID_SEC_NBR;
 4545              		.loc 1 2806 8 is_stmt 0 view .LVU1459
 4546 000e 9042     		cmp	r0, r2
 4547 0010 10D3     		bcc	.L383
2811:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_DEV_INVALID_SEC_NBR;
 4548              		.loc 1 2811 5 is_stmt 1 view .LVU1460
2811:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_DEV_INVALID_SEC_NBR;
 4549              		.loc 1 2811 15 is_stmt 0 view .LVU1461
 4550 0012 1344     		add	r3, r3, r2
 4551              	.LVL428:
2811:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_DEV_INVALID_SEC_NBR;
 4552              		.loc 1 2811 8 view .LVU1462
 4553 0014 8342     		cmp	r3, r0
 4554 0016 11D8     		bhi	.L384
2819:rtos/uC-FS/Source/fs_dev.c ****                          p_src,
 4555              		.loc 1 2819 5 is_stmt 1 view .LVU1463
2819:rtos/uC-FS/Source/fs_dev.c ****                          p_src,
 4556              		.loc 1 2819 10 is_stmt 0 view .LVU1464
 4557 0018 236B     		ldr	r3, [r4, #48]
2819:rtos/uC-FS/Source/fs_dev.c ****                          p_src,
 4558              		.loc 1 2819 21 view .LVU1465
 4559 001a 5F69     		ldr	r7, [r3, #20]
2819:rtos/uC-FS/Source/fs_dev.c ****                          p_src,
 4560              		.loc 1 2819 5 view .LVU1466
 4561 001c 0095     		str	r5, [sp]
 4562 001e 3346     		mov	r3, r6
 4563 0020 2046     		mov	r0, r4
 4564              	.LVL429:
2819:rtos/uC-FS/Source/fs_dev.c ****                          p_src,
 4565              		.loc 1 2819 5 view .LVU1467
 4566 0022 B847     		blx	r7
 4567              	.LVL430:
2828:rtos/uC-FS/Source/fs_dev.c **** 
 4568              		.loc 1 2828 54 is_stmt 1 view .LVU1468
2833:rtos/uC-FS/Source/fs_dev.c **** 
 4569              		.loc 1 2833 5 view .LVU1469
 4570 0024 2988     		ldrh	r1, [r5]
 4571 0026 2046     		mov	r0, r4
 4572 0028 FFF7FEFF 		bl	FSDev_HandleErr
 4573              	.LVL431:
 4574 002c 00E0     		b	.L376
 4575              	.LVL432:
 4576              	.L382:
ARM GAS  /tmp/cccHmdnc.s 			page 163


2802:rtos/uC-FS/Source/fs_dev.c ****         return;
 4577              		.loc 1 2802 8 view .LVU1470
2802:rtos/uC-FS/Source/fs_dev.c ****         return;
 4578              		.loc 1 2802 15 is_stmt 0 view .LVU1471
 4579 002e 2B80     		strh	r3, [r5]	@ movhi
2803:rtos/uC-FS/Source/fs_dev.c ****     }
 4580              		.loc 1 2803 9 is_stmt 1 view .LVU1472
 4581              	.LVL433:
 4582              	.L376:
2880:rtos/uC-FS/Source/fs_dev.c **** #endif
 4583              		.loc 1 2880 1 is_stmt 0 view .LVU1473
 4584 0030 03B0     		add	sp, sp, #12
 4585              	.LCFI74:
 4586              		.cfi_remember_state
 4587              		.cfi_def_cfa_offset 20
 4588              		@ sp needed
 4589 0032 F0BD     		pop	{r4, r5, r6, r7, pc}
 4590              	.LVL434:
 4591              	.L383:
 4592              	.LCFI75:
 4593              		.cfi_restore_state
2807:rtos/uC-FS/Source/fs_dev.c ****         return;
 4594              		.loc 1 2807 8 is_stmt 1 view .LVU1474
2807:rtos/uC-FS/Source/fs_dev.c ****         return;
 4595              		.loc 1 2807 15 is_stmt 0 view .LVU1475
 4596 0034 40F23F13 		movw	r3, #319
 4597              	.LVL435:
2807:rtos/uC-FS/Source/fs_dev.c ****         return;
 4598              		.loc 1 2807 15 view .LVU1476
 4599 0038 2B80     		strh	r3, [r5]	@ movhi
2808:rtos/uC-FS/Source/fs_dev.c ****     }
 4600              		.loc 1 2808 9 is_stmt 1 view .LVU1477
 4601 003a F9E7     		b	.L376
 4602              	.L384:
2812:rtos/uC-FS/Source/fs_dev.c ****         return;
 4603              		.loc 1 2812 8 view .LVU1478
2812:rtos/uC-FS/Source/fs_dev.c ****         return;
 4604              		.loc 1 2812 15 is_stmt 0 view .LVU1479
 4605 003c 40F23F13 		movw	r3, #319
 4606 0040 2B80     		strh	r3, [r5]	@ movhi
2813:rtos/uC-FS/Source/fs_dev.c ****     }
 4607              		.loc 1 2813 9 is_stmt 1 view .LVU1480
 4608 0042 F5E7     		b	.L376
 4609              		.cfi_endproc
 4610              	.LFE28:
 4612              		.section	.text.FSDev_Wr,"ax",%progbits
 4613              		.align	1
 4614              		.global	FSDev_Wr
 4615              		.syntax unified
 4616              		.thumb
 4617              		.thumb_func
 4618              		.fpu fpv4-sp-d16
 4620              	FSDev_Wr:
 4621              	.LVL436:
 4622              	.LFB9:
1571:rtos/uC-FS/Source/fs_dev.c ****     FS_DEV  *p_dev;
 4623              		.loc 1 1571 1 view -0
ARM GAS  /tmp/cccHmdnc.s 			page 164


 4624              		.cfi_startproc
 4625              		@ args = 4, pretend = 0, frame = 0
 4626              		@ frame_needed = 0, uses_anonymous_args = 0
1571:rtos/uC-FS/Source/fs_dev.c ****     FS_DEV  *p_dev;
 4627              		.loc 1 1571 1 is_stmt 0 view .LVU1482
 4628 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 4629              	.LCFI76:
 4630              		.cfi_def_cfa_offset 24
 4631              		.cfi_offset 4, -24
 4632              		.cfi_offset 5, -20
 4633              		.cfi_offset 6, -16
 4634              		.cfi_offset 7, -12
 4635              		.cfi_offset 8, -8
 4636              		.cfi_offset 14, -4
 4637 0004 82B0     		sub	sp, sp, #8
 4638              	.LCFI77:
 4639              		.cfi_def_cfa_offset 32
 4640 0006 0446     		mov	r4, r0
 4641 0008 0D46     		mov	r5, r1
 4642 000a 9046     		mov	r8, r2
 4643 000c 1F46     		mov	r7, r3
 4644 000e 089E     		ldr	r6, [sp, #32]
1572:rtos/uC-FS/Source/fs_dev.c **** 
 4645              		.loc 1 1572 5 is_stmt 1 view .LVU1483
1577:rtos/uC-FS/Source/fs_dev.c ****         CPU_SW_EXCEPTION(;);
 4646              		.loc 1 1577 5 view .LVU1484
1577:rtos/uC-FS/Source/fs_dev.c ****         CPU_SW_EXCEPTION(;);
 4647              		.loc 1 1577 8 is_stmt 0 view .LVU1485
 4648 0010 9EB1     		cbz	r6, .L391
 4649              	.LVL437:
 4650              	.L386:
1578:rtos/uC-FS/Source/fs_dev.c ****     }
 4651              		.loc 1 1578 9 is_stmt 1 discriminator 1 view .LVU1486
1580:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_NAME_NULL;
 4652              		.loc 1 1580 5 discriminator 1 view .LVU1487
1580:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_NAME_NULL;
 4653              		.loc 1 1580 8 is_stmt 0 discriminator 1 view .LVU1488
 4654 0012 ACB1     		cbz	r4, .L392
1584:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_NULL_PTR;
 4655              		.loc 1 1584 5 is_stmt 1 view .LVU1489
1584:rtos/uC-FS/Source/fs_dev.c ****        *p_err = FS_ERR_NULL_PTR;
 4656              		.loc 1 1584 8 is_stmt 0 view .LVU1490
 4657 0014 C5B1     		cbz	r5, .L393
1593:rtos/uC-FS/Source/fs_dev.c ****     (void)p_err;                                               /* Err ignored. Ret val chk'd instea
 4658              		.loc 1 1593 5 is_stmt 1 view .LVU1491
1593:rtos/uC-FS/Source/fs_dev.c ****     (void)p_err;                                               /* Err ignored. Ret val chk'd instea
 4659              		.loc 1 1593 13 is_stmt 0 view .LVU1492
 4660 0016 3146     		mov	r1, r6
 4661 0018 2046     		mov	r0, r4
 4662 001a FFF7FEFF 		bl	FSDev_AcquireLockChk
 4663              	.LVL438:
1594:rtos/uC-FS/Source/fs_dev.c ****     if (p_dev == (FS_DEV *)0) {                                 /* Rtn err if dev not found.       
 4664              		.loc 1 1594 5 is_stmt 1 view .LVU1493
1595:rtos/uC-FS/Source/fs_dev.c ****         return;
 4665              		.loc 1 1595 5 view .LVU1494
1595:rtos/uC-FS/Source/fs_dev.c ****         return;
 4666              		.loc 1 1595 8 is_stmt 0 view .LVU1495
ARM GAS  /tmp/cccHmdnc.s 			page 165


 4667 001e 0446     		mov	r4, r0
 4668              	.LVL439:
1595:rtos/uC-FS/Source/fs_dev.c ****         return;
 4669              		.loc 1 1595 8 view .LVU1496
 4670 0020 40B1     		cbz	r0, .L385
1602:rtos/uC-FS/Source/fs_dev.c **** 
 4671              		.loc 1 1602 5 is_stmt 1 view .LVU1497
 4672 0022 0096     		str	r6, [sp]
 4673 0024 3B46     		mov	r3, r7
 4674 0026 4246     		mov	r2, r8
 4675 0028 2946     		mov	r1, r5
 4676 002a FFF7FEFF 		bl	FSDev_WrLocked
 4677              	.LVL440:
1605:rtos/uC-FS/Source/fs_dev.c **** }
 4678              		.loc 1 1605 5 view .LVU1498
 4679 002e 2046     		mov	r0, r4
 4680 0030 FFF7FEFF 		bl	FSDev_ReleaseUnlock
 4681              	.LVL441:
 4682              	.L385:
1606:rtos/uC-FS/Source/fs_dev.c **** #endif
 4683              		.loc 1 1606 1 is_stmt 0 view .LVU1499
 4684 0034 02B0     		add	sp, sp, #8
 4685              	.LCFI78:
 4686              		.cfi_remember_state
 4687              		.cfi_def_cfa_offset 24
 4688              		@ sp needed
 4689 0036 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 4690              	.LVL442:
 4691              	.L391:
 4692              	.LCFI79:
 4693              		.cfi_restore_state
1578:rtos/uC-FS/Source/fs_dev.c ****     }
 4694              		.loc 1 1578 9 is_stmt 1 view .LVU1500
1578:rtos/uC-FS/Source/fs_dev.c ****     }
 4695              		.loc 1 1578 9 view .LVU1501
 4696 003a FFF7FEFF 		bl	CPU_SW_Exception
 4697              	.LVL443:
1578:rtos/uC-FS/Source/fs_dev.c ****     }
 4698              		.loc 1 1578 9 is_stmt 0 view .LVU1502
 4699 003e E8E7     		b	.L386
 4700              	.L392:
1581:rtos/uC-FS/Source/fs_dev.c ****         return;
 4701              		.loc 1 1581 8 is_stmt 1 view .LVU1503
1581:rtos/uC-FS/Source/fs_dev.c ****         return;
 4702              		.loc 1 1581 15 is_stmt 0 view .LVU1504
 4703 0040 40F28933 		movw	r3, #905
 4704 0044 3380     		strh	r3, [r6]	@ movhi
1582:rtos/uC-FS/Source/fs_dev.c ****     }
 4705              		.loc 1 1582 9 is_stmt 1 view .LVU1505
 4706 0046 F5E7     		b	.L385
 4707              	.L393:
1585:rtos/uC-FS/Source/fs_dev.c ****         return;
 4708              		.loc 1 1585 8 view .LVU1506
1585:rtos/uC-FS/Source/fs_dev.c ****         return;
 4709              		.loc 1 1585 15 is_stmt 0 view .LVU1507
 4710 0048 1323     		movs	r3, #19
 4711 004a 3380     		strh	r3, [r6]	@ movhi
ARM GAS  /tmp/cccHmdnc.s 			page 166


1586:rtos/uC-FS/Source/fs_dev.c ****     }
 4712              		.loc 1 1586 9 is_stmt 1 view .LVU1508
 4713 004c F2E7     		b	.L385
 4714              		.cfi_endproc
 4715              	.LFE9:
 4717              		.section	.text.FSDev_VolAdd,"ax",%progbits
 4718              		.align	1
 4719              		.global	FSDev_VolAdd
 4720              		.syntax unified
 4721              		.thumb
 4722              		.thumb_func
 4723              		.fpu fpv4-sp-d16
 4725              	FSDev_VolAdd:
 4726              	.LVL444:
 4727              	.LFB29:
2904:rtos/uC-FS/Source/fs_dev.c ****    (void)p_vol;                                                 /*lint --e{550} Suppress "Symbol no
 4728              		.loc 1 2904 1 view -0
 4729              		.cfi_startproc
 4730              		@ args = 0, pretend = 0, frame = 0
 4731              		@ frame_needed = 0, uses_anonymous_args = 0
 4732              		@ link register save eliminated.
2905:rtos/uC-FS/Source/fs_dev.c **** 
 4733              		.loc 1 2905 4 view .LVU1510
2907:rtos/uC-FS/Source/fs_dev.c **** }
 4734              		.loc 1 2907 5 view .LVU1511
2907:rtos/uC-FS/Source/fs_dev.c **** }
 4735              		.loc 1 2907 10 is_stmt 0 view .LVU1512
 4736 0000 C38D     		ldrh	r3, [r0, #46]
2907:rtos/uC-FS/Source/fs_dev.c **** }
 4737              		.loc 1 2907 18 view .LVU1513
 4738 0002 0133     		adds	r3, r3, #1
 4739 0004 C385     		strh	r3, [r0, #46]	@ movhi
2908:rtos/uC-FS/Source/fs_dev.c **** 
 4740              		.loc 1 2908 1 view .LVU1514
 4741 0006 7047     		bx	lr
 4742              		.cfi_endproc
 4743              	.LFE29:
 4745              		.section	.text.FSDev_VolRemove,"ax",%progbits
 4746              		.align	1
 4747              		.global	FSDev_VolRemove
 4748              		.syntax unified
 4749              		.thumb
 4750              		.thumb_func
 4751              		.fpu fpv4-sp-d16
 4753              	FSDev_VolRemove:
 4754              	.LVL445:
 4755              	.LFB30:
2931:rtos/uC-FS/Source/fs_dev.c ****    (void)p_vol;                                                 /*lint --e{550} Suppress "Symbol no
 4756              		.loc 1 2931 1 is_stmt 1 view -0
 4757              		.cfi_startproc
 4758              		@ args = 0, pretend = 0, frame = 0
 4759              		@ frame_needed = 0, uses_anonymous_args = 0
 4760              		@ link register save eliminated.
2932:rtos/uC-FS/Source/fs_dev.c **** 
 4761              		.loc 1 2932 4 view .LVU1516
2934:rtos/uC-FS/Source/fs_dev.c **** }
 4762              		.loc 1 2934 5 view .LVU1517
ARM GAS  /tmp/cccHmdnc.s 			page 167


2934:rtos/uC-FS/Source/fs_dev.c **** }
 4763              		.loc 1 2934 10 is_stmt 0 view .LVU1518
 4764 0000 C38D     		ldrh	r3, [r0, #46]
2934:rtos/uC-FS/Source/fs_dev.c **** }
 4765              		.loc 1 2934 18 view .LVU1519
 4766 0002 013B     		subs	r3, r3, #1
 4767 0004 C385     		strh	r3, [r0, #46]	@ movhi
2935:rtos/uC-FS/Source/fs_dev.c **** 
 4768              		.loc 1 2935 1 view .LVU1520
 4769 0006 7047     		bx	lr
 4770              		.cfi_endproc
 4771              	.LFE30:
 4773              		.section	.bss.FSDev_Cnt,"aw",%nobits
 4774              		.align	1
 4775              		.set	.LANCHOR5,. + 0
 4778              	FSDev_Cnt:
 4779 0000 0000     		.space	2
 4780              		.section	.bss.FSDev_DevCntMax,"aw",%nobits
 4781              		.align	1
 4782              		.set	.LANCHOR3,. + 0
 4785              	FSDev_DevCntMax:
 4786 0000 0000     		.space	2
 4787              		.section	.bss.FSDev_Pool,"aw",%nobits
 4788              		.align	2
 4789              		.set	.LANCHOR4,. + 0
 4792              	FSDev_Pool:
 4793 0000 00000000 		.space	24
 4793      00000000 
 4793      00000000 
 4793      00000000 
 4793      00000000 
 4794              		.section	.bss.FSDev_Tbl,"aw",%nobits
 4795              		.align	2
 4796              		.set	.LANCHOR2,. + 0
 4799              	FSDev_Tbl:
 4800 0000 00000000 		.space	4
 4801              		.section	.bss.FS_DevDrvCntMax,"aw",%nobits
 4802              		.align	1
 4803              		.set	.LANCHOR1,. + 0
 4806              	FS_DevDrvCntMax:
 4807 0000 0000     		.space	2
 4808              		.section	.bss.FS_DevDrvTbl,"aw",%nobits
 4809              		.align	2
 4810              		.set	.LANCHOR0,. + 0
 4813              	FS_DevDrvTbl:
 4814 0000 00000000 		.space	4
 4815              		.text
 4816              	.Letext0:
 4817              		.file 2 "rtos/uC-CPU/ARM-Cortex-M/ARMv7-M/GNU/cpu.h"
 4818              		.file 3 "rtos/uC-LIB/lib_def.h"
 4819              		.file 4 "rtos/uC-LIB/lib_mem.h"
 4820              		.file 5 "rtos/uC-FS/Source/fs_type.h"
 4821              		.file 6 "rtos/uC-FS/Source/fs_dev.h"
 4822              		.file 7 "rtos/uC-FS/Source/fs_err.h"
 4823              		.file 8 "rtos/uC-FS/Source/fs_ctr.h"
 4824              		.file 9 "rtos/uC-LIB/lib_str.h"
 4825              		.file 10 "rtos/uC-CPU/cpu_core.h"
ARM GAS  /tmp/cccHmdnc.s 			page 168


 4826              		.file 11 "rtos/uC-FS/Source/fs.h"
 4827              		.file 12 "rtos/uC-FS/Source/fs_partition.h"
ARM GAS  /tmp/cccHmdnc.s 			page 169


DEFINED SYMBOLS
                            *ABS*:0000000000000000 fs_dev.c
     /tmp/cccHmdnc.s:18     .text.FSDev_HandleErr:0000000000000000 $t
     /tmp/cccHmdnc.s:25     .text.FSDev_HandleErr:0000000000000000 FSDev_HandleErr
     /tmp/cccHmdnc.s:100    .text.FS_DevDrvFind:0000000000000000 $t
     /tmp/cccHmdnc.s:106    .text.FS_DevDrvFind:0000000000000000 FS_DevDrvFind
     /tmp/cccHmdnc.s:202    .text.FS_DevDrvFind:0000000000000040 $d
     /tmp/cccHmdnc.s:208    .text.FSDev_ObjFind:0000000000000000 $t
     /tmp/cccHmdnc.s:214    .text.FSDev_ObjFind:0000000000000000 FSDev_ObjFind
     /tmp/cccHmdnc.s:300    .text.FSDev_ObjFind:000000000000003c $d
     /tmp/cccHmdnc.s:306    .text.FSDev_NameParse:0000000000000000 $t
     /tmp/cccHmdnc.s:312    .text.FSDev_NameParse:0000000000000000 FSDev_NameParse
     /tmp/cccHmdnc.s:542    .text.FSDev_ObjClr:0000000000000000 $t
     /tmp/cccHmdnc.s:548    .text.FSDev_ObjClr:0000000000000000 FSDev_ObjClr
     /tmp/cccHmdnc.s:613    .text.FSDev_ObjGet:0000000000000000 $t
     /tmp/cccHmdnc.s:619    .text.FSDev_ObjGet:0000000000000000 FSDev_ObjGet
     /tmp/cccHmdnc.s:724    .text.FSDev_ObjGet:0000000000000054 $d
     /tmp/cccHmdnc.s:732    .text.FSDev_ObjFree:0000000000000000 $t
     /tmp/cccHmdnc.s:738    .text.FSDev_ObjFree:0000000000000000 FSDev_ObjFree
     /tmp/cccHmdnc.s:809    .text.FSDev_ObjFree:0000000000000040 $d
     /tmp/cccHmdnc.s:816    .text.FS_DevDrvAdd:0000000000000000 $t
     /tmp/cccHmdnc.s:823    .text.FS_DevDrvAdd:0000000000000000 FS_DevDrvAdd
     /tmp/cccHmdnc.s:1096   .text.FS_DevDrvAdd:00000000000000f4 $d
     /tmp/cccHmdnc.s:1102   .text.FSDev_GetDevCnt:0000000000000000 $t
     /tmp/cccHmdnc.s:1109   .text.FSDev_GetDevCnt:0000000000000000 FSDev_GetDevCnt
     /tmp/cccHmdnc.s:1162   .text.FSDev_GetDevCnt:0000000000000024 $d
     /tmp/cccHmdnc.s:1167   .text.FSDev_GetDevCntMax:0000000000000000 $t
     /tmp/cccHmdnc.s:1174   .text.FSDev_GetDevCntMax:0000000000000000 FSDev_GetDevCntMax
     /tmp/cccHmdnc.s:1192   .text.FSDev_GetDevCntMax:0000000000000008 $d
     /tmp/cccHmdnc.s:1197   .text.FSDev_GetDevName:0000000000000000 $t
     /tmp/cccHmdnc.s:1204   .text.FSDev_GetDevName:0000000000000000 FSDev_GetDevName
     /tmp/cccHmdnc.s:1322   .text.FSDev_GetDevName:0000000000000058 $d
     /tmp/cccHmdnc.s:1328   .text.FSDev_ModuleInit:0000000000000000 $t
     /tmp/cccHmdnc.s:1335   .text.FSDev_ModuleInit:0000000000000000 FSDev_ModuleInit
     /tmp/cccHmdnc.s:1508   .text.FSDev_ModuleInit:00000000000000c4 $d
     /tmp/cccHmdnc.s:1518   .text.FSDev_Acquire:0000000000000000 $t
     /tmp/cccHmdnc.s:1525   .text.FSDev_Acquire:0000000000000000 FSDev_Acquire
     /tmp/cccHmdnc.s:1606   .text.FSDev_Release:0000000000000000 $t
     /tmp/cccHmdnc.s:1613   .text.FSDev_Release:0000000000000000 FSDev_Release
     /tmp/cccHmdnc.s:1688   .text.FSDev_AccessLock:0000000000000000 $t
     /tmp/cccHmdnc.s:1695   .text.FSDev_AccessLock:0000000000000000 FSDev_AccessLock
     /tmp/cccHmdnc.s:1794   .text.FSDev_AccessUnlock:0000000000000000 $t
     /tmp/cccHmdnc.s:1801   .text.FSDev_AccessUnlock:0000000000000000 FSDev_AccessUnlock
     /tmp/cccHmdnc.s:1883   .text.FSDev_Lock:0000000000000000 $t
     /tmp/cccHmdnc.s:1890   .text.FSDev_Lock:0000000000000000 FSDev_Lock
     /tmp/cccHmdnc.s:1938   .text.FSDev_Unlock:0000000000000000 $t
     /tmp/cccHmdnc.s:1945   .text.FSDev_Unlock:0000000000000000 FSDev_Unlock
     /tmp/cccHmdnc.s:1970   .text.FSDev_ReleaseUnlock:0000000000000000 $t
     /tmp/cccHmdnc.s:1977   .text.FSDev_ReleaseUnlock:0000000000000000 FSDev_ReleaseUnlock
     /tmp/cccHmdnc.s:2005   .text.FSDev_Close:0000000000000000 $t
     /tmp/cccHmdnc.s:2012   .text.FSDev_Close:0000000000000000 FSDev_Close
     /tmp/cccHmdnc.s:2175   .text.FSDev_IO_Ctrl:0000000000000000 $t
     /tmp/cccHmdnc.s:2182   .text.FSDev_IO_Ctrl:0000000000000000 FSDev_IO_Ctrl
     /tmp/cccHmdnc.s:2323   .text.FSDev_Open:0000000000000000 $t
     /tmp/cccHmdnc.s:2330   .text.FSDev_Open:0000000000000000 FSDev_Open
     /tmp/cccHmdnc.s:2590   .text.FSDev_Open:00000000000000fe $d
     /tmp/cccHmdnc.s:2674   .text.FSDev_Open:0000000000000162 $d
ARM GAS  /tmp/cccHmdnc.s 			page 170


     /tmp/cccHmdnc.s:2697   .text.FSDev_Open:0000000000000178 $t
     /tmp/cccHmdnc.s:2857   .text.FSDev_QueryLocked:0000000000000000 $t
     /tmp/cccHmdnc.s:2864   .text.FSDev_QueryLocked:0000000000000000 FSDev_QueryLocked
     /tmp/cccHmdnc.s:2907   .text.FSDev_RdLocked:0000000000000000 $t
     /tmp/cccHmdnc.s:2914   .text.FSDev_RdLocked:0000000000000000 FSDev_RdLocked
     /tmp/cccHmdnc.s:3013   .text.FSDev_RefreshLocked:0000000000000000 $t
     /tmp/cccHmdnc.s:3020   .text.FSDev_RefreshLocked:0000000000000000 FSDev_RefreshLocked
     /tmp/cccHmdnc.s:3098   .text.FSDev_RefreshLocked:000000000000004e $d
     /tmp/cccHmdnc.s:3399   .text.FSDev_Refresh:0000000000000000 $t
     /tmp/cccHmdnc.s:3406   .text.FSDev_Refresh:0000000000000000 FSDev_Refresh
     /tmp/cccHmdnc.s:3548   .text.FSDev_AcquireLockChk:0000000000000000 $t
     /tmp/cccHmdnc.s:3555   .text.FSDev_AcquireLockChk:0000000000000000 FSDev_AcquireLockChk
     /tmp/cccHmdnc.s:3713   .text.FSDev_PartitionInit:0000000000000000 $t
     /tmp/cccHmdnc.s:3720   .text.FSDev_PartitionInit:0000000000000000 FSDev_PartitionInit
     /tmp/cccHmdnc.s:3833   .text.FSDev_Query:0000000000000000 $t
     /tmp/cccHmdnc.s:3840   .text.FSDev_Query:0000000000000000 FSDev_Query
     /tmp/cccHmdnc.s:3990   .text.FSDev_Rd:0000000000000000 $t
     /tmp/cccHmdnc.s:3997   .text.FSDev_Rd:0000000000000000 FSDev_Rd
     /tmp/cccHmdnc.s:4095   .text.FSDev_Invalidate:0000000000000000 $t
     /tmp/cccHmdnc.s:4102   .text.FSDev_Invalidate:0000000000000000 FSDev_Invalidate
     /tmp/cccHmdnc.s:4188   .text.FSDev_ReleaseLocked:0000000000000000 $t
     /tmp/cccHmdnc.s:4195   .text.FSDev_ReleaseLocked:0000000000000000 FSDev_ReleaseLocked
     /tmp/cccHmdnc.s:4342   .text.FSDev_SyncLocked:0000000000000000 $t
     /tmp/cccHmdnc.s:4349   .text.FSDev_SyncLocked:0000000000000000 FSDev_SyncLocked
     /tmp/cccHmdnc.s:4381   .text.FSDev_Sync:0000000000000000 $t
     /tmp/cccHmdnc.s:4388   .text.FSDev_Sync:0000000000000000 FSDev_Sync
     /tmp/cccHmdnc.s:4507   .text.FSDev_WrLocked:0000000000000000 $t
     /tmp/cccHmdnc.s:4514   .text.FSDev_WrLocked:0000000000000000 FSDev_WrLocked
     /tmp/cccHmdnc.s:4613   .text.FSDev_Wr:0000000000000000 $t
     /tmp/cccHmdnc.s:4620   .text.FSDev_Wr:0000000000000000 FSDev_Wr
     /tmp/cccHmdnc.s:4718   .text.FSDev_VolAdd:0000000000000000 $t
     /tmp/cccHmdnc.s:4725   .text.FSDev_VolAdd:0000000000000000 FSDev_VolAdd
     /tmp/cccHmdnc.s:4746   .text.FSDev_VolRemove:0000000000000000 $t
     /tmp/cccHmdnc.s:4753   .text.FSDev_VolRemove:0000000000000000 FSDev_VolRemove
     /tmp/cccHmdnc.s:4774   .bss.FSDev_Cnt:0000000000000000 $d
     /tmp/cccHmdnc.s:4778   .bss.FSDev_Cnt:0000000000000000 FSDev_Cnt
     /tmp/cccHmdnc.s:4781   .bss.FSDev_DevCntMax:0000000000000000 $d
     /tmp/cccHmdnc.s:4785   .bss.FSDev_DevCntMax:0000000000000000 FSDev_DevCntMax
     /tmp/cccHmdnc.s:4788   .bss.FSDev_Pool:0000000000000000 $d
     /tmp/cccHmdnc.s:4792   .bss.FSDev_Pool:0000000000000000 FSDev_Pool
     /tmp/cccHmdnc.s:4795   .bss.FSDev_Tbl:0000000000000000 $d
     /tmp/cccHmdnc.s:4799   .bss.FSDev_Tbl:0000000000000000 FSDev_Tbl
     /tmp/cccHmdnc.s:4802   .bss.FS_DevDrvCntMax:0000000000000000 $d
     /tmp/cccHmdnc.s:4806   .bss.FS_DevDrvCntMax:0000000000000000 FS_DevDrvCntMax
     /tmp/cccHmdnc.s:4809   .bss.FS_DevDrvTbl:0000000000000000 $d
     /tmp/cccHmdnc.s:4813   .bss.FS_DevDrvTbl:0000000000000000 FS_DevDrvTbl
     /tmp/cccHmdnc.s:2625   .text.FSDev_Open:0000000000000121 $d
     /tmp/cccHmdnc.s:2625   .text.FSDev_Open:0000000000000122 $t
     /tmp/cccHmdnc.s:3115   .text.FSDev_RefreshLocked:000000000000005f $d
     /tmp/cccHmdnc.s:3115   .text.FSDev_RefreshLocked:0000000000000060 $t
                           .group:0000000000000000 wm4.0.0f5aa60db9403f389c005f20ecce4286
                           .group:0000000000000000 wm4.cpu_def.h.46.baa122a2898bdc40bb50d1f21ead1515
                           .group:0000000000000000 wm4.cpu_cfg.h.45.38a6a562da8b04490c382a226238c57e
                           .group:0000000000000000 wm4.cpu.h.171.3cb15ee3ccb812cbfdf76d1fbfb9eda0
                           .group:0000000000000000 wm4.cpu_core.h.51.7b35a59c319673f88ae4a256248776ec
                           .group:0000000000000000 wm4.lib_def.h.66.6ab2a012067a8e1f4289db5765835062
                           .group:0000000000000000 wm4.cpu_core.h.143.d3b700e12b3a14ed3bee14c822b49a7d
ARM GAS  /tmp/cccHmdnc.s 			page 171


                           .group:0000000000000000 wm4.lib_ascii.h.84.da234f9d4d202bba866fb26067887eec
                           .group:0000000000000000 wm4.lib_cfg.h.40.b2958733f73e73af70f675ca0f89303e
                           .group:0000000000000000 wm4.lib_mem.h.121.89b942a057fb20091baad8bf6b28b1e6
                           .group:0000000000000000 wm4.lib_str.h.60.d6fb3a1336db17c586ed26be94929677
                           .group:0000000000000000 wm4.fs.h.42.4f6311a594ee5619f1ee7a9392eb7faa
                           .group:0000000000000000 wm4.fs_def.h.42.653ad677c23ef93c522ec84af681385d
                           .group:0000000000000000 wm4.fs_cfg.h.116.da4f8e9d0b9040a97ef3bf26c61e90fd
                           .group:0000000000000000 wm4.clk.h.99.39403db6a27321e53b261bbe20b56e1d
                           .group:0000000000000000 wm4.clk_cfg.h.45.428f260ed0fbcfa16fc822c67c85dade
                           .group:0000000000000000 wm4.clk.h.219.c24c7347fcc7691d3157fe73514cb366
                           .group:0000000000000000 wm4.fs_cfg_fs.h.176.c85074fbe881bfa594608376a65f4dc2
                           .group:0000000000000000 wm4.fs_type.h.42.3e681b291920189044ba1da24ae0f22a
                           .group:0000000000000000 wm4.fs_err.h.42.d52bfed31dff3d1419c5cf09952dee67
                           .group:0000000000000000 wm4.fs.h.97.1d629f0ba32b5622ab4e01a254bd98e8
                           .group:0000000000000000 wm4.fs_buf.h.42.0c8ba10968f085926266a27b71b3972d
                           .group:0000000000000000 wm4.fs_dev.h.42.f92a90995a218a52b66320e39323bdf9
                           .group:0000000000000000 wm4.fs_ctr.h.42.9d1398cac157503ac8af114819f7782b
                           .group:0000000000000000 wm4.fs_dev.h.84.0b8682dc82cfd464ab0da30a876c8006
                           .group:0000000000000000 wm4.fs_partition.h.42.447c7a9331f94d1981b8bbd16ad10c84

UNDEFINED SYMBOLS
Str_Cmp_N
Mem_Clr
Str_Len_N
Str_Char_N
Str_Copy_N
Mem_Set
Mem_PoolBlkGet
Mem_PoolBlkFree
CPU_SW_Exception
FS_OS_Lock
FS_OS_Unlock
FS_OS_Init
FS_OS_DevInit
Mem_PoolCreate
Mem_HeapAlloc
FS_OS_DevAccessLock
FS_OS_DevAccessUnlock
FS_OS_DevLock
FS_OS_DevUnlock
FS_MaxSecSizeGet
FSPartition_Init

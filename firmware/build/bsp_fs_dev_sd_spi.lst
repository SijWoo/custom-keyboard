ARM GAS  /tmp/ccQbORTU.s 			page 1


   1              		.cpu cortex-m4
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"bsp_fs_dev_sd_spi.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.text.FSDev_BSP_SPI_Open,"ax",%progbits
  18              		.align	1
  19              		.arch armv7e-m
  20              		.syntax unified
  21              		.thumb
  22              		.thumb_func
  23              		.fpu fpv4-sp-d16
  25              	FSDev_BSP_SPI_Open:
  26              	.LVL0:
  27              	.LFB0:
  28              		.file 1 "bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c"
   1:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** /*
   2:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** ***************************************************************************************************
   3:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** *                                                uC/FS
   4:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** *                                      The Embedded File System
   5:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** *
   6:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** *                         (c) Copyright 2008-2019; Silicon Laboratories Inc.,
   7:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** *                                400 W. Cesar Chavez, Austin, TX 78701
   8:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** *
   9:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** *                   All rights reserved. Protected by international copyright laws.
  10:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** *
  11:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** *                  Your use of this software is subject to your acceptance of the terms
  12:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** *                  of a Silicon Labs Micrium software license, which can be obtained by
  13:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** *                  contacting info@micrium.com. If you do not agree to the terms of this
  14:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** *                  license, you may not use this software.
  15:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** *
  16:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** *                  Please help us continue to provide the Embedded community with the finest
  17:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** *                  software available. Your honesty is greatly appreciated.
  18:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** *
  19:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** *                    You can find our product's documentation at: doc.micrium.com
  20:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** *
  21:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** *                          For more information visit us at: www.micrium.com
  22:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** ***************************************************************************************************
  23:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** */
  24:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** 
  25:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** /*
  26:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** ***************************************************************************************************
  27:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** *
  28:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** *                                      FILE SYSTEM DEVICE DRIVER
  29:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** *                                       SD/MMC CARD - SPI MODE
  30:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** *                                BOARD SUPPORT PACKAGE (BSP) FUNCTIONS
ARM GAS  /tmp/ccQbORTU.s 			page 2


  31:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** *
  32:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** *                                              TEMPLATE
  33:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** *
  34:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** * Filename : bsp_fs_dev_sd_spi.c
  35:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** * Version  : v4.07.06
  36:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** ***************************************************************************************************
  37:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** */
  38:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** 
  39:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** /*
  40:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** ***************************************************************************************************
  41:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** *                                               MODULE
  42:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** ***************************************************************************************************
  43:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** */
  44:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** 
  45:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** #define  FS_DEV_SD_SPI_BSP_MODULE
  46:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** 
  47:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** 
  48:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** /*
  49:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** ***************************************************************************************************
  50:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** *                                            INCLUDE FILES
  51:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** ***************************************************************************************************
  52:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** */
  53:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** 
  54:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** #include  <cpu.h>
  55:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** #include  <fs_type.h>
  56:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** #include  <fs_err.h>
  57:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** #include  <fs_dev_sd_spi.h>
  58:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** 
  59:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** 
  60:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** /*
  61:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** ***************************************************************************************************
  62:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** *                                            LOCAL DEFINES
  63:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** ***************************************************************************************************
  64:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** */
  65:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** 
  66:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** 
  67:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** /*
  68:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** ***************************************************************************************************
  69:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** *                                          REGISTER DEFINES
  70:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** ***************************************************************************************************
  71:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** */
  72:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** 
  73:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** 
  74:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** /*
  75:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** ***************************************************************************************************
  76:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** *                                        REGISTER BIT DEFINES
  77:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** ***************************************************************************************************
  78:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** */
  79:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** 
  80:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** 
  81:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** /*
  82:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** ***************************************************************************************************
  83:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** *                                           LOCAL CONSTANTS
  84:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** ***************************************************************************************************
  85:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** */
  86:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** 
  87:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** 
ARM GAS  /tmp/ccQbORTU.s 			page 3


  88:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** /*
  89:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** ***************************************************************************************************
  90:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** *                                          LOCAL DATA TYPES
  91:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** ***************************************************************************************************
  92:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** */
  93:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** 
  94:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** 
  95:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** /*
  96:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** ***************************************************************************************************
  97:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** *                                            LOCAL TABLES
  98:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** ***************************************************************************************************
  99:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** */
 100:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** 
 101:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** 
 102:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** /*
 103:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** ***************************************************************************************************
 104:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** *                                       LOCAL GLOBAL VARIABLES
 105:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** ***************************************************************************************************
 106:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** */
 107:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** 
 108:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** 
 109:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** /*
 110:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** ***************************************************************************************************
 111:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** *                                            LOCAL MACROS
 112:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** ***************************************************************************************************
 113:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** */
 114:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** 
 115:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** 
 116:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** /*
 117:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** ***************************************************************************************************
 118:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** *                                      LOCAL FUNCTION PROTOTYPES
 119:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** ***************************************************************************************************
 120:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** */
 121:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** 
 122:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c ****                                                                 /* ------------------ SPI API FNCTS
 123:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c ****                                                                 /* Open (initialize) SPI.          
 124:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** static  CPU_BOOLEAN  FSDev_BSP_SPI_Open              (FS_QTY         unit_nbr);
 125:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** 
 126:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c ****                                                                 /* Close (uninitialize) SPI.       
 127:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** static  void         FSDev_BSP_SPI_Close             (FS_QTY         unit_nbr);
 128:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** 
 129:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c ****                                                                 /* Acquire SPI lock.               
 130:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** static  void         FSDev_BSP_SPI_Lock              (FS_QTY         unit_nbr);
 131:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** 
 132:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c ****                                                                 /* Release SPI lock.               
 133:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** static  void         FSDev_BSP_SPI_Unlock            (FS_QTY         unit_nbr);
 134:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** 
 135:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c ****                                                                 /* Rd from SPI.                    
 136:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** static  void         FSDev_BSP_SPI_Rd                (FS_QTY         unit_nbr,
 137:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c ****                                                       void          *p_dest,
 138:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c ****                                                       CPU_SIZE_T     cnt);
 139:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** 
 140:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c ****                                                                 /* Wr to SPI.                      
 141:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** static  void         FSDev_BSP_SPI_Wr                (FS_QTY         unit_nbr,
 142:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c ****                                                       void          *p_src,
 143:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c ****                                                       CPU_SIZE_T     cnt);
 144:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** 
ARM GAS  /tmp/ccQbORTU.s 			page 4


 145:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c ****                                                                 /* En SD/MMC chip sel.             
 146:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** static  void         FSDev_BSP_SPI_ChipSelEn         (FS_QTY         unit_nbr);
 147:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** 
 148:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c ****                                                                 /* Dis SD/MMC chip sel.            
 149:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** static  void         FSDev_BSP_SPI_ChipSelDis        (FS_QTY         unit_nbr);
 150:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** 
 151:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c ****                                                                 /* Set SPI clk freq.               
 152:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** static  void         FSDev_BSP_SPI_SetClkFreq        (FS_QTY         unit_nbr,
 153:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c ****                                                       CPU_INT32U     freq);
 154:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** 
 155:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** 
 156:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** /*
 157:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** ***************************************************************************************************
 158:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** *                                         INTERFACE STRUCTURE
 159:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** ***************************************************************************************************
 160:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** */
 161:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** 
 162:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** const  FS_DEV_SPI_API  FSDev_SD_SPI_BSP_SPI = {
 163:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c ****     FSDev_BSP_SPI_Open,
 164:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c ****     FSDev_BSP_SPI_Close,
 165:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c ****     FSDev_BSP_SPI_Lock,
 166:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c ****     FSDev_BSP_SPI_Unlock,
 167:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c ****     FSDev_BSP_SPI_Rd,
 168:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c ****     FSDev_BSP_SPI_Wr,
 169:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c ****     FSDev_BSP_SPI_ChipSelEn,
 170:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c ****     FSDev_BSP_SPI_ChipSelDis,
 171:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c ****     FSDev_BSP_SPI_SetClkFreq,
 172:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** };
 173:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** 
 174:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** 
 175:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** /*
 176:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** ***************************************************************************************************
 177:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** *                                     LOCAL CONFIGURATION ERRORS
 178:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** ***************************************************************************************************
 179:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** */
 180:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** 
 181:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** 
 182:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** /*
 183:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** ***************************************************************************************************
 184:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** ***************************************************************************************************
 185:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** *                                    FILE SYSTEM SD SPI FUNCTIONS
 186:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** ***************************************************************************************************
 187:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** ***************************************************************************************************
 188:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** */
 189:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** 
 190:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** /*
 191:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** ***************************************************************************************************
 192:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** *                                        FSDev_BSP_SPI_Open()
 193:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** *
 194:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** * Description : Open (initialize) SPI for SD/MMC.
 195:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** *
 196:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** * Argument(s) : unit_nbr  Unit number of SD/MMC card.
 197:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** *
 198:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** * Return(s)   : DEF_OK,   if interface was opened.
 199:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** *               DEF_FAIL, otherwise.
 200:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** *
 201:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** * Note(s)     : (1) This function will be called every time the device is opened.
ARM GAS  /tmp/ccQbORTU.s 			page 5


 202:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** *
 203:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** *               (2) Several aspects of SPI communication may need to be configured :
 204:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** *
 205:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** *                   (a) CLOCK POLARITY & PHASE (CPOL & CPHA).  SPI communication takes place in any
 206:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** *                       four modes, depending on the clock phase & clock polarity settings :
 207:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** *
 208:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** *                       (1) If CPOL = 0, the clock is low  when inactive.
 209:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** *
 210:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** *                           If CPOL = 1, the clock is high when inactive.
 211:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** *
 212:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** *                       (2) If CPHA = 0, data is 'read'    on the leading   edge of the clock &
 213:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** *                                                'changed' on the following edge of the clock.
 214:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** *
 215:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** *                           If CPHA = 1, data is 'changed' on the following edge of the clock &
 216:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** *                                                'read'    on the leading   edge of the clock.
 217:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** *
 218:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** *                       The driver should configure the SPI for CPOL = 0, CPHA = 0.  This means tha
 219:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** *                       data (i.e., bits) are read when a low->high clock transition occurs & chang
 220:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** *                       when a high->low clock transition occurs.
 221:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** *
 222:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** *                   (b) TRANSFER UNIT LENGTH.  A transfer unit is always 8-bits.
 223:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** *
 224:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** *                   (c) SHIFT DIRECTION.  The most significant bit should always be transmitted fir
 225:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** *
 226:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** *                   (d) CLOCK FREQUENCY.  See 'FSDev_BSP_SPI_SetClkFreq()  Note #1'.
 227:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** *
 228:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** *               (3) The CS (Chip Select) MUST be configured as a GPIO output; it should not be cont
 229:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** *                   by the CPU's SPI peripheral.  The functions 'FSDev_BSP_SPI_ChipSelEn()' and
 230:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** *                  'FSDev_BSP_SPI_ChipSelDis()' manually enable and disable the CS.
 231:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** *
 232:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** *               (4) A SD/MMC slot is connected to the following pins :
 233:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** *
 234:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** *                   ----------------------------------------------
 235:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** *                   |   #### NAME   |  #### PIO #  | SD/MMC NAME |
 236:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** *                   ----------------------------------------------
 237:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** *                   |    SSEL       |    P0[16]    | CS  (pin 1) |
 238:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** *                   |    MOSI       |    P0[18]    | DI  (pin 2) |
 239:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** *                   |    SCK        |    P0[15]    | CLK (pin 5) |
 240:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** *                   |    MISO       |    P0[17]    | D0  (pin 7) |
 241:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** *                   ----------------------------------------------
 242:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** ***************************************************************************************************
 243:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** */
 244:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** 
 245:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** static  CPU_BOOLEAN  FSDev_BSP_SPI_Open (FS_QTY  unit_nbr)
 246:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** {
  29              		.loc 1 246 1 view -0
  30              		.cfi_startproc
  31              		@ args = 0, pretend = 0, frame = 0
  32              		@ frame_needed = 0, uses_anonymous_args = 0
  33              		@ link register save eliminated.
 247:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c ****     (void)unit_nbr;
  34              		.loc 1 247 5 view .LVU1
 248:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** 
 249:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c ****     return (DEF_OK);
  35              		.loc 1 249 5 view .LVU2
 250:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** }
  36              		.loc 1 250 1 is_stmt 0 view .LVU3
ARM GAS  /tmp/ccQbORTU.s 			page 6


  37 0000 0120     		movs	r0, #1
  38              	.LVL1:
  39              		.loc 1 250 1 view .LVU4
  40 0002 7047     		bx	lr
  41              		.cfi_endproc
  42              	.LFE0:
  44              		.section	.text.FSDev_BSP_SPI_Close,"ax",%progbits
  45              		.align	1
  46              		.syntax unified
  47              		.thumb
  48              		.thumb_func
  49              		.fpu fpv4-sp-d16
  51              	FSDev_BSP_SPI_Close:
  52              	.LVL2:
  53              	.LFB1:
 251:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** 
 252:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** 
 253:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** /*
 254:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** ***************************************************************************************************
 255:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** *                                        FSDev_BSP_SPI_Close()
 256:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** *
 257:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** * Description : Close (uninitialize) SPI for SD/MMC.
 258:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** *
 259:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** * Argument(s) : unit_nbr  Unit number of SD/MMC card.
 260:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** *
 261:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** * Return(s)   : none.
 262:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** *
 263:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** * Note(s)     : (1) This function will be called EVERY time the device is closed.
 264:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** ***************************************************************************************************
 265:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** */
 266:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** 
 267:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** static  void  FSDev_BSP_SPI_Close (FS_QTY  unit_nbr)
 268:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** {
  54              		.loc 1 268 1 is_stmt 1 view -0
  55              		.cfi_startproc
  56              		@ args = 0, pretend = 0, frame = 0
  57              		@ frame_needed = 0, uses_anonymous_args = 0
  58              		@ link register save eliminated.
 269:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c ****     (void)unit_nbr;
  59              		.loc 1 269 5 view .LVU6
 270:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** }
  60              		.loc 1 270 1 is_stmt 0 view .LVU7
  61 0000 7047     		bx	lr
  62              		.cfi_endproc
  63              	.LFE1:
  65              		.section	.text.FSDev_BSP_SPI_Lock,"ax",%progbits
  66              		.align	1
  67              		.syntax unified
  68              		.thumb
  69              		.thumb_func
  70              		.fpu fpv4-sp-d16
  72              	FSDev_BSP_SPI_Lock:
  73              	.LVL3:
  74              	.LFB2:
 271:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** 
 272:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** 
 273:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** /*
ARM GAS  /tmp/ccQbORTU.s 			page 7


 274:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** ***************************************************************************************************
 275:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** *                                        FSDev_BSP_SPI_Lock()
 276:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** *
 277:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** * Description : Acquire SPI lock.
 278:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** *
 279:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** * Argument(s) : unit_nbr  Unit number of SD/MMC card.
 280:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** *
 281:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** * Return(s)   : none.
 282:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** *
 283:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** * Note(s)     : (1) This function will be called before the SD/MMC driver begins to access the SPI.
 284:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** *                   application should NOT use the same bus to access another device until the matc
 285:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** *                   call to 'FSDev_BSP_SPI_Unlock()' has been made.
 286:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** ***************************************************************************************************
 287:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** */
 288:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** 
 289:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** static  void  FSDev_BSP_SPI_Lock (FS_QTY  unit_nbr)
 290:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** {
  75              		.loc 1 290 1 is_stmt 1 view -0
  76              		.cfi_startproc
  77              		@ args = 0, pretend = 0, frame = 0
  78              		@ frame_needed = 0, uses_anonymous_args = 0
  79              		@ link register save eliminated.
 291:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c ****     (void)unit_nbr;
  80              		.loc 1 291 5 view .LVU9
 292:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** }
  81              		.loc 1 292 1 is_stmt 0 view .LVU10
  82 0000 7047     		bx	lr
  83              		.cfi_endproc
  84              	.LFE2:
  86              		.section	.text.FSDev_BSP_SPI_Unlock,"ax",%progbits
  87              		.align	1
  88              		.syntax unified
  89              		.thumb
  90              		.thumb_func
  91              		.fpu fpv4-sp-d16
  93              	FSDev_BSP_SPI_Unlock:
  94              	.LVL4:
  95              	.LFB3:
 293:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** 
 294:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** 
 295:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** /*
 296:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** ***************************************************************************************************
 297:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** *                                       FSDev_BSP_SPI_Unlock()
 298:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** *
 299:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** * Description : Release SPI lock.
 300:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** *
 301:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** * Argument(s) : unit_nbr  Unit number of SD/MMC card.
 302:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** *
 303:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** * Return(s)   : none.
 304:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** *
 305:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** * Note(s)     : (1) 'FSDev_BSP_SPI_Lock()' will be called before the SD/MMC driver begins to access
 306:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** *                   The application should NOT use the same bus to access another device until the
 307:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** *                   matching call to this function has been made.
 308:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** ***************************************************************************************************
 309:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** */
 310:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** 
 311:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** static  void  FSDev_BSP_SPI_Unlock (FS_QTY  unit_nbr)
ARM GAS  /tmp/ccQbORTU.s 			page 8


 312:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** {
  96              		.loc 1 312 1 is_stmt 1 view -0
  97              		.cfi_startproc
  98              		@ args = 0, pretend = 0, frame = 0
  99              		@ frame_needed = 0, uses_anonymous_args = 0
 100              		@ link register save eliminated.
 313:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c ****     (void)unit_nbr;
 101              		.loc 1 313 5 view .LVU12
 314:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** }
 102              		.loc 1 314 1 is_stmt 0 view .LVU13
 103 0000 7047     		bx	lr
 104              		.cfi_endproc
 105              	.LFE3:
 107              		.section	.text.FSDev_BSP_SPI_Rd,"ax",%progbits
 108              		.align	1
 109              		.syntax unified
 110              		.thumb
 111              		.thumb_func
 112              		.fpu fpv4-sp-d16
 114              	FSDev_BSP_SPI_Rd:
 115              	.LVL5:
 116              	.LFB4:
 315:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** 
 316:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** 
 317:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** /*
 318:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** ***************************************************************************************************
 319:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** *                                         FSDev_BSP_SPI_Rd()
 320:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** *
 321:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** * Description : Read from SPI.
 322:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** *
 323:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** * Argument(s) : unit_nbr  Unit number of SD/MMC card.
 324:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** *
 325:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** *               p_dest    Pointer to destination memory buffer.
 326:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** *
 327:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** *               cnt       Number of octets to read.
 328:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** *
 329:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** * Return(s)   : none.
 330:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** *
 331:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** * Note(s)     : none.
 332:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** ***************************************************************************************************
 333:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** */
 334:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** 
 335:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** static  void  FSDev_BSP_SPI_Rd (FS_QTY       unit_nbr,
 336:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c ****                                 void        *p_dest,
 337:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c ****                                 CPU_SIZE_T   cnt)
 338:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** {
 117              		.loc 1 338 1 is_stmt 1 view -0
 118              		.cfi_startproc
 119              		@ args = 0, pretend = 0, frame = 0
 120              		@ frame_needed = 0, uses_anonymous_args = 0
 121              		@ link register save eliminated.
 339:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c ****     (void)unit_nbr;
 122              		.loc 1 339 5 view .LVU15
 340:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c ****     (void)p_dest;
 123              		.loc 1 340 5 view .LVU16
 341:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c ****     (void)cnt;
 124              		.loc 1 341 5 view .LVU17
ARM GAS  /tmp/ccQbORTU.s 			page 9


 342:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** }
 125              		.loc 1 342 1 is_stmt 0 view .LVU18
 126 0000 7047     		bx	lr
 127              		.cfi_endproc
 128              	.LFE4:
 130              		.section	.text.FSDev_BSP_SPI_Wr,"ax",%progbits
 131              		.align	1
 132              		.syntax unified
 133              		.thumb
 134              		.thumb_func
 135              		.fpu fpv4-sp-d16
 137              	FSDev_BSP_SPI_Wr:
 138              	.LVL6:
 139              	.LFB5:
 343:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** 
 344:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** 
 345:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** /*
 346:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** ***************************************************************************************************
 347:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** *                                         FSDev_BSP_SPI_Wr()
 348:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** *
 349:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** * Description : Write to SPI.
 350:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** *
 351:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** * Argument(s) : unit_nbr  Unit number of SD/MMC card.
 352:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** *
 353:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** *               p_src     Pointer to source memory buffer.
 354:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** *
 355:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** *               cnt       Number of octets to write.
 356:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** *
 357:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** * Return(s)   : none.
 358:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** *
 359:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** * Note(s)     : none.
 360:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** ***************************************************************************************************
 361:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** */
 362:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** 
 363:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** static  void  FSDev_BSP_SPI_Wr (FS_QTY       unit_nbr,
 364:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c ****                                 void        *p_src,
 365:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c ****                                 CPU_SIZE_T   cnt)
 366:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** {
 140              		.loc 1 366 1 is_stmt 1 view -0
 141              		.cfi_startproc
 142              		@ args = 0, pretend = 0, frame = 0
 143              		@ frame_needed = 0, uses_anonymous_args = 0
 144              		@ link register save eliminated.
 367:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c ****     (void)unit_nbr;
 145              		.loc 1 367 5 view .LVU20
 368:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c ****     (void)p_src;
 146              		.loc 1 368 5 view .LVU21
 369:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c ****     (void)cnt;
 147              		.loc 1 369 5 view .LVU22
 370:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** }
 148              		.loc 1 370 1 is_stmt 0 view .LVU23
 149 0000 7047     		bx	lr
 150              		.cfi_endproc
 151              	.LFE5:
 153              		.section	.text.FSDev_BSP_SPI_ChipSelEn,"ax",%progbits
 154              		.align	1
 155              		.syntax unified
ARM GAS  /tmp/ccQbORTU.s 			page 10


 156              		.thumb
 157              		.thumb_func
 158              		.fpu fpv4-sp-d16
 160              	FSDev_BSP_SPI_ChipSelEn:
 161              	.LVL7:
 162              	.LFB6:
 371:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** 
 372:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** 
 373:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** /*
 374:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** ***************************************************************************************************
 375:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** *                                      FSDev_BSP_SPI_ChipSelEn()
 376:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** *
 377:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** * Description : Enable SD/MMC chip select.
 378:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** *
 379:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** * Argument(s) : unit_nbr  Unit number of SD/MMC card.
 380:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** *
 381:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** * Return(s)   : none.
 382:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** *
 383:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** * Note(s)     : (1) The chip select is typically 'active low'; to enable the card, the chip select 
 384:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** *                   should be cleared.
 385:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** ***************************************************************************************************
 386:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** */
 387:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** 
 388:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** static  void  FSDev_BSP_SPI_ChipSelEn (FS_QTY  unit_nbr)
 389:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** {
 163              		.loc 1 389 1 is_stmt 1 view -0
 164              		.cfi_startproc
 165              		@ args = 0, pretend = 0, frame = 0
 166              		@ frame_needed = 0, uses_anonymous_args = 0
 167              		@ link register save eliminated.
 390:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c ****     (void)unit_nbr;
 168              		.loc 1 390 5 view .LVU25
 391:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** }
 169              		.loc 1 391 1 is_stmt 0 view .LVU26
 170 0000 7047     		bx	lr
 171              		.cfi_endproc
 172              	.LFE6:
 174              		.section	.text.FSDev_BSP_SPI_ChipSelDis,"ax",%progbits
 175              		.align	1
 176              		.syntax unified
 177              		.thumb
 178              		.thumb_func
 179              		.fpu fpv4-sp-d16
 181              	FSDev_BSP_SPI_ChipSelDis:
 182              	.LVL8:
 183              	.LFB7:
 392:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** 
 393:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** 
 394:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** /*
 395:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** ***************************************************************************************************
 396:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** *                                     FSDev_BSP_SPI_ChipSelDis()
 397:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** *
 398:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** * Description : Disable SD/MMC chip select.
 399:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** *
 400:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** * Argument(s) : unit_nbr  Unit number of SD/MMC card.
 401:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** *
 402:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** * Return(s)   : none.
ARM GAS  /tmp/ccQbORTU.s 			page 11


 403:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** *
 404:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** * Note(s)     : (1) The chip select is typically 'active low'; to disable the card, the chip select
 405:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** *                   should be set.
 406:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** ***************************************************************************************************
 407:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** */
 408:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** 
 409:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** static  void  FSDev_BSP_SPI_ChipSelDis (FS_QTY  unit_nbr)
 410:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** {
 184              		.loc 1 410 1 is_stmt 1 view -0
 185              		.cfi_startproc
 186              		@ args = 0, pretend = 0, frame = 0
 187              		@ frame_needed = 0, uses_anonymous_args = 0
 188              		@ link register save eliminated.
 411:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c ****     (void)unit_nbr;
 189              		.loc 1 411 5 view .LVU28
 412:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** }
 190              		.loc 1 412 1 is_stmt 0 view .LVU29
 191 0000 7047     		bx	lr
 192              		.cfi_endproc
 193              	.LFE7:
 195              		.section	.text.FSDev_BSP_SPI_SetClkFreq,"ax",%progbits
 196              		.align	1
 197              		.syntax unified
 198              		.thumb
 199              		.thumb_func
 200              		.fpu fpv4-sp-d16
 202              	FSDev_BSP_SPI_SetClkFreq:
 203              	.LVL9:
 204              	.LFB8:
 413:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** 
 414:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** 
 415:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** /*
 416:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** ***************************************************************************************************
 417:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** *                                     FSDev_BSP_SPI_SetClkFreq()
 418:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** *
 419:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** * Description : Set SPI clock frequency.
 420:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** *
 421:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** * Argument(s) : unit_nbr  Unit number of SD/MMC card.
 422:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** *
 423:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** *               freq      Clock frequency, in Hz.
 424:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** *
 425:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** * Return(s)   : none.
 426:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** *
 427:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** * Note(s)     : (1) The effective clock frequency MUST be no more than 'freq'.  If the frequency ca
 428:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** *                   configured equal to 'freq', it should be configured less than 'freq'.
 429:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** ***************************************************************************************************
 430:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** */
 431:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** 
 432:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** static  void  FSDev_BSP_SPI_SetClkFreq (FS_QTY      unit_nbr,
 433:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c ****                                         CPU_INT32U  freq)
 434:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** {
 205              		.loc 1 434 1 is_stmt 1 view -0
 206              		.cfi_startproc
 207              		@ args = 0, pretend = 0, frame = 0
 208              		@ frame_needed = 0, uses_anonymous_args = 0
 209              		@ link register save eliminated.
 435:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c ****     (void)unit_nbr;
ARM GAS  /tmp/ccQbORTU.s 			page 12


 210              		.loc 1 435 5 view .LVU31
 436:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c ****     (void)freq;
 211              		.loc 1 436 5 view .LVU32
 437:bsp/STMicroelectronics/rtos/bsp_fs_dev_sd_spi.c **** }
 212              		.loc 1 437 1 is_stmt 0 view .LVU33
 213 0000 7047     		bx	lr
 214              		.cfi_endproc
 215              	.LFE8:
 217              		.global	FSDev_SD_SPI_BSP_SPI
 218              		.section	.rodata.FSDev_SD_SPI_BSP_SPI,"a"
 219              		.align	2
 222              	FSDev_SD_SPI_BSP_SPI:
 223 0000 00000000 		.word	FSDev_BSP_SPI_Open
 224 0004 00000000 		.word	FSDev_BSP_SPI_Close
 225 0008 00000000 		.word	FSDev_BSP_SPI_Lock
 226 000c 00000000 		.word	FSDev_BSP_SPI_Unlock
 227 0010 00000000 		.word	FSDev_BSP_SPI_Rd
 228 0014 00000000 		.word	FSDev_BSP_SPI_Wr
 229 0018 00000000 		.word	FSDev_BSP_SPI_ChipSelEn
 230 001c 00000000 		.word	FSDev_BSP_SPI_ChipSelDis
 231 0020 00000000 		.word	FSDev_BSP_SPI_SetClkFreq
 232              		.text
 233              	.Letext0:
 234              		.file 2 "rtos/uC-CPU/ARM-Cortex-M/ARMv7-M/GNU/cpu.h"
 235              		.file 3 "rtos/uC-LIB/lib_mem.h"
 236              		.file 4 "rtos/uC-FS/Source/fs_type.h"
 237              		.file 5 "rtos/uC-FS/Dev/SD/SPI/../../../Source/fs_dev.h"
 238              		.file 6 "rtos/uC-FS/Source/fs_err.h"
 239              		.file 7 "rtos/uC-FS/Dev/SD/SPI/../../../Source/fs_ctr.h"
 240              		.file 8 "rtos/uC-FS/Dev/SD/SPI/fs_dev_sd_spi.h"
ARM GAS  /tmp/ccQbORTU.s 			page 13


DEFINED SYMBOLS
                            *ABS*:0000000000000000 bsp_fs_dev_sd_spi.c
     /tmp/ccQbORTU.s:18     .text.FSDev_BSP_SPI_Open:0000000000000000 $t
     /tmp/ccQbORTU.s:25     .text.FSDev_BSP_SPI_Open:0000000000000000 FSDev_BSP_SPI_Open
     /tmp/ccQbORTU.s:45     .text.FSDev_BSP_SPI_Close:0000000000000000 $t
     /tmp/ccQbORTU.s:51     .text.FSDev_BSP_SPI_Close:0000000000000000 FSDev_BSP_SPI_Close
     /tmp/ccQbORTU.s:66     .text.FSDev_BSP_SPI_Lock:0000000000000000 $t
     /tmp/ccQbORTU.s:72     .text.FSDev_BSP_SPI_Lock:0000000000000000 FSDev_BSP_SPI_Lock
     /tmp/ccQbORTU.s:87     .text.FSDev_BSP_SPI_Unlock:0000000000000000 $t
     /tmp/ccQbORTU.s:93     .text.FSDev_BSP_SPI_Unlock:0000000000000000 FSDev_BSP_SPI_Unlock
     /tmp/ccQbORTU.s:108    .text.FSDev_BSP_SPI_Rd:0000000000000000 $t
     /tmp/ccQbORTU.s:114    .text.FSDev_BSP_SPI_Rd:0000000000000000 FSDev_BSP_SPI_Rd
     /tmp/ccQbORTU.s:131    .text.FSDev_BSP_SPI_Wr:0000000000000000 $t
     /tmp/ccQbORTU.s:137    .text.FSDev_BSP_SPI_Wr:0000000000000000 FSDev_BSP_SPI_Wr
     /tmp/ccQbORTU.s:154    .text.FSDev_BSP_SPI_ChipSelEn:0000000000000000 $t
     /tmp/ccQbORTU.s:160    .text.FSDev_BSP_SPI_ChipSelEn:0000000000000000 FSDev_BSP_SPI_ChipSelEn
     /tmp/ccQbORTU.s:175    .text.FSDev_BSP_SPI_ChipSelDis:0000000000000000 $t
     /tmp/ccQbORTU.s:181    .text.FSDev_BSP_SPI_ChipSelDis:0000000000000000 FSDev_BSP_SPI_ChipSelDis
     /tmp/ccQbORTU.s:196    .text.FSDev_BSP_SPI_SetClkFreq:0000000000000000 $t
     /tmp/ccQbORTU.s:202    .text.FSDev_BSP_SPI_SetClkFreq:0000000000000000 FSDev_BSP_SPI_SetClkFreq
     /tmp/ccQbORTU.s:222    .rodata.FSDev_SD_SPI_BSP_SPI:0000000000000000 FSDev_SD_SPI_BSP_SPI
     /tmp/ccQbORTU.s:219    .rodata.FSDev_SD_SPI_BSP_SPI:0000000000000000 $d
                           .group:0000000000000000 wm4.0.0f5aa60db9403f389c005f20ecce4286
                           .group:0000000000000000 wm4.cpu_def.h.46.baa122a2898bdc40bb50d1f21ead1515
                           .group:0000000000000000 wm4.cpu_cfg.h.45.38a6a562da8b04490c382a226238c57e
                           .group:0000000000000000 wm4.cpu.h.171.3cb15ee3ccb812cbfdf76d1fbfb9eda0
                           .group:0000000000000000 wm4.fs_type.h.42.0906d0337a2df5da9e27cec176b255f1
                           .group:0000000000000000 wm4.lib_def.h.66.6ab2a012067a8e1f4289db5765835062
                           .group:0000000000000000 wm4.cpu_core.h.51.bda0b8f45c33e87ce41267758624493c
                           .group:0000000000000000 wm4.lib_cfg.h.40.b2958733f73e73af70f675ca0f89303e
                           .group:0000000000000000 wm4.lib_mem.h.121.89b942a057fb20091baad8bf6b28b1e6
                           .group:0000000000000000 wm4.clk.h.99.39403db6a27321e53b261bbe20b56e1d
                           .group:0000000000000000 wm4.lib_str.h.60.32f6cabaf9bf142bd5051c414a220578
                           .group:0000000000000000 wm4.lib_ascii.h.84.da234f9d4d202bba866fb26067887eec
                           .group:0000000000000000 wm4.lib_str.h.174.5879a17e9fe25aed81d2c99c1603a671
                           .group:0000000000000000 wm4.clk_cfg.h.45.428f260ed0fbcfa16fc822c67c85dade
                           .group:0000000000000000 wm4.clk.h.219.c24c7347fcc7691d3157fe73514cb366
                           .group:0000000000000000 wm4.fs_def.h.42.653ad677c23ef93c522ec84af681385d
                           .group:0000000000000000 wm4.fs_cfg.h.116.da4f8e9d0b9040a97ef3bf26c61e90fd
                           .group:0000000000000000 wm4.fs_cfg_fs.h.176.c85074fbe881bfa594608376a65f4dc2
                           .group:0000000000000000 wm4.fs_type.h.139.acab71eb554f7e54c56a7894094211e6
                           .group:0000000000000000 wm4.fs_err.h.42.d52bfed31dff3d1419c5cf09952dee67
                           .group:0000000000000000 wm4.fs_dev_sd_spi.h.61.c7e90cfbafee903251d82d4271e26f25
                           .group:0000000000000000 wm4.fs_dev.h.42.457d0b7de373584765db5fbe40e7c30d
                           .group:0000000000000000 wm4.fs_ctr.h.42.9d1398cac157503ac8af114819f7782b
                           .group:0000000000000000 wm4.fs_dev.h.84.0b8682dc82cfd464ab0da30a876c8006
                           .group:0000000000000000 wm4.fs_dev_sd.h.51.8fab0a2de1a39903165fb5d84ccccc96
                           .group:0000000000000000 wm4.fs_dev_sd.h.87.291a6dec37946aecadc14eb5adc7a3fa

NO UNDEFINED SYMBOLS

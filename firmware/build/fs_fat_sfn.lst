ARM GAS  /tmp/ccpi2Pe2.s 			page 1


   1              		.cpu cortex-m4
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"fs_fat_sfn.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.text.FS_FAT_SFN_Parse,"ax",%progbits
  18              		.align	1
  19              		.arch armv7e-m
  20              		.syntax unified
  21              		.thumb
  22              		.thumb_func
  23              		.fpu fpv4-sp-d16
  25              	FS_FAT_SFN_Parse:
  26              	.LVL0:
  27              	.LFB11:
  28              		.file 1 "rtos/uC-FS/FAT/fs_fat_sfn.c"
   1:rtos/uC-FS/FAT/fs_fat_sfn.c **** /*
   2:rtos/uC-FS/FAT/fs_fat_sfn.c **** ***************************************************************************************************
   3:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                                                uC/FS
   4:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                                      The Embedded File System
   5:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
   6:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                         (c) Copyright 2008-2019; Silicon Laboratories Inc.,
   7:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                                400 W. Cesar Chavez, Austin, TX 78701
   8:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
   9:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                   All rights reserved. Protected by international copyright laws.
  10:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
  11:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                  Your use of this software is subject to your acceptance of the terms
  12:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                  of a Silicon Labs Micrium software license, which can be obtained by
  13:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                  contacting info@micrium.com. If you do not agree to the terms of this
  14:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                  license, you may not use this software.
  15:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
  16:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                  Please help us continue to provide the Embedded community with the finest
  17:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                  software available. Your honesty is greatly appreciated.
  18:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
  19:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                    You can find our product's documentation at: doc.micrium.com
  20:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
  21:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                          For more information visit us at: www.micrium.com
  22:rtos/uC-FS/FAT/fs_fat_sfn.c **** ***************************************************************************************************
  23:rtos/uC-FS/FAT/fs_fat_sfn.c **** */
  24:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
  25:rtos/uC-FS/FAT/fs_fat_sfn.c **** /*
  26:rtos/uC-FS/FAT/fs_fat_sfn.c **** ***************************************************************************************************
  27:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
  28:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                                     FILE SYSTEM FAT MANAGEMENT
  29:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
  30:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                                       SHORT FILE NAME SUPPORT
ARM GAS  /tmp/ccpi2Pe2.s 			page 2


  31:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
  32:rtos/uC-FS/FAT/fs_fat_sfn.c **** * Filename : fs_fat_sfn.c
  33:rtos/uC-FS/FAT/fs_fat_sfn.c **** * Version  : v4.07.06
  34:rtos/uC-FS/FAT/fs_fat_sfn.c **** ***************************************************************************************************
  35:rtos/uC-FS/FAT/fs_fat_sfn.c **** */
  36:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
  37:rtos/uC-FS/FAT/fs_fat_sfn.c **** /*
  38:rtos/uC-FS/FAT/fs_fat_sfn.c **** ***************************************************************************************************
  39:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                                               MODULE
  40:rtos/uC-FS/FAT/fs_fat_sfn.c **** ***************************************************************************************************
  41:rtos/uC-FS/FAT/fs_fat_sfn.c **** */
  42:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
  43:rtos/uC-FS/FAT/fs_fat_sfn.c **** #define  MICRIUM_SOURCE
  44:rtos/uC-FS/FAT/fs_fat_sfn.c **** #define  FS_FAT_SFN_MODULE
  45:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
  46:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
  47:rtos/uC-FS/FAT/fs_fat_sfn.c **** /*
  48:rtos/uC-FS/FAT/fs_fat_sfn.c **** ***************************************************************************************************
  49:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                                            INCLUDE FILES
  50:rtos/uC-FS/FAT/fs_fat_sfn.c **** ***************************************************************************************************
  51:rtos/uC-FS/FAT/fs_fat_sfn.c **** */
  52:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
  53:rtos/uC-FS/FAT/fs_fat_sfn.c **** #include  <lib_ascii.h>
  54:rtos/uC-FS/FAT/fs_fat_sfn.c **** #include  <lib_mem.h>
  55:rtos/uC-FS/FAT/fs_fat_sfn.c **** #include  <clk.h>
  56:rtos/uC-FS/FAT/fs_fat_sfn.c **** #include  "../Source/fs.h"
  57:rtos/uC-FS/FAT/fs_fat_sfn.c **** #include  "../Source/fs_buf.h"
  58:rtos/uC-FS/FAT/fs_fat_sfn.c **** #include  "../Source/fs_vol.h"
  59:rtos/uC-FS/FAT/fs_fat_sfn.c **** #include  "fs_fat.h"
  60:rtos/uC-FS/FAT/fs_fat_sfn.c **** #include  "fs_fat_journal.h"
  61:rtos/uC-FS/FAT/fs_fat_sfn.c **** #include  "fs_fat_sfn.h"
  62:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
  63:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
  64:rtos/uC-FS/FAT/fs_fat_sfn.c **** /*
  65:rtos/uC-FS/FAT/fs_fat_sfn.c **** ***************************************************************************************************
  66:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                                               MODULE
  67:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
  68:rtos/uC-FS/FAT/fs_fat_sfn.c **** * Note(s) : (1) See 'fs_fat.h  MODULE'.
  69:rtos/uC-FS/FAT/fs_fat_sfn.c **** ***************************************************************************************************
  70:rtos/uC-FS/FAT/fs_fat_sfn.c **** */
  71:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
  72:rtos/uC-FS/FAT/fs_fat_sfn.c **** #ifdef   FS_FAT_MODULE_PRESENT                                  /* See Note #1.                    
  73:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
  74:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
  75:rtos/uC-FS/FAT/fs_fat_sfn.c **** /*
  76:rtos/uC-FS/FAT/fs_fat_sfn.c **** ***************************************************************************************************
  77:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                                            LOCAL DEFINES
  78:rtos/uC-FS/FAT/fs_fat_sfn.c **** ***************************************************************************************************
  79:rtos/uC-FS/FAT/fs_fat_sfn.c **** */
  80:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
  81:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
  82:rtos/uC-FS/FAT/fs_fat_sfn.c **** /*
  83:rtos/uC-FS/FAT/fs_fat_sfn.c **** ***************************************************************************************************
  84:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                                          LOCAL DATA TYPES
  85:rtos/uC-FS/FAT/fs_fat_sfn.c **** ***************************************************************************************************
  86:rtos/uC-FS/FAT/fs_fat_sfn.c **** */
  87:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
ARM GAS  /tmp/ccpi2Pe2.s 			page 3


  88:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
  89:rtos/uC-FS/FAT/fs_fat_sfn.c **** /*
  90:rtos/uC-FS/FAT/fs_fat_sfn.c **** ***************************************************************************************************
  91:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                                           LOCAL CONSTANTS
  92:rtos/uC-FS/FAT/fs_fat_sfn.c **** ***************************************************************************************************
  93:rtos/uC-FS/FAT/fs_fat_sfn.c **** */
  94:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
  95:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
  96:rtos/uC-FS/FAT/fs_fat_sfn.c **** /*
  97:rtos/uC-FS/FAT/fs_fat_sfn.c **** ***************************************************************************************************
  98:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                                            LOCAL TABLES
  99:rtos/uC-FS/FAT/fs_fat_sfn.c **** ***************************************************************************************************
 100:rtos/uC-FS/FAT/fs_fat_sfn.c **** */
 101:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 102:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 103:rtos/uC-FS/FAT/fs_fat_sfn.c **** /*
 104:rtos/uC-FS/FAT/fs_fat_sfn.c **** ***************************************************************************************************
 105:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                                       LOCAL GLOBAL VARIABLES
 106:rtos/uC-FS/FAT/fs_fat_sfn.c **** ***************************************************************************************************
 107:rtos/uC-FS/FAT/fs_fat_sfn.c **** */
 108:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 109:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 110:rtos/uC-FS/FAT/fs_fat_sfn.c **** /*
 111:rtos/uC-FS/FAT/fs_fat_sfn.c **** ***************************************************************************************************
 112:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                                           LOCAL MACRO'S
 113:rtos/uC-FS/FAT/fs_fat_sfn.c **** ***************************************************************************************************
 114:rtos/uC-FS/FAT/fs_fat_sfn.c **** */
 115:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 116:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 117:rtos/uC-FS/FAT/fs_fat_sfn.c **** /*
 118:rtos/uC-FS/FAT/fs_fat_sfn.c **** ***************************************************************************************************
 119:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                                      LOCAL FUNCTION PROTOTYPES
 120:rtos/uC-FS/FAT/fs_fat_sfn.c **** ***************************************************************************************************
 121:rtos/uC-FS/FAT/fs_fat_sfn.c **** */
 122:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                                                     /* --------- FI
 123:rtos/uC-FS/FAT/fs_fat_sfn.c **** #if (FS_CFG_RD_ONLY_EN == DEF_DISABLED)
 124:rtos/uC-FS/FAT/fs_fat_sfn.c **** static  void         FS_FAT_SFN_DirEntryCreate    (FS_VOL             *p_vol,       /* Create SFN d
 125:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                    FS_BUF             *p_buf,
 126:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                    CPU_CHAR           *name,
 127:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                    CPU_BOOLEAN         is_dir,
 128:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                    FS_FAT_CLUS_NBR     file_first_clus,
 129:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                    FS_FAT_DIR_POS     *p_dir_start_pos,
 130:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                    FS_FAT_DIR_POS     *p_dir_end_pos,
 131:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                    FS_ERR             *p_err);
 132:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 133:rtos/uC-FS/FAT/fs_fat_sfn.c **** static  void         FS_FAT_SFN_DirEntryCreateAt  (FS_VOL             *p_vol,       /* Create SFN d
 134:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                    FS_BUF             *p_buf,
 135:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                    CPU_CHAR           *name,
 136:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                    FS_FILE_NAME_LEN    name_len,
 137:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                    CPU_INT32U          name_8_3[],
 138:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                    CPU_BOOLEAN         is_dir,
 139:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                    FS_FAT_CLUS_NBR     file_first_clus,
 140:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                    FS_FAT_DIR_POS     *p_dir_pos,
 141:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                    FS_FAT_DIR_POS     *p_dir_end_pos,
 142:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                    FS_ERR             *p_err);
 143:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 144:rtos/uC-FS/FAT/fs_fat_sfn.c **** static  void         FS_FAT_SFN_DirEntryDel       (FS_VOL             *p_vol,       /* Delete SFN d
ARM GAS  /tmp/ccpi2Pe2.s 			page 4


 145:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                    FS_BUF             *p_buf,
 146:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                    FS_FAT_DIR_POS     *p_dir_start_pos,
 147:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                    FS_FAT_DIR_POS     *p_dir_end_pos,
 148:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                    FS_ERR             *p_err);
 149:rtos/uC-FS/FAT/fs_fat_sfn.c **** #endif
 150:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 151:rtos/uC-FS/FAT/fs_fat_sfn.c **** static  void         FS_FAT_SFN_DirEntryFind      (FS_VOL             *p_vol,       /* Search dir f
 152:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                    FS_BUF             *p_buf,
 153:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                    CPU_CHAR           *name,
 154:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                    CPU_CHAR          **p_name_next,
 155:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                    FS_FAT_DIR_POS     *p_dir_start_pos,
 156:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                    FS_FAT_DIR_POS     *p_dir_end_pos,
 157:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                    FS_ERR             *p_err);
 158:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 159:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 160:rtos/uC-FS/FAT/fs_fat_sfn.c **** static  void         FS_FAT_SFN_NextDirEntryGet   (FS_VOL             *p_vol,       /* Get next dir
 161:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                    FS_BUF             *p_buf,
 162:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                    void               *name,
 163:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                    FS_FAT_DIR_POS     *p_dir_start_pos,
 164:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                    FS_FAT_DIR_POS     *p_dir_end_pos,
 165:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                    FS_ERR             *p_err);
 166:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 167:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 168:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                                                     /* ---------- L
 169:rtos/uC-FS/FAT/fs_fat_sfn.c **** static  void         FS_FAT_SFN_Parse             (void               *p_dir_entry, /* Parse SFN.  
 170:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                    CPU_CHAR           *name,
 171:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                    CPU_BOOLEAN         name_lower_case,
 172:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                    CPU_BOOLEAN         ext_lower_case);
 173:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 174:rtos/uC-FS/FAT/fs_fat_sfn.c **** static  FS_SEC_SIZE  FS_FAT_SFN_DirEntryFindInSec (void               *p_temp,      /* Search sec f
 175:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                    FS_SEC_SIZE         sec_size,
 176:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                    CPU_INT32U          name_8_3[],
 177:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                    FS_ERR             *p_err);
 178:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 179:rtos/uC-FS/FAT/fs_fat_sfn.c **** #if (FS_CFG_RD_ONLY_EN == DEF_DISABLED)
 180:rtos/uC-FS/FAT/fs_fat_sfn.c **** static  void         FS_FAT_SFN_DirEntryPlace     (FS_VOL             *p_vol,       /* Place dir en
 181:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                    FS_BUF             *p_buf,
 182:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                    FS_FAT_SEC_NBR      dir_start_sec,
 183:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                    FS_FAT_DIR_POS     *p_dir_end_pos,
 184:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                    FS_ERR             *p_err);
 185:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 186:rtos/uC-FS/FAT/fs_fat_sfn.c **** static  FS_SEC_SIZE  FS_FAT_SFN_DirEntryPlaceInSec(void               *p_temp,      /* Search sec f
 187:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                    FS_SEC_SIZE         sec_size,
 188:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                    FS_ERR             *p_err);
 189:rtos/uC-FS/FAT/fs_fat_sfn.c **** #endif
 190:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 191:rtos/uC-FS/FAT/fs_fat_sfn.c **** static  void         FS_FAT_SFN_LabelFind         (FS_VOL             *p_vol,       /* Search dir f
 192:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                    FS_BUF             *p_buf,
 193:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                    FS_FAT_DIR_POS     *p_dir_start_pos,
 194:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                    FS_FAT_DIR_POS     *p_dir_end_pos,
 195:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                    FS_ERR             *p_err);
 196:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 197:rtos/uC-FS/FAT/fs_fat_sfn.c **** static  FS_SEC_SIZE  FS_FAT_SFN_LabelFindInSec    (void               *p_temp,      /* Search sec f
 198:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                    FS_SEC_SIZE         sec_size,
 199:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                    FS_ERR             *p_err);
 200:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 201:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
ARM GAS  /tmp/ccpi2Pe2.s 			page 5


 202:rtos/uC-FS/FAT/fs_fat_sfn.c **** /*
 203:rtos/uC-FS/FAT/fs_fat_sfn.c **** ***************************************************************************************************
 204:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                                         INTERFACE STRUCTURE
 205:rtos/uC-FS/FAT/fs_fat_sfn.c **** ***************************************************************************************************
 206:rtos/uC-FS/FAT/fs_fat_sfn.c **** */
 207:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 208:rtos/uC-FS/FAT/fs_fat_sfn.c **** const  FS_FAT_FN_API  FS_FAT_SFN_API = {
 209:rtos/uC-FS/FAT/fs_fat_sfn.c **** #if (FS_CFG_RD_ONLY_EN == DEF_DISABLED)
 210:rtos/uC-FS/FAT/fs_fat_sfn.c ****     FS_FAT_SFN_DirEntryCreate,
 211:rtos/uC-FS/FAT/fs_fat_sfn.c ****     FS_FAT_SFN_DirEntryCreateAt,
 212:rtos/uC-FS/FAT/fs_fat_sfn.c ****     FS_FAT_SFN_DirEntryDel,
 213:rtos/uC-FS/FAT/fs_fat_sfn.c **** #endif
 214:rtos/uC-FS/FAT/fs_fat_sfn.c ****     FS_FAT_SFN_DirEntryFind,
 215:rtos/uC-FS/FAT/fs_fat_sfn.c ****     FS_FAT_SFN_NextDirEntryGet,
 216:rtos/uC-FS/FAT/fs_fat_sfn.c **** };
 217:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 218:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 219:rtos/uC-FS/FAT/fs_fat_sfn.c **** /*
 220:rtos/uC-FS/FAT/fs_fat_sfn.c **** ***************************************************************************************************
 221:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                                     LOCAL CONFIGURATION ERRORS
 222:rtos/uC-FS/FAT/fs_fat_sfn.c **** ***************************************************************************************************
 223:rtos/uC-FS/FAT/fs_fat_sfn.c **** */
 224:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 225:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 226:rtos/uC-FS/FAT/fs_fat_sfn.c **** /*
 227:rtos/uC-FS/FAT/fs_fat_sfn.c **** ***************************************************************************************************
 228:rtos/uC-FS/FAT/fs_fat_sfn.c **** ***************************************************************************************************
 229:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                                         INTERNAL FUNCTIONS
 230:rtos/uC-FS/FAT/fs_fat_sfn.c **** ***************************************************************************************************
 231:rtos/uC-FS/FAT/fs_fat_sfn.c **** ***************************************************************************************************
 232:rtos/uC-FS/FAT/fs_fat_sfn.c **** */
 233:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 234:rtos/uC-FS/FAT/fs_fat_sfn.c **** /*
 235:rtos/uC-FS/FAT/fs_fat_sfn.c **** ***************************************************************************************************
 236:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                                          FS_FAT_SFN_Chk()
 237:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
 238:rtos/uC-FS/FAT/fs_fat_sfn.c **** * Description : Check whether file name is valid SFN.
 239:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
 240:rtos/uC-FS/FAT/fs_fat_sfn.c **** * Argument(s) : name        Entry name/path.
 241:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
 242:rtos/uC-FS/FAT/fs_fat_sfn.c **** *               p_name_len  Pointer to variable that will receive the length of the entry name, in 
 243:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
 244:rtos/uC-FS/FAT/fs_fat_sfn.c **** *               p_err       Pointer to variable that will receive the return error code from this f
 245:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
 246:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                               FS_ERR_NONE            File name valid.
 247:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                               FS_ERR_NAME_INVALID    File name invalid.
 248:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
 249:rtos/uC-FS/FAT/fs_fat_sfn.c **** * Return(s)   : none.
 250:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
 251:rtos/uC-FS/FAT/fs_fat_sfn.c **** * Note(s)     : (1) If LFN support is enabled, then a return error will force an attempt to parse t
 252:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                   name as a LFN, in which real name errors will be determined.
 253:rtos/uC-FS/FAT/fs_fat_sfn.c **** ***************************************************************************************************
 254:rtos/uC-FS/FAT/fs_fat_sfn.c **** */
 255:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 256:rtos/uC-FS/FAT/fs_fat_sfn.c **** void  FS_FAT_SFN_Chk (CPU_CHAR          *name,
 257:rtos/uC-FS/FAT/fs_fat_sfn.c ****                       FS_FILE_NAME_LEN  *p_name_len,
 258:rtos/uC-FS/FAT/fs_fat_sfn.c ****                       FS_ERR            *p_err)
ARM GAS  /tmp/ccpi2Pe2.s 			page 6


 259:rtos/uC-FS/FAT/fs_fat_sfn.c **** {
 260:rtos/uC-FS/FAT/fs_fat_sfn.c ****     CPU_BOOLEAN       has_period;
 261:rtos/uC-FS/FAT/fs_fat_sfn.c ****     CPU_BOOLEAN       is_legal;
 262:rtos/uC-FS/FAT/fs_fat_sfn.c ****     FS_FILE_NAME_LEN  len;
 263:rtos/uC-FS/FAT/fs_fat_sfn.c ****     CPU_CHAR          name_char;
 264:rtos/uC-FS/FAT/fs_fat_sfn.c ****     FS_FILE_NAME_LEN  name_len;
 265:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 266:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 267:rtos/uC-FS/FAT/fs_fat_sfn.c ****     is_legal   = DEF_YES;
 268:rtos/uC-FS/FAT/fs_fat_sfn.c ****     has_period = DEF_NO;
 269:rtos/uC-FS/FAT/fs_fat_sfn.c ****     len        = 0u;
 270:rtos/uC-FS/FAT/fs_fat_sfn.c ****     name_len   = 0u;
 271:rtos/uC-FS/FAT/fs_fat_sfn.c ****    *p_name_len = 0u;
 272:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 273:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 274:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                                 /* ------------------- CHK INIT CHA
 275:rtos/uC-FS/FAT/fs_fat_sfn.c ****     name_char = *name;
 276:rtos/uC-FS/FAT/fs_fat_sfn.c ****     switch (name_char) {                                        /* Rtn err if first char is '.', ' 
 277:rtos/uC-FS/FAT/fs_fat_sfn.c ****         case ASCII_CHAR_FULL_STOP:
 278:rtos/uC-FS/FAT/fs_fat_sfn.c ****         case ASCII_CHAR_SPACE:
 279:rtos/uC-FS/FAT/fs_fat_sfn.c ****         case ASCII_CHAR_NULL:
 280:rtos/uC-FS/FAT/fs_fat_sfn.c ****         case FS_FAT_PATH_SEP_CHAR:
 281:rtos/uC-FS/FAT/fs_fat_sfn.c ****             #ifndef  FS_FAT_LFN_MODULE_PRESENT                  /* See Note #1.                    
 282:rtos/uC-FS/FAT/fs_fat_sfn.c ****              FS_TRACE_DBG(("FS_FAT_SFN_Chk(): Invalid first char.\r\n"));
 283:rtos/uC-FS/FAT/fs_fat_sfn.c ****             #endif
 284:rtos/uC-FS/FAT/fs_fat_sfn.c ****             *p_err = FS_ERR_NAME_INVALID;
 285:rtos/uC-FS/FAT/fs_fat_sfn.c ****              return;
 286:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 287:rtos/uC-FS/FAT/fs_fat_sfn.c ****         default:
 288:rtos/uC-FS/FAT/fs_fat_sfn.c ****              break;
 289:rtos/uC-FS/FAT/fs_fat_sfn.c ****     }
 290:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 291:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 292:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                                 /* ------------------- PROCESS PATH
 293:rtos/uC-FS/FAT/fs_fat_sfn.c ****     while ((name_char != (CPU_CHAR)ASCII_CHAR_NULL     ) &&     /* Process str until NULL char ... 
 294:rtos/uC-FS/FAT/fs_fat_sfn.c ****            (name_char != (CPU_CHAR)FS_FAT_PATH_SEP_CHAR) &&     /* ... or path sep        char ... 
 295:rtos/uC-FS/FAT/fs_fat_sfn.c ****            (is_legal  ==  DEF_YES                      )) {     /* ... or illegal name is found.   
 296:rtos/uC-FS/FAT/fs_fat_sfn.c ****         if (name_char == (CPU_CHAR)ASCII_CHAR_FULL_STOP) {
 297:rtos/uC-FS/FAT/fs_fat_sfn.c ****             if (has_period == DEF_NO) {
 298:rtos/uC-FS/FAT/fs_fat_sfn.c ****                 has_period  = DEF_YES;
 299:rtos/uC-FS/FAT/fs_fat_sfn.c ****                 len         = 0u;
 300:rtos/uC-FS/FAT/fs_fat_sfn.c ****                 name_len++;
 301:rtos/uC-FS/FAT/fs_fat_sfn.c ****             } else {                                            /* If 2nd period ... illegal name. 
 302:rtos/uC-FS/FAT/fs_fat_sfn.c ****                #ifndef  FS_FAT_LFN_MODULE_PRESENT               /* See Note #1.                    
 303:rtos/uC-FS/FAT/fs_fat_sfn.c ****                 FS_TRACE_DBG(("FS_FAT_SFN_Chk(): Period (full stop) in extension.\r\n"));
 304:rtos/uC-FS/FAT/fs_fat_sfn.c ****                #endif
 305:rtos/uC-FS/FAT/fs_fat_sfn.c ****                 is_legal = DEF_NO;
 306:rtos/uC-FS/FAT/fs_fat_sfn.c ****             }
 307:rtos/uC-FS/FAT/fs_fat_sfn.c ****         } else {
 308:rtos/uC-FS/FAT/fs_fat_sfn.c ****             if (((has_period == DEF_YES) && (len < FS_FAT_SFN_EXT_MAX_NBR_CHAR )) ||
 309:rtos/uC-FS/FAT/fs_fat_sfn.c ****                 ((has_period == DEF_NO ) && (len < FS_FAT_SFN_NAME_MAX_NBR_CHAR))) {
 310:rtos/uC-FS/FAT/fs_fat_sfn.c ****                 is_legal = FS_FAT_IS_LEGAL_SFN_CHAR(name_char);
 311:rtos/uC-FS/FAT/fs_fat_sfn.c ****                 if (is_legal == DEF_YES) {
 312:rtos/uC-FS/FAT/fs_fat_sfn.c ****                     len++;
 313:rtos/uC-FS/FAT/fs_fat_sfn.c ****                     name_len++;
 314:rtos/uC-FS/FAT/fs_fat_sfn.c ****                 } else {
 315:rtos/uC-FS/FAT/fs_fat_sfn.c ****                    #ifndef  FS_FAT_LFN_MODULE_PRESENT           /* See Note #1.                    
ARM GAS  /tmp/ccpi2Pe2.s 			page 7


 316:rtos/uC-FS/FAT/fs_fat_sfn.c ****                     FS_TRACE_DBG(("FS_FAT_SFN_Chk(): Invalid character in file name: %c (0x%02X).\r
 317:rtos/uC-FS/FAT/fs_fat_sfn.c ****                    #endif
 318:rtos/uC-FS/FAT/fs_fat_sfn.c ****                     is_legal = DEF_NO;
 319:rtos/uC-FS/FAT/fs_fat_sfn.c ****                 }
 320:rtos/uC-FS/FAT/fs_fat_sfn.c ****             } else {                                            /* If file name or extension too lo
 321:rtos/uC-FS/FAT/fs_fat_sfn.c ****                #ifndef  FS_FAT_LFN_MODULE_PRESENT               /* See Note #1.                    
 322:rtos/uC-FS/FAT/fs_fat_sfn.c ****                 FS_TRACE_DBG(("FS_FAT_SFN_Chk(): File name too long.\r\n"));
 323:rtos/uC-FS/FAT/fs_fat_sfn.c ****                #endif
 324:rtos/uC-FS/FAT/fs_fat_sfn.c ****                 is_legal = DEF_NO;
 325:rtos/uC-FS/FAT/fs_fat_sfn.c ****             }
 326:rtos/uC-FS/FAT/fs_fat_sfn.c ****         }
 327:rtos/uC-FS/FAT/fs_fat_sfn.c ****         name++;
 328:rtos/uC-FS/FAT/fs_fat_sfn.c ****         name_char = *name;
 329:rtos/uC-FS/FAT/fs_fat_sfn.c ****     }
 330:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 331:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 332:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                                 /* ------------------- ASSIGN & RTN
 333:rtos/uC-FS/FAT/fs_fat_sfn.c ****     if (is_legal == DEF_NO) {                                   /* Rtn err if illegal name.        
 334:rtos/uC-FS/FAT/fs_fat_sfn.c ****        *p_err = FS_ERR_NAME_INVALID;
 335:rtos/uC-FS/FAT/fs_fat_sfn.c ****         return;
 336:rtos/uC-FS/FAT/fs_fat_sfn.c ****     }
 337:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 338:rtos/uC-FS/FAT/fs_fat_sfn.c ****    *p_name_len = name_len;
 339:rtos/uC-FS/FAT/fs_fat_sfn.c ****    *p_err      = FS_ERR_NONE;
 340:rtos/uC-FS/FAT/fs_fat_sfn.c **** }
 341:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 342:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 343:rtos/uC-FS/FAT/fs_fat_sfn.c **** /*
 344:rtos/uC-FS/FAT/fs_fat_sfn.c **** ***************************************************************************************************
 345:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                                      FS_FAT_SFN_DirEntryFmt()
 346:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
 347:rtos/uC-FS/FAT/fs_fat_sfn.c **** * Description : Make directory entry for SFN entry.
 348:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
 349:rtos/uC-FS/FAT/fs_fat_sfn.c **** * Argument(s) : p_dir_entry         Pointer to directory entry.
 350:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
 351:rtos/uC-FS/FAT/fs_fat_sfn.c **** *               name_8_3            Entry SFN.
 352:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
 353:rtos/uC-FS/FAT/fs_fat_sfn.c **** *               is_dir              Indicates whether entry is for directory :
 354:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
 355:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                                       DEF_TRUE    Entry is for directory.
 356:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                                       DEF_FALSE   Entry is for file.
 357:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
 358:rtos/uC-FS/FAT/fs_fat_sfn.c **** *               file_first_clus     First cluster in file.
 359:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
 360:rtos/uC-FS/FAT/fs_fat_sfn.c **** * Return(s)   : none.
 361:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
 362:rtos/uC-FS/FAT/fs_fat_sfn.c **** * Note(s)     : none.
 363:rtos/uC-FS/FAT/fs_fat_sfn.c **** ***************************************************************************************************
 364:rtos/uC-FS/FAT/fs_fat_sfn.c **** */
 365:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 366:rtos/uC-FS/FAT/fs_fat_sfn.c **** #if (FS_CFG_RD_ONLY_EN == DEF_DISABLED)
 367:rtos/uC-FS/FAT/fs_fat_sfn.c **** void  FS_FAT_SFN_DirEntryFmt (void             *p_dir_entry,
 368:rtos/uC-FS/FAT/fs_fat_sfn.c ****                               CPU_INT32U        name_8_3[],
 369:rtos/uC-FS/FAT/fs_fat_sfn.c ****                               CPU_BOOLEAN       is_dir,
 370:rtos/uC-FS/FAT/fs_fat_sfn.c ****                               FS_FAT_CLUS_NBR   file_first_clus,
 371:rtos/uC-FS/FAT/fs_fat_sfn.c ****                               CPU_BOOLEAN       name_lower_case,
 372:rtos/uC-FS/FAT/fs_fat_sfn.c ****                               CPU_BOOLEAN       ext_lower_case)
ARM GAS  /tmp/ccpi2Pe2.s 			page 8


 373:rtos/uC-FS/FAT/fs_fat_sfn.c **** {
 374:rtos/uC-FS/FAT/fs_fat_sfn.c ****     CPU_INT16U     date_val;
 375:rtos/uC-FS/FAT/fs_fat_sfn.c ****     CLK_DATE_TIME  stime;
 376:rtos/uC-FS/FAT/fs_fat_sfn.c ****     CPU_INT08U     ntres;
 377:rtos/uC-FS/FAT/fs_fat_sfn.c ****     CPU_INT16U     time_val;
 378:rtos/uC-FS/FAT/fs_fat_sfn.c ****     CPU_INT08U    *p_dir_entry_08;
 379:rtos/uC-FS/FAT/fs_fat_sfn.c ****     CPU_BOOLEAN    ok;
 380:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 381:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 382:rtos/uC-FS/FAT/fs_fat_sfn.c ****     ok = Clk_GetDateTime(&stime);                               /* Get date/time.                  
 383:rtos/uC-FS/FAT/fs_fat_sfn.c ****     if (ok == DEF_YES) {
 384:rtos/uC-FS/FAT/fs_fat_sfn.c ****         time_val =  FS_FAT_TimeFmt(&stime);
 385:rtos/uC-FS/FAT/fs_fat_sfn.c ****         date_val =  FS_FAT_DateFmt(&stime);
 386:rtos/uC-FS/FAT/fs_fat_sfn.c ****     } else {
 387:rtos/uC-FS/FAT/fs_fat_sfn.c ****         time_val =  0u;
 388:rtos/uC-FS/FAT/fs_fat_sfn.c ****         date_val =  0u;
 389:rtos/uC-FS/FAT/fs_fat_sfn.c ****     }
 390:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 391:rtos/uC-FS/FAT/fs_fat_sfn.c ****     p_dir_entry_08 = (CPU_INT08U *)p_dir_entry;
 392:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 393:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                                 /* Octets 0-10: SFN.               
 394:rtos/uC-FS/FAT/fs_fat_sfn.c ****     MEM_VAL_SET_INT32U((void *)(p_dir_entry_08 + 0u), name_8_3[0]);
 395:rtos/uC-FS/FAT/fs_fat_sfn.c ****     MEM_VAL_SET_INT32U((void *)(p_dir_entry_08 + 4u), name_8_3[1]);
 396:rtos/uC-FS/FAT/fs_fat_sfn.c ****     MEM_VAL_SET_INT32U((void *)(p_dir_entry_08 + 8u), name_8_3[2]);
 397:rtos/uC-FS/FAT/fs_fat_sfn.c ****     p_dir_entry_08 += 11u;
 398:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 399:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                                 /* Octet  11:    Attrib.           
 400:rtos/uC-FS/FAT/fs_fat_sfn.c ****     if (is_dir == DEF_YES) {
 401:rtos/uC-FS/FAT/fs_fat_sfn.c ****        *p_dir_entry_08 = FS_FAT_DIRENT_ATTR_DIRECTORY;
 402:rtos/uC-FS/FAT/fs_fat_sfn.c ****         p_dir_entry_08++;
 403:rtos/uC-FS/FAT/fs_fat_sfn.c ****     } else {
 404:rtos/uC-FS/FAT/fs_fat_sfn.c ****        *p_dir_entry_08 = FS_FAT_DIRENT_ATTR_NONE;
 405:rtos/uC-FS/FAT/fs_fat_sfn.c ****         p_dir_entry_08++;
 406:rtos/uC-FS/FAT/fs_fat_sfn.c ****     }
 407:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 408:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                                /* 12:    NT reserved info.         
 409:rtos/uC-FS/FAT/fs_fat_sfn.c ****     ntres = DEF_BIT_NONE;
 410:rtos/uC-FS/FAT/fs_fat_sfn.c ****     if (name_lower_case == DEF_YES) {
 411:rtos/uC-FS/FAT/fs_fat_sfn.c ****         ntres |= FS_FAT_DIRENT_NTRES_NAME_LOWER_CASE;
 412:rtos/uC-FS/FAT/fs_fat_sfn.c ****     }
 413:rtos/uC-FS/FAT/fs_fat_sfn.c ****     if (ext_lower_case == DEF_YES) {
 414:rtos/uC-FS/FAT/fs_fat_sfn.c ****         ntres |= FS_FAT_DIRENT_NTRES_EXT_LOWER_CASE;
 415:rtos/uC-FS/FAT/fs_fat_sfn.c ****     }
 416:rtos/uC-FS/FAT/fs_fat_sfn.c ****    *p_dir_entry_08 =  ntres;
 417:rtos/uC-FS/FAT/fs_fat_sfn.c ****     p_dir_entry_08++;
 418:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 419:rtos/uC-FS/FAT/fs_fat_sfn.c ****    *p_dir_entry_08 =  0u;                                       /* 13:    Creation time, 10ths of a
 420:rtos/uC-FS/FAT/fs_fat_sfn.c ****     p_dir_entry_08++;
 421:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                                 /* 14-15: Creation time.           
 422:rtos/uC-FS/FAT/fs_fat_sfn.c ****    *p_dir_entry_08 = (CPU_INT08U)(time_val        >> (DEF_INT_08_NBR_BITS * 0u)) & DEF_INT_08_MASK;
 423:rtos/uC-FS/FAT/fs_fat_sfn.c ****     p_dir_entry_08++;
 424:rtos/uC-FS/FAT/fs_fat_sfn.c ****    *p_dir_entry_08 = (CPU_INT08U)(time_val        >> (DEF_INT_08_NBR_BITS * 1u)) & DEF_INT_08_MASK;
 425:rtos/uC-FS/FAT/fs_fat_sfn.c ****     p_dir_entry_08++;
 426:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                                 /* 16-17: Creation date.           
 427:rtos/uC-FS/FAT/fs_fat_sfn.c ****    *p_dir_entry_08 = (CPU_INT08U)(date_val        >> (DEF_INT_08_NBR_BITS * 0u)) & DEF_INT_08_MASK;
 428:rtos/uC-FS/FAT/fs_fat_sfn.c ****     p_dir_entry_08++;
 429:rtos/uC-FS/FAT/fs_fat_sfn.c ****    *p_dir_entry_08 = (CPU_INT08U)(date_val        >> (DEF_INT_08_NBR_BITS * 1u)) & DEF_INT_08_MASK;
ARM GAS  /tmp/ccpi2Pe2.s 			page 9


 430:rtos/uC-FS/FAT/fs_fat_sfn.c ****     p_dir_entry_08++;
 431:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                                 /* 18-19: Last access date.        
 432:rtos/uC-FS/FAT/fs_fat_sfn.c ****    *p_dir_entry_08 = (CPU_INT08U)(date_val        >> (DEF_INT_08_NBR_BITS * 0u)) & DEF_INT_08_MASK;
 433:rtos/uC-FS/FAT/fs_fat_sfn.c ****     p_dir_entry_08++;
 434:rtos/uC-FS/FAT/fs_fat_sfn.c ****    *p_dir_entry_08 = (CPU_INT08U)(date_val        >> (DEF_INT_08_NBR_BITS * 1u)) & DEF_INT_08_MASK;
 435:rtos/uC-FS/FAT/fs_fat_sfn.c ****     p_dir_entry_08++;
 436:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                                 /* 20-21: Hi word, entry's 1st clus
 437:rtos/uC-FS/FAT/fs_fat_sfn.c ****    *p_dir_entry_08 = (CPU_INT08U)(file_first_clus >> (DEF_INT_08_NBR_BITS * 2u)) & DEF_INT_08_MASK;
 438:rtos/uC-FS/FAT/fs_fat_sfn.c ****     p_dir_entry_08++;
 439:rtos/uC-FS/FAT/fs_fat_sfn.c ****    *p_dir_entry_08 = (CPU_INT08U)(file_first_clus >> (DEF_INT_08_NBR_BITS * 3u)) & DEF_INT_08_MASK;
 440:rtos/uC-FS/FAT/fs_fat_sfn.c ****     p_dir_entry_08++;
 441:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                                 /* 22-23: Last write  time.        
 442:rtos/uC-FS/FAT/fs_fat_sfn.c ****    *p_dir_entry_08 = (CPU_INT08U)(time_val        >> (DEF_INT_08_NBR_BITS * 0u)) & DEF_INT_08_MASK;
 443:rtos/uC-FS/FAT/fs_fat_sfn.c ****     p_dir_entry_08++;
 444:rtos/uC-FS/FAT/fs_fat_sfn.c ****    *p_dir_entry_08 = (CPU_INT08U)(time_val        >> (DEF_INT_08_NBR_BITS * 1u)) & DEF_INT_08_MASK;
 445:rtos/uC-FS/FAT/fs_fat_sfn.c ****     p_dir_entry_08++;
 446:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                                 /* 24-25: Last wrote  date.        
 447:rtos/uC-FS/FAT/fs_fat_sfn.c ****    *p_dir_entry_08 = (CPU_INT08U)(date_val        >> (DEF_INT_08_NBR_BITS * 0u)) & DEF_INT_08_MASK;
 448:rtos/uC-FS/FAT/fs_fat_sfn.c ****     p_dir_entry_08++;
 449:rtos/uC-FS/FAT/fs_fat_sfn.c ****    *p_dir_entry_08 = (CPU_INT08U)(date_val        >> (DEF_INT_08_NBR_BITS * 1u)) & DEF_INT_08_MASK;
 450:rtos/uC-FS/FAT/fs_fat_sfn.c ****     p_dir_entry_08++;
 451:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                                 /* 26-27: Lo word, entry's 1st clus
 452:rtos/uC-FS/FAT/fs_fat_sfn.c ****    *p_dir_entry_08 = (CPU_INT08U)(file_first_clus >> (DEF_INT_08_NBR_BITS * 0u)) & DEF_INT_08_MASK;
 453:rtos/uC-FS/FAT/fs_fat_sfn.c ****     p_dir_entry_08++;
 454:rtos/uC-FS/FAT/fs_fat_sfn.c ****    *p_dir_entry_08 = (CPU_INT08U)(file_first_clus >> (DEF_INT_08_NBR_BITS * 1u)) & DEF_INT_08_MASK;
 455:rtos/uC-FS/FAT/fs_fat_sfn.c ****     p_dir_entry_08++;
 456:rtos/uC-FS/FAT/fs_fat_sfn.c ****    *p_dir_entry_08 =  0u;                                       /* 28-31: File size in bytes.      
 457:rtos/uC-FS/FAT/fs_fat_sfn.c ****     p_dir_entry_08++;
 458:rtos/uC-FS/FAT/fs_fat_sfn.c ****    *p_dir_entry_08 =  0u;
 459:rtos/uC-FS/FAT/fs_fat_sfn.c ****     p_dir_entry_08++;
 460:rtos/uC-FS/FAT/fs_fat_sfn.c ****    *p_dir_entry_08 =  0u;
 461:rtos/uC-FS/FAT/fs_fat_sfn.c ****     p_dir_entry_08++;
 462:rtos/uC-FS/FAT/fs_fat_sfn.c ****    *p_dir_entry_08 =  0u;
 463:rtos/uC-FS/FAT/fs_fat_sfn.c **** }
 464:rtos/uC-FS/FAT/fs_fat_sfn.c **** #endif
 465:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 466:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 467:rtos/uC-FS/FAT/fs_fat_sfn.c **** /*
 468:rtos/uC-FS/FAT/fs_fat_sfn.c **** ***************************************************************************************************
 469:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                                         FS_FAT_SFN_Create()
 470:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
 471:rtos/uC-FS/FAT/fs_fat_sfn.c **** * Description : Create 8.3 SFN from path component for comparison with data from volume.
 472:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
 473:rtos/uC-FS/FAT/fs_fat_sfn.c **** * Argument(s) : name                Name of the entry.
 474:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
 475:rtos/uC-FS/FAT/fs_fat_sfn.c **** *               name_8_3            Array that will receive entry SFN.
 476:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
 477:rtos/uC-FS/FAT/fs_fat_sfn.c **** *               p_name_lower_case   Pointer to variable that will receive indicator of whether name
 478:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                                   characters will be returned in lower case :
 479:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                                       DEF_YES, name characters will be returned in lower case.
 480:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                                       DEF_NO,  name characters will be returned in upper case.
 481:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
 482:rtos/uC-FS/FAT/fs_fat_sfn.c **** *               p_ext_lower_case    Pointer to variable that will receive indicator of whether exte
 483:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                                   characters will be returned in lower case :
 484:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                                       DEF_YES, extension characters will be returned in lower cas
 485:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                                       DEF_NO,  extension characters will be returned in upper cas
 486:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
ARM GAS  /tmp/ccpi2Pe2.s 			page 10


 487:rtos/uC-FS/FAT/fs_fat_sfn.c **** *               p_err               Pointer to variable that will receive the return error code fro
 488:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
 489:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                                       FS_ERR_NONE               File SFN is legal.
 490:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                                       FS_ERR_NAME_INVALID       File SFN is illegal.
 491:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                                       FS_ERR_NAME_MIXED_CASE    File SFN is mixed case.
 492:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
 493:rtos/uC-FS/FAT/fs_fat_sfn.c **** * Return(s)   : none.
 494:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
 495:rtos/uC-FS/FAT/fs_fat_sfn.c **** * Note(s)     : (1) (a) The 8.3 file name, 'p_name_8_3' is maintained as an array of three four-byt
 496:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                       so that file name search comparison may be efficiently executed.
 497:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
 498:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                   (b) The final byte of the final name--the byte in the 3rd word of 'p_name_8_3' 
 499:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                       the highest memory locations is cleared to 0 since the 12th byte of FAT
 500:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                       directory entries is NOT part of the file name.
 501:rtos/uC-FS/FAT/fs_fat_sfn.c **** ***************************************************************************************************
 502:rtos/uC-FS/FAT/fs_fat_sfn.c **** */
 503:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 504:rtos/uC-FS/FAT/fs_fat_sfn.c **** void  FS_FAT_SFN_Create (CPU_CHAR     *name,
 505:rtos/uC-FS/FAT/fs_fat_sfn.c ****                          CPU_INT32U    name_8_3[],
 506:rtos/uC-FS/FAT/fs_fat_sfn.c ****                          CPU_BOOLEAN  *p_name_lower_case,
 507:rtos/uC-FS/FAT/fs_fat_sfn.c ****                          CPU_BOOLEAN  *p_ext_lower_case,
 508:rtos/uC-FS/FAT/fs_fat_sfn.c ****                          FS_ERR       *p_err)
 509:rtos/uC-FS/FAT/fs_fat_sfn.c **** {
 510:rtos/uC-FS/FAT/fs_fat_sfn.c ****     CPU_BOOLEAN       ext_lower_case;
 511:rtos/uC-FS/FAT/fs_fat_sfn.c ****     CPU_BOOLEAN       has_period;
 512:rtos/uC-FS/FAT/fs_fat_sfn.c ****     CPU_BOOLEAN       has_upper;
 513:rtos/uC-FS/FAT/fs_fat_sfn.c ****     FS_FILE_NAME_LEN  i;
 514:rtos/uC-FS/FAT/fs_fat_sfn.c ****     CPU_BOOLEAN       is_legal;
 515:rtos/uC-FS/FAT/fs_fat_sfn.c ****     FS_FILE_NAME_LEN  len;
 516:rtos/uC-FS/FAT/fs_fat_sfn.c ****     CPU_BOOLEAN       lower;
 517:rtos/uC-FS/FAT/fs_fat_sfn.c ****     CPU_BOOLEAN       mixed;
 518:rtos/uC-FS/FAT/fs_fat_sfn.c ****     CPU_CHAR          name_char;
 519:rtos/uC-FS/FAT/fs_fat_sfn.c ****     CPU_CHAR          name_8_3_08[12];
 520:rtos/uC-FS/FAT/fs_fat_sfn.c ****     CPU_BOOLEAN       name_lower_case;
 521:rtos/uC-FS/FAT/fs_fat_sfn.c ****     CPU_BOOLEAN       upper;
 522:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 523:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 524:rtos/uC-FS/FAT/fs_fat_sfn.c ****     ext_lower_case  = DEF_NO;
 525:rtos/uC-FS/FAT/fs_fat_sfn.c ****     has_period      = DEF_NO;
 526:rtos/uC-FS/FAT/fs_fat_sfn.c ****     has_upper       = DEF_NO;
 527:rtos/uC-FS/FAT/fs_fat_sfn.c ****     is_legal        = DEF_YES;
 528:rtos/uC-FS/FAT/fs_fat_sfn.c ****     len             = 0u;
 529:rtos/uC-FS/FAT/fs_fat_sfn.c ****     mixed           = DEF_NO;
 530:rtos/uC-FS/FAT/fs_fat_sfn.c ****     name_lower_case = DEF_NO;
 531:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 532:rtos/uC-FS/FAT/fs_fat_sfn.c ****     for (i = 0u; i < 11u; i++) {                                /* 'Clear' 8.3 file name buffer.   
 533:rtos/uC-FS/FAT/fs_fat_sfn.c ****         name_8_3_08[i] = (CPU_CHAR)ASCII_CHAR_SPACE;
 534:rtos/uC-FS/FAT/fs_fat_sfn.c ****     }
 535:rtos/uC-FS/FAT/fs_fat_sfn.c ****     name_8_3_08[11] = (CPU_CHAR)ASCII_CHAR_NULL;                /* 'Clear' final byte of 8.3 file n
 536:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 537:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 538:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 539:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                                 /* ------------------- CHK INIT CHA
 540:rtos/uC-FS/FAT/fs_fat_sfn.c ****     name_char = *name;
 541:rtos/uC-FS/FAT/fs_fat_sfn.c ****     switch (name_char) {                                        /* Rtn err if first char is '.', ' 
 542:rtos/uC-FS/FAT/fs_fat_sfn.c ****         case ASCII_CHAR_FULL_STOP:
 543:rtos/uC-FS/FAT/fs_fat_sfn.c ****         case ASCII_CHAR_SPACE:
ARM GAS  /tmp/ccpi2Pe2.s 			page 11


 544:rtos/uC-FS/FAT/fs_fat_sfn.c ****         case ASCII_CHAR_NULL:
 545:rtos/uC-FS/FAT/fs_fat_sfn.c ****         case FS_FAT_PATH_SEP_CHAR:
 546:rtos/uC-FS/FAT/fs_fat_sfn.c ****             *p_err = FS_ERR_NAME_INVALID;
 547:rtos/uC-FS/FAT/fs_fat_sfn.c ****              return;
 548:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 549:rtos/uC-FS/FAT/fs_fat_sfn.c ****         default:
 550:rtos/uC-FS/FAT/fs_fat_sfn.c ****              break;
 551:rtos/uC-FS/FAT/fs_fat_sfn.c ****     }
 552:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 553:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 554:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                                 /* ------------------- PROCESS PATH
 555:rtos/uC-FS/FAT/fs_fat_sfn.c ****     i = 0u;
 556:rtos/uC-FS/FAT/fs_fat_sfn.c ****     while ((name_char != (CPU_CHAR)ASCII_CHAR_NULL     ) &&     /* Process str until NULL char ... 
 557:rtos/uC-FS/FAT/fs_fat_sfn.c ****            (name_char != (CPU_CHAR)FS_FAT_PATH_SEP_CHAR) &&     /* ... or path sep        char ... 
 558:rtos/uC-FS/FAT/fs_fat_sfn.c ****            (is_legal  ==  DEF_YES                      )) {     /* ... or illegal name is found.   
 559:rtos/uC-FS/FAT/fs_fat_sfn.c ****         if (name_char == (CPU_CHAR)ASCII_CHAR_FULL_STOP) {
 560:rtos/uC-FS/FAT/fs_fat_sfn.c ****             if (has_period == DEF_NO) {                         /* Entering extension ...          
 561:rtos/uC-FS/FAT/fs_fat_sfn.c ****                 i          += FS_FAT_SFN_NAME_MAX_NBR_CHAR - len;                  /* ... 'len' wil
 562:rtos/uC-FS/FAT/fs_fat_sfn.c ****                 has_period  = DEF_YES;
 563:rtos/uC-FS/FAT/fs_fat_sfn.c ****                 has_upper   = DEF_NO;
 564:rtos/uC-FS/FAT/fs_fat_sfn.c ****                 len         = 0u;
 565:rtos/uC-FS/FAT/fs_fat_sfn.c ****             } else {                                            /* If 2nd period ... illegal name. 
 566:rtos/uC-FS/FAT/fs_fat_sfn.c ****                 is_legal = DEF_NO;
 567:rtos/uC-FS/FAT/fs_fat_sfn.c ****             }
 568:rtos/uC-FS/FAT/fs_fat_sfn.c ****         } else {
 569:rtos/uC-FS/FAT/fs_fat_sfn.c ****             if (((has_period == DEF_YES) && (len < FS_FAT_SFN_EXT_MAX_NBR_CHAR )) ||
 570:rtos/uC-FS/FAT/fs_fat_sfn.c ****                 ((has_period == DEF_NO ) && (len < FS_FAT_SFN_NAME_MAX_NBR_CHAR))) {
 571:rtos/uC-FS/FAT/fs_fat_sfn.c ****                 is_legal = FS_FAT_IS_LEGAL_SFN_CHAR(name_char);
 572:rtos/uC-FS/FAT/fs_fat_sfn.c ****                 if (is_legal == DEF_YES) {
 573:rtos/uC-FS/FAT/fs_fat_sfn.c ****                     lower = ASCII_IS_LOWER(name_char);
 574:rtos/uC-FS/FAT/fs_fat_sfn.c ****                     if (lower == DEF_YES) {
 575:rtos/uC-FS/FAT/fs_fat_sfn.c ****                         if (has_upper == DEF_YES) {
 576:rtos/uC-FS/FAT/fs_fat_sfn.c ****                             mixed = DEF_YES;
 577:rtos/uC-FS/FAT/fs_fat_sfn.c ****                         } else {
 578:rtos/uC-FS/FAT/fs_fat_sfn.c ****                             if (has_period == DEF_YES) {
 579:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                 ext_lower_case = DEF_YES;
 580:rtos/uC-FS/FAT/fs_fat_sfn.c ****                             } else {
 581:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                 name_lower_case = DEF_YES;
 582:rtos/uC-FS/FAT/fs_fat_sfn.c ****                             }
 583:rtos/uC-FS/FAT/fs_fat_sfn.c ****                         }
 584:rtos/uC-FS/FAT/fs_fat_sfn.c ****                     } else {
 585:rtos/uC-FS/FAT/fs_fat_sfn.c ****                         upper = ASCII_IS_UPPER(name_char);
 586:rtos/uC-FS/FAT/fs_fat_sfn.c ****                         if (upper == DEF_YES) {
 587:rtos/uC-FS/FAT/fs_fat_sfn.c ****                             has_upper = DEF_YES;
 588:rtos/uC-FS/FAT/fs_fat_sfn.c ****                             if (((has_period == DEF_YES) && (ext_lower_case  == DEF_YES)) ||
 589:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                 ((has_period == DEF_NO)  && (name_lower_case == DEF_YES))) {
 590:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                 mixed = DEF_YES;
 591:rtos/uC-FS/FAT/fs_fat_sfn.c ****                             }
 592:rtos/uC-FS/FAT/fs_fat_sfn.c ****                         }
 593:rtos/uC-FS/FAT/fs_fat_sfn.c ****                     }
 594:rtos/uC-FS/FAT/fs_fat_sfn.c ****                     name_8_3_08[i] = ASCII_TO_UPPER(name_char);
 595:rtos/uC-FS/FAT/fs_fat_sfn.c ****                     i++;
 596:rtos/uC-FS/FAT/fs_fat_sfn.c ****                     len++;
 597:rtos/uC-FS/FAT/fs_fat_sfn.c ****                 } else {
 598:rtos/uC-FS/FAT/fs_fat_sfn.c ****                     is_legal = DEF_NO;
 599:rtos/uC-FS/FAT/fs_fat_sfn.c ****                 }
 600:rtos/uC-FS/FAT/fs_fat_sfn.c ****             } else {                                            /* If file name or extension too lo
ARM GAS  /tmp/ccpi2Pe2.s 			page 12


 601:rtos/uC-FS/FAT/fs_fat_sfn.c ****                 is_legal = DEF_NO;
 602:rtos/uC-FS/FAT/fs_fat_sfn.c ****             }
 603:rtos/uC-FS/FAT/fs_fat_sfn.c ****         }
 604:rtos/uC-FS/FAT/fs_fat_sfn.c ****         name++;
 605:rtos/uC-FS/FAT/fs_fat_sfn.c ****         name_char = *name;
 606:rtos/uC-FS/FAT/fs_fat_sfn.c ****     }
 607:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 608:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 609:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                                 /* ------------------- ASSIGN & RTN
 610:rtos/uC-FS/FAT/fs_fat_sfn.c ****     if (is_legal == DEF_NO) {                                   /* Rtn err if illegal name.        
 611:rtos/uC-FS/FAT/fs_fat_sfn.c ****        *p_err = FS_ERR_NAME_INVALID;
 612:rtos/uC-FS/FAT/fs_fat_sfn.c ****         return;
 613:rtos/uC-FS/FAT/fs_fat_sfn.c ****     }
 614:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 615:rtos/uC-FS/FAT/fs_fat_sfn.c ****     name_8_3[0] = MEM_VAL_GET_INT32U((void *)&name_8_3_08[0]);
 616:rtos/uC-FS/FAT/fs_fat_sfn.c ****     name_8_3[1] = MEM_VAL_GET_INT32U((void *)&name_8_3_08[4]);
 617:rtos/uC-FS/FAT/fs_fat_sfn.c ****     name_8_3[2] = MEM_VAL_GET_INT32U((void *)&name_8_3_08[8]);
 618:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 619:rtos/uC-FS/FAT/fs_fat_sfn.c ****     if (mixed == DEF_YES) {
 620:rtos/uC-FS/FAT/fs_fat_sfn.c ****         name_lower_case = DEF_NO;
 621:rtos/uC-FS/FAT/fs_fat_sfn.c ****         ext_lower_case  = DEF_NO;
 622:rtos/uC-FS/FAT/fs_fat_sfn.c ****     }
 623:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 624:rtos/uC-FS/FAT/fs_fat_sfn.c ****    *p_name_lower_case = name_lower_case;
 625:rtos/uC-FS/FAT/fs_fat_sfn.c ****    *p_ext_lower_case  = ext_lower_case;
 626:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 627:rtos/uC-FS/FAT/fs_fat_sfn.c ****    *p_err = (mixed == DEF_YES) ? FS_ERR_NAME_MIXED_CASE : FS_ERR_NONE;
 628:rtos/uC-FS/FAT/fs_fat_sfn.c **** }
 629:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 630:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 631:rtos/uC-FS/FAT/fs_fat_sfn.c **** /*
 632:rtos/uC-FS/FAT/fs_fat_sfn.c **** ***************************************************************************************************
 633:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                                        FS_FAT_SFN_SFN_Find()
 634:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
 635:rtos/uC-FS/FAT/fs_fat_sfn.c **** * Description : Search directory for SFN directory entry.
 636:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
 637:rtos/uC-FS/FAT/fs_fat_sfn.c **** * Argument(s) : p_vol               Pointer to volume.
 638:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
 639:rtos/uC-FS/FAT/fs_fat_sfn.c **** *               p_buf               Pointer to temporary buffer.
 640:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
 641:rtos/uC-FS/FAT/fs_fat_sfn.c **** *               name_8_3            Entry SFN.
 642:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
 643:rtos/uC-FS/FAT/fs_fat_sfn.c **** *               p_dir_start_pos     Pointer to directory position at which search should start; var
 644:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                                   will receive the directory position at which the entry is locat
 645:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
 646:rtos/uC-FS/FAT/fs_fat_sfn.c **** *               p_dir_end_pos       Pointer to variable that will receive the directory position at
 647:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                                   the entry is located.
 648:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
 649:rtos/uC-FS/FAT/fs_fat_sfn.c **** *               p_err               Pointer to variable that will receive the return error code fro
 650:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
 651:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                                       FS_ERR_NONE                       Directory entry found.
 652:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                                       FS_ERR_DEV                        Device access error.
 653:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                                       FS_ERR_SYS_DIR_ENTRY_NOT_FOUND    Directory entry not found
 654:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
 655:rtos/uC-FS/FAT/fs_fat_sfn.c **** * Return(s)   : none.
 656:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
 657:rtos/uC-FS/FAT/fs_fat_sfn.c **** * Note(s)     : (1) (a) The 'p_temp' pointer is 4-byte aligned since all buffers are 4-byte aligned
ARM GAS  /tmp/ccpi2Pe2.s 			page 13


 658:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
 659:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                   (b) All pointers to directory entries are 4-byte aligned since all directory en
 660:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                       lie at a offset multiple of 32 (the size of a directory entry) from the beg
 661:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                       of a sector.
 662:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
 663:rtos/uC-FS/FAT/fs_fat_sfn.c **** *               (2) The sector number gotten from the FAT should be valid.  These checks are effect
 664:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                   redundant.
 665:rtos/uC-FS/FAT/fs_fat_sfn.c **** ***************************************************************************************************
 666:rtos/uC-FS/FAT/fs_fat_sfn.c **** */
 667:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 668:rtos/uC-FS/FAT/fs_fat_sfn.c **** void  FS_FAT_SFN_SFN_Find (FS_VOL          *p_vol,
 669:rtos/uC-FS/FAT/fs_fat_sfn.c ****                            FS_BUF          *p_buf,
 670:rtos/uC-FS/FAT/fs_fat_sfn.c ****                            CPU_INT32U       name_8_3[],
 671:rtos/uC-FS/FAT/fs_fat_sfn.c ****                            FS_FAT_DIR_POS  *p_dir_start_pos,
 672:rtos/uC-FS/FAT/fs_fat_sfn.c ****                            FS_FAT_DIR_POS  *p_dir_end_pos,
 673:rtos/uC-FS/FAT/fs_fat_sfn.c ****                            FS_ERR          *p_err)
 674:rtos/uC-FS/FAT/fs_fat_sfn.c **** {
 675:rtos/uC-FS/FAT/fs_fat_sfn.c ****     FS_FAT_SEC_NBR   dir_cur_sec;
 676:rtos/uC-FS/FAT/fs_fat_sfn.c ****     CPU_BOOLEAN      dir_sec_valid;
 677:rtos/uC-FS/FAT/fs_fat_sfn.c ****     FS_SEC_SIZE      dir_end_sec_pos;
 678:rtos/uC-FS/FAT/fs_fat_sfn.c ****     FS_FAT_DATA     *p_fat_data;
 679:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 680:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 681:rtos/uC-FS/FAT/fs_fat_sfn.c ****     p_fat_data    = (FS_FAT_DATA *)p_vol->DataPtr;
 682:rtos/uC-FS/FAT/fs_fat_sfn.c ****     dir_cur_sec   =  p_dir_start_pos->SecNbr;
 683:rtos/uC-FS/FAT/fs_fat_sfn.c ****     dir_sec_valid =  FS_FAT_IS_VALID_SEC(p_fat_data, dir_cur_sec);
 684:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 685:rtos/uC-FS/FAT/fs_fat_sfn.c ****     while (dir_sec_valid == DEF_YES) {                          /* While sec is valid (see Note #2)
 686:rtos/uC-FS/FAT/fs_fat_sfn.c ****         FSBuf_Set(p_buf,
 687:rtos/uC-FS/FAT/fs_fat_sfn.c ****                   dir_cur_sec,
 688:rtos/uC-FS/FAT/fs_fat_sfn.c ****                   FS_VOL_SEC_TYPE_DIR,
 689:rtos/uC-FS/FAT/fs_fat_sfn.c ****                   DEF_YES,
 690:rtos/uC-FS/FAT/fs_fat_sfn.c ****                   p_err);
 691:rtos/uC-FS/FAT/fs_fat_sfn.c ****         if (*p_err != FS_ERR_NONE) {
 692:rtos/uC-FS/FAT/fs_fat_sfn.c ****             return;
 693:rtos/uC-FS/FAT/fs_fat_sfn.c ****         }
 694:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 695:rtos/uC-FS/FAT/fs_fat_sfn.c ****         dir_end_sec_pos = FS_FAT_SFN_DirEntryFindInSec(p_buf->DataPtr,
 696:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                        p_fat_data->SecSize,
 697:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                        name_8_3,
 698:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                        p_err);
 699:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 700:rtos/uC-FS/FAT/fs_fat_sfn.c ****         switch (*p_err) {
 701:rtos/uC-FS/FAT/fs_fat_sfn.c ****             case FS_ERR_NONE:                                   /* Entry with matching name found. 
 702:rtos/uC-FS/FAT/fs_fat_sfn.c ****                  p_dir_start_pos->SecNbr = dir_cur_sec;
 703:rtos/uC-FS/FAT/fs_fat_sfn.c ****                  p_dir_start_pos->SecPos = dir_end_sec_pos;
 704:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 705:rtos/uC-FS/FAT/fs_fat_sfn.c ****                  p_dir_end_pos->SecNbr   = p_dir_start_pos->SecNbr;
 706:rtos/uC-FS/FAT/fs_fat_sfn.c ****                  p_dir_end_pos->SecPos   = p_dir_start_pos->SecPos;
 707:rtos/uC-FS/FAT/fs_fat_sfn.c ****                  return;
 708:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 709:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 710:rtos/uC-FS/FAT/fs_fat_sfn.c ****             case FS_ERR_SYS_DIR_ENTRY_NOT_FOUND:                /* No entry with matching name exis
 711:rtos/uC-FS/FAT/fs_fat_sfn.c ****                  return;
 712:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 713:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 714:rtos/uC-FS/FAT/fs_fat_sfn.c ****             case FS_ERR_SYS_DIR_ENTRY_NOT_FOUND_YET:            /* Entry with matching name MAY exi
ARM GAS  /tmp/ccpi2Pe2.s 			page 14


 715:rtos/uC-FS/FAT/fs_fat_sfn.c ****                  dir_cur_sec = FS_FAT_SecNextGet(p_vol,
 716:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                  p_buf,
 717:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                  dir_cur_sec,
 718:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                  p_err);
 719:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 720:rtos/uC-FS/FAT/fs_fat_sfn.c ****                  switch (*p_err) {
 721:rtos/uC-FS/FAT/fs_fat_sfn.c ****                      case FS_ERR_NONE:                          /* More secs exist in dir.         
 722:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                                 /* Chk sec validity (see Note #3). 
 723:rtos/uC-FS/FAT/fs_fat_sfn.c ****                           dir_sec_valid = FS_FAT_IS_VALID_SEC(p_fat_data, dir_cur_sec);
 724:rtos/uC-FS/FAT/fs_fat_sfn.c ****                           break;
 725:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 726:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 727:rtos/uC-FS/FAT/fs_fat_sfn.c ****                      case FS_ERR_SYS_CLUS_CHAIN_END:            /* No more secs exist in dir.      
 728:rtos/uC-FS/FAT/fs_fat_sfn.c ****                      case FS_ERR_SYS_CLUS_INVALID:
 729:rtos/uC-FS/FAT/fs_fat_sfn.c ****                      case FS_ERR_DIR_FULL:
 730:rtos/uC-FS/FAT/fs_fat_sfn.c ****                          *p_err = FS_ERR_SYS_DIR_ENTRY_NOT_FOUND;
 731:rtos/uC-FS/FAT/fs_fat_sfn.c ****                           return;
 732:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 733:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 734:rtos/uC-FS/FAT/fs_fat_sfn.c ****                      case FS_ERR_DEV:
 735:rtos/uC-FS/FAT/fs_fat_sfn.c ****                      default:
 736:rtos/uC-FS/FAT/fs_fat_sfn.c ****                           return;
 737:rtos/uC-FS/FAT/fs_fat_sfn.c ****                  }
 738:rtos/uC-FS/FAT/fs_fat_sfn.c ****                  break;
 739:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 740:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 741:rtos/uC-FS/FAT/fs_fat_sfn.c ****             case FS_ERR_DEV:
 742:rtos/uC-FS/FAT/fs_fat_sfn.c ****                  return;
 743:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 744:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 745:rtos/uC-FS/FAT/fs_fat_sfn.c ****             default:
 746:rtos/uC-FS/FAT/fs_fat_sfn.c ****                  FS_TRACE_DBG(("FS_FAT_SFN_SFN_Find(): Default case reached.\r\n"));
 747:rtos/uC-FS/FAT/fs_fat_sfn.c ****                  return;
 748:rtos/uC-FS/FAT/fs_fat_sfn.c ****         }
 749:rtos/uC-FS/FAT/fs_fat_sfn.c ****     }
 750:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 751:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 752:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                                 /* Invalid sec found (see Note #3).
 753:rtos/uC-FS/FAT/fs_fat_sfn.c ****     FS_TRACE_DBG(("FS_FAT_SFN_SFN_Find(): Invalid sec gotten: %d.\r\n", dir_cur_sec));
 754:rtos/uC-FS/FAT/fs_fat_sfn.c ****    *p_err = FS_ERR_ENTRY_CORRUPT;
 755:rtos/uC-FS/FAT/fs_fat_sfn.c **** }
 756:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 757:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 758:rtos/uC-FS/FAT/fs_fat_sfn.c **** /*
 759:rtos/uC-FS/FAT/fs_fat_sfn.c **** ***************************************************************************************************
 760:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                                        FS_FAT_SFN_LabelGet()
 761:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
 762:rtos/uC-FS/FAT/fs_fat_sfn.c **** * Description : Get volume label.
 763:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
 764:rtos/uC-FS/FAT/fs_fat_sfn.c **** * Argument(s) : p_vol       Pointer to volume.
 765:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
 766:rtos/uC-FS/FAT/fs_fat_sfn.c **** *               label       String buffer that will receive volume label.
 767:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
 768:rtos/uC-FS/FAT/fs_fat_sfn.c **** *               p_err       Pointer to variable that will receive the return error code from this f
 769:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
 770:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                               FS_ERR_NONE                   Label gotten.
 771:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                               FS_ERR_VOL_LABEL_NOT_FOUND    Volume label was not found.
ARM GAS  /tmp/ccpi2Pe2.s 			page 15


 772:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                               FS_ERR_DEV                    Device access error.
 773:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
 774:rtos/uC-FS/FAT/fs_fat_sfn.c **** * Return(s)   : none.
 775:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
 776:rtos/uC-FS/FAT/fs_fat_sfn.c **** * Note(s)     : none.
 777:rtos/uC-FS/FAT/fs_fat_sfn.c **** ***************************************************************************************************
 778:rtos/uC-FS/FAT/fs_fat_sfn.c **** */
 779:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 780:rtos/uC-FS/FAT/fs_fat_sfn.c **** void  FS_FAT_SFN_LabelGet (FS_VOL    *p_vol,
 781:rtos/uC-FS/FAT/fs_fat_sfn.c ****                            CPU_CHAR  *label,
 782:rtos/uC-FS/FAT/fs_fat_sfn.c ****                            FS_ERR    *p_err)
 783:rtos/uC-FS/FAT/fs_fat_sfn.c **** {
 784:rtos/uC-FS/FAT/fs_fat_sfn.c ****     FS_BUF          *p_buf;
 785:rtos/uC-FS/FAT/fs_fat_sfn.c ****     FS_FAT_DIR_POS   dir_end_pos;
 786:rtos/uC-FS/FAT/fs_fat_sfn.c ****     FS_FAT_DIR_POS   dir_start_pos;
 787:rtos/uC-FS/FAT/fs_fat_sfn.c ****     FS_FAT_SEC_NBR   dir_start_sec;
 788:rtos/uC-FS/FAT/fs_fat_sfn.c ****     CPU_CHAR        *p_dir_entry;
 789:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 790:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 791:rtos/uC-FS/FAT/fs_fat_sfn.c ****     p_buf = FSBuf_Get(p_vol);
 792:rtos/uC-FS/FAT/fs_fat_sfn.c ****     if (p_buf == (FS_BUF *)0) {
 793:rtos/uC-FS/FAT/fs_fat_sfn.c ****        *p_err = FS_ERR_BUF_NONE_AVAIL;
 794:rtos/uC-FS/FAT/fs_fat_sfn.c ****         return;
 795:rtos/uC-FS/FAT/fs_fat_sfn.c ****     }
 796:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 797:rtos/uC-FS/FAT/fs_fat_sfn.c ****     dir_start_sec = ((FS_FAT_DATA *)p_vol->DataPtr)->RootDirStart;
 798:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 799:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 800:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 801:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                                 /* -------------------- FIND LABEL 
 802:rtos/uC-FS/FAT/fs_fat_sfn.c ****     dir_start_pos.SecNbr = dir_start_sec;
 803:rtos/uC-FS/FAT/fs_fat_sfn.c ****     dir_start_pos.SecPos = 0u;
 804:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 805:rtos/uC-FS/FAT/fs_fat_sfn.c ****     FS_FAT_SFN_LabelFind( p_vol,                                /* Find label ...                  
 806:rtos/uC-FS/FAT/fs_fat_sfn.c ****                           p_buf,
 807:rtos/uC-FS/FAT/fs_fat_sfn.c ****                          &dir_start_pos,
 808:rtos/uC-FS/FAT/fs_fat_sfn.c ****                          &dir_end_pos,
 809:rtos/uC-FS/FAT/fs_fat_sfn.c ****                           p_err);
 810:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 811:rtos/uC-FS/FAT/fs_fat_sfn.c ****     if (*p_err != FS_ERR_NONE) {
 812:rtos/uC-FS/FAT/fs_fat_sfn.c ****         if (*p_err == FS_ERR_SYS_DIR_ENTRY_NOT_FOUND) {         /*           ... if dir entry not f
 813:rtos/uC-FS/FAT/fs_fat_sfn.c ****             *p_err =  FS_ERR_VOL_LABEL_NOT_FOUND;               /*                                 
 814:rtos/uC-FS/FAT/fs_fat_sfn.c ****         }
 815:rtos/uC-FS/FAT/fs_fat_sfn.c ****         FSBuf_Free(p_buf);
 816:rtos/uC-FS/FAT/fs_fat_sfn.c ****         return;
 817:rtos/uC-FS/FAT/fs_fat_sfn.c ****     }
 818:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 819:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 820:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                                 /* ----------------- COPY LABEL TO 
 821:rtos/uC-FS/FAT/fs_fat_sfn.c ****     p_dir_entry = (CPU_CHAR *)p_buf->DataPtr + dir_end_pos.SecPos;
 822:rtos/uC-FS/FAT/fs_fat_sfn.c ****     Str_Copy_N(label, (CPU_CHAR *)p_dir_entry, FS_FAT_VOL_LABEL_LEN);
 823:rtos/uC-FS/FAT/fs_fat_sfn.c ****     FSBuf_Free(p_buf);
 824:rtos/uC-FS/FAT/fs_fat_sfn.c ****    *p_err = FS_ERR_NONE;
 825:rtos/uC-FS/FAT/fs_fat_sfn.c **** }
 826:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 827:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 828:rtos/uC-FS/FAT/fs_fat_sfn.c **** /*
ARM GAS  /tmp/ccpi2Pe2.s 			page 16


 829:rtos/uC-FS/FAT/fs_fat_sfn.c **** ***************************************************************************************************
 830:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                                        FS_FAT_SFN_LabelSet()
 831:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
 832:rtos/uC-FS/FAT/fs_fat_sfn.c **** * Description : Set volume label.
 833:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
 834:rtos/uC-FS/FAT/fs_fat_sfn.c **** * Argument(s) : p_vol       Pointer to volume.
 835:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
 836:rtos/uC-FS/FAT/fs_fat_sfn.c **** *               label       Volume label.
 837:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
 838:rtos/uC-FS/FAT/fs_fat_sfn.c **** *               p_err       Pointer to variable that will receive the return error code from this f
 839:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
 840:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                               FS_ERR_NONE                 Label set.
 841:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                               FS_ERR_DEV                  Device access error.
 842:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                               FS_ERR_DIR_FULL             Directory is full (space could not be a
 843:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                               FS_ERR_DEV_FULL             Device is full (space could not be allo
 844:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                               FS_ERR_ENTRY_CORRUPT        File system entry is corrupt.
 845:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                               FS_ERR_VOL_LABEL_INVALID    Volume label is invalid.
 846:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
 847:rtos/uC-FS/FAT/fs_fat_sfn.c **** * Return(s)   : none.
 848:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
 849:rtos/uC-FS/FAT/fs_fat_sfn.c **** * Note(s)     : none.
 850:rtos/uC-FS/FAT/fs_fat_sfn.c **** ***************************************************************************************************
 851:rtos/uC-FS/FAT/fs_fat_sfn.c **** */
 852:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 853:rtos/uC-FS/FAT/fs_fat_sfn.c **** #if (FS_CFG_RD_ONLY_EN == DEF_DISABLED)
 854:rtos/uC-FS/FAT/fs_fat_sfn.c **** void  FS_FAT_SFN_LabelSet (FS_VOL    *p_vol,
 855:rtos/uC-FS/FAT/fs_fat_sfn.c ****                            CPU_CHAR  *label,
 856:rtos/uC-FS/FAT/fs_fat_sfn.c ****                            FS_ERR    *p_err)
 857:rtos/uC-FS/FAT/fs_fat_sfn.c **** {
 858:rtos/uC-FS/FAT/fs_fat_sfn.c ****     FS_BUF            *p_buf;
 859:rtos/uC-FS/FAT/fs_fat_sfn.c ****     FS_FAT_DIR_POS     dir_end_pos;
 860:rtos/uC-FS/FAT/fs_fat_sfn.c ****     FS_FAT_DIR_POS     dir_start_pos;
 861:rtos/uC-FS/FAT/fs_fat_sfn.c ****     FS_FAT_SEC_NBR     dir_start_sec;
 862:rtos/uC-FS/FAT/fs_fat_sfn.c ****     CPU_INT08U        *p_dir_entry;
 863:rtos/uC-FS/FAT/fs_fat_sfn.c ****     FS_FILE_NAME_LEN   i;
 864:rtos/uC-FS/FAT/fs_fat_sfn.c ****     CPU_BOOLEAN        is_legal;
 865:rtos/uC-FS/FAT/fs_fat_sfn.c ****     CPU_CHAR           label_buf[FS_FAT_VOL_LABEL_LEN + 1u];
 866:rtos/uC-FS/FAT/fs_fat_sfn.c ****     CPU_CHAR           label_char;
 867:rtos/uC-FS/FAT/fs_fat_sfn.c ****     FS_FILE_NAME_LEN   len;
 868:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 869:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 870:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                                 /* ------------------- PROCESS LABE
 871:rtos/uC-FS/FAT/fs_fat_sfn.c ****     for (i = 0u; i < 11u; i++) {                                /* 'Clear' label buf.              
 872:rtos/uC-FS/FAT/fs_fat_sfn.c ****         label_buf[i] = (CPU_CHAR)ASCII_CHAR_SPACE;
 873:rtos/uC-FS/FAT/fs_fat_sfn.c ****     }
 874:rtos/uC-FS/FAT/fs_fat_sfn.c ****     label_buf[11] = (CPU_CHAR)ASCII_CHAR_NULL;                  /* 'Clear' final byte of label buf.
 875:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 876:rtos/uC-FS/FAT/fs_fat_sfn.c ****     label_char = *label;
 877:rtos/uC-FS/FAT/fs_fat_sfn.c ****     is_legal   = DEF_YES;
 878:rtos/uC-FS/FAT/fs_fat_sfn.c ****     len        = 0u;
 879:rtos/uC-FS/FAT/fs_fat_sfn.c ****     i          =  0u;
 880:rtos/uC-FS/FAT/fs_fat_sfn.c ****     while ((label_char != (CPU_CHAR)ASCII_CHAR_NULL     ) &&    /* Process str until NULL char ... 
 881:rtos/uC-FS/FAT/fs_fat_sfn.c ****            (is_legal   ==  DEF_YES                      )) {    /* ... or illegal label is found.  
 882:rtos/uC-FS/FAT/fs_fat_sfn.c ****         if (len < FS_FAT_VOL_LABEL_LEN) {
 883:rtos/uC-FS/FAT/fs_fat_sfn.c ****             is_legal = FS_FAT_IS_LEGAL_VOL_LABEL_CHAR(label_char);
 884:rtos/uC-FS/FAT/fs_fat_sfn.c ****             if (is_legal == DEF_YES) {
 885:rtos/uC-FS/FAT/fs_fat_sfn.c ****                 label_buf[i] = ASCII_TO_UPPER(label_char);
ARM GAS  /tmp/ccpi2Pe2.s 			page 17


 886:rtos/uC-FS/FAT/fs_fat_sfn.c ****                 i++;
 887:rtos/uC-FS/FAT/fs_fat_sfn.c ****                 len++;
 888:rtos/uC-FS/FAT/fs_fat_sfn.c ****             } else {
 889:rtos/uC-FS/FAT/fs_fat_sfn.c ****                 is_legal = DEF_NO;
 890:rtos/uC-FS/FAT/fs_fat_sfn.c ****             }
 891:rtos/uC-FS/FAT/fs_fat_sfn.c ****         } else {                                                /* If label too long ... illegal la
 892:rtos/uC-FS/FAT/fs_fat_sfn.c ****             is_legal = DEF_NO;
 893:rtos/uC-FS/FAT/fs_fat_sfn.c ****         }
 894:rtos/uC-FS/FAT/fs_fat_sfn.c ****         label++;
 895:rtos/uC-FS/FAT/fs_fat_sfn.c ****         label_char = *label;
 896:rtos/uC-FS/FAT/fs_fat_sfn.c ****     }
 897:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 898:rtos/uC-FS/FAT/fs_fat_sfn.c ****     if (is_legal == DEF_NO) {                                   /* Rtn err if illegal label.       
 899:rtos/uC-FS/FAT/fs_fat_sfn.c ****        *p_err = FS_ERR_VOL_LABEL_INVALID;
 900:rtos/uC-FS/FAT/fs_fat_sfn.c ****         return;
 901:rtos/uC-FS/FAT/fs_fat_sfn.c ****     }
 902:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 903:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 904:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                                 /* -------------------- FIND LABEL 
 905:rtos/uC-FS/FAT/fs_fat_sfn.c ****     p_buf = FSBuf_Get(p_vol);
 906:rtos/uC-FS/FAT/fs_fat_sfn.c ****     if (p_buf == (FS_BUF *)0) {
 907:rtos/uC-FS/FAT/fs_fat_sfn.c ****        *p_err = FS_ERR_BUF_NONE_AVAIL;
 908:rtos/uC-FS/FAT/fs_fat_sfn.c ****         return;
 909:rtos/uC-FS/FAT/fs_fat_sfn.c ****     }
 910:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 911:rtos/uC-FS/FAT/fs_fat_sfn.c ****     dir_start_sec = ((FS_FAT_DATA *)p_vol->DataPtr)->RootDirStart;
 912:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 913:rtos/uC-FS/FAT/fs_fat_sfn.c ****     dir_start_pos.SecNbr = dir_start_sec;
 914:rtos/uC-FS/FAT/fs_fat_sfn.c ****     dir_start_pos.SecPos = 0u;
 915:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 916:rtos/uC-FS/FAT/fs_fat_sfn.c ****     FS_FAT_SFN_LabelFind( p_vol,                                /* Find label ...                  
 917:rtos/uC-FS/FAT/fs_fat_sfn.c ****                           p_buf,
 918:rtos/uC-FS/FAT/fs_fat_sfn.c ****                          &dir_start_pos,
 919:rtos/uC-FS/FAT/fs_fat_sfn.c ****                          &dir_end_pos,
 920:rtos/uC-FS/FAT/fs_fat_sfn.c ****                           p_err);
 921:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 922:rtos/uC-FS/FAT/fs_fat_sfn.c ****     if (*p_err == FS_ERR_DEV) {
 923:rtos/uC-FS/FAT/fs_fat_sfn.c ****         FSBuf_Free(p_buf);
 924:rtos/uC-FS/FAT/fs_fat_sfn.c ****         return;
 925:rtos/uC-FS/FAT/fs_fat_sfn.c ****     }
 926:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 927:rtos/uC-FS/FAT/fs_fat_sfn.c ****     if (*p_err != FS_ERR_NONE) {                                /* If not found ...                
 928:rtos/uC-FS/FAT/fs_fat_sfn.c ****         FS_FAT_SFN_DirEntryPlace( p_vol,                        /*              ... find place for 
 929:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                   p_buf,
 930:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                   dir_start_sec,
 931:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                  &dir_end_pos,
 932:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                   p_err);
 933:rtos/uC-FS/FAT/fs_fat_sfn.c ****         if (*p_err != FS_ERR_NONE) {
 934:rtos/uC-FS/FAT/fs_fat_sfn.c ****             FSBuf_Free(p_buf);
 935:rtos/uC-FS/FAT/fs_fat_sfn.c ****             return;
 936:rtos/uC-FS/FAT/fs_fat_sfn.c ****         }
 937:rtos/uC-FS/FAT/fs_fat_sfn.c ****     }
 938:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 939:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 940:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                                 /* ----------------- COPY LABEL TO 
 941:rtos/uC-FS/FAT/fs_fat_sfn.c ****     p_dir_entry = (CPU_INT08U *)p_buf->DataPtr + dir_end_pos.SecPos;
 942:rtos/uC-FS/FAT/fs_fat_sfn.c ****     Mem_Clr((void *)p_dir_entry, FS_FAT_SIZE_DIR_ENTRY);
ARM GAS  /tmp/ccpi2Pe2.s 			page 18


 943:rtos/uC-FS/FAT/fs_fat_sfn.c ****     Mem_Copy((void *)p_dir_entry, (void *)label_buf, FS_FAT_VOL_LABEL_LEN);
 944:rtos/uC-FS/FAT/fs_fat_sfn.c ****     p_dir_entry[FS_FAT_DIRENT_OFF_ATTR] = FS_FAT_DIRENT_ATTR_VOLUME_ID;
 945:rtos/uC-FS/FAT/fs_fat_sfn.c ****     FSBuf_MarkDirty(p_buf, p_err);                              /* Wr dir entry.                   
 946:rtos/uC-FS/FAT/fs_fat_sfn.c ****     FSBuf_Flush(p_buf, p_err);
 947:rtos/uC-FS/FAT/fs_fat_sfn.c ****     FSBuf_Free(p_buf);
 948:rtos/uC-FS/FAT/fs_fat_sfn.c **** }
 949:rtos/uC-FS/FAT/fs_fat_sfn.c **** #endif
 950:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 951:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 952:rtos/uC-FS/FAT/fs_fat_sfn.c **** /*
 953:rtos/uC-FS/FAT/fs_fat_sfn.c **** ***************************************************************************************************
 954:rtos/uC-FS/FAT/fs_fat_sfn.c **** ***************************************************************************************************
 955:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                                       FILE NAME API FUNCTIONS
 956:rtos/uC-FS/FAT/fs_fat_sfn.c **** ***************************************************************************************************
 957:rtos/uC-FS/FAT/fs_fat_sfn.c **** ***************************************************************************************************
 958:rtos/uC-FS/FAT/fs_fat_sfn.c **** */
 959:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 960:rtos/uC-FS/FAT/fs_fat_sfn.c **** /*
 961:rtos/uC-FS/FAT/fs_fat_sfn.c **** ***************************************************************************************************
 962:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                                     FS_FAT_SFN_DirEntryCreate()
 963:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
 964:rtos/uC-FS/FAT/fs_fat_sfn.c **** * Description : Create SFN directory entry.
 965:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
 966:rtos/uC-FS/FAT/fs_fat_sfn.c **** * Argument(s) : p_vol               Pointer to volume.
 967:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
 968:rtos/uC-FS/FAT/fs_fat_sfn.c **** *               p_buf               Pointer to temporary buffer.
 969:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
 970:rtos/uC-FS/FAT/fs_fat_sfn.c **** *               name                Name of the entry.
 971:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
 972:rtos/uC-FS/FAT/fs_fat_sfn.c **** *               is_dir              Indicates whether directory entry is entry for directory :
 973:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
 974:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                                       DEF_YES, entry is for directory.
 975:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                                       DEF_NO,  entry is for file.
 976:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
 977:rtos/uC-FS/FAT/fs_fat_sfn.c **** *               file_first_clus     First cluster in entry.
 978:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
 979:rtos/uC-FS/FAT/fs_fat_sfn.c **** *               p_dir_start_pos     Pointer to directory position at which entry should be created;
 980:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                                   variable that will receive the directory position at which the 
 981:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                                   was created.
 982:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
 983:rtos/uC-FS/FAT/fs_fat_sfn.c **** *               p_dir_end_pos       Pointer to variable that will receive the directory position at
 984:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                                   the entry was created.
 985:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
 986:rtos/uC-FS/FAT/fs_fat_sfn.c **** *               p_err               Pointer to variable that will receive the return error code fro
 987:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
 988:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                                       FS_ERR_NONE             Directory entry created.
 989:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                                       FS_ERR_DEV              Device access error.
 990:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                                       FS_ERR_DIR_FULL         Directory is full (space could not 
 991:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                                       FS_ERR_DEV_FULL         Device is full (space could not be 
 992:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                                       FS_ERR_ENTRY_CORRUPT    File system entry is corrupt.
 993:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                                       FS_ERR_NAME_INVALID     SFN name invalid.
 994:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
 995:rtos/uC-FS/FAT/fs_fat_sfn.c **** * Return(s)   : none.
 996:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
 997:rtos/uC-FS/FAT/fs_fat_sfn.c **** * Note(s)     : none.
 998:rtos/uC-FS/FAT/fs_fat_sfn.c **** ***************************************************************************************************
 999:rtos/uC-FS/FAT/fs_fat_sfn.c **** */
ARM GAS  /tmp/ccpi2Pe2.s 			page 19


1000:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1001:rtos/uC-FS/FAT/fs_fat_sfn.c **** #if (FS_CFG_RD_ONLY_EN == DEF_DISABLED)
1002:rtos/uC-FS/FAT/fs_fat_sfn.c **** static  void  FS_FAT_SFN_DirEntryCreate (FS_VOL           *p_vol,
1003:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                          FS_BUF           *p_buf,
1004:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                          CPU_CHAR         *name,
1005:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                          CPU_BOOLEAN       is_dir,
1006:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                          FS_FAT_CLUS_NBR   file_first_clus,
1007:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                          FS_FAT_DIR_POS   *p_dir_start_pos,
1008:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                          FS_FAT_DIR_POS   *p_dir_end_pos,
1009:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                          FS_ERR           *p_err)
1010:rtos/uC-FS/FAT/fs_fat_sfn.c **** {
1011:rtos/uC-FS/FAT/fs_fat_sfn.c ****     FS_FAT_DIR_POS   dir_cur_pos;
1012:rtos/uC-FS/FAT/fs_fat_sfn.c ****     CPU_INT08U      *p_dir_entry;
1013:rtos/uC-FS/FAT/fs_fat_sfn.c ****     CPU_BOOLEAN      ext_lower_case;
1014:rtos/uC-FS/FAT/fs_fat_sfn.c ****     CPU_INT32U       name_8_3[3];
1015:rtos/uC-FS/FAT/fs_fat_sfn.c ****     CPU_BOOLEAN      name_lower_case;
1016:rtos/uC-FS/FAT/fs_fat_sfn.c **** #ifdef  FS_FAT_JOURNAL_MODULE_PRESENT
1017:rtos/uC-FS/FAT/fs_fat_sfn.c ****     FS_FAT_DATA     *p_fat_data;
1018:rtos/uC-FS/FAT/fs_fat_sfn.c **** #endif
1019:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1020:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1021:rtos/uC-FS/FAT/fs_fat_sfn.c ****     p_dir_end_pos->SecNbr = 0u;                                 /* Dflt dir end pos.               
1022:rtos/uC-FS/FAT/fs_fat_sfn.c ****     p_dir_end_pos->SecPos = 0u;
1023:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1024:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1025:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                                 /* --------------------- MAKE SFN -
1026:rtos/uC-FS/FAT/fs_fat_sfn.c ****     FS_FAT_SFN_Create( name,
1027:rtos/uC-FS/FAT/fs_fat_sfn.c ****                       &name_8_3[0],
1028:rtos/uC-FS/FAT/fs_fat_sfn.c ****                       &name_lower_case,
1029:rtos/uC-FS/FAT/fs_fat_sfn.c ****                       &ext_lower_case,
1030:rtos/uC-FS/FAT/fs_fat_sfn.c ****                        p_err);
1031:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1032:rtos/uC-FS/FAT/fs_fat_sfn.c ****     if ((*p_err != FS_ERR_NONE) &&
1033:rtos/uC-FS/FAT/fs_fat_sfn.c ****         (*p_err != FS_ERR_NAME_MIXED_CASE)) {
1034:rtos/uC-FS/FAT/fs_fat_sfn.c ****          *p_err  = FS_ERR_NAME_INVALID;
1035:rtos/uC-FS/FAT/fs_fat_sfn.c ****           return;
1036:rtos/uC-FS/FAT/fs_fat_sfn.c ****     }
1037:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1038:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1039:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                                 /* ------------------ FIND DIR ENTR
1040:rtos/uC-FS/FAT/fs_fat_sfn.c ****     FS_FAT_SFN_DirEntryPlace( p_vol,
1041:rtos/uC-FS/FAT/fs_fat_sfn.c ****                               p_buf,
1042:rtos/uC-FS/FAT/fs_fat_sfn.c ****                               p_dir_start_pos->SecNbr,
1043:rtos/uC-FS/FAT/fs_fat_sfn.c ****                              &dir_cur_pos,
1044:rtos/uC-FS/FAT/fs_fat_sfn.c ****                               p_err);
1045:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1046:rtos/uC-FS/FAT/fs_fat_sfn.c ****     switch (*p_err) {
1047:rtos/uC-FS/FAT/fs_fat_sfn.c ****         case FS_ERR_NONE:
1048:rtos/uC-FS/FAT/fs_fat_sfn.c ****              break;
1049:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1050:rtos/uC-FS/FAT/fs_fat_sfn.c ****         case FS_ERR_DIR_FULL:
1051:rtos/uC-FS/FAT/fs_fat_sfn.c ****         case FS_ERR_DEV_FULL:
1052:rtos/uC-FS/FAT/fs_fat_sfn.c ****         case FS_ERR_ENTRY_CORRUPT:
1053:rtos/uC-FS/FAT/fs_fat_sfn.c ****              FS_TRACE_DBG(("FS_FAT_SFN_DirEntryCreate(): No dir entries avail.\r\n"));
1054:rtos/uC-FS/FAT/fs_fat_sfn.c ****              return;
1055:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1056:rtos/uC-FS/FAT/fs_fat_sfn.c ****         case FS_ERR_DEV:
ARM GAS  /tmp/ccpi2Pe2.s 			page 20


1057:rtos/uC-FS/FAT/fs_fat_sfn.c ****              return;
1058:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1059:rtos/uC-FS/FAT/fs_fat_sfn.c ****         default:
1060:rtos/uC-FS/FAT/fs_fat_sfn.c ****              FS_TRACE_DBG(("FS_FAT_SFN_DirEntryCreate(): Default case reached.\r\n"));
1061:rtos/uC-FS/FAT/fs_fat_sfn.c ****              return;
1062:rtos/uC-FS/FAT/fs_fat_sfn.c ****     }
1063:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1064:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1065:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                                 /* ------------------- ENTER JOURNA
1066:rtos/uC-FS/FAT/fs_fat_sfn.c **** #ifdef  FS_FAT_JOURNAL_MODULE_PRESENT
1067:rtos/uC-FS/FAT/fs_fat_sfn.c ****     p_fat_data = (FS_FAT_DATA *)p_vol->DataPtr;
1068:rtos/uC-FS/FAT/fs_fat_sfn.c ****     if (DEF_BIT_IS_SET(p_fat_data->JournalState, FS_FAT_JOURNAL_STATE_REPLAY) == DEF_NO) {
1069:rtos/uC-FS/FAT/fs_fat_sfn.c ****         FS_FAT_JournalEnterEntryCreate(p_vol,
1070:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                        p_buf,
1071:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                       &dir_cur_pos,
1072:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                       &dir_cur_pos,
1073:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                       p_err);
1074:rtos/uC-FS/FAT/fs_fat_sfn.c ****         if (*p_err != FS_ERR_NONE) {
1075:rtos/uC-FS/FAT/fs_fat_sfn.c ****             return;
1076:rtos/uC-FS/FAT/fs_fat_sfn.c ****         }
1077:rtos/uC-FS/FAT/fs_fat_sfn.c ****     }
1078:rtos/uC-FS/FAT/fs_fat_sfn.c **** #endif
1079:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1080:rtos/uC-FS/FAT/fs_fat_sfn.c ****     FSBuf_Set(p_buf,
1081:rtos/uC-FS/FAT/fs_fat_sfn.c ****               dir_cur_pos.SecNbr,
1082:rtos/uC-FS/FAT/fs_fat_sfn.c ****               FS_VOL_SEC_TYPE_DIR,
1083:rtos/uC-FS/FAT/fs_fat_sfn.c ****               DEF_YES,
1084:rtos/uC-FS/FAT/fs_fat_sfn.c ****               p_err);
1085:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1086:rtos/uC-FS/FAT/fs_fat_sfn.c ****     if (*p_err != FS_ERR_NONE) {
1087:rtos/uC-FS/FAT/fs_fat_sfn.c ****         return;
1088:rtos/uC-FS/FAT/fs_fat_sfn.c ****     }
1089:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1090:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1091:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                                 /* ----------------- WR SFN DIR ENT
1092:rtos/uC-FS/FAT/fs_fat_sfn.c ****     p_dir_entry = (CPU_INT08U *)p_buf->DataPtr + dir_cur_pos.SecPos;
1093:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1094:rtos/uC-FS/FAT/fs_fat_sfn.c ****     FS_FAT_SFN_DirEntryFmt(p_dir_entry,                         /* Create dir entry.               
1095:rtos/uC-FS/FAT/fs_fat_sfn.c ****                            name_8_3,
1096:rtos/uC-FS/FAT/fs_fat_sfn.c ****                            is_dir,
1097:rtos/uC-FS/FAT/fs_fat_sfn.c ****                            file_first_clus,
1098:rtos/uC-FS/FAT/fs_fat_sfn.c ****                            name_lower_case,
1099:rtos/uC-FS/FAT/fs_fat_sfn.c ****                            ext_lower_case);
1100:rtos/uC-FS/FAT/fs_fat_sfn.c ****     FSBuf_MarkDirty(p_buf, p_err);                              /* Wr dir entry.                   
1101:rtos/uC-FS/FAT/fs_fat_sfn.c ****     if (*p_err != FS_ERR_NONE) {
1102:rtos/uC-FS/FAT/fs_fat_sfn.c ****         return;
1103:rtos/uC-FS/FAT/fs_fat_sfn.c ****     }
1104:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1105:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1106:rtos/uC-FS/FAT/fs_fat_sfn.c ****     p_dir_start_pos->SecNbr = dir_cur_pos.SecNbr;               /* Rtn start pos.                  
1107:rtos/uC-FS/FAT/fs_fat_sfn.c ****     p_dir_start_pos->SecPos = dir_cur_pos.SecPos;
1108:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1109:rtos/uC-FS/FAT/fs_fat_sfn.c ****     p_dir_end_pos->SecNbr   = dir_cur_pos.SecNbr;               /* Rtn end   pos.                  
1110:rtos/uC-FS/FAT/fs_fat_sfn.c ****     p_dir_end_pos->SecPos   = dir_cur_pos.SecPos;
1111:rtos/uC-FS/FAT/fs_fat_sfn.c **** }
1112:rtos/uC-FS/FAT/fs_fat_sfn.c **** #endif
1113:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
ARM GAS  /tmp/ccpi2Pe2.s 			page 21


1114:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1115:rtos/uC-FS/FAT/fs_fat_sfn.c **** /*
1116:rtos/uC-FS/FAT/fs_fat_sfn.c **** ***************************************************************************************************
1117:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                                    FS_FAT_SFN_DirEntryCreateAt()
1118:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
1119:rtos/uC-FS/FAT/fs_fat_sfn.c **** * Description : Create SFN directory entry at specified position.
1120:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
1121:rtos/uC-FS/FAT/fs_fat_sfn.c **** * Argument(s) : p_vol               Pointer to volume.
1122:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
1123:rtos/uC-FS/FAT/fs_fat_sfn.c **** *               p_buf               Pointer to temporary buffer.
1124:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
1125:rtos/uC-FS/FAT/fs_fat_sfn.c **** *               name                Name of the entry.
1126:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
1127:rtos/uC-FS/FAT/fs_fat_sfn.c **** *               name_len            Entry name length, in characters.
1128:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
1129:rtos/uC-FS/FAT/fs_fat_sfn.c **** *               name_8_3            Entry SFN.
1130:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
1131:rtos/uC-FS/FAT/fs_fat_sfn.c **** *               is_dir              Indicates whether directory entry is entry for directory :
1132:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
1133:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                                       DEF_YES, entry is for directory.
1134:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                                       DEF_NO,  entry is for file.
1135:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
1136:rtos/uC-FS/FAT/fs_fat_sfn.c **** *               file_first_clus     First cluster in entry.
1137:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
1138:rtos/uC-FS/FAT/fs_fat_sfn.c **** *               p_dir_pos           Pointer to directory position at which entry should be created.
1139:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
1140:rtos/uC-FS/FAT/fs_fat_sfn.c **** *               p_dir_end_pos       Pointer to variable that will receive the directory position at
1141:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                                   entry was created.
1142:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
1143:rtos/uC-FS/FAT/fs_fat_sfn.c **** *               p_err               Pointer to variable that will receive the return error code fro
1144:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
1145:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                                       FS_ERR_NONE             Directory entry created.
1146:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                                       FS_ERR_DEV              Device access error.
1147:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                                       FS_ERR_DIR_FULL         Directory is full (space could not 
1148:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                                       FS_ERR_DEV_FULL         Device is full (space could not be 
1149:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                                       FS_ERR_ENTRY_CORRUPT    File system entry is corrupt.
1150:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
1151:rtos/uC-FS/FAT/fs_fat_sfn.c **** * Return(s)   : none.
1152:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
1153:rtos/uC-FS/FAT/fs_fat_sfn.c **** * Note(s)     : none.
1154:rtos/uC-FS/FAT/fs_fat_sfn.c **** ***************************************************************************************************
1155:rtos/uC-FS/FAT/fs_fat_sfn.c **** */
1156:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1157:rtos/uC-FS/FAT/fs_fat_sfn.c **** #if (FS_CFG_RD_ONLY_EN == DEF_DISABLED)
1158:rtos/uC-FS/FAT/fs_fat_sfn.c **** static  void  FS_FAT_SFN_DirEntryCreateAt (FS_VOL            *p_vol,
1159:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                            FS_BUF            *p_buf,
1160:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                            CPU_CHAR          *name,
1161:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                            FS_FILE_NAME_LEN   name_len,
1162:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                            CPU_INT32U         name_8_3[],
1163:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                            CPU_BOOLEAN        is_dir,
1164:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                            FS_FAT_CLUS_NBR    file_first_clus,
1165:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                            FS_FAT_DIR_POS    *p_dir_pos,
1166:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                            FS_FAT_DIR_POS    *p_dir_end_pos,
1167:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                            FS_ERR            *p_err)
1168:rtos/uC-FS/FAT/fs_fat_sfn.c **** {
1169:rtos/uC-FS/FAT/fs_fat_sfn.c ****     CPU_INT08U  *p_dir_entry;
1170:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
ARM GAS  /tmp/ccpi2Pe2.s 			page 22


1171:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1172:rtos/uC-FS/FAT/fs_fat_sfn.c ****    (void)name;                                                  /*lint --e{550} Suppress "Symbol no
1173:rtos/uC-FS/FAT/fs_fat_sfn.c ****    (void)name_len;
1174:rtos/uC-FS/FAT/fs_fat_sfn.c ****    (void)p_vol;
1175:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1176:rtos/uC-FS/FAT/fs_fat_sfn.c ****     p_dir_end_pos->SecNbr = 0u;
1177:rtos/uC-FS/FAT/fs_fat_sfn.c ****     p_dir_end_pos->SecPos = 0u;
1178:rtos/uC-FS/FAT/fs_fat_sfn.c ****     p_dir_entry           = (CPU_INT08U *)p_buf->DataPtr + p_dir_pos->SecPos;
1179:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1180:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1181:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1182:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                                 /* ----------------- WR SFN DIR ENT
1183:rtos/uC-FS/FAT/fs_fat_sfn.c ****     FSBuf_Set(p_buf,                                            /* Rd sec.                         
1184:rtos/uC-FS/FAT/fs_fat_sfn.c ****               p_dir_pos->SecNbr,
1185:rtos/uC-FS/FAT/fs_fat_sfn.c ****               FS_VOL_SEC_TYPE_DIR,
1186:rtos/uC-FS/FAT/fs_fat_sfn.c ****               DEF_YES,
1187:rtos/uC-FS/FAT/fs_fat_sfn.c ****               p_err);
1188:rtos/uC-FS/FAT/fs_fat_sfn.c ****     if (*p_err != FS_ERR_NONE) {
1189:rtos/uC-FS/FAT/fs_fat_sfn.c ****         return;
1190:rtos/uC-FS/FAT/fs_fat_sfn.c ****     }
1191:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1192:rtos/uC-FS/FAT/fs_fat_sfn.c ****     FS_FAT_SFN_DirEntryFmt(p_dir_entry,                         /* Create dir entry.               
1193:rtos/uC-FS/FAT/fs_fat_sfn.c ****                            name_8_3,
1194:rtos/uC-FS/FAT/fs_fat_sfn.c ****                            is_dir,
1195:rtos/uC-FS/FAT/fs_fat_sfn.c ****                            file_first_clus,
1196:rtos/uC-FS/FAT/fs_fat_sfn.c ****                            DEF_NO,
1197:rtos/uC-FS/FAT/fs_fat_sfn.c ****                            DEF_NO);
1198:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1199:rtos/uC-FS/FAT/fs_fat_sfn.c ****     FSBuf_MarkDirty(p_buf, p_err);                              /* Wr dir entry.                   
1200:rtos/uC-FS/FAT/fs_fat_sfn.c ****     if (*p_err != FS_ERR_NONE) {
1201:rtos/uC-FS/FAT/fs_fat_sfn.c ****         return;
1202:rtos/uC-FS/FAT/fs_fat_sfn.c ****     }
1203:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1204:rtos/uC-FS/FAT/fs_fat_sfn.c ****     p_dir_end_pos->SecNbr = p_dir_pos->SecNbr;
1205:rtos/uC-FS/FAT/fs_fat_sfn.c ****     p_dir_end_pos->SecPos = p_dir_pos->SecPos;
1206:rtos/uC-FS/FAT/fs_fat_sfn.c **** }
1207:rtos/uC-FS/FAT/fs_fat_sfn.c **** #endif
1208:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1209:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1210:rtos/uC-FS/FAT/fs_fat_sfn.c **** /*
1211:rtos/uC-FS/FAT/fs_fat_sfn.c **** ***************************************************************************************************
1212:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                                      FS_FAT_SFN_DirEntryDel()
1213:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
1214:rtos/uC-FS/FAT/fs_fat_sfn.c **** * Description : Delete SFN directory entry.
1215:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
1216:rtos/uC-FS/FAT/fs_fat_sfn.c **** * Argument(s) : p_vol               Pointer to volume.
1217:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
1218:rtos/uC-FS/FAT/fs_fat_sfn.c **** *               p_buf               Pointer to temporary buffer.
1219:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
1220:rtos/uC-FS/FAT/fs_fat_sfn.c **** *               p_dir_start_pos     Pointer to directory position at which entry is located.
1221:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
1222:rtos/uC-FS/FAT/fs_fat_sfn.c **** *               p_dir_end_pos       Pointer to directory position at which entry is located (see No
1223:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
1224:rtos/uC-FS/FAT/fs_fat_sfn.c **** *               p_err               Pointer to variable that will receive the return error code fro
1225:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
1226:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                                       FS_ERR_NONE    Directory entry deleted.
1227:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                                       FS_ERR_DEV     Device access error.
ARM GAS  /tmp/ccpi2Pe2.s 			page 23


1228:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
1229:rtos/uC-FS/FAT/fs_fat_sfn.c **** * Return(s)   : none.
1230:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
1231:rtos/uC-FS/FAT/fs_fat_sfn.c **** * Note(s)     : (1) Parameters for the start & end directory positions are provided for LFN deletio
1232:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                   since several directory entries may specify a single file.  'p_dir_start_pos' &
1233:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                   'p_dir_end_pos' SHOULD specify the exact same position for a SFN.
1234:rtos/uC-FS/FAT/fs_fat_sfn.c **** ***************************************************************************************************
1235:rtos/uC-FS/FAT/fs_fat_sfn.c **** */
1236:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1237:rtos/uC-FS/FAT/fs_fat_sfn.c **** #if (FS_CFG_RD_ONLY_EN == DEF_DISABLED)
1238:rtos/uC-FS/FAT/fs_fat_sfn.c **** static  void  FS_FAT_SFN_DirEntryDel (FS_VOL          *p_vol,
1239:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                       FS_BUF          *p_buf,
1240:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                       FS_FAT_DIR_POS  *p_dir_start_pos,
1241:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                       FS_FAT_DIR_POS  *p_dir_end_pos,
1242:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                       FS_ERR          *p_err)
1243:rtos/uC-FS/FAT/fs_fat_sfn.c **** {
1244:rtos/uC-FS/FAT/fs_fat_sfn.c ****     CPU_INT08U   *p_dir_entry;
1245:rtos/uC-FS/FAT/fs_fat_sfn.c **** #if (FS_FAT_CFG_JOURNAL_EN == DEF_ENABLED)
1246:rtos/uC-FS/FAT/fs_fat_sfn.c ****     FS_FAT_DATA  *p_fat_data;
1247:rtos/uC-FS/FAT/fs_fat_sfn.c **** #endif
1248:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1249:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1250:rtos/uC-FS/FAT/fs_fat_sfn.c ****     (void)p_dir_start_pos;                                      /*lint --e{550} Suppress "Symbol no
1251:rtos/uC-FS/FAT/fs_fat_sfn.c ****     (void)p_vol;
1252:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1253:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1254:rtos/uC-FS/FAT/fs_fat_sfn.c **** #ifdef  FS_FAT_JOURNAL_MODULE_PRESENT
1255:rtos/uC-FS/FAT/fs_fat_sfn.c ****     p_fat_data = (FS_FAT_DATA *)p_vol->DataPtr;
1256:rtos/uC-FS/FAT/fs_fat_sfn.c ****     if (DEF_BIT_IS_SET(p_fat_data->JournalState, FS_FAT_JOURNAL_STATE_REPLAY) == DEF_NO) {
1257:rtos/uC-FS/FAT/fs_fat_sfn.c ****         FS_FAT_JournalEnterEntryUpdate(p_vol,
1258:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                        p_buf,
1259:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                        p_dir_start_pos,
1260:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                        p_dir_end_pos,
1261:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                        p_err);
1262:rtos/uC-FS/FAT/fs_fat_sfn.c ****         if (*p_err != FS_ERR_NONE) {
1263:rtos/uC-FS/FAT/fs_fat_sfn.c ****             return;
1264:rtos/uC-FS/FAT/fs_fat_sfn.c ****         }
1265:rtos/uC-FS/FAT/fs_fat_sfn.c ****     }
1266:rtos/uC-FS/FAT/fs_fat_sfn.c **** #endif
1267:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1268:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                                 /* -------------------- RD DIR SEC 
1269:rtos/uC-FS/FAT/fs_fat_sfn.c ****     FSBuf_Set(p_buf,                                            /* Rd sec.                         
1270:rtos/uC-FS/FAT/fs_fat_sfn.c ****               p_dir_end_pos->SecNbr,
1271:rtos/uC-FS/FAT/fs_fat_sfn.c ****               FS_VOL_SEC_TYPE_DIR,
1272:rtos/uC-FS/FAT/fs_fat_sfn.c ****               DEF_YES,
1273:rtos/uC-FS/FAT/fs_fat_sfn.c ****               p_err);
1274:rtos/uC-FS/FAT/fs_fat_sfn.c ****     if (*p_err != FS_ERR_NONE) {
1275:rtos/uC-FS/FAT/fs_fat_sfn.c ****         return;
1276:rtos/uC-FS/FAT/fs_fat_sfn.c ****     }
1277:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1278:rtos/uC-FS/FAT/fs_fat_sfn.c ****     p_dir_entry = (CPU_INT08U *)p_buf->DataPtr + p_dir_end_pos->SecPos;
1279:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1280:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1281:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                                 /* ------------------ FREE SFN ENTR
1282:rtos/uC-FS/FAT/fs_fat_sfn.c **** #if (FS_CFG_DBG_MEM_CLR_EN == DEF_ENABLED)
1283:rtos/uC-FS/FAT/fs_fat_sfn.c ****     Mem_Clr((void     *)p_dir_entry,
1284:rtos/uC-FS/FAT/fs_fat_sfn.c ****             (CPU_SIZE_T)FS_FAT_SIZE_DIR_ENTRY);
ARM GAS  /tmp/ccpi2Pe2.s 			page 24


1285:rtos/uC-FS/FAT/fs_fat_sfn.c **** #endif
1286:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1287:rtos/uC-FS/FAT/fs_fat_sfn.c ****     p_dir_entry[0] = FS_FAT_DIRENT_NAME_ERASED_AND_FREE;
1288:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1289:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1290:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                                 /* ------------------ UPDATE DIR SE
1291:rtos/uC-FS/FAT/fs_fat_sfn.c ****     FSBuf_MarkDirty(p_buf, p_err);
1292:rtos/uC-FS/FAT/fs_fat_sfn.c **** }
1293:rtos/uC-FS/FAT/fs_fat_sfn.c **** #endif
1294:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1295:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1296:rtos/uC-FS/FAT/fs_fat_sfn.c **** /*
1297:rtos/uC-FS/FAT/fs_fat_sfn.c **** ***************************************************************************************************
1298:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                                      FS_FAT_SFN_DirEntryFind()
1299:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
1300:rtos/uC-FS/FAT/fs_fat_sfn.c **** * Description : Search directory for SFN directory entry.
1301:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
1302:rtos/uC-FS/FAT/fs_fat_sfn.c **** * Argument(s) : p_vol               Pointer to volume.
1303:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
1304:rtos/uC-FS/FAT/fs_fat_sfn.c **** *               p_buf               Pointer to temporary buffer.
1305:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
1306:rtos/uC-FS/FAT/fs_fat_sfn.c **** *               name                Name of the entry.
1307:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
1308:rtos/uC-FS/FAT/fs_fat_sfn.c **** *               p_name_next         Pointer to variable that will receive pointer to character foll
1309:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                                   entry name.
1310:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
1311:rtos/uC-FS/FAT/fs_fat_sfn.c **** *               p_dir_start_pos     Pointer to directory position at which search should start; var
1312:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                                   will receive the directory position at which the entry is locat
1313:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
1314:rtos/uC-FS/FAT/fs_fat_sfn.c **** *               p_dir_end_pos       Pointer to variable that will receive the directory position at
1315:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                                   the entry is located.
1316:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
1317:rtos/uC-FS/FAT/fs_fat_sfn.c **** *               p_err               Pointer to variable that will receive the return error code fro
1318:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
1319:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                                       FS_ERR_NONE                       Directory entry found.
1320:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
1321:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                                                                         --- RETURNED BY FS_FAT_SF
1322:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                                       FS_ERR_DEV                        Device access error.
1323:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                                       FS_ERR_SYS_DIR_ENTRY_NOT_FOUND    Directory entry not found
1324:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
1325:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                                                                         ---- RETURNED BY FS_FAT_S
1326:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                                       FS_ERR_NAME_INVALID               File name is illegal.
1327:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
1328:rtos/uC-FS/FAT/fs_fat_sfn.c **** * Return(s)   : none.
1329:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
1330:rtos/uC-FS/FAT/fs_fat_sfn.c **** * Note(s)     : none.
1331:rtos/uC-FS/FAT/fs_fat_sfn.c **** ***************************************************************************************************
1332:rtos/uC-FS/FAT/fs_fat_sfn.c **** */
1333:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1334:rtos/uC-FS/FAT/fs_fat_sfn.c **** static  void  FS_FAT_SFN_DirEntryFind (FS_VOL           *p_vol,
1335:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                        FS_BUF           *p_buf,
1336:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                        CPU_CHAR         *name,
1337:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                        CPU_CHAR        **p_name_next,
1338:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                        FS_FAT_DIR_POS   *p_dir_start_pos,
1339:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                        FS_FAT_DIR_POS   *p_dir_end_pos,
1340:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                        FS_ERR           *p_err)
1341:rtos/uC-FS/FAT/fs_fat_sfn.c **** {
ARM GAS  /tmp/ccpi2Pe2.s 			page 25


1342:rtos/uC-FS/FAT/fs_fat_sfn.c ****     CPU_BOOLEAN        ext_lower_case;
1343:rtos/uC-FS/FAT/fs_fat_sfn.c ****     CPU_INT32U         name_8_3[3];
1344:rtos/uC-FS/FAT/fs_fat_sfn.c ****     FS_FILE_NAME_LEN   name_len;
1345:rtos/uC-FS/FAT/fs_fat_sfn.c ****     CPU_BOOLEAN        name_lower_case;
1346:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1347:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1348:rtos/uC-FS/FAT/fs_fat_sfn.c ****     p_dir_end_pos->SecNbr = 0u;                                 /* Dflt dir end pos.               
1349:rtos/uC-FS/FAT/fs_fat_sfn.c ****     p_dir_end_pos->SecPos = 0u;
1350:rtos/uC-FS/FAT/fs_fat_sfn.c ****    *p_name_next           = name;
1351:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1352:rtos/uC-FS/FAT/fs_fat_sfn.c ****     FS_FAT_SFN_Chk( name,                                       /* Chk if valid SFN.               
1353:rtos/uC-FS/FAT/fs_fat_sfn.c ****                    &name_len,
1354:rtos/uC-FS/FAT/fs_fat_sfn.c ****                     p_err);
1355:rtos/uC-FS/FAT/fs_fat_sfn.c ****     if (*p_err != FS_ERR_NONE) {
1356:rtos/uC-FS/FAT/fs_fat_sfn.c ****         return;
1357:rtos/uC-FS/FAT/fs_fat_sfn.c ****     }
1358:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1359:rtos/uC-FS/FAT/fs_fat_sfn.c ****     FS_FAT_SFN_Create( name,                                    /* Form SFN entry for comparison.  
1360:rtos/uC-FS/FAT/fs_fat_sfn.c ****                       &name_8_3[0],
1361:rtos/uC-FS/FAT/fs_fat_sfn.c ****                       &name_lower_case,
1362:rtos/uC-FS/FAT/fs_fat_sfn.c ****                       &ext_lower_case,
1363:rtos/uC-FS/FAT/fs_fat_sfn.c ****                        p_err);
1364:rtos/uC-FS/FAT/fs_fat_sfn.c ****     if ((*p_err != FS_ERR_NONE) &&
1365:rtos/uC-FS/FAT/fs_fat_sfn.c ****         (*p_err != FS_ERR_NAME_MIXED_CASE)) {
1366:rtos/uC-FS/FAT/fs_fat_sfn.c ****         return;
1367:rtos/uC-FS/FAT/fs_fat_sfn.c ****     }
1368:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1369:rtos/uC-FS/FAT/fs_fat_sfn.c ****    *p_name_next = name + name_len;
1370:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1371:rtos/uC-FS/FAT/fs_fat_sfn.c ****     FS_FAT_SFN_SFN_Find(p_vol,
1372:rtos/uC-FS/FAT/fs_fat_sfn.c ****                         p_buf,
1373:rtos/uC-FS/FAT/fs_fat_sfn.c ****                         name_8_3,
1374:rtos/uC-FS/FAT/fs_fat_sfn.c ****                         p_dir_start_pos,
1375:rtos/uC-FS/FAT/fs_fat_sfn.c ****                         p_dir_end_pos,
1376:rtos/uC-FS/FAT/fs_fat_sfn.c ****                         p_err);
1377:rtos/uC-FS/FAT/fs_fat_sfn.c **** }
1378:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1379:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1380:rtos/uC-FS/FAT/fs_fat_sfn.c **** /*
1381:rtos/uC-FS/FAT/fs_fat_sfn.c **** ***************************************************************************************************
1382:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                                    FS_FAT_SFN_NextDirEntryGet()
1383:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
1384:rtos/uC-FS/FAT/fs_fat_sfn.c **** * Description : Get next SFN dir entry from dir.
1385:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
1386:rtos/uC-FS/FAT/fs_fat_sfn.c **** * Argument(s) : p_vol               Pointer to volume.
1387:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
1388:rtos/uC-FS/FAT/fs_fat_sfn.c **** *               p_buf               Pointer to temporary buffer.
1389:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
1390:rtos/uC-FS/FAT/fs_fat_sfn.c **** *               name                String that will receive entry name.
1391:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                                       OR
1392:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                                   Pointer to NULL.
1393:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
1394:rtos/uC-FS/FAT/fs_fat_sfn.c **** *               p_dir_start_pos     Pointer to directory position at which search should start; var
1395:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                                   will receive the directory position at which the entry is locat
1396:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
1397:rtos/uC-FS/FAT/fs_fat_sfn.c **** *               p_dir_end_pos       Pointer to variable that will receive the directory position at
1398:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                                   the entry is located.
ARM GAS  /tmp/ccpi2Pe2.s 			page 26


1399:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
1400:rtos/uC-FS/FAT/fs_fat_sfn.c **** *               p_err               Pointer to variable that will receive the return error code fro
1401:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
1402:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                                       FS_ERR_NONE    Directory entry gotten.
1403:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                                       FS_ERR_DEV     Device access error.
1404:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                                       FS_ERR_EOF     End of directory reached.
1405:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
1406:rtos/uC-FS/FAT/fs_fat_sfn.c **** * Return(s)   : none.
1407:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
1408:rtos/uC-FS/FAT/fs_fat_sfn.c **** * Note(s)     : (1) The sector number gotten from the FAT should be valid.  These checks are effect
1409:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                   redundant.
1410:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
1411:rtos/uC-FS/FAT/fs_fat_sfn.c **** *               (2) Windows stores case information for the short file name in the NTRes byte of th
1412:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                   directory entry :
1413:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                   (a) If bit 3 is set, the name characters are lower case.
1414:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                   (b) If bit 4 is set, the extension characters are lower case.
1415:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
1416:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                   Names of entries created by systems that do not appropriate set NTRes bits upon
1417:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                   creation will not be returned in the intended case; however, since all file nam
1418:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                   comparisons are caseless, driver operation is unaffected.
1419:rtos/uC-FS/FAT/fs_fat_sfn.c **** ***************************************************************************************************
1420:rtos/uC-FS/FAT/fs_fat_sfn.c **** */
1421:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1422:rtos/uC-FS/FAT/fs_fat_sfn.c **** static  void  FS_FAT_SFN_NextDirEntryGet (FS_VOL          *p_vol,
1423:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                           FS_BUF          *p_buf,
1424:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                           void            *name,
1425:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                           FS_FAT_DIR_POS  *p_dir_start_pos,
1426:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                           FS_FAT_DIR_POS  *p_dir_end_pos,
1427:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                           FS_ERR          *p_err)
1428:rtos/uC-FS/FAT/fs_fat_sfn.c **** {
1429:rtos/uC-FS/FAT/fs_fat_sfn.c ****     CPU_INT08U       data_08;
1430:rtos/uC-FS/FAT/fs_fat_sfn.c ****     FS_FAT_DIR_POS   dir_cur_pos;
1431:rtos/uC-FS/FAT/fs_fat_sfn.c ****     FS_FAT_SEC_NBR   dir_next_sec;
1432:rtos/uC-FS/FAT/fs_fat_sfn.c ****     CPU_BOOLEAN      dir_sec_valid;
1433:rtos/uC-FS/FAT/fs_fat_sfn.c ****     CPU_INT08U       fat_attrib;
1434:rtos/uC-FS/FAT/fs_fat_sfn.c ****     FS_FAT_DATA     *p_fat_data;
1435:rtos/uC-FS/FAT/fs_fat_sfn.c ****     CPU_INT08U      *p_temp_08;
1436:rtos/uC-FS/FAT/fs_fat_sfn.c ****     CPU_BOOLEAN      ext_lower_case;
1437:rtos/uC-FS/FAT/fs_fat_sfn.c ****     CPU_BOOLEAN      name_lower_case;
1438:rtos/uC-FS/FAT/fs_fat_sfn.c ****     CPU_INT08U       ntres;
1439:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1440:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1441:rtos/uC-FS/FAT/fs_fat_sfn.c ****     p_dir_end_pos->SecNbr =  0u;                                /* Dflt dir end pos.               
1442:rtos/uC-FS/FAT/fs_fat_sfn.c ****     p_dir_end_pos->SecPos =  0u;
1443:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1444:rtos/uC-FS/FAT/fs_fat_sfn.c ****     p_fat_data            = (FS_FAT_DATA *)p_vol->DataPtr;
1445:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1446:rtos/uC-FS/FAT/fs_fat_sfn.c ****     dir_cur_pos.SecNbr    =  p_dir_start_pos->SecNbr;
1447:rtos/uC-FS/FAT/fs_fat_sfn.c ****     dir_cur_pos.SecPos    =  p_dir_start_pos->SecPos;
1448:rtos/uC-FS/FAT/fs_fat_sfn.c ****     dir_sec_valid         =  FS_FAT_IS_VALID_SEC(p_fat_data, dir_cur_pos.SecNbr);
1449:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1450:rtos/uC-FS/FAT/fs_fat_sfn.c ****     while (dir_sec_valid == DEF_YES) {                          /* While sec is valid (see Note #1)
1451:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                                 /* ------------------- RD FIRST DIR
1452:rtos/uC-FS/FAT/fs_fat_sfn.c ****         FSBuf_Set(p_buf,
1453:rtos/uC-FS/FAT/fs_fat_sfn.c ****                   dir_cur_pos.SecNbr,
1454:rtos/uC-FS/FAT/fs_fat_sfn.c ****                   FS_VOL_SEC_TYPE_DIR,
1455:rtos/uC-FS/FAT/fs_fat_sfn.c ****                   DEF_YES,
ARM GAS  /tmp/ccpi2Pe2.s 			page 27


1456:rtos/uC-FS/FAT/fs_fat_sfn.c ****                   p_err);
1457:rtos/uC-FS/FAT/fs_fat_sfn.c ****         if (*p_err != FS_ERR_NONE) {
1458:rtos/uC-FS/FAT/fs_fat_sfn.c ****             return;
1459:rtos/uC-FS/FAT/fs_fat_sfn.c ****         }
1460:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1461:rtos/uC-FS/FAT/fs_fat_sfn.c ****         p_temp_08  = (CPU_INT08U *)p_buf->DataPtr;
1462:rtos/uC-FS/FAT/fs_fat_sfn.c ****         p_temp_08 += dir_cur_pos.SecPos;
1463:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1464:rtos/uC-FS/FAT/fs_fat_sfn.c ****         while (dir_cur_pos.SecPos < p_fat_data->SecSize) {
1465:rtos/uC-FS/FAT/fs_fat_sfn.c ****             data_08 = *p_temp_08;
1466:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1467:rtos/uC-FS/FAT/fs_fat_sfn.c ****             if (data_08 == FS_FAT_DIRENT_NAME_ERASED_AND_FREE) {/* ------------------ DIR ENTRY FRE
1468:rtos/uC-FS/FAT/fs_fat_sfn.c ****                 ;
1469:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1470:rtos/uC-FS/FAT/fs_fat_sfn.c ****             } else if (data_08 == FS_FAT_DIRENT_NAME_FREE) {    /* ------------ ALL SUBSEQUENT ENTR
1471:rtos/uC-FS/FAT/fs_fat_sfn.c ****                 p_dir_end_pos->SecNbr = dir_cur_pos.SecNbr;
1472:rtos/uC-FS/FAT/fs_fat_sfn.c ****                 p_dir_end_pos->SecPos = dir_cur_pos.SecPos;
1473:rtos/uC-FS/FAT/fs_fat_sfn.c ****                *p_err = FS_ERR_EOF;
1474:rtos/uC-FS/FAT/fs_fat_sfn.c ****                 return;
1475:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1476:rtos/uC-FS/FAT/fs_fat_sfn.c ****             } else {                                            /* ---------------- DIR ENTRY NOT F
1477:rtos/uC-FS/FAT/fs_fat_sfn.c ****                 fat_attrib = MEM_VAL_GET_INT08U_LITTLE((void *)(p_temp_08 + FS_FAT_DIRENT_OFF_ATTR)
1478:rtos/uC-FS/FAT/fs_fat_sfn.c ****                 if (DEF_BIT_IS_CLR(fat_attrib, FS_FAT_DIRENT_ATTR_VOLUME_ID) == DEF_YES) {
1479:rtos/uC-FS/FAT/fs_fat_sfn.c ****                     if (name != (void *)0) {
1480:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                                 /* Apply case (see Note #2).       
1481:rtos/uC-FS/FAT/fs_fat_sfn.c ****                         ntres           = MEM_VAL_GET_INT08U_LITTLE((void *)(p_temp_08 + FS_FAT_DIR
1482:rtos/uC-FS/FAT/fs_fat_sfn.c ****                         name_lower_case = DEF_BIT_IS_SET(ntres, FS_FAT_DIRENT_NTRES_NAME_LOWER_CASE
1483:rtos/uC-FS/FAT/fs_fat_sfn.c ****                         ext_lower_case  = DEF_BIT_IS_SET(ntres, FS_FAT_DIRENT_NTRES_EXT_LOWER_CASE)
1484:rtos/uC-FS/FAT/fs_fat_sfn.c ****                         FS_FAT_SFN_Parse((void        *)p_temp_08,
1485:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                          (CPU_CHAR    *)name,
1486:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                          (CPU_BOOLEAN  )name_lower_case,
1487:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                          (CPU_BOOLEAN  )ext_lower_case);
1488:rtos/uC-FS/FAT/fs_fat_sfn.c ****                     }
1489:rtos/uC-FS/FAT/fs_fat_sfn.c ****                     p_dir_start_pos->SecNbr = dir_cur_pos.SecNbr;
1490:rtos/uC-FS/FAT/fs_fat_sfn.c ****                     p_dir_start_pos->SecPos = dir_cur_pos.SecPos;
1491:rtos/uC-FS/FAT/fs_fat_sfn.c ****                     p_dir_end_pos->SecNbr   = dir_cur_pos.SecNbr;
1492:rtos/uC-FS/FAT/fs_fat_sfn.c ****                     p_dir_end_pos->SecPos   = dir_cur_pos.SecPos;
1493:rtos/uC-FS/FAT/fs_fat_sfn.c ****                    *p_err = FS_ERR_NONE;
1494:rtos/uC-FS/FAT/fs_fat_sfn.c ****                     return;
1495:rtos/uC-FS/FAT/fs_fat_sfn.c ****                 }
1496:rtos/uC-FS/FAT/fs_fat_sfn.c ****             }
1497:rtos/uC-FS/FAT/fs_fat_sfn.c ****             p_temp_08          += FS_FAT_SIZE_DIR_ENTRY;
1498:rtos/uC-FS/FAT/fs_fat_sfn.c ****             dir_cur_pos.SecPos += FS_FAT_SIZE_DIR_ENTRY;
1499:rtos/uC-FS/FAT/fs_fat_sfn.c ****         }
1500:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1501:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1502:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1503:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                                 /* ------------------ RD NEXT DIR S
1504:rtos/uC-FS/FAT/fs_fat_sfn.c ****         dir_next_sec = FS_FAT_SecNextGet(p_vol,
1505:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                          p_buf,
1506:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                          dir_cur_pos.SecNbr,
1507:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                          p_err);
1508:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1509:rtos/uC-FS/FAT/fs_fat_sfn.c ****         switch (*p_err) {
1510:rtos/uC-FS/FAT/fs_fat_sfn.c ****             case FS_ERR_NONE:
1511:rtos/uC-FS/FAT/fs_fat_sfn.c ****                  break;
1512:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
ARM GAS  /tmp/ccpi2Pe2.s 			page 28


1513:rtos/uC-FS/FAT/fs_fat_sfn.c ****             case FS_ERR_SYS_CLUS_CHAIN_END:
1514:rtos/uC-FS/FAT/fs_fat_sfn.c ****             case FS_ERR_SYS_CLUS_INVALID:
1515:rtos/uC-FS/FAT/fs_fat_sfn.c ****             case FS_ERR_DIR_FULL:
1516:rtos/uC-FS/FAT/fs_fat_sfn.c ****                  p_dir_end_pos->SecNbr = dir_cur_pos.SecNbr;
1517:rtos/uC-FS/FAT/fs_fat_sfn.c ****                  p_dir_end_pos->SecPos = dir_cur_pos.SecPos;
1518:rtos/uC-FS/FAT/fs_fat_sfn.c ****                 *p_err = FS_ERR_EOF;
1519:rtos/uC-FS/FAT/fs_fat_sfn.c ****                  return;
1520:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1521:rtos/uC-FS/FAT/fs_fat_sfn.c ****             case FS_ERR_DEV:
1522:rtos/uC-FS/FAT/fs_fat_sfn.c ****                  return;
1523:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1524:rtos/uC-FS/FAT/fs_fat_sfn.c ****             default:
1525:rtos/uC-FS/FAT/fs_fat_sfn.c ****                  FS_TRACE_DBG(("FS_FAT_SFN_NextDirEntryGet(): Default case reached: %d.\r\n", *p_er
1526:rtos/uC-FS/FAT/fs_fat_sfn.c ****                  return;
1527:rtos/uC-FS/FAT/fs_fat_sfn.c ****         }
1528:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1529:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                                 /* Chk sec validity (see Note #1). 
1530:rtos/uC-FS/FAT/fs_fat_sfn.c ****         dir_sec_valid      = FS_FAT_IS_VALID_SEC(p_fat_data, dir_next_sec);
1531:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1532:rtos/uC-FS/FAT/fs_fat_sfn.c ****         dir_cur_pos.SecNbr = dir_next_sec;
1533:rtos/uC-FS/FAT/fs_fat_sfn.c ****         dir_cur_pos.SecPos = 0u;
1534:rtos/uC-FS/FAT/fs_fat_sfn.c ****         p_temp_08          = (CPU_INT08U *)p_buf->DataPtr;
1535:rtos/uC-FS/FAT/fs_fat_sfn.c ****     }
1536:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1537:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1538:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                                 /* Invalid sec found (see Note #1).
1539:rtos/uC-FS/FAT/fs_fat_sfn.c ****     FS_TRACE_DBG(("FS_FAT_SFN_NextDirEntryGet(): Invalid sec gotten: %d.\r\n", dir_cur_pos.SecNbr))
1540:rtos/uC-FS/FAT/fs_fat_sfn.c ****    *p_err = FS_ERR_ENTRY_CORRUPT;
1541:rtos/uC-FS/FAT/fs_fat_sfn.c ****     return;
1542:rtos/uC-FS/FAT/fs_fat_sfn.c **** }
1543:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1544:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1545:rtos/uC-FS/FAT/fs_fat_sfn.c **** /*
1546:rtos/uC-FS/FAT/fs_fat_sfn.c **** ***************************************************************************************************
1547:rtos/uC-FS/FAT/fs_fat_sfn.c **** ***************************************************************************************************
1548:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                                           LOCAL FUNCTIONS
1549:rtos/uC-FS/FAT/fs_fat_sfn.c **** ***************************************************************************************************
1550:rtos/uC-FS/FAT/fs_fat_sfn.c **** ***************************************************************************************************
1551:rtos/uC-FS/FAT/fs_fat_sfn.c **** */
1552:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1553:rtos/uC-FS/FAT/fs_fat_sfn.c **** /*
1554:rtos/uC-FS/FAT/fs_fat_sfn.c **** ***************************************************************************************************
1555:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                                         FS_FAT_SFN_Parse()
1556:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
1557:rtos/uC-FS/FAT/fs_fat_sfn.c **** * Description : Read characters of SFN name in SFN entry.
1558:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
1559:rtos/uC-FS/FAT/fs_fat_sfn.c **** * Argument(s) : p_dir_entry         Pointer to directory entry.
1560:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
1561:rtos/uC-FS/FAT/fs_fat_sfn.c **** *               name                String that will receive entry name.
1562:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
1563:rtos/uC-FS/FAT/fs_fat_sfn.c **** *               name_lower_case     Indicates whether name characters will be returned in lower cas
1564:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                                       DEF_YES, name characters will be returned in lower case.
1565:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                                       DEF_NO,  name characters will be returned in upper case.
1566:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
1567:rtos/uC-FS/FAT/fs_fat_sfn.c **** *               ext_lower_case      Indicates whether extension characters will be returned in lowe
1568:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                                       DEF_YES, extension characters will be returned in lower cas
1569:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                                       DEF_NO,  extension characters will be returned in upper cas
ARM GAS  /tmp/ccpi2Pe2.s 			page 29


1570:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
1571:rtos/uC-FS/FAT/fs_fat_sfn.c **** * Return(s)   : none.
1572:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
1573:rtos/uC-FS/FAT/fs_fat_sfn.c **** * Note(s)     : none.
1574:rtos/uC-FS/FAT/fs_fat_sfn.c **** ***************************************************************************************************
1575:rtos/uC-FS/FAT/fs_fat_sfn.c **** */
1576:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1577:rtos/uC-FS/FAT/fs_fat_sfn.c **** static  void  FS_FAT_SFN_Parse (void         *p_dir_entry,
1578:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                 CPU_CHAR     *name,
1579:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                 CPU_BOOLEAN   name_lower_case,
1580:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                 CPU_BOOLEAN   ext_lower_case)
1581:rtos/uC-FS/FAT/fs_fat_sfn.c **** {
  29              		.loc 1 1581 1 view -0
  30              		.cfi_startproc
  31              		@ args = 0, pretend = 0, frame = 0
  32              		@ frame_needed = 0, uses_anonymous_args = 0
  33              		@ link register save eliminated.
  34              		.loc 1 1581 1 is_stmt 0 view .LVU1
  35 0000 F0B4     		push	{r4, r5, r6, r7}
  36              	.LCFI0:
  37              		.cfi_def_cfa_offset 16
  38              		.cfi_offset 4, -16
  39              		.cfi_offset 5, -12
  40              		.cfi_offset 6, -8
  41              		.cfi_offset 7, -4
1582:rtos/uC-FS/FAT/fs_fat_sfn.c ****     FS_FILE_NAME_LEN   ix;
  42              		.loc 1 1582 5 is_stmt 1 view .LVU2
1583:rtos/uC-FS/FAT/fs_fat_sfn.c ****     FS_FILE_NAME_LEN   len;
  43              		.loc 1 1583 5 view .LVU3
1584:rtos/uC-FS/FAT/fs_fat_sfn.c ****     CPU_INT08U        *p_dir_entry_08;
  44              		.loc 1 1584 5 view .LVU4
1585:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1586:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1587:rtos/uC-FS/FAT/fs_fat_sfn.c ****     p_dir_entry_08 = (CPU_INT08U *)p_dir_entry;
  45              		.loc 1 1587 5 view .LVU5
  46              	.LVL1:
1588:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1589:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                                 /* ---------------------- RD NAME -
1590:rtos/uC-FS/FAT/fs_fat_sfn.c ****     for (len = FS_FAT_SFN_NAME_MAX_NBR_CHAR; len > 0u; len--) { /* Calc name len.                  
  47              		.loc 1 1590 5 view .LVU6
  48              		.loc 1 1590 14 is_stmt 0 view .LVU7
  49 0002 0824     		movs	r4, #8
  50              		.loc 1 1590 5 view .LVU8
  51 0004 01E0     		b	.L2
  52              	.LVL2:
  53              	.L20:
  54              		.loc 1 1590 56 is_stmt 1 discriminator 2 view .LVU9
  55              		.loc 1 1590 59 is_stmt 0 discriminator 2 view .LVU10
  56 0006 013C     		subs	r4, r4, #1
  57              	.LVL3:
  58              		.loc 1 1590 59 discriminator 2 view .LVU11
  59 0008 A4B2     		uxth	r4, r4
  60              	.LVL4:
  61              	.L2:
  62              		.loc 1 1590 46 is_stmt 1 discriminator 1 view .LVU12
  63              		.loc 1 1590 5 is_stmt 0 discriminator 1 view .LVU13
  64 000a 24B1     		cbz	r4, .L3
ARM GAS  /tmp/ccpi2Pe2.s 			page 30


1591:rtos/uC-FS/FAT/fs_fat_sfn.c ****         if (p_dir_entry_08[len - 1u] != (CPU_INT08U)ASCII_CHAR_SPACE) {
  65              		.loc 1 1591 9 is_stmt 1 view .LVU14
  66              		.loc 1 1591 27 is_stmt 0 view .LVU15
  67 000c 0519     		adds	r5, r0, r4
  68 000e 15F8015C 		ldrb	r5, [r5, #-1]	@ zero_extendqisi2
  69              		.loc 1 1591 12 view .LVU16
  70 0012 202D     		cmp	r5, #32
  71 0014 F7D0     		beq	.L20
  72              	.L3:
1592:rtos/uC-FS/FAT/fs_fat_sfn.c ****             break;
1593:rtos/uC-FS/FAT/fs_fat_sfn.c ****         }
1594:rtos/uC-FS/FAT/fs_fat_sfn.c ****     }
1595:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1596:rtos/uC-FS/FAT/fs_fat_sfn.c ****     if (len != 0u) {                                            /* Copy name.                      
  73              		.loc 1 1596 5 is_stmt 1 view .LVU17
  74              		.loc 1 1596 8 is_stmt 0 view .LVU18
  75 0016 D4B9     		cbnz	r4, .L18
  76              	.L6:
1597:rtos/uC-FS/FAT/fs_fat_sfn.c ****         for (ix = 0u; ix < len; ix++) {
1598:rtos/uC-FS/FAT/fs_fat_sfn.c ****            *name = (name_lower_case == DEF_YES) ? ASCII_TO_LOWER((CPU_CHAR)p_dir_entry_08[ix])
1599:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                 :                (CPU_CHAR)p_dir_entry_08[ix];
1600:rtos/uC-FS/FAT/fs_fat_sfn.c ****             name++;
1601:rtos/uC-FS/FAT/fs_fat_sfn.c ****         }
1602:rtos/uC-FS/FAT/fs_fat_sfn.c ****     }
1603:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1604:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1605:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1606:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                                 /* ---------------------- RD EXT --
1607:rtos/uC-FS/FAT/fs_fat_sfn.c ****     for (len = FS_FAT_SFN_EXT_MAX_NBR_CHAR; len > 0u; len--) {  /* Calc ext len.                   
  77              		.loc 1 1607 5 is_stmt 1 view .LVU19
  78              	.LVL5:
  79              		.loc 1 1607 14 is_stmt 0 view .LVU20
  80 0018 0324     		movs	r4, #3
  81              	.LVL6:
  82              	.L10:
  83              		.loc 1 1607 45 is_stmt 1 discriminator 1 view .LVU21
  84              		.loc 1 1607 5 is_stmt 0 discriminator 1 view .LVU22
  85 001a D4B1     		cbz	r4, .L11
1608:rtos/uC-FS/FAT/fs_fat_sfn.c ****         if (p_dir_entry_08[len + FS_FAT_SFN_NAME_MAX_NBR_CHAR - 1u] != (CPU_INT08U)ASCII_CHAR_SPACE
  86              		.loc 1 1608 9 is_stmt 1 view .LVU23
  87              		.loc 1 1608 27 is_stmt 0 view .LVU24
  88 001c 0219     		adds	r2, r0, r4
  89 001e D279     		ldrb	r2, [r2, #7]	@ zero_extendqisi2
  90              		.loc 1 1608 12 view .LVU25
  91 0020 202A     		cmp	r2, #32
  92 0022 16D1     		bne	.L11
1607:rtos/uC-FS/FAT/fs_fat_sfn.c ****         if (p_dir_entry_08[len + FS_FAT_SFN_NAME_MAX_NBR_CHAR - 1u] != (CPU_INT08U)ASCII_CHAR_SPACE
  93              		.loc 1 1607 55 is_stmt 1 discriminator 2 view .LVU26
1607:rtos/uC-FS/FAT/fs_fat_sfn.c ****         if (p_dir_entry_08[len + FS_FAT_SFN_NAME_MAX_NBR_CHAR - 1u] != (CPU_INT08U)ASCII_CHAR_SPACE
  94              		.loc 1 1607 58 is_stmt 0 discriminator 2 view .LVU27
  95 0024 013C     		subs	r4, r4, #1
  96              	.LVL7:
1607:rtos/uC-FS/FAT/fs_fat_sfn.c ****         if (p_dir_entry_08[len + FS_FAT_SFN_NAME_MAX_NBR_CHAR - 1u] != (CPU_INT08U)ASCII_CHAR_SPACE
  97              		.loc 1 1607 58 discriminator 2 view .LVU28
  98 0026 A4B2     		uxth	r4, r4
  99              	.LVL8:
1607:rtos/uC-FS/FAT/fs_fat_sfn.c ****         if (p_dir_entry_08[len + FS_FAT_SFN_NAME_MAX_NBR_CHAR - 1u] != (CPU_INT08U)ASCII_CHAR_SPACE
ARM GAS  /tmp/ccpi2Pe2.s 			page 31


 100              		.loc 1 1607 58 discriminator 2 view .LVU29
 101 0028 F7E7     		b	.L10
 102              	.LVL9:
 103              	.L7:
1598:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                 :                (CPU_CHAR)p_dir_entry_08[ix];
 104              		.loc 1 1598 18 discriminator 2 view .LVU30
 105 002a 465D     		ldrb	r6, [r0, r5]	@ zero_extendqisi2
 106              	.L8:
1598:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                 :                (CPU_CHAR)p_dir_entry_08[ix];
 107              		.loc 1 1598 18 discriminator 8 view .LVU31
 108 002c 01F8016B 		strb	r6, [r1], #1
 109              	.LVL10:
1600:rtos/uC-FS/FAT/fs_fat_sfn.c ****         }
 110              		.loc 1 1600 13 is_stmt 1 discriminator 8 view .LVU32
1597:rtos/uC-FS/FAT/fs_fat_sfn.c ****            *name = (name_lower_case == DEF_YES) ? ASCII_TO_LOWER((CPU_CHAR)p_dir_entry_08[ix])
 111              		.loc 1 1597 33 discriminator 8 view .LVU33
1597:rtos/uC-FS/FAT/fs_fat_sfn.c ****            *name = (name_lower_case == DEF_YES) ? ASCII_TO_LOWER((CPU_CHAR)p_dir_entry_08[ix])
 112              		.loc 1 1597 35 is_stmt 0 discriminator 8 view .LVU34
 113 0030 0135     		adds	r5, r5, #1
 114              	.LVL11:
1597:rtos/uC-FS/FAT/fs_fat_sfn.c ****            *name = (name_lower_case == DEF_YES) ? ASCII_TO_LOWER((CPU_CHAR)p_dir_entry_08[ix])
 115              		.loc 1 1597 35 discriminator 8 view .LVU35
 116 0032 ADB2     		uxth	r5, r5
 117              	.LVL12:
 118              	.L5:
1597:rtos/uC-FS/FAT/fs_fat_sfn.c ****            *name = (name_lower_case == DEF_YES) ? ASCII_TO_LOWER((CPU_CHAR)p_dir_entry_08[ix])
 119              		.loc 1 1597 23 is_stmt 1 discriminator 2 view .LVU36
1597:rtos/uC-FS/FAT/fs_fat_sfn.c ****            *name = (name_lower_case == DEF_YES) ? ASCII_TO_LOWER((CPU_CHAR)p_dir_entry_08[ix])
 120              		.loc 1 1597 9 is_stmt 0 discriminator 2 view .LVU37
 121 0034 A542     		cmp	r5, r4
 122 0036 EFD2     		bcs	.L6
1598:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                 :                (CPU_CHAR)p_dir_entry_08[ix];
 123              		.loc 1 1598 12 is_stmt 1 view .LVU38
1598:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                 :                (CPU_CHAR)p_dir_entry_08[ix];
 124              		.loc 1 1598 18 is_stmt 0 view .LVU39
 125 0038 012A     		cmp	r2, #1
 126 003a F6D1     		bne	.L7
1598:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                 :                (CPU_CHAR)p_dir_entry_08[ix];
 127              		.loc 1 1598 51 discriminator 1 view .LVU40
 128 003c 465D     		ldrb	r6, [r0, r5]	@ zero_extendqisi2
 129 003e A6F14107 		sub	r7, r6, #65
 130 0042 FFB2     		uxtb	r7, r7
1598:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                 :                (CPU_CHAR)p_dir_entry_08[ix];
 131              		.loc 1 1598 18 discriminator 1 view .LVU41
 132 0044 192F     		cmp	r7, #25
 133 0046 F1D8     		bhi	.L8
1598:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                 :                (CPU_CHAR)p_dir_entry_08[ix];
 134              		.loc 1 1598 18 discriminator 3 view .LVU42
 135 0048 2036     		adds	r6, r6, #32
 136 004a F6B2     		uxtb	r6, r6
 137 004c EEE7     		b	.L8
 138              	.LVL13:
 139              	.L18:
1597:rtos/uC-FS/FAT/fs_fat_sfn.c ****            *name = (name_lower_case == DEF_YES) ? ASCII_TO_LOWER((CPU_CHAR)p_dir_entry_08[ix])
 140              		.loc 1 1597 17 view .LVU43
 141 004e 0025     		movs	r5, #0
 142 0050 F0E7     		b	.L5
ARM GAS  /tmp/ccpi2Pe2.s 			page 32


 143              	.LVL14:
 144              	.L11:
1609:rtos/uC-FS/FAT/fs_fat_sfn.c ****             break;
1610:rtos/uC-FS/FAT/fs_fat_sfn.c ****         }
1611:rtos/uC-FS/FAT/fs_fat_sfn.c ****     }
1612:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1613:rtos/uC-FS/FAT/fs_fat_sfn.c ****     if (len != 0u) {                                            /* Copy ext.                       
 145              		.loc 1 1613 5 is_stmt 1 view .LVU44
 146              		.loc 1 1613 8 is_stmt 0 view .LVU45
 147 0052 CCB1     		cbz	r4, .L13
1614:rtos/uC-FS/FAT/fs_fat_sfn.c ****        *name = (CPU_CHAR)ASCII_CHAR_FULL_STOP;
 148              		.loc 1 1614 8 is_stmt 1 view .LVU46
 149              		.loc 1 1614 14 is_stmt 0 view .LVU47
 150 0054 2E22     		movs	r2, #46
 151 0056 01F8012B 		strb	r2, [r1], #1
 152              	.LVL15:
1615:rtos/uC-FS/FAT/fs_fat_sfn.c ****         name++;
 153              		.loc 1 1615 9 is_stmt 1 view .LVU48
1616:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1617:rtos/uC-FS/FAT/fs_fat_sfn.c ****         for (ix = 0u; ix < len; ix++) {
 154              		.loc 1 1617 9 view .LVU49
 155              		.loc 1 1617 17 is_stmt 0 view .LVU50
 156 005a 0022     		movs	r2, #0
 157              		.loc 1 1617 9 view .LVU51
 158 005c 06E0     		b	.L14
 159              	.LVL16:
 160              	.L15:
1618:rtos/uC-FS/FAT/fs_fat_sfn.c ****            *name = (ext_lower_case == DEF_YES) ? ASCII_TO_LOWER((CPU_CHAR)p_dir_entry_08[ix + FS_FA
1619:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                :                (CPU_CHAR)p_dir_entry_08[ix + FS_FA
 161              		.loc 1 1619 89 discriminator 2 view .LVU52
 162 005e 02F10805 		add	r5, r2, #8
1618:rtos/uC-FS/FAT/fs_fat_sfn.c ****            *name = (ext_lower_case == DEF_YES) ? ASCII_TO_LOWER((CPU_CHAR)p_dir_entry_08[ix + FS_FA
 163              		.loc 1 1618 18 discriminator 2 view .LVU53
 164 0062 455D     		ldrb	r5, [r0, r5]	@ zero_extendqisi2
 165              	.L16:
1618:rtos/uC-FS/FAT/fs_fat_sfn.c ****            *name = (ext_lower_case == DEF_YES) ? ASCII_TO_LOWER((CPU_CHAR)p_dir_entry_08[ix + FS_FA
 166              		.loc 1 1618 18 discriminator 8 view .LVU54
 167 0064 01F8015B 		strb	r5, [r1], #1
 168              	.LVL17:
1620:rtos/uC-FS/FAT/fs_fat_sfn.c ****             name++;
 169              		.loc 1 1620 13 is_stmt 1 discriminator 8 view .LVU55
1617:rtos/uC-FS/FAT/fs_fat_sfn.c ****            *name = (ext_lower_case == DEF_YES) ? ASCII_TO_LOWER((CPU_CHAR)p_dir_entry_08[ix + FS_FA
 170              		.loc 1 1617 33 discriminator 8 view .LVU56
1617:rtos/uC-FS/FAT/fs_fat_sfn.c ****            *name = (ext_lower_case == DEF_YES) ? ASCII_TO_LOWER((CPU_CHAR)p_dir_entry_08[ix + FS_FA
 171              		.loc 1 1617 35 is_stmt 0 discriminator 8 view .LVU57
 172 0068 0132     		adds	r2, r2, #1
 173              	.LVL18:
1617:rtos/uC-FS/FAT/fs_fat_sfn.c ****            *name = (ext_lower_case == DEF_YES) ? ASCII_TO_LOWER((CPU_CHAR)p_dir_entry_08[ix + FS_FA
 174              		.loc 1 1617 35 discriminator 8 view .LVU58
 175 006a 92B2     		uxth	r2, r2
 176              	.LVL19:
 177              	.L14:
1617:rtos/uC-FS/FAT/fs_fat_sfn.c ****            *name = (ext_lower_case == DEF_YES) ? ASCII_TO_LOWER((CPU_CHAR)p_dir_entry_08[ix + FS_FA
 178              		.loc 1 1617 23 is_stmt 1 discriminator 2 view .LVU59
1617:rtos/uC-FS/FAT/fs_fat_sfn.c ****            *name = (ext_lower_case == DEF_YES) ? ASCII_TO_LOWER((CPU_CHAR)p_dir_entry_08[ix + FS_FA
 179              		.loc 1 1617 9 is_stmt 0 discriminator 2 view .LVU60
 180 006c A242     		cmp	r2, r4
ARM GAS  /tmp/ccpi2Pe2.s 			page 33


 181 006e 0BD2     		bcs	.L13
1618:rtos/uC-FS/FAT/fs_fat_sfn.c ****            *name = (ext_lower_case == DEF_YES) ? ASCII_TO_LOWER((CPU_CHAR)p_dir_entry_08[ix + FS_FA
 182              		.loc 1 1618 12 is_stmt 1 view .LVU61
1618:rtos/uC-FS/FAT/fs_fat_sfn.c ****            *name = (ext_lower_case == DEF_YES) ? ASCII_TO_LOWER((CPU_CHAR)p_dir_entry_08[ix + FS_FA
 183              		.loc 1 1618 18 is_stmt 0 view .LVU62
 184 0070 012B     		cmp	r3, #1
 185 0072 F4D1     		bne	.L15
1618:rtos/uC-FS/FAT/fs_fat_sfn.c ****            *name = (ext_lower_case == DEF_YES) ? ASCII_TO_LOWER((CPU_CHAR)p_dir_entry_08[ix + FS_FA
 186              		.loc 1 1618 50 discriminator 1 view .LVU63
 187 0074 8518     		adds	r5, r0, r2
 188 0076 2D7A     		ldrb	r5, [r5, #8]	@ zero_extendqisi2
 189 0078 A5F14106 		sub	r6, r5, #65
 190 007c F6B2     		uxtb	r6, r6
1618:rtos/uC-FS/FAT/fs_fat_sfn.c ****            *name = (ext_lower_case == DEF_YES) ? ASCII_TO_LOWER((CPU_CHAR)p_dir_entry_08[ix + FS_FA
 191              		.loc 1 1618 18 discriminator 1 view .LVU64
 192 007e 192E     		cmp	r6, #25
 193 0080 F0D8     		bhi	.L16
1618:rtos/uC-FS/FAT/fs_fat_sfn.c ****            *name = (ext_lower_case == DEF_YES) ? ASCII_TO_LOWER((CPU_CHAR)p_dir_entry_08[ix + FS_FA
 194              		.loc 1 1618 18 discriminator 3 view .LVU65
 195 0082 2035     		adds	r5, r5, #32
 196 0084 EDB2     		uxtb	r5, r5
 197 0086 EDE7     		b	.L16
 198              	.LVL20:
 199              	.L13:
1621:rtos/uC-FS/FAT/fs_fat_sfn.c ****         }
1622:rtos/uC-FS/FAT/fs_fat_sfn.c ****     }
1623:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1624:rtos/uC-FS/FAT/fs_fat_sfn.c ****    *name = (CPU_CHAR)ASCII_CHAR_NULL;                           /* End NULL char.                  
 200              		.loc 1 1624 4 is_stmt 1 view .LVU66
 201              		.loc 1 1624 10 is_stmt 0 view .LVU67
 202 0088 0023     		movs	r3, #0
 203              	.LVL21:
 204              		.loc 1 1624 10 view .LVU68
 205 008a 0B70     		strb	r3, [r1]
1625:rtos/uC-FS/FAT/fs_fat_sfn.c **** }
 206              		.loc 1 1625 1 view .LVU69
 207 008c F0BC     		pop	{r4, r5, r6, r7}
 208              	.LCFI1:
 209              		.cfi_restore 7
 210              		.cfi_restore 6
 211              		.cfi_restore 5
 212              		.cfi_restore 4
 213              		.cfi_def_cfa_offset 0
 214              	.LVL22:
 215              		.loc 1 1625 1 view .LVU70
 216 008e 7047     		bx	lr
 217              		.cfi_endproc
 218              	.LFE11:
 220              		.section	.text.FS_FAT_SFN_DirEntryFindInSec,"ax",%progbits
 221              		.align	1
 222              		.syntax unified
 223              		.thumb
 224              		.thumb_func
 225              		.fpu fpv4-sp-d16
 227              	FS_FAT_SFN_DirEntryFindInSec:
 228              	.LVL23:
 229              	.LFB12:
ARM GAS  /tmp/ccpi2Pe2.s 			page 34


1626:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1627:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1628:rtos/uC-FS/FAT/fs_fat_sfn.c **** /*
1629:rtos/uC-FS/FAT/fs_fat_sfn.c **** ***************************************************************************************************
1630:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                                   FS_FAT_SFN_DirEntryFindInSec()
1631:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
1632:rtos/uC-FS/FAT/fs_fat_sfn.c **** * Description : Search directory sector to find SFN directory entry.
1633:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
1634:rtos/uC-FS/FAT/fs_fat_sfn.c **** * Argument(s) : p_temp      Pointer to buffer of directory sector.
1635:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
1636:rtos/uC-FS/FAT/fs_fat_sfn.c **** *               sec_size    Sector size, in octets.
1637:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
1638:rtos/uC-FS/FAT/fs_fat_sfn.c **** *               name_8_3    Entry SFN.
1639:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
1640:rtos/uC-FS/FAT/fs_fat_sfn.c **** *               p_err       Pointer to variable that will receive the return error code from this f
1641:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
1642:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                               FS_ERR_NONE                           Directory entry found.
1643:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                               FS_ERR_SYS_DIR_ENTRY_NOT_FOUND        Directory entry NOT found & a
1644:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                                                                         subsequent entries are fr
1645:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                                                                         (so search SHOULD end).
1646:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                               FS_ERR_SYS_DIR_ENTRY_NOT_FOUND_YET    Directory entry NOT found, bu
1647:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                                                                         non-free subsequent entri
1648:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                                                                         may exist).
1649:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
1650:rtos/uC-FS/FAT/fs_fat_sfn.c **** * Return(s)   : Location of directory entry within buffer.
1651:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
1652:rtos/uC-FS/FAT/fs_fat_sfn.c **** * Note(s)     : (1) (a) The 'p_temp' pointer is 4-byte aligned since all sectors are 4-byte aligned
1653:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
1654:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                   (b) All pointers to directory entries are 4-byte aligned since all directory en
1655:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                       lie at a offset multiple of 32 (the size of a directory entry) from the beg
1656:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                       of a sector.
1657:rtos/uC-FS/FAT/fs_fat_sfn.c **** ***************************************************************************************************
1658:rtos/uC-FS/FAT/fs_fat_sfn.c **** */
1659:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1660:rtos/uC-FS/FAT/fs_fat_sfn.c **** static  FS_SEC_SIZE  FS_FAT_SFN_DirEntryFindInSec (void         *p_temp,
1661:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                    FS_SEC_SIZE   sec_size,
1662:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                    CPU_INT32U    name_8_3[],
1663:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                    FS_ERR       *p_err)
1664:rtos/uC-FS/FAT/fs_fat_sfn.c **** {
 230              		.loc 1 1664 1 is_stmt 1 view -0
 231              		.cfi_startproc
 232              		@ args = 0, pretend = 0, frame = 0
 233              		@ frame_needed = 0, uses_anonymous_args = 0
 234              		@ link register save eliminated.
 235              		.loc 1 1664 1 is_stmt 0 view .LVU72
 236 0000 F0B4     		push	{r4, r5, r6, r7}
 237              	.LCFI2:
 238              		.cfi_def_cfa_offset 16
 239              		.cfi_offset 4, -16
 240              		.cfi_offset 5, -12
 241              		.cfi_offset 6, -8
 242              		.cfi_offset 7, -4
 243 0002 0446     		mov	r4, r0
1665:rtos/uC-FS/FAT/fs_fat_sfn.c ****     CPU_INT08U    data_08;
 244              		.loc 1 1665 5 is_stmt 1 view .LVU73
1666:rtos/uC-FS/FAT/fs_fat_sfn.c ****     CPU_INT32U    data_32;
 245              		.loc 1 1666 5 view .LVU74
ARM GAS  /tmp/ccpi2Pe2.s 			page 35


1667:rtos/uC-FS/FAT/fs_fat_sfn.c ****     CPU_INT32U    name0;
 246              		.loc 1 1667 5 view .LVU75
1668:rtos/uC-FS/FAT/fs_fat_sfn.c ****     CPU_INT32U    name1;
 247              		.loc 1 1668 5 view .LVU76
1669:rtos/uC-FS/FAT/fs_fat_sfn.c ****     CPU_INT32U    name2;
 248              		.loc 1 1669 5 view .LVU77
1670:rtos/uC-FS/FAT/fs_fat_sfn.c ****     FS_SEC_SIZE   sec_pos;
 249              		.loc 1 1670 5 view .LVU78
1671:rtos/uC-FS/FAT/fs_fat_sfn.c ****     CPU_INT32U   *p_buf_32;
 250              		.loc 1 1671 5 view .LVU79
1672:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1673:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1674:rtos/uC-FS/FAT/fs_fat_sfn.c ****     name0    = name_8_3[0];
 251              		.loc 1 1674 5 view .LVU80
 252              		.loc 1 1674 14 is_stmt 0 view .LVU81
 253 0004 1668     		ldr	r6, [r2]
 254              	.LVL24:
1675:rtos/uC-FS/FAT/fs_fat_sfn.c ****     name1    = name_8_3[1];
 255              		.loc 1 1675 5 is_stmt 1 view .LVU82
 256              		.loc 1 1675 14 is_stmt 0 view .LVU83
 257 0006 5768     		ldr	r7, [r2, #4]
 258              	.LVL25:
1676:rtos/uC-FS/FAT/fs_fat_sfn.c ****     name2    = name_8_3[2];
 259              		.loc 1 1676 5 is_stmt 1 view .LVU84
 260              		.loc 1 1676 14 is_stmt 0 view .LVU85
 261 0008 D2F808C0 		ldr	ip, [r2, #8]
 262              	.LVL26:
1677:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1678:rtos/uC-FS/FAT/fs_fat_sfn.c ****     p_buf_32 = (CPU_INT32U *)p_temp;                             /* See Note #1.                   
 263              		.loc 1 1678 5 is_stmt 1 view .LVU86
1679:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1680:rtos/uC-FS/FAT/fs_fat_sfn.c ****     sec_pos  = 0u;
 264              		.loc 1 1680 5 view .LVU87
1681:rtos/uC-FS/FAT/fs_fat_sfn.c ****     while (sec_pos < sec_size) {
 265              		.loc 1 1681 5 view .LVU88
1680:rtos/uC-FS/FAT/fs_fat_sfn.c ****     while (sec_pos < sec_size) {
 266              		.loc 1 1680 14 is_stmt 0 view .LVU89
 267 000c 0020     		movs	r0, #0
 268              	.LVL27:
 269              		.loc 1 1681 11 view .LVU90
 270 000e 06E0     		b	.L22
 271              	.LVL28:
 272              	.L29:
1682:rtos/uC-FS/FAT/fs_fat_sfn.c ****         data_32 = *p_buf_32;
1683:rtos/uC-FS/FAT/fs_fat_sfn.c ****        #if (CPU_CFG_ENDIAN_TYPE == CPU_ENDIAN_TYPE_LITTLE)
1684:rtos/uC-FS/FAT/fs_fat_sfn.c ****         data_08 = (CPU_INT08U)(data_32 >> (0u * DEF_INT_08_NBR_BITS)) & DEF_INT_08_MASK;
1685:rtos/uC-FS/FAT/fs_fat_sfn.c ****        #else
1686:rtos/uC-FS/FAT/fs_fat_sfn.c ****         data_08 = (CPU_INT08U)(data_32 >> (3u * DEF_INT_08_NBR_BITS)) & DEF_INT_08_MASK;
1687:rtos/uC-FS/FAT/fs_fat_sfn.c ****        #endif
1688:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1689:rtos/uC-FS/FAT/fs_fat_sfn.c ****         if (data_08 == FS_FAT_DIRENT_NAME_FREE) {               /* If dir entry free & all subseque
1690:rtos/uC-FS/FAT/fs_fat_sfn.c ****            *p_err = FS_ERR_SYS_DIR_ENTRY_NOT_FOUND;             /* ... rtn err.                    
 273              		.loc 1 1690 12 is_stmt 1 view .LVU91
 274              		.loc 1 1690 19 is_stmt 0 view .LVU92
 275 0010 40F23352 		movw	r2, #1331
 276              	.LVL29:
 277              		.loc 1 1690 19 view .LVU93
ARM GAS  /tmp/ccpi2Pe2.s 			page 36


 278 0014 1A80     		strh	r2, [r3]	@ movhi
 279              	.LVL30:
1691:rtos/uC-FS/FAT/fs_fat_sfn.c ****             return (0u);
 280              		.loc 1 1691 13 is_stmt 1 view .LVU94
 281              		.loc 1 1691 20 is_stmt 0 view .LVU95
 282 0016 0020     		movs	r0, #0
 283              	.LVL31:
 284              		.loc 1 1691 20 view .LVU96
 285 0018 1AE0     		b	.L21
 286              	.LVL32:
 287              	.L25:
1692:rtos/uC-FS/FAT/fs_fat_sfn.c ****         }
1693:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1694:rtos/uC-FS/FAT/fs_fat_sfn.c ****         if (data_08 != FS_FAT_DIRENT_NAME_ERASED_AND_FREE) {    /* If dir entry NOT free.          
1695:rtos/uC-FS/FAT/fs_fat_sfn.c ****             if (data_32 == name0) {
1696:rtos/uC-FS/FAT/fs_fat_sfn.c ****                 data_32 = *(p_buf_32 + 1);
1697:rtos/uC-FS/FAT/fs_fat_sfn.c ****                 if (data_32 == name1) {
1698:rtos/uC-FS/FAT/fs_fat_sfn.c ****                     data_32  = *(p_buf_32 + 2);
1699:rtos/uC-FS/FAT/fs_fat_sfn.c ****                    #if (CPU_CFG_ENDIAN_TYPE == CPU_ENDIAN_TYPE_LITTLE)
1700:rtos/uC-FS/FAT/fs_fat_sfn.c ****                     data_32 &= 0x00FFFFFFuL;
1701:rtos/uC-FS/FAT/fs_fat_sfn.c ****                    #else
1702:rtos/uC-FS/FAT/fs_fat_sfn.c ****                     data_32 &= 0xFFFFFF00uL;
1703:rtos/uC-FS/FAT/fs_fat_sfn.c ****                    #endif
1704:rtos/uC-FS/FAT/fs_fat_sfn.c ****                     if (data_32 == name2) {                     /* Match found.                    
1705:rtos/uC-FS/FAT/fs_fat_sfn.c ****                        *p_err = FS_ERR_NONE;
1706:rtos/uC-FS/FAT/fs_fat_sfn.c ****                         return (sec_pos);
1707:rtos/uC-FS/FAT/fs_fat_sfn.c ****                     }
1708:rtos/uC-FS/FAT/fs_fat_sfn.c ****                 }
1709:rtos/uC-FS/FAT/fs_fat_sfn.c ****             }
1710:rtos/uC-FS/FAT/fs_fat_sfn.c ****         }
1711:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1712:rtos/uC-FS/FAT/fs_fat_sfn.c ****         p_buf_32 += FS_FAT_SIZE_DIR_ENTRY / 4u;
 288              		.loc 1 1712 9 is_stmt 1 view .LVU97
 289              		.loc 1 1712 18 is_stmt 0 view .LVU98
 290 001a 2034     		adds	r4, r4, #32
 291              	.LVL33:
1713:rtos/uC-FS/FAT/fs_fat_sfn.c ****         sec_pos  += FS_FAT_SIZE_DIR_ENTRY;
 292              		.loc 1 1713 9 is_stmt 1 view .LVU99
 293              		.loc 1 1713 18 is_stmt 0 view .LVU100
 294 001c 2030     		adds	r0, r0, #32
 295              	.LVL34:
 296              	.L22:
1681:rtos/uC-FS/FAT/fs_fat_sfn.c ****         data_32 = *p_buf_32;
 297              		.loc 1 1681 11 is_stmt 1 view .LVU101
 298 001e 8842     		cmp	r0, r1
 299 0020 12D2     		bcs	.L28
1682:rtos/uC-FS/FAT/fs_fat_sfn.c ****        #if (CPU_CFG_ENDIAN_TYPE == CPU_ENDIAN_TYPE_LITTLE)
 300              		.loc 1 1682 9 view .LVU102
1682:rtos/uC-FS/FAT/fs_fat_sfn.c ****        #if (CPU_CFG_ENDIAN_TYPE == CPU_ENDIAN_TYPE_LITTLE)
 301              		.loc 1 1682 17 is_stmt 0 view .LVU103
 302 0022 2268     		ldr	r2, [r4]
 303              	.LVL35:
1684:rtos/uC-FS/FAT/fs_fat_sfn.c ****        #else
 304              		.loc 1 1684 9 is_stmt 1 view .LVU104
1689:rtos/uC-FS/FAT/fs_fat_sfn.c ****            *p_err = FS_ERR_SYS_DIR_ENTRY_NOT_FOUND;             /* ... rtn err.                    
 305              		.loc 1 1689 9 view .LVU105
1689:rtos/uC-FS/FAT/fs_fat_sfn.c ****            *p_err = FS_ERR_SYS_DIR_ENTRY_NOT_FOUND;             /* ... rtn err.                    
ARM GAS  /tmp/ccpi2Pe2.s 			page 37


 306              		.loc 1 1689 12 is_stmt 0 view .LVU106
 307 0024 12F0FF05 		ands	r5, r2, #255
 308 0028 F2D0     		beq	.L29
1694:rtos/uC-FS/FAT/fs_fat_sfn.c ****             if (data_32 == name0) {
 309              		.loc 1 1694 9 is_stmt 1 view .LVU107
1694:rtos/uC-FS/FAT/fs_fat_sfn.c ****             if (data_32 == name0) {
 310              		.loc 1 1694 12 is_stmt 0 view .LVU108
 311 002a E52D     		cmp	r5, #229
 312 002c F5D0     		beq	.L25
1695:rtos/uC-FS/FAT/fs_fat_sfn.c ****                 data_32 = *(p_buf_32 + 1);
 313              		.loc 1 1695 13 is_stmt 1 view .LVU109
1695:rtos/uC-FS/FAT/fs_fat_sfn.c ****                 data_32 = *(p_buf_32 + 1);
 314              		.loc 1 1695 16 is_stmt 0 view .LVU110
 315 002e 9642     		cmp	r6, r2
 316 0030 F3D1     		bne	.L25
1696:rtos/uC-FS/FAT/fs_fat_sfn.c ****                 if (data_32 == name1) {
 317              		.loc 1 1696 17 is_stmt 1 view .LVU111
1696:rtos/uC-FS/FAT/fs_fat_sfn.c ****                 if (data_32 == name1) {
 318              		.loc 1 1696 25 is_stmt 0 view .LVU112
 319 0032 6268     		ldr	r2, [r4, #4]
 320              	.LVL36:
1697:rtos/uC-FS/FAT/fs_fat_sfn.c ****                     data_32  = *(p_buf_32 + 2);
 321              		.loc 1 1697 17 is_stmt 1 view .LVU113
1697:rtos/uC-FS/FAT/fs_fat_sfn.c ****                     data_32  = *(p_buf_32 + 2);
 322              		.loc 1 1697 20 is_stmt 0 view .LVU114
 323 0034 9742     		cmp	r7, r2
 324 0036 F0D1     		bne	.L25
1698:rtos/uC-FS/FAT/fs_fat_sfn.c ****                    #if (CPU_CFG_ENDIAN_TYPE == CPU_ENDIAN_TYPE_LITTLE)
 325              		.loc 1 1698 21 is_stmt 1 view .LVU115
1698:rtos/uC-FS/FAT/fs_fat_sfn.c ****                    #if (CPU_CFG_ENDIAN_TYPE == CPU_ENDIAN_TYPE_LITTLE)
 326              		.loc 1 1698 30 is_stmt 0 view .LVU116
 327 0038 A268     		ldr	r2, [r4, #8]
 328              	.LVL37:
1700:rtos/uC-FS/FAT/fs_fat_sfn.c ****                    #else
 329              		.loc 1 1700 21 is_stmt 1 view .LVU117
1700:rtos/uC-FS/FAT/fs_fat_sfn.c ****                    #else
 330              		.loc 1 1700 29 is_stmt 0 view .LVU118
 331 003a 22F07F42 		bic	r2, r2, #-16777216
 332              	.LVL38:
1704:rtos/uC-FS/FAT/fs_fat_sfn.c ****                        *p_err = FS_ERR_NONE;
 333              		.loc 1 1704 21 is_stmt 1 view .LVU119
1704:rtos/uC-FS/FAT/fs_fat_sfn.c ****                        *p_err = FS_ERR_NONE;
 334              		.loc 1 1704 24 is_stmt 0 view .LVU120
 335 003e 9445     		cmp	ip, r2
 336 0040 EBD1     		bne	.L25
1705:rtos/uC-FS/FAT/fs_fat_sfn.c ****                         return (sec_pos);
 337              		.loc 1 1705 24 is_stmt 1 view .LVU121
1705:rtos/uC-FS/FAT/fs_fat_sfn.c ****                         return (sec_pos);
 338              		.loc 1 1705 31 is_stmt 0 view .LVU122
 339 0042 0022     		movs	r2, #0
 340              	.LVL39:
1705:rtos/uC-FS/FAT/fs_fat_sfn.c ****                         return (sec_pos);
 341              		.loc 1 1705 31 view .LVU123
 342 0044 1A80     		strh	r2, [r3]	@ movhi
 343              	.LVL40:
1706:rtos/uC-FS/FAT/fs_fat_sfn.c ****                     }
 344              		.loc 1 1706 25 is_stmt 1 view .LVU124
ARM GAS  /tmp/ccpi2Pe2.s 			page 38


1706:rtos/uC-FS/FAT/fs_fat_sfn.c ****                     }
 345              		.loc 1 1706 32 is_stmt 0 view .LVU125
 346 0046 03E0     		b	.L21
 347              	.L28:
1714:rtos/uC-FS/FAT/fs_fat_sfn.c ****     }
1715:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1716:rtos/uC-FS/FAT/fs_fat_sfn.c ****    *p_err = FS_ERR_SYS_DIR_ENTRY_NOT_FOUND_YET;                 /* If dir entry NOT found ... rtn e
 348              		.loc 1 1716 4 is_stmt 1 view .LVU126
 349              		.loc 1 1716 11 is_stmt 0 view .LVU127
 350 0048 40F23452 		movw	r2, #1332
 351 004c 1A80     		strh	r2, [r3]	@ movhi
1717:rtos/uC-FS/FAT/fs_fat_sfn.c ****     return (0u);
 352              		.loc 1 1717 5 is_stmt 1 view .LVU128
 353              		.loc 1 1717 12 is_stmt 0 view .LVU129
 354 004e 0020     		movs	r0, #0
 355              	.LVL41:
 356              	.L21:
1718:rtos/uC-FS/FAT/fs_fat_sfn.c **** }
 357              		.loc 1 1718 1 view .LVU130
 358 0050 F0BC     		pop	{r4, r5, r6, r7}
 359              	.LCFI3:
 360              		.cfi_restore 7
 361              		.cfi_restore 6
 362              		.cfi_restore 5
 363              		.cfi_restore 4
 364              		.cfi_def_cfa_offset 0
 365              	.LVL42:
 366              		.loc 1 1718 1 view .LVU131
 367 0052 7047     		bx	lr
 368              		.cfi_endproc
 369              	.LFE12:
 371              		.section	.text.FS_FAT_SFN_DirEntryPlaceInSec,"ax",%progbits
 372              		.align	1
 373              		.syntax unified
 374              		.thumb
 375              		.thumb_func
 376              		.fpu fpv4-sp-d16
 378              	FS_FAT_SFN_DirEntryPlaceInSec:
 379              	.LVL43:
 380              	.LFB14:
1719:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1720:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1721:rtos/uC-FS/FAT/fs_fat_sfn.c **** /*
1722:rtos/uC-FS/FAT/fs_fat_sfn.c **** ***************************************************************************************************
1723:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                                     FS_FAT_SFN_DirEntryPlace()
1724:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
1725:rtos/uC-FS/FAT/fs_fat_sfn.c **** * Description : Find directory entry for placement of SFN.
1726:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
1727:rtos/uC-FS/FAT/fs_fat_sfn.c **** * Argument(s) : p_vol           Pointer to volume.
1728:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
1729:rtos/uC-FS/FAT/fs_fat_sfn.c **** *               p_buf           Pointer to temporary buffer.
1730:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
1731:rtos/uC-FS/FAT/fs_fat_sfn.c **** *               dir_start_sec   Directory sector in which entry should be located.
1732:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
1733:rtos/uC-FS/FAT/fs_fat_sfn.c **** *               p_dir_end_pos   Pointer to variable that will receive the directory position at whi
1734:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                               entry can be located.
1735:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
ARM GAS  /tmp/ccpi2Pe2.s 			page 39


1736:rtos/uC-FS/FAT/fs_fat_sfn.c **** *               p_err           Pointer to variable that will receive the return error code from th
1737:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
1738:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                                   FS_ERR_NONE             Directory entry found.
1739:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                                   FS_ERR_DEV              Device access error.
1740:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                                   FS_ERR_DIR_FULL         Directory is full (space could not be a
1741:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                                   FS_ERR_DEV_FULL         Device is full (space could not be allo
1742:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                                   FS_ERR_ENTRY_CORRUPT    File system entry is corrupt.
1743:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
1744:rtos/uC-FS/FAT/fs_fat_sfn.c **** * Return(s)   : none.
1745:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
1746:rtos/uC-FS/FAT/fs_fat_sfn.c **** * Note(s)     : (1) (a) The 'p_temp' pointer is 4-byte aligned since all sectors are 4-byte aligned
1747:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
1748:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                   (b) All pointers to directory entries are 4-byte aligned since all directory en
1749:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                       lie at a offset multiple of 32 (the size of a directory entry) from the beg
1750:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                       of a sector.
1751:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
1752:rtos/uC-FS/FAT/fs_fat_sfn.c **** *               (2) The sector number gotten or allocated from the FAT should be valid.  These chec
1753:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                   effectively redundant.
1754:rtos/uC-FS/FAT/fs_fat_sfn.c **** ***************************************************************************************************
1755:rtos/uC-FS/FAT/fs_fat_sfn.c **** */
1756:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1757:rtos/uC-FS/FAT/fs_fat_sfn.c **** #if (FS_CFG_RD_ONLY_EN == DEF_DISABLED)
1758:rtos/uC-FS/FAT/fs_fat_sfn.c **** static  void  FS_FAT_SFN_DirEntryPlace (FS_VOL          *p_vol,
1759:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                         FS_BUF          *p_buf,
1760:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                         FS_FAT_SEC_NBR   dir_start_sec,
1761:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                         FS_FAT_DIR_POS  *p_dir_end_pos,
1762:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                         FS_ERR          *p_err)
1763:rtos/uC-FS/FAT/fs_fat_sfn.c **** {
1764:rtos/uC-FS/FAT/fs_fat_sfn.c ****     FS_FAT_SEC_NBR         dir_cur_sec;
1765:rtos/uC-FS/FAT/fs_fat_sfn.c ****     FS_SEC_SIZE            dir_end_sec_pos;
1766:rtos/uC-FS/FAT/fs_fat_sfn.c ****     CPU_BOOLEAN            dir_sec_valid;
1767:rtos/uC-FS/FAT/fs_fat_sfn.c ****     FS_FAT_DATA           *p_fat_data;
1768:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1769:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1770:rtos/uC-FS/FAT/fs_fat_sfn.c ****     p_dir_end_pos->SecNbr =  0u;
1771:rtos/uC-FS/FAT/fs_fat_sfn.c ****     p_dir_end_pos->SecPos =  0u;
1772:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1773:rtos/uC-FS/FAT/fs_fat_sfn.c ****     p_fat_data            = (FS_FAT_DATA *)p_vol->DataPtr;
1774:rtos/uC-FS/FAT/fs_fat_sfn.c ****     dir_cur_sec           =  dir_start_sec;
1775:rtos/uC-FS/FAT/fs_fat_sfn.c ****     dir_sec_valid         =  FS_FAT_IS_VALID_SEC(p_fat_data, dir_cur_sec);
1776:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1777:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1778:rtos/uC-FS/FAT/fs_fat_sfn.c ****     while (dir_sec_valid == DEF_YES) {                          /* While sec is valid (see Note #2)
1779:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1780:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                                 /* --------------------- RD DIR SEC
1781:rtos/uC-FS/FAT/fs_fat_sfn.c ****         FSBuf_Set(p_buf,
1782:rtos/uC-FS/FAT/fs_fat_sfn.c ****                   dir_cur_sec,
1783:rtos/uC-FS/FAT/fs_fat_sfn.c ****                   FS_VOL_SEC_TYPE_DIR,
1784:rtos/uC-FS/FAT/fs_fat_sfn.c ****                   DEF_YES,
1785:rtos/uC-FS/FAT/fs_fat_sfn.c ****                   p_err);
1786:rtos/uC-FS/FAT/fs_fat_sfn.c ****         if (*p_err != FS_ERR_NONE) {
1787:rtos/uC-FS/FAT/fs_fat_sfn.c ****             return;
1788:rtos/uC-FS/FAT/fs_fat_sfn.c ****         }
1789:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1790:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1791:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                                 /* ------------- FIND EMPTY DIR ENT
1792:rtos/uC-FS/FAT/fs_fat_sfn.c ****         dir_end_sec_pos = FS_FAT_SFN_DirEntryPlaceInSec(p_buf->DataPtr,
ARM GAS  /tmp/ccpi2Pe2.s 			page 40


1793:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                         p_fat_data->SecSize,
1794:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                         p_err);
1795:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1796:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1797:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1798:rtos/uC-FS/FAT/fs_fat_sfn.c ****         switch (*p_err) {
1799:rtos/uC-FS/FAT/fs_fat_sfn.c ****             case FS_ERR_NONE:                                   /* ---------------- PLACE ENTRY IN 
1800:rtos/uC-FS/FAT/fs_fat_sfn.c ****                  FS_TRACE_LOG(("FS_FAT_SFN_DirEntryPlace(): Free dir entry found at %d of sec %d\r\
1801:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1802:rtos/uC-FS/FAT/fs_fat_sfn.c ****                  p_dir_end_pos->SecNbr = dir_cur_sec;
1803:rtos/uC-FS/FAT/fs_fat_sfn.c ****                  p_dir_end_pos->SecPos = dir_end_sec_pos;
1804:rtos/uC-FS/FAT/fs_fat_sfn.c ****                  return;
1805:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1806:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1807:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1808:rtos/uC-FS/FAT/fs_fat_sfn.c ****             case FS_ERR_SYS_DIR_ENTRY_NOT_FOUND_YET:            /* ----------------- GET NEXT DIR S
1809:rtos/uC-FS/FAT/fs_fat_sfn.c ****                  dir_cur_sec = FS_FAT_SecNextGetAlloc(p_vol,
1810:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                       p_buf,
1811:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                       dir_cur_sec,
1812:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                       DEF_TRUE,
1813:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                       p_err);
1814:rtos/uC-FS/FAT/fs_fat_sfn.c ****                  switch (*p_err) {
1815:rtos/uC-FS/FAT/fs_fat_sfn.c ****                      case FS_ERR_NONE:
1816:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                                 /* Chk sec validity (see Note #2). 
1817:rtos/uC-FS/FAT/fs_fat_sfn.c ****                           dir_sec_valid = FS_FAT_IS_VALID_SEC(p_fat_data, dir_cur_sec);
1818:rtos/uC-FS/FAT/fs_fat_sfn.c ****                           break;
1819:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1820:rtos/uC-FS/FAT/fs_fat_sfn.c ****                      case FS_ERR_DIR_FULL:
1821:rtos/uC-FS/FAT/fs_fat_sfn.c ****                      case FS_ERR_DEV_FULL:
1822:rtos/uC-FS/FAT/fs_fat_sfn.c ****                           return;
1823:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1824:rtos/uC-FS/FAT/fs_fat_sfn.c ****                      case FS_ERR_SYS_CLUS_CHAIN_END:
1825:rtos/uC-FS/FAT/fs_fat_sfn.c ****                      case FS_ERR_SYS_CLUS_INVALID:
1826:rtos/uC-FS/FAT/fs_fat_sfn.c ****                          *p_err = FS_ERR_ENTRY_CORRUPT;
1827:rtos/uC-FS/FAT/fs_fat_sfn.c ****                           return;
1828:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1829:rtos/uC-FS/FAT/fs_fat_sfn.c ****                      case FS_ERR_DEV:
1830:rtos/uC-FS/FAT/fs_fat_sfn.c ****                           return;
1831:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1832:rtos/uC-FS/FAT/fs_fat_sfn.c ****                      default:
1833:rtos/uC-FS/FAT/fs_fat_sfn.c ****                           FS_TRACE_DBG(("FS_FAT_SFN_DirEntryPlace(): Default case reached: %d.\r\n"
1834:rtos/uC-FS/FAT/fs_fat_sfn.c ****                           return;
1835:rtos/uC-FS/FAT/fs_fat_sfn.c ****                  }
1836:rtos/uC-FS/FAT/fs_fat_sfn.c ****                  break;
1837:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1838:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1839:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1840:rtos/uC-FS/FAT/fs_fat_sfn.c ****             default:
1841:rtos/uC-FS/FAT/fs_fat_sfn.c ****                 FS_TRACE_DBG(("FS_FAT_SFN_DirEntryPlace(): Default case reached: %d.\r\n", *p_err))
1842:rtos/uC-FS/FAT/fs_fat_sfn.c ****                 return;
1843:rtos/uC-FS/FAT/fs_fat_sfn.c ****         }
1844:rtos/uC-FS/FAT/fs_fat_sfn.c ****     }
1845:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1846:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1847:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                                 /* Invalid sec found (see Note #2).
1848:rtos/uC-FS/FAT/fs_fat_sfn.c ****     FS_TRACE_DBG(("FS_FAT_SFN_DirEntryPlace(): Invalid sec alloc'd: %d.\r\n", dir_cur_sec));
1849:rtos/uC-FS/FAT/fs_fat_sfn.c ****    *p_err = FS_ERR_ENTRY_CORRUPT;
ARM GAS  /tmp/ccpi2Pe2.s 			page 41


1850:rtos/uC-FS/FAT/fs_fat_sfn.c **** }
1851:rtos/uC-FS/FAT/fs_fat_sfn.c **** #endif
1852:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1853:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1854:rtos/uC-FS/FAT/fs_fat_sfn.c **** /*
1855:rtos/uC-FS/FAT/fs_fat_sfn.c **** ***************************************************************************************************
1856:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                                   FS_FAT_SFN_DirEntryPlaceInSec()
1857:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
1858:rtos/uC-FS/FAT/fs_fat_sfn.c **** * Description : Search directory sector to find empty directory entry.
1859:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
1860:rtos/uC-FS/FAT/fs_fat_sfn.c **** * Argument(s) : p_temp      Pointer to buffer of directory sector.
1861:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
1862:rtos/uC-FS/FAT/fs_fat_sfn.c **** *               sec_size    Sector size, in octets.
1863:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
1864:rtos/uC-FS/FAT/fs_fat_sfn.c **** *               p_err       Pointer to variable that will receive the return error code from this f
1865:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
1866:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                               FS_ERR_NONE                           Empty directory entry found.
1867:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                               FS_ERR_SYS_DIR_ENTRY_NOT_FOUND_YET    Empty directory entry NOT fou
1868:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
1869:rtos/uC-FS/FAT/fs_fat_sfn.c **** * Return(s)   : Location of directory entry within buffer.
1870:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
1871:rtos/uC-FS/FAT/fs_fat_sfn.c **** * Note(s)     : none.
1872:rtos/uC-FS/FAT/fs_fat_sfn.c **** ***************************************************************************************************
1873:rtos/uC-FS/FAT/fs_fat_sfn.c **** */
1874:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1875:rtos/uC-FS/FAT/fs_fat_sfn.c **** #if (FS_CFG_RD_ONLY_EN == DEF_DISABLED)
1876:rtos/uC-FS/FAT/fs_fat_sfn.c **** static  FS_SEC_SIZE  FS_FAT_SFN_DirEntryPlaceInSec (void         *p_temp,
1877:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                     FS_SEC_SIZE   sec_size,
1878:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                     FS_ERR       *p_err)
1879:rtos/uC-FS/FAT/fs_fat_sfn.c **** {
 381              		.loc 1 1879 1 is_stmt 1 view -0
 382              		.cfi_startproc
 383              		@ args = 0, pretend = 0, frame = 0
 384              		@ frame_needed = 0, uses_anonymous_args = 0
 385              		@ link register save eliminated.
 386              		.loc 1 1879 1 is_stmt 0 view .LVU133
 387 0000 0346     		mov	r3, r0
1880:rtos/uC-FS/FAT/fs_fat_sfn.c ****     CPU_INT08U    data_08;
 388              		.loc 1 1880 5 is_stmt 1 view .LVU134
1881:rtos/uC-FS/FAT/fs_fat_sfn.c ****     FS_SEC_SIZE   dir_sec_pos;
 389              		.loc 1 1881 5 view .LVU135
1882:rtos/uC-FS/FAT/fs_fat_sfn.c ****     CPU_INT08U   *p_temp_08;
 390              		.loc 1 1882 5 view .LVU136
1883:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1884:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1885:rtos/uC-FS/FAT/fs_fat_sfn.c ****     p_temp_08   = (CPU_INT08U *)p_temp;
 391              		.loc 1 1885 5 view .LVU137
 392              	.LVL44:
1886:rtos/uC-FS/FAT/fs_fat_sfn.c ****     dir_sec_pos = 0u;
 393              		.loc 1 1886 5 view .LVU138
1887:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1888:rtos/uC-FS/FAT/fs_fat_sfn.c ****     while (dir_sec_pos < sec_size) {
 394              		.loc 1 1888 5 view .LVU139
1886:rtos/uC-FS/FAT/fs_fat_sfn.c ****     dir_sec_pos = 0u;
 395              		.loc 1 1886 17 is_stmt 0 view .LVU140
 396 0002 0020     		movs	r0, #0
 397              	.LVL45:
ARM GAS  /tmp/ccpi2Pe2.s 			page 42


 398              		.loc 1 1888 11 is_stmt 1 view .LVU141
 399 0004 8842     		cmp	r0, r1
 400 0006 12D2     		bcs	.L41
1879:rtos/uC-FS/FAT/fs_fat_sfn.c ****     CPU_INT08U    data_08;
 401              		.loc 1 1879 1 is_stmt 0 view .LVU142
 402 0008 10B4     		push	{r4}
 403              	.LCFI4:
 404              		.cfi_def_cfa_offset 4
 405              		.cfi_offset 4, -4
 406              	.LVL46:
 407              	.L35:
1889:rtos/uC-FS/FAT/fs_fat_sfn.c ****         data_08 = *p_temp_08;
 408              		.loc 1 1889 9 is_stmt 1 view .LVU143
 409              		.loc 1 1889 17 is_stmt 0 view .LVU144
 410 000a 1C78     		ldrb	r4, [r3]	@ zero_extendqisi2
 411              	.LVL47:
1890:rtos/uC-FS/FAT/fs_fat_sfn.c ****         if ((data_08 == FS_FAT_DIRENT_NAME_ERASED_AND_FREE) ||  /* If dir entry free ...           
 412              		.loc 1 1890 9 is_stmt 1 view .LVU145
 413              		.loc 1 1890 12 is_stmt 0 view .LVU146
 414 000c E52C     		cmp	r4, #229
 415 000e 09D0     		beq	.L32
 416              		.loc 1 1890 61 discriminator 1 view .LVU147
 417 0010 44B1     		cbz	r4, .L32
1891:rtos/uC-FS/FAT/fs_fat_sfn.c ****             (data_08 == FS_FAT_DIRENT_NAME_FREE))  {
1892:rtos/uC-FS/FAT/fs_fat_sfn.c ****            *p_err = FS_ERR_NONE;
1893:rtos/uC-FS/FAT/fs_fat_sfn.c ****             return (dir_sec_pos);                               /*                   ... rtn dir en
1894:rtos/uC-FS/FAT/fs_fat_sfn.c ****         }
1895:rtos/uC-FS/FAT/fs_fat_sfn.c ****         p_temp_08   += FS_FAT_SIZE_DIR_ENTRY;
 418              		.loc 1 1895 9 is_stmt 1 view .LVU148
 419              		.loc 1 1895 21 is_stmt 0 view .LVU149
 420 0012 2033     		adds	r3, r3, #32
 421              	.LVL48:
1896:rtos/uC-FS/FAT/fs_fat_sfn.c ****         dir_sec_pos += FS_FAT_SIZE_DIR_ENTRY;
 422              		.loc 1 1896 9 is_stmt 1 view .LVU150
 423              		.loc 1 1896 21 is_stmt 0 view .LVU151
 424 0014 2030     		adds	r0, r0, #32
 425              	.LVL49:
1888:rtos/uC-FS/FAT/fs_fat_sfn.c ****         data_08 = *p_temp_08;
 426              		.loc 1 1888 11 is_stmt 1 view .LVU152
 427 0016 8842     		cmp	r0, r1
 428 0018 F7D3     		bcc	.L35
1897:rtos/uC-FS/FAT/fs_fat_sfn.c ****     }
1898:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1899:rtos/uC-FS/FAT/fs_fat_sfn.c ****    *p_err = FS_ERR_SYS_DIR_ENTRY_NOT_FOUND_YET;                 /* If dir entry free NOT found ... 
 429              		.loc 1 1899 4 view .LVU153
 430              		.loc 1 1899 11 is_stmt 0 view .LVU154
 431 001a 40F23453 		movw	r3, #1332
 432              	.LVL50:
 433              		.loc 1 1899 11 view .LVU155
 434 001e 1380     		strh	r3, [r2]	@ movhi
1900:rtos/uC-FS/FAT/fs_fat_sfn.c ****     return (0u);
 435              		.loc 1 1900 5 is_stmt 1 view .LVU156
 436              		.loc 1 1900 12 is_stmt 0 view .LVU157
 437 0020 0020     		movs	r0, #0
 438              	.LVL51:
 439              		.loc 1 1900 12 view .LVU158
 440 0022 01E0     		b	.L30
ARM GAS  /tmp/ccpi2Pe2.s 			page 43


 441              	.LVL52:
 442              	.L32:
1892:rtos/uC-FS/FAT/fs_fat_sfn.c ****             return (dir_sec_pos);                               /*                   ... rtn dir en
 443              		.loc 1 1892 12 is_stmt 1 view .LVU159
1892:rtos/uC-FS/FAT/fs_fat_sfn.c ****             return (dir_sec_pos);                               /*                   ... rtn dir en
 444              		.loc 1 1892 19 is_stmt 0 view .LVU160
 445 0024 0023     		movs	r3, #0
 446              	.LVL53:
1892:rtos/uC-FS/FAT/fs_fat_sfn.c ****             return (dir_sec_pos);                               /*                   ... rtn dir en
 447              		.loc 1 1892 19 view .LVU161
 448 0026 1380     		strh	r3, [r2]	@ movhi
1893:rtos/uC-FS/FAT/fs_fat_sfn.c ****         }
 449              		.loc 1 1893 13 is_stmt 1 view .LVU162
 450              	.LVL54:
 451              	.L30:
1901:rtos/uC-FS/FAT/fs_fat_sfn.c **** }
 452              		.loc 1 1901 1 is_stmt 0 view .LVU163
 453 0028 5DF8044B 		ldr	r4, [sp], #4
 454              	.LCFI5:
 455              		.cfi_restore 4
 456              		.cfi_def_cfa_offset 0
 457              	.LVL55:
 458              		.loc 1 1901 1 view .LVU164
 459 002c 7047     		bx	lr
 460              	.LVL56:
 461              	.L41:
1899:rtos/uC-FS/FAT/fs_fat_sfn.c ****     return (0u);
 462              		.loc 1 1899 4 is_stmt 1 view .LVU165
1899:rtos/uC-FS/FAT/fs_fat_sfn.c ****     return (0u);
 463              		.loc 1 1899 11 is_stmt 0 view .LVU166
 464 002e 40F23453 		movw	r3, #1332
 465              	.LVL57:
1899:rtos/uC-FS/FAT/fs_fat_sfn.c ****     return (0u);
 466              		.loc 1 1899 11 view .LVU167
 467 0032 1380     		strh	r3, [r2]	@ movhi
1900:rtos/uC-FS/FAT/fs_fat_sfn.c **** }
 468              		.loc 1 1900 5 is_stmt 1 view .LVU168
1900:rtos/uC-FS/FAT/fs_fat_sfn.c **** }
 469              		.loc 1 1900 12 is_stmt 0 view .LVU169
 470 0034 0020     		movs	r0, #0
 471              		.loc 1 1901 1 view .LVU170
 472 0036 7047     		bx	lr
 473              		.cfi_endproc
 474              	.LFE14:
 476              		.section	.text.FS_FAT_SFN_LabelFindInSec,"ax",%progbits
 477              		.align	1
 478              		.syntax unified
 479              		.thumb
 480              		.thumb_func
 481              		.fpu fpv4-sp-d16
 483              	FS_FAT_SFN_LabelFindInSec:
 484              	.LVL58:
 485              	.LFB16:
1902:rtos/uC-FS/FAT/fs_fat_sfn.c **** #endif
1903:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1904:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1905:rtos/uC-FS/FAT/fs_fat_sfn.c **** /*
ARM GAS  /tmp/ccpi2Pe2.s 			page 44


1906:rtos/uC-FS/FAT/fs_fat_sfn.c **** ***************************************************************************************************
1907:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                                       FS_FAT_SFN_LabelFind()
1908:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
1909:rtos/uC-FS/FAT/fs_fat_sfn.c **** * Description : Search directory for SFN directory entry.
1910:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
1911:rtos/uC-FS/FAT/fs_fat_sfn.c **** * Argument(s) : p_vol               Pointer to volume.
1912:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
1913:rtos/uC-FS/FAT/fs_fat_sfn.c **** *               p_buf               Pointer to temporary buffer.
1914:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
1915:rtos/uC-FS/FAT/fs_fat_sfn.c **** *               p_dir_start_pos     Pointer to directory position at which search should start; var
1916:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                                   will receive the directory position at which the entry is locat
1917:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
1918:rtos/uC-FS/FAT/fs_fat_sfn.c **** *               p_dir_end_pos       Pointer to variable that will receive the directory position at
1919:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                                   the entry is located.
1920:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
1921:rtos/uC-FS/FAT/fs_fat_sfn.c **** *               p_err               Pointer to variable that will receive the return error code fro
1922:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
1923:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                                       FS_ERR_NONE                       Label found.
1924:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                                       FS_ERR_DEV                        Device access error.
1925:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                                       FS_ERR_SYS_DIR_ENTRY_NOT_FOUND    Label not found.
1926:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
1927:rtos/uC-FS/FAT/fs_fat_sfn.c **** * Return(s)   : none.
1928:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
1929:rtos/uC-FS/FAT/fs_fat_sfn.c **** * Note(s)     : (1) (a) The 'p_temp' pointer is 4-byte aligned since all buffers are 4-byte aligned
1930:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
1931:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                   (b) All pointers to directory entries are 4-byte aligned since all directory en
1932:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                       lie at a offset multiple of 32 (the size of a directory entry) from the beg
1933:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                       of a sector.
1934:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
1935:rtos/uC-FS/FAT/fs_fat_sfn.c **** *               (2) The sector number gotten from the FAT should be valid.  These checks are effect
1936:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                   redundant.
1937:rtos/uC-FS/FAT/fs_fat_sfn.c **** ***************************************************************************************************
1938:rtos/uC-FS/FAT/fs_fat_sfn.c **** */
1939:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1940:rtos/uC-FS/FAT/fs_fat_sfn.c **** static  void  FS_FAT_SFN_LabelFind (FS_VOL          *p_vol,
1941:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                     FS_BUF          *p_buf,
1942:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                     FS_FAT_DIR_POS  *p_dir_start_pos,
1943:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                     FS_FAT_DIR_POS  *p_dir_end_pos,
1944:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                     FS_ERR          *p_err)
1945:rtos/uC-FS/FAT/fs_fat_sfn.c **** {
1946:rtos/uC-FS/FAT/fs_fat_sfn.c ****     FS_FAT_SEC_NBR   dir_cur_sec;
1947:rtos/uC-FS/FAT/fs_fat_sfn.c ****     CPU_BOOLEAN      dir_sec_valid;
1948:rtos/uC-FS/FAT/fs_fat_sfn.c ****     FS_SEC_SIZE      dir_end_sec_pos;
1949:rtos/uC-FS/FAT/fs_fat_sfn.c ****     FS_FAT_DATA     *p_fat_data;
1950:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1951:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1952:rtos/uC-FS/FAT/fs_fat_sfn.c ****     p_fat_data    = (FS_FAT_DATA *)p_vol->DataPtr;
1953:rtos/uC-FS/FAT/fs_fat_sfn.c ****     dir_cur_sec   =  p_dir_start_pos->SecNbr;
1954:rtos/uC-FS/FAT/fs_fat_sfn.c ****     dir_sec_valid =  FS_FAT_IS_VALID_SEC(p_fat_data, dir_cur_sec);
1955:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1956:rtos/uC-FS/FAT/fs_fat_sfn.c ****     while (dir_sec_valid == DEF_YES) {                          /* While sec is valid (see Note #2)
1957:rtos/uC-FS/FAT/fs_fat_sfn.c ****         FSBuf_Set(p_buf,
1958:rtos/uC-FS/FAT/fs_fat_sfn.c ****                   dir_cur_sec,
1959:rtos/uC-FS/FAT/fs_fat_sfn.c ****                   FS_VOL_SEC_TYPE_DIR,
1960:rtos/uC-FS/FAT/fs_fat_sfn.c ****                   DEF_YES,
1961:rtos/uC-FS/FAT/fs_fat_sfn.c ****                   p_err);
1962:rtos/uC-FS/FAT/fs_fat_sfn.c ****         if (*p_err != FS_ERR_NONE) {
ARM GAS  /tmp/ccpi2Pe2.s 			page 45


1963:rtos/uC-FS/FAT/fs_fat_sfn.c ****             return;
1964:rtos/uC-FS/FAT/fs_fat_sfn.c ****         }
1965:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1966:rtos/uC-FS/FAT/fs_fat_sfn.c ****         dir_end_sec_pos = FS_FAT_SFN_LabelFindInSec(p_buf->DataPtr,
1967:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                     p_fat_data->SecSize,
1968:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                     p_err);
1969:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1970:rtos/uC-FS/FAT/fs_fat_sfn.c ****         switch (*p_err) {
1971:rtos/uC-FS/FAT/fs_fat_sfn.c ****             case FS_ERR_NONE:                                   /* Entry with matching name found. 
1972:rtos/uC-FS/FAT/fs_fat_sfn.c ****                  p_dir_start_pos->SecNbr = dir_cur_sec;
1973:rtos/uC-FS/FAT/fs_fat_sfn.c ****                  p_dir_start_pos->SecPos = dir_end_sec_pos;
1974:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1975:rtos/uC-FS/FAT/fs_fat_sfn.c ****                  p_dir_end_pos->SecNbr   = p_dir_start_pos->SecNbr;
1976:rtos/uC-FS/FAT/fs_fat_sfn.c ****                  p_dir_end_pos->SecPos   = p_dir_start_pos->SecPos;
1977:rtos/uC-FS/FAT/fs_fat_sfn.c ****                  return;
1978:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1979:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1980:rtos/uC-FS/FAT/fs_fat_sfn.c ****             case FS_ERR_SYS_DIR_ENTRY_NOT_FOUND:                /* No entry with matching name exis
1981:rtos/uC-FS/FAT/fs_fat_sfn.c ****                  return;
1982:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1983:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1984:rtos/uC-FS/FAT/fs_fat_sfn.c ****             case FS_ERR_SYS_DIR_ENTRY_NOT_FOUND_YET:            /* Entry with matching name MAY exi
1985:rtos/uC-FS/FAT/fs_fat_sfn.c ****                  dir_cur_sec = FS_FAT_SecNextGet(p_vol,
1986:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                  p_buf,
1987:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                  dir_cur_sec,
1988:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                  p_err);
1989:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1990:rtos/uC-FS/FAT/fs_fat_sfn.c ****                  switch (*p_err) {
1991:rtos/uC-FS/FAT/fs_fat_sfn.c ****                      case FS_ERR_NONE:                          /* More secs exist in dir.         
1992:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                                 /* Chk sec validity (see Note #3). 
1993:rtos/uC-FS/FAT/fs_fat_sfn.c ****                           dir_sec_valid = FS_FAT_IS_VALID_SEC(p_fat_data, dir_cur_sec);
1994:rtos/uC-FS/FAT/fs_fat_sfn.c ****                           break;
1995:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1996:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
1997:rtos/uC-FS/FAT/fs_fat_sfn.c ****                      case FS_ERR_SYS_CLUS_CHAIN_END:            /* No more secs exist in dir.      
1998:rtos/uC-FS/FAT/fs_fat_sfn.c ****                      case FS_ERR_SYS_CLUS_INVALID:
1999:rtos/uC-FS/FAT/fs_fat_sfn.c ****                          *p_err = FS_ERR_SYS_DIR_ENTRY_NOT_FOUND;
2000:rtos/uC-FS/FAT/fs_fat_sfn.c ****                           return;
2001:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
2002:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
2003:rtos/uC-FS/FAT/fs_fat_sfn.c ****                      case FS_ERR_DEV:
2004:rtos/uC-FS/FAT/fs_fat_sfn.c ****                      default:
2005:rtos/uC-FS/FAT/fs_fat_sfn.c ****                           return;
2006:rtos/uC-FS/FAT/fs_fat_sfn.c ****                  }
2007:rtos/uC-FS/FAT/fs_fat_sfn.c ****                  break;
2008:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
2009:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
2010:rtos/uC-FS/FAT/fs_fat_sfn.c ****             case FS_ERR_DEV:
2011:rtos/uC-FS/FAT/fs_fat_sfn.c ****                  return;
2012:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
2013:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
2014:rtos/uC-FS/FAT/fs_fat_sfn.c ****             default:
2015:rtos/uC-FS/FAT/fs_fat_sfn.c ****                  FS_TRACE_DBG(("FS_FAT_SFN_SFN_Find(): Default case reached.\r\n"));
2016:rtos/uC-FS/FAT/fs_fat_sfn.c ****                  return;
2017:rtos/uC-FS/FAT/fs_fat_sfn.c ****         }
2018:rtos/uC-FS/FAT/fs_fat_sfn.c ****     }
2019:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
ARM GAS  /tmp/ccpi2Pe2.s 			page 46


2020:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
2021:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                                 /* Invalid sec found (see Note #3).
2022:rtos/uC-FS/FAT/fs_fat_sfn.c ****     FS_TRACE_DBG(("FS_FAT_SFN_LabelFind(): Invalid sec gotten: %d.\r\n", dir_cur_sec));
2023:rtos/uC-FS/FAT/fs_fat_sfn.c ****    *p_err = FS_ERR_ENTRY_CORRUPT;
2024:rtos/uC-FS/FAT/fs_fat_sfn.c **** }
2025:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
2026:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
2027:rtos/uC-FS/FAT/fs_fat_sfn.c **** /*
2028:rtos/uC-FS/FAT/fs_fat_sfn.c **** ***************************************************************************************************
2029:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                                     FS_FAT_SFN_LabelFindInSec()
2030:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
2031:rtos/uC-FS/FAT/fs_fat_sfn.c **** * Description : Search directory sector to find label (volume ID).
2032:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
2033:rtos/uC-FS/FAT/fs_fat_sfn.c **** * Argument(s) : p_temp      Pointer to buffer of directory sector.
2034:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
2035:rtos/uC-FS/FAT/fs_fat_sfn.c **** *               sec_size    Sector size, in octets.
2036:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
2037:rtos/uC-FS/FAT/fs_fat_sfn.c **** *               p_err       Pointer to variable that will receive the return error code from this f
2038:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
2039:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                               FS_ERR_NONE                           Label found.
2040:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                               FS_ERR_SYS_DIR_ENTRY_NOT_FOUND        Label NOT found & all subsequ
2041:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                                                                         entries are free (so sear
2042:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                                                                         SHOULD end).
2043:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                               FS_ERR_SYS_DIR_ENTRY_NOT_FOUND_YET    Label NOT found, but non-free
2044:rtos/uC-FS/FAT/fs_fat_sfn.c **** *                                                                         subsequent entries may ex
2045:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
2046:rtos/uC-FS/FAT/fs_fat_sfn.c **** * Return(s)   : Location of label within buffer.
2047:rtos/uC-FS/FAT/fs_fat_sfn.c **** *
2048:rtos/uC-FS/FAT/fs_fat_sfn.c **** * Note(s)     : none.
2049:rtos/uC-FS/FAT/fs_fat_sfn.c **** ***************************************************************************************************
2050:rtos/uC-FS/FAT/fs_fat_sfn.c **** */
2051:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
2052:rtos/uC-FS/FAT/fs_fat_sfn.c **** static  FS_SEC_SIZE  FS_FAT_SFN_LabelFindInSec (void         *p_temp,
2053:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                 FS_SEC_SIZE   sec_size,
2054:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                 FS_ERR       *p_err)
2055:rtos/uC-FS/FAT/fs_fat_sfn.c **** {
 486              		.loc 1 2055 1 is_stmt 1 view -0
 487              		.cfi_startproc
 488              		@ args = 0, pretend = 0, frame = 0
 489              		@ frame_needed = 0, uses_anonymous_args = 0
 490              		@ link register save eliminated.
 491              		.loc 1 2055 1 is_stmt 0 view .LVU172
 492 0000 0346     		mov	r3, r0
2056:rtos/uC-FS/FAT/fs_fat_sfn.c ****     CPU_INT08U    attrib;
 493              		.loc 1 2056 5 is_stmt 1 view .LVU173
2057:rtos/uC-FS/FAT/fs_fat_sfn.c ****     CPU_INT08U   *p_buf_08;
 494              		.loc 1 2057 5 view .LVU174
2058:rtos/uC-FS/FAT/fs_fat_sfn.c ****     CPU_INT08U    data_08;
 495              		.loc 1 2058 5 view .LVU175
2059:rtos/uC-FS/FAT/fs_fat_sfn.c ****     FS_SEC_SIZE   sec_pos;
 496              		.loc 1 2059 5 view .LVU176
2060:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
2061:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
2062:rtos/uC-FS/FAT/fs_fat_sfn.c ****     p_buf_08 = (CPU_INT08U *)p_temp;
 497              		.loc 1 2062 5 view .LVU177
 498              	.LVL59:
2063:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
ARM GAS  /tmp/ccpi2Pe2.s 			page 47


2064:rtos/uC-FS/FAT/fs_fat_sfn.c ****     sec_pos  = 0u;
 499              		.loc 1 2064 5 view .LVU178
2065:rtos/uC-FS/FAT/fs_fat_sfn.c ****     while (sec_pos < sec_size) {
 500              		.loc 1 2065 5 view .LVU179
2064:rtos/uC-FS/FAT/fs_fat_sfn.c ****     while (sec_pos < sec_size) {
 501              		.loc 1 2064 14 is_stmt 0 view .LVU180
 502 0002 0020     		movs	r0, #0
 503              	.LVL60:
 504              		.loc 1 2065 11 is_stmt 1 view .LVU181
 505 0004 8842     		cmp	r0, r1
 506 0006 23D2     		bcs	.L53
2055:rtos/uC-FS/FAT/fs_fat_sfn.c ****     CPU_INT08U    attrib;
 507              		.loc 1 2055 1 is_stmt 0 view .LVU182
 508 0008 30B4     		push	{r4, r5}
 509              	.LCFI6:
 510              		.cfi_def_cfa_offset 8
 511              		.cfi_offset 4, -8
 512              		.cfi_offset 5, -4
 513 000a 09E0     		b	.L47
 514              	.LVL61:
 515              	.L55:
2066:rtos/uC-FS/FAT/fs_fat_sfn.c ****         data_08 = *p_buf_08;
2067:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
2068:rtos/uC-FS/FAT/fs_fat_sfn.c ****         if (data_08 == FS_FAT_DIRENT_NAME_FREE) {               /* If dir entry free & all subseque
2069:rtos/uC-FS/FAT/fs_fat_sfn.c ****            *p_err = FS_ERR_SYS_DIR_ENTRY_NOT_FOUND;             /* ... rtn err.                    
 516              		.loc 1 2069 12 is_stmt 1 view .LVU183
 517              		.loc 1 2069 19 is_stmt 0 view .LVU184
 518 000c 40F23353 		movw	r3, #1331
 519              	.LVL62:
 520              		.loc 1 2069 19 view .LVU185
 521 0010 1380     		strh	r3, [r2]	@ movhi
2070:rtos/uC-FS/FAT/fs_fat_sfn.c ****             return (0u);
 522              		.loc 1 2070 13 is_stmt 1 view .LVU186
 523              		.loc 1 2070 20 is_stmt 0 view .LVU187
 524 0012 0020     		movs	r0, #0
 525              	.LVL63:
 526              	.L42:
2071:rtos/uC-FS/FAT/fs_fat_sfn.c ****         }
2072:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
2073:rtos/uC-FS/FAT/fs_fat_sfn.c ****         if (data_08 != FS_FAT_DIRENT_NAME_ERASED_AND_FREE) {    /* If dir entry NOT free.          
2074:rtos/uC-FS/FAT/fs_fat_sfn.c ****             attrib  = *(p_buf_08 + FS_FAT_DIRENT_OFF_ATTR);
2075:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
2076:rtos/uC-FS/FAT/fs_fat_sfn.c ****             if ((attrib & FS_FAT_DIRENT_ATTR_LONG_NAME_MASK) != FS_FAT_DIRENT_ATTR_LONG_NAME) {
2077:rtos/uC-FS/FAT/fs_fat_sfn.c ****                 if (DEF_BIT_IS_SET(attrib, FS_FAT_DIRENT_ATTR_VOLUME_ID) == DEF_YES) {
2078:rtos/uC-FS/FAT/fs_fat_sfn.c ****                     if (DEF_BIT_IS_CLR(attrib, FS_FAT_DIRENT_ATTR_DIRECTORY) == DEF_YES) {
2079:rtos/uC-FS/FAT/fs_fat_sfn.c ****                        *p_err = FS_ERR_NONE;
2080:rtos/uC-FS/FAT/fs_fat_sfn.c ****                         return (sec_pos);
2081:rtos/uC-FS/FAT/fs_fat_sfn.c ****                     }
2082:rtos/uC-FS/FAT/fs_fat_sfn.c ****                 }
2083:rtos/uC-FS/FAT/fs_fat_sfn.c ****             }
2084:rtos/uC-FS/FAT/fs_fat_sfn.c ****         }
2085:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
2086:rtos/uC-FS/FAT/fs_fat_sfn.c ****         p_buf_08 += FS_FAT_SIZE_DIR_ENTRY;
2087:rtos/uC-FS/FAT/fs_fat_sfn.c ****         sec_pos  += FS_FAT_SIZE_DIR_ENTRY;
2088:rtos/uC-FS/FAT/fs_fat_sfn.c ****     }
2089:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
2090:rtos/uC-FS/FAT/fs_fat_sfn.c ****    *p_err = FS_ERR_SYS_DIR_ENTRY_NOT_FOUND_YET;                 /* If dir entry NOT found ... rtn e
ARM GAS  /tmp/ccpi2Pe2.s 			page 48


2091:rtos/uC-FS/FAT/fs_fat_sfn.c ****     return (0u);
2092:rtos/uC-FS/FAT/fs_fat_sfn.c **** }
 527              		.loc 1 2092 1 view .LVU188
 528 0014 30BC     		pop	{r4, r5}
 529              	.LCFI7:
 530              		.cfi_remember_state
 531              		.cfi_restore 5
 532              		.cfi_restore 4
 533              		.cfi_def_cfa_offset 0
 534 0016 7047     		bx	lr
 535              	.LVL64:
 536              	.L46:
 537              	.LCFI8:
 538              		.cfi_restore_state
2086:rtos/uC-FS/FAT/fs_fat_sfn.c ****         sec_pos  += FS_FAT_SIZE_DIR_ENTRY;
 539              		.loc 1 2086 9 is_stmt 1 view .LVU189
2086:rtos/uC-FS/FAT/fs_fat_sfn.c ****         sec_pos  += FS_FAT_SIZE_DIR_ENTRY;
 540              		.loc 1 2086 18 is_stmt 0 view .LVU190
 541 0018 2033     		adds	r3, r3, #32
 542              	.LVL65:
2087:rtos/uC-FS/FAT/fs_fat_sfn.c ****     }
 543              		.loc 1 2087 9 is_stmt 1 view .LVU191
2087:rtos/uC-FS/FAT/fs_fat_sfn.c ****     }
 544              		.loc 1 2087 18 is_stmt 0 view .LVU192
 545 001a 2030     		adds	r0, r0, #32
 546              	.LVL66:
2065:rtos/uC-FS/FAT/fs_fat_sfn.c ****         data_08 = *p_buf_08;
 547              		.loc 1 2065 11 is_stmt 1 view .LVU193
 548 001c 8842     		cmp	r0, r1
 549 001e 12D2     		bcs	.L54
 550              	.LVL67:
 551              	.L47:
2066:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 552              		.loc 1 2066 9 view .LVU194
2066:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 553              		.loc 1 2066 17 is_stmt 0 view .LVU195
 554 0020 1C78     		ldrb	r4, [r3]	@ zero_extendqisi2
 555              	.LVL68:
2068:rtos/uC-FS/FAT/fs_fat_sfn.c ****            *p_err = FS_ERR_SYS_DIR_ENTRY_NOT_FOUND;             /* ... rtn err.                    
 556              		.loc 1 2068 9 is_stmt 1 view .LVU196
2068:rtos/uC-FS/FAT/fs_fat_sfn.c ****            *p_err = FS_ERR_SYS_DIR_ENTRY_NOT_FOUND;             /* ... rtn err.                    
 557              		.loc 1 2068 12 is_stmt 0 view .LVU197
 558 0022 002C     		cmp	r4, #0
 559 0024 F2D0     		beq	.L55
2073:rtos/uC-FS/FAT/fs_fat_sfn.c ****             attrib  = *(p_buf_08 + FS_FAT_DIRENT_OFF_ATTR);
 560              		.loc 1 2073 9 is_stmt 1 view .LVU198
2073:rtos/uC-FS/FAT/fs_fat_sfn.c ****             attrib  = *(p_buf_08 + FS_FAT_DIRENT_OFF_ATTR);
 561              		.loc 1 2073 12 is_stmt 0 view .LVU199
 562 0026 E52C     		cmp	r4, #229
 563 0028 F6D0     		beq	.L46
2074:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 564              		.loc 1 2074 13 is_stmt 1 view .LVU200
2074:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 565              		.loc 1 2074 21 is_stmt 0 view .LVU201
 566 002a DC7A     		ldrb	r4, [r3, #11]	@ zero_extendqisi2
 567              	.LVL69:
2076:rtos/uC-FS/FAT/fs_fat_sfn.c ****                 if (DEF_BIT_IS_SET(attrib, FS_FAT_DIRENT_ATTR_VOLUME_ID) == DEF_YES) {
ARM GAS  /tmp/ccpi2Pe2.s 			page 49


 568              		.loc 1 2076 13 is_stmt 1 view .LVU202
2076:rtos/uC-FS/FAT/fs_fat_sfn.c ****                 if (DEF_BIT_IS_SET(attrib, FS_FAT_DIRENT_ATTR_VOLUME_ID) == DEF_YES) {
 569              		.loc 1 2076 16 is_stmt 0 view .LVU203
 570 002c 04F03F05 		and	r5, r4, #63
 571 0030 0F2D     		cmp	r5, #15
 572 0032 F1D0     		beq	.L46
2077:rtos/uC-FS/FAT/fs_fat_sfn.c ****                     if (DEF_BIT_IS_CLR(attrib, FS_FAT_DIRENT_ATTR_DIRECTORY) == DEF_YES) {
 573              		.loc 1 2077 17 is_stmt 1 view .LVU204
2077:rtos/uC-FS/FAT/fs_fat_sfn.c ****                     if (DEF_BIT_IS_CLR(attrib, FS_FAT_DIRENT_ATTR_DIRECTORY) == DEF_YES) {
 574              		.loc 1 2077 20 is_stmt 0 view .LVU205
 575 0034 14F0080F 		tst	r4, #8
 576 0038 EED0     		beq	.L46
2078:rtos/uC-FS/FAT/fs_fat_sfn.c ****                        *p_err = FS_ERR_NONE;
 577              		.loc 1 2078 21 is_stmt 1 view .LVU206
2078:rtos/uC-FS/FAT/fs_fat_sfn.c ****                        *p_err = FS_ERR_NONE;
 578              		.loc 1 2078 24 is_stmt 0 view .LVU207
 579 003a 14F0100F 		tst	r4, #16
 580 003e EBD1     		bne	.L46
2079:rtos/uC-FS/FAT/fs_fat_sfn.c ****                         return (sec_pos);
 581              		.loc 1 2079 24 is_stmt 1 view .LVU208
2079:rtos/uC-FS/FAT/fs_fat_sfn.c ****                         return (sec_pos);
 582              		.loc 1 2079 31 is_stmt 0 view .LVU209
 583 0040 0023     		movs	r3, #0
 584              	.LVL70:
2079:rtos/uC-FS/FAT/fs_fat_sfn.c ****                         return (sec_pos);
 585              		.loc 1 2079 31 view .LVU210
 586 0042 1380     		strh	r3, [r2]	@ movhi
2080:rtos/uC-FS/FAT/fs_fat_sfn.c ****                     }
 587              		.loc 1 2080 25 is_stmt 1 view .LVU211
2080:rtos/uC-FS/FAT/fs_fat_sfn.c ****                     }
 588              		.loc 1 2080 32 is_stmt 0 view .LVU212
 589 0044 E6E7     		b	.L42
 590              	.LVL71:
 591              	.L54:
2090:rtos/uC-FS/FAT/fs_fat_sfn.c ****     return (0u);
 592              		.loc 1 2090 4 is_stmt 1 view .LVU213
2090:rtos/uC-FS/FAT/fs_fat_sfn.c ****     return (0u);
 593              		.loc 1 2090 11 is_stmt 0 view .LVU214
 594 0046 40F23453 		movw	r3, #1332
 595              	.LVL72:
2090:rtos/uC-FS/FAT/fs_fat_sfn.c ****     return (0u);
 596              		.loc 1 2090 11 view .LVU215
 597 004a 1380     		strh	r3, [r2]	@ movhi
2091:rtos/uC-FS/FAT/fs_fat_sfn.c **** }
 598              		.loc 1 2091 5 is_stmt 1 view .LVU216
2091:rtos/uC-FS/FAT/fs_fat_sfn.c **** }
 599              		.loc 1 2091 12 is_stmt 0 view .LVU217
 600 004c 0020     		movs	r0, #0
 601              	.LVL73:
2091:rtos/uC-FS/FAT/fs_fat_sfn.c **** }
 602              		.loc 1 2091 12 view .LVU218
 603 004e E1E7     		b	.L42
 604              	.LVL74:
 605              	.L53:
 606              	.LCFI9:
 607              		.cfi_def_cfa_offset 0
 608              		.cfi_restore 4
ARM GAS  /tmp/ccpi2Pe2.s 			page 50


 609              		.cfi_restore 5
2090:rtos/uC-FS/FAT/fs_fat_sfn.c ****     return (0u);
 610              		.loc 1 2090 4 is_stmt 1 view .LVU219
2090:rtos/uC-FS/FAT/fs_fat_sfn.c ****     return (0u);
 611              		.loc 1 2090 11 is_stmt 0 view .LVU220
 612 0050 40F23453 		movw	r3, #1332
 613              	.LVL75:
2090:rtos/uC-FS/FAT/fs_fat_sfn.c ****     return (0u);
 614              		.loc 1 2090 11 view .LVU221
 615 0054 1380     		strh	r3, [r2]	@ movhi
2091:rtos/uC-FS/FAT/fs_fat_sfn.c **** }
 616              		.loc 1 2091 5 is_stmt 1 view .LVU222
2091:rtos/uC-FS/FAT/fs_fat_sfn.c **** }
 617              		.loc 1 2091 12 is_stmt 0 view .LVU223
 618 0056 0020     		movs	r0, #0
 619              		.loc 1 2092 1 view .LVU224
 620 0058 7047     		bx	lr
 621              		.cfi_endproc
 622              	.LFE16:
 624              		.section	.text.FS_FAT_SFN_NextDirEntryGet,"ax",%progbits
 625              		.align	1
 626              		.syntax unified
 627              		.thumb
 628              		.thumb_func
 629              		.fpu fpv4-sp-d16
 631              	FS_FAT_SFN_NextDirEntryGet:
 632              	.LVL76:
 633              	.LFB10:
1428:rtos/uC-FS/FAT/fs_fat_sfn.c ****     CPU_INT08U       data_08;
 634              		.loc 1 1428 1 is_stmt 1 view -0
 635              		.cfi_startproc
 636              		@ args = 8, pretend = 0, frame = 16
 637              		@ frame_needed = 0, uses_anonymous_args = 0
1428:rtos/uC-FS/FAT/fs_fat_sfn.c ****     CPU_INT08U       data_08;
 638              		.loc 1 1428 1 is_stmt 0 view .LVU226
 639 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 640              	.LCFI10:
 641              		.cfi_def_cfa_offset 36
 642              		.cfi_offset 4, -36
 643              		.cfi_offset 5, -32
 644              		.cfi_offset 6, -28
 645              		.cfi_offset 7, -24
 646              		.cfi_offset 8, -20
 647              		.cfi_offset 9, -16
 648              		.cfi_offset 10, -12
 649              		.cfi_offset 11, -8
 650              		.cfi_offset 14, -4
 651 0004 87B0     		sub	sp, sp, #28
 652              	.LCFI11:
 653              		.cfi_def_cfa_offset 64
 654 0006 8346     		mov	fp, r0
 655 0008 0E46     		mov	r6, r1
 656 000a 0392     		str	r2, [sp, #12]
 657 000c 1F46     		mov	r7, r3
 658 000e DDF84090 		ldr	r9, [sp, #64]
 659 0012 DDF84480 		ldr	r8, [sp, #68]
1429:rtos/uC-FS/FAT/fs_fat_sfn.c ****     FS_FAT_DIR_POS   dir_cur_pos;
ARM GAS  /tmp/ccpi2Pe2.s 			page 51


 660              		.loc 1 1429 5 is_stmt 1 view .LVU227
1430:rtos/uC-FS/FAT/fs_fat_sfn.c ****     FS_FAT_SEC_NBR   dir_next_sec;
 661              		.loc 1 1430 5 view .LVU228
1431:rtos/uC-FS/FAT/fs_fat_sfn.c ****     CPU_BOOLEAN      dir_sec_valid;
 662              		.loc 1 1431 5 view .LVU229
1432:rtos/uC-FS/FAT/fs_fat_sfn.c ****     CPU_INT08U       fat_attrib;
 663              		.loc 1 1432 5 view .LVU230
1433:rtos/uC-FS/FAT/fs_fat_sfn.c ****     FS_FAT_DATA     *p_fat_data;
 664              		.loc 1 1433 5 view .LVU231
1434:rtos/uC-FS/FAT/fs_fat_sfn.c ****     CPU_INT08U      *p_temp_08;
 665              		.loc 1 1434 5 view .LVU232
1435:rtos/uC-FS/FAT/fs_fat_sfn.c ****     CPU_BOOLEAN      ext_lower_case;
 666              		.loc 1 1435 5 view .LVU233
1436:rtos/uC-FS/FAT/fs_fat_sfn.c ****     CPU_BOOLEAN      name_lower_case;
 667              		.loc 1 1436 5 view .LVU234
1437:rtos/uC-FS/FAT/fs_fat_sfn.c ****     CPU_INT08U       ntres;
 668              		.loc 1 1437 5 view .LVU235
1438:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 669              		.loc 1 1438 5 view .LVU236
1441:rtos/uC-FS/FAT/fs_fat_sfn.c ****     p_dir_end_pos->SecPos =  0u;
 670              		.loc 1 1441 5 view .LVU237
1441:rtos/uC-FS/FAT/fs_fat_sfn.c ****     p_dir_end_pos->SecPos =  0u;
 671              		.loc 1 1441 27 is_stmt 0 view .LVU238
 672 0016 0023     		movs	r3, #0
 673              	.LVL77:
1441:rtos/uC-FS/FAT/fs_fat_sfn.c ****     p_dir_end_pos->SecPos =  0u;
 674              		.loc 1 1441 27 view .LVU239
 675 0018 C9F80030 		str	r3, [r9]
1442:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 676              		.loc 1 1442 5 is_stmt 1 view .LVU240
1442:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 677              		.loc 1 1442 27 is_stmt 0 view .LVU241
 678 001c C9F80430 		str	r3, [r9, #4]
1444:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 679              		.loc 1 1444 5 is_stmt 1 view .LVU242
1444:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 680              		.loc 1 1444 27 is_stmt 0 view .LVU243
 681 0020 456B     		ldr	r5, [r0, #52]
 682              	.LVL78:
1446:rtos/uC-FS/FAT/fs_fat_sfn.c ****     dir_cur_pos.SecPos    =  p_dir_start_pos->SecPos;
 683              		.loc 1 1446 5 is_stmt 1 view .LVU244
1446:rtos/uC-FS/FAT/fs_fat_sfn.c ****     dir_cur_pos.SecPos    =  p_dir_start_pos->SecPos;
 684              		.loc 1 1446 45 is_stmt 0 view .LVU245
 685 0022 3A68     		ldr	r2, [r7]
 686              	.LVL79:
1446:rtos/uC-FS/FAT/fs_fat_sfn.c ****     dir_cur_pos.SecPos    =  p_dir_start_pos->SecPos;
 687              		.loc 1 1446 27 view .LVU246
 688 0024 0492     		str	r2, [sp, #16]
1447:rtos/uC-FS/FAT/fs_fat_sfn.c ****     dir_sec_valid         =  FS_FAT_IS_VALID_SEC(p_fat_data, dir_cur_pos.SecNbr);
 689              		.loc 1 1447 5 is_stmt 1 view .LVU247
1447:rtos/uC-FS/FAT/fs_fat_sfn.c ****     dir_sec_valid         =  FS_FAT_IS_VALID_SEC(p_fat_data, dir_cur_pos.SecNbr);
 690              		.loc 1 1447 45 is_stmt 0 view .LVU248
 691 0026 7B68     		ldr	r3, [r7, #4]
1447:rtos/uC-FS/FAT/fs_fat_sfn.c ****     dir_sec_valid         =  FS_FAT_IS_VALID_SEC(p_fat_data, dir_cur_pos.SecNbr);
 692              		.loc 1 1447 27 view .LVU249
 693 0028 0593     		str	r3, [sp, #20]
1448:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
ARM GAS  /tmp/ccpi2Pe2.s 			page 52


 694              		.loc 1 1448 5 is_stmt 1 view .LVU250
1448:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 695              		.loc 1 1448 30 is_stmt 0 view .LVU251
 696 002a AB6A     		ldr	r3, [r5, #40]
1448:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 697              		.loc 1 1448 27 view .LVU252
 698 002c 9A42     		cmp	r2, r3
 699 002e 65D3     		bcc	.L70
1448:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 700              		.loc 1 1448 30 discriminator 1 view .LVU253
 701 0030 A968     		ldr	r1, [r5, #8]
 702              	.LVL80:
1448:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 703              		.loc 1 1448 30 discriminator 1 view .LVU254
 704 0032 0B44     		add	r3, r3, r1
 705 0034 2969     		ldr	r1, [r5, #16]
 706 0036 0B44     		add	r3, r3, r1
 707 0038 9A42     		cmp	r2, r3
 708 003a 75D9     		bls	.L71
1448:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 709              		.loc 1 1448 27 view .LVU255
 710 003c 0023     		movs	r3, #0
 711 003e 0293     		str	r3, [sp, #8]
 712 0040 5EE0     		b	.L68
 713              	.LVL81:
 714              	.L76:
1471:rtos/uC-FS/FAT/fs_fat_sfn.c ****                 p_dir_end_pos->SecPos = dir_cur_pos.SecPos;
 715              		.loc 1 1471 17 is_stmt 1 view .LVU256
1471:rtos/uC-FS/FAT/fs_fat_sfn.c ****                 p_dir_end_pos->SecPos = dir_cur_pos.SecPos;
 716              		.loc 1 1471 39 is_stmt 0 view .LVU257
 717 0042 C9F800A0 		str	r10, [r9]
1472:rtos/uC-FS/FAT/fs_fat_sfn.c ****                *p_err = FS_ERR_EOF;
 718              		.loc 1 1472 17 is_stmt 1 view .LVU258
1472:rtos/uC-FS/FAT/fs_fat_sfn.c ****                *p_err = FS_ERR_EOF;
 719              		.loc 1 1472 39 is_stmt 0 view .LVU259
 720 0046 C9F80440 		str	r4, [r9, #4]
1473:rtos/uC-FS/FAT/fs_fat_sfn.c ****                 return;
 721              		.loc 1 1473 16 is_stmt 1 view .LVU260
1473:rtos/uC-FS/FAT/fs_fat_sfn.c ****                 return;
 722              		.loc 1 1473 23 is_stmt 0 view .LVU261
 723 004a 1623     		movs	r3, #22
 724              	.LVL82:
1473:rtos/uC-FS/FAT/fs_fat_sfn.c ****                 return;
 725              		.loc 1 1473 23 view .LVU262
 726 004c A8F80030 		strh	r3, [r8]	@ movhi
1474:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 727              		.loc 1 1474 17 is_stmt 1 view .LVU263
 728              	.LVL83:
 729              	.L56:
1542:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 730              		.loc 1 1542 1 is_stmt 0 view .LVU264
 731 0050 07B0     		add	sp, sp, #28
 732              	.LCFI12:
 733              		.cfi_remember_state
 734              		.cfi_def_cfa_offset 36
 735              		@ sp needed
 736 0052 BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
ARM GAS  /tmp/ccpi2Pe2.s 			page 53


 737              	.LVL84:
 738              	.L60:
 739              	.LCFI13:
 740              		.cfi_restore_state
1497:rtos/uC-FS/FAT/fs_fat_sfn.c ****             dir_cur_pos.SecPos += FS_FAT_SIZE_DIR_ENTRY;
 741              		.loc 1 1497 13 is_stmt 1 view .LVU265
1497:rtos/uC-FS/FAT/fs_fat_sfn.c ****             dir_cur_pos.SecPos += FS_FAT_SIZE_DIR_ENTRY;
 742              		.loc 1 1497 32 is_stmt 0 view .LVU266
 743 0056 2030     		adds	r0, r0, #32
 744              	.LVL85:
1498:rtos/uC-FS/FAT/fs_fat_sfn.c ****         }
 745              		.loc 1 1498 13 is_stmt 1 view .LVU267
1498:rtos/uC-FS/FAT/fs_fat_sfn.c ****         }
 746              		.loc 1 1498 32 is_stmt 0 view .LVU268
 747 0058 2034     		adds	r4, r4, #32
 748 005a 0594     		str	r4, [sp, #20]
 749              	.LVL86:
 750              	.L59:
1464:rtos/uC-FS/FAT/fs_fat_sfn.c ****             data_08 = *p_temp_08;
 751              		.loc 1 1464 15 is_stmt 1 view .LVU269
1464:rtos/uC-FS/FAT/fs_fat_sfn.c ****             data_08 = *p_temp_08;
 752              		.loc 1 1464 27 is_stmt 0 view .LVU270
 753 005c 059C     		ldr	r4, [sp, #20]
1464:rtos/uC-FS/FAT/fs_fat_sfn.c ****             data_08 = *p_temp_08;
 754              		.loc 1 1464 47 view .LVU271
 755 005e 6B6B     		ldr	r3, [r5, #52]
1464:rtos/uC-FS/FAT/fs_fat_sfn.c ****             data_08 = *p_temp_08;
 756              		.loc 1 1464 15 view .LVU272
 757 0060 9C42     		cmp	r4, r3
 758 0062 1CD2     		bcs	.L75
1465:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 759              		.loc 1 1465 13 is_stmt 1 view .LVU273
1465:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 760              		.loc 1 1465 21 is_stmt 0 view .LVU274
 761 0064 0378     		ldrb	r3, [r0]	@ zero_extendqisi2
 762              	.LVL87:
1467:rtos/uC-FS/FAT/fs_fat_sfn.c ****                 ;
 763              		.loc 1 1467 13 is_stmt 1 view .LVU275
1467:rtos/uC-FS/FAT/fs_fat_sfn.c ****                 ;
 764              		.loc 1 1467 16 is_stmt 0 view .LVU276
 765 0066 E52B     		cmp	r3, #229
 766 0068 F5D0     		beq	.L60
1470:rtos/uC-FS/FAT/fs_fat_sfn.c ****                 p_dir_end_pos->SecNbr = dir_cur_pos.SecNbr;
 767              		.loc 1 1470 20 is_stmt 1 view .LVU277
1470:rtos/uC-FS/FAT/fs_fat_sfn.c ****                 p_dir_end_pos->SecNbr = dir_cur_pos.SecNbr;
 768              		.loc 1 1470 23 is_stmt 0 view .LVU278
 769 006a 002B     		cmp	r3, #0
 770 006c E9D0     		beq	.L76
1477:rtos/uC-FS/FAT/fs_fat_sfn.c ****                 if (DEF_BIT_IS_CLR(fat_attrib, FS_FAT_DIRENT_ATTR_VOLUME_ID) == DEF_YES) {
 771              		.loc 1 1477 17 is_stmt 1 view .LVU279
1477:rtos/uC-FS/FAT/fs_fat_sfn.c ****                 if (DEF_BIT_IS_CLR(fat_attrib, FS_FAT_DIRENT_ATTR_VOLUME_ID) == DEF_YES) {
 772              		.loc 1 1477 28 is_stmt 0 view .LVU280
 773 006e C37A     		ldrb	r3, [r0, #11]	@ zero_extendqisi2
 774              	.LVL88:
1478:rtos/uC-FS/FAT/fs_fat_sfn.c ****                     if (name != (void *)0) {
 775              		.loc 1 1478 17 is_stmt 1 view .LVU281
1478:rtos/uC-FS/FAT/fs_fat_sfn.c ****                     if (name != (void *)0) {
ARM GAS  /tmp/ccpi2Pe2.s 			page 54


 776              		.loc 1 1478 20 is_stmt 0 view .LVU282
 777 0070 13F0080F 		tst	r3, #8
 778 0074 EFD1     		bne	.L60
1479:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                                 /* Apply case (see Note #2).       
 779              		.loc 1 1479 21 is_stmt 1 view .LVU283
1479:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                                 /* Apply case (see Note #2).       
 780              		.loc 1 1479 24 is_stmt 0 view .LVU284
 781 0076 0399     		ldr	r1, [sp, #12]
 782 0078 31B1     		cbz	r1, .L62
1481:rtos/uC-FS/FAT/fs_fat_sfn.c ****                         name_lower_case = DEF_BIT_IS_SET(ntres, FS_FAT_DIRENT_NTRES_NAME_LOWER_CASE
 783              		.loc 1 1481 25 is_stmt 1 view .LVU285
1481:rtos/uC-FS/FAT/fs_fat_sfn.c ****                         name_lower_case = DEF_BIT_IS_SET(ntres, FS_FAT_DIRENT_NTRES_NAME_LOWER_CASE
 784              		.loc 1 1481 41 is_stmt 0 view .LVU286
 785 007a 027B     		ldrb	r2, [r0, #12]	@ zero_extendqisi2
 786              	.LVL89:
1482:rtos/uC-FS/FAT/fs_fat_sfn.c ****                         ext_lower_case  = DEF_BIT_IS_SET(ntres, FS_FAT_DIRENT_NTRES_EXT_LOWER_CASE)
 787              		.loc 1 1482 25 is_stmt 1 view .LVU287
1483:rtos/uC-FS/FAT/fs_fat_sfn.c ****                         FS_FAT_SFN_Parse((void        *)p_temp_08,
 788              		.loc 1 1483 25 view .LVU288
1484:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                          (CPU_CHAR    *)name,
 789              		.loc 1 1484 25 view .LVU289
 790 007c C2F30013 		ubfx	r3, r2, #4, #1
 791              	.LVL90:
1484:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                          (CPU_CHAR    *)name,
 792              		.loc 1 1484 25 is_stmt 0 view .LVU290
 793 0080 C2F3C002 		ubfx	r2, r2, #3, #1
 794              	.LVL91:
1484:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                          (CPU_CHAR    *)name,
 795              		.loc 1 1484 25 view .LVU291
 796 0084 FFF7FEFF 		bl	FS_FAT_SFN_Parse
 797              	.LVL92:
 798              	.L62:
1489:rtos/uC-FS/FAT/fs_fat_sfn.c ****                     p_dir_start_pos->SecPos = dir_cur_pos.SecPos;
 799              		.loc 1 1489 21 is_stmt 1 view .LVU292
1489:rtos/uC-FS/FAT/fs_fat_sfn.c ****                     p_dir_start_pos->SecPos = dir_cur_pos.SecPos;
 800              		.loc 1 1489 45 is_stmt 0 view .LVU293
 801 0088 C7F800A0 		str	r10, [r7]
1490:rtos/uC-FS/FAT/fs_fat_sfn.c ****                     p_dir_end_pos->SecNbr   = dir_cur_pos.SecNbr;
 802              		.loc 1 1490 21 is_stmt 1 view .LVU294
1490:rtos/uC-FS/FAT/fs_fat_sfn.c ****                     p_dir_end_pos->SecNbr   = dir_cur_pos.SecNbr;
 803              		.loc 1 1490 45 is_stmt 0 view .LVU295
 804 008c 7C60     		str	r4, [r7, #4]
1491:rtos/uC-FS/FAT/fs_fat_sfn.c ****                     p_dir_end_pos->SecPos   = dir_cur_pos.SecPos;
 805              		.loc 1 1491 21 is_stmt 1 view .LVU296
1491:rtos/uC-FS/FAT/fs_fat_sfn.c ****                     p_dir_end_pos->SecPos   = dir_cur_pos.SecPos;
 806              		.loc 1 1491 45 is_stmt 0 view .LVU297
 807 008e C9F800A0 		str	r10, [r9]
1492:rtos/uC-FS/FAT/fs_fat_sfn.c ****                    *p_err = FS_ERR_NONE;
 808              		.loc 1 1492 21 is_stmt 1 view .LVU298
1492:rtos/uC-FS/FAT/fs_fat_sfn.c ****                    *p_err = FS_ERR_NONE;
 809              		.loc 1 1492 45 is_stmt 0 view .LVU299
 810 0092 C9F80440 		str	r4, [r9, #4]
1493:rtos/uC-FS/FAT/fs_fat_sfn.c ****                     return;
 811              		.loc 1 1493 20 is_stmt 1 view .LVU300
1493:rtos/uC-FS/FAT/fs_fat_sfn.c ****                     return;
 812              		.loc 1 1493 27 is_stmt 0 view .LVU301
 813 0096 0023     		movs	r3, #0
ARM GAS  /tmp/ccpi2Pe2.s 			page 55


 814 0098 A8F80030 		strh	r3, [r8]	@ movhi
1494:rtos/uC-FS/FAT/fs_fat_sfn.c ****                 }
 815              		.loc 1 1494 21 is_stmt 1 view .LVU302
 816 009c D8E7     		b	.L56
 817              	.LVL93:
 818              	.L75:
1504:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                          p_buf,
 819              		.loc 1 1504 9 view .LVU303
1504:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                          p_buf,
 820              		.loc 1 1504 24 is_stmt 0 view .LVU304
 821 009e 4346     		mov	r3, r8
 822 00a0 5246     		mov	r2, r10
 823 00a2 3146     		mov	r1, r6
 824 00a4 5846     		mov	r0, fp
 825              	.LVL94:
1504:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                          p_buf,
 826              		.loc 1 1504 24 view .LVU305
 827 00a6 FFF7FEFF 		bl	FS_FAT_SecNextGet
 828              	.LVL95:
1509:rtos/uC-FS/FAT/fs_fat_sfn.c ****             case FS_ERR_NONE:
 829              		.loc 1 1509 9 is_stmt 1 view .LVU306
1509:rtos/uC-FS/FAT/fs_fat_sfn.c ****             case FS_ERR_NONE:
 830              		.loc 1 1509 17 is_stmt 0 view .LVU307
 831 00aa B8F80030 		ldrh	r3, [r8]
1509:rtos/uC-FS/FAT/fs_fat_sfn.c ****             case FS_ERR_NONE:
 832              		.loc 1 1509 9 view .LVU308
 833 00ae B3F5FB7F 		cmp	r3, #502
 834 00b2 15D0     		beq	.L64
 835 00b4 0DD8     		bhi	.L65
 836 00b6 002B     		cmp	r3, #0
 837 00b8 CAD1     		bne	.L56
1511:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 838              		.loc 1 1511 18 is_stmt 1 view .LVU309
1530:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 839              		.loc 1 1530 9 view .LVU310
1530:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 840              		.loc 1 1530 30 is_stmt 0 view .LVU311
 841 00ba AB6A     		ldr	r3, [r5, #40]
1530:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 842              		.loc 1 1530 28 view .LVU312
 843 00bc 8342     		cmp	r3, r0
 844 00be 17D8     		bhi	.L72
1530:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 845              		.loc 1 1530 30 discriminator 1 view .LVU313
 846 00c0 AA68     		ldr	r2, [r5, #8]
 847 00c2 1344     		add	r3, r3, r2
 848 00c4 2A69     		ldr	r2, [r5, #16]
 849 00c6 1344     		add	r3, r3, r2
 850 00c8 8342     		cmp	r3, r0
 851 00ca 13D2     		bcs	.L67
1530:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 852              		.loc 1 1530 28 view .LVU314
 853 00cc 0023     		movs	r3, #0
 854 00ce 0293     		str	r3, [sp, #8]
 855              	.LVL96:
1530:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 856              		.loc 1 1530 28 view .LVU315
ARM GAS  /tmp/ccpi2Pe2.s 			page 56


 857 00d0 10E0     		b	.L67
 858              	.LVL97:
 859              	.L65:
1509:rtos/uC-FS/FAT/fs_fat_sfn.c ****             case FS_ERR_NONE:
 860              		.loc 1 1509 9 view .LVU316
 861 00d2 40F23652 		movw	r2, #1334
 862 00d6 9342     		cmp	r3, r2
 863 00d8 02D0     		beq	.L64
 864 00da B3F5A76F 		cmp	r3, #1336
 865 00de B7D1     		bne	.L56
 866              	.L64:
1516:rtos/uC-FS/FAT/fs_fat_sfn.c ****                  p_dir_end_pos->SecPos = dir_cur_pos.SecPos;
 867              		.loc 1 1516 18 is_stmt 1 view .LVU317
1516:rtos/uC-FS/FAT/fs_fat_sfn.c ****                  p_dir_end_pos->SecPos = dir_cur_pos.SecPos;
 868              		.loc 1 1516 40 is_stmt 0 view .LVU318
 869 00e0 C9F800A0 		str	r10, [r9]
1517:rtos/uC-FS/FAT/fs_fat_sfn.c ****                 *p_err = FS_ERR_EOF;
 870              		.loc 1 1517 18 is_stmt 1 view .LVU319
1517:rtos/uC-FS/FAT/fs_fat_sfn.c ****                 *p_err = FS_ERR_EOF;
 871              		.loc 1 1517 40 is_stmt 0 view .LVU320
 872 00e4 C9F80440 		str	r4, [r9, #4]
1518:rtos/uC-FS/FAT/fs_fat_sfn.c ****                  return;
 873              		.loc 1 1518 17 is_stmt 1 view .LVU321
1518:rtos/uC-FS/FAT/fs_fat_sfn.c ****                  return;
 874              		.loc 1 1518 24 is_stmt 0 view .LVU322
 875 00e8 1623     		movs	r3, #22
 876 00ea A8F80030 		strh	r3, [r8]	@ movhi
1519:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 877              		.loc 1 1519 18 is_stmt 1 view .LVU323
 878 00ee AFE7     		b	.L56
 879              	.L72:
1530:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 880              		.loc 1 1530 28 is_stmt 0 view .LVU324
 881 00f0 0023     		movs	r3, #0
 882 00f2 0293     		str	r3, [sp, #8]
 883              	.LVL98:
 884              	.L67:
1532:rtos/uC-FS/FAT/fs_fat_sfn.c ****         dir_cur_pos.SecPos = 0u;
 885              		.loc 1 1532 9 is_stmt 1 discriminator 6 view .LVU325
1532:rtos/uC-FS/FAT/fs_fat_sfn.c ****         dir_cur_pos.SecPos = 0u;
 886              		.loc 1 1532 28 is_stmt 0 discriminator 6 view .LVU326
 887 00f4 0490     		str	r0, [sp, #16]
1533:rtos/uC-FS/FAT/fs_fat_sfn.c ****         p_temp_08          = (CPU_INT08U *)p_buf->DataPtr;
 888              		.loc 1 1533 9 is_stmt 1 discriminator 6 view .LVU327
1533:rtos/uC-FS/FAT/fs_fat_sfn.c ****         p_temp_08          = (CPU_INT08U *)p_buf->DataPtr;
 889              		.loc 1 1533 28 is_stmt 0 discriminator 6 view .LVU328
 890 00f6 0023     		movs	r3, #0
 891 00f8 0593     		str	r3, [sp, #20]
1534:rtos/uC-FS/FAT/fs_fat_sfn.c ****     }
 892              		.loc 1 1534 9 is_stmt 1 discriminator 6 view .LVU329
 893              	.LVL99:
1534:rtos/uC-FS/FAT/fs_fat_sfn.c ****     }
 894              		.loc 1 1534 9 is_stmt 0 discriminator 6 view .LVU330
 895 00fa 01E0     		b	.L68
 896              	.LVL100:
 897              	.L70:
1448:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
ARM GAS  /tmp/ccpi2Pe2.s 			page 57


 898              		.loc 1 1448 27 view .LVU331
 899 00fc 0023     		movs	r3, #0
 900 00fe 0293     		str	r3, [sp, #8]
 901              	.LVL101:
 902              	.L68:
1450:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                                 /* ------------------- RD FIRST DIR
 903              		.loc 1 1450 11 is_stmt 1 view .LVU332
 904 0100 029B     		ldr	r3, [sp, #8]
 905 0102 A3B1     		cbz	r3, .L77
1452:rtos/uC-FS/FAT/fs_fat_sfn.c ****                   dir_cur_pos.SecNbr,
 906              		.loc 1 1452 9 view .LVU333
 907 0104 DDF810A0 		ldr	r10, [sp, #16]
 908 0108 CDF80080 		str	r8, [sp]
 909 010c 0123     		movs	r3, #1
 910 010e 0222     		movs	r2, #2
 911 0110 5146     		mov	r1, r10
 912 0112 3046     		mov	r0, r6
 913 0114 FFF7FEFF 		bl	FSBuf_Set
 914              	.LVL102:
1457:rtos/uC-FS/FAT/fs_fat_sfn.c ****             return;
 915              		.loc 1 1457 9 view .LVU334
1457:rtos/uC-FS/FAT/fs_fat_sfn.c ****             return;
 916              		.loc 1 1457 13 is_stmt 0 view .LVU335
 917 0118 B8F80030 		ldrh	r3, [r8]
1457:rtos/uC-FS/FAT/fs_fat_sfn.c ****             return;
 918              		.loc 1 1457 12 view .LVU336
 919 011c 002B     		cmp	r3, #0
 920 011e 97D1     		bne	.L56
1461:rtos/uC-FS/FAT/fs_fat_sfn.c ****         p_temp_08 += dir_cur_pos.SecPos;
 921              		.loc 1 1461 9 is_stmt 1 view .LVU337
1461:rtos/uC-FS/FAT/fs_fat_sfn.c ****         p_temp_08 += dir_cur_pos.SecPos;
 922              		.loc 1 1461 20 is_stmt 0 view .LVU338
 923 0120 3069     		ldr	r0, [r6, #16]
 924              	.LVL103:
1462:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 925              		.loc 1 1462 9 is_stmt 1 view .LVU339
1462:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 926              		.loc 1 1462 33 is_stmt 0 view .LVU340
 927 0122 059B     		ldr	r3, [sp, #20]
1462:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 928              		.loc 1 1462 19 view .LVU341
 929 0124 1844     		add	r0, r0, r3
 930              	.LVL104:
1464:rtos/uC-FS/FAT/fs_fat_sfn.c ****             data_08 = *p_temp_08;
 931              		.loc 1 1464 9 is_stmt 1 view .LVU342
1464:rtos/uC-FS/FAT/fs_fat_sfn.c ****             data_08 = *p_temp_08;
 932              		.loc 1 1464 15 is_stmt 0 view .LVU343
 933 0126 99E7     		b	.L59
 934              	.LVL105:
 935              	.L71:
1448:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 936              		.loc 1 1448 27 view .LVU344
 937 0128 0123     		movs	r3, #1
 938 012a 0293     		str	r3, [sp, #8]
 939 012c E8E7     		b	.L68
 940              	.LVL106:
 941              	.L77:
ARM GAS  /tmp/ccpi2Pe2.s 			page 58


1539:rtos/uC-FS/FAT/fs_fat_sfn.c ****    *p_err = FS_ERR_ENTRY_CORRUPT;
 942              		.loc 1 1539 100 is_stmt 1 view .LVU345
1540:rtos/uC-FS/FAT/fs_fat_sfn.c ****     return;
 943              		.loc 1 1540 4 view .LVU346
1540:rtos/uC-FS/FAT/fs_fat_sfn.c ****     return;
 944              		.loc 1 1540 11 is_stmt 0 view .LVU347
 945 012e 40F2BF23 		movw	r3, #703
 946 0132 A8F80030 		strh	r3, [r8]	@ movhi
1541:rtos/uC-FS/FAT/fs_fat_sfn.c **** }
 947              		.loc 1 1541 5 is_stmt 1 view .LVU348
 948 0136 8BE7     		b	.L56
 949              		.cfi_endproc
 950              	.LFE10:
 952              		.section	.text.FS_FAT_SFN_LabelFind,"ax",%progbits
 953              		.align	1
 954              		.syntax unified
 955              		.thumb
 956              		.thumb_func
 957              		.fpu fpv4-sp-d16
 959              	FS_FAT_SFN_LabelFind:
 960              	.LVL107:
 961              	.LFB15:
1945:rtos/uC-FS/FAT/fs_fat_sfn.c ****     FS_FAT_SEC_NBR   dir_cur_sec;
 962              		.loc 1 1945 1 view -0
 963              		.cfi_startproc
 964              		@ args = 4, pretend = 0, frame = 0
 965              		@ frame_needed = 0, uses_anonymous_args = 0
1945:rtos/uC-FS/FAT/fs_fat_sfn.c ****     FS_FAT_SEC_NBR   dir_cur_sec;
 966              		.loc 1 1945 1 is_stmt 0 view .LVU350
 967 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 968              	.LCFI14:
 969              		.cfi_def_cfa_offset 36
 970              		.cfi_offset 4, -36
 971              		.cfi_offset 5, -32
 972              		.cfi_offset 6, -28
 973              		.cfi_offset 7, -24
 974              		.cfi_offset 8, -20
 975              		.cfi_offset 9, -16
 976              		.cfi_offset 10, -12
 977              		.cfi_offset 11, -8
 978              		.cfi_offset 14, -4
 979 0004 83B0     		sub	sp, sp, #12
 980              	.LCFI15:
 981              		.cfi_def_cfa_offset 48
 982 0006 8046     		mov	r8, r0
 983 0008 0E46     		mov	r6, r1
 984 000a 1746     		mov	r7, r2
 985 000c 9A46     		mov	r10, r3
 986 000e 0C9C     		ldr	r4, [sp, #48]
1946:rtos/uC-FS/FAT/fs_fat_sfn.c ****     CPU_BOOLEAN      dir_sec_valid;
 987              		.loc 1 1946 5 is_stmt 1 view .LVU351
1947:rtos/uC-FS/FAT/fs_fat_sfn.c ****     FS_SEC_SIZE      dir_end_sec_pos;
 988              		.loc 1 1947 5 view .LVU352
1948:rtos/uC-FS/FAT/fs_fat_sfn.c ****     FS_FAT_DATA     *p_fat_data;
 989              		.loc 1 1948 5 view .LVU353
1949:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 990              		.loc 1 1949 5 view .LVU354
ARM GAS  /tmp/ccpi2Pe2.s 			page 59


1952:rtos/uC-FS/FAT/fs_fat_sfn.c ****     dir_cur_sec   =  p_dir_start_pos->SecNbr;
 991              		.loc 1 1952 5 view .LVU355
1952:rtos/uC-FS/FAT/fs_fat_sfn.c ****     dir_cur_sec   =  p_dir_start_pos->SecNbr;
 992              		.loc 1 1952 19 is_stmt 0 view .LVU356
 993 0010 D0F83490 		ldr	r9, [r0, #52]
 994              	.LVL108:
1953:rtos/uC-FS/FAT/fs_fat_sfn.c ****     dir_sec_valid =  FS_FAT_IS_VALID_SEC(p_fat_data, dir_cur_sec);
 995              		.loc 1 1953 5 is_stmt 1 view .LVU357
1953:rtos/uC-FS/FAT/fs_fat_sfn.c ****     dir_sec_valid =  FS_FAT_IS_VALID_SEC(p_fat_data, dir_cur_sec);
 996              		.loc 1 1953 19 is_stmt 0 view .LVU358
 997 0014 1568     		ldr	r5, [r2]
 998              	.LVL109:
1954:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 999              		.loc 1 1954 5 is_stmt 1 view .LVU359
1954:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 1000              		.loc 1 1954 22 is_stmt 0 view .LVU360
 1001 0016 D9F82820 		ldr	r2, [r9, #40]
 1002              	.LVL110:
1954:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 1003              		.loc 1 1954 19 view .LVU361
 1004 001a AA42     		cmp	r2, r5
 1005 001c 35D8     		bhi	.L87
1954:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 1006              		.loc 1 1954 22 discriminator 1 view .LVU362
 1007 001e D9F80830 		ldr	r3, [r9, #8]
 1008              	.LVL111:
1954:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 1009              		.loc 1 1954 22 discriminator 1 view .LVU363
 1010 0022 1A44     		add	r2, r2, r3
 1011 0024 D9F81030 		ldr	r3, [r9, #16]
 1012 0028 1A44     		add	r2, r2, r3
 1013 002a AA42     		cmp	r2, r5
 1014 002c 4BD2     		bcs	.L88
1954:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 1015              		.loc 1 1954 19 view .LVU364
 1016 002e 4FF0000B 		mov	fp, #0
 1017 0032 2CE0     		b	.L85
 1018              	.LVL112:
 1019              	.L81:
1972:rtos/uC-FS/FAT/fs_fat_sfn.c ****                  p_dir_start_pos->SecPos = dir_end_sec_pos;
 1020              		.loc 1 1972 18 is_stmt 1 view .LVU365
1972:rtos/uC-FS/FAT/fs_fat_sfn.c ****                  p_dir_start_pos->SecPos = dir_end_sec_pos;
 1021              		.loc 1 1972 42 is_stmt 0 view .LVU366
 1022 0034 3D60     		str	r5, [r7]
1973:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 1023              		.loc 1 1973 18 is_stmt 1 view .LVU367
1973:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 1024              		.loc 1 1973 42 is_stmt 0 view .LVU368
 1025 0036 7860     		str	r0, [r7, #4]
1975:rtos/uC-FS/FAT/fs_fat_sfn.c ****                  p_dir_end_pos->SecPos   = p_dir_start_pos->SecPos;
 1026              		.loc 1 1975 18 is_stmt 1 view .LVU369
1975:rtos/uC-FS/FAT/fs_fat_sfn.c ****                  p_dir_end_pos->SecPos   = p_dir_start_pos->SecPos;
 1027              		.loc 1 1975 42 is_stmt 0 view .LVU370
 1028 0038 CAF80050 		str	r5, [r10]
1976:rtos/uC-FS/FAT/fs_fat_sfn.c ****                  return;
 1029              		.loc 1 1976 18 is_stmt 1 view .LVU371
1976:rtos/uC-FS/FAT/fs_fat_sfn.c ****                  return;
ARM GAS  /tmp/ccpi2Pe2.s 			page 60


 1030              		.loc 1 1976 59 is_stmt 0 view .LVU372
 1031 003c 7B68     		ldr	r3, [r7, #4]
1976:rtos/uC-FS/FAT/fs_fat_sfn.c ****                  return;
 1032              		.loc 1 1976 42 view .LVU373
 1033 003e CAF80430 		str	r3, [r10, #4]
1977:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 1034              		.loc 1 1977 18 is_stmt 1 view .LVU374
 1035 0042 3DE0     		b	.L78
 1036              	.L82:
1985:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                  p_buf,
 1037              		.loc 1 1985 18 view .LVU375
1985:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                  p_buf,
 1038              		.loc 1 1985 32 is_stmt 0 view .LVU376
 1039 0044 2346     		mov	r3, r4
 1040 0046 2A46     		mov	r2, r5
 1041 0048 3146     		mov	r1, r6
 1042 004a 4046     		mov	r0, r8
 1043              	.LVL113:
1985:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                  p_buf,
 1044              		.loc 1 1985 32 view .LVU377
 1045 004c FFF7FEFF 		bl	FS_FAT_SecNextGet
 1046              	.LVL114:
 1047 0050 0546     		mov	r5, r0
 1048              	.LVL115:
1990:rtos/uC-FS/FAT/fs_fat_sfn.c ****                      case FS_ERR_NONE:                          /* More secs exist in dir.         
 1049              		.loc 1 1990 18 is_stmt 1 view .LVU378
1990:rtos/uC-FS/FAT/fs_fat_sfn.c ****                      case FS_ERR_NONE:                          /* More secs exist in dir.         
 1050              		.loc 1 1990 26 is_stmt 0 view .LVU379
 1051 0052 2388     		ldrh	r3, [r4]
 1052 0054 40F23652 		movw	r2, #1334
 1053 0058 9342     		cmp	r3, r2
 1054 005a 12D0     		beq	.L83
 1055 005c B3F5A76F 		cmp	r3, #1336
 1056 0060 0FD0     		beq	.L83
 1057 0062 6BBB     		cbnz	r3, .L78
1993:rtos/uC-FS/FAT/fs_fat_sfn.c ****                           break;
 1058              		.loc 1 1993 27 is_stmt 1 view .LVU380
1993:rtos/uC-FS/FAT/fs_fat_sfn.c ****                           break;
 1059              		.loc 1 1993 43 is_stmt 0 view .LVU381
 1060 0064 D9F82830 		ldr	r3, [r9, #40]
1993:rtos/uC-FS/FAT/fs_fat_sfn.c ****                           break;
 1061              		.loc 1 1993 41 view .LVU382
 1062 0068 8342     		cmp	r3, r0
 1063 006a 2FD8     		bhi	.L89
1993:rtos/uC-FS/FAT/fs_fat_sfn.c ****                           break;
 1064              		.loc 1 1993 43 discriminator 1 view .LVU383
 1065 006c D9F80820 		ldr	r2, [r9, #8]
 1066 0070 1344     		add	r3, r3, r2
 1067 0072 D9F81020 		ldr	r2, [r9, #16]
 1068 0076 1344     		add	r3, r3, r2
 1069 0078 8342     		cmp	r3, r0
 1070 007a 08D2     		bcs	.L85
1993:rtos/uC-FS/FAT/fs_fat_sfn.c ****                           break;
 1071              		.loc 1 1993 41 view .LVU384
 1072 007c 4FF0000B 		mov	fp, #0
 1073              	.LVL116:
1993:rtos/uC-FS/FAT/fs_fat_sfn.c ****                           break;
ARM GAS  /tmp/ccpi2Pe2.s 			page 61


 1074              		.loc 1 1993 41 view .LVU385
 1075 0080 05E0     		b	.L85
 1076              	.LVL117:
 1077              	.L83:
1999:rtos/uC-FS/FAT/fs_fat_sfn.c ****                           return;
 1078              		.loc 1 1999 26 is_stmt 1 view .LVU386
1999:rtos/uC-FS/FAT/fs_fat_sfn.c ****                           return;
 1079              		.loc 1 1999 33 is_stmt 0 view .LVU387
 1080 0082 40F23353 		movw	r3, #1331
 1081 0086 2380     		strh	r3, [r4]	@ movhi
2000:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 1082              		.loc 1 2000 27 is_stmt 1 view .LVU388
 1083 0088 1AE0     		b	.L78
 1084              	.LVL118:
 1085              	.L87:
1954:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 1086              		.loc 1 1954 19 is_stmt 0 view .LVU389
 1087 008a 4FF0000B 		mov	fp, #0
 1088              	.LVL119:
 1089              	.L85:
1956:rtos/uC-FS/FAT/fs_fat_sfn.c ****         FSBuf_Set(p_buf,
 1090              		.loc 1 1956 11 is_stmt 1 view .LVU390
 1091 008e BBF1000F 		cmp	fp, #0
 1092 0092 1ED0     		beq	.L91
1957:rtos/uC-FS/FAT/fs_fat_sfn.c ****                   dir_cur_sec,
 1093              		.loc 1 1957 9 view .LVU391
 1094 0094 0094     		str	r4, [sp]
 1095 0096 0123     		movs	r3, #1
 1096 0098 0222     		movs	r2, #2
 1097 009a 2946     		mov	r1, r5
 1098 009c 3046     		mov	r0, r6
 1099 009e FFF7FEFF 		bl	FSBuf_Set
 1100              	.LVL120:
1962:rtos/uC-FS/FAT/fs_fat_sfn.c ****             return;
 1101              		.loc 1 1962 9 view .LVU392
1962:rtos/uC-FS/FAT/fs_fat_sfn.c ****             return;
 1102              		.loc 1 1962 13 is_stmt 0 view .LVU393
 1103 00a2 2388     		ldrh	r3, [r4]
1962:rtos/uC-FS/FAT/fs_fat_sfn.c ****             return;
 1104              		.loc 1 1962 12 view .LVU394
 1105 00a4 63B9     		cbnz	r3, .L78
1966:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                     p_fat_data->SecSize,
 1106              		.loc 1 1966 9 is_stmt 1 view .LVU395
1966:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                     p_fat_data->SecSize,
 1107              		.loc 1 1966 27 is_stmt 0 view .LVU396
 1108 00a6 2246     		mov	r2, r4
 1109 00a8 D9F83410 		ldr	r1, [r9, #52]
 1110 00ac 3069     		ldr	r0, [r6, #16]
 1111 00ae FFF7FEFF 		bl	FS_FAT_SFN_LabelFindInSec
 1112              	.LVL121:
1970:rtos/uC-FS/FAT/fs_fat_sfn.c ****             case FS_ERR_NONE:                                   /* Entry with matching name found. 
 1113              		.loc 1 1970 9 is_stmt 1 view .LVU397
1970:rtos/uC-FS/FAT/fs_fat_sfn.c ****             case FS_ERR_NONE:                                   /* Entry with matching name found. 
 1114              		.loc 1 1970 17 is_stmt 0 view .LVU398
 1115 00b2 2388     		ldrh	r3, [r4]
1970:rtos/uC-FS/FAT/fs_fat_sfn.c ****             case FS_ERR_NONE:                                   /* Entry with matching name found. 
 1116              		.loc 1 1970 9 view .LVU399
ARM GAS  /tmp/ccpi2Pe2.s 			page 62


 1117 00b4 002B     		cmp	r3, #0
 1118 00b6 BDD0     		beq	.L81
 1119 00b8 40F23452 		movw	r2, #1332
 1120 00bc 9342     		cmp	r3, r2
 1121 00be C1D0     		beq	.L82
 1122              	.LVL122:
 1123              	.L78:
2024:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 1124              		.loc 1 2024 1 view .LVU400
 1125 00c0 03B0     		add	sp, sp, #12
 1126              	.LCFI16:
 1127              		.cfi_remember_state
 1128              		.cfi_def_cfa_offset 36
 1129              		@ sp needed
 1130 00c2 BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 1131              	.LVL123:
 1132              	.L88:
 1133              	.LCFI17:
 1134              		.cfi_restore_state
1954:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 1135              		.loc 1 1954 19 view .LVU401
 1136 00c6 4FF0010B 		mov	fp, #1
 1137 00ca E0E7     		b	.L85
 1138              	.LVL124:
 1139              	.L89:
1993:rtos/uC-FS/FAT/fs_fat_sfn.c ****                           break;
 1140              		.loc 1 1993 41 view .LVU402
 1141 00cc 4FF0000B 		mov	fp, #0
 1142              	.LVL125:
1993:rtos/uC-FS/FAT/fs_fat_sfn.c ****                           break;
 1143              		.loc 1 1993 41 view .LVU403
 1144 00d0 DDE7     		b	.L85
 1145              	.LVL126:
 1146              	.L91:
2022:rtos/uC-FS/FAT/fs_fat_sfn.c ****    *p_err = FS_ERR_ENTRY_CORRUPT;
 1147              		.loc 1 2022 87 is_stmt 1 view .LVU404
2023:rtos/uC-FS/FAT/fs_fat_sfn.c **** }
 1148              		.loc 1 2023 4 view .LVU405
2023:rtos/uC-FS/FAT/fs_fat_sfn.c **** }
 1149              		.loc 1 2023 11 is_stmt 0 view .LVU406
 1150 00d2 40F2BF23 		movw	r3, #703
 1151 00d6 2380     		strh	r3, [r4]	@ movhi
 1152 00d8 F2E7     		b	.L78
 1153              		.cfi_endproc
 1154              	.LFE15:
 1156              		.section	.text.FS_FAT_SFN_DirEntryDel,"ax",%progbits
 1157              		.align	1
 1158              		.syntax unified
 1159              		.thumb
 1160              		.thumb_func
 1161              		.fpu fpv4-sp-d16
 1163              	FS_FAT_SFN_DirEntryDel:
 1164              	.LVL127:
 1165              	.LFB8:
1243:rtos/uC-FS/FAT/fs_fat_sfn.c ****     CPU_INT08U   *p_dir_entry;
 1166              		.loc 1 1243 1 is_stmt 1 view -0
 1167              		.cfi_startproc
ARM GAS  /tmp/ccpi2Pe2.s 			page 63


 1168              		@ args = 4, pretend = 0, frame = 0
 1169              		@ frame_needed = 0, uses_anonymous_args = 0
1243:rtos/uC-FS/FAT/fs_fat_sfn.c ****     CPU_INT08U   *p_dir_entry;
 1170              		.loc 1 1243 1 is_stmt 0 view .LVU408
 1171 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 1172              	.LCFI18:
 1173              		.cfi_def_cfa_offset 20
 1174              		.cfi_offset 4, -20
 1175              		.cfi_offset 5, -16
 1176              		.cfi_offset 6, -12
 1177              		.cfi_offset 7, -8
 1178              		.cfi_offset 14, -4
 1179 0002 83B0     		sub	sp, sp, #12
 1180              	.LCFI19:
 1181              		.cfi_def_cfa_offset 32
 1182 0004 0C46     		mov	r4, r1
 1183 0006 1D46     		mov	r5, r3
 1184 0008 089E     		ldr	r6, [sp, #32]
1244:rtos/uC-FS/FAT/fs_fat_sfn.c **** #if (FS_FAT_CFG_JOURNAL_EN == DEF_ENABLED)
 1185              		.loc 1 1244 5 is_stmt 1 view .LVU409
1250:rtos/uC-FS/FAT/fs_fat_sfn.c ****     (void)p_vol;
 1186              		.loc 1 1250 5 view .LVU410
1251:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 1187              		.loc 1 1251 5 view .LVU411
1269:rtos/uC-FS/FAT/fs_fat_sfn.c ****               p_dir_end_pos->SecNbr,
 1188              		.loc 1 1269 5 view .LVU412
 1189 000a 0096     		str	r6, [sp]
 1190 000c 0123     		movs	r3, #1
 1191              	.LVL128:
1269:rtos/uC-FS/FAT/fs_fat_sfn.c ****               p_dir_end_pos->SecNbr,
 1192              		.loc 1 1269 5 is_stmt 0 view .LVU413
 1193 000e 0222     		movs	r2, #2
 1194              	.LVL129:
1269:rtos/uC-FS/FAT/fs_fat_sfn.c ****               p_dir_end_pos->SecNbr,
 1195              		.loc 1 1269 5 view .LVU414
 1196 0010 2968     		ldr	r1, [r5]
 1197              	.LVL130:
1269:rtos/uC-FS/FAT/fs_fat_sfn.c ****               p_dir_end_pos->SecNbr,
 1198              		.loc 1 1269 5 view .LVU415
 1199 0012 2046     		mov	r0, r4
 1200              	.LVL131:
1269:rtos/uC-FS/FAT/fs_fat_sfn.c ****               p_dir_end_pos->SecNbr,
 1201              		.loc 1 1269 5 view .LVU416
 1202 0014 FFF7FEFF 		bl	FSBuf_Set
 1203              	.LVL132:
1274:rtos/uC-FS/FAT/fs_fat_sfn.c ****         return;
 1204              		.loc 1 1274 5 is_stmt 1 view .LVU417
1274:rtos/uC-FS/FAT/fs_fat_sfn.c ****         return;
 1205              		.loc 1 1274 9 is_stmt 0 view .LVU418
 1206 0018 3388     		ldrh	r3, [r6]
1274:rtos/uC-FS/FAT/fs_fat_sfn.c ****         return;
 1207              		.loc 1 1274 8 view .LVU419
 1208 001a 0BB1     		cbz	r3, .L95
 1209              	.LVL133:
 1210              	.L92:
1292:rtos/uC-FS/FAT/fs_fat_sfn.c **** #endif
 1211              		.loc 1 1292 1 view .LVU420
ARM GAS  /tmp/ccpi2Pe2.s 			page 64


 1212 001c 03B0     		add	sp, sp, #12
 1213              	.LCFI20:
 1214              		.cfi_remember_state
 1215              		.cfi_def_cfa_offset 20
 1216              		@ sp needed
 1217 001e F0BD     		pop	{r4, r5, r6, r7, pc}
 1218              	.LVL134:
 1219              	.L95:
 1220              	.LCFI21:
 1221              		.cfi_restore_state
1278:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 1222              		.loc 1 1278 5 is_stmt 1 view .LVU421
1278:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 1223              		.loc 1 1278 38 is_stmt 0 view .LVU422
 1224 0020 2769     		ldr	r7, [r4, #16]
1278:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 1225              		.loc 1 1278 63 view .LVU423
 1226 0022 6D68     		ldr	r5, [r5, #4]
 1227              	.LVL135:
1283:rtos/uC-FS/FAT/fs_fat_sfn.c ****             (CPU_SIZE_T)FS_FAT_SIZE_DIR_ENTRY);
 1228              		.loc 1 1283 5 is_stmt 1 view .LVU424
 1229 0024 2021     		movs	r1, #32
 1230 0026 7819     		adds	r0, r7, r5
 1231              	.LVL136:
1283:rtos/uC-FS/FAT/fs_fat_sfn.c ****             (CPU_SIZE_T)FS_FAT_SIZE_DIR_ENTRY);
 1232              		.loc 1 1283 5 is_stmt 0 view .LVU425
 1233 0028 FFF7FEFF 		bl	Mem_Clr
 1234              	.LVL137:
1287:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 1235              		.loc 1 1287 5 is_stmt 1 view .LVU426
1287:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 1236              		.loc 1 1287 20 is_stmt 0 view .LVU427
 1237 002c E523     		movs	r3, #229
 1238 002e 7B55     		strb	r3, [r7, r5]
1291:rtos/uC-FS/FAT/fs_fat_sfn.c **** }
 1239              		.loc 1 1291 5 is_stmt 1 view .LVU428
 1240 0030 3146     		mov	r1, r6
 1241 0032 2046     		mov	r0, r4
 1242 0034 FFF7FEFF 		bl	FSBuf_MarkDirty
 1243              	.LVL138:
 1244 0038 F0E7     		b	.L92
 1245              		.cfi_endproc
 1246              	.LFE8:
 1248              		.section	.text.FS_FAT_SFN_DirEntryPlace,"ax",%progbits
 1249              		.align	1
 1250              		.syntax unified
 1251              		.thumb
 1252              		.thumb_func
 1253              		.fpu fpv4-sp-d16
 1255              	FS_FAT_SFN_DirEntryPlace:
 1256              	.LVL139:
 1257              	.LFB13:
1763:rtos/uC-FS/FAT/fs_fat_sfn.c ****     FS_FAT_SEC_NBR         dir_cur_sec;
 1258              		.loc 1 1763 1 view -0
 1259              		.cfi_startproc
 1260              		@ args = 4, pretend = 0, frame = 0
 1261              		@ frame_needed = 0, uses_anonymous_args = 0
ARM GAS  /tmp/ccpi2Pe2.s 			page 65


1763:rtos/uC-FS/FAT/fs_fat_sfn.c ****     FS_FAT_SEC_NBR         dir_cur_sec;
 1262              		.loc 1 1763 1 is_stmt 0 view .LVU430
 1263 0000 2DE9F047 		push	{r4, r5, r6, r7, r8, r9, r10, lr}
 1264              	.LCFI22:
 1265              		.cfi_def_cfa_offset 32
 1266              		.cfi_offset 4, -32
 1267              		.cfi_offset 5, -28
 1268              		.cfi_offset 6, -24
 1269              		.cfi_offset 7, -20
 1270              		.cfi_offset 8, -16
 1271              		.cfi_offset 9, -12
 1272              		.cfi_offset 10, -8
 1273              		.cfi_offset 14, -4
 1274 0004 82B0     		sub	sp, sp, #8
 1275              	.LCFI23:
 1276              		.cfi_def_cfa_offset 40
 1277 0006 8046     		mov	r8, r0
 1278 0008 0F46     		mov	r7, r1
 1279 000a 1446     		mov	r4, r2
 1280 000c 1E46     		mov	r6, r3
 1281 000e 0A9D     		ldr	r5, [sp, #40]
1764:rtos/uC-FS/FAT/fs_fat_sfn.c ****     FS_SEC_SIZE            dir_end_sec_pos;
 1282              		.loc 1 1764 5 is_stmt 1 view .LVU431
1765:rtos/uC-FS/FAT/fs_fat_sfn.c ****     CPU_BOOLEAN            dir_sec_valid;
 1283              		.loc 1 1765 5 view .LVU432
1766:rtos/uC-FS/FAT/fs_fat_sfn.c ****     FS_FAT_DATA           *p_fat_data;
 1284              		.loc 1 1766 5 view .LVU433
1767:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 1285              		.loc 1 1767 5 view .LVU434
1770:rtos/uC-FS/FAT/fs_fat_sfn.c ****     p_dir_end_pos->SecPos =  0u;
 1286              		.loc 1 1770 5 view .LVU435
1770:rtos/uC-FS/FAT/fs_fat_sfn.c ****     p_dir_end_pos->SecPos =  0u;
 1287              		.loc 1 1770 27 is_stmt 0 view .LVU436
 1288 0010 0023     		movs	r3, #0
 1289              	.LVL140:
1770:rtos/uC-FS/FAT/fs_fat_sfn.c ****     p_dir_end_pos->SecPos =  0u;
 1290              		.loc 1 1770 27 view .LVU437
 1291 0012 3360     		str	r3, [r6]
1771:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 1292              		.loc 1 1771 5 is_stmt 1 view .LVU438
1771:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 1293              		.loc 1 1771 27 is_stmt 0 view .LVU439
 1294 0014 7360     		str	r3, [r6, #4]
1773:rtos/uC-FS/FAT/fs_fat_sfn.c ****     dir_cur_sec           =  dir_start_sec;
 1295              		.loc 1 1773 5 is_stmt 1 view .LVU440
1773:rtos/uC-FS/FAT/fs_fat_sfn.c ****     dir_cur_sec           =  dir_start_sec;
 1296              		.loc 1 1773 27 is_stmt 0 view .LVU441
 1297 0016 D0F83490 		ldr	r9, [r0, #52]
 1298              	.LVL141:
1774:rtos/uC-FS/FAT/fs_fat_sfn.c ****     dir_sec_valid         =  FS_FAT_IS_VALID_SEC(p_fat_data, dir_cur_sec);
 1299              		.loc 1 1774 5 is_stmt 1 view .LVU442
1775:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 1300              		.loc 1 1775 5 view .LVU443
1775:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 1301              		.loc 1 1775 30 is_stmt 0 view .LVU444
 1302 001a D9F82830 		ldr	r3, [r9, #40]
1775:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
ARM GAS  /tmp/ccpi2Pe2.s 			page 66


 1303              		.loc 1 1775 27 view .LVU445
 1304 001e 9342     		cmp	r3, r2
 1305 0020 31D8     		bhi	.L105
1775:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 1306              		.loc 1 1775 30 discriminator 1 view .LVU446
 1307 0022 D9F80820 		ldr	r2, [r9, #8]
 1308              	.LVL142:
1775:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 1309              		.loc 1 1775 30 discriminator 1 view .LVU447
 1310 0026 1344     		add	r3, r3, r2
 1311 0028 D9F81020 		ldr	r2, [r9, #16]
 1312 002c 1344     		add	r3, r3, r2
 1313 002e A342     		cmp	r3, r4
 1314 0030 47D2     		bcs	.L106
1775:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 1315              		.loc 1 1775 27 view .LVU448
 1316 0032 4FF0000A 		mov	r10, #0
 1317 0036 28E0     		b	.L103
 1318              	.LVL143:
 1319              	.L99:
1800:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 1320              		.loc 1 1800 158 is_stmt 1 view .LVU449
1802:rtos/uC-FS/FAT/fs_fat_sfn.c ****                  p_dir_end_pos->SecPos = dir_end_sec_pos;
 1321              		.loc 1 1802 18 view .LVU450
1802:rtos/uC-FS/FAT/fs_fat_sfn.c ****                  p_dir_end_pos->SecPos = dir_end_sec_pos;
 1322              		.loc 1 1802 40 is_stmt 0 view .LVU451
 1323 0038 3460     		str	r4, [r6]
1803:rtos/uC-FS/FAT/fs_fat_sfn.c ****                  return;
 1324              		.loc 1 1803 18 is_stmt 1 view .LVU452
1803:rtos/uC-FS/FAT/fs_fat_sfn.c ****                  return;
 1325              		.loc 1 1803 40 is_stmt 0 view .LVU453
 1326 003a 7060     		str	r0, [r6, #4]
1804:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 1327              		.loc 1 1804 18 is_stmt 1 view .LVU454
 1328 003c 3EE0     		b	.L96
 1329              	.L100:
1809:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                       p_buf,
 1330              		.loc 1 1809 18 view .LVU455
1809:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                       p_buf,
 1331              		.loc 1 1809 32 is_stmt 0 view .LVU456
 1332 003e 0095     		str	r5, [sp]
 1333 0040 0123     		movs	r3, #1
 1334 0042 2246     		mov	r2, r4
 1335 0044 3946     		mov	r1, r7
 1336 0046 4046     		mov	r0, r8
 1337              	.LVL144:
1809:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                       p_buf,
 1338              		.loc 1 1809 32 view .LVU457
 1339 0048 FFF7FEFF 		bl	FS_FAT_SecNextGetAlloc
 1340              	.LVL145:
 1341 004c 0446     		mov	r4, r0
 1342              	.LVL146:
1814:rtos/uC-FS/FAT/fs_fat_sfn.c ****                      case FS_ERR_NONE:
 1343              		.loc 1 1814 18 is_stmt 1 view .LVU458
1814:rtos/uC-FS/FAT/fs_fat_sfn.c ****                      case FS_ERR_NONE:
 1344              		.loc 1 1814 26 is_stmt 0 view .LVU459
 1345 004e 2B88     		ldrh	r3, [r5]
ARM GAS  /tmp/ccpi2Pe2.s 			page 67


 1346 0050 40F23652 		movw	r2, #1334
 1347 0054 9342     		cmp	r3, r2
 1348 0056 12D0     		beq	.L101
 1349 0058 B3F5A76F 		cmp	r3, #1336
 1350 005c 0FD0     		beq	.L101
 1351 005e 6BBB     		cbnz	r3, .L96
1817:rtos/uC-FS/FAT/fs_fat_sfn.c ****                           break;
 1352              		.loc 1 1817 27 is_stmt 1 view .LVU460
1817:rtos/uC-FS/FAT/fs_fat_sfn.c ****                           break;
 1353              		.loc 1 1817 43 is_stmt 0 view .LVU461
 1354 0060 D9F82830 		ldr	r3, [r9, #40]
1817:rtos/uC-FS/FAT/fs_fat_sfn.c ****                           break;
 1355              		.loc 1 1817 41 view .LVU462
 1356 0064 8342     		cmp	r3, r0
 1357 0066 2FD8     		bhi	.L107
1817:rtos/uC-FS/FAT/fs_fat_sfn.c ****                           break;
 1358              		.loc 1 1817 43 discriminator 1 view .LVU463
 1359 0068 D9F80820 		ldr	r2, [r9, #8]
 1360 006c 1344     		add	r3, r3, r2
 1361 006e D9F81020 		ldr	r2, [r9, #16]
 1362 0072 1344     		add	r3, r3, r2
 1363 0074 8342     		cmp	r3, r0
 1364 0076 08D2     		bcs	.L103
1817:rtos/uC-FS/FAT/fs_fat_sfn.c ****                           break;
 1365              		.loc 1 1817 41 view .LVU464
 1366 0078 4FF0000A 		mov	r10, #0
 1367              	.LVL147:
1817:rtos/uC-FS/FAT/fs_fat_sfn.c ****                           break;
 1368              		.loc 1 1817 41 view .LVU465
 1369 007c 05E0     		b	.L103
 1370              	.LVL148:
 1371              	.L101:
1826:rtos/uC-FS/FAT/fs_fat_sfn.c ****                           return;
 1372              		.loc 1 1826 26 is_stmt 1 view .LVU466
1826:rtos/uC-FS/FAT/fs_fat_sfn.c ****                           return;
 1373              		.loc 1 1826 33 is_stmt 0 view .LVU467
 1374 007e 40F2BF23 		movw	r3, #703
 1375 0082 2B80     		strh	r3, [r5]	@ movhi
1827:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 1376              		.loc 1 1827 27 is_stmt 1 view .LVU468
 1377 0084 1AE0     		b	.L96
 1378              	.LVL149:
 1379              	.L105:
1775:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 1380              		.loc 1 1775 27 is_stmt 0 view .LVU469
 1381 0086 4FF0000A 		mov	r10, #0
 1382              	.LVL150:
 1383              	.L103:
1778:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 1384              		.loc 1 1778 11 is_stmt 1 view .LVU470
 1385 008a BAF1000F 		cmp	r10, #0
 1386 008e 1ED0     		beq	.L109
1781:rtos/uC-FS/FAT/fs_fat_sfn.c ****                   dir_cur_sec,
 1387              		.loc 1 1781 9 view .LVU471
 1388 0090 0095     		str	r5, [sp]
 1389 0092 0123     		movs	r3, #1
 1390 0094 0222     		movs	r2, #2
ARM GAS  /tmp/ccpi2Pe2.s 			page 68


 1391 0096 2146     		mov	r1, r4
 1392 0098 3846     		mov	r0, r7
 1393 009a FFF7FEFF 		bl	FSBuf_Set
 1394              	.LVL151:
1786:rtos/uC-FS/FAT/fs_fat_sfn.c ****             return;
 1395              		.loc 1 1786 9 view .LVU472
1786:rtos/uC-FS/FAT/fs_fat_sfn.c ****             return;
 1396              		.loc 1 1786 13 is_stmt 0 view .LVU473
 1397 009e 2B88     		ldrh	r3, [r5]
1786:rtos/uC-FS/FAT/fs_fat_sfn.c ****             return;
 1398              		.loc 1 1786 12 view .LVU474
 1399 00a0 63B9     		cbnz	r3, .L96
1792:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                         p_fat_data->SecSize,
 1400              		.loc 1 1792 9 is_stmt 1 view .LVU475
1792:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                         p_fat_data->SecSize,
 1401              		.loc 1 1792 27 is_stmt 0 view .LVU476
 1402 00a2 2A46     		mov	r2, r5
 1403 00a4 D9F83410 		ldr	r1, [r9, #52]
 1404 00a8 3869     		ldr	r0, [r7, #16]
 1405 00aa FFF7FEFF 		bl	FS_FAT_SFN_DirEntryPlaceInSec
 1406              	.LVL152:
1798:rtos/uC-FS/FAT/fs_fat_sfn.c ****             case FS_ERR_NONE:                                   /* ---------------- PLACE ENTRY IN 
 1407              		.loc 1 1798 9 is_stmt 1 view .LVU477
1798:rtos/uC-FS/FAT/fs_fat_sfn.c ****             case FS_ERR_NONE:                                   /* ---------------- PLACE ENTRY IN 
 1408              		.loc 1 1798 17 is_stmt 0 view .LVU478
 1409 00ae 2B88     		ldrh	r3, [r5]
1798:rtos/uC-FS/FAT/fs_fat_sfn.c ****             case FS_ERR_NONE:                                   /* ---------------- PLACE ENTRY IN 
 1410              		.loc 1 1798 9 view .LVU479
 1411 00b0 002B     		cmp	r3, #0
 1412 00b2 C1D0     		beq	.L99
 1413 00b4 40F23452 		movw	r2, #1332
 1414 00b8 9342     		cmp	r3, r2
 1415 00ba C0D0     		beq	.L100
 1416              	.LVL153:
 1417              	.L96:
1850:rtos/uC-FS/FAT/fs_fat_sfn.c **** #endif
 1418              		.loc 1 1850 1 view .LVU480
 1419 00bc 02B0     		add	sp, sp, #8
 1420              	.LCFI24:
 1421              		.cfi_remember_state
 1422              		.cfi_def_cfa_offset 32
 1423              		@ sp needed
 1424 00be BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, r10, pc}
 1425              	.LVL154:
 1426              	.L106:
 1427              	.LCFI25:
 1428              		.cfi_restore_state
1775:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 1429              		.loc 1 1775 27 view .LVU481
 1430 00c2 4FF0010A 		mov	r10, #1
 1431 00c6 E0E7     		b	.L103
 1432              	.LVL155:
 1433              	.L107:
1817:rtos/uC-FS/FAT/fs_fat_sfn.c ****                           break;
 1434              		.loc 1 1817 41 view .LVU482
 1435 00c8 4FF0000A 		mov	r10, #0
 1436              	.LVL156:
ARM GAS  /tmp/ccpi2Pe2.s 			page 69


1817:rtos/uC-FS/FAT/fs_fat_sfn.c ****                           break;
 1437              		.loc 1 1817 41 view .LVU483
 1438 00cc DDE7     		b	.L103
 1439              	.LVL157:
 1440              	.L109:
1848:rtos/uC-FS/FAT/fs_fat_sfn.c ****    *p_err = FS_ERR_ENTRY_CORRUPT;
 1441              		.loc 1 1848 92 is_stmt 1 view .LVU484
1849:rtos/uC-FS/FAT/fs_fat_sfn.c **** }
 1442              		.loc 1 1849 4 view .LVU485
1849:rtos/uC-FS/FAT/fs_fat_sfn.c **** }
 1443              		.loc 1 1849 11 is_stmt 0 view .LVU486
 1444 00ce 40F2BF23 		movw	r3, #703
 1445 00d2 2B80     		strh	r3, [r5]	@ movhi
 1446 00d4 F2E7     		b	.L96
 1447              		.cfi_endproc
 1448              	.LFE13:
 1450              		.section	.text.FS_FAT_SFN_Chk,"ax",%progbits
 1451              		.align	1
 1452              		.global	FS_FAT_SFN_Chk
 1453              		.syntax unified
 1454              		.thumb
 1455              		.thumb_func
 1456              		.fpu fpv4-sp-d16
 1458              	FS_FAT_SFN_Chk:
 1459              	.LVL158:
 1460              	.LFB0:
 259:rtos/uC-FS/FAT/fs_fat_sfn.c ****     CPU_BOOLEAN       has_period;
 1461              		.loc 1 259 1 is_stmt 1 view -0
 1462              		.cfi_startproc
 1463              		@ args = 0, pretend = 0, frame = 0
 1464              		@ frame_needed = 0, uses_anonymous_args = 0
 1465              		@ link register save eliminated.
 260:rtos/uC-FS/FAT/fs_fat_sfn.c ****     CPU_BOOLEAN       is_legal;
 1466              		.loc 1 260 5 view .LVU488
 261:rtos/uC-FS/FAT/fs_fat_sfn.c ****     FS_FILE_NAME_LEN  len;
 1467              		.loc 1 261 5 view .LVU489
 262:rtos/uC-FS/FAT/fs_fat_sfn.c ****     CPU_CHAR          name_char;
 1468              		.loc 1 262 5 view .LVU490
 263:rtos/uC-FS/FAT/fs_fat_sfn.c ****     FS_FILE_NAME_LEN  name_len;
 1469              		.loc 1 263 5 view .LVU491
 264:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 1470              		.loc 1 264 5 view .LVU492
 267:rtos/uC-FS/FAT/fs_fat_sfn.c ****     has_period = DEF_NO;
 1471              		.loc 1 267 5 view .LVU493
 268:rtos/uC-FS/FAT/fs_fat_sfn.c ****     len        = 0u;
 1472              		.loc 1 268 5 view .LVU494
 269:rtos/uC-FS/FAT/fs_fat_sfn.c ****     name_len   = 0u;
 1473              		.loc 1 269 5 view .LVU495
 270:rtos/uC-FS/FAT/fs_fat_sfn.c ****    *p_name_len = 0u;
 1474              		.loc 1 270 5 view .LVU496
 271:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 1475              		.loc 1 271 4 view .LVU497
 271:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 1476              		.loc 1 271 16 is_stmt 0 view .LVU498
 1477 0000 0023     		movs	r3, #0
 1478 0002 0B80     		strh	r3, [r1]	@ movhi
 275:rtos/uC-FS/FAT/fs_fat_sfn.c ****     switch (name_char) {                                        /* Rtn err if first char is '.', ' 
ARM GAS  /tmp/ccpi2Pe2.s 			page 70


 1479              		.loc 1 275 5 is_stmt 1 view .LVU499
 275:rtos/uC-FS/FAT/fs_fat_sfn.c ****     switch (name_char) {                                        /* Rtn err if first char is '.', ' 
 1480              		.loc 1 275 15 is_stmt 0 view .LVU500
 1481 0004 0378     		ldrb	r3, [r0]	@ zero_extendqisi2
 1482              	.LVL159:
 276:rtos/uC-FS/FAT/fs_fat_sfn.c ****         case ASCII_CHAR_FULL_STOP:
 1483              		.loc 1 276 5 is_stmt 1 view .LVU501
 1484 0006 2E2B     		cmp	r3, #46
 1485 0008 62D0     		beq	.L132
 259:rtos/uC-FS/FAT/fs_fat_sfn.c ****     CPU_BOOLEAN       has_period;
 1486              		.loc 1 259 1 is_stmt 0 view .LVU502
 1487 000a F0B4     		push	{r4, r5, r6, r7}
 1488              	.LCFI26:
 1489              		.cfi_def_cfa_offset 16
 1490              		.cfi_offset 4, -16
 1491              		.cfi_offset 5, -12
 1492              		.cfi_offset 6, -8
 1493              		.cfi_offset 7, -4
 276:rtos/uC-FS/FAT/fs_fat_sfn.c ****         case ASCII_CHAR_FULL_STOP:
 1494              		.loc 1 276 5 view .LVU503
 1495 000c 07D8     		bhi	.L112
 1496 000e 6BB1     		cbz	r3, .L111
 1497 0010 202B     		cmp	r3, #32
 1498 0012 0BD0     		beq	.L111
 1499 0014 0024     		movs	r4, #0
 1500 0016 A446     		mov	ip, r4
 1501 0018 0126     		movs	r6, #1
 1502 001a 2746     		mov	r7, r4
 1503 001c 30E0     		b	.L121
 1504              	.L112:
 1505 001e 5C2B     		cmp	r3, #92
 1506 0020 04D0     		beq	.L111
 1507 0022 0024     		movs	r4, #0
 1508 0024 A446     		mov	ip, r4
 1509 0026 0126     		movs	r6, #1
 1510 0028 2746     		mov	r7, r4
 1511 002a 29E0     		b	.L121
 1512              	.L111:
 284:rtos/uC-FS/FAT/fs_fat_sfn.c ****              return;
 1513              		.loc 1 284 13 is_stmt 1 view .LVU504
 284:rtos/uC-FS/FAT/fs_fat_sfn.c ****              return;
 1514              		.loc 1 284 20 is_stmt 0 view .LVU505
 1515 002c 40F28733 		movw	r3, #903
 1516              	.LVL160:
 284:rtos/uC-FS/FAT/fs_fat_sfn.c ****              return;
 1517              		.loc 1 284 20 view .LVU506
 1518 0030 1380     		strh	r3, [r2]	@ movhi
 1519              	.LVL161:
 285:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 1520              		.loc 1 285 14 is_stmt 1 view .LVU507
 1521              	.L110:
 340:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 1522              		.loc 1 340 1 is_stmt 0 view .LVU508
 1523 0032 F0BC     		pop	{r4, r5, r6, r7}
 1524              	.LCFI27:
 1525              		.cfi_remember_state
 1526              		.cfi_restore 7
ARM GAS  /tmp/ccpi2Pe2.s 			page 71


 1527              		.cfi_restore 6
 1528              		.cfi_restore 5
 1529              		.cfi_restore 4
 1530              		.cfi_def_cfa_offset 0
 1531 0034 7047     		bx	lr
 1532              	.LVL162:
 1533              	.L135:
 1534              	.LCFI28:
 1535              		.cfi_restore_state
 297:rtos/uC-FS/FAT/fs_fat_sfn.c ****                 has_period  = DEF_YES;
 1536              		.loc 1 297 13 is_stmt 1 view .LVU509
 297:rtos/uC-FS/FAT/fs_fat_sfn.c ****                 has_period  = DEF_YES;
 1537              		.loc 1 297 16 is_stmt 0 view .LVU510
 1538 0036 F7B9     		cbnz	r7, .L126
 298:rtos/uC-FS/FAT/fs_fat_sfn.c ****                 len         = 0u;
 1539              		.loc 1 298 17 is_stmt 1 view .LVU511
 1540              	.LVL163:
 299:rtos/uC-FS/FAT/fs_fat_sfn.c ****                 name_len++;
 1541              		.loc 1 299 17 view .LVU512
 300:rtos/uC-FS/FAT/fs_fat_sfn.c ****             } else {                                            /* If 2nd period ... illegal name. 
 1542              		.loc 1 300 17 view .LVU513
 300:rtos/uC-FS/FAT/fs_fat_sfn.c ****             } else {                                            /* If 2nd period ... illegal name. 
 1543              		.loc 1 300 25 is_stmt 0 view .LVU514
 1544 0038 0134     		adds	r4, r4, #1
 1545              	.LVL164:
 300:rtos/uC-FS/FAT/fs_fat_sfn.c ****             } else {                                            /* If 2nd period ... illegal name. 
 1546              		.loc 1 300 25 view .LVU515
 1547 003a A4B2     		uxth	r4, r4
 1548              	.LVL165:
 298:rtos/uC-FS/FAT/fs_fat_sfn.c ****                 len         = 0u;
 1549              		.loc 1 298 29 view .LVU516
 1550 003c 3746     		mov	r7, r6
 299:rtos/uC-FS/FAT/fs_fat_sfn.c ****                 name_len++;
 1551              		.loc 1 299 29 view .LVU517
 1552 003e 4FF0000C 		mov	ip, #0
 1553 0042 1BE0     		b	.L116
 1554              	.LVL166:
 1555              	.L136:
 308:rtos/uC-FS/FAT/fs_fat_sfn.c ****                 ((has_period == DEF_NO ) && (len < FS_FAT_SFN_NAME_MAX_NBR_CHAR))) {
 1556              		.loc 1 308 42 discriminator 1 view .LVU518
 1557 0044 BCF1020F 		cmp	ip, #2
 1558 0048 28D9     		bls	.L118
 1559 004a 22E0     		b	.L117
 1560              	.L119:
 310:rtos/uC-FS/FAT/fs_fat_sfn.c ****                 if (is_legal == DEF_YES) {
 1561              		.loc 1 310 28 discriminator 6 view .LVU519
 1562 004c A3F14005 		sub	r5, r3, #64
 1563 0050 EDB2     		uxtb	r5, r5
 1564 0052 1A2D     		cmp	r5, #26
 1565 0054 28D9     		bls	.L120
 310:rtos/uC-FS/FAT/fs_fat_sfn.c ****                 if (is_legal == DEF_YES) {
 1566              		.loc 1 310 28 discriminator 8 view .LVU520
 1567 0056 A3F13005 		sub	r5, r3, #48
 1568 005a EDB2     		uxtb	r5, r5
 1569 005c 092D     		cmp	r5, #9
 1570 005e 23D9     		bls	.L120
 310:rtos/uC-FS/FAT/fs_fat_sfn.c ****                 if (is_legal == DEF_YES) {
ARM GAS  /tmp/ccpi2Pe2.s 			page 72


 1571              		.loc 1 310 28 discriminator 10 view .LVU521
 1572 0060 2D2B     		cmp	r3, #45
 1573 0062 21D0     		beq	.L120
 310:rtos/uC-FS/FAT/fs_fat_sfn.c ****                 if (is_legal == DEF_YES) {
 1574              		.loc 1 310 28 discriminator 12 view .LVU522
 1575 0064 A3F12105 		sub	r5, r3, #33
 1576 0068 EDB2     		uxtb	r5, r5
 1577 006a 082D     		cmp	r5, #8
 1578 006c 25D8     		bhi	.L129
 310:rtos/uC-FS/FAT/fs_fat_sfn.c ****                 if (is_legal == DEF_YES) {
 1579              		.loc 1 310 28 discriminator 13 view .LVU523
 1580 006e 222B     		cmp	r3, #34
 1581 0070 1AD1     		bne	.L120
 318:rtos/uC-FS/FAT/fs_fat_sfn.c ****                 }
 1582              		.loc 1 318 30 view .LVU524
 1583 0072 0026     		movs	r6, #0
 1584              	.LVL167:
 318:rtos/uC-FS/FAT/fs_fat_sfn.c ****                 }
 1585              		.loc 1 318 30 view .LVU525
 1586 0074 02E0     		b	.L116
 1587              	.LVL168:
 1588              	.L126:
 305:rtos/uC-FS/FAT/fs_fat_sfn.c ****             }
 1589              		.loc 1 305 26 view .LVU526
 1590 0076 0026     		movs	r6, #0
 1591              	.LVL169:
 305:rtos/uC-FS/FAT/fs_fat_sfn.c ****             }
 1592              		.loc 1 305 26 view .LVU527
 1593 0078 00E0     		b	.L116
 1594              	.LVL170:
 1595              	.L127:
 324:rtos/uC-FS/FAT/fs_fat_sfn.c ****             }
 1596              		.loc 1 324 26 view .LVU528
 1597 007a 0026     		movs	r6, #0
 1598              	.LVL171:
 1599              	.L116:
 327:rtos/uC-FS/FAT/fs_fat_sfn.c ****         name_char = *name;
 1600              		.loc 1 327 9 is_stmt 1 view .LVU529
 328:rtos/uC-FS/FAT/fs_fat_sfn.c ****     }
 1601              		.loc 1 328 9 view .LVU530
 328:rtos/uC-FS/FAT/fs_fat_sfn.c ****     }
 1602              		.loc 1 328 19 is_stmt 0 view .LVU531
 1603 007c 10F8013F 		ldrb	r3, [r0, #1]!	@ zero_extendqisi2
 1604              	.LVL172:
 1605              	.L121:
 293:rtos/uC-FS/FAT/fs_fat_sfn.c ****            (name_char != (CPU_CHAR)FS_FAT_PATH_SEP_CHAR) &&     /* ... or path sep        char ... 
 1606              		.loc 1 293 11 is_stmt 1 discriminator 1 view .LVU532
 1607 0080 EBB1     		cbz	r3, .L122
 293:rtos/uC-FS/FAT/fs_fat_sfn.c ****            (name_char != (CPU_CHAR)FS_FAT_PATH_SEP_CHAR) &&     /* ... or path sep        char ... 
 1608              		.loc 1 293 58 is_stmt 0 discriminator 2 view .LVU533
 1609 0082 5C2B     		cmp	r3, #92
 1610 0084 1BD0     		beq	.L122
 294:rtos/uC-FS/FAT/fs_fat_sfn.c ****            (is_legal  ==  DEF_YES                      )) {     /* ... or illegal name is found.   
 1611              		.loc 1 294 58 view .LVU534
 1612 0086 012E     		cmp	r6, #1
 1613 0088 19D1     		bne	.L122
 296:rtos/uC-FS/FAT/fs_fat_sfn.c ****             if (has_period == DEF_NO) {
ARM GAS  /tmp/ccpi2Pe2.s 			page 73


 1614              		.loc 1 296 9 is_stmt 1 view .LVU535
 296:rtos/uC-FS/FAT/fs_fat_sfn.c ****             if (has_period == DEF_NO) {
 1615              		.loc 1 296 12 is_stmt 0 view .LVU536
 1616 008a 2E2B     		cmp	r3, #46
 1617 008c D3D0     		beq	.L135
 308:rtos/uC-FS/FAT/fs_fat_sfn.c ****                 ((has_period == DEF_NO ) && (len < FS_FAT_SFN_NAME_MAX_NBR_CHAR))) {
 1618              		.loc 1 308 13 is_stmt 1 view .LVU537
 308:rtos/uC-FS/FAT/fs_fat_sfn.c ****                 ((has_period == DEF_NO ) && (len < FS_FAT_SFN_NAME_MAX_NBR_CHAR))) {
 1619              		.loc 1 308 16 is_stmt 0 view .LVU538
 1620 008e 012F     		cmp	r7, #1
 1621 0090 D8D0     		beq	.L136
 1622              	.L117:
 308:rtos/uC-FS/FAT/fs_fat_sfn.c ****                 ((has_period == DEF_NO ) && (len < FS_FAT_SFN_NAME_MAX_NBR_CHAR))) {
 1623              		.loc 1 308 83 discriminator 3 view .LVU539
 1624 0092 002F     		cmp	r7, #0
 1625 0094 F1D1     		bne	.L127
 309:rtos/uC-FS/FAT/fs_fat_sfn.c ****                 is_legal = FS_FAT_IS_LEGAL_SFN_CHAR(name_char);
 1626              		.loc 1 309 42 view .LVU540
 1627 0096 BCF1070F 		cmp	ip, #7
 1628 009a 0CD8     		bhi	.L128
 1629              	.L118:
 310:rtos/uC-FS/FAT/fs_fat_sfn.c ****                 if (is_legal == DEF_YES) {
 1630              		.loc 1 310 17 is_stmt 1 view .LVU541
 310:rtos/uC-FS/FAT/fs_fat_sfn.c ****                 if (is_legal == DEF_YES) {
 1631              		.loc 1 310 26 is_stmt 0 view .LVU542
 1632 009c 5D2B     		cmp	r3, #93
 1633 009e D5D9     		bls	.L119
 310:rtos/uC-FS/FAT/fs_fat_sfn.c ****                 if (is_legal == DEF_YES) {
 1634              		.loc 1 310 28 discriminator 1 view .LVU543
 1635 00a0 7C2B     		cmp	r3, #124
 1636 00a2 D3D0     		beq	.L119
 310:rtos/uC-FS/FAT/fs_fat_sfn.c ****                 if (is_legal == DEF_YES) {
 1637              		.loc 1 310 28 discriminator 3 view .LVU544
 1638 00a4 7F2B     		cmp	r3, #127
 1639 00a6 D1D0     		beq	.L119
 1640              	.L120:
 1641              	.LVL173:
 312:rtos/uC-FS/FAT/fs_fat_sfn.c ****                     name_len++;
 1642              		.loc 1 312 21 is_stmt 1 view .LVU545
 312:rtos/uC-FS/FAT/fs_fat_sfn.c ****                     name_len++;
 1643              		.loc 1 312 24 is_stmt 0 view .LVU546
 1644 00a8 0CF10103 		add	r3, ip, #1
 1645              	.LVL174:
 312:rtos/uC-FS/FAT/fs_fat_sfn.c ****                     name_len++;
 1646              		.loc 1 312 24 view .LVU547
 1647 00ac 1FFA83FC 		uxth	ip, r3
 1648              	.LVL175:
 313:rtos/uC-FS/FAT/fs_fat_sfn.c ****                 } else {
 1649              		.loc 1 313 21 is_stmt 1 view .LVU548
 313:rtos/uC-FS/FAT/fs_fat_sfn.c ****                 } else {
 1650              		.loc 1 313 29 is_stmt 0 view .LVU549
 1651 00b0 0134     		adds	r4, r4, #1
 1652              	.LVL176:
 313:rtos/uC-FS/FAT/fs_fat_sfn.c ****                 } else {
 1653              		.loc 1 313 29 view .LVU550
 1654 00b2 A4B2     		uxth	r4, r4
 1655              	.LVL177:
ARM GAS  /tmp/ccpi2Pe2.s 			page 74


 313:rtos/uC-FS/FAT/fs_fat_sfn.c ****                 } else {
 1656              		.loc 1 313 29 view .LVU551
 1657 00b4 E2E7     		b	.L116
 1658              	.LVL178:
 1659              	.L128:
 324:rtos/uC-FS/FAT/fs_fat_sfn.c ****             }
 1660              		.loc 1 324 26 view .LVU552
 1661 00b6 3E46     		mov	r6, r7
 1662              	.LVL179:
 324:rtos/uC-FS/FAT/fs_fat_sfn.c ****             }
 1663              		.loc 1 324 26 view .LVU553
 1664 00b8 E0E7     		b	.L116
 1665              	.LVL180:
 1666              	.L129:
 318:rtos/uC-FS/FAT/fs_fat_sfn.c ****                 }
 1667              		.loc 1 318 30 view .LVU554
 1668 00ba 0026     		movs	r6, #0
 1669              	.LVL181:
 318:rtos/uC-FS/FAT/fs_fat_sfn.c ****                 }
 1670              		.loc 1 318 30 view .LVU555
 1671 00bc DEE7     		b	.L116
 1672              	.LVL182:
 1673              	.L122:
 333:rtos/uC-FS/FAT/fs_fat_sfn.c ****        *p_err = FS_ERR_NAME_INVALID;
 1674              		.loc 1 333 5 is_stmt 1 view .LVU556
 333:rtos/uC-FS/FAT/fs_fat_sfn.c ****        *p_err = FS_ERR_NAME_INVALID;
 1675              		.loc 1 333 8 is_stmt 0 view .LVU557
 1676 00be 1EB1     		cbz	r6, .L137
 338:rtos/uC-FS/FAT/fs_fat_sfn.c ****    *p_err      = FS_ERR_NONE;
 1677              		.loc 1 338 4 is_stmt 1 view .LVU558
 338:rtos/uC-FS/FAT/fs_fat_sfn.c ****    *p_err      = FS_ERR_NONE;
 1678              		.loc 1 338 16 is_stmt 0 view .LVU559
 1679 00c0 0C80     		strh	r4, [r1]	@ movhi
 339:rtos/uC-FS/FAT/fs_fat_sfn.c **** }
 1680              		.loc 1 339 4 is_stmt 1 view .LVU560
 339:rtos/uC-FS/FAT/fs_fat_sfn.c **** }
 1681              		.loc 1 339 16 is_stmt 0 view .LVU561
 1682 00c2 0023     		movs	r3, #0
 1683              	.LVL183:
 339:rtos/uC-FS/FAT/fs_fat_sfn.c **** }
 1684              		.loc 1 339 16 view .LVU562
 1685 00c4 1380     		strh	r3, [r2]	@ movhi
 1686 00c6 B4E7     		b	.L110
 1687              	.LVL184:
 1688              	.L137:
 334:rtos/uC-FS/FAT/fs_fat_sfn.c ****         return;
 1689              		.loc 1 334 8 is_stmt 1 view .LVU563
 334:rtos/uC-FS/FAT/fs_fat_sfn.c ****         return;
 1690              		.loc 1 334 15 is_stmt 0 view .LVU564
 1691 00c8 40F28733 		movw	r3, #903
 1692              	.LVL185:
 334:rtos/uC-FS/FAT/fs_fat_sfn.c ****         return;
 1693              		.loc 1 334 15 view .LVU565
 1694 00cc 1380     		strh	r3, [r2]	@ movhi
 335:rtos/uC-FS/FAT/fs_fat_sfn.c ****     }
 1695              		.loc 1 335 9 is_stmt 1 view .LVU566
 1696 00ce B0E7     		b	.L110
ARM GAS  /tmp/ccpi2Pe2.s 			page 75


 1697              	.LVL186:
 1698              	.L132:
 1699              	.LCFI29:
 1700              		.cfi_def_cfa_offset 0
 1701              		.cfi_restore 4
 1702              		.cfi_restore 5
 1703              		.cfi_restore 6
 1704              		.cfi_restore 7
 284:rtos/uC-FS/FAT/fs_fat_sfn.c ****              return;
 1705              		.loc 1 284 13 view .LVU567
 284:rtos/uC-FS/FAT/fs_fat_sfn.c ****              return;
 1706              		.loc 1 284 20 is_stmt 0 view .LVU568
 1707 00d0 40F28733 		movw	r3, #903
 1708              	.LVL187:
 284:rtos/uC-FS/FAT/fs_fat_sfn.c ****              return;
 1709              		.loc 1 284 20 view .LVU569
 1710 00d4 1380     		strh	r3, [r2]	@ movhi
 1711              	.LVL188:
 285:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 1712              		.loc 1 285 14 is_stmt 1 view .LVU570
 1713 00d6 7047     		bx	lr
 1714              		.cfi_endproc
 1715              	.LFE0:
 1717              		.section	.text.FS_FAT_SFN_DirEntryFmt,"ax",%progbits
 1718              		.align	1
 1719              		.global	FS_FAT_SFN_DirEntryFmt
 1720              		.syntax unified
 1721              		.thumb
 1722              		.thumb_func
 1723              		.fpu fpv4-sp-d16
 1725              	FS_FAT_SFN_DirEntryFmt:
 1726              	.LVL189:
 1727              	.LFB1:
 373:rtos/uC-FS/FAT/fs_fat_sfn.c ****     CPU_INT16U     date_val;
 1728              		.loc 1 373 1 view -0
 1729              		.cfi_startproc
 1730              		@ args = 8, pretend = 0, frame = 24
 1731              		@ frame_needed = 0, uses_anonymous_args = 0
 373:rtos/uC-FS/FAT/fs_fat_sfn.c ****     CPU_INT16U     date_val;
 1732              		.loc 1 373 1 is_stmt 0 view .LVU572
 1733 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 1734              	.LCFI30:
 1735              		.cfi_def_cfa_offset 24
 1736              		.cfi_offset 4, -24
 1737              		.cfi_offset 5, -20
 1738              		.cfi_offset 6, -16
 1739              		.cfi_offset 7, -12
 1740              		.cfi_offset 8, -8
 1741              		.cfi_offset 14, -4
 1742 0004 86B0     		sub	sp, sp, #24
 1743              	.LCFI31:
 1744              		.cfi_def_cfa_offset 48
 1745 0006 0446     		mov	r4, r0
 1746 0008 0D46     		mov	r5, r1
 1747 000a 9046     		mov	r8, r2
 1748 000c 1E46     		mov	r6, r3
 374:rtos/uC-FS/FAT/fs_fat_sfn.c ****     CLK_DATE_TIME  stime;
ARM GAS  /tmp/ccpi2Pe2.s 			page 76


 1749              		.loc 1 374 5 is_stmt 1 view .LVU573
 375:rtos/uC-FS/FAT/fs_fat_sfn.c ****     CPU_INT08U     ntres;
 1750              		.loc 1 375 5 view .LVU574
 376:rtos/uC-FS/FAT/fs_fat_sfn.c ****     CPU_INT16U     time_val;
 1751              		.loc 1 376 5 view .LVU575
 377:rtos/uC-FS/FAT/fs_fat_sfn.c ****     CPU_INT08U    *p_dir_entry_08;
 1752              		.loc 1 377 5 view .LVU576
 378:rtos/uC-FS/FAT/fs_fat_sfn.c ****     CPU_BOOLEAN    ok;
 1753              		.loc 1 378 5 view .LVU577
 379:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 1754              		.loc 1 379 5 view .LVU578
 382:rtos/uC-FS/FAT/fs_fat_sfn.c ****     if (ok == DEF_YES) {
 1755              		.loc 1 382 5 view .LVU579
 382:rtos/uC-FS/FAT/fs_fat_sfn.c ****     if (ok == DEF_YES) {
 1756              		.loc 1 382 10 is_stmt 0 view .LVU580
 1757 000e 01A8     		add	r0, sp, #4
 1758              	.LVL190:
 382:rtos/uC-FS/FAT/fs_fat_sfn.c ****     if (ok == DEF_YES) {
 1759              		.loc 1 382 10 view .LVU581
 1760 0010 FFF7FEFF 		bl	Clk_GetDateTime
 1761              	.LVL191:
 383:rtos/uC-FS/FAT/fs_fat_sfn.c ****         time_val =  FS_FAT_TimeFmt(&stime);
 1762              		.loc 1 383 5 is_stmt 1 view .LVU582
 383:rtos/uC-FS/FAT/fs_fat_sfn.c ****         time_val =  FS_FAT_TimeFmt(&stime);
 1763              		.loc 1 383 8 is_stmt 0 view .LVU583
 1764 0014 0128     		cmp	r0, #1
 1765 0016 4AD0     		beq	.L147
 387:rtos/uC-FS/FAT/fs_fat_sfn.c ****         date_val =  0u;
 1766              		.loc 1 387 18 view .LVU584
 1767 0018 0027     		movs	r7, #0
 388:rtos/uC-FS/FAT/fs_fat_sfn.c ****     }
 1768              		.loc 1 388 18 view .LVU585
 1769 001a 3846     		mov	r0, r7
 1770              	.LVL192:
 1771              	.L139:
 391:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 1772              		.loc 1 391 5 is_stmt 1 view .LVU586
 394:rtos/uC-FS/FAT/fs_fat_sfn.c ****     MEM_VAL_SET_INT32U((void *)(p_dir_entry_08 + 4u), name_8_3[1]);
 1773              		.loc 1 394 5 view .LVU587
 394:rtos/uC-FS/FAT/fs_fat_sfn.c ****     MEM_VAL_SET_INT32U((void *)(p_dir_entry_08 + 4u), name_8_3[1]);
 1774              		.loc 1 394 5 view .LVU588
 1775 001c 2B78     		ldrb	r3, [r5]	@ zero_extendqisi2
 1776 001e 2370     		strb	r3, [r4]
 394:rtos/uC-FS/FAT/fs_fat_sfn.c ****     MEM_VAL_SET_INT32U((void *)(p_dir_entry_08 + 4u), name_8_3[1]);
 1777              		.loc 1 394 5 view .LVU589
 1778 0020 6B78     		ldrb	r3, [r5, #1]	@ zero_extendqisi2
 1779 0022 6370     		strb	r3, [r4, #1]
 394:rtos/uC-FS/FAT/fs_fat_sfn.c ****     MEM_VAL_SET_INT32U((void *)(p_dir_entry_08 + 4u), name_8_3[1]);
 1780              		.loc 1 394 5 view .LVU590
 1781 0024 AB78     		ldrb	r3, [r5, #2]	@ zero_extendqisi2
 1782 0026 A370     		strb	r3, [r4, #2]
 394:rtos/uC-FS/FAT/fs_fat_sfn.c ****     MEM_VAL_SET_INT32U((void *)(p_dir_entry_08 + 4u), name_8_3[1]);
 1783              		.loc 1 394 5 view .LVU591
 1784 0028 EB78     		ldrb	r3, [r5, #3]	@ zero_extendqisi2
 1785 002a E370     		strb	r3, [r4, #3]
 394:rtos/uC-FS/FAT/fs_fat_sfn.c ****     MEM_VAL_SET_INT32U((void *)(p_dir_entry_08 + 4u), name_8_3[1]);
 1786              		.loc 1 394 5 view .LVU592
ARM GAS  /tmp/ccpi2Pe2.s 			page 77


 395:rtos/uC-FS/FAT/fs_fat_sfn.c ****     MEM_VAL_SET_INT32U((void *)(p_dir_entry_08 + 8u), name_8_3[2]);
 1787              		.loc 1 395 5 view .LVU593
 395:rtos/uC-FS/FAT/fs_fat_sfn.c ****     MEM_VAL_SET_INT32U((void *)(p_dir_entry_08 + 8u), name_8_3[2]);
 1788              		.loc 1 395 5 view .LVU594
 1789 002c 2B79     		ldrb	r3, [r5, #4]	@ zero_extendqisi2
 1790 002e 2371     		strb	r3, [r4, #4]
 395:rtos/uC-FS/FAT/fs_fat_sfn.c ****     MEM_VAL_SET_INT32U((void *)(p_dir_entry_08 + 8u), name_8_3[2]);
 1791              		.loc 1 395 5 view .LVU595
 1792 0030 6B79     		ldrb	r3, [r5, #5]	@ zero_extendqisi2
 1793 0032 6371     		strb	r3, [r4, #5]
 395:rtos/uC-FS/FAT/fs_fat_sfn.c ****     MEM_VAL_SET_INT32U((void *)(p_dir_entry_08 + 8u), name_8_3[2]);
 1794              		.loc 1 395 5 view .LVU596
 1795 0034 AB79     		ldrb	r3, [r5, #6]	@ zero_extendqisi2
 1796 0036 A371     		strb	r3, [r4, #6]
 395:rtos/uC-FS/FAT/fs_fat_sfn.c ****     MEM_VAL_SET_INT32U((void *)(p_dir_entry_08 + 8u), name_8_3[2]);
 1797              		.loc 1 395 5 view .LVU597
 1798 0038 EB79     		ldrb	r3, [r5, #7]	@ zero_extendqisi2
 1799 003a E371     		strb	r3, [r4, #7]
 395:rtos/uC-FS/FAT/fs_fat_sfn.c ****     MEM_VAL_SET_INT32U((void *)(p_dir_entry_08 + 8u), name_8_3[2]);
 1800              		.loc 1 395 5 view .LVU598
 396:rtos/uC-FS/FAT/fs_fat_sfn.c ****     p_dir_entry_08 += 11u;
 1801              		.loc 1 396 5 view .LVU599
 396:rtos/uC-FS/FAT/fs_fat_sfn.c ****     p_dir_entry_08 += 11u;
 1802              		.loc 1 396 5 view .LVU600
 1803 003c 2B7A     		ldrb	r3, [r5, #8]	@ zero_extendqisi2
 1804 003e 2372     		strb	r3, [r4, #8]
 396:rtos/uC-FS/FAT/fs_fat_sfn.c ****     p_dir_entry_08 += 11u;
 1805              		.loc 1 396 5 view .LVU601
 1806 0040 6B7A     		ldrb	r3, [r5, #9]	@ zero_extendqisi2
 1807 0042 6372     		strb	r3, [r4, #9]
 396:rtos/uC-FS/FAT/fs_fat_sfn.c ****     p_dir_entry_08 += 11u;
 1808              		.loc 1 396 5 view .LVU602
 1809 0044 AB7A     		ldrb	r3, [r5, #10]	@ zero_extendqisi2
 1810 0046 A372     		strb	r3, [r4, #10]
 396:rtos/uC-FS/FAT/fs_fat_sfn.c ****     p_dir_entry_08 += 11u;
 1811              		.loc 1 396 5 view .LVU603
 396:rtos/uC-FS/FAT/fs_fat_sfn.c ****     p_dir_entry_08 += 11u;
 1812              		.loc 1 396 5 view .LVU604
 397:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 1813              		.loc 1 397 5 view .LVU605
 1814              	.LVL193:
 400:rtos/uC-FS/FAT/fs_fat_sfn.c ****        *p_dir_entry_08 = FS_FAT_DIRENT_ATTR_DIRECTORY;
 1815              		.loc 1 400 5 view .LVU606
 400:rtos/uC-FS/FAT/fs_fat_sfn.c ****        *p_dir_entry_08 = FS_FAT_DIRENT_ATTR_DIRECTORY;
 1816              		.loc 1 400 8 is_stmt 0 view .LVU607
 1817 0048 B8F1010F 		cmp	r8, #1
 1818 004c 37D0     		beq	.L148
 404:rtos/uC-FS/FAT/fs_fat_sfn.c ****         p_dir_entry_08++;
 1819              		.loc 1 404 8 is_stmt 1 view .LVU608
 404:rtos/uC-FS/FAT/fs_fat_sfn.c ****         p_dir_entry_08++;
 1820              		.loc 1 404 24 is_stmt 0 view .LVU609
 1821 004e 0023     		movs	r3, #0
 1822 0050 E372     		strb	r3, [r4, #11]
 405:rtos/uC-FS/FAT/fs_fat_sfn.c ****     }
 1823              		.loc 1 405 9 is_stmt 1 view .LVU610
 405:rtos/uC-FS/FAT/fs_fat_sfn.c ****     }
 1824              		.loc 1 405 23 is_stmt 0 view .LVU611
ARM GAS  /tmp/ccpi2Pe2.s 			page 78


 1825 0052 04F10C02 		add	r2, r4, #12
 1826              	.LVL194:
 1827              	.L141:
 409:rtos/uC-FS/FAT/fs_fat_sfn.c ****     if (name_lower_case == DEF_YES) {
 1828              		.loc 1 409 5 is_stmt 1 view .LVU612
 410:rtos/uC-FS/FAT/fs_fat_sfn.c ****         ntres |= FS_FAT_DIRENT_NTRES_NAME_LOWER_CASE;
 1829              		.loc 1 410 5 view .LVU613
 410:rtos/uC-FS/FAT/fs_fat_sfn.c ****         ntres |= FS_FAT_DIRENT_NTRES_NAME_LOWER_CASE;
 1830              		.loc 1 410 8 is_stmt 0 view .LVU614
 1831 0056 9DF83030 		ldrb	r3, [sp, #48]	@ zero_extendqisi2
 1832 005a 012B     		cmp	r3, #1
 1833 005c 34D0     		beq	.L145
 409:rtos/uC-FS/FAT/fs_fat_sfn.c ****     if (name_lower_case == DEF_YES) {
 1834              		.loc 1 409 11 view .LVU615
 1835 005e 0023     		movs	r3, #0
 1836              	.L142:
 1837              	.LVL195:
 413:rtos/uC-FS/FAT/fs_fat_sfn.c ****         ntres |= FS_FAT_DIRENT_NTRES_EXT_LOWER_CASE;
 1838              		.loc 1 413 5 is_stmt 1 view .LVU616
 413:rtos/uC-FS/FAT/fs_fat_sfn.c ****         ntres |= FS_FAT_DIRENT_NTRES_EXT_LOWER_CASE;
 1839              		.loc 1 413 8 is_stmt 0 view .LVU617
 1840 0060 9DF83410 		ldrb	r1, [sp, #52]	@ zero_extendqisi2
 1841 0064 0129     		cmp	r1, #1
 1842 0066 31D0     		beq	.L149
 1843              	.L143:
 416:rtos/uC-FS/FAT/fs_fat_sfn.c ****     p_dir_entry_08++;
 1844              		.loc 1 416 4 is_stmt 1 view .LVU618
 416:rtos/uC-FS/FAT/fs_fat_sfn.c ****     p_dir_entry_08++;
 1845              		.loc 1 416 20 is_stmt 0 view .LVU619
 1846 0068 1370     		strb	r3, [r2]
 417:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 1847              		.loc 1 417 5 is_stmt 1 view .LVU620
 1848              	.LVL196:
 419:rtos/uC-FS/FAT/fs_fat_sfn.c ****     p_dir_entry_08++;
 1849              		.loc 1 419 4 view .LVU621
 419:rtos/uC-FS/FAT/fs_fat_sfn.c ****     p_dir_entry_08++;
 1850              		.loc 1 419 20 is_stmt 0 view .LVU622
 1851 006a 0023     		movs	r3, #0
 1852              	.LVL197:
 419:rtos/uC-FS/FAT/fs_fat_sfn.c ****     p_dir_entry_08++;
 1853              		.loc 1 419 20 view .LVU623
 1854 006c 5370     		strb	r3, [r2, #1]
 420:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                                 /* 14-15: Creation time.           
 1855              		.loc 1 420 5 is_stmt 1 view .LVU624
 1856              	.LVL198:
 422:rtos/uC-FS/FAT/fs_fat_sfn.c ****     p_dir_entry_08++;
 1857              		.loc 1 422 4 view .LVU625
 422:rtos/uC-FS/FAT/fs_fat_sfn.c ****     p_dir_entry_08++;
 1858              		.loc 1 422 22 is_stmt 0 view .LVU626
 1859 006e FCB2     		uxtb	r4, r7
 1860              	.LVL199:
 422:rtos/uC-FS/FAT/fs_fat_sfn.c ****     p_dir_entry_08++;
 1861              		.loc 1 422 20 view .LVU627
 1862 0070 9470     		strb	r4, [r2, #2]
 423:rtos/uC-FS/FAT/fs_fat_sfn.c ****    *p_dir_entry_08 = (CPU_INT08U)(time_val        >> (DEF_INT_08_NBR_BITS * 1u)) & DEF_INT_08_MASK;
 1863              		.loc 1 423 5 is_stmt 1 view .LVU628
 1864              	.LVL200:
ARM GAS  /tmp/ccpi2Pe2.s 			page 79


 424:rtos/uC-FS/FAT/fs_fat_sfn.c ****     p_dir_entry_08++;
 1865              		.loc 1 424 4 view .LVU629
 424:rtos/uC-FS/FAT/fs_fat_sfn.c ****     p_dir_entry_08++;
 1866              		.loc 1 424 22 is_stmt 0 view .LVU630
 1867 0072 C7F30727 		ubfx	r7, r7, #8, #8
 1868              	.LVL201:
 424:rtos/uC-FS/FAT/fs_fat_sfn.c ****     p_dir_entry_08++;
 1869              		.loc 1 424 20 view .LVU631
 1870 0076 D770     		strb	r7, [r2, #3]
 425:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                                 /* 16-17: Creation date.           
 1871              		.loc 1 425 5 is_stmt 1 view .LVU632
 1872              	.LVL202:
 427:rtos/uC-FS/FAT/fs_fat_sfn.c ****     p_dir_entry_08++;
 1873              		.loc 1 427 4 view .LVU633
 427:rtos/uC-FS/FAT/fs_fat_sfn.c ****     p_dir_entry_08++;
 1874              		.loc 1 427 22 is_stmt 0 view .LVU634
 1875 0078 C1B2     		uxtb	r1, r0
 427:rtos/uC-FS/FAT/fs_fat_sfn.c ****     p_dir_entry_08++;
 1876              		.loc 1 427 20 view .LVU635
 1877 007a 1171     		strb	r1, [r2, #4]
 428:rtos/uC-FS/FAT/fs_fat_sfn.c ****    *p_dir_entry_08 = (CPU_INT08U)(date_val        >> (DEF_INT_08_NBR_BITS * 1u)) & DEF_INT_08_MASK;
 1878              		.loc 1 428 5 is_stmt 1 view .LVU636
 1879              	.LVL203:
 429:rtos/uC-FS/FAT/fs_fat_sfn.c ****     p_dir_entry_08++;
 1880              		.loc 1 429 4 view .LVU637
 429:rtos/uC-FS/FAT/fs_fat_sfn.c ****     p_dir_entry_08++;
 1881              		.loc 1 429 22 is_stmt 0 view .LVU638
 1882 007c C0F30720 		ubfx	r0, r0, #8, #8
 1883              	.LVL204:
 429:rtos/uC-FS/FAT/fs_fat_sfn.c ****     p_dir_entry_08++;
 1884              		.loc 1 429 20 view .LVU639
 1885 0080 5071     		strb	r0, [r2, #5]
 430:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                                 /* 18-19: Last access date.        
 1886              		.loc 1 430 5 is_stmt 1 view .LVU640
 1887              	.LVL205:
 432:rtos/uC-FS/FAT/fs_fat_sfn.c ****     p_dir_entry_08++;
 1888              		.loc 1 432 4 view .LVU641
 432:rtos/uC-FS/FAT/fs_fat_sfn.c ****     p_dir_entry_08++;
 1889              		.loc 1 432 20 is_stmt 0 view .LVU642
 1890 0082 9171     		strb	r1, [r2, #6]
 433:rtos/uC-FS/FAT/fs_fat_sfn.c ****    *p_dir_entry_08 = (CPU_INT08U)(date_val        >> (DEF_INT_08_NBR_BITS * 1u)) & DEF_INT_08_MASK;
 1891              		.loc 1 433 5 is_stmt 1 view .LVU643
 1892              	.LVL206:
 434:rtos/uC-FS/FAT/fs_fat_sfn.c ****     p_dir_entry_08++;
 1893              		.loc 1 434 4 view .LVU644
 434:rtos/uC-FS/FAT/fs_fat_sfn.c ****     p_dir_entry_08++;
 1894              		.loc 1 434 20 is_stmt 0 view .LVU645
 1895 0084 D071     		strb	r0, [r2, #7]
 435:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                                 /* 20-21: Hi word, entry's 1st clus
 1896              		.loc 1 435 5 is_stmt 1 view .LVU646
 1897              	.LVL207:
 437:rtos/uC-FS/FAT/fs_fat_sfn.c ****     p_dir_entry_08++;
 1898              		.loc 1 437 4 view .LVU647
 437:rtos/uC-FS/FAT/fs_fat_sfn.c ****     p_dir_entry_08++;
 1899              		.loc 1 437 22 is_stmt 0 view .LVU648
 1900 0086 C6F30745 		ubfx	r5, r6, #16, #8
 1901              	.LVL208:
ARM GAS  /tmp/ccpi2Pe2.s 			page 80


 437:rtos/uC-FS/FAT/fs_fat_sfn.c ****     p_dir_entry_08++;
 1902              		.loc 1 437 20 view .LVU649
 1903 008a 1572     		strb	r5, [r2, #8]
 438:rtos/uC-FS/FAT/fs_fat_sfn.c ****    *p_dir_entry_08 = (CPU_INT08U)(file_first_clus >> (DEF_INT_08_NBR_BITS * 3u)) & DEF_INT_08_MASK;
 1904              		.loc 1 438 5 is_stmt 1 view .LVU650
 1905              	.LVL209:
 439:rtos/uC-FS/FAT/fs_fat_sfn.c ****     p_dir_entry_08++;
 1906              		.loc 1 439 4 view .LVU651
 439:rtos/uC-FS/FAT/fs_fat_sfn.c ****     p_dir_entry_08++;
 1907              		.loc 1 439 22 is_stmt 0 view .LVU652
 1908 008c 350E     		lsrs	r5, r6, #24
 439:rtos/uC-FS/FAT/fs_fat_sfn.c ****     p_dir_entry_08++;
 1909              		.loc 1 439 20 view .LVU653
 1910 008e 5572     		strb	r5, [r2, #9]
 440:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                                 /* 22-23: Last write  time.        
 1911              		.loc 1 440 5 is_stmt 1 view .LVU654
 1912              	.LVL210:
 442:rtos/uC-FS/FAT/fs_fat_sfn.c ****     p_dir_entry_08++;
 1913              		.loc 1 442 4 view .LVU655
 442:rtos/uC-FS/FAT/fs_fat_sfn.c ****     p_dir_entry_08++;
 1914              		.loc 1 442 20 is_stmt 0 view .LVU656
 1915 0090 9472     		strb	r4, [r2, #10]
 443:rtos/uC-FS/FAT/fs_fat_sfn.c ****    *p_dir_entry_08 = (CPU_INT08U)(time_val        >> (DEF_INT_08_NBR_BITS * 1u)) & DEF_INT_08_MASK;
 1916              		.loc 1 443 5 is_stmt 1 view .LVU657
 1917              	.LVL211:
 444:rtos/uC-FS/FAT/fs_fat_sfn.c ****     p_dir_entry_08++;
 1918              		.loc 1 444 4 view .LVU658
 444:rtos/uC-FS/FAT/fs_fat_sfn.c ****     p_dir_entry_08++;
 1919              		.loc 1 444 20 is_stmt 0 view .LVU659
 1920 0092 D772     		strb	r7, [r2, #11]
 445:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                                 /* 24-25: Last wrote  date.        
 1921              		.loc 1 445 5 is_stmt 1 view .LVU660
 1922              	.LVL212:
 447:rtos/uC-FS/FAT/fs_fat_sfn.c ****     p_dir_entry_08++;
 1923              		.loc 1 447 4 view .LVU661
 447:rtos/uC-FS/FAT/fs_fat_sfn.c ****     p_dir_entry_08++;
 1924              		.loc 1 447 20 is_stmt 0 view .LVU662
 1925 0094 1173     		strb	r1, [r2, #12]
 448:rtos/uC-FS/FAT/fs_fat_sfn.c ****    *p_dir_entry_08 = (CPU_INT08U)(date_val        >> (DEF_INT_08_NBR_BITS * 1u)) & DEF_INT_08_MASK;
 1926              		.loc 1 448 5 is_stmt 1 view .LVU663
 1927              	.LVL213:
 449:rtos/uC-FS/FAT/fs_fat_sfn.c ****     p_dir_entry_08++;
 1928              		.loc 1 449 4 view .LVU664
 449:rtos/uC-FS/FAT/fs_fat_sfn.c ****     p_dir_entry_08++;
 1929              		.loc 1 449 20 is_stmt 0 view .LVU665
 1930 0096 5073     		strb	r0, [r2, #13]
 450:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                                 /* 26-27: Lo word, entry's 1st clus
 1931              		.loc 1 450 5 is_stmt 1 view .LVU666
 1932              	.LVL214:
 452:rtos/uC-FS/FAT/fs_fat_sfn.c ****     p_dir_entry_08++;
 1933              		.loc 1 452 4 view .LVU667
 452:rtos/uC-FS/FAT/fs_fat_sfn.c ****     p_dir_entry_08++;
 1934              		.loc 1 452 20 is_stmt 0 view .LVU668
 1935 0098 9673     		strb	r6, [r2, #14]
 453:rtos/uC-FS/FAT/fs_fat_sfn.c ****    *p_dir_entry_08 = (CPU_INT08U)(file_first_clus >> (DEF_INT_08_NBR_BITS * 1u)) & DEF_INT_08_MASK;
 1936              		.loc 1 453 5 is_stmt 1 view .LVU669
 1937              	.LVL215:
ARM GAS  /tmp/ccpi2Pe2.s 			page 81


 454:rtos/uC-FS/FAT/fs_fat_sfn.c ****     p_dir_entry_08++;
 1938              		.loc 1 454 4 view .LVU670
 454:rtos/uC-FS/FAT/fs_fat_sfn.c ****     p_dir_entry_08++;
 1939              		.loc 1 454 22 is_stmt 0 view .LVU671
 1940 009a C6F30726 		ubfx	r6, r6, #8, #8
 1941              	.LVL216:
 454:rtos/uC-FS/FAT/fs_fat_sfn.c ****     p_dir_entry_08++;
 1942              		.loc 1 454 20 view .LVU672
 1943 009e D673     		strb	r6, [r2, #15]
 455:rtos/uC-FS/FAT/fs_fat_sfn.c ****    *p_dir_entry_08 =  0u;                                       /* 28-31: File size in bytes.      
 1944              		.loc 1 455 5 is_stmt 1 view .LVU673
 1945              	.LVL217:
 456:rtos/uC-FS/FAT/fs_fat_sfn.c ****     p_dir_entry_08++;
 1946              		.loc 1 456 4 view .LVU674
 456:rtos/uC-FS/FAT/fs_fat_sfn.c ****     p_dir_entry_08++;
 1947              		.loc 1 456 20 is_stmt 0 view .LVU675
 1948 00a0 1374     		strb	r3, [r2, #16]
 457:rtos/uC-FS/FAT/fs_fat_sfn.c ****    *p_dir_entry_08 =  0u;
 1949              		.loc 1 457 5 is_stmt 1 view .LVU676
 1950              	.LVL218:
 458:rtos/uC-FS/FAT/fs_fat_sfn.c ****     p_dir_entry_08++;
 1951              		.loc 1 458 4 view .LVU677
 458:rtos/uC-FS/FAT/fs_fat_sfn.c ****     p_dir_entry_08++;
 1952              		.loc 1 458 20 is_stmt 0 view .LVU678
 1953 00a2 5374     		strb	r3, [r2, #17]
 459:rtos/uC-FS/FAT/fs_fat_sfn.c ****    *p_dir_entry_08 =  0u;
 1954              		.loc 1 459 5 is_stmt 1 view .LVU679
 1955              	.LVL219:
 460:rtos/uC-FS/FAT/fs_fat_sfn.c ****     p_dir_entry_08++;
 1956              		.loc 1 460 4 view .LVU680
 460:rtos/uC-FS/FAT/fs_fat_sfn.c ****     p_dir_entry_08++;
 1957              		.loc 1 460 20 is_stmt 0 view .LVU681
 1958 00a4 9374     		strb	r3, [r2, #18]
 461:rtos/uC-FS/FAT/fs_fat_sfn.c ****    *p_dir_entry_08 =  0u;
 1959              		.loc 1 461 5 is_stmt 1 view .LVU682
 1960              	.LVL220:
 462:rtos/uC-FS/FAT/fs_fat_sfn.c **** }
 1961              		.loc 1 462 4 view .LVU683
 462:rtos/uC-FS/FAT/fs_fat_sfn.c **** }
 1962              		.loc 1 462 20 is_stmt 0 view .LVU684
 1963 00a6 D374     		strb	r3, [r2, #19]
 463:rtos/uC-FS/FAT/fs_fat_sfn.c **** #endif
 1964              		.loc 1 463 1 view .LVU685
 1965 00a8 06B0     		add	sp, sp, #24
 1966              	.LCFI32:
 1967              		.cfi_remember_state
 1968              		.cfi_def_cfa_offset 24
 1969              		@ sp needed
 1970 00aa BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 1971              	.LVL221:
 1972              	.L147:
 1973              	.LCFI33:
 1974              		.cfi_restore_state
 384:rtos/uC-FS/FAT/fs_fat_sfn.c ****         date_val =  FS_FAT_DateFmt(&stime);
 1975              		.loc 1 384 9 is_stmt 1 view .LVU686
 384:rtos/uC-FS/FAT/fs_fat_sfn.c ****         date_val =  FS_FAT_DateFmt(&stime);
 1976              		.loc 1 384 21 is_stmt 0 view .LVU687
ARM GAS  /tmp/ccpi2Pe2.s 			page 82


 1977 00ae 01A8     		add	r0, sp, #4
 1978              	.LVL222:
 384:rtos/uC-FS/FAT/fs_fat_sfn.c ****         date_val =  FS_FAT_DateFmt(&stime);
 1979              		.loc 1 384 21 view .LVU688
 1980 00b0 FFF7FEFF 		bl	FS_FAT_TimeFmt
 1981              	.LVL223:
 1982 00b4 0746     		mov	r7, r0
 1983              	.LVL224:
 385:rtos/uC-FS/FAT/fs_fat_sfn.c ****     } else {
 1984              		.loc 1 385 9 is_stmt 1 view .LVU689
 385:rtos/uC-FS/FAT/fs_fat_sfn.c ****     } else {
 1985              		.loc 1 385 21 is_stmt 0 view .LVU690
 1986 00b6 01A8     		add	r0, sp, #4
 1987 00b8 FFF7FEFF 		bl	FS_FAT_DateFmt
 1988              	.LVL225:
 385:rtos/uC-FS/FAT/fs_fat_sfn.c ****     } else {
 1989              		.loc 1 385 21 view .LVU691
 1990 00bc AEE7     		b	.L139
 1991              	.LVL226:
 1992              	.L148:
 401:rtos/uC-FS/FAT/fs_fat_sfn.c ****         p_dir_entry_08++;
 1993              		.loc 1 401 8 is_stmt 1 view .LVU692
 401:rtos/uC-FS/FAT/fs_fat_sfn.c ****         p_dir_entry_08++;
 1994              		.loc 1 401 24 is_stmt 0 view .LVU693
 1995 00be 1023     		movs	r3, #16
 1996 00c0 E372     		strb	r3, [r4, #11]
 402:rtos/uC-FS/FAT/fs_fat_sfn.c ****     } else {
 1997              		.loc 1 402 9 is_stmt 1 view .LVU694
 402:rtos/uC-FS/FAT/fs_fat_sfn.c ****     } else {
 1998              		.loc 1 402 23 is_stmt 0 view .LVU695
 1999 00c2 04F10C02 		add	r2, r4, #12
 2000              	.LVL227:
 402:rtos/uC-FS/FAT/fs_fat_sfn.c ****     } else {
 2001              		.loc 1 402 23 view .LVU696
 2002 00c6 C6E7     		b	.L141
 2003              	.LVL228:
 2004              	.L145:
 411:rtos/uC-FS/FAT/fs_fat_sfn.c ****     }
 2005              		.loc 1 411 15 view .LVU697
 2006 00c8 0823     		movs	r3, #8
 2007 00ca C9E7     		b	.L142
 2008              	.LVL229:
 2009              	.L149:
 414:rtos/uC-FS/FAT/fs_fat_sfn.c ****     }
 2010              		.loc 1 414 9 is_stmt 1 view .LVU698
 414:rtos/uC-FS/FAT/fs_fat_sfn.c ****     }
 2011              		.loc 1 414 15 is_stmt 0 view .LVU699
 2012 00cc 43F01003 		orr	r3, r3, #16
 2013              	.LVL230:
 414:rtos/uC-FS/FAT/fs_fat_sfn.c ****     }
 2014              		.loc 1 414 15 view .LVU700
 2015 00d0 CAE7     		b	.L143
 2016              		.cfi_endproc
 2017              	.LFE1:
 2019              		.section	.text.FS_FAT_SFN_DirEntryCreateAt,"ax",%progbits
 2020              		.align	1
 2021              		.syntax unified
ARM GAS  /tmp/ccpi2Pe2.s 			page 83


 2022              		.thumb
 2023              		.thumb_func
 2024              		.fpu fpv4-sp-d16
 2026              	FS_FAT_SFN_DirEntryCreateAt:
 2027              	.LVL231:
 2028              	.LFB7:
1168:rtos/uC-FS/FAT/fs_fat_sfn.c ****     CPU_INT08U  *p_dir_entry;
 2029              		.loc 1 1168 1 is_stmt 1 view -0
 2030              		.cfi_startproc
 2031              		@ args = 24, pretend = 0, frame = 0
 2032              		@ frame_needed = 0, uses_anonymous_args = 0
1168:rtos/uC-FS/FAT/fs_fat_sfn.c ****     CPU_INT08U  *p_dir_entry;
 2033              		.loc 1 1168 1 is_stmt 0 view .LVU702
 2034 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 2035              	.LCFI34:
 2036              		.cfi_def_cfa_offset 24
 2037              		.cfi_offset 4, -24
 2038              		.cfi_offset 5, -20
 2039              		.cfi_offset 6, -16
 2040              		.cfi_offset 7, -12
 2041              		.cfi_offset 8, -8
 2042              		.cfi_offset 14, -4
 2043 0004 82B0     		sub	sp, sp, #8
 2044              	.LCFI35:
 2045              		.cfi_def_cfa_offset 32
 2046 0006 0C46     		mov	r4, r1
 2047 0008 0B9F     		ldr	r7, [sp, #44]
 2048 000a 0C9E     		ldr	r6, [sp, #48]
 2049 000c 0D9D     		ldr	r5, [sp, #52]
1169:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 2050              		.loc 1 1169 5 is_stmt 1 view .LVU703
1172:rtos/uC-FS/FAT/fs_fat_sfn.c ****    (void)name_len;
 2051              		.loc 1 1172 4 view .LVU704
1173:rtos/uC-FS/FAT/fs_fat_sfn.c ****    (void)p_vol;
 2052              		.loc 1 1173 4 view .LVU705
1174:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 2053              		.loc 1 1174 4 view .LVU706
1176:rtos/uC-FS/FAT/fs_fat_sfn.c ****     p_dir_end_pos->SecPos = 0u;
 2054              		.loc 1 1176 5 view .LVU707
1176:rtos/uC-FS/FAT/fs_fat_sfn.c ****     p_dir_end_pos->SecPos = 0u;
 2055              		.loc 1 1176 27 is_stmt 0 view .LVU708
 2056 000e 0023     		movs	r3, #0
 2057              	.LVL232:
1176:rtos/uC-FS/FAT/fs_fat_sfn.c ****     p_dir_end_pos->SecPos = 0u;
 2058              		.loc 1 1176 27 view .LVU709
 2059 0010 3360     		str	r3, [r6]
1177:rtos/uC-FS/FAT/fs_fat_sfn.c ****     p_dir_entry           = (CPU_INT08U *)p_buf->DataPtr + p_dir_pos->SecPos;
 2060              		.loc 1 1177 5 is_stmt 1 view .LVU710
1177:rtos/uC-FS/FAT/fs_fat_sfn.c ****     p_dir_entry           = (CPU_INT08U *)p_buf->DataPtr + p_dir_pos->SecPos;
 2061              		.loc 1 1177 27 is_stmt 0 view .LVU711
 2062 0012 7360     		str	r3, [r6, #4]
1178:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 2063              		.loc 1 1178 5 is_stmt 1 view .LVU712
1178:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 2064              		.loc 1 1178 48 is_stmt 0 view .LVU713
 2065 0014 0B69     		ldr	r3, [r1, #16]
1178:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
ARM GAS  /tmp/ccpi2Pe2.s 			page 84


 2066              		.loc 1 1178 69 view .LVU714
 2067 0016 7A68     		ldr	r2, [r7, #4]
 2068              	.LVL233:
1178:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 2069              		.loc 1 1178 27 view .LVU715
 2070 0018 03EB0208 		add	r8, r3, r2
 2071              	.LVL234:
1183:rtos/uC-FS/FAT/fs_fat_sfn.c ****               p_dir_pos->SecNbr,
 2072              		.loc 1 1183 5 is_stmt 1 view .LVU716
 2073 001c 0095     		str	r5, [sp]
 2074 001e 0123     		movs	r3, #1
 2075 0020 0222     		movs	r2, #2
 2076 0022 3968     		ldr	r1, [r7]
 2077              	.LVL235:
1183:rtos/uC-FS/FAT/fs_fat_sfn.c ****               p_dir_pos->SecNbr,
 2078              		.loc 1 1183 5 is_stmt 0 view .LVU717
 2079 0024 2046     		mov	r0, r4
 2080              	.LVL236:
1183:rtos/uC-FS/FAT/fs_fat_sfn.c ****               p_dir_pos->SecNbr,
 2081              		.loc 1 1183 5 view .LVU718
 2082 0026 FFF7FEFF 		bl	FSBuf_Set
 2083              	.LVL237:
1188:rtos/uC-FS/FAT/fs_fat_sfn.c ****         return;
 2084              		.loc 1 1188 5 is_stmt 1 view .LVU719
1188:rtos/uC-FS/FAT/fs_fat_sfn.c ****         return;
 2085              		.loc 1 1188 9 is_stmt 0 view .LVU720
 2086 002a 2B88     		ldrh	r3, [r5]
1188:rtos/uC-FS/FAT/fs_fat_sfn.c ****         return;
 2087              		.loc 1 1188 8 view .LVU721
 2088 002c 13B1     		cbz	r3, .L153
 2089              	.L150:
1206:rtos/uC-FS/FAT/fs_fat_sfn.c **** #endif
 2090              		.loc 1 1206 1 view .LVU722
 2091 002e 02B0     		add	sp, sp, #8
 2092              	.LCFI36:
 2093              		.cfi_remember_state
 2094              		.cfi_def_cfa_offset 24
 2095              		@ sp needed
 2096 0030 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 2097              	.LVL238:
 2098              	.L153:
 2099              	.LCFI37:
 2100              		.cfi_restore_state
1192:rtos/uC-FS/FAT/fs_fat_sfn.c ****                            name_8_3,
 2101              		.loc 1 1192 5 is_stmt 1 view .LVU723
 2102 0034 0193     		str	r3, [sp, #4]
 2103 0036 0093     		str	r3, [sp]
 2104 0038 0A9B     		ldr	r3, [sp, #40]
 2105 003a 9DF82420 		ldrb	r2, [sp, #36]	@ zero_extendqisi2
 2106 003e 0899     		ldr	r1, [sp, #32]
 2107 0040 4046     		mov	r0, r8
 2108 0042 FFF7FEFF 		bl	FS_FAT_SFN_DirEntryFmt
 2109              	.LVL239:
1199:rtos/uC-FS/FAT/fs_fat_sfn.c ****     if (*p_err != FS_ERR_NONE) {
 2110              		.loc 1 1199 5 view .LVU724
 2111 0046 2946     		mov	r1, r5
 2112 0048 2046     		mov	r0, r4
ARM GAS  /tmp/ccpi2Pe2.s 			page 85


 2113 004a FFF7FEFF 		bl	FSBuf_MarkDirty
 2114              	.LVL240:
1200:rtos/uC-FS/FAT/fs_fat_sfn.c ****         return;
 2115              		.loc 1 1200 5 view .LVU725
1200:rtos/uC-FS/FAT/fs_fat_sfn.c ****         return;
 2116              		.loc 1 1200 9 is_stmt 0 view .LVU726
 2117 004e 2B88     		ldrh	r3, [r5]
1200:rtos/uC-FS/FAT/fs_fat_sfn.c ****         return;
 2118              		.loc 1 1200 8 view .LVU727
 2119 0050 002B     		cmp	r3, #0
 2120 0052 ECD1     		bne	.L150
1204:rtos/uC-FS/FAT/fs_fat_sfn.c ****     p_dir_end_pos->SecPos = p_dir_pos->SecPos;
 2121              		.loc 1 1204 5 is_stmt 1 view .LVU728
1204:rtos/uC-FS/FAT/fs_fat_sfn.c ****     p_dir_end_pos->SecPos = p_dir_pos->SecPos;
 2122              		.loc 1 1204 38 is_stmt 0 view .LVU729
 2123 0054 3B68     		ldr	r3, [r7]
1204:rtos/uC-FS/FAT/fs_fat_sfn.c ****     p_dir_end_pos->SecPos = p_dir_pos->SecPos;
 2124              		.loc 1 1204 27 view .LVU730
 2125 0056 3360     		str	r3, [r6]
1205:rtos/uC-FS/FAT/fs_fat_sfn.c **** }
 2126              		.loc 1 1205 5 is_stmt 1 view .LVU731
1205:rtos/uC-FS/FAT/fs_fat_sfn.c **** }
 2127              		.loc 1 1205 38 is_stmt 0 view .LVU732
 2128 0058 7B68     		ldr	r3, [r7, #4]
1205:rtos/uC-FS/FAT/fs_fat_sfn.c **** }
 2129              		.loc 1 1205 27 view .LVU733
 2130 005a 7360     		str	r3, [r6, #4]
 2131 005c E7E7     		b	.L150
 2132              		.cfi_endproc
 2133              	.LFE7:
 2135              		.section	.text.FS_FAT_SFN_Create,"ax",%progbits
 2136              		.align	1
 2137              		.global	FS_FAT_SFN_Create
 2138              		.syntax unified
 2139              		.thumb
 2140              		.thumb_func
 2141              		.fpu fpv4-sp-d16
 2143              	FS_FAT_SFN_Create:
 2144              	.LVL241:
 2145              	.LFB2:
 509:rtos/uC-FS/FAT/fs_fat_sfn.c ****     CPU_BOOLEAN       ext_lower_case;
 2146              		.loc 1 509 1 is_stmt 1 view -0
 2147              		.cfi_startproc
 2148              		@ args = 4, pretend = 0, frame = 24
 2149              		@ frame_needed = 0, uses_anonymous_args = 0
 509:rtos/uC-FS/FAT/fs_fat_sfn.c ****     CPU_BOOLEAN       ext_lower_case;
 2150              		.loc 1 509 1 is_stmt 0 view .LVU735
 2151 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 2152              	.LCFI38:
 2153              		.cfi_def_cfa_offset 36
 2154              		.cfi_offset 4, -36
 2155              		.cfi_offset 5, -32
 2156              		.cfi_offset 6, -28
 2157              		.cfi_offset 7, -24
 2158              		.cfi_offset 8, -20
 2159              		.cfi_offset 9, -16
 2160              		.cfi_offset 10, -12
ARM GAS  /tmp/ccpi2Pe2.s 			page 86


 2161              		.cfi_offset 11, -8
 2162              		.cfi_offset 14, -4
 2163 0004 87B0     		sub	sp, sp, #28
 2164              	.LCFI39:
 2165              		.cfi_def_cfa_offset 64
 2166 0006 0193     		str	r3, [sp, #4]
 510:rtos/uC-FS/FAT/fs_fat_sfn.c ****     CPU_BOOLEAN       has_period;
 2167              		.loc 1 510 5 is_stmt 1 view .LVU736
 511:rtos/uC-FS/FAT/fs_fat_sfn.c ****     CPU_BOOLEAN       has_upper;
 2168              		.loc 1 511 5 view .LVU737
 512:rtos/uC-FS/FAT/fs_fat_sfn.c ****     FS_FILE_NAME_LEN  i;
 2169              		.loc 1 512 5 view .LVU738
 513:rtos/uC-FS/FAT/fs_fat_sfn.c ****     CPU_BOOLEAN       is_legal;
 2170              		.loc 1 513 5 view .LVU739
 514:rtos/uC-FS/FAT/fs_fat_sfn.c ****     FS_FILE_NAME_LEN  len;
 2171              		.loc 1 514 5 view .LVU740
 515:rtos/uC-FS/FAT/fs_fat_sfn.c ****     CPU_BOOLEAN       lower;
 2172              		.loc 1 515 5 view .LVU741
 516:rtos/uC-FS/FAT/fs_fat_sfn.c ****     CPU_BOOLEAN       mixed;
 2173              		.loc 1 516 5 view .LVU742
 517:rtos/uC-FS/FAT/fs_fat_sfn.c ****     CPU_CHAR          name_char;
 2174              		.loc 1 517 5 view .LVU743
 518:rtos/uC-FS/FAT/fs_fat_sfn.c ****     CPU_CHAR          name_8_3_08[12];
 2175              		.loc 1 518 5 view .LVU744
 519:rtos/uC-FS/FAT/fs_fat_sfn.c ****     CPU_BOOLEAN       name_lower_case;
 2176              		.loc 1 519 5 view .LVU745
 520:rtos/uC-FS/FAT/fs_fat_sfn.c ****     CPU_BOOLEAN       upper;
 2177              		.loc 1 520 5 view .LVU746
 521:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 2178              		.loc 1 521 5 view .LVU747
 524:rtos/uC-FS/FAT/fs_fat_sfn.c ****     has_period      = DEF_NO;
 2179              		.loc 1 524 5 view .LVU748
 2180              	.LVL242:
 525:rtos/uC-FS/FAT/fs_fat_sfn.c ****     has_upper       = DEF_NO;
 2181              		.loc 1 525 5 view .LVU749
 526:rtos/uC-FS/FAT/fs_fat_sfn.c ****     is_legal        = DEF_YES;
 2182              		.loc 1 526 5 view .LVU750
 527:rtos/uC-FS/FAT/fs_fat_sfn.c ****     len             = 0u;
 2183              		.loc 1 527 5 view .LVU751
 528:rtos/uC-FS/FAT/fs_fat_sfn.c ****     mixed           = DEF_NO;
 2184              		.loc 1 528 5 view .LVU752
 529:rtos/uC-FS/FAT/fs_fat_sfn.c ****     name_lower_case = DEF_NO;
 2185              		.loc 1 529 5 view .LVU753
 530:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 2186              		.loc 1 530 5 view .LVU754
 532:rtos/uC-FS/FAT/fs_fat_sfn.c ****         name_8_3_08[i] = (CPU_CHAR)ASCII_CHAR_SPACE;
 2187              		.loc 1 532 5 view .LVU755
 532:rtos/uC-FS/FAT/fs_fat_sfn.c ****         name_8_3_08[i] = (CPU_CHAR)ASCII_CHAR_SPACE;
 2188              		.loc 1 532 12 is_stmt 0 view .LVU756
 2189 0008 0023     		movs	r3, #0
 2190              	.LVL243:
 532:rtos/uC-FS/FAT/fs_fat_sfn.c ****         name_8_3_08[i] = (CPU_CHAR)ASCII_CHAR_SPACE;
 2191              		.loc 1 532 5 view .LVU757
 2192 000a 06E0     		b	.L155
 2193              	.LVL244:
 2194              	.L156:
 533:rtos/uC-FS/FAT/fs_fat_sfn.c ****     }
ARM GAS  /tmp/ccpi2Pe2.s 			page 87


 2195              		.loc 1 533 9 is_stmt 1 discriminator 3 view .LVU758
 533:rtos/uC-FS/FAT/fs_fat_sfn.c ****     }
 2196              		.loc 1 533 24 is_stmt 0 discriminator 3 view .LVU759
 2197 000c 06AC     		add	r4, sp, #24
 2198 000e 1C44     		add	r4, r4, r3
 2199 0010 2025     		movs	r5, #32
 2200 0012 04F80C5C 		strb	r5, [r4, #-12]
 532:rtos/uC-FS/FAT/fs_fat_sfn.c ****         name_8_3_08[i] = (CPU_CHAR)ASCII_CHAR_SPACE;
 2201              		.loc 1 532 27 is_stmt 1 discriminator 3 view .LVU760
 532:rtos/uC-FS/FAT/fs_fat_sfn.c ****         name_8_3_08[i] = (CPU_CHAR)ASCII_CHAR_SPACE;
 2202              		.loc 1 532 28 is_stmt 0 discriminator 3 view .LVU761
 2203 0016 0133     		adds	r3, r3, #1
 2204              	.LVL245:
 532:rtos/uC-FS/FAT/fs_fat_sfn.c ****         name_8_3_08[i] = (CPU_CHAR)ASCII_CHAR_SPACE;
 2205              		.loc 1 532 28 discriminator 3 view .LVU762
 2206 0018 9BB2     		uxth	r3, r3
 2207              	.LVL246:
 2208              	.L155:
 532:rtos/uC-FS/FAT/fs_fat_sfn.c ****         name_8_3_08[i] = (CPU_CHAR)ASCII_CHAR_SPACE;
 2209              		.loc 1 532 18 is_stmt 1 discriminator 1 view .LVU763
 532:rtos/uC-FS/FAT/fs_fat_sfn.c ****         name_8_3_08[i] = (CPU_CHAR)ASCII_CHAR_SPACE;
 2210              		.loc 1 532 5 is_stmt 0 discriminator 1 view .LVU764
 2211 001a 0A2B     		cmp	r3, #10
 2212 001c F6D9     		bls	.L156
 535:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 2213              		.loc 1 535 5 is_stmt 1 view .LVU765
 535:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 2214              		.loc 1 535 21 is_stmt 0 view .LVU766
 2215 001e 0023     		movs	r3, #0
 2216              	.LVL247:
 535:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 2217              		.loc 1 535 21 view .LVU767
 2218 0020 8DF81730 		strb	r3, [sp, #23]
 540:rtos/uC-FS/FAT/fs_fat_sfn.c ****     switch (name_char) {                                        /* Rtn err if first char is '.', ' 
 2219              		.loc 1 540 5 is_stmt 1 view .LVU768
 540:rtos/uC-FS/FAT/fs_fat_sfn.c ****     switch (name_char) {                                        /* Rtn err if first char is '.', ' 
 2220              		.loc 1 540 15 is_stmt 0 view .LVU769
 2221 0024 0378     		ldrb	r3, [r0]	@ zero_extendqisi2
 2222              	.LVL248:
 541:rtos/uC-FS/FAT/fs_fat_sfn.c ****         case ASCII_CHAR_FULL_STOP:
 2223              		.loc 1 541 5 is_stmt 1 view .LVU770
 2224 0026 2E2B     		cmp	r3, #46
 2225 0028 17D0     		beq	.L157
 2226 002a 0BD8     		bhi	.L158
 2227 002c ABB1     		cbz	r3, .L157
 2228 002e 202B     		cmp	r3, #32
 2229 0030 13D0     		beq	.L157
 2230 0032 0027     		movs	r7, #0
 2231 0034 B946     		mov	r9, r7
 2232 0036 BC46     		mov	ip, r7
 2233 0038 0126     		movs	r6, #1
 2234 003a 3C46     		mov	r4, r7
 2235 003c B846     		mov	r8, r7
 2236 003e 3D46     		mov	r5, r7
 2237 0040 BB46     		mov	fp, r7
 2238 0042 5EE0     		b	.L172
 2239              	.L158:
ARM GAS  /tmp/ccpi2Pe2.s 			page 88


 2240 0044 5C2B     		cmp	r3, #92
 2241 0046 08D0     		beq	.L157
 2242 0048 0027     		movs	r7, #0
 2243 004a B946     		mov	r9, r7
 2244 004c BC46     		mov	ip, r7
 2245 004e 0126     		movs	r6, #1
 2246 0050 3C46     		mov	r4, r7
 2247 0052 B846     		mov	r8, r7
 2248 0054 3D46     		mov	r5, r7
 2249 0056 BB46     		mov	fp, r7
 2250 0058 53E0     		b	.L172
 2251              	.L157:
 546:rtos/uC-FS/FAT/fs_fat_sfn.c ****              return;
 2252              		.loc 1 546 13 view .LVU771
 546:rtos/uC-FS/FAT/fs_fat_sfn.c ****              return;
 2253              		.loc 1 546 20 is_stmt 0 view .LVU772
 2254 005a 40F28733 		movw	r3, #903
 2255              	.LVL249:
 546:rtos/uC-FS/FAT/fs_fat_sfn.c ****              return;
 2256              		.loc 1 546 20 view .LVU773
 2257 005e 109A     		ldr	r2, [sp, #64]
 2258              	.LVL250:
 546:rtos/uC-FS/FAT/fs_fat_sfn.c ****              return;
 2259              		.loc 1 546 20 view .LVU774
 2260 0060 1380     		strh	r3, [r2]	@ movhi
 2261              	.LVL251:
 547:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 2262              		.loc 1 547 14 is_stmt 1 view .LVU775
 2263              	.L154:
 628:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 2264              		.loc 1 628 1 is_stmt 0 view .LVU776
 2265 0062 07B0     		add	sp, sp, #28
 2266              	.LCFI40:
 2267              		.cfi_remember_state
 2268              		.cfi_def_cfa_offset 36
 2269              		@ sp needed
 2270 0064 BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 2271              	.LVL252:
 2272              	.L195:
 2273              	.LCFI41:
 2274              		.cfi_restore_state
 560:rtos/uC-FS/FAT/fs_fat_sfn.c ****                 i          += FS_FAT_SFN_NAME_MAX_NBR_CHAR - len;                  /* ... 'len' wil
 2275              		.loc 1 560 13 is_stmt 1 view .LVU777
 560:rtos/uC-FS/FAT/fs_fat_sfn.c ****                 i          += FS_FAT_SFN_NAME_MAX_NBR_CHAR - len;                  /* ... 'len' wil
 2276              		.loc 1 560 16 is_stmt 0 view .LVU778
 2277 0068 002D     		cmp	r5, #0
 2278 006a 45D1     		bne	.L180
 561:rtos/uC-FS/FAT/fs_fat_sfn.c ****                 has_period  = DEF_YES;
 2279              		.loc 1 561 17 is_stmt 1 view .LVU779
 561:rtos/uC-FS/FAT/fs_fat_sfn.c ****                 has_period  = DEF_YES;
 2280              		.loc 1 561 28 is_stmt 0 view .LVU780
 2281 006c A4EB0C04 		sub	r4, r4, ip
 2282              	.LVL253:
 561:rtos/uC-FS/FAT/fs_fat_sfn.c ****                 has_period  = DEF_YES;
 2283              		.loc 1 561 28 view .LVU781
 2284 0070 A4B2     		uxth	r4, r4
 2285 0072 0834     		adds	r4, r4, #8
ARM GAS  /tmp/ccpi2Pe2.s 			page 89


 2286 0074 A4B2     		uxth	r4, r4
 2287              	.LVL254:
 562:rtos/uC-FS/FAT/fs_fat_sfn.c ****                 has_upper   = DEF_NO;
 2288              		.loc 1 562 17 is_stmt 1 view .LVU782
 563:rtos/uC-FS/FAT/fs_fat_sfn.c ****                 len         = 0u;
 2289              		.loc 1 563 17 view .LVU783
 564:rtos/uC-FS/FAT/fs_fat_sfn.c ****             } else {                                            /* If 2nd period ... illegal name. 
 2290              		.loc 1 564 17 view .LVU784
 563:rtos/uC-FS/FAT/fs_fat_sfn.c ****                 len         = 0u;
 2291              		.loc 1 563 29 is_stmt 0 view .LVU785
 2292 0076 A846     		mov	r8, r5
 562:rtos/uC-FS/FAT/fs_fat_sfn.c ****                 has_upper   = DEF_NO;
 2293              		.loc 1 562 29 view .LVU786
 2294 0078 3546     		mov	r5, r6
 564:rtos/uC-FS/FAT/fs_fat_sfn.c ****             } else {                                            /* If 2nd period ... illegal name. 
 2295              		.loc 1 564 29 view .LVU787
 2296 007a 4FF0000C 		mov	ip, #0
 2297 007e 3EE0     		b	.L162
 2298              	.LVL255:
 2299              	.L196:
 569:rtos/uC-FS/FAT/fs_fat_sfn.c ****                 ((has_period == DEF_NO ) && (len < FS_FAT_SFN_NAME_MAX_NBR_CHAR))) {
 2300              		.loc 1 569 42 discriminator 1 view .LVU788
 2301 0080 BCF1020F 		cmp	ip, #2
 2302 0084 4BD9     		bls	.L164
 2303 0086 45E0     		b	.L163
 2304              	.L165:
 571:rtos/uC-FS/FAT/fs_fat_sfn.c ****                 if (is_legal == DEF_YES) {
 2305              		.loc 1 571 28 discriminator 6 view .LVU789
 2306 0088 A3F1400E 		sub	lr, r3, #64
 2307 008c 5FFA8EFE 		uxtb	lr, lr
 2308 0090 BEF11A0F 		cmp	lr, #26
 2309 0094 49D9     		bls	.L166
 571:rtos/uC-FS/FAT/fs_fat_sfn.c ****                 if (is_legal == DEF_YES) {
 2310              		.loc 1 571 28 discriminator 8 view .LVU790
 2311 0096 A3F1300E 		sub	lr, r3, #48
 2312 009a 5FFA8EFE 		uxtb	lr, lr
 2313 009e BEF1090F 		cmp	lr, #9
 2314 00a2 42D9     		bls	.L166
 571:rtos/uC-FS/FAT/fs_fat_sfn.c ****                 if (is_legal == DEF_YES) {
 2315              		.loc 1 571 28 discriminator 10 view .LVU791
 2316 00a4 2D2B     		cmp	r3, #45
 2317 00a6 40D0     		beq	.L166
 571:rtos/uC-FS/FAT/fs_fat_sfn.c ****                 if (is_legal == DEF_YES) {
 2318              		.loc 1 571 28 discriminator 12 view .LVU792
 2319 00a8 A3F1210E 		sub	lr, r3, #33
 2320 00ac 5FFA8EFE 		uxtb	lr, lr
 2321 00b0 BEF1080F 		cmp	lr, #8
 2322 00b4 5AD8     		bhi	.L183
 571:rtos/uC-FS/FAT/fs_fat_sfn.c ****                 if (is_legal == DEF_YES) {
 2323              		.loc 1 571 28 discriminator 13 view .LVU793
 2324 00b6 222B     		cmp	r3, #34
 2325 00b8 37D1     		bne	.L166
 598:rtos/uC-FS/FAT/fs_fat_sfn.c ****                 }
 2326              		.loc 1 598 30 view .LVU794
 2327 00ba 0026     		movs	r6, #0
 2328              	.LVL256:
 598:rtos/uC-FS/FAT/fs_fat_sfn.c ****                 }
ARM GAS  /tmp/ccpi2Pe2.s 			page 90


 2329              		.loc 1 598 30 view .LVU795
 2330 00bc 1FE0     		b	.L162
 2331              	.L167:
 2332              	.LVL257:
 574:rtos/uC-FS/FAT/fs_fat_sfn.c ****                         if (has_upper == DEF_YES) {
 2333              		.loc 1 574 21 is_stmt 1 view .LVU796
 575:rtos/uC-FS/FAT/fs_fat_sfn.c ****                             mixed = DEF_YES;
 2334              		.loc 1 575 25 view .LVU797
 575:rtos/uC-FS/FAT/fs_fat_sfn.c ****                             mixed = DEF_YES;
 2335              		.loc 1 575 28 is_stmt 0 view .LVU798
 2336 00be B8F1010F 		cmp	r8, #1
 2337 00c2 12D0     		beq	.L185
 578:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                 ext_lower_case = DEF_YES;
 2338              		.loc 1 578 29 is_stmt 1 view .LVU799
 578:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                 ext_lower_case = DEF_YES;
 2339              		.loc 1 578 32 is_stmt 0 view .LVU800
 2340 00c4 012D     		cmp	r5, #1
 2341 00c6 01D0     		beq	.L193
 581:rtos/uC-FS/FAT/fs_fat_sfn.c ****                             }
 2342              		.loc 1 581 49 view .LVU801
 2343 00c8 3746     		mov	r7, r6
 2344              	.LVL258:
 581:rtos/uC-FS/FAT/fs_fat_sfn.c ****                             }
 2345              		.loc 1 581 49 view .LVU802
 2346 00ca 3CE0     		b	.L169
 2347              	.LVL259:
 2348              	.L193:
 579:rtos/uC-FS/FAT/fs_fat_sfn.c ****                             } else {
 2349              		.loc 1 579 48 view .LVU803
 2350 00cc AB46     		mov	fp, r5
 2351              	.LVL260:
 579:rtos/uC-FS/FAT/fs_fat_sfn.c ****                             } else {
 2352              		.loc 1 579 48 view .LVU804
 2353 00ce 3AE0     		b	.L169
 2354              	.LVL261:
 2355              	.L168:
 586:rtos/uC-FS/FAT/fs_fat_sfn.c ****                             has_upper = DEF_YES;
 2356              		.loc 1 586 25 is_stmt 1 view .LVU805
 587:rtos/uC-FS/FAT/fs_fat_sfn.c ****                             if (((has_period == DEF_YES) && (ext_lower_case  == DEF_YES)) ||
 2357              		.loc 1 587 29 view .LVU806
 588:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                 ((has_period == DEF_NO)  && (name_lower_case == DEF_YES))) {
 2358              		.loc 1 588 29 view .LVU807
 588:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                 ((has_period == DEF_NO)  && (name_lower_case == DEF_YES))) {
 2359              		.loc 1 588 32 is_stmt 0 view .LVU808
 2360 00d0 012D     		cmp	r5, #1
 2361 00d2 04D0     		beq	.L194
 2362              	.L170:
 588:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                 ((has_period == DEF_NO)  && (name_lower_case == DEF_YES))) {
 2363              		.loc 1 588 91 discriminator 3 view .LVU809
 2364 00d4 5DB9     		cbnz	r5, .L188
 589:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                 mixed = DEF_YES;
 2365              		.loc 1 589 58 view .LVU810
 2366 00d6 012F     		cmp	r7, #1
 2367 00d8 0BD0     		beq	.L189
 587:rtos/uC-FS/FAT/fs_fat_sfn.c ****                             if (((has_period == DEF_YES) && (ext_lower_case  == DEF_YES)) ||
 2368              		.loc 1 587 39 view .LVU811
 2369 00da B046     		mov	r8, r6
ARM GAS  /tmp/ccpi2Pe2.s 			page 91


 2370 00dc 33E0     		b	.L169
 2371              	.L194:
 588:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                 ((has_period == DEF_NO)  && (name_lower_case == DEF_YES))) {
 2372              		.loc 1 588 58 discriminator 1 view .LVU812
 2373 00de BBF1010F 		cmp	fp, #1
 2374 00e2 F7D1     		bne	.L170
 590:rtos/uC-FS/FAT/fs_fat_sfn.c ****                             }
 2375              		.loc 1 590 39 view .LVU813
 2376 00e4 B146     		mov	r9, r6
 2377              	.LVL262:
 587:rtos/uC-FS/FAT/fs_fat_sfn.c ****                             if (((has_period == DEF_YES) && (ext_lower_case  == DEF_YES)) ||
 2378              		.loc 1 587 39 view .LVU814
 2379 00e6 B046     		mov	r8, r6
 2380 00e8 2DE0     		b	.L169
 2381              	.LVL263:
 2382              	.L185:
 576:rtos/uC-FS/FAT/fs_fat_sfn.c ****                         } else {
 2383              		.loc 1 576 35 view .LVU815
 2384 00ea C146     		mov	r9, r8
 2385              	.LVL264:
 576:rtos/uC-FS/FAT/fs_fat_sfn.c ****                         } else {
 2386              		.loc 1 576 35 view .LVU816
 2387 00ec 2BE0     		b	.L169
 2388              	.LVL265:
 2389              	.L188:
 587:rtos/uC-FS/FAT/fs_fat_sfn.c ****                             if (((has_period == DEF_YES) && (ext_lower_case  == DEF_YES)) ||
 2390              		.loc 1 587 39 view .LVU817
 2391 00ee A846     		mov	r8, r5
 2392 00f0 29E0     		b	.L169
 2393              	.L189:
 590:rtos/uC-FS/FAT/fs_fat_sfn.c ****                             }
 2394              		.loc 1 590 39 view .LVU818
 2395 00f2 B146     		mov	r9, r6
 2396              	.LVL266:
 587:rtos/uC-FS/FAT/fs_fat_sfn.c ****                             if (((has_period == DEF_YES) && (ext_lower_case  == DEF_YES)) ||
 2397              		.loc 1 587 39 view .LVU819
 2398 00f4 B046     		mov	r8, r6
 2399 00f6 26E0     		b	.L169
 2400              	.LVL267:
 2401              	.L180:
 566:rtos/uC-FS/FAT/fs_fat_sfn.c ****             }
 2402              		.loc 1 566 26 view .LVU820
 2403 00f8 0026     		movs	r6, #0
 2404              	.LVL268:
 566:rtos/uC-FS/FAT/fs_fat_sfn.c ****             }
 2405              		.loc 1 566 26 view .LVU821
 2406 00fa 00E0     		b	.L162
 2407              	.LVL269:
 2408              	.L181:
 601:rtos/uC-FS/FAT/fs_fat_sfn.c ****             }
 2409              		.loc 1 601 26 view .LVU822
 2410 00fc 0026     		movs	r6, #0
 2411              	.LVL270:
 2412              	.L162:
 604:rtos/uC-FS/FAT/fs_fat_sfn.c ****         name_char = *name;
 2413              		.loc 1 604 9 is_stmt 1 view .LVU823
 605:rtos/uC-FS/FAT/fs_fat_sfn.c ****     }
ARM GAS  /tmp/ccpi2Pe2.s 			page 92


 2414              		.loc 1 605 9 view .LVU824
 605:rtos/uC-FS/FAT/fs_fat_sfn.c ****     }
 2415              		.loc 1 605 19 is_stmt 0 view .LVU825
 2416 00fe 10F8013F 		ldrb	r3, [r0, #1]!	@ zero_extendqisi2
 2417              	.LVL271:
 2418              	.L172:
 556:rtos/uC-FS/FAT/fs_fat_sfn.c ****            (name_char != (CPU_CHAR)FS_FAT_PATH_SEP_CHAR) &&     /* ... or path sep        char ... 
 2419              		.loc 1 556 11 is_stmt 1 view .LVU826
 2420 0102 ABB3     		cbz	r3, .L173
 556:rtos/uC-FS/FAT/fs_fat_sfn.c ****            (name_char != (CPU_CHAR)FS_FAT_PATH_SEP_CHAR) &&     /* ... or path sep        char ... 
 2421              		.loc 1 556 58 is_stmt 0 discriminator 1 view .LVU827
 2422 0104 5C2B     		cmp	r3, #92
 2423 0106 33D0     		beq	.L173
 557:rtos/uC-FS/FAT/fs_fat_sfn.c ****            (is_legal  ==  DEF_YES                      )) {     /* ... or illegal name is found.   
 2424              		.loc 1 557 58 view .LVU828
 2425 0108 012E     		cmp	r6, #1
 2426 010a 31D1     		bne	.L173
 559:rtos/uC-FS/FAT/fs_fat_sfn.c ****             if (has_period == DEF_NO) {                         /* Entering extension ...          
 2427              		.loc 1 559 9 is_stmt 1 view .LVU829
 559:rtos/uC-FS/FAT/fs_fat_sfn.c ****             if (has_period == DEF_NO) {                         /* Entering extension ...          
 2428              		.loc 1 559 12 is_stmt 0 view .LVU830
 2429 010c 2E2B     		cmp	r3, #46
 2430 010e ABD0     		beq	.L195
 569:rtos/uC-FS/FAT/fs_fat_sfn.c ****                 ((has_period == DEF_NO ) && (len < FS_FAT_SFN_NAME_MAX_NBR_CHAR))) {
 2431              		.loc 1 569 13 is_stmt 1 view .LVU831
 569:rtos/uC-FS/FAT/fs_fat_sfn.c ****                 ((has_period == DEF_NO ) && (len < FS_FAT_SFN_NAME_MAX_NBR_CHAR))) {
 2432              		.loc 1 569 16 is_stmt 0 view .LVU832
 2433 0110 012D     		cmp	r5, #1
 2434 0112 B5D0     		beq	.L196
 2435              	.L163:
 569:rtos/uC-FS/FAT/fs_fat_sfn.c ****                 ((has_period == DEF_NO ) && (len < FS_FAT_SFN_NAME_MAX_NBR_CHAR))) {
 2436              		.loc 1 569 83 discriminator 3 view .LVU833
 2437 0114 002D     		cmp	r5, #0
 2438 0116 F1D1     		bne	.L181
 570:rtos/uC-FS/FAT/fs_fat_sfn.c ****                 is_legal = FS_FAT_IS_LEGAL_SFN_CHAR(name_char);
 2439              		.loc 1 570 42 view .LVU834
 2440 0118 BCF1070F 		cmp	ip, #7
 2441 011c 24D8     		bhi	.L182
 2442              	.L164:
 571:rtos/uC-FS/FAT/fs_fat_sfn.c ****                 if (is_legal == DEF_YES) {
 2443              		.loc 1 571 17 is_stmt 1 view .LVU835
 571:rtos/uC-FS/FAT/fs_fat_sfn.c ****                 if (is_legal == DEF_YES) {
 2444              		.loc 1 571 26 is_stmt 0 view .LVU836
 2445 011e 5D2B     		cmp	r3, #93
 2446 0120 B2D9     		bls	.L165
 571:rtos/uC-FS/FAT/fs_fat_sfn.c ****                 if (is_legal == DEF_YES) {
 2447              		.loc 1 571 28 discriminator 1 view .LVU837
 2448 0122 7C2B     		cmp	r3, #124
 2449 0124 B0D0     		beq	.L165
 571:rtos/uC-FS/FAT/fs_fat_sfn.c ****                 if (is_legal == DEF_YES) {
 2450              		.loc 1 571 28 discriminator 3 view .LVU838
 2451 0126 7F2B     		cmp	r3, #127
 2452 0128 AED0     		beq	.L165
 2453              	.L166:
 2454              	.LVL272:
 573:rtos/uC-FS/FAT/fs_fat_sfn.c ****                     if (lower == DEF_YES) {
 2455              		.loc 1 573 21 is_stmt 1 view .LVU839
ARM GAS  /tmp/ccpi2Pe2.s 			page 93


 573:rtos/uC-FS/FAT/fs_fat_sfn.c ****                     if (lower == DEF_YES) {
 2456              		.loc 1 573 29 is_stmt 0 view .LVU840
 2457 012a A3F1610E 		sub	lr, r3, #97
 2458 012e 5FFA8EFE 		uxtb	lr, lr
 573:rtos/uC-FS/FAT/fs_fat_sfn.c ****                     if (lower == DEF_YES) {
 2459              		.loc 1 573 27 view .LVU841
 2460 0132 BEF1190F 		cmp	lr, #25
 2461 0136 C2D9     		bls	.L167
 2462              	.LVL273:
 574:rtos/uC-FS/FAT/fs_fat_sfn.c ****                         if (has_upper == DEF_YES) {
 2463              		.loc 1 574 21 is_stmt 1 view .LVU842
 585:rtos/uC-FS/FAT/fs_fat_sfn.c ****                         if (upper == DEF_YES) {
 2464              		.loc 1 585 25 view .LVU843
 585:rtos/uC-FS/FAT/fs_fat_sfn.c ****                         if (upper == DEF_YES) {
 2465              		.loc 1 585 33 is_stmt 0 view .LVU844
 2466 0138 A3F1410A 		sub	r10, r3, #65
 2467 013c 5FFA8AFA 		uxtb	r10, r10
 585:rtos/uC-FS/FAT/fs_fat_sfn.c ****                         if (upper == DEF_YES) {
 2468              		.loc 1 585 31 view .LVU845
 2469 0140 BAF1190F 		cmp	r10, #25
 2470 0144 C4D9     		bls	.L168
 2471              	.LVL274:
 2472              	.L169:
 594:rtos/uC-FS/FAT/fs_fat_sfn.c ****                     i++;
 2473              		.loc 1 594 21 is_stmt 1 view .LVU846
 594:rtos/uC-FS/FAT/fs_fat_sfn.c ****                     i++;
 2474              		.loc 1 594 36 is_stmt 0 view .LVU847
 2475 0146 BEF1190F 		cmp	lr, #25
 2476 014a 01D8     		bhi	.L171
 594:rtos/uC-FS/FAT/fs_fat_sfn.c ****                     i++;
 2477              		.loc 1 594 36 discriminator 1 view .LVU848
 2478 014c 203B     		subs	r3, r3, #32
 2479              	.LVL275:
 594:rtos/uC-FS/FAT/fs_fat_sfn.c ****                     i++;
 2480              		.loc 1 594 36 discriminator 1 view .LVU849
 2481 014e DBB2     		uxtb	r3, r3
 2482              	.L171:
 594:rtos/uC-FS/FAT/fs_fat_sfn.c ****                     i++;
 2483              		.loc 1 594 36 discriminator 4 view .LVU850
 2484 0150 0DF1180E 		add	lr, sp, #24
 2485 0154 A644     		add	lr, lr, r4
 2486 0156 0EF80C3C 		strb	r3, [lr, #-12]
 595:rtos/uC-FS/FAT/fs_fat_sfn.c ****                     len++;
 2487              		.loc 1 595 21 is_stmt 1 discriminator 4 view .LVU851
 595:rtos/uC-FS/FAT/fs_fat_sfn.c ****                     len++;
 2488              		.loc 1 595 22 is_stmt 0 discriminator 4 view .LVU852
 2489 015a 0134     		adds	r4, r4, #1
 2490              	.LVL276:
 595:rtos/uC-FS/FAT/fs_fat_sfn.c ****                     len++;
 2491              		.loc 1 595 22 discriminator 4 view .LVU853
 2492 015c A4B2     		uxth	r4, r4
 2493              	.LVL277:
 596:rtos/uC-FS/FAT/fs_fat_sfn.c ****                 } else {
 2494              		.loc 1 596 21 is_stmt 1 discriminator 4 view .LVU854
 596:rtos/uC-FS/FAT/fs_fat_sfn.c ****                 } else {
 2495              		.loc 1 596 24 is_stmt 0 discriminator 4 view .LVU855
 2496 015e 0CF1010C 		add	ip, ip, #1
ARM GAS  /tmp/ccpi2Pe2.s 			page 94


 2497              	.LVL278:
 596:rtos/uC-FS/FAT/fs_fat_sfn.c ****                 } else {
 2498              		.loc 1 596 24 discriminator 4 view .LVU856
 2499 0162 1FFA8CFC 		uxth	ip, ip
 2500              	.LVL279:
 596:rtos/uC-FS/FAT/fs_fat_sfn.c ****                 } else {
 2501              		.loc 1 596 24 discriminator 4 view .LVU857
 2502 0166 CAE7     		b	.L162
 2503              	.LVL280:
 2504              	.L182:
 601:rtos/uC-FS/FAT/fs_fat_sfn.c ****             }
 2505              		.loc 1 601 26 view .LVU858
 2506 0168 2E46     		mov	r6, r5
 2507              	.LVL281:
 601:rtos/uC-FS/FAT/fs_fat_sfn.c ****             }
 2508              		.loc 1 601 26 view .LVU859
 2509 016a C8E7     		b	.L162
 2510              	.LVL282:
 2511              	.L183:
 598:rtos/uC-FS/FAT/fs_fat_sfn.c ****                 }
 2512              		.loc 1 598 30 view .LVU860
 2513 016c 0026     		movs	r6, #0
 2514              	.LVL283:
 598:rtos/uC-FS/FAT/fs_fat_sfn.c ****                 }
 2515              		.loc 1 598 30 view .LVU861
 2516 016e C6E7     		b	.L162
 2517              	.LVL284:
 2518              	.L173:
 610:rtos/uC-FS/FAT/fs_fat_sfn.c ****        *p_err = FS_ERR_NAME_INVALID;
 2519              		.loc 1 610 5 is_stmt 1 view .LVU862
 610:rtos/uC-FS/FAT/fs_fat_sfn.c ****        *p_err = FS_ERR_NAME_INVALID;
 2520              		.loc 1 610 8 is_stmt 0 view .LVU863
 2521 0170 002E     		cmp	r6, #0
 2522 0172 3AD0     		beq	.L197
 615:rtos/uC-FS/FAT/fs_fat_sfn.c ****     name_8_3[1] = MEM_VAL_GET_INT32U((void *)&name_8_3_08[4]);
 2523              		.loc 1 615 5 is_stmt 1 view .LVU864
 615:rtos/uC-FS/FAT/fs_fat_sfn.c ****     name_8_3[1] = MEM_VAL_GET_INT32U((void *)&name_8_3_08[4]);
 2524              		.loc 1 615 19 is_stmt 0 view .LVU865
 2525 0174 9DF80C30 		ldrb	r3, [sp, #12]	@ zero_extendqisi2
 2526              	.LVL285:
 615:rtos/uC-FS/FAT/fs_fat_sfn.c ****     name_8_3[1] = MEM_VAL_GET_INT32U((void *)&name_8_3_08[4]);
 2527              		.loc 1 615 19 view .LVU866
 2528 0178 9DF80D00 		ldrb	r0, [sp, #13]	@ zero_extendqisi2
 2529              	.LVL286:
 615:rtos/uC-FS/FAT/fs_fat_sfn.c ****     name_8_3[1] = MEM_VAL_GET_INT32U((void *)&name_8_3_08[4]);
 2530              		.loc 1 615 19 view .LVU867
 2531 017c 03EB0023 		add	r3, r3, r0, lsl #8
 2532 0180 9DF80E00 		ldrb	r0, [sp, #14]	@ zero_extendqisi2
 2533 0184 03EB0043 		add	r3, r3, r0, lsl #16
 2534 0188 9DF80F00 		ldrb	r0, [sp, #15]	@ zero_extendqisi2
 2535 018c 03EB0063 		add	r3, r3, r0, lsl #24
 615:rtos/uC-FS/FAT/fs_fat_sfn.c ****     name_8_3[1] = MEM_VAL_GET_INT32U((void *)&name_8_3_08[4]);
 2536              		.loc 1 615 17 view .LVU868
 2537 0190 0B60     		str	r3, [r1]
 616:rtos/uC-FS/FAT/fs_fat_sfn.c ****     name_8_3[2] = MEM_VAL_GET_INT32U((void *)&name_8_3_08[8]);
 2538              		.loc 1 616 5 is_stmt 1 view .LVU869
 616:rtos/uC-FS/FAT/fs_fat_sfn.c ****     name_8_3[2] = MEM_VAL_GET_INT32U((void *)&name_8_3_08[8]);
ARM GAS  /tmp/ccpi2Pe2.s 			page 95


 2539              		.loc 1 616 19 is_stmt 0 view .LVU870
 2540 0192 9DF81030 		ldrb	r3, [sp, #16]	@ zero_extendqisi2
 2541 0196 9DF81100 		ldrb	r0, [sp, #17]	@ zero_extendqisi2
 2542 019a 03EB0023 		add	r3, r3, r0, lsl #8
 2543 019e 9DF81200 		ldrb	r0, [sp, #18]	@ zero_extendqisi2
 2544 01a2 03EB0043 		add	r3, r3, r0, lsl #16
 2545 01a6 9DF81300 		ldrb	r0, [sp, #19]	@ zero_extendqisi2
 2546 01aa 03EB0063 		add	r3, r3, r0, lsl #24
 616:rtos/uC-FS/FAT/fs_fat_sfn.c ****     name_8_3[2] = MEM_VAL_GET_INT32U((void *)&name_8_3_08[8]);
 2547              		.loc 1 616 17 view .LVU871
 2548 01ae 4B60     		str	r3, [r1, #4]
 617:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 2549              		.loc 1 617 5 is_stmt 1 view .LVU872
 617:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 2550              		.loc 1 617 19 is_stmt 0 view .LVU873
 2551 01b0 9DF81430 		ldrb	r3, [sp, #20]	@ zero_extendqisi2
 2552 01b4 9DF81500 		ldrb	r0, [sp, #21]	@ zero_extendqisi2
 2553 01b8 03EB0023 		add	r3, r3, r0, lsl #8
 2554 01bc 9DF81600 		ldrb	r0, [sp, #22]	@ zero_extendqisi2
 2555 01c0 03EB0043 		add	r3, r3, r0, lsl #16
 2556 01c4 9DF81700 		ldrb	r0, [sp, #23]	@ zero_extendqisi2
 2557 01c8 03EB0063 		add	r3, r3, r0, lsl #24
 617:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 2558              		.loc 1 617 17 view .LVU874
 2559 01cc 8B60     		str	r3, [r1, #8]
 619:rtos/uC-FS/FAT/fs_fat_sfn.c ****         name_lower_case = DEF_NO;
 2560              		.loc 1 619 5 is_stmt 1 view .LVU875
 619:rtos/uC-FS/FAT/fs_fat_sfn.c ****         name_lower_case = DEF_NO;
 2561              		.loc 1 619 8 is_stmt 0 view .LVU876
 2562 01ce B9F1010F 		cmp	r9, #1
 2563 01d2 0FD0     		beq	.L198
 2564              	.LVL287:
 2565              	.L176:
 624:rtos/uC-FS/FAT/fs_fat_sfn.c ****    *p_ext_lower_case  = ext_lower_case;
 2566              		.loc 1 624 4 is_stmt 1 view .LVU877
 624:rtos/uC-FS/FAT/fs_fat_sfn.c ****    *p_ext_lower_case  = ext_lower_case;
 2567              		.loc 1 624 23 is_stmt 0 view .LVU878
 2568 01d4 1770     		strb	r7, [r2]
 625:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 2569              		.loc 1 625 4 is_stmt 1 view .LVU879
 625:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 2570              		.loc 1 625 23 is_stmt 0 view .LVU880
 2571 01d6 019B     		ldr	r3, [sp, #4]
 2572 01d8 83F800B0 		strb	fp, [r3]
 627:rtos/uC-FS/FAT/fs_fat_sfn.c **** }
 2573              		.loc 1 627 4 is_stmt 1 view .LVU881
 627:rtos/uC-FS/FAT/fs_fat_sfn.c **** }
 2574              		.loc 1 627 57 is_stmt 0 view .LVU882
 2575 01dc B9F1010F 		cmp	r9, #1
 2576 01e0 0BD0     		beq	.L199
 2577 01e2 0023     		movs	r3, #0
 2578              	.L177:
 627:rtos/uC-FS/FAT/fs_fat_sfn.c **** }
 2579              		.loc 1 627 11 discriminator 4 view .LVU883
 2580 01e4 109A     		ldr	r2, [sp, #64]
 2581              	.LVL288:
 627:rtos/uC-FS/FAT/fs_fat_sfn.c **** }
ARM GAS  /tmp/ccpi2Pe2.s 			page 96


 2582              		.loc 1 627 11 discriminator 4 view .LVU884
 2583 01e6 1380     		strh	r3, [r2]	@ movhi
 2584 01e8 3BE7     		b	.L154
 2585              	.LVL289:
 2586              	.L197:
 611:rtos/uC-FS/FAT/fs_fat_sfn.c ****         return;
 2587              		.loc 1 611 8 is_stmt 1 view .LVU885
 611:rtos/uC-FS/FAT/fs_fat_sfn.c ****         return;
 2588              		.loc 1 611 15 is_stmt 0 view .LVU886
 2589 01ea 40F28733 		movw	r3, #903
 2590              	.LVL290:
 611:rtos/uC-FS/FAT/fs_fat_sfn.c ****         return;
 2591              		.loc 1 611 15 view .LVU887
 2592 01ee 109A     		ldr	r2, [sp, #64]
 2593              	.LVL291:
 611:rtos/uC-FS/FAT/fs_fat_sfn.c ****         return;
 2594              		.loc 1 611 15 view .LVU888
 2595 01f0 1380     		strh	r3, [r2]	@ movhi
 612:rtos/uC-FS/FAT/fs_fat_sfn.c ****     }
 2596              		.loc 1 612 9 is_stmt 1 view .LVU889
 2597 01f2 36E7     		b	.L154
 2598              	.LVL292:
 2599              	.L198:
 620:rtos/uC-FS/FAT/fs_fat_sfn.c ****         ext_lower_case  = DEF_NO;
 2600              		.loc 1 620 25 is_stmt 0 view .LVU890
 2601 01f4 0027     		movs	r7, #0
 2602              	.LVL293:
 621:rtos/uC-FS/FAT/fs_fat_sfn.c ****     }
 2603              		.loc 1 621 25 view .LVU891
 2604 01f6 BB46     		mov	fp, r7
 2605              	.LVL294:
 621:rtos/uC-FS/FAT/fs_fat_sfn.c ****     }
 2606              		.loc 1 621 25 view .LVU892
 2607 01f8 ECE7     		b	.L176
 2608              	.LVL295:
 2609              	.L199:
 627:rtos/uC-FS/FAT/fs_fat_sfn.c **** }
 2610              		.loc 1 627 57 view .LVU893
 2611 01fa 4FF46273 		mov	r3, #904
 2612 01fe F1E7     		b	.L177
 2613              		.cfi_endproc
 2614              	.LFE2:
 2616              		.section	.text.FS_FAT_SFN_DirEntryCreate,"ax",%progbits
 2617              		.align	1
 2618              		.syntax unified
 2619              		.thumb
 2620              		.thumb_func
 2621              		.fpu fpv4-sp-d16
 2623              	FS_FAT_SFN_DirEntryCreate:
 2624              	.LVL296:
 2625              	.LFB6:
1010:rtos/uC-FS/FAT/fs_fat_sfn.c ****     FS_FAT_DIR_POS   dir_cur_pos;
 2626              		.loc 1 1010 1 is_stmt 1 view -0
 2627              		.cfi_startproc
 2628              		@ args = 16, pretend = 0, frame = 32
 2629              		@ frame_needed = 0, uses_anonymous_args = 0
1010:rtos/uC-FS/FAT/fs_fat_sfn.c ****     FS_FAT_DIR_POS   dir_cur_pos;
ARM GAS  /tmp/ccpi2Pe2.s 			page 97


 2630              		.loc 1 1010 1 is_stmt 0 view .LVU895
 2631 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 2632              	.LCFI42:
 2633              		.cfi_def_cfa_offset 24
 2634              		.cfi_offset 4, -24
 2635              		.cfi_offset 5, -20
 2636              		.cfi_offset 6, -16
 2637              		.cfi_offset 7, -12
 2638              		.cfi_offset 8, -8
 2639              		.cfi_offset 14, -4
 2640 0004 8AB0     		sub	sp, sp, #40
 2641              	.LCFI43:
 2642              		.cfi_def_cfa_offset 64
 2643 0006 0646     		mov	r6, r0
 2644 0008 0D46     		mov	r5, r1
 2645 000a 1046     		mov	r0, r2
 2646              	.LVL297:
1010:rtos/uC-FS/FAT/fs_fat_sfn.c ****     FS_FAT_DIR_POS   dir_cur_pos;
 2647              		.loc 1 1010 1 view .LVU896
 2648 000c 9846     		mov	r8, r3
 2649 000e 129F     		ldr	r7, [sp, #72]
 2650 0010 139C     		ldr	r4, [sp, #76]
1011:rtos/uC-FS/FAT/fs_fat_sfn.c ****     CPU_INT08U      *p_dir_entry;
 2651              		.loc 1 1011 5 is_stmt 1 view .LVU897
1012:rtos/uC-FS/FAT/fs_fat_sfn.c ****     CPU_BOOLEAN      ext_lower_case;
 2652              		.loc 1 1012 5 view .LVU898
1013:rtos/uC-FS/FAT/fs_fat_sfn.c ****     CPU_INT32U       name_8_3[3];
 2653              		.loc 1 1013 5 view .LVU899
1014:rtos/uC-FS/FAT/fs_fat_sfn.c ****     CPU_BOOLEAN      name_lower_case;
 2654              		.loc 1 1014 5 view .LVU900
1015:rtos/uC-FS/FAT/fs_fat_sfn.c **** #ifdef  FS_FAT_JOURNAL_MODULE_PRESENT
 2655              		.loc 1 1015 5 view .LVU901
1021:rtos/uC-FS/FAT/fs_fat_sfn.c ****     p_dir_end_pos->SecPos = 0u;
 2656              		.loc 1 1021 5 view .LVU902
1021:rtos/uC-FS/FAT/fs_fat_sfn.c ****     p_dir_end_pos->SecPos = 0u;
 2657              		.loc 1 1021 27 is_stmt 0 view .LVU903
 2658 0012 0022     		movs	r2, #0
 2659              	.LVL298:
1021:rtos/uC-FS/FAT/fs_fat_sfn.c ****     p_dir_end_pos->SecPos = 0u;
 2660              		.loc 1 1021 27 view .LVU904
 2661 0014 3A60     		str	r2, [r7]
1022:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 2662              		.loc 1 1022 5 is_stmt 1 view .LVU905
1022:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 2663              		.loc 1 1022 27 is_stmt 0 view .LVU906
 2664 0016 7A60     		str	r2, [r7, #4]
1026:rtos/uC-FS/FAT/fs_fat_sfn.c ****                       &name_8_3[0],
 2665              		.loc 1 1026 5 is_stmt 1 view .LVU907
 2666 0018 0094     		str	r4, [sp]
 2667 001a 0DF11F03 		add	r3, sp, #31
 2668              	.LVL299:
1026:rtos/uC-FS/FAT/fs_fat_sfn.c ****                       &name_8_3[0],
 2669              		.loc 1 1026 5 is_stmt 0 view .LVU908
 2670 001e 0DF10F02 		add	r2, sp, #15
 2671 0022 04A9     		add	r1, sp, #16
 2672              	.LVL300:
1026:rtos/uC-FS/FAT/fs_fat_sfn.c ****                       &name_8_3[0],
ARM GAS  /tmp/ccpi2Pe2.s 			page 98


 2673              		.loc 1 1026 5 view .LVU909
 2674 0024 FFF7FEFF 		bl	FS_FAT_SFN_Create
 2675              	.LVL301:
1032:rtos/uC-FS/FAT/fs_fat_sfn.c ****         (*p_err != FS_ERR_NAME_MIXED_CASE)) {
 2676              		.loc 1 1032 5 is_stmt 1 view .LVU910
1032:rtos/uC-FS/FAT/fs_fat_sfn.c ****         (*p_err != FS_ERR_NAME_MIXED_CASE)) {
 2677              		.loc 1 1032 10 is_stmt 0 view .LVU911
 2678 0028 2288     		ldrh	r2, [r4]
1032:rtos/uC-FS/FAT/fs_fat_sfn.c ****         (*p_err != FS_ERR_NAME_MIXED_CASE)) {
 2679              		.loc 1 1032 8 view .LVU912
 2680 002a 32B1     		cbz	r2, .L201
1032:rtos/uC-FS/FAT/fs_fat_sfn.c ****         (*p_err != FS_ERR_NAME_MIXED_CASE)) {
 2681              		.loc 1 1032 33 discriminator 1 view .LVU913
 2682 002c B2F5627F 		cmp	r2, #904
 2683 0030 03D0     		beq	.L201
1034:rtos/uC-FS/FAT/fs_fat_sfn.c ****           return;
 2684              		.loc 1 1034 10 is_stmt 1 view .LVU914
1034:rtos/uC-FS/FAT/fs_fat_sfn.c ****           return;
 2685              		.loc 1 1034 18 is_stmt 0 view .LVU915
 2686 0032 40F28733 		movw	r3, #903
 2687 0036 2380     		strh	r3, [r4]	@ movhi
1035:rtos/uC-FS/FAT/fs_fat_sfn.c ****     }
 2688              		.loc 1 1035 11 is_stmt 1 view .LVU916
 2689 0038 09E0     		b	.L200
 2690              	.L201:
1040:rtos/uC-FS/FAT/fs_fat_sfn.c ****                               p_buf,
 2691              		.loc 1 1040 5 view .LVU917
 2692 003a 0094     		str	r4, [sp]
 2693 003c 08AB     		add	r3, sp, #32
 2694 003e 119A     		ldr	r2, [sp, #68]
 2695 0040 1268     		ldr	r2, [r2]
 2696 0042 2946     		mov	r1, r5
 2697 0044 3046     		mov	r0, r6
 2698 0046 FFF7FEFF 		bl	FS_FAT_SFN_DirEntryPlace
 2699              	.LVL302:
1046:rtos/uC-FS/FAT/fs_fat_sfn.c ****         case FS_ERR_NONE:
 2700              		.loc 1 1046 5 view .LVU918
1046:rtos/uC-FS/FAT/fs_fat_sfn.c ****         case FS_ERR_NONE:
 2701              		.loc 1 1046 13 is_stmt 0 view .LVU919
 2702 004a 2388     		ldrh	r3, [r4]
1046:rtos/uC-FS/FAT/fs_fat_sfn.c ****         case FS_ERR_NONE:
 2703              		.loc 1 1046 5 view .LVU920
 2704 004c 13B1     		cbz	r3, .L205
 2705              	.LVL303:
 2706              	.L200:
1111:rtos/uC-FS/FAT/fs_fat_sfn.c **** #endif
 2707              		.loc 1 1111 1 view .LVU921
 2708 004e 0AB0     		add	sp, sp, #40
 2709              	.LCFI44:
 2710              		.cfi_remember_state
 2711              		.cfi_def_cfa_offset 24
 2712              		@ sp needed
 2713 0050 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 2714              	.LVL304:
 2715              	.L205:
 2716              	.LCFI45:
 2717              		.cfi_restore_state
ARM GAS  /tmp/ccpi2Pe2.s 			page 99


1048:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 2718              		.loc 1 1048 14 is_stmt 1 view .LVU922
1080:rtos/uC-FS/FAT/fs_fat_sfn.c ****               dir_cur_pos.SecNbr,
 2719              		.loc 1 1080 5 view .LVU923
 2720 0054 0094     		str	r4, [sp]
 2721 0056 0123     		movs	r3, #1
 2722 0058 0222     		movs	r2, #2
 2723 005a 0899     		ldr	r1, [sp, #32]
 2724 005c 2846     		mov	r0, r5
 2725 005e FFF7FEFF 		bl	FSBuf_Set
 2726              	.LVL305:
1086:rtos/uC-FS/FAT/fs_fat_sfn.c ****         return;
 2727              		.loc 1 1086 5 view .LVU924
1086:rtos/uC-FS/FAT/fs_fat_sfn.c ****         return;
 2728              		.loc 1 1086 9 is_stmt 0 view .LVU925
 2729 0062 2388     		ldrh	r3, [r4]
1086:rtos/uC-FS/FAT/fs_fat_sfn.c ****         return;
 2730              		.loc 1 1086 8 view .LVU926
 2731 0064 002B     		cmp	r3, #0
 2732 0066 F2D1     		bne	.L200
1092:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 2733              		.loc 1 1092 5 is_stmt 1 view .LVU927
1092:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 2734              		.loc 1 1092 38 is_stmt 0 view .LVU928
 2735 0068 2869     		ldr	r0, [r5, #16]
 2736              	.LVL306:
1094:rtos/uC-FS/FAT/fs_fat_sfn.c ****                            name_8_3,
 2737              		.loc 1 1094 5 is_stmt 1 view .LVU929
 2738 006a 9DF81F30 		ldrb	r3, [sp, #31]	@ zero_extendqisi2
 2739 006e 0193     		str	r3, [sp, #4]
 2740 0070 9DF80F30 		ldrb	r3, [sp, #15]	@ zero_extendqisi2
 2741 0074 0093     		str	r3, [sp]
 2742 0076 109B     		ldr	r3, [sp, #64]
 2743 0078 4246     		mov	r2, r8
 2744 007a 04A9     		add	r1, sp, #16
 2745 007c 099E     		ldr	r6, [sp, #36]
 2746              	.LVL307:
1094:rtos/uC-FS/FAT/fs_fat_sfn.c ****                            name_8_3,
 2747              		.loc 1 1094 5 is_stmt 0 view .LVU930
 2748 007e 3044     		add	r0, r0, r6
 2749              	.LVL308:
1094:rtos/uC-FS/FAT/fs_fat_sfn.c ****                            name_8_3,
 2750              		.loc 1 1094 5 view .LVU931
 2751 0080 FFF7FEFF 		bl	FS_FAT_SFN_DirEntryFmt
 2752              	.LVL309:
1100:rtos/uC-FS/FAT/fs_fat_sfn.c ****     if (*p_err != FS_ERR_NONE) {
 2753              		.loc 1 1100 5 is_stmt 1 view .LVU932
 2754 0084 2146     		mov	r1, r4
 2755 0086 2846     		mov	r0, r5
 2756 0088 FFF7FEFF 		bl	FSBuf_MarkDirty
 2757              	.LVL310:
1101:rtos/uC-FS/FAT/fs_fat_sfn.c ****         return;
 2758              		.loc 1 1101 5 view .LVU933
1101:rtos/uC-FS/FAT/fs_fat_sfn.c ****         return;
 2759              		.loc 1 1101 9 is_stmt 0 view .LVU934
 2760 008c 2388     		ldrh	r3, [r4]
1101:rtos/uC-FS/FAT/fs_fat_sfn.c ****         return;
ARM GAS  /tmp/ccpi2Pe2.s 			page 100


 2761              		.loc 1 1101 8 view .LVU935
 2762 008e 002B     		cmp	r3, #0
 2763 0090 DDD1     		bne	.L200
1106:rtos/uC-FS/FAT/fs_fat_sfn.c ****     p_dir_start_pos->SecPos = dir_cur_pos.SecPos;
 2764              		.loc 1 1106 5 is_stmt 1 view .LVU936
1106:rtos/uC-FS/FAT/fs_fat_sfn.c ****     p_dir_start_pos->SecPos = dir_cur_pos.SecPos;
 2765              		.loc 1 1106 42 is_stmt 0 view .LVU937
 2766 0092 089A     		ldr	r2, [sp, #32]
1106:rtos/uC-FS/FAT/fs_fat_sfn.c ****     p_dir_start_pos->SecPos = dir_cur_pos.SecPos;
 2767              		.loc 1 1106 29 view .LVU938
 2768 0094 119B     		ldr	r3, [sp, #68]
 2769 0096 1A60     		str	r2, [r3]
1107:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 2770              		.loc 1 1107 5 is_stmt 1 view .LVU939
1107:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 2771              		.loc 1 1107 42 is_stmt 0 view .LVU940
 2772 0098 099B     		ldr	r3, [sp, #36]
1107:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 2773              		.loc 1 1107 29 view .LVU941
 2774 009a 1199     		ldr	r1, [sp, #68]
 2775 009c 4B60     		str	r3, [r1, #4]
1109:rtos/uC-FS/FAT/fs_fat_sfn.c ****     p_dir_end_pos->SecPos   = dir_cur_pos.SecPos;
 2776              		.loc 1 1109 5 is_stmt 1 view .LVU942
1109:rtos/uC-FS/FAT/fs_fat_sfn.c ****     p_dir_end_pos->SecPos   = dir_cur_pos.SecPos;
 2777              		.loc 1 1109 29 is_stmt 0 view .LVU943
 2778 009e 3A60     		str	r2, [r7]
1110:rtos/uC-FS/FAT/fs_fat_sfn.c **** }
 2779              		.loc 1 1110 5 is_stmt 1 view .LVU944
1110:rtos/uC-FS/FAT/fs_fat_sfn.c **** }
 2780              		.loc 1 1110 29 is_stmt 0 view .LVU945
 2781 00a0 7B60     		str	r3, [r7, #4]
 2782 00a2 D4E7     		b	.L200
 2783              		.cfi_endproc
 2784              	.LFE6:
 2786              		.section	.text.FS_FAT_SFN_SFN_Find,"ax",%progbits
 2787              		.align	1
 2788              		.global	FS_FAT_SFN_SFN_Find
 2789              		.syntax unified
 2790              		.thumb
 2791              		.thumb_func
 2792              		.fpu fpv4-sp-d16
 2794              	FS_FAT_SFN_SFN_Find:
 2795              	.LVL311:
 2796              	.LFB3:
 674:rtos/uC-FS/FAT/fs_fat_sfn.c ****     FS_FAT_SEC_NBR   dir_cur_sec;
 2797              		.loc 1 674 1 is_stmt 1 view -0
 2798              		.cfi_startproc
 2799              		@ args = 8, pretend = 0, frame = 0
 2800              		@ frame_needed = 0, uses_anonymous_args = 0
 674:rtos/uC-FS/FAT/fs_fat_sfn.c ****     FS_FAT_SEC_NBR   dir_cur_sec;
 2801              		.loc 1 674 1 is_stmt 0 view .LVU947
 2802 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 2803              	.LCFI46:
 2804              		.cfi_def_cfa_offset 36
 2805              		.cfi_offset 4, -36
 2806              		.cfi_offset 5, -32
 2807              		.cfi_offset 6, -28
ARM GAS  /tmp/ccpi2Pe2.s 			page 101


 2808              		.cfi_offset 7, -24
 2809              		.cfi_offset 8, -20
 2810              		.cfi_offset 9, -16
 2811              		.cfi_offset 10, -12
 2812              		.cfi_offset 11, -8
 2813              		.cfi_offset 14, -4
 2814 0004 83B0     		sub	sp, sp, #12
 2815              	.LCFI47:
 2816              		.cfi_def_cfa_offset 48
 2817 0006 8046     		mov	r8, r0
 2818 0008 0E46     		mov	r6, r1
 2819 000a 9246     		mov	r10, r2
 2820 000c 1F46     		mov	r7, r3
 2821 000e 0D9C     		ldr	r4, [sp, #52]
 675:rtos/uC-FS/FAT/fs_fat_sfn.c ****     CPU_BOOLEAN      dir_sec_valid;
 2822              		.loc 1 675 5 is_stmt 1 view .LVU948
 676:rtos/uC-FS/FAT/fs_fat_sfn.c ****     FS_SEC_SIZE      dir_end_sec_pos;
 2823              		.loc 1 676 5 view .LVU949
 677:rtos/uC-FS/FAT/fs_fat_sfn.c ****     FS_FAT_DATA     *p_fat_data;
 2824              		.loc 1 677 5 view .LVU950
 678:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 2825              		.loc 1 678 5 view .LVU951
 681:rtos/uC-FS/FAT/fs_fat_sfn.c ****     dir_cur_sec   =  p_dir_start_pos->SecNbr;
 2826              		.loc 1 681 5 view .LVU952
 681:rtos/uC-FS/FAT/fs_fat_sfn.c ****     dir_cur_sec   =  p_dir_start_pos->SecNbr;
 2827              		.loc 1 681 19 is_stmt 0 view .LVU953
 2828 0010 D0F83490 		ldr	r9, [r0, #52]
 2829              	.LVL312:
 682:rtos/uC-FS/FAT/fs_fat_sfn.c ****     dir_sec_valid =  FS_FAT_IS_VALID_SEC(p_fat_data, dir_cur_sec);
 2830              		.loc 1 682 5 is_stmt 1 view .LVU954
 682:rtos/uC-FS/FAT/fs_fat_sfn.c ****     dir_sec_valid =  FS_FAT_IS_VALID_SEC(p_fat_data, dir_cur_sec);
 2831              		.loc 1 682 19 is_stmt 0 view .LVU955
 2832 0014 1D68     		ldr	r5, [r3]
 2833              	.LVL313:
 683:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 2834              		.loc 1 683 5 is_stmt 1 view .LVU956
 683:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 2835              		.loc 1 683 22 is_stmt 0 view .LVU957
 2836 0016 D9F82830 		ldr	r3, [r9, #40]
 2837              	.LVL314:
 683:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 2838              		.loc 1 683 19 view .LVU958
 2839 001a AB42     		cmp	r3, r5
 2840 001c 39D8     		bhi	.L217
 683:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 2841              		.loc 1 683 22 discriminator 1 view .LVU959
 2842 001e D9F80820 		ldr	r2, [r9, #8]
 2843              	.LVL315:
 683:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 2844              		.loc 1 683 22 discriminator 1 view .LVU960
 2845 0022 1344     		add	r3, r3, r2
 2846 0024 D9F81020 		ldr	r2, [r9, #16]
 2847 0028 1344     		add	r3, r3, r2
 2848 002a AB42     		cmp	r3, r5
 2849 002c 50D2     		bcs	.L218
 683:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 2850              		.loc 1 683 19 view .LVU961
ARM GAS  /tmp/ccpi2Pe2.s 			page 102


 2851 002e 4FF0000B 		mov	fp, #0
 2852 0032 30E0     		b	.L215
 2853              	.LVL316:
 2854              	.L209:
 702:rtos/uC-FS/FAT/fs_fat_sfn.c ****                  p_dir_start_pos->SecPos = dir_end_sec_pos;
 2855              		.loc 1 702 18 is_stmt 1 view .LVU962
 702:rtos/uC-FS/FAT/fs_fat_sfn.c ****                  p_dir_start_pos->SecPos = dir_end_sec_pos;
 2856              		.loc 1 702 42 is_stmt 0 view .LVU963
 2857 0034 3D60     		str	r5, [r7]
 703:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 2858              		.loc 1 703 18 is_stmt 1 view .LVU964
 703:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 2859              		.loc 1 703 42 is_stmt 0 view .LVU965
 2860 0036 7860     		str	r0, [r7, #4]
 705:rtos/uC-FS/FAT/fs_fat_sfn.c ****                  p_dir_end_pos->SecPos   = p_dir_start_pos->SecPos;
 2861              		.loc 1 705 18 is_stmt 1 view .LVU966
 705:rtos/uC-FS/FAT/fs_fat_sfn.c ****                  p_dir_end_pos->SecPos   = p_dir_start_pos->SecPos;
 2862              		.loc 1 705 42 is_stmt 0 view .LVU967
 2863 0038 0C9B     		ldr	r3, [sp, #48]
 2864 003a 1D60     		str	r5, [r3]
 706:rtos/uC-FS/FAT/fs_fat_sfn.c ****                  return;
 2865              		.loc 1 706 18 is_stmt 1 view .LVU968
 706:rtos/uC-FS/FAT/fs_fat_sfn.c ****                  return;
 2866              		.loc 1 706 59 is_stmt 0 view .LVU969
 2867 003c 7B68     		ldr	r3, [r7, #4]
 706:rtos/uC-FS/FAT/fs_fat_sfn.c ****                  return;
 2868              		.loc 1 706 42 view .LVU970
 2869 003e 0C9A     		ldr	r2, [sp, #48]
 2870 0040 5360     		str	r3, [r2, #4]
 707:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 2871              		.loc 1 707 18 is_stmt 1 view .LVU971
 2872 0042 42E0     		b	.L206
 2873              	.L210:
 715:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                  p_buf,
 2874              		.loc 1 715 18 view .LVU972
 715:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                  p_buf,
 2875              		.loc 1 715 32 is_stmt 0 view .LVU973
 2876 0044 2346     		mov	r3, r4
 2877 0046 2A46     		mov	r2, r5
 2878 0048 3146     		mov	r1, r6
 2879 004a 4046     		mov	r0, r8
 2880              	.LVL317:
 715:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                  p_buf,
 2881              		.loc 1 715 32 view .LVU974
 2882 004c FFF7FEFF 		bl	FS_FAT_SecNextGet
 2883              	.LVL318:
 2884 0050 0546     		mov	r5, r0
 2885              	.LVL319:
 720:rtos/uC-FS/FAT/fs_fat_sfn.c ****                      case FS_ERR_NONE:                          /* More secs exist in dir.         
 2886              		.loc 1 720 18 is_stmt 1 view .LVU975
 720:rtos/uC-FS/FAT/fs_fat_sfn.c ****                      case FS_ERR_NONE:                          /* More secs exist in dir.         
 2887              		.loc 1 720 26 is_stmt 0 view .LVU976
 2888 0052 2388     		ldrh	r3, [r4]
 2889 0054 B3F5FB7F 		cmp	r3, #502
 2890 0058 17D0     		beq	.L211
 2891 005a 0FD8     		bhi	.L212
 2892 005c ABBB     		cbnz	r3, .L206
ARM GAS  /tmp/ccpi2Pe2.s 			page 103


 723:rtos/uC-FS/FAT/fs_fat_sfn.c ****                           break;
 2893              		.loc 1 723 27 is_stmt 1 view .LVU977
 723:rtos/uC-FS/FAT/fs_fat_sfn.c ****                           break;
 2894              		.loc 1 723 43 is_stmt 0 view .LVU978
 2895 005e D9F82830 		ldr	r3, [r9, #40]
 723:rtos/uC-FS/FAT/fs_fat_sfn.c ****                           break;
 2896              		.loc 1 723 41 view .LVU979
 2897 0062 8342     		cmp	r3, r0
 2898 0064 37D8     		bhi	.L219
 723:rtos/uC-FS/FAT/fs_fat_sfn.c ****                           break;
 2899              		.loc 1 723 43 discriminator 1 view .LVU980
 2900 0066 D9F80820 		ldr	r2, [r9, #8]
 2901 006a 1344     		add	r3, r3, r2
 2902 006c D9F81020 		ldr	r2, [r9, #16]
 2903 0070 1344     		add	r3, r3, r2
 2904 0072 8342     		cmp	r3, r0
 2905 0074 0FD2     		bcs	.L215
 723:rtos/uC-FS/FAT/fs_fat_sfn.c ****                           break;
 2906              		.loc 1 723 41 view .LVU981
 2907 0076 4FF0000B 		mov	fp, #0
 2908              	.LVL320:
 723:rtos/uC-FS/FAT/fs_fat_sfn.c ****                           break;
 2909              		.loc 1 723 41 view .LVU982
 2910 007a 0CE0     		b	.L215
 2911              	.LVL321:
 2912              	.L212:
 723:rtos/uC-FS/FAT/fs_fat_sfn.c ****                           break;
 2913              		.loc 1 723 41 view .LVU983
 2914 007c 40F23652 		movw	r2, #1334
 2915 0080 9342     		cmp	r3, r2
 2916 0082 02D0     		beq	.L211
 2917 0084 B3F5A76F 		cmp	r3, #1336
 2918 0088 1FD1     		bne	.L206
 2919              	.L211:
 730:rtos/uC-FS/FAT/fs_fat_sfn.c ****                           return;
 2920              		.loc 1 730 26 is_stmt 1 view .LVU984
 730:rtos/uC-FS/FAT/fs_fat_sfn.c ****                           return;
 2921              		.loc 1 730 33 is_stmt 0 view .LVU985
 2922 008a 40F23353 		movw	r3, #1331
 2923 008e 2380     		strh	r3, [r4]	@ movhi
 731:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 2924              		.loc 1 731 27 is_stmt 1 view .LVU986
 2925 0090 1BE0     		b	.L206
 2926              	.LVL322:
 2927              	.L217:
 683:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 2928              		.loc 1 683 19 is_stmt 0 view .LVU987
 2929 0092 4FF0000B 		mov	fp, #0
 2930              	.LVL323:
 2931              	.L215:
 685:rtos/uC-FS/FAT/fs_fat_sfn.c ****         FSBuf_Set(p_buf,
 2932              		.loc 1 685 11 is_stmt 1 view .LVU988
 2933 0096 BBF1000F 		cmp	fp, #0
 2934 009a 1FD0     		beq	.L221
 686:rtos/uC-FS/FAT/fs_fat_sfn.c ****                   dir_cur_sec,
 2935              		.loc 1 686 9 view .LVU989
 2936 009c 0094     		str	r4, [sp]
ARM GAS  /tmp/ccpi2Pe2.s 			page 104


 2937 009e 0123     		movs	r3, #1
 2938 00a0 0222     		movs	r2, #2
 2939 00a2 2946     		mov	r1, r5
 2940 00a4 3046     		mov	r0, r6
 2941 00a6 FFF7FEFF 		bl	FSBuf_Set
 2942              	.LVL324:
 691:rtos/uC-FS/FAT/fs_fat_sfn.c ****             return;
 2943              		.loc 1 691 9 view .LVU990
 691:rtos/uC-FS/FAT/fs_fat_sfn.c ****             return;
 2944              		.loc 1 691 13 is_stmt 0 view .LVU991
 2945 00aa 2388     		ldrh	r3, [r4]
 691:rtos/uC-FS/FAT/fs_fat_sfn.c ****             return;
 2946              		.loc 1 691 12 view .LVU992
 2947 00ac 6BB9     		cbnz	r3, .L206
 695:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                        p_fat_data->SecSize,
 2948              		.loc 1 695 9 is_stmt 1 view .LVU993
 695:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                                        p_fat_data->SecSize,
 2949              		.loc 1 695 27 is_stmt 0 view .LVU994
 2950 00ae 2346     		mov	r3, r4
 2951 00b0 5246     		mov	r2, r10
 2952 00b2 D9F83410 		ldr	r1, [r9, #52]
 2953 00b6 3069     		ldr	r0, [r6, #16]
 2954 00b8 FFF7FEFF 		bl	FS_FAT_SFN_DirEntryFindInSec
 2955              	.LVL325:
 700:rtos/uC-FS/FAT/fs_fat_sfn.c ****             case FS_ERR_NONE:                                   /* Entry with matching name found. 
 2956              		.loc 1 700 9 is_stmt 1 view .LVU995
 700:rtos/uC-FS/FAT/fs_fat_sfn.c ****             case FS_ERR_NONE:                                   /* Entry with matching name found. 
 2957              		.loc 1 700 17 is_stmt 0 view .LVU996
 2958 00bc 2388     		ldrh	r3, [r4]
 700:rtos/uC-FS/FAT/fs_fat_sfn.c ****             case FS_ERR_NONE:                                   /* Entry with matching name found. 
 2959              		.loc 1 700 9 view .LVU997
 2960 00be 002B     		cmp	r3, #0
 2961 00c0 B8D0     		beq	.L209
 2962 00c2 40F23452 		movw	r2, #1332
 2963 00c6 9342     		cmp	r3, r2
 2964 00c8 BCD0     		beq	.L210
 2965              	.LVL326:
 2966              	.L206:
 755:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 2967              		.loc 1 755 1 view .LVU998
 2968 00ca 03B0     		add	sp, sp, #12
 2969              	.LCFI48:
 2970              		.cfi_remember_state
 2971              		.cfi_def_cfa_offset 36
 2972              		@ sp needed
 2973 00cc BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 2974              	.LVL327:
 2975              	.L218:
 2976              	.LCFI49:
 2977              		.cfi_restore_state
 683:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 2978              		.loc 1 683 19 view .LVU999
 2979 00d0 4FF0010B 		mov	fp, #1
 2980 00d4 DFE7     		b	.L215
 2981              	.LVL328:
 2982              	.L219:
 723:rtos/uC-FS/FAT/fs_fat_sfn.c ****                           break;
ARM GAS  /tmp/ccpi2Pe2.s 			page 105


 2983              		.loc 1 723 41 view .LVU1000
 2984 00d6 4FF0000B 		mov	fp, #0
 2985              	.LVL329:
 723:rtos/uC-FS/FAT/fs_fat_sfn.c ****                           break;
 2986              		.loc 1 723 41 view .LVU1001
 2987 00da DCE7     		b	.L215
 2988              	.LVL330:
 2989              	.L221:
 753:rtos/uC-FS/FAT/fs_fat_sfn.c ****    *p_err = FS_ERR_ENTRY_CORRUPT;
 2990              		.loc 1 753 86 is_stmt 1 view .LVU1002
 754:rtos/uC-FS/FAT/fs_fat_sfn.c **** }
 2991              		.loc 1 754 4 view .LVU1003
 754:rtos/uC-FS/FAT/fs_fat_sfn.c **** }
 2992              		.loc 1 754 11 is_stmt 0 view .LVU1004
 2993 00dc 40F2BF23 		movw	r3, #703
 2994 00e0 2380     		strh	r3, [r4]	@ movhi
 2995 00e2 F2E7     		b	.L206
 2996              		.cfi_endproc
 2997              	.LFE3:
 2999              		.section	.text.FS_FAT_SFN_DirEntryFind,"ax",%progbits
 3000              		.align	1
 3001              		.syntax unified
 3002              		.thumb
 3003              		.thumb_func
 3004              		.fpu fpv4-sp-d16
 3006              	FS_FAT_SFN_DirEntryFind:
 3007              	.LVL331:
 3008              	.LFB9:
1341:rtos/uC-FS/FAT/fs_fat_sfn.c ****     CPU_BOOLEAN        ext_lower_case;
 3009              		.loc 1 1341 1 is_stmt 1 view -0
 3010              		.cfi_startproc
 3011              		@ args = 12, pretend = 0, frame = 24
 3012              		@ frame_needed = 0, uses_anonymous_args = 0
1341:rtos/uC-FS/FAT/fs_fat_sfn.c ****     CPU_BOOLEAN        ext_lower_case;
 3013              		.loc 1 1341 1 is_stmt 0 view .LVU1006
 3014 0000 2DE9F043 		push	{r4, r5, r6, r7, r8, r9, lr}
 3015              	.LCFI50:
 3016              		.cfi_def_cfa_offset 28
 3017              		.cfi_offset 4, -28
 3018              		.cfi_offset 5, -24
 3019              		.cfi_offset 6, -20
 3020              		.cfi_offset 7, -16
 3021              		.cfi_offset 8, -12
 3022              		.cfi_offset 9, -8
 3023              		.cfi_offset 14, -4
 3024 0004 89B0     		sub	sp, sp, #36
 3025              	.LCFI51:
 3026              		.cfi_def_cfa_offset 64
 3027 0006 0746     		mov	r7, r0
 3028 0008 8846     		mov	r8, r1
 3029 000a 1446     		mov	r4, r2
 3030 000c 1D46     		mov	r5, r3
 3031 000e DDF84490 		ldr	r9, [sp, #68]
 3032 0012 129E     		ldr	r6, [sp, #72]
1342:rtos/uC-FS/FAT/fs_fat_sfn.c ****     CPU_INT32U         name_8_3[3];
 3033              		.loc 1 1342 5 is_stmt 1 view .LVU1007
1343:rtos/uC-FS/FAT/fs_fat_sfn.c ****     FS_FILE_NAME_LEN   name_len;
ARM GAS  /tmp/ccpi2Pe2.s 			page 106


 3034              		.loc 1 1343 5 view .LVU1008
1344:rtos/uC-FS/FAT/fs_fat_sfn.c ****     CPU_BOOLEAN        name_lower_case;
 3035              		.loc 1 1344 5 view .LVU1009
1345:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 3036              		.loc 1 1345 5 view .LVU1010
1348:rtos/uC-FS/FAT/fs_fat_sfn.c ****     p_dir_end_pos->SecPos = 0u;
 3037              		.loc 1 1348 5 view .LVU1011
1348:rtos/uC-FS/FAT/fs_fat_sfn.c ****     p_dir_end_pos->SecPos = 0u;
 3038              		.loc 1 1348 27 is_stmt 0 view .LVU1012
 3039 0014 0023     		movs	r3, #0
 3040              	.LVL332:
1348:rtos/uC-FS/FAT/fs_fat_sfn.c ****     p_dir_end_pos->SecPos = 0u;
 3041              		.loc 1 1348 27 view .LVU1013
 3042 0016 C9F80030 		str	r3, [r9]
1349:rtos/uC-FS/FAT/fs_fat_sfn.c ****    *p_name_next           = name;
 3043              		.loc 1 1349 5 is_stmt 1 view .LVU1014
1349:rtos/uC-FS/FAT/fs_fat_sfn.c ****    *p_name_next           = name;
 3044              		.loc 1 1349 27 is_stmt 0 view .LVU1015
 3045 001a C9F80430 		str	r3, [r9, #4]
1350:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 3046              		.loc 1 1350 4 is_stmt 1 view .LVU1016
1350:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 3047              		.loc 1 1350 27 is_stmt 0 view .LVU1017
 3048 001e 2A60     		str	r2, [r5]
1352:rtos/uC-FS/FAT/fs_fat_sfn.c ****                    &name_len,
 3049              		.loc 1 1352 5 is_stmt 1 view .LVU1018
 3050 0020 3246     		mov	r2, r6
 3051              	.LVL333:
1352:rtos/uC-FS/FAT/fs_fat_sfn.c ****                    &name_len,
 3052              		.loc 1 1352 5 is_stmt 0 view .LVU1019
 3053 0022 0DF10E01 		add	r1, sp, #14
 3054              	.LVL334:
1352:rtos/uC-FS/FAT/fs_fat_sfn.c ****                    &name_len,
 3055              		.loc 1 1352 5 view .LVU1020
 3056 0026 2046     		mov	r0, r4
 3057              	.LVL335:
1352:rtos/uC-FS/FAT/fs_fat_sfn.c ****                    &name_len,
 3058              		.loc 1 1352 5 view .LVU1021
 3059 0028 FFF7FEFF 		bl	FS_FAT_SFN_Chk
 3060              	.LVL336:
1355:rtos/uC-FS/FAT/fs_fat_sfn.c ****         return;
 3061              		.loc 1 1355 5 is_stmt 1 view .LVU1022
1355:rtos/uC-FS/FAT/fs_fat_sfn.c ****         return;
 3062              		.loc 1 1355 9 is_stmt 0 view .LVU1023
 3063 002c 3388     		ldrh	r3, [r6]
1355:rtos/uC-FS/FAT/fs_fat_sfn.c ****         return;
 3064              		.loc 1 1355 8 view .LVU1024
 3065 002e 13B1     		cbz	r3, .L227
 3066              	.LVL337:
 3067              	.L222:
1377:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 3068              		.loc 1 1377 1 view .LVU1025
 3069 0030 09B0     		add	sp, sp, #36
 3070              	.LCFI52:
 3071              		.cfi_remember_state
 3072              		.cfi_def_cfa_offset 28
 3073              		@ sp needed
ARM GAS  /tmp/ccpi2Pe2.s 			page 107


 3074 0032 BDE8F083 		pop	{r4, r5, r6, r7, r8, r9, pc}
 3075              	.LVL338:
 3076              	.L227:
 3077              	.LCFI53:
 3078              		.cfi_restore_state
1359:rtos/uC-FS/FAT/fs_fat_sfn.c ****                       &name_8_3[0],
 3079              		.loc 1 1359 5 is_stmt 1 view .LVU1026
 3080 0036 0096     		str	r6, [sp]
 3081 0038 0DF11F03 		add	r3, sp, #31
 3082 003c 0DF10D02 		add	r2, sp, #13
 3083 0040 04A9     		add	r1, sp, #16
 3084 0042 2046     		mov	r0, r4
 3085 0044 FFF7FEFF 		bl	FS_FAT_SFN_Create
 3086              	.LVL339:
1364:rtos/uC-FS/FAT/fs_fat_sfn.c ****         (*p_err != FS_ERR_NAME_MIXED_CASE)) {
 3087              		.loc 1 1364 5 view .LVU1027
1364:rtos/uC-FS/FAT/fs_fat_sfn.c ****         (*p_err != FS_ERR_NAME_MIXED_CASE)) {
 3088              		.loc 1 1364 10 is_stmt 0 view .LVU1028
 3089 0048 3388     		ldrh	r3, [r6]
1364:rtos/uC-FS/FAT/fs_fat_sfn.c ****         (*p_err != FS_ERR_NAME_MIXED_CASE)) {
 3090              		.loc 1 1364 8 view .LVU1029
 3091 004a 13B1     		cbz	r3, .L224
1364:rtos/uC-FS/FAT/fs_fat_sfn.c ****         (*p_err != FS_ERR_NAME_MIXED_CASE)) {
 3092              		.loc 1 1364 33 discriminator 1 view .LVU1030
 3093 004c B3F5627F 		cmp	r3, #904
 3094 0050 EED1     		bne	.L222
 3095              	.L224:
1369:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 3096              		.loc 1 1369 4 is_stmt 1 view .LVU1031
1369:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 3097              		.loc 1 1369 24 is_stmt 0 view .LVU1032
 3098 0052 BDF80E20 		ldrh	r2, [sp, #14]
 3099 0056 1444     		add	r4, r4, r2
 3100              	.LVL340:
1369:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 3101              		.loc 1 1369 17 view .LVU1033
 3102 0058 2C60     		str	r4, [r5]
1371:rtos/uC-FS/FAT/fs_fat_sfn.c ****                         p_buf,
 3103              		.loc 1 1371 5 is_stmt 1 view .LVU1034
 3104 005a 0196     		str	r6, [sp, #4]
 3105 005c CDF80090 		str	r9, [sp]
 3106 0060 109B     		ldr	r3, [sp, #64]
 3107 0062 04AA     		add	r2, sp, #16
 3108 0064 4146     		mov	r1, r8
 3109 0066 3846     		mov	r0, r7
 3110 0068 FFF7FEFF 		bl	FS_FAT_SFN_SFN_Find
 3111              	.LVL341:
 3112 006c E0E7     		b	.L222
 3113              		.cfi_endproc
 3114              	.LFE9:
 3116              		.section	.text.FS_FAT_SFN_LabelGet,"ax",%progbits
 3117              		.align	1
 3118              		.global	FS_FAT_SFN_LabelGet
 3119              		.syntax unified
 3120              		.thumb
 3121              		.thumb_func
 3122              		.fpu fpv4-sp-d16
ARM GAS  /tmp/ccpi2Pe2.s 			page 108


 3124              	FS_FAT_SFN_LabelGet:
 3125              	.LVL342:
 3126              	.LFB4:
 783:rtos/uC-FS/FAT/fs_fat_sfn.c ****     FS_BUF          *p_buf;
 3127              		.loc 1 783 1 view -0
 3128              		.cfi_startproc
 3129              		@ args = 0, pretend = 0, frame = 16
 3130              		@ frame_needed = 0, uses_anonymous_args = 0
 783:rtos/uC-FS/FAT/fs_fat_sfn.c ****     FS_BUF          *p_buf;
 3131              		.loc 1 783 1 is_stmt 0 view .LVU1036
 3132 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 3133              	.LCFI54:
 3134              		.cfi_def_cfa_offset 20
 3135              		.cfi_offset 4, -20
 3136              		.cfi_offset 5, -16
 3137              		.cfi_offset 6, -12
 3138              		.cfi_offset 7, -8
 3139              		.cfi_offset 14, -4
 3140 0002 87B0     		sub	sp, sp, #28
 3141              	.LCFI55:
 3142              		.cfi_def_cfa_offset 48
 3143 0004 0546     		mov	r5, r0
 3144 0006 0F46     		mov	r7, r1
 3145 0008 1446     		mov	r4, r2
 784:rtos/uC-FS/FAT/fs_fat_sfn.c ****     FS_FAT_DIR_POS   dir_end_pos;
 3146              		.loc 1 784 5 is_stmt 1 view .LVU1037
 785:rtos/uC-FS/FAT/fs_fat_sfn.c ****     FS_FAT_DIR_POS   dir_start_pos;
 3147              		.loc 1 785 5 view .LVU1038
 786:rtos/uC-FS/FAT/fs_fat_sfn.c ****     FS_FAT_SEC_NBR   dir_start_sec;
 3148              		.loc 1 786 5 view .LVU1039
 787:rtos/uC-FS/FAT/fs_fat_sfn.c ****     CPU_CHAR        *p_dir_entry;
 3149              		.loc 1 787 5 view .LVU1040
 788:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 3150              		.loc 1 788 5 view .LVU1041
 791:rtos/uC-FS/FAT/fs_fat_sfn.c ****     if (p_buf == (FS_BUF *)0) {
 3151              		.loc 1 791 5 view .LVU1042
 791:rtos/uC-FS/FAT/fs_fat_sfn.c ****     if (p_buf == (FS_BUF *)0) {
 3152              		.loc 1 791 13 is_stmt 0 view .LVU1043
 3153 000a FFF7FEFF 		bl	FSBuf_Get
 3154              	.LVL343:
 792:rtos/uC-FS/FAT/fs_fat_sfn.c ****        *p_err = FS_ERR_BUF_NONE_AVAIL;
 3155              		.loc 1 792 5 is_stmt 1 view .LVU1044
 792:rtos/uC-FS/FAT/fs_fat_sfn.c ****        *p_err = FS_ERR_BUF_NONE_AVAIL;
 3156              		.loc 1 792 8 is_stmt 0 view .LVU1045
 3157 000e B8B1     		cbz	r0, .L235
 3158 0010 0646     		mov	r6, r0
 797:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 3159              		.loc 1 797 5 is_stmt 1 view .LVU1046
 797:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 3160              		.loc 1 797 42 is_stmt 0 view .LVU1047
 3161 0012 6B6B     		ldr	r3, [r5, #52]
 797:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 3162              		.loc 1 797 19 view .LVU1048
 3163 0014 9B6A     		ldr	r3, [r3, #40]
 3164              	.LVL344:
 802:rtos/uC-FS/FAT/fs_fat_sfn.c ****     dir_start_pos.SecPos = 0u;
 3165              		.loc 1 802 5 is_stmt 1 view .LVU1049
ARM GAS  /tmp/ccpi2Pe2.s 			page 109


 802:rtos/uC-FS/FAT/fs_fat_sfn.c ****     dir_start_pos.SecPos = 0u;
 3166              		.loc 1 802 26 is_stmt 0 view .LVU1050
 3167 0016 0293     		str	r3, [sp, #8]
 803:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 3168              		.loc 1 803 5 is_stmt 1 view .LVU1051
 803:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 3169              		.loc 1 803 26 is_stmt 0 view .LVU1052
 3170 0018 0023     		movs	r3, #0
 3171              	.LVL345:
 803:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 3172              		.loc 1 803 26 view .LVU1053
 3173 001a 0393     		str	r3, [sp, #12]
 805:rtos/uC-FS/FAT/fs_fat_sfn.c ****                           p_buf,
 3174              		.loc 1 805 5 is_stmt 1 view .LVU1054
 3175 001c 0094     		str	r4, [sp]
 3176              	.LVL346:
 805:rtos/uC-FS/FAT/fs_fat_sfn.c ****                           p_buf,
 3177              		.loc 1 805 5 is_stmt 0 view .LVU1055
 3178 001e 04AB     		add	r3, sp, #16
 3179 0020 02AA     		add	r2, sp, #8
 3180              	.LVL347:
 805:rtos/uC-FS/FAT/fs_fat_sfn.c ****                           p_buf,
 3181              		.loc 1 805 5 view .LVU1056
 3182 0022 0146     		mov	r1, r0
 3183 0024 2846     		mov	r0, r5
 3184              	.LVL348:
 805:rtos/uC-FS/FAT/fs_fat_sfn.c ****                           p_buf,
 3185              		.loc 1 805 5 view .LVU1057
 3186 0026 FFF7FEFF 		bl	FS_FAT_SFN_LabelFind
 3187              	.LVL349:
 811:rtos/uC-FS/FAT/fs_fat_sfn.c ****         if (*p_err == FS_ERR_SYS_DIR_ENTRY_NOT_FOUND) {         /*           ... if dir entry not f
 3188              		.loc 1 811 5 is_stmt 1 view .LVU1058
 811:rtos/uC-FS/FAT/fs_fat_sfn.c ****         if (*p_err == FS_ERR_SYS_DIR_ENTRY_NOT_FOUND) {         /*           ... if dir entry not f
 3189              		.loc 1 811 9 is_stmt 0 view .LVU1059
 3190 002a 2388     		ldrh	r3, [r4]
 811:rtos/uC-FS/FAT/fs_fat_sfn.c ****         if (*p_err == FS_ERR_SYS_DIR_ENTRY_NOT_FOUND) {         /*           ... if dir entry not f
 3191              		.loc 1 811 8 view .LVU1060
 3192 002c 7BB1     		cbz	r3, .L231
 812:rtos/uC-FS/FAT/fs_fat_sfn.c ****             *p_err =  FS_ERR_VOL_LABEL_NOT_FOUND;               /*                                 
 3193              		.loc 1 812 9 is_stmt 1 view .LVU1061
 812:rtos/uC-FS/FAT/fs_fat_sfn.c ****             *p_err =  FS_ERR_VOL_LABEL_NOT_FOUND;               /*                                 
 3194              		.loc 1 812 12 is_stmt 0 view .LVU1062
 3195 002e 40F23352 		movw	r2, #1331
 3196 0032 9342     		cmp	r3, r2
 3197 0034 07D0     		beq	.L236
 3198              	.L232:
 815:rtos/uC-FS/FAT/fs_fat_sfn.c ****         return;
 3199              		.loc 1 815 9 is_stmt 1 view .LVU1063
 3200 0036 3046     		mov	r0, r6
 3201 0038 FFF7FEFF 		bl	FSBuf_Free
 3202              	.LVL350:
 816:rtos/uC-FS/FAT/fs_fat_sfn.c ****     }
 3203              		.loc 1 816 9 view .LVU1064
 3204              	.L228:
 825:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 3205              		.loc 1 825 1 is_stmt 0 view .LVU1065
 3206 003c 07B0     		add	sp, sp, #28
ARM GAS  /tmp/ccpi2Pe2.s 			page 110


 3207              	.LCFI56:
 3208              		.cfi_remember_state
 3209              		.cfi_def_cfa_offset 20
 3210              		@ sp needed
 3211 003e F0BD     		pop	{r4, r5, r6, r7, pc}
 3212              	.LVL351:
 3213              	.L235:
 3214              	.LCFI57:
 3215              		.cfi_restore_state
 793:rtos/uC-FS/FAT/fs_fat_sfn.c ****         return;
 3216              		.loc 1 793 8 is_stmt 1 view .LVU1066
 793:rtos/uC-FS/FAT/fs_fat_sfn.c ****         return;
 3217              		.loc 1 793 15 is_stmt 0 view .LVU1067
 3218 0040 6423     		movs	r3, #100
 3219 0042 2380     		strh	r3, [r4]	@ movhi
 794:rtos/uC-FS/FAT/fs_fat_sfn.c ****     }
 3220              		.loc 1 794 9 is_stmt 1 view .LVU1068
 3221 0044 FAE7     		b	.L228
 3222              	.LVL352:
 3223              	.L236:
 813:rtos/uC-FS/FAT/fs_fat_sfn.c ****         }
 3224              		.loc 1 813 13 view .LVU1069
 813:rtos/uC-FS/FAT/fs_fat_sfn.c ****         }
 3225              		.loc 1 813 20 is_stmt 0 view .LVU1070
 3226 0046 40F2A153 		movw	r3, #1441
 3227 004a 2380     		strh	r3, [r4]	@ movhi
 3228 004c F3E7     		b	.L232
 3229              	.L231:
 821:rtos/uC-FS/FAT/fs_fat_sfn.c ****     Str_Copy_N(label, (CPU_CHAR *)p_dir_entry, FS_FAT_VOL_LABEL_LEN);
 3230              		.loc 1 821 5 is_stmt 1 view .LVU1071
 821:rtos/uC-FS/FAT/fs_fat_sfn.c ****     Str_Copy_N(label, (CPU_CHAR *)p_dir_entry, FS_FAT_VOL_LABEL_LEN);
 3231              		.loc 1 821 36 is_stmt 0 view .LVU1072
 3232 004e 3169     		ldr	r1, [r6, #16]
 3233              	.LVL353:
 822:rtos/uC-FS/FAT/fs_fat_sfn.c ****     FSBuf_Free(p_buf);
 3234              		.loc 1 822 5 is_stmt 1 view .LVU1073
 3235 0050 0B22     		movs	r2, #11
 3236 0052 059B     		ldr	r3, [sp, #20]
 3237 0054 1944     		add	r1, r1, r3
 3238              	.LVL354:
 822:rtos/uC-FS/FAT/fs_fat_sfn.c ****     FSBuf_Free(p_buf);
 3239              		.loc 1 822 5 is_stmt 0 view .LVU1074
 3240 0056 3846     		mov	r0, r7
 3241 0058 FFF7FEFF 		bl	Str_Copy_N
 3242              	.LVL355:
 823:rtos/uC-FS/FAT/fs_fat_sfn.c ****    *p_err = FS_ERR_NONE;
 3243              		.loc 1 823 5 is_stmt 1 view .LVU1075
 3244 005c 3046     		mov	r0, r6
 3245 005e FFF7FEFF 		bl	FSBuf_Free
 3246              	.LVL356:
 824:rtos/uC-FS/FAT/fs_fat_sfn.c **** }
 3247              		.loc 1 824 4 view .LVU1076
 824:rtos/uC-FS/FAT/fs_fat_sfn.c **** }
 3248              		.loc 1 824 11 is_stmt 0 view .LVU1077
 3249 0062 0023     		movs	r3, #0
 3250 0064 2380     		strh	r3, [r4]	@ movhi
 3251 0066 E9E7     		b	.L228
ARM GAS  /tmp/ccpi2Pe2.s 			page 111


 3252              		.cfi_endproc
 3253              	.LFE4:
 3255              		.section	.text.FS_FAT_SFN_LabelSet,"ax",%progbits
 3256              		.align	1
 3257              		.global	FS_FAT_SFN_LabelSet
 3258              		.syntax unified
 3259              		.thumb
 3260              		.thumb_func
 3261              		.fpu fpv4-sp-d16
 3263              	FS_FAT_SFN_LabelSet:
 3264              	.LVL357:
 3265              	.LFB5:
 857:rtos/uC-FS/FAT/fs_fat_sfn.c ****     FS_BUF            *p_buf;
 3266              		.loc 1 857 1 is_stmt 1 view -0
 3267              		.cfi_startproc
 3268              		@ args = 0, pretend = 0, frame = 32
 3269              		@ frame_needed = 0, uses_anonymous_args = 0
 857:rtos/uC-FS/FAT/fs_fat_sfn.c ****     FS_BUF            *p_buf;
 3270              		.loc 1 857 1 is_stmt 0 view .LVU1079
 3271 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 3272              	.LCFI58:
 3273              		.cfi_def_cfa_offset 20
 3274              		.cfi_offset 4, -20
 3275              		.cfi_offset 5, -16
 3276              		.cfi_offset 6, -12
 3277              		.cfi_offset 7, -8
 3278              		.cfi_offset 14, -4
 3279 0002 8BB0     		sub	sp, sp, #44
 3280              	.LCFI59:
 3281              		.cfi_def_cfa_offset 64
 3282 0004 0746     		mov	r7, r0
 3283 0006 1646     		mov	r6, r2
 858:rtos/uC-FS/FAT/fs_fat_sfn.c ****     FS_FAT_DIR_POS     dir_end_pos;
 3284              		.loc 1 858 5 is_stmt 1 view .LVU1080
 859:rtos/uC-FS/FAT/fs_fat_sfn.c ****     FS_FAT_DIR_POS     dir_start_pos;
 3285              		.loc 1 859 5 view .LVU1081
 860:rtos/uC-FS/FAT/fs_fat_sfn.c ****     FS_FAT_SEC_NBR     dir_start_sec;
 3286              		.loc 1 860 5 view .LVU1082
 861:rtos/uC-FS/FAT/fs_fat_sfn.c ****     CPU_INT08U        *p_dir_entry;
 3287              		.loc 1 861 5 view .LVU1083
 862:rtos/uC-FS/FAT/fs_fat_sfn.c ****     FS_FILE_NAME_LEN   i;
 3288              		.loc 1 862 5 view .LVU1084
 863:rtos/uC-FS/FAT/fs_fat_sfn.c ****     CPU_BOOLEAN        is_legal;
 3289              		.loc 1 863 5 view .LVU1085
 864:rtos/uC-FS/FAT/fs_fat_sfn.c ****     CPU_CHAR           label_buf[FS_FAT_VOL_LABEL_LEN + 1u];
 3290              		.loc 1 864 5 view .LVU1086
 865:rtos/uC-FS/FAT/fs_fat_sfn.c ****     CPU_CHAR           label_char;
 3291              		.loc 1 865 5 view .LVU1087
 866:rtos/uC-FS/FAT/fs_fat_sfn.c ****     FS_FILE_NAME_LEN   len;
 3292              		.loc 1 866 5 view .LVU1088
 867:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 3293              		.loc 1 867 5 view .LVU1089
 871:rtos/uC-FS/FAT/fs_fat_sfn.c ****         label_buf[i] = (CPU_CHAR)ASCII_CHAR_SPACE;
 3294              		.loc 1 871 5 view .LVU1090
 3295              	.LVL358:
 871:rtos/uC-FS/FAT/fs_fat_sfn.c ****         label_buf[i] = (CPU_CHAR)ASCII_CHAR_SPACE;
 3296              		.loc 1 871 12 is_stmt 0 view .LVU1091
ARM GAS  /tmp/ccpi2Pe2.s 			page 112


 3297 0008 0023     		movs	r3, #0
 871:rtos/uC-FS/FAT/fs_fat_sfn.c ****         label_buf[i] = (CPU_CHAR)ASCII_CHAR_SPACE;
 3298              		.loc 1 871 5 view .LVU1092
 3299 000a 06E0     		b	.L238
 3300              	.LVL359:
 3301              	.L239:
 872:rtos/uC-FS/FAT/fs_fat_sfn.c ****     }
 3302              		.loc 1 872 9 is_stmt 1 discriminator 3 view .LVU1093
 872:rtos/uC-FS/FAT/fs_fat_sfn.c ****     }
 3303              		.loc 1 872 22 is_stmt 0 discriminator 3 view .LVU1094
 3304 000c 0AAA     		add	r2, sp, #40
 3305 000e D418     		adds	r4, r2, r3
 3306 0010 2025     		movs	r5, #32
 3307 0012 04F81C5C 		strb	r5, [r4, #-28]
 871:rtos/uC-FS/FAT/fs_fat_sfn.c ****         label_buf[i] = (CPU_CHAR)ASCII_CHAR_SPACE;
 3308              		.loc 1 871 27 is_stmt 1 discriminator 3 view .LVU1095
 871:rtos/uC-FS/FAT/fs_fat_sfn.c ****         label_buf[i] = (CPU_CHAR)ASCII_CHAR_SPACE;
 3309              		.loc 1 871 28 is_stmt 0 discriminator 3 view .LVU1096
 3310 0016 0133     		adds	r3, r3, #1
 3311              	.LVL360:
 871:rtos/uC-FS/FAT/fs_fat_sfn.c ****         label_buf[i] = (CPU_CHAR)ASCII_CHAR_SPACE;
 3312              		.loc 1 871 28 discriminator 3 view .LVU1097
 3313 0018 9BB2     		uxth	r3, r3
 3314              	.LVL361:
 3315              	.L238:
 871:rtos/uC-FS/FAT/fs_fat_sfn.c ****         label_buf[i] = (CPU_CHAR)ASCII_CHAR_SPACE;
 3316              		.loc 1 871 18 is_stmt 1 discriminator 1 view .LVU1098
 871:rtos/uC-FS/FAT/fs_fat_sfn.c ****         label_buf[i] = (CPU_CHAR)ASCII_CHAR_SPACE;
 3317              		.loc 1 871 5 is_stmt 0 discriminator 1 view .LVU1099
 3318 001a 0A2B     		cmp	r3, #10
 3319 001c F6D9     		bls	.L239
 874:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 3320              		.loc 1 874 5 is_stmt 1 view .LVU1100
 874:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 3321              		.loc 1 874 19 is_stmt 0 view .LVU1101
 3322 001e 0024     		movs	r4, #0
 3323 0020 8DF81740 		strb	r4, [sp, #23]
 876:rtos/uC-FS/FAT/fs_fat_sfn.c ****     is_legal   = DEF_YES;
 3324              		.loc 1 876 5 is_stmt 1 view .LVU1102
 876:rtos/uC-FS/FAT/fs_fat_sfn.c ****     is_legal   = DEF_YES;
 3325              		.loc 1 876 16 is_stmt 0 view .LVU1103
 3326 0024 0B78     		ldrb	r3, [r1]	@ zero_extendqisi2
 3327              	.LVL362:
 877:rtos/uC-FS/FAT/fs_fat_sfn.c ****     len        = 0u;
 3328              		.loc 1 877 5 is_stmt 1 view .LVU1104
 878:rtos/uC-FS/FAT/fs_fat_sfn.c ****     i          =  0u;
 3329              		.loc 1 878 5 view .LVU1105
 879:rtos/uC-FS/FAT/fs_fat_sfn.c ****     while ((label_char != (CPU_CHAR)ASCII_CHAR_NULL     ) &&    /* Process str until NULL char ... 
 3330              		.loc 1 879 5 view .LVU1106
 880:rtos/uC-FS/FAT/fs_fat_sfn.c ****            (is_legal   ==  DEF_YES                      )) {    /* ... or illegal label is found.  
 3331              		.loc 1 880 5 view .LVU1107
 878:rtos/uC-FS/FAT/fs_fat_sfn.c ****     i          =  0u;
 3332              		.loc 1 878 16 is_stmt 0 view .LVU1108
 3333 0026 2046     		mov	r0, r4
 3334              	.LVL363:
 877:rtos/uC-FS/FAT/fs_fat_sfn.c ****     len        = 0u;
 3335              		.loc 1 877 16 view .LVU1109
ARM GAS  /tmp/ccpi2Pe2.s 			page 113


 3336 0028 0122     		movs	r2, #1
 880:rtos/uC-FS/FAT/fs_fat_sfn.c ****            (is_legal   ==  DEF_YES                      )) {    /* ... or illegal label is found.  
 3337              		.loc 1 880 11 view .LVU1110
 3338 002a 02E0     		b	.L240
 3339              	.LVL364:
 3340              	.L251:
 892:rtos/uC-FS/FAT/fs_fat_sfn.c ****         }
 3341              		.loc 1 892 22 view .LVU1111
 3342 002c 0022     		movs	r2, #0
 3343              	.LVL365:
 3344              	.L241:
 894:rtos/uC-FS/FAT/fs_fat_sfn.c ****         label_char = *label;
 3345              		.loc 1 894 9 is_stmt 1 view .LVU1112
 895:rtos/uC-FS/FAT/fs_fat_sfn.c ****     }
 3346              		.loc 1 895 9 view .LVU1113
 895:rtos/uC-FS/FAT/fs_fat_sfn.c ****     }
 3347              		.loc 1 895 20 is_stmt 0 view .LVU1114
 3348 002e 11F8013F 		ldrb	r3, [r1, #1]!	@ zero_extendqisi2
 3349              	.LVL366:
 3350              	.L240:
 880:rtos/uC-FS/FAT/fs_fat_sfn.c ****            (is_legal   ==  DEF_YES                      )) {    /* ... or illegal label is found.  
 3351              		.loc 1 880 11 is_stmt 1 view .LVU1115
 3352 0032 002B     		cmp	r3, #0
 3353 0034 57D0     		beq	.L243
 880:rtos/uC-FS/FAT/fs_fat_sfn.c ****            (is_legal   ==  DEF_YES                      )) {    /* ... or illegal label is found.  
 3354              		.loc 1 880 59 is_stmt 0 discriminator 1 view .LVU1116
 3355 0036 002A     		cmp	r2, #0
 3356 0038 55D0     		beq	.L243
 882:rtos/uC-FS/FAT/fs_fat_sfn.c ****             is_legal = FS_FAT_IS_LEGAL_VOL_LABEL_CHAR(label_char);
 3357              		.loc 1 882 9 is_stmt 1 view .LVU1117
 882:rtos/uC-FS/FAT/fs_fat_sfn.c ****             is_legal = FS_FAT_IS_LEGAL_VOL_LABEL_CHAR(label_char);
 3358              		.loc 1 882 12 is_stmt 0 view .LVU1118
 3359 003a 0A28     		cmp	r0, #10
 3360 003c F6D8     		bhi	.L251
 883:rtos/uC-FS/FAT/fs_fat_sfn.c ****             if (is_legal == DEF_YES) {
 3361              		.loc 1 883 13 is_stmt 1 view .LVU1119
 883:rtos/uC-FS/FAT/fs_fat_sfn.c ****             if (is_legal == DEF_YES) {
 3362              		.loc 1 883 22 is_stmt 0 view .LVU1120
 3363 003e 222B     		cmp	r3, #34
 3364 0040 2FD0     		beq	.L252
 883:rtos/uC-FS/FAT/fs_fat_sfn.c ****             if (is_legal == DEF_YES) {
 3365              		.loc 1 883 24 discriminator 1 view .LVU1121
 3366 0042 262B     		cmp	r3, #38
 3367 0044 2FD0     		beq	.L253
 883:rtos/uC-FS/FAT/fs_fat_sfn.c ****             if (is_legal == DEF_YES) {
 3368              		.loc 1 883 24 discriminator 3 view .LVU1122
 3369 0046 2A2B     		cmp	r3, #42
 3370 0048 2FD0     		beq	.L254
 883:rtos/uC-FS/FAT/fs_fat_sfn.c ****             if (is_legal == DEF_YES) {
 3371              		.loc 1 883 24 discriminator 5 view .LVU1123
 3372 004a 2B2B     		cmp	r3, #43
 3373 004c 2FD0     		beq	.L255
 883:rtos/uC-FS/FAT/fs_fat_sfn.c ****             if (is_legal == DEF_YES) {
 3374              		.loc 1 883 24 discriminator 7 view .LVU1124
 3375 004e 2D2B     		cmp	r3, #45
 3376 0050 2FD0     		beq	.L256
 883:rtos/uC-FS/FAT/fs_fat_sfn.c ****             if (is_legal == DEF_YES) {
ARM GAS  /tmp/ccpi2Pe2.s 			page 114


 3377              		.loc 1 883 24 discriminator 9 view .LVU1125
 3378 0052 2C2B     		cmp	r3, #44
 3379 0054 2FD0     		beq	.L257
 883:rtos/uC-FS/FAT/fs_fat_sfn.c ****             if (is_legal == DEF_YES) {
 3380              		.loc 1 883 24 discriminator 11 view .LVU1126
 3381 0056 2E2B     		cmp	r3, #46
 3382 0058 2FD0     		beq	.L258
 883:rtos/uC-FS/FAT/fs_fat_sfn.c ****             if (is_legal == DEF_YES) {
 3383              		.loc 1 883 24 discriminator 13 view .LVU1127
 3384 005a 2F2B     		cmp	r3, #47
 3385 005c 2FD0     		beq	.L259
 883:rtos/uC-FS/FAT/fs_fat_sfn.c ****             if (is_legal == DEF_YES) {
 3386              		.loc 1 883 24 discriminator 15 view .LVU1128
 3387 005e 3A2B     		cmp	r3, #58
 3388 0060 2FD0     		beq	.L260
 883:rtos/uC-FS/FAT/fs_fat_sfn.c ****             if (is_legal == DEF_YES) {
 3389              		.loc 1 883 24 discriminator 17 view .LVU1129
 3390 0062 3B2B     		cmp	r3, #59
 3391 0064 2FD0     		beq	.L261
 883:rtos/uC-FS/FAT/fs_fat_sfn.c ****             if (is_legal == DEF_YES) {
 3392              		.loc 1 883 24 discriminator 19 view .LVU1130
 3393 0066 3C2B     		cmp	r3, #60
 3394 0068 2FD0     		beq	.L262
 883:rtos/uC-FS/FAT/fs_fat_sfn.c ****             if (is_legal == DEF_YES) {
 3395              		.loc 1 883 24 discriminator 21 view .LVU1131
 3396 006a 3D2B     		cmp	r3, #61
 3397 006c 2FD0     		beq	.L263
 883:rtos/uC-FS/FAT/fs_fat_sfn.c ****             if (is_legal == DEF_YES) {
 3398              		.loc 1 883 24 discriminator 23 view .LVU1132
 3399 006e 3E2B     		cmp	r3, #62
 3400 0070 2FD0     		beq	.L264
 883:rtos/uC-FS/FAT/fs_fat_sfn.c ****             if (is_legal == DEF_YES) {
 3401              		.loc 1 883 24 discriminator 25 view .LVU1133
 3402 0072 3F2B     		cmp	r3, #63
 3403 0074 2FD0     		beq	.L265
 883:rtos/uC-FS/FAT/fs_fat_sfn.c ****             if (is_legal == DEF_YES) {
 3404              		.loc 1 883 24 discriminator 27 view .LVU1134
 3405 0076 5B2B     		cmp	r3, #91
 3406 0078 2FD0     		beq	.L266
 883:rtos/uC-FS/FAT/fs_fat_sfn.c ****             if (is_legal == DEF_YES) {
 3407              		.loc 1 883 24 discriminator 29 view .LVU1135
 3408 007a 5D2B     		cmp	r3, #93
 3409 007c 2FD0     		beq	.L267
 883:rtos/uC-FS/FAT/fs_fat_sfn.c ****             if (is_legal == DEF_YES) {
 3410              		.loc 1 883 24 discriminator 31 view .LVU1136
 3411 007e 5C2B     		cmp	r3, #92
 3412 0080 2FD0     		beq	.L268
 3413              	.LVL367:
 884:rtos/uC-FS/FAT/fs_fat_sfn.c ****                 label_buf[i] = ASCII_TO_UPPER(label_char);
 3414              		.loc 1 884 13 is_stmt 1 view .LVU1137
 885:rtos/uC-FS/FAT/fs_fat_sfn.c ****                 i++;
 3415              		.loc 1 885 17 view .LVU1138
 885:rtos/uC-FS/FAT/fs_fat_sfn.c ****                 i++;
 3416              		.loc 1 885 32 is_stmt 0 view .LVU1139
 3417 0082 A3F16105 		sub	r5, r3, #97
 3418 0086 EDB2     		uxtb	r5, r5
 885:rtos/uC-FS/FAT/fs_fat_sfn.c ****                 i++;
ARM GAS  /tmp/ccpi2Pe2.s 			page 115


 3419              		.loc 1 885 30 view .LVU1140
 3420 0088 192D     		cmp	r5, #25
 3421 008a 01D8     		bhi	.L242
 885:rtos/uC-FS/FAT/fs_fat_sfn.c ****                 i++;
 3422              		.loc 1 885 30 discriminator 1 view .LVU1141
 3423 008c 203B     		subs	r3, r3, #32
 3424              	.LVL368:
 885:rtos/uC-FS/FAT/fs_fat_sfn.c ****                 i++;
 3425              		.loc 1 885 30 discriminator 1 view .LVU1142
 3426 008e DBB2     		uxtb	r3, r3
 3427              	.L242:
 885:rtos/uC-FS/FAT/fs_fat_sfn.c ****                 i++;
 3428              		.loc 1 885 30 discriminator 4 view .LVU1143
 3429 0090 0AAD     		add	r5, sp, #40
 3430 0092 2544     		add	r5, r5, r4
 3431 0094 05F81C3C 		strb	r3, [r5, #-28]
 886:rtos/uC-FS/FAT/fs_fat_sfn.c ****                 len++;
 3432              		.loc 1 886 17 is_stmt 1 discriminator 4 view .LVU1144
 886:rtos/uC-FS/FAT/fs_fat_sfn.c ****                 len++;
 3433              		.loc 1 886 18 is_stmt 0 discriminator 4 view .LVU1145
 3434 0098 0134     		adds	r4, r4, #1
 3435              	.LVL369:
 886:rtos/uC-FS/FAT/fs_fat_sfn.c ****                 len++;
 3436              		.loc 1 886 18 discriminator 4 view .LVU1146
 3437 009a A4B2     		uxth	r4, r4
 3438              	.LVL370:
 887:rtos/uC-FS/FAT/fs_fat_sfn.c ****             } else {
 3439              		.loc 1 887 17 is_stmt 1 discriminator 4 view .LVU1147
 887:rtos/uC-FS/FAT/fs_fat_sfn.c ****             } else {
 3440              		.loc 1 887 20 is_stmt 0 discriminator 4 view .LVU1148
 3441 009c 0130     		adds	r0, r0, #1
 3442              	.LVL371:
 887:rtos/uC-FS/FAT/fs_fat_sfn.c ****             } else {
 3443              		.loc 1 887 20 discriminator 4 view .LVU1149
 3444 009e 80B2     		uxth	r0, r0
 3445              	.LVL372:
 887:rtos/uC-FS/FAT/fs_fat_sfn.c ****             } else {
 3446              		.loc 1 887 20 discriminator 4 view .LVU1150
 3447 00a0 C5E7     		b	.L241
 3448              	.LVL373:
 3449              	.L252:
 889:rtos/uC-FS/FAT/fs_fat_sfn.c ****             }
 3450              		.loc 1 889 26 view .LVU1151
 3451 00a2 0022     		movs	r2, #0
 3452              	.LVL374:
 889:rtos/uC-FS/FAT/fs_fat_sfn.c ****             }
 3453              		.loc 1 889 26 view .LVU1152
 3454 00a4 C3E7     		b	.L241
 3455              	.LVL375:
 3456              	.L253:
 889:rtos/uC-FS/FAT/fs_fat_sfn.c ****             }
 3457              		.loc 1 889 26 view .LVU1153
 3458 00a6 0022     		movs	r2, #0
 3459              	.LVL376:
 889:rtos/uC-FS/FAT/fs_fat_sfn.c ****             }
 3460              		.loc 1 889 26 view .LVU1154
 3461 00a8 C1E7     		b	.L241
ARM GAS  /tmp/ccpi2Pe2.s 			page 116


 3462              	.LVL377:
 3463              	.L254:
 889:rtos/uC-FS/FAT/fs_fat_sfn.c ****             }
 3464              		.loc 1 889 26 view .LVU1155
 3465 00aa 0022     		movs	r2, #0
 3466              	.LVL378:
 889:rtos/uC-FS/FAT/fs_fat_sfn.c ****             }
 3467              		.loc 1 889 26 view .LVU1156
 3468 00ac BFE7     		b	.L241
 3469              	.LVL379:
 3470              	.L255:
 889:rtos/uC-FS/FAT/fs_fat_sfn.c ****             }
 3471              		.loc 1 889 26 view .LVU1157
 3472 00ae 0022     		movs	r2, #0
 3473              	.LVL380:
 889:rtos/uC-FS/FAT/fs_fat_sfn.c ****             }
 3474              		.loc 1 889 26 view .LVU1158
 3475 00b0 BDE7     		b	.L241
 3476              	.LVL381:
 3477              	.L256:
 889:rtos/uC-FS/FAT/fs_fat_sfn.c ****             }
 3478              		.loc 1 889 26 view .LVU1159
 3479 00b2 0022     		movs	r2, #0
 3480              	.LVL382:
 889:rtos/uC-FS/FAT/fs_fat_sfn.c ****             }
 3481              		.loc 1 889 26 view .LVU1160
 3482 00b4 BBE7     		b	.L241
 3483              	.LVL383:
 3484              	.L257:
 889:rtos/uC-FS/FAT/fs_fat_sfn.c ****             }
 3485              		.loc 1 889 26 view .LVU1161
 3486 00b6 0022     		movs	r2, #0
 3487              	.LVL384:
 889:rtos/uC-FS/FAT/fs_fat_sfn.c ****             }
 3488              		.loc 1 889 26 view .LVU1162
 3489 00b8 B9E7     		b	.L241
 3490              	.LVL385:
 3491              	.L258:
 889:rtos/uC-FS/FAT/fs_fat_sfn.c ****             }
 3492              		.loc 1 889 26 view .LVU1163
 3493 00ba 0022     		movs	r2, #0
 3494              	.LVL386:
 889:rtos/uC-FS/FAT/fs_fat_sfn.c ****             }
 3495              		.loc 1 889 26 view .LVU1164
 3496 00bc B7E7     		b	.L241
 3497              	.LVL387:
 3498              	.L259:
 889:rtos/uC-FS/FAT/fs_fat_sfn.c ****             }
 3499              		.loc 1 889 26 view .LVU1165
 3500 00be 0022     		movs	r2, #0
 3501              	.LVL388:
 889:rtos/uC-FS/FAT/fs_fat_sfn.c ****             }
 3502              		.loc 1 889 26 view .LVU1166
 3503 00c0 B5E7     		b	.L241
 3504              	.LVL389:
 3505              	.L260:
 889:rtos/uC-FS/FAT/fs_fat_sfn.c ****             }
ARM GAS  /tmp/ccpi2Pe2.s 			page 117


 3506              		.loc 1 889 26 view .LVU1167
 3507 00c2 0022     		movs	r2, #0
 3508              	.LVL390:
 889:rtos/uC-FS/FAT/fs_fat_sfn.c ****             }
 3509              		.loc 1 889 26 view .LVU1168
 3510 00c4 B3E7     		b	.L241
 3511              	.LVL391:
 3512              	.L261:
 889:rtos/uC-FS/FAT/fs_fat_sfn.c ****             }
 3513              		.loc 1 889 26 view .LVU1169
 3514 00c6 0022     		movs	r2, #0
 3515              	.LVL392:
 889:rtos/uC-FS/FAT/fs_fat_sfn.c ****             }
 3516              		.loc 1 889 26 view .LVU1170
 3517 00c8 B1E7     		b	.L241
 3518              	.LVL393:
 3519              	.L262:
 889:rtos/uC-FS/FAT/fs_fat_sfn.c ****             }
 3520              		.loc 1 889 26 view .LVU1171
 3521 00ca 0022     		movs	r2, #0
 3522              	.LVL394:
 889:rtos/uC-FS/FAT/fs_fat_sfn.c ****             }
 3523              		.loc 1 889 26 view .LVU1172
 3524 00cc AFE7     		b	.L241
 3525              	.LVL395:
 3526              	.L263:
 889:rtos/uC-FS/FAT/fs_fat_sfn.c ****             }
 3527              		.loc 1 889 26 view .LVU1173
 3528 00ce 0022     		movs	r2, #0
 3529              	.LVL396:
 889:rtos/uC-FS/FAT/fs_fat_sfn.c ****             }
 3530              		.loc 1 889 26 view .LVU1174
 3531 00d0 ADE7     		b	.L241
 3532              	.LVL397:
 3533              	.L264:
 889:rtos/uC-FS/FAT/fs_fat_sfn.c ****             }
 3534              		.loc 1 889 26 view .LVU1175
 3535 00d2 0022     		movs	r2, #0
 3536              	.LVL398:
 889:rtos/uC-FS/FAT/fs_fat_sfn.c ****             }
 3537              		.loc 1 889 26 view .LVU1176
 3538 00d4 ABE7     		b	.L241
 3539              	.LVL399:
 3540              	.L265:
 889:rtos/uC-FS/FAT/fs_fat_sfn.c ****             }
 3541              		.loc 1 889 26 view .LVU1177
 3542 00d6 0022     		movs	r2, #0
 3543              	.LVL400:
 889:rtos/uC-FS/FAT/fs_fat_sfn.c ****             }
 3544              		.loc 1 889 26 view .LVU1178
 3545 00d8 A9E7     		b	.L241
 3546              	.LVL401:
 3547              	.L266:
 889:rtos/uC-FS/FAT/fs_fat_sfn.c ****             }
 3548              		.loc 1 889 26 view .LVU1179
 3549 00da 0022     		movs	r2, #0
 3550              	.LVL402:
ARM GAS  /tmp/ccpi2Pe2.s 			page 118


 889:rtos/uC-FS/FAT/fs_fat_sfn.c ****             }
 3551              		.loc 1 889 26 view .LVU1180
 3552 00dc A7E7     		b	.L241
 3553              	.LVL403:
 3554              	.L267:
 889:rtos/uC-FS/FAT/fs_fat_sfn.c ****             }
 3555              		.loc 1 889 26 view .LVU1181
 3556 00de 0022     		movs	r2, #0
 3557              	.LVL404:
 889:rtos/uC-FS/FAT/fs_fat_sfn.c ****             }
 3558              		.loc 1 889 26 view .LVU1182
 3559 00e0 A5E7     		b	.L241
 3560              	.LVL405:
 3561              	.L268:
 889:rtos/uC-FS/FAT/fs_fat_sfn.c ****             }
 3562              		.loc 1 889 26 view .LVU1183
 3563 00e2 0022     		movs	r2, #0
 3564              	.LVL406:
 889:rtos/uC-FS/FAT/fs_fat_sfn.c ****             }
 3565              		.loc 1 889 26 view .LVU1184
 3566 00e4 A3E7     		b	.L241
 3567              	.LVL407:
 3568              	.L243:
 898:rtos/uC-FS/FAT/fs_fat_sfn.c ****        *p_err = FS_ERR_VOL_LABEL_INVALID;
 3569              		.loc 1 898 5 is_stmt 1 view .LVU1185
 898:rtos/uC-FS/FAT/fs_fat_sfn.c ****        *p_err = FS_ERR_VOL_LABEL_INVALID;
 3570              		.loc 1 898 8 is_stmt 0 view .LVU1186
 3571 00e6 22B9     		cbnz	r2, .L245
 899:rtos/uC-FS/FAT/fs_fat_sfn.c ****         return;
 3572              		.loc 1 899 8 is_stmt 1 view .LVU1187
 899:rtos/uC-FS/FAT/fs_fat_sfn.c ****         return;
 3573              		.loc 1 899 15 is_stmt 0 view .LVU1188
 3574 00e8 4FF4B463 		mov	r3, #1440
 3575              	.LVL408:
 899:rtos/uC-FS/FAT/fs_fat_sfn.c ****         return;
 3576              		.loc 1 899 15 view .LVU1189
 3577 00ec 3380     		strh	r3, [r6]	@ movhi
 900:rtos/uC-FS/FAT/fs_fat_sfn.c ****     }
 3578              		.loc 1 900 9 is_stmt 1 view .LVU1190
 3579              	.LVL409:
 3580              	.L237:
 948:rtos/uC-FS/FAT/fs_fat_sfn.c **** #endif
 3581              		.loc 1 948 1 is_stmt 0 view .LVU1191
 3582 00ee 0BB0     		add	sp, sp, #44
 3583              	.LCFI60:
 3584              		.cfi_remember_state
 3585              		.cfi_def_cfa_offset 20
 3586              		@ sp needed
 3587 00f0 F0BD     		pop	{r4, r5, r6, r7, pc}
 3588              	.LVL410:
 3589              	.L245:
 3590              	.LCFI61:
 3591              		.cfi_restore_state
 905:rtos/uC-FS/FAT/fs_fat_sfn.c ****     if (p_buf == (FS_BUF *)0) {
 3592              		.loc 1 905 5 is_stmt 1 view .LVU1192
 905:rtos/uC-FS/FAT/fs_fat_sfn.c ****     if (p_buf == (FS_BUF *)0) {
 3593              		.loc 1 905 13 is_stmt 0 view .LVU1193
ARM GAS  /tmp/ccpi2Pe2.s 			page 119


 3594 00f2 3846     		mov	r0, r7
 3595              	.LVL411:
 905:rtos/uC-FS/FAT/fs_fat_sfn.c ****     if (p_buf == (FS_BUF *)0) {
 3596              		.loc 1 905 13 view .LVU1194
 3597 00f4 FFF7FEFF 		bl	FSBuf_Get
 3598              	.LVL412:
 906:rtos/uC-FS/FAT/fs_fat_sfn.c ****        *p_err = FS_ERR_BUF_NONE_AVAIL;
 3599              		.loc 1 906 5 is_stmt 1 view .LVU1195
 906:rtos/uC-FS/FAT/fs_fat_sfn.c ****        *p_err = FS_ERR_BUF_NONE_AVAIL;
 3600              		.loc 1 906 8 is_stmt 0 view .LVU1196
 3601 00f8 0446     		mov	r4, r0
 3602              	.LVL413:
 906:rtos/uC-FS/FAT/fs_fat_sfn.c ****        *p_err = FS_ERR_BUF_NONE_AVAIL;
 3603              		.loc 1 906 8 view .LVU1197
 3604 00fa 0028     		cmp	r0, #0
 3605 00fc 33D0     		beq	.L270
 911:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 3606              		.loc 1 911 5 is_stmt 1 view .LVU1198
 911:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 3607              		.loc 1 911 42 is_stmt 0 view .LVU1199
 3608 00fe 7B6B     		ldr	r3, [r7, #52]
 911:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 3609              		.loc 1 911 19 view .LVU1200
 3610 0100 9D6A     		ldr	r5, [r3, #40]
 3611              	.LVL414:
 913:rtos/uC-FS/FAT/fs_fat_sfn.c ****     dir_start_pos.SecPos = 0u;
 3612              		.loc 1 913 5 is_stmt 1 view .LVU1201
 913:rtos/uC-FS/FAT/fs_fat_sfn.c ****     dir_start_pos.SecPos = 0u;
 3613              		.loc 1 913 26 is_stmt 0 view .LVU1202
 3614 0102 0695     		str	r5, [sp, #24]
 914:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 3615              		.loc 1 914 5 is_stmt 1 view .LVU1203
 914:rtos/uC-FS/FAT/fs_fat_sfn.c **** 
 3616              		.loc 1 914 26 is_stmt 0 view .LVU1204
 3617 0104 0023     		movs	r3, #0
 3618 0106 0793     		str	r3, [sp, #28]
 916:rtos/uC-FS/FAT/fs_fat_sfn.c ****                           p_buf,
 3619              		.loc 1 916 5 is_stmt 1 view .LVU1205
 3620 0108 0096     		str	r6, [sp]
 3621 010a 08AB     		add	r3, sp, #32
 3622 010c 06AA     		add	r2, sp, #24
 3623 010e 0146     		mov	r1, r0
 3624 0110 3846     		mov	r0, r7
 3625              	.LVL415:
 916:rtos/uC-FS/FAT/fs_fat_sfn.c ****                           p_buf,
 3626              		.loc 1 916 5 is_stmt 0 view .LVU1206
 3627 0112 FFF7FEFF 		bl	FS_FAT_SFN_LabelFind
 3628              	.LVL416:
 922:rtos/uC-FS/FAT/fs_fat_sfn.c ****         FSBuf_Free(p_buf);
 3629              		.loc 1 922 5 is_stmt 1 view .LVU1207
 922:rtos/uC-FS/FAT/fs_fat_sfn.c ****         FSBuf_Free(p_buf);
 3630              		.loc 1 922 9 is_stmt 0 view .LVU1208
 3631 0116 3388     		ldrh	r3, [r6]
 922:rtos/uC-FS/FAT/fs_fat_sfn.c ****         FSBuf_Free(p_buf);
 3632              		.loc 1 922 8 view .LVU1209
 3633 0118 B3F5967F 		cmp	r3, #300
 3634 011c 26D0     		beq	.L271
ARM GAS  /tmp/ccpi2Pe2.s 			page 120


 927:rtos/uC-FS/FAT/fs_fat_sfn.c ****         FS_FAT_SFN_DirEntryPlace( p_vol,                        /*              ... find place for 
 3635              		.loc 1 927 5 is_stmt 1 view .LVU1210
 927:rtos/uC-FS/FAT/fs_fat_sfn.c ****         FS_FAT_SFN_DirEntryPlace( p_vol,                        /*              ... find place for 
 3636              		.loc 1 927 8 is_stmt 0 view .LVU1211
 3637 011e 43B1     		cbz	r3, .L249
 928:rtos/uC-FS/FAT/fs_fat_sfn.c ****                                   p_buf,
 3638              		.loc 1 928 9 is_stmt 1 view .LVU1212
 3639 0120 0096     		str	r6, [sp]
 3640 0122 08AB     		add	r3, sp, #32
 3641 0124 2A46     		mov	r2, r5
 3642 0126 2146     		mov	r1, r4
 3643 0128 3846     		mov	r0, r7
 3644 012a FFF7FEFF 		bl	FS_FAT_SFN_DirEntryPlace
 3645              	.LVL417:
 933:rtos/uC-FS/FAT/fs_fat_sfn.c ****             FSBuf_Free(p_buf);
 3646              		.loc 1 933 9 view .LVU1213
 933:rtos/uC-FS/FAT/fs_fat_sfn.c ****             FSBuf_Free(p_buf);
 3647              		.loc 1 933 13 is_stmt 0 view .LVU1214
 3648 012e 3388     		ldrh	r3, [r6]
 933:rtos/uC-FS/FAT/fs_fat_sfn.c ****             FSBuf_Free(p_buf);
 3649              		.loc 1 933 12 view .LVU1215
 3650 0130 03BB     		cbnz	r3, .L272
 3651              	.L249:
 941:rtos/uC-FS/FAT/fs_fat_sfn.c ****     Mem_Clr((void *)p_dir_entry, FS_FAT_SIZE_DIR_ENTRY);
 3652              		.loc 1 941 5 is_stmt 1 view .LVU1216
 941:rtos/uC-FS/FAT/fs_fat_sfn.c ****     Mem_Clr((void *)p_dir_entry, FS_FAT_SIZE_DIR_ENTRY);
 3653              		.loc 1 941 38 is_stmt 0 view .LVU1217
 3654 0132 2569     		ldr	r5, [r4, #16]
 3655              	.LVL418:
 941:rtos/uC-FS/FAT/fs_fat_sfn.c ****     Mem_Clr((void *)p_dir_entry, FS_FAT_SIZE_DIR_ENTRY);
 3656              		.loc 1 941 61 view .LVU1218
 3657 0134 099B     		ldr	r3, [sp, #36]
 941:rtos/uC-FS/FAT/fs_fat_sfn.c ****     Mem_Clr((void *)p_dir_entry, FS_FAT_SIZE_DIR_ENTRY);
 3658              		.loc 1 941 17 view .LVU1219
 3659 0136 1D44     		add	r5, r5, r3
 3660              	.LVL419:
 942:rtos/uC-FS/FAT/fs_fat_sfn.c ****     Mem_Copy((void *)p_dir_entry, (void *)label_buf, FS_FAT_VOL_LABEL_LEN);
 3661              		.loc 1 942 5 is_stmt 1 view .LVU1220
 3662 0138 2021     		movs	r1, #32
 3663 013a 2846     		mov	r0, r5
 3664 013c FFF7FEFF 		bl	Mem_Clr
 3665              	.LVL420:
 943:rtos/uC-FS/FAT/fs_fat_sfn.c ****     p_dir_entry[FS_FAT_DIRENT_OFF_ATTR] = FS_FAT_DIRENT_ATTR_VOLUME_ID;
 3666              		.loc 1 943 5 view .LVU1221
 3667 0140 0B22     		movs	r2, #11
 3668 0142 03A9     		add	r1, sp, #12
 3669 0144 2846     		mov	r0, r5
 3670 0146 FFF7FEFF 		bl	Mem_Copy
 3671              	.LVL421:
 944:rtos/uC-FS/FAT/fs_fat_sfn.c ****     FSBuf_MarkDirty(p_buf, p_err);                              /* Wr dir entry.                   
 3672              		.loc 1 944 5 view .LVU1222
 944:rtos/uC-FS/FAT/fs_fat_sfn.c ****     FSBuf_MarkDirty(p_buf, p_err);                              /* Wr dir entry.                   
 3673              		.loc 1 944 41 is_stmt 0 view .LVU1223
 3674 014a 0823     		movs	r3, #8
 3675 014c EB72     		strb	r3, [r5, #11]
 945:rtos/uC-FS/FAT/fs_fat_sfn.c ****     FSBuf_Flush(p_buf, p_err);
 3676              		.loc 1 945 5 is_stmt 1 view .LVU1224
ARM GAS  /tmp/ccpi2Pe2.s 			page 121


 3677 014e 3146     		mov	r1, r6
 3678 0150 2046     		mov	r0, r4
 3679 0152 FFF7FEFF 		bl	FSBuf_MarkDirty
 3680              	.LVL422:
 946:rtos/uC-FS/FAT/fs_fat_sfn.c ****     FSBuf_Free(p_buf);
 3681              		.loc 1 946 5 view .LVU1225
 3682 0156 3146     		mov	r1, r6
 3683 0158 2046     		mov	r0, r4
 3684 015a FFF7FEFF 		bl	FSBuf_Flush
 3685              	.LVL423:
 947:rtos/uC-FS/FAT/fs_fat_sfn.c **** }
 3686              		.loc 1 947 5 view .LVU1226
 3687 015e 2046     		mov	r0, r4
 3688 0160 FFF7FEFF 		bl	FSBuf_Free
 3689              	.LVL424:
 3690 0164 C3E7     		b	.L237
 3691              	.LVL425:
 3692              	.L270:
 907:rtos/uC-FS/FAT/fs_fat_sfn.c ****         return;
 3693              		.loc 1 907 8 view .LVU1227
 907:rtos/uC-FS/FAT/fs_fat_sfn.c ****         return;
 3694              		.loc 1 907 15 is_stmt 0 view .LVU1228
 3695 0166 6423     		movs	r3, #100
 3696 0168 3380     		strh	r3, [r6]	@ movhi
 908:rtos/uC-FS/FAT/fs_fat_sfn.c ****     }
 3697              		.loc 1 908 9 is_stmt 1 view .LVU1229
 3698 016a C0E7     		b	.L237
 3699              	.LVL426:
 3700              	.L271:
 923:rtos/uC-FS/FAT/fs_fat_sfn.c ****         return;
 3701              		.loc 1 923 9 view .LVU1230
 3702 016c 2046     		mov	r0, r4
 3703 016e FFF7FEFF 		bl	FSBuf_Free
 3704              	.LVL427:
 924:rtos/uC-FS/FAT/fs_fat_sfn.c ****     }
 3705              		.loc 1 924 9 view .LVU1231
 3706 0172 BCE7     		b	.L237
 3707              	.L272:
 934:rtos/uC-FS/FAT/fs_fat_sfn.c ****             return;
 3708              		.loc 1 934 13 view .LVU1232
 3709 0174 2046     		mov	r0, r4
 3710 0176 FFF7FEFF 		bl	FSBuf_Free
 3711              	.LVL428:
 935:rtos/uC-FS/FAT/fs_fat_sfn.c ****         }
 3712              		.loc 1 935 13 view .LVU1233
 3713 017a B8E7     		b	.L237
 3714              		.cfi_endproc
 3715              	.LFE5:
 3717              		.global	FS_FAT_SFN_API
 3718              		.section	.rodata.FS_FAT_SFN_API,"a"
 3719              		.align	2
 3722              	FS_FAT_SFN_API:
 3723 0000 00000000 		.word	FS_FAT_SFN_DirEntryCreate
 3724 0004 00000000 		.word	FS_FAT_SFN_DirEntryCreateAt
 3725 0008 00000000 		.word	FS_FAT_SFN_DirEntryDel
 3726 000c 00000000 		.word	FS_FAT_SFN_DirEntryFind
 3727 0010 00000000 		.word	FS_FAT_SFN_NextDirEntryGet
ARM GAS  /tmp/ccpi2Pe2.s 			page 122


 3728              		.text
 3729              	.Letext0:
 3730              		.file 2 "rtos/uC-CPU/ARM-Cortex-M/ARMv7-M/GNU/cpu.h"
 3731              		.file 3 "rtos/uC-Clk/Source/clk.h"
 3732              		.file 4 "rtos/uC-FS/FAT/../Source/fs_type.h"
 3733              		.file 5 "rtos/uC-FS/FAT/../Source/fs_buf.h"
 3734              		.file 6 "rtos/uC-FS/FAT/../Source/fs_vol.h"
 3735              		.file 7 "rtos/uC-FS/FAT/../Source/fs_err.h"
 3736              		.file 8 "rtos/uC-FS/FAT/../Source/fs_ctr.h"
 3737              		.file 9 "rtos/uC-FS/FAT/fs_fat_type.h"
 3738              		.file 10 "rtos/uC-FS/FAT/fs_fat.h"
 3739              		.file 11 "rtos/uC-FS/FAT/fs_fat_sfn.h"
 3740              		.file 12 "rtos/uC-LIB/lib_mem.h"
 3741              		.file 13 "rtos/uC-LIB/lib_str.h"
ARM GAS  /tmp/ccpi2Pe2.s 			page 123


DEFINED SYMBOLS
                            *ABS*:0000000000000000 fs_fat_sfn.c
     /tmp/ccpi2Pe2.s:18     .text.FS_FAT_SFN_Parse:0000000000000000 $t
     /tmp/ccpi2Pe2.s:25     .text.FS_FAT_SFN_Parse:0000000000000000 FS_FAT_SFN_Parse
     /tmp/ccpi2Pe2.s:221    .text.FS_FAT_SFN_DirEntryFindInSec:0000000000000000 $t
     /tmp/ccpi2Pe2.s:227    .text.FS_FAT_SFN_DirEntryFindInSec:0000000000000000 FS_FAT_SFN_DirEntryFindInSec
     /tmp/ccpi2Pe2.s:372    .text.FS_FAT_SFN_DirEntryPlaceInSec:0000000000000000 $t
     /tmp/ccpi2Pe2.s:378    .text.FS_FAT_SFN_DirEntryPlaceInSec:0000000000000000 FS_FAT_SFN_DirEntryPlaceInSec
     /tmp/ccpi2Pe2.s:477    .text.FS_FAT_SFN_LabelFindInSec:0000000000000000 $t
     /tmp/ccpi2Pe2.s:483    .text.FS_FAT_SFN_LabelFindInSec:0000000000000000 FS_FAT_SFN_LabelFindInSec
     /tmp/ccpi2Pe2.s:625    .text.FS_FAT_SFN_NextDirEntryGet:0000000000000000 $t
     /tmp/ccpi2Pe2.s:631    .text.FS_FAT_SFN_NextDirEntryGet:0000000000000000 FS_FAT_SFN_NextDirEntryGet
     /tmp/ccpi2Pe2.s:953    .text.FS_FAT_SFN_LabelFind:0000000000000000 $t
     /tmp/ccpi2Pe2.s:959    .text.FS_FAT_SFN_LabelFind:0000000000000000 FS_FAT_SFN_LabelFind
     /tmp/ccpi2Pe2.s:1157   .text.FS_FAT_SFN_DirEntryDel:0000000000000000 $t
     /tmp/ccpi2Pe2.s:1163   .text.FS_FAT_SFN_DirEntryDel:0000000000000000 FS_FAT_SFN_DirEntryDel
     /tmp/ccpi2Pe2.s:1249   .text.FS_FAT_SFN_DirEntryPlace:0000000000000000 $t
     /tmp/ccpi2Pe2.s:1255   .text.FS_FAT_SFN_DirEntryPlace:0000000000000000 FS_FAT_SFN_DirEntryPlace
     /tmp/ccpi2Pe2.s:1451   .text.FS_FAT_SFN_Chk:0000000000000000 $t
     /tmp/ccpi2Pe2.s:1458   .text.FS_FAT_SFN_Chk:0000000000000000 FS_FAT_SFN_Chk
     /tmp/ccpi2Pe2.s:1718   .text.FS_FAT_SFN_DirEntryFmt:0000000000000000 $t
     /tmp/ccpi2Pe2.s:1725   .text.FS_FAT_SFN_DirEntryFmt:0000000000000000 FS_FAT_SFN_DirEntryFmt
     /tmp/ccpi2Pe2.s:2020   .text.FS_FAT_SFN_DirEntryCreateAt:0000000000000000 $t
     /tmp/ccpi2Pe2.s:2026   .text.FS_FAT_SFN_DirEntryCreateAt:0000000000000000 FS_FAT_SFN_DirEntryCreateAt
     /tmp/ccpi2Pe2.s:2136   .text.FS_FAT_SFN_Create:0000000000000000 $t
     /tmp/ccpi2Pe2.s:2143   .text.FS_FAT_SFN_Create:0000000000000000 FS_FAT_SFN_Create
     /tmp/ccpi2Pe2.s:2617   .text.FS_FAT_SFN_DirEntryCreate:0000000000000000 $t
     /tmp/ccpi2Pe2.s:2623   .text.FS_FAT_SFN_DirEntryCreate:0000000000000000 FS_FAT_SFN_DirEntryCreate
     /tmp/ccpi2Pe2.s:2787   .text.FS_FAT_SFN_SFN_Find:0000000000000000 $t
     /tmp/ccpi2Pe2.s:2794   .text.FS_FAT_SFN_SFN_Find:0000000000000000 FS_FAT_SFN_SFN_Find
     /tmp/ccpi2Pe2.s:3000   .text.FS_FAT_SFN_DirEntryFind:0000000000000000 $t
     /tmp/ccpi2Pe2.s:3006   .text.FS_FAT_SFN_DirEntryFind:0000000000000000 FS_FAT_SFN_DirEntryFind
     /tmp/ccpi2Pe2.s:3117   .text.FS_FAT_SFN_LabelGet:0000000000000000 $t
     /tmp/ccpi2Pe2.s:3124   .text.FS_FAT_SFN_LabelGet:0000000000000000 FS_FAT_SFN_LabelGet
     /tmp/ccpi2Pe2.s:3256   .text.FS_FAT_SFN_LabelSet:0000000000000000 $t
     /tmp/ccpi2Pe2.s:3263   .text.FS_FAT_SFN_LabelSet:0000000000000000 FS_FAT_SFN_LabelSet
     /tmp/ccpi2Pe2.s:3722   .rodata.FS_FAT_SFN_API:0000000000000000 FS_FAT_SFN_API
     /tmp/ccpi2Pe2.s:3719   .rodata.FS_FAT_SFN_API:0000000000000000 $d
                           .group:0000000000000000 wm4.0.0f5aa60db9403f389c005f20ecce4286
                           .group:0000000000000000 wm4.cpu_def.h.46.baa122a2898bdc40bb50d1f21ead1515
                           .group:0000000000000000 wm4.cpu_cfg.h.45.38a6a562da8b04490c382a226238c57e
                           .group:0000000000000000 wm4.cpu.h.171.3cb15ee3ccb812cbfdf76d1fbfb9eda0
                           .group:0000000000000000 wm4.lib_def.h.66.6ab2a012067a8e1f4289db5765835062
                           .group:0000000000000000 wm4.lib_ascii.h.132.fab7475cf7158ae9b59cf42e0e06afca
                           .group:0000000000000000 wm4.cpu_core.h.51.bda0b8f45c33e87ce41267758624493c
                           .group:0000000000000000 wm4.lib_cfg.h.40.b2958733f73e73af70f675ca0f89303e
                           .group:0000000000000000 wm4.lib_mem.h.121.89b942a057fb20091baad8bf6b28b1e6
                           .group:0000000000000000 wm4.clk.h.99.39403db6a27321e53b261bbe20b56e1d
                           .group:0000000000000000 wm4.lib_str.h.60.d6fb3a1336db17c586ed26be94929677
                           .group:0000000000000000 wm4.clk_cfg.h.45.428f260ed0fbcfa16fc822c67c85dade
                           .group:0000000000000000 wm4.clk.h.219.c24c7347fcc7691d3157fe73514cb366
                           .group:0000000000000000 wm4.fs.h.42.4f6311a594ee5619f1ee7a9392eb7faa
                           .group:0000000000000000 wm4.fs_def.h.42.653ad677c23ef93c522ec84af681385d
                           .group:0000000000000000 wm4.fs_cfg.h.116.da4f8e9d0b9040a97ef3bf26c61e90fd
                           .group:0000000000000000 wm4.fs_cfg_fs.h.42.e13f500e2fc14f5d0bdda5cfe236732a
                           .group:0000000000000000 wm4.fs_type.h.42.3e681b291920189044ba1da24ae0f22a
                           .group:0000000000000000 wm4.fs_err.h.42.d52bfed31dff3d1419c5cf09952dee67
ARM GAS  /tmp/ccpi2Pe2.s 			page 124


                           .group:0000000000000000 wm4.fs.h.97.1d629f0ba32b5622ab4e01a254bd98e8
                           .group:0000000000000000 wm4.fs_buf.h.42.0c8ba10968f085926266a27b71b3972d
                           .group:0000000000000000 wm4.fs_vol.h.42.6f34e6a2e2db310debaffbf0344054a2
                           .group:0000000000000000 wm4.fs_ctr.h.42.9d1398cac157503ac8af114819f7782b
                           .group:0000000000000000 wm4.fs_vol.h.83.fd165084f1d541edeb55ea0b6d9b6170
                           .group:0000000000000000 wm4.fs_util.h.64.fe7812d6ca4c430dea2d2e705fd73c11
                           .group:0000000000000000 wm4.fs_fat_type.h.44.5030ef39a150a8f4f55331616cd38bbd
                           .group:0000000000000000 wm4.fs_fat.h.103.89adf2d396ea9a0dd44def3a42712dd1
                           .group:0000000000000000 wm4.fs_fat_sfn.h.46.03ea0de29c8243f24757f3312a7375e3

UNDEFINED SYMBOLS
FS_FAT_SecNextGet
FSBuf_Set
Mem_Clr
FSBuf_MarkDirty
FS_FAT_SecNextGetAlloc
Clk_GetDateTime
FS_FAT_TimeFmt
FS_FAT_DateFmt
FSBuf_Get
FSBuf_Free
Str_Copy_N
Mem_Copy
FSBuf_Flush

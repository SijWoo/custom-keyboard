ARM GAS  /tmp/ccz88FW6.s 			page 1


   1              		.cpu cortex-m4
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"fs_partition.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.text.FSPartition_CalcCHS,"ax",%progbits
  18              		.align	1
  19              		.arch armv7e-m
  20              		.syntax unified
  21              		.thumb
  22              		.thumb_func
  23              		.fpu fpv4-sp-d16
  25              	FSPartition_CalcCHS:
  26              	.LVL0:
  27              	.LFB2:
  28              		.file 1 "rtos/uC-FS/Source/fs_partition.c"
   1:rtos/uC-FS/Source/fs_partition.c **** /*
   2:rtos/uC-FS/Source/fs_partition.c **** ***************************************************************************************************
   3:rtos/uC-FS/Source/fs_partition.c **** *                                                uC/FS
   4:rtos/uC-FS/Source/fs_partition.c **** *                                      The Embedded File System
   5:rtos/uC-FS/Source/fs_partition.c **** *
   6:rtos/uC-FS/Source/fs_partition.c **** *                         (c) Copyright 2008-2019; Silicon Laboratories Inc.,
   7:rtos/uC-FS/Source/fs_partition.c **** *                                400 W. Cesar Chavez, Austin, TX 78701
   8:rtos/uC-FS/Source/fs_partition.c **** *
   9:rtos/uC-FS/Source/fs_partition.c **** *                   All rights reserved. Protected by international copyright laws.
  10:rtos/uC-FS/Source/fs_partition.c **** *
  11:rtos/uC-FS/Source/fs_partition.c **** *                  Your use of this software is subject to your acceptance of the terms
  12:rtos/uC-FS/Source/fs_partition.c **** *                  of a Silicon Labs Micrium software license, which can be obtained by
  13:rtos/uC-FS/Source/fs_partition.c **** *                  contacting info@micrium.com. If you do not agree to the terms of this
  14:rtos/uC-FS/Source/fs_partition.c **** *                  license, you may not use this software.
  15:rtos/uC-FS/Source/fs_partition.c **** *
  16:rtos/uC-FS/Source/fs_partition.c **** *                  Please help us continue to provide the Embedded community with the finest
  17:rtos/uC-FS/Source/fs_partition.c **** *                  software available. Your honesty is greatly appreciated.
  18:rtos/uC-FS/Source/fs_partition.c **** *
  19:rtos/uC-FS/Source/fs_partition.c **** *                    You can find our product's documentation at: doc.micrium.com
  20:rtos/uC-FS/Source/fs_partition.c **** *
  21:rtos/uC-FS/Source/fs_partition.c **** *                          For more information visit us at: www.micrium.com
  22:rtos/uC-FS/Source/fs_partition.c **** ***************************************************************************************************
  23:rtos/uC-FS/Source/fs_partition.c **** */
  24:rtos/uC-FS/Source/fs_partition.c **** 
  25:rtos/uC-FS/Source/fs_partition.c **** /*
  26:rtos/uC-FS/Source/fs_partition.c **** ***************************************************************************************************
  27:rtos/uC-FS/Source/fs_partition.c **** *
  28:rtos/uC-FS/Source/fs_partition.c **** *                               FILE SYSTEM SUITE PARTITION MANAGEMENT
  29:rtos/uC-FS/Source/fs_partition.c **** *
  30:rtos/uC-FS/Source/fs_partition.c **** * Filename     : fs_partition.c
ARM GAS  /tmp/ccz88FW6.s 			page 2


  31:rtos/uC-FS/Source/fs_partition.c **** * Version      : v4.07.06
  32:rtos/uC-FS/Source/fs_partition.c **** ***************************************************************************************************
  33:rtos/uC-FS/Source/fs_partition.c **** * Reference(s) : (1) Carrier, Brian. "File System Forensic Analysis."  NJ: Addison-Wesley, 2005.
  34:rtos/uC-FS/Source/fs_partition.c **** ***************************************************************************************************
  35:rtos/uC-FS/Source/fs_partition.c **** */
  36:rtos/uC-FS/Source/fs_partition.c **** 
  37:rtos/uC-FS/Source/fs_partition.c **** /*
  38:rtos/uC-FS/Source/fs_partition.c **** ***************************************************************************************************
  39:rtos/uC-FS/Source/fs_partition.c **** *                                               MODULE
  40:rtos/uC-FS/Source/fs_partition.c **** ***************************************************************************************************
  41:rtos/uC-FS/Source/fs_partition.c **** */
  42:rtos/uC-FS/Source/fs_partition.c **** 
  43:rtos/uC-FS/Source/fs_partition.c **** #define  MICRIUM_SOURCE
  44:rtos/uC-FS/Source/fs_partition.c **** #define  FS_PARTITION_MODULE
  45:rtos/uC-FS/Source/fs_partition.c **** 
  46:rtos/uC-FS/Source/fs_partition.c **** 
  47:rtos/uC-FS/Source/fs_partition.c **** /*
  48:rtos/uC-FS/Source/fs_partition.c **** ***************************************************************************************************
  49:rtos/uC-FS/Source/fs_partition.c **** *                                            INCLUDE FILES
  50:rtos/uC-FS/Source/fs_partition.c **** ***************************************************************************************************
  51:rtos/uC-FS/Source/fs_partition.c **** */
  52:rtos/uC-FS/Source/fs_partition.c **** 
  53:rtos/uC-FS/Source/fs_partition.c **** #include  <lib_mem.h>
  54:rtos/uC-FS/Source/fs_partition.c **** #include  "fs.h"
  55:rtos/uC-FS/Source/fs_partition.c **** #include  "fs_type.h"
  56:rtos/uC-FS/Source/fs_partition.c **** #include  "fs_partition.h"
  57:rtos/uC-FS/Source/fs_partition.c **** #include  "fs_buf.h"
  58:rtos/uC-FS/Source/fs_partition.c **** #include  "fs_dev.h"
  59:rtos/uC-FS/Source/fs_partition.c **** 
  60:rtos/uC-FS/Source/fs_partition.c **** 
  61:rtos/uC-FS/Source/fs_partition.c **** /*
  62:rtos/uC-FS/Source/fs_partition.c **** ***************************************************************************************************
  63:rtos/uC-FS/Source/fs_partition.c **** *                                           LINT INHIBITION
  64:rtos/uC-FS/Source/fs_partition.c **** *
  65:rtos/uC-FS/Source/fs_partition.c **** * Note(s) : (1) Certain macro's within this file describe commands, command values or register fiel
  66:rtos/uC-FS/Source/fs_partition.c **** *               that are currently unused.  lint error option #750 is disabled to prevent error mes
  67:rtos/uC-FS/Source/fs_partition.c **** *               because of unused macro's :
  68:rtos/uC-FS/Source/fs_partition.c **** *
  69:rtos/uC-FS/Source/fs_partition.c **** *                   "Info 750: local macro '...' (line ..., file ...) not referenced"
  70:rtos/uC-FS/Source/fs_partition.c **** ***************************************************************************************************
  71:rtos/uC-FS/Source/fs_partition.c **** */
  72:rtos/uC-FS/Source/fs_partition.c **** 
  73:rtos/uC-FS/Source/fs_partition.c **** /*lint -e750*/
  74:rtos/uC-FS/Source/fs_partition.c **** 
  75:rtos/uC-FS/Source/fs_partition.c **** 
  76:rtos/uC-FS/Source/fs_partition.c **** /*
  77:rtos/uC-FS/Source/fs_partition.c **** ***************************************************************************************************
  78:rtos/uC-FS/Source/fs_partition.c **** *                                            LOCAL DEFINES
  79:rtos/uC-FS/Source/fs_partition.c **** ***************************************************************************************************
  80:rtos/uC-FS/Source/fs_partition.c **** */
  81:rtos/uC-FS/Source/fs_partition.c **** 
  82:rtos/uC-FS/Source/fs_partition.c **** 
  83:rtos/uC-FS/Source/fs_partition.c **** /*
  84:rtos/uC-FS/Source/fs_partition.c **** ***************************************************************************************************
  85:rtos/uC-FS/Source/fs_partition.c **** *                                           LOCAL CONSTANTS
  86:rtos/uC-FS/Source/fs_partition.c **** ***************************************************************************************************
  87:rtos/uC-FS/Source/fs_partition.c **** */
ARM GAS  /tmp/ccz88FW6.s 			page 3


  88:rtos/uC-FS/Source/fs_partition.c **** 
  89:rtos/uC-FS/Source/fs_partition.c **** 
  90:rtos/uC-FS/Source/fs_partition.c **** /*
  91:rtos/uC-FS/Source/fs_partition.c **** ***************************************************************************************************
  92:rtos/uC-FS/Source/fs_partition.c **** *                                          LOCAL DATA TYPES
  93:rtos/uC-FS/Source/fs_partition.c **** ***************************************************************************************************
  94:rtos/uC-FS/Source/fs_partition.c **** */
  95:rtos/uC-FS/Source/fs_partition.c **** 
  96:rtos/uC-FS/Source/fs_partition.c **** /*
  97:rtos/uC-FS/Source/fs_partition.c **** ***************************************************************************************************
  98:rtos/uC-FS/Source/fs_partition.c **** *                                         PARTITION DATA TYPE
  99:rtos/uC-FS/Source/fs_partition.c **** ***************************************************************************************************
 100:rtos/uC-FS/Source/fs_partition.c **** */
 101:rtos/uC-FS/Source/fs_partition.c **** 
 102:rtos/uC-FS/Source/fs_partition.c **** typedef  struct  fs_partition {
 103:rtos/uC-FS/Source/fs_partition.c ****     FS_PARTITION_NBR   Partition;                               /* Partition nbr.                  
 104:rtos/uC-FS/Source/fs_partition.c ****     FS_SEC_NBR         CurMBR_Sec;                              /* Dev sec of cur MBR.             
 105:rtos/uC-FS/Source/fs_partition.c ****     FS_PARTITION_NBR   CurMBR_Pos;                              /* Pos in cur MBR sec.             
 106:rtos/uC-FS/Source/fs_partition.c ****     FS_SEC_NBR         PrevMBR_Sec;                             /* Dev sec of prev MBR.            
 107:rtos/uC-FS/Source/fs_partition.c ****     FS_PARTITION_NBR   PrevMBR_Pos;                             /* Pos in prev MBR sec.            
 108:rtos/uC-FS/Source/fs_partition.c ****     FS_SEC_NBR         PrevPartitionEnd;                        /* End sec of prev partition.      
 109:rtos/uC-FS/Source/fs_partition.c ****     FS_SEC_NBR         PrimExtPartitionStart;                   /* Start sec of prim ext partition.
 110:rtos/uC-FS/Source/fs_partition.c ****     FS_SEC_QTY         PrimExtPartitionSize;                    /* Size of prim ext partition.     
 111:rtos/uC-FS/Source/fs_partition.c ****     CPU_BOOLEAN        InExt;                                   /* In ext partition.               
 112:rtos/uC-FS/Source/fs_partition.c ****     CPU_BOOLEAN        HasErr;                                  /* Err in partition.               
 113:rtos/uC-FS/Source/fs_partition.c ****     FS_DEV            *DevPtr;                                  /* Ptr to dev.                     
 114:rtos/uC-FS/Source/fs_partition.c **** } FS_PARTITION;
 115:rtos/uC-FS/Source/fs_partition.c **** 
 116:rtos/uC-FS/Source/fs_partition.c **** 
 117:rtos/uC-FS/Source/fs_partition.c **** /*
 118:rtos/uC-FS/Source/fs_partition.c **** ***************************************************************************************************
 119:rtos/uC-FS/Source/fs_partition.c **** *                                            LOCAL TABLES
 120:rtos/uC-FS/Source/fs_partition.c **** ***************************************************************************************************
 121:rtos/uC-FS/Source/fs_partition.c **** */
 122:rtos/uC-FS/Source/fs_partition.c **** 
 123:rtos/uC-FS/Source/fs_partition.c **** 
 124:rtos/uC-FS/Source/fs_partition.c **** /*
 125:rtos/uC-FS/Source/fs_partition.c **** ***************************************************************************************************
 126:rtos/uC-FS/Source/fs_partition.c **** *                                       LOCAL GLOBAL VARIABLES
 127:rtos/uC-FS/Source/fs_partition.c **** ***************************************************************************************************
 128:rtos/uC-FS/Source/fs_partition.c **** */
 129:rtos/uC-FS/Source/fs_partition.c **** 
 130:rtos/uC-FS/Source/fs_partition.c **** 
 131:rtos/uC-FS/Source/fs_partition.c **** /*
 132:rtos/uC-FS/Source/fs_partition.c **** ***************************************************************************************************
 133:rtos/uC-FS/Source/fs_partition.c **** *                                            LOCAL MACRO'S
 134:rtos/uC-FS/Source/fs_partition.c **** ***************************************************************************************************
 135:rtos/uC-FS/Source/fs_partition.c **** */
 136:rtos/uC-FS/Source/fs_partition.c **** 
 137:rtos/uC-FS/Source/fs_partition.c **** 
 138:rtos/uC-FS/Source/fs_partition.c **** /*
 139:rtos/uC-FS/Source/fs_partition.c **** ***************************************************************************************************
 140:rtos/uC-FS/Source/fs_partition.c **** *                                      LOCAL FUNCTION PROTOTYPES
 141:rtos/uC-FS/Source/fs_partition.c **** ***************************************************************************************************
 142:rtos/uC-FS/Source/fs_partition.c **** */
 143:rtos/uC-FS/Source/fs_partition.c **** 
 144:rtos/uC-FS/Source/fs_partition.c **** #if (FS_CFG_RD_ONLY_EN == DEF_DISABLED)
ARM GAS  /tmp/ccz88FW6.s 			page 4


 145:rtos/uC-FS/Source/fs_partition.c **** static  void              FSPartition_CalcCHS    (CPU_INT08U          *p_buf,
 146:rtos/uC-FS/Source/fs_partition.c ****                                                   FS_SEC_NBR           lba);
 147:rtos/uC-FS/Source/fs_partition.c **** #endif
 148:rtos/uC-FS/Source/fs_partition.c **** 
 149:rtos/uC-FS/Source/fs_partition.c **** #if (FS_CFG_PARTITION_EN == DEF_ENABLED)
 150:rtos/uC-FS/Source/fs_partition.c **** #if (FS_TRACE_LEVEL >= TRACE_LEVEL_INFO)
 151:rtos/uC-FS/Source/fs_partition.c **** static  const  CPU_CHAR  *FSPartition_GetTypeName(CPU_INT08U           type);
 152:rtos/uC-FS/Source/fs_partition.c **** #endif
 153:rtos/uC-FS/Source/fs_partition.c **** 
 154:rtos/uC-FS/Source/fs_partition.c **** static  void              FSPartition_Open       (FS_DEV              *p_dev,
 155:rtos/uC-FS/Source/fs_partition.c ****                                                   FS_PARTITION        *p_partition,
 156:rtos/uC-FS/Source/fs_partition.c ****                                                   FS_ERR              *p_err);
 157:rtos/uC-FS/Source/fs_partition.c **** 
 158:rtos/uC-FS/Source/fs_partition.c **** static  void              FSPartition_Rd         (FS_PARTITION        *p_partition,
 159:rtos/uC-FS/Source/fs_partition.c ****                                                   FS_PARTITION_ENTRY  *p_partition_entry,
 160:rtos/uC-FS/Source/fs_partition.c ****                                                   FS_ERR              *p_err);
 161:rtos/uC-FS/Source/fs_partition.c **** 
 162:rtos/uC-FS/Source/fs_partition.c **** static  void              FSPartition_RdEntry    (FS_DEV              *p_dev,
 163:rtos/uC-FS/Source/fs_partition.c ****                                                   FS_PARTITION_ENTRY  *p_partition_entry,
 164:rtos/uC-FS/Source/fs_partition.c ****                                                   FS_SEC_NBR           mbr_sec,
 165:rtos/uC-FS/Source/fs_partition.c ****                                                   FS_PARTITION_NBR     mbr_pos,
 166:rtos/uC-FS/Source/fs_partition.c ****                                                   FS_ERR              *p_err);
 167:rtos/uC-FS/Source/fs_partition.c **** 
 168:rtos/uC-FS/Source/fs_partition.c **** #if (FS_CFG_RD_ONLY_EN == DEF_DISABLED)
 169:rtos/uC-FS/Source/fs_partition.c **** static  void              FSPartition_Wr         (FS_PARTITION        *p_partition,
 170:rtos/uC-FS/Source/fs_partition.c ****                                                   FS_PARTITION_ENTRY  *p_partition_entry,
 171:rtos/uC-FS/Source/fs_partition.c ****                                                   FS_ERR              *p_err);
 172:rtos/uC-FS/Source/fs_partition.c **** 
 173:rtos/uC-FS/Source/fs_partition.c **** static  void              FSPartition_WrEntry    (FS_DEV              *p_dev,
 174:rtos/uC-FS/Source/fs_partition.c ****                                                   FS_PARTITION_ENTRY  *p_partition_entry,
 175:rtos/uC-FS/Source/fs_partition.c ****                                                   FS_SEC_NBR           mbr_sec,
 176:rtos/uC-FS/Source/fs_partition.c ****                                                   FS_PARTITION_NBR     mbr_pos,
 177:rtos/uC-FS/Source/fs_partition.c ****                                                   FS_ERR              *p_err);
 178:rtos/uC-FS/Source/fs_partition.c **** #endif
 179:rtos/uC-FS/Source/fs_partition.c **** #endif
 180:rtos/uC-FS/Source/fs_partition.c **** 
 181:rtos/uC-FS/Source/fs_partition.c **** 
 182:rtos/uC-FS/Source/fs_partition.c **** /*
 183:rtos/uC-FS/Source/fs_partition.c **** ***************************************************************************************************
 184:rtos/uC-FS/Source/fs_partition.c **** *                                     LOCAL CONFIGURATION ERRORS
 185:rtos/uC-FS/Source/fs_partition.c **** ***************************************************************************************************
 186:rtos/uC-FS/Source/fs_partition.c **** */
 187:rtos/uC-FS/Source/fs_partition.c **** 
 188:rtos/uC-FS/Source/fs_partition.c **** 
 189:rtos/uC-FS/Source/fs_partition.c **** /*
 190:rtos/uC-FS/Source/fs_partition.c **** ***************************************************************************************************
 191:rtos/uC-FS/Source/fs_partition.c **** ***************************************************************************************************
 192:rtos/uC-FS/Source/fs_partition.c **** *                                         INTERNAL FUNCTIONS
 193:rtos/uC-FS/Source/fs_partition.c **** ***************************************************************************************************
 194:rtos/uC-FS/Source/fs_partition.c **** ***************************************************************************************************
 195:rtos/uC-FS/Source/fs_partition.c **** */
 196:rtos/uC-FS/Source/fs_partition.c **** 
 197:rtos/uC-FS/Source/fs_partition.c **** /*
 198:rtos/uC-FS/Source/fs_partition.c **** ***************************************************************************************************
 199:rtos/uC-FS/Source/fs_partition.c **** *                                   FSPartition_GetNbrPartitions()
 200:rtos/uC-FS/Source/fs_partition.c **** *
 201:rtos/uC-FS/Source/fs_partition.c **** * Description : Get number of partitions on a device.
ARM GAS  /tmp/ccz88FW6.s 			page 5


 202:rtos/uC-FS/Source/fs_partition.c **** *
 203:rtos/uC-FS/Source/fs_partition.c **** * Argument(s) : p_dev       Pointer to device.
 204:rtos/uC-FS/Source/fs_partition.c **** *               ----------  Argument validated by caller.
 205:rtos/uC-FS/Source/fs_partition.c **** *
 206:rtos/uC-FS/Source/fs_partition.c **** *               p_err       Pointer to variable that will receive the return error code from this f
 207:rtos/uC-FS/Source/fs_partition.c **** *               ----------  Argument validated by caller.
 208:rtos/uC-FS/Source/fs_partition.c **** *
 209:rtos/uC-FS/Source/fs_partition.c **** *                               FS_ERR_NONE    Number of partitions obtained.
 210:rtos/uC-FS/Source/fs_partition.c **** *                               FS_ERR_DEV     Device access error.
 211:rtos/uC-FS/Source/fs_partition.c **** *
 212:rtos/uC-FS/Source/fs_partition.c **** *
 213:rtos/uC-FS/Source/fs_partition.c **** * Return(s)   : Number of partitions on device.
 214:rtos/uC-FS/Source/fs_partition.c **** *
 215:rtos/uC-FS/Source/fs_partition.c **** * Note(s)     : (1) The function caller MUST have acquired a reference to the device & hold the dev
 216:rtos/uC-FS/Source/fs_partition.c **** ***************************************************************************************************
 217:rtos/uC-FS/Source/fs_partition.c **** */
 218:rtos/uC-FS/Source/fs_partition.c **** 
 219:rtos/uC-FS/Source/fs_partition.c **** #if (FS_CFG_PARTITION_EN == DEF_ENABLED)
 220:rtos/uC-FS/Source/fs_partition.c **** FS_PARTITION_NBR  FSPartition_GetNbrPartitions (FS_DEV  *p_dev,
 221:rtos/uC-FS/Source/fs_partition.c ****                                                 FS_ERR  *p_err)
 222:rtos/uC-FS/Source/fs_partition.c **** {
 223:rtos/uC-FS/Source/fs_partition.c ****     FS_PARTITION        partition;
 224:rtos/uC-FS/Source/fs_partition.c ****     FS_PARTITION_ENTRY  partition_entry;
 225:rtos/uC-FS/Source/fs_partition.c ****     FS_PARTITION_NBR    partition_cnt;
 226:rtos/uC-FS/Source/fs_partition.c ****     CPU_INT08U          partition_type;
 227:rtos/uC-FS/Source/fs_partition.c ****     FS_ERR              partition_err;
 228:rtos/uC-FS/Source/fs_partition.c **** 
 229:rtos/uC-FS/Source/fs_partition.c **** 
 230:rtos/uC-FS/Source/fs_partition.c ****                                                                 /* ------------------ OPEN PARTITIO
 231:rtos/uC-FS/Source/fs_partition.c ****     FSPartition_Open( p_dev,
 232:rtos/uC-FS/Source/fs_partition.c ****                      &partition,
 233:rtos/uC-FS/Source/fs_partition.c ****                      &partition_err);
 234:rtos/uC-FS/Source/fs_partition.c **** 
 235:rtos/uC-FS/Source/fs_partition.c ****     if (partition_err != FS_ERR_NONE) {
 236:rtos/uC-FS/Source/fs_partition.c ****        *p_err = partition_err;
 237:rtos/uC-FS/Source/fs_partition.c ****         return (0u);
 238:rtos/uC-FS/Source/fs_partition.c ****     }
 239:rtos/uC-FS/Source/fs_partition.c **** 
 240:rtos/uC-FS/Source/fs_partition.c **** 
 241:rtos/uC-FS/Source/fs_partition.c **** 
 242:rtos/uC-FS/Source/fs_partition.c ****                                                                 /* ------------ ITERATE THROUGH PAR
 243:rtos/uC-FS/Source/fs_partition.c ****     FSPartition_Rd(&partition,                                  /* Rd first partition.             
 244:rtos/uC-FS/Source/fs_partition.c ****                    &partition_entry,
 245:rtos/uC-FS/Source/fs_partition.c ****                    &partition_err);
 246:rtos/uC-FS/Source/fs_partition.c **** 
 247:rtos/uC-FS/Source/fs_partition.c ****     partition_cnt = 0u;
 248:rtos/uC-FS/Source/fs_partition.c **** 
 249:rtos/uC-FS/Source/fs_partition.c ****     while (partition_err == FS_ERR_NONE) {                      /* While another partition exists .
 250:rtos/uC-FS/Source/fs_partition.c ****         partition_type = partition_entry.Type;
 251:rtos/uC-FS/Source/fs_partition.c **** 
 252:rtos/uC-FS/Source/fs_partition.c ****         FS_TRACE_INFO(("FSPartition_GetNbrPartitions(): Partition found: %08X + %08X, TYPE = %02X (
 253:rtos/uC-FS/Source/fs_partition.c **** 
 254:rtos/uC-FS/Source/fs_partition.c ****         if ((partition_type != FS_PARTITION_TYPE_CHS_MICROSOFT_EXT) &&
 255:rtos/uC-FS/Source/fs_partition.c ****             (partition_type != FS_PARTITION_TYPE_LBA_MICROSOFT_EXT) &&
 256:rtos/uC-FS/Source/fs_partition.c ****             (partition_type != FS_PARTITION_TYPE_LINUX_EXT)) {
 257:rtos/uC-FS/Source/fs_partition.c ****             partition_cnt++;
 258:rtos/uC-FS/Source/fs_partition.c ****         }
ARM GAS  /tmp/ccz88FW6.s 			page 6


 259:rtos/uC-FS/Source/fs_partition.c **** 
 260:rtos/uC-FS/Source/fs_partition.c ****         FSPartition_Rd(&partition,                              /* ... rd next partition.          
 261:rtos/uC-FS/Source/fs_partition.c ****                        &partition_entry,
 262:rtos/uC-FS/Source/fs_partition.c ****                        &partition_err);
 263:rtos/uC-FS/Source/fs_partition.c ****     }
 264:rtos/uC-FS/Source/fs_partition.c **** 
 265:rtos/uC-FS/Source/fs_partition.c **** 
 266:rtos/uC-FS/Source/fs_partition.c **** 
 267:rtos/uC-FS/Source/fs_partition.c ****                                                                 /* ------------------------ RTN ---
 268:rtos/uC-FS/Source/fs_partition.c ****     if ((partition_err == FS_ERR_PARTITION_INVALID) ||
 269:rtos/uC-FS/Source/fs_partition.c ****         (partition_err == FS_ERR_PARTITION_INVALID_SIG) ||
 270:rtos/uC-FS/Source/fs_partition.c ****         (partition_err == FS_ERR_PARTITION_ZERO)) {
 271:rtos/uC-FS/Source/fs_partition.c ****          partition_err =  FS_ERR_NONE;
 272:rtos/uC-FS/Source/fs_partition.c ****     }
 273:rtos/uC-FS/Source/fs_partition.c **** 
 274:rtos/uC-FS/Source/fs_partition.c ****    *p_err = partition_err;
 275:rtos/uC-FS/Source/fs_partition.c **** 
 276:rtos/uC-FS/Source/fs_partition.c ****     return (partition_cnt);
 277:rtos/uC-FS/Source/fs_partition.c **** }
 278:rtos/uC-FS/Source/fs_partition.c **** #endif
 279:rtos/uC-FS/Source/fs_partition.c **** 
 280:rtos/uC-FS/Source/fs_partition.c **** 
 281:rtos/uC-FS/Source/fs_partition.c **** /*
 282:rtos/uC-FS/Source/fs_partition.c **** ***************************************************************************************************
 283:rtos/uC-FS/Source/fs_partition.c **** *                                          FSPartition_Add()
 284:rtos/uC-FS/Source/fs_partition.c **** *
 285:rtos/uC-FS/Source/fs_partition.c **** * Description : Add partition to the device.
 286:rtos/uC-FS/Source/fs_partition.c **** *
 287:rtos/uC-FS/Source/fs_partition.c **** * Argument(s) : p_dev           Pointer to device.
 288:rtos/uC-FS/Source/fs_partition.c **** *               ----------      Argument validated by caller.
 289:rtos/uC-FS/Source/fs_partition.c **** *
 290:rtos/uC-FS/Source/fs_partition.c **** *               partition_size  Size, in sectors, of the partition to add.
 291:rtos/uC-FS/Source/fs_partition.c **** *               ----------      Argument validated by caller.
 292:rtos/uC-FS/Source/fs_partition.c **** *
 293:rtos/uC-FS/Source/fs_partition.c **** *               p_err           Pointer to variable that will receive the return error code from th
 294:rtos/uC-FS/Source/fs_partition.c **** *               ----------      Argument validated by caller.
 295:rtos/uC-FS/Source/fs_partition.c **** *
 296:rtos/uC-FS/Source/fs_partition.c **** *                                   FS_ERR_NONE                      Partition added.
 297:rtos/uC-FS/Source/fs_partition.c **** *                                   FS_ERR_BUF_NONE_AVAIL            No buffer available.
 298:rtos/uC-FS/Source/fs_partition.c **** *                                   FS_ERR_PARTITION_INVALID_SIZE    Partition size invalid.
 299:rtos/uC-FS/Source/fs_partition.c **** *                                   FS_ERR_PARTITION_MAX             Maximum number of partitions c
 300:rtos/uC-FS/Source/fs_partition.c **** *                                   FS_ERR_PARTITION_NOT_FINAL       Current partition not final pa
 301:rtos/uC-FS/Source/fs_partition.c **** *                                   FS_ERR_PARTITION_NOT_FOUND       Partition entry not read.
 302:rtos/uC-FS/Source/fs_partition.c **** *                                   FS_ERR_DEV                       Device access error.
 303:rtos/uC-FS/Source/fs_partition.c **** *
 304:rtos/uC-FS/Source/fs_partition.c **** * Return(s)   : The index of the created partition.  The first partition on the device has an index
 305:rtos/uC-FS/Source/fs_partition.c **** *               If an error occurs, the function returns FS_INVALID_PARTITION_NBR.
 306:rtos/uC-FS/Source/fs_partition.c **** *
 307:rtos/uC-FS/Source/fs_partition.c **** * Note(s)     : (1) The function caller MUST have acquired a reference to the device & hold the dev
 308:rtos/uC-FS/Source/fs_partition.c **** *
 309:rtos/uC-FS/Source/fs_partition.c **** *               (2) The final partition on the device is split into two parts, the second of which 
 310:rtos/uC-FS/Source/fs_partition.c **** *                   contain 'partition_size' sectors.  If the specified partition size is larger th
 311:rtos/uC-FS/Source/fs_partition.c **** *                   final partition, then an error will be returned.
 312:rtos/uC-FS/Source/fs_partition.c **** *
 313:rtos/uC-FS/Source/fs_partition.c **** *               (3) If there is no valid partition on the device, then the MBR is initialized & an
 314:rtos/uC-FS/Source/fs_partition.c **** *                   initial partition created.
 315:rtos/uC-FS/Source/fs_partition.c **** *
ARM GAS  /tmp/ccz88FW6.s 			page 7


 316:rtos/uC-FS/Source/fs_partition.c **** *               (4) If the final partition on the volume is an active partition (e.g., it contains 
 317:rtos/uC-FS/Source/fs_partition.c **** *                   data or a file system), then this MAY cause future file system accesses to fail
 318:rtos/uC-FS/Source/fs_partition.c **** *                   data to be lost or overwritten.
 319:rtos/uC-FS/Source/fs_partition.c **** ***************************************************************************************************
 320:rtos/uC-FS/Source/fs_partition.c **** */
 321:rtos/uC-FS/Source/fs_partition.c **** 
 322:rtos/uC-FS/Source/fs_partition.c **** #if (FS_CFG_PARTITION_EN == DEF_ENABLED)
 323:rtos/uC-FS/Source/fs_partition.c **** #if (FS_CFG_RD_ONLY_EN   == DEF_DISABLED)
 324:rtos/uC-FS/Source/fs_partition.c **** FS_PARTITION_NBR   FSPartition_Add (FS_DEV      *p_dev,
 325:rtos/uC-FS/Source/fs_partition.c ****                                     FS_SEC_QTY   partition_size,
 326:rtos/uC-FS/Source/fs_partition.c ****                                     FS_ERR      *p_err)
 327:rtos/uC-FS/Source/fs_partition.c **** {
 328:rtos/uC-FS/Source/fs_partition.c ****     FS_PARTITION        partition;
 329:rtos/uC-FS/Source/fs_partition.c ****     FS_PARTITION_ENTRY  partition_entry_last;
 330:rtos/uC-FS/Source/fs_partition.c ****     FS_PARTITION_ENTRY  partition_entry;
 331:rtos/uC-FS/Source/fs_partition.c ****     FS_PARTITION_NBR    partition_nbr;
 332:rtos/uC-FS/Source/fs_partition.c ****     FS_PARTITION_NBR    partition_cnt;
 333:rtos/uC-FS/Source/fs_partition.c ****     FS_BUF             *p_buf;
 334:rtos/uC-FS/Source/fs_partition.c ****     CPU_INT08U         *p_temp_08;
 335:rtos/uC-FS/Source/fs_partition.c **** 
 336:rtos/uC-FS/Source/fs_partition.c **** 
 337:rtos/uC-FS/Source/fs_partition.c **** 
 338:rtos/uC-FS/Source/fs_partition.c **** #if (FS_CFG_ERR_ARG_CHK_DBG_EN == DEF_ENABLED)                  /* ------------------- VALIDATE ARG
 339:rtos/uC-FS/Source/fs_partition.c ****     if (partition_size < 2u) {
 340:rtos/uC-FS/Source/fs_partition.c ****        *p_err = FS_ERR_PARTITION_INVALID_SIZE;
 341:rtos/uC-FS/Source/fs_partition.c ****         return (FS_INVALID_PARTITION_NBR);
 342:rtos/uC-FS/Source/fs_partition.c ****     }
 343:rtos/uC-FS/Source/fs_partition.c **** #endif
 344:rtos/uC-FS/Source/fs_partition.c **** 
 345:rtos/uC-FS/Source/fs_partition.c ****                                                                 /* ------------------ OPEN PARTITIO
 346:rtos/uC-FS/Source/fs_partition.c ****     FSPartition_Open( p_dev,
 347:rtos/uC-FS/Source/fs_partition.c ****                      &partition,
 348:rtos/uC-FS/Source/fs_partition.c ****                       p_err);
 349:rtos/uC-FS/Source/fs_partition.c **** 
 350:rtos/uC-FS/Source/fs_partition.c ****     if (*p_err != FS_ERR_NONE) {
 351:rtos/uC-FS/Source/fs_partition.c ****         return (FS_INVALID_PARTITION_NBR);
 352:rtos/uC-FS/Source/fs_partition.c ****     }
 353:rtos/uC-FS/Source/fs_partition.c **** 
 354:rtos/uC-FS/Source/fs_partition.c **** 
 355:rtos/uC-FS/Source/fs_partition.c **** 
 356:rtos/uC-FS/Source/fs_partition.c ****                                                                 /* ------------ ITERATE THROUGH PAR
 357:rtos/uC-FS/Source/fs_partition.c ****     FSPartition_Rd(&partition,                                  /* Rd first partition.             
 358:rtos/uC-FS/Source/fs_partition.c ****                    &partition_entry,
 359:rtos/uC-FS/Source/fs_partition.c ****                     p_err);
 360:rtos/uC-FS/Source/fs_partition.c **** 
 361:rtos/uC-FS/Source/fs_partition.c ****     switch (*p_err) {
 362:rtos/uC-FS/Source/fs_partition.c ****         case FS_ERR_PARTITION_INVALID:                          /* If no partition ...             
 363:rtos/uC-FS/Source/fs_partition.c ****         case FS_ERR_PARTITION_INVALID_SIG:
 364:rtos/uC-FS/Source/fs_partition.c ****         case FS_ERR_PARTITION_ZERO:
 365:rtos/uC-FS/Source/fs_partition.c ****              FSPartition_Init(p_dev,                            /* ... init partition struct.      
 366:rtos/uC-FS/Source/fs_partition.c ****                               partition_size,
 367:rtos/uC-FS/Source/fs_partition.c ****                               p_err);
 368:rtos/uC-FS/Source/fs_partition.c **** 
 369:rtos/uC-FS/Source/fs_partition.c ****              partition_nbr = (*p_err == FS_ERR_NONE) ? 0u : FS_INVALID_PARTITION_NBR;
 370:rtos/uC-FS/Source/fs_partition.c ****              return (partition_nbr);
 371:rtos/uC-FS/Source/fs_partition.c **** 
 372:rtos/uC-FS/Source/fs_partition.c **** 
ARM GAS  /tmp/ccz88FW6.s 			page 8


 373:rtos/uC-FS/Source/fs_partition.c ****         case FS_ERR_NONE:
 374:rtos/uC-FS/Source/fs_partition.c ****              break;
 375:rtos/uC-FS/Source/fs_partition.c **** 
 376:rtos/uC-FS/Source/fs_partition.c **** 
 377:rtos/uC-FS/Source/fs_partition.c ****         case FS_ERR_BUF_NONE_AVAIL:
 378:rtos/uC-FS/Source/fs_partition.c ****         case FS_ERR_DEV:
 379:rtos/uC-FS/Source/fs_partition.c ****         default:
 380:rtos/uC-FS/Source/fs_partition.c ****              return (FS_INVALID_PARTITION_NBR);
 381:rtos/uC-FS/Source/fs_partition.c **** 
 382:rtos/uC-FS/Source/fs_partition.c ****     }
 383:rtos/uC-FS/Source/fs_partition.c **** 
 384:rtos/uC-FS/Source/fs_partition.c ****     partition_cnt = 0u;
 385:rtos/uC-FS/Source/fs_partition.c **** 
 386:rtos/uC-FS/Source/fs_partition.c ****     while (*p_err == FS_ERR_NONE) {                             /* While another partition exists .
 387:rtos/uC-FS/Source/fs_partition.c ****         partition_entry_last.Start = partition_entry.Start;
 388:rtos/uC-FS/Source/fs_partition.c ****         partition_entry_last.Size  = partition_entry.Size;
 389:rtos/uC-FS/Source/fs_partition.c ****         partition_entry_last.Type  = partition_entry.Type;
 390:rtos/uC-FS/Source/fs_partition.c **** 
 391:rtos/uC-FS/Source/fs_partition.c ****         if ((partition_entry.Type != FS_PARTITION_TYPE_CHS_MICROSOFT_EXT) &&
 392:rtos/uC-FS/Source/fs_partition.c ****             (partition_entry.Type != FS_PARTITION_TYPE_LBA_MICROSOFT_EXT) &&
 393:rtos/uC-FS/Source/fs_partition.c ****             (partition_entry.Type != FS_PARTITION_TYPE_LINUX_EXT)) {
 394:rtos/uC-FS/Source/fs_partition.c ****             partition_cnt++;
 395:rtos/uC-FS/Source/fs_partition.c ****         }
 396:rtos/uC-FS/Source/fs_partition.c **** 
 397:rtos/uC-FS/Source/fs_partition.c ****         FSPartition_Rd(&partition,                              /* ... rd next partition.          
 398:rtos/uC-FS/Source/fs_partition.c ****                        &partition_entry,
 399:rtos/uC-FS/Source/fs_partition.c ****                         p_err);
 400:rtos/uC-FS/Source/fs_partition.c ****     }
 401:rtos/uC-FS/Source/fs_partition.c **** 
 402:rtos/uC-FS/Source/fs_partition.c **** 
 403:rtos/uC-FS/Source/fs_partition.c **** 
 404:rtos/uC-FS/Source/fs_partition.c ****                                                                 /* ----------------- CREATE PARTITI
 405:rtos/uC-FS/Source/fs_partition.c ****     switch (*p_err) {
 406:rtos/uC-FS/Source/fs_partition.c ****         case FS_ERR_BUF_NONE_AVAIL:
 407:rtos/uC-FS/Source/fs_partition.c ****         case FS_ERR_DEV:
 408:rtos/uC-FS/Source/fs_partition.c ****              return (FS_INVALID_PARTITION_NBR);
 409:rtos/uC-FS/Source/fs_partition.c **** 
 410:rtos/uC-FS/Source/fs_partition.c ****         default:
 411:rtos/uC-FS/Source/fs_partition.c ****              break;
 412:rtos/uC-FS/Source/fs_partition.c ****     }
 413:rtos/uC-FS/Source/fs_partition.c **** 
 414:rtos/uC-FS/Source/fs_partition.c ****     partition_entry.Start = partition_entry_last.Start + partition_entry_last.Size;
 415:rtos/uC-FS/Source/fs_partition.c ****     partition_entry.Size  = partition_size;
 416:rtos/uC-FS/Source/fs_partition.c ****     partition_entry.Type  = 0u;
 417:rtos/uC-FS/Source/fs_partition.c **** 
 418:rtos/uC-FS/Source/fs_partition.c ****                                                                  /* ---------------------- GET BUF 
 419:rtos/uC-FS/Source/fs_partition.c ****     p_buf = FSBuf_Get((FS_VOL *)0);
 420:rtos/uC-FS/Source/fs_partition.c ****     if (p_buf == (FS_BUF *)0) {
 421:rtos/uC-FS/Source/fs_partition.c ****        *p_err = FS_ERR_BUF_NONE_AVAIL;
 422:rtos/uC-FS/Source/fs_partition.c ****         return (FS_INVALID_PARTITION_NBR);
 423:rtos/uC-FS/Source/fs_partition.c ****     }
 424:rtos/uC-FS/Source/fs_partition.c **** 
 425:rtos/uC-FS/Source/fs_partition.c **** 
 426:rtos/uC-FS/Source/fs_partition.c **** 
 427:rtos/uC-FS/Source/fs_partition.c ****                                                                 /* ------------------- FMT & WR MBR
 428:rtos/uC-FS/Source/fs_partition.c ****                                                                 /* Clear the Partition start sector
 429:rtos/uC-FS/Source/fs_partition.c ****                                                                 /* to write the correct FAT info.  
ARM GAS  /tmp/ccz88FW6.s 			page 9


 430:rtos/uC-FS/Source/fs_partition.c ****     p_temp_08 = (CPU_INT08U *)p_buf->DataPtr;
 431:rtos/uC-FS/Source/fs_partition.c ****     Mem_Clr((void *)p_temp_08, 512u);
 432:rtos/uC-FS/Source/fs_partition.c **** 
 433:rtos/uC-FS/Source/fs_partition.c ****     FSDev_WrLocked(        p_dev,                               /* Clr 1st sec of partition.       
 434:rtos/uC-FS/Source/fs_partition.c ****                    (void *)p_temp_08,
 435:rtos/uC-FS/Source/fs_partition.c ****                            partition_entry.Start,
 436:rtos/uC-FS/Source/fs_partition.c ****                            1u,
 437:rtos/uC-FS/Source/fs_partition.c ****                            p_err);
 438:rtos/uC-FS/Source/fs_partition.c **** 
 439:rtos/uC-FS/Source/fs_partition.c ****     if (*p_err != FS_ERR_NONE) {
 440:rtos/uC-FS/Source/fs_partition.c ****         *p_err  = FS_ERR_DEV;
 441:rtos/uC-FS/Source/fs_partition.c ****          FSBuf_Free(p_buf);
 442:rtos/uC-FS/Source/fs_partition.c ****          return (FS_INVALID_PARTITION_NBR);
 443:rtos/uC-FS/Source/fs_partition.c ****     }
 444:rtos/uC-FS/Source/fs_partition.c **** 
 445:rtos/uC-FS/Source/fs_partition.c **** 
 446:rtos/uC-FS/Source/fs_partition.c ****     FSPartition_Wr(&partition,
 447:rtos/uC-FS/Source/fs_partition.c ****                    &partition_entry,
 448:rtos/uC-FS/Source/fs_partition.c ****                     p_err);
 449:rtos/uC-FS/Source/fs_partition.c **** 
 450:rtos/uC-FS/Source/fs_partition.c ****     partition_nbr = (*p_err == FS_ERR_NONE) ? partition_cnt : FS_INVALID_PARTITION_NBR;
 451:rtos/uC-FS/Source/fs_partition.c **** 
 452:rtos/uC-FS/Source/fs_partition.c ****     FSBuf_Free(p_buf);
 453:rtos/uC-FS/Source/fs_partition.c ****     return (partition_nbr);
 454:rtos/uC-FS/Source/fs_partition.c **** }
 455:rtos/uC-FS/Source/fs_partition.c **** #endif
 456:rtos/uC-FS/Source/fs_partition.c **** #endif
 457:rtos/uC-FS/Source/fs_partition.c **** 
 458:rtos/uC-FS/Source/fs_partition.c **** 
 459:rtos/uC-FS/Source/fs_partition.c **** /*
 460:rtos/uC-FS/Source/fs_partition.c **** ***************************************************************************************************
 461:rtos/uC-FS/Source/fs_partition.c **** *                                         FSPartition_Find()
 462:rtos/uC-FS/Source/fs_partition.c **** *
 463:rtos/uC-FS/Source/fs_partition.c **** * Description : Find partition on a device.
 464:rtos/uC-FS/Source/fs_partition.c **** *
 465:rtos/uC-FS/Source/fs_partition.c **** * Argument(s) : p_dev               Pointer to device.
 466:rtos/uC-FS/Source/fs_partition.c **** *               ----------          Argument validated by caller.
 467:rtos/uC-FS/Source/fs_partition.c **** *
 468:rtos/uC-FS/Source/fs_partition.c **** *               partition_nbr       Index of the partition to find.
 469:rtos/uC-FS/Source/fs_partition.c **** *
 470:rtos/uC-FS/Source/fs_partition.c **** *               p_partition_entry   Pointer to variable that will receive the partition information
 471:rtos/uC-FS/Source/fs_partition.c **** *               ----------          Argument validated by caller.
 472:rtos/uC-FS/Source/fs_partition.c **** *
 473:rtos/uC-FS/Source/fs_partition.c **** *               p_err               Pointer to variable that will receive the return error code fro
 474:rtos/uC-FS/Source/fs_partition.c **** *               ----------          Argument validated by caller.
 475:rtos/uC-FS/Source/fs_partition.c **** *
 476:rtos/uC-FS/Source/fs_partition.c **** *                                       FS_ERR_NONE                    Partition found.
 477:rtos/uC-FS/Source/fs_partition.c **** *                                       FS_ERR_PARTITION_INVALID_NBR   Invalid partition number.
 478:rtos/uC-FS/Source/fs_partition.c **** *                                       FS_ERR_DEV                     Device access error.
 479:rtos/uC-FS/Source/fs_partition.c **** *
 480:rtos/uC-FS/Source/fs_partition.c **** * Return(s)   : none.
 481:rtos/uC-FS/Source/fs_partition.c **** *
 482:rtos/uC-FS/Source/fs_partition.c **** * Note(s)     : (1) The function caller MUST have acquired a reference to the device & hold the dev
 483:rtos/uC-FS/Source/fs_partition.c **** *
 484:rtos/uC-FS/Source/fs_partition.c **** *               (2) An extended partition entry, essentially a link to a normal partition entry, do
 485:rtos/uC-FS/Source/fs_partition.c **** *                   contribute to the partition count.
 486:rtos/uC-FS/Source/fs_partition.c **** ***************************************************************************************************
ARM GAS  /tmp/ccz88FW6.s 			page 10


 487:rtos/uC-FS/Source/fs_partition.c **** */
 488:rtos/uC-FS/Source/fs_partition.c **** 
 489:rtos/uC-FS/Source/fs_partition.c **** #if (FS_CFG_PARTITION_EN == DEF_ENABLED)
 490:rtos/uC-FS/Source/fs_partition.c **** void  FSPartition_Find (FS_DEV              *p_dev,
 491:rtos/uC-FS/Source/fs_partition.c ****                         FS_PARTITION_NBR     partition_nbr,
 492:rtos/uC-FS/Source/fs_partition.c ****                         FS_PARTITION_ENTRY  *p_partition_entry,
 493:rtos/uC-FS/Source/fs_partition.c ****                         FS_ERR              *p_err)
 494:rtos/uC-FS/Source/fs_partition.c **** {
 495:rtos/uC-FS/Source/fs_partition.c ****     FS_PARTITION        partition;
 496:rtos/uC-FS/Source/fs_partition.c ****     FS_PARTITION_NBR    partition_cnt;
 497:rtos/uC-FS/Source/fs_partition.c ****     FS_PARTITION_ENTRY  partition_entry;
 498:rtos/uC-FS/Source/fs_partition.c ****     FS_SEC_QTY          partition_size;
 499:rtos/uC-FS/Source/fs_partition.c ****     FS_SEC_NBR          partition_start;
 500:rtos/uC-FS/Source/fs_partition.c ****     CPU_INT08U          partition_type;
 501:rtos/uC-FS/Source/fs_partition.c ****     FS_ERR              partition_err;
 502:rtos/uC-FS/Source/fs_partition.c **** 
 503:rtos/uC-FS/Source/fs_partition.c **** 
 504:rtos/uC-FS/Source/fs_partition.c ****                                                                 /* ------------------- DFLT RTN VAL
 505:rtos/uC-FS/Source/fs_partition.c ****     p_partition_entry->Start = 0u;
 506:rtos/uC-FS/Source/fs_partition.c ****     p_partition_entry->Size  = 0u;
 507:rtos/uC-FS/Source/fs_partition.c ****     p_partition_entry->Type  = 0u;
 508:rtos/uC-FS/Source/fs_partition.c **** 
 509:rtos/uC-FS/Source/fs_partition.c **** 
 510:rtos/uC-FS/Source/fs_partition.c **** 
 511:rtos/uC-FS/Source/fs_partition.c ****                                                                 /* ------------------ OPEN PARTITIO
 512:rtos/uC-FS/Source/fs_partition.c ****     FSPartition_Open( p_dev,
 513:rtos/uC-FS/Source/fs_partition.c ****                      &partition,
 514:rtos/uC-FS/Source/fs_partition.c ****                      &partition_err);
 515:rtos/uC-FS/Source/fs_partition.c **** 
 516:rtos/uC-FS/Source/fs_partition.c ****     if (partition_err != FS_ERR_NONE) {
 517:rtos/uC-FS/Source/fs_partition.c ****        *p_err = partition_err;
 518:rtos/uC-FS/Source/fs_partition.c ****         return;
 519:rtos/uC-FS/Source/fs_partition.c ****     }
 520:rtos/uC-FS/Source/fs_partition.c **** 
 521:rtos/uC-FS/Source/fs_partition.c **** 
 522:rtos/uC-FS/Source/fs_partition.c **** 
 523:rtos/uC-FS/Source/fs_partition.c ****                                                                 /* ------------ ITERATE THROUGH PAR
 524:rtos/uC-FS/Source/fs_partition.c ****     FSPartition_Rd(&partition,                                  /* Rd first partition entry.       
 525:rtos/uC-FS/Source/fs_partition.c ****                    &partition_entry,
 526:rtos/uC-FS/Source/fs_partition.c ****                    &partition_err);
 527:rtos/uC-FS/Source/fs_partition.c **** 
 528:rtos/uC-FS/Source/fs_partition.c **** 
 529:rtos/uC-FS/Source/fs_partition.c ****     partition_cnt = 0u;
 530:rtos/uC-FS/Source/fs_partition.c **** 
 531:rtos/uC-FS/Source/fs_partition.c ****     while (partition_err == FS_ERR_NONE) {
 532:rtos/uC-FS/Source/fs_partition.c ****         partition_start = partition_entry.Start;
 533:rtos/uC-FS/Source/fs_partition.c ****         partition_size  = partition_entry.Size;
 534:rtos/uC-FS/Source/fs_partition.c ****         partition_type  = partition_entry.Type;
 535:rtos/uC-FS/Source/fs_partition.c ****                                                                 /* If partition is not extended par
 536:rtos/uC-FS/Source/fs_partition.c ****         if ((partition_type != FS_PARTITION_TYPE_CHS_MICROSOFT_EXT) &&
 537:rtos/uC-FS/Source/fs_partition.c ****             (partition_type != FS_PARTITION_TYPE_LBA_MICROSOFT_EXT) &&
 538:rtos/uC-FS/Source/fs_partition.c ****             (partition_type != FS_PARTITION_TYPE_LINUX_EXT)) {
 539:rtos/uC-FS/Source/fs_partition.c **** 
 540:rtos/uC-FS/Source/fs_partition.c ****             if (partition_cnt == partition_nbr) {
 541:rtos/uC-FS/Source/fs_partition.c ****                 p_partition_entry->Start = partition_start;
 542:rtos/uC-FS/Source/fs_partition.c ****                 p_partition_entry->Size  = partition_size;
 543:rtos/uC-FS/Source/fs_partition.c ****                 p_partition_entry->Type  = partition_type;
ARM GAS  /tmp/ccz88FW6.s 			page 11


 544:rtos/uC-FS/Source/fs_partition.c ****                *p_err = FS_ERR_NONE;
 545:rtos/uC-FS/Source/fs_partition.c ****                 return;
 546:rtos/uC-FS/Source/fs_partition.c ****             }
 547:rtos/uC-FS/Source/fs_partition.c ****             partition_cnt++;                                    /* ... inc partition cnt (see Note 
 548:rtos/uC-FS/Source/fs_partition.c ****         }
 549:rtos/uC-FS/Source/fs_partition.c **** 
 550:rtos/uC-FS/Source/fs_partition.c ****         FSPartition_Rd(&partition,                              /* If not srch partition, rd next p
 551:rtos/uC-FS/Source/fs_partition.c ****                        &partition_entry,
 552:rtos/uC-FS/Source/fs_partition.c ****                        &partition_err);
 553:rtos/uC-FS/Source/fs_partition.c ****     }
 554:rtos/uC-FS/Source/fs_partition.c **** 
 555:rtos/uC-FS/Source/fs_partition.c ****    *p_err = FS_ERR_PARTITION_INVALID_NBR;
 556:rtos/uC-FS/Source/fs_partition.c **** }
 557:rtos/uC-FS/Source/fs_partition.c **** #endif
 558:rtos/uC-FS/Source/fs_partition.c **** 
 559:rtos/uC-FS/Source/fs_partition.c **** 
 560:rtos/uC-FS/Source/fs_partition.c **** /*
 561:rtos/uC-FS/Source/fs_partition.c **** ***************************************************************************************************
 562:rtos/uC-FS/Source/fs_partition.c **** *                                      FSPartition_FindSimple()
 563:rtos/uC-FS/Source/fs_partition.c **** *
 564:rtos/uC-FS/Source/fs_partition.c **** * Description : Find first partition on a device.
 565:rtos/uC-FS/Source/fs_partition.c **** *
 566:rtos/uC-FS/Source/fs_partition.c **** * Argument(s) : p_dev               Pointer to device.
 567:rtos/uC-FS/Source/fs_partition.c **** *               ----------          Argument validated by caller.
 568:rtos/uC-FS/Source/fs_partition.c **** *
 569:rtos/uC-FS/Source/fs_partition.c **** *               p_partition_entry   Pointer to variable that will receive the partition information
 570:rtos/uC-FS/Source/fs_partition.c **** *               ----------          Argument validated by caller.
 571:rtos/uC-FS/Source/fs_partition.c **** *
 572:rtos/uC-FS/Source/fs_partition.c **** *               p_err               Pointer to variable that will receive the return error code fro
 573:rtos/uC-FS/Source/fs_partition.c **** *               ----------          Argument validated by caller.
 574:rtos/uC-FS/Source/fs_partition.c **** *
 575:rtos/uC-FS/Source/fs_partition.c **** *                                       FS_ERR_NONE                     Partition found.
 576:rtos/uC-FS/Source/fs_partition.c **** *                                       FS_ERR_PARTITION_INVALID        Invalid partition parameter
 577:rtos/uC-FS/Source/fs_partition.c **** *                                       FS_ERR_PARTITION_INVALID_SIG    Invalid MBR signature.
 578:rtos/uC-FS/Source/fs_partition.c **** *                                       FS_ERR_BUF_NONE_AVAIL           No buffer available.
 579:rtos/uC-FS/Source/fs_partition.c **** *                                       FS_ERR_DEV                      Device access error.
 580:rtos/uC-FS/Source/fs_partition.c **** *
 581:rtos/uC-FS/Source/fs_partition.c **** * Note(s)     : (1) The function caller MUST have acquired a reference to the device & hold the dev
 582:rtos/uC-FS/Source/fs_partition.c **** ***************************************************************************************************
 583:rtos/uC-FS/Source/fs_partition.c **** */
 584:rtos/uC-FS/Source/fs_partition.c **** 
 585:rtos/uC-FS/Source/fs_partition.c **** #if (FS_CFG_PARTITION_EN == DEF_DISABLED)
 586:rtos/uC-FS/Source/fs_partition.c **** void  FSPartition_FindSimple (FS_DEV              *p_dev,
 587:rtos/uC-FS/Source/fs_partition.c ****                               FS_PARTITION_ENTRY  *p_partition_entry,
 588:rtos/uC-FS/Source/fs_partition.c ****                               FS_ERR              *p_err)
 589:rtos/uC-FS/Source/fs_partition.c **** {
 590:rtos/uC-FS/Source/fs_partition.c ****     FS_SEC_NBR   partition_end;
 591:rtos/uC-FS/Source/fs_partition.c ****     FS_SEC_QTY   partition_size;
 592:rtos/uC-FS/Source/fs_partition.c ****     FS_SEC_NBR   partition_start;
 593:rtos/uC-FS/Source/fs_partition.c ****     CPU_INT08U   partition_type;
 594:rtos/uC-FS/Source/fs_partition.c ****     CPU_INT16U   sig_val;
 595:rtos/uC-FS/Source/fs_partition.c ****     FS_BUF      *p_buf;
 596:rtos/uC-FS/Source/fs_partition.c ****     CPU_INT08U  *p_temp;
 597:rtos/uC-FS/Source/fs_partition.c **** 
 598:rtos/uC-FS/Source/fs_partition.c **** 
 599:rtos/uC-FS/Source/fs_partition.c ****                                                                 /* ------------------- DFLT RTN VAL
 600:rtos/uC-FS/Source/fs_partition.c ****     p_partition_entry->Start = 0u;
ARM GAS  /tmp/ccz88FW6.s 			page 12


 601:rtos/uC-FS/Source/fs_partition.c ****     p_partition_entry->Size  = 0u;
 602:rtos/uC-FS/Source/fs_partition.c ****     p_partition_entry->Type  = 0u;
 603:rtos/uC-FS/Source/fs_partition.c **** 
 604:rtos/uC-FS/Source/fs_partition.c **** 
 605:rtos/uC-FS/Source/fs_partition.c **** 
 606:rtos/uC-FS/Source/fs_partition.c ****                                                                 /* --------------------- READ MBR -
 607:rtos/uC-FS/Source/fs_partition.c ****     p_buf = FSBuf_Get((FS_VOL *)0);
 608:rtos/uC-FS/Source/fs_partition.c ****     if (p_buf == (FS_BUF *)0) {
 609:rtos/uC-FS/Source/fs_partition.c ****        *p_err = FS_ERR_BUF_NONE_AVAIL;
 610:rtos/uC-FS/Source/fs_partition.c ****         return;
 611:rtos/uC-FS/Source/fs_partition.c ****     }
 612:rtos/uC-FS/Source/fs_partition.c **** 
 613:rtos/uC-FS/Source/fs_partition.c **** 
 614:rtos/uC-FS/Source/fs_partition.c ****     p_temp = (CPU_INT08U *)p_buf->DataPtr;
 615:rtos/uC-FS/Source/fs_partition.c **** 
 616:rtos/uC-FS/Source/fs_partition.c ****     FSDev_RdLocked(        p_dev,                               /* Rd MBR sec.                     
 617:rtos/uC-FS/Source/fs_partition.c ****                    (void *)p_temp,
 618:rtos/uC-FS/Source/fs_partition.c ****                            0u,
 619:rtos/uC-FS/Source/fs_partition.c ****                            1u,
 620:rtos/uC-FS/Source/fs_partition.c ****                            p_err);
 621:rtos/uC-FS/Source/fs_partition.c **** 
 622:rtos/uC-FS/Source/fs_partition.c ****     if (*p_err != FS_ERR_NONE) {
 623:rtos/uC-FS/Source/fs_partition.c ****         *p_err  = FS_ERR_DEV;
 624:rtos/uC-FS/Source/fs_partition.c ****          FSBuf_Free(p_buf);
 625:rtos/uC-FS/Source/fs_partition.c ****          return;
 626:rtos/uC-FS/Source/fs_partition.c ****     }
 627:rtos/uC-FS/Source/fs_partition.c **** 
 628:rtos/uC-FS/Source/fs_partition.c ****     sig_val = MEM_VAL_GET_INT16U_LITTLE(p_temp + 510u);         /* Check sec sig.                  
 629:rtos/uC-FS/Source/fs_partition.c ****     if (sig_val != 0xAA55u) {
 630:rtos/uC-FS/Source/fs_partition.c ****         FSBuf_Free(p_buf);
 631:rtos/uC-FS/Source/fs_partition.c ****        *p_err = FS_ERR_PARTITION_INVALID_SIG;
 632:rtos/uC-FS/Source/fs_partition.c ****         return;
 633:rtos/uC-FS/Source/fs_partition.c ****     }
 634:rtos/uC-FS/Source/fs_partition.c **** 
 635:rtos/uC-FS/Source/fs_partition.c **** 
 636:rtos/uC-FS/Source/fs_partition.c **** 
 637:rtos/uC-FS/Source/fs_partition.c ****                                                                 /* ------------------ READ MBR ENTR
 638:rtos/uC-FS/Source/fs_partition.c ****                                                                 /* Rd start sec.                   
 639:rtos/uC-FS/Source/fs_partition.c ****     partition_start = MEM_VAL_GET_INT32U_LITTLE(p_temp + FS_PARTITION_DOS_OFF_START_LBA_1      + (0
 640:rtos/uC-FS/Source/fs_partition.c ****                                                                 /* Rd partition size (see Note #2).
 641:rtos/uC-FS/Source/fs_partition.c ****     partition_size  = MEM_VAL_GET_INT32U_LITTLE(p_temp + FS_PARTITION_DOS_OFF_SIZE_1           + (0
 642:rtos/uC-FS/Source/fs_partition.c ****                                                                 /* Rd partition type.              
 643:rtos/uC-FS/Source/fs_partition.c ****     partition_type  = MEM_VAL_GET_INT08U_LITTLE(p_temp + FS_PARTITION_DOS_OFF_PARTITION_TYPE_1 + (0
 644:rtos/uC-FS/Source/fs_partition.c **** 
 645:rtos/uC-FS/Source/fs_partition.c ****     partition_end   = p_dev->Size - 1u;
 646:rtos/uC-FS/Source/fs_partition.c **** 
 647:rtos/uC-FS/Source/fs_partition.c ****     if ((partition_start                  >  partition_end)         ||
 648:rtos/uC-FS/Source/fs_partition.c ****         (partition_start + partition_size >  partition_end   + 1u)  ||
 649:rtos/uC-FS/Source/fs_partition.c ****         (partition_start + partition_size <= partition_start + 1u)) {
 650:rtos/uC-FS/Source/fs_partition.c ****         FSBuf_Free(p_buf);
 651:rtos/uC-FS/Source/fs_partition.c ****        *p_err = FS_ERR_PARTITION_INVALID;
 652:rtos/uC-FS/Source/fs_partition.c ****         return;
 653:rtos/uC-FS/Source/fs_partition.c ****     }
 654:rtos/uC-FS/Source/fs_partition.c **** 
 655:rtos/uC-FS/Source/fs_partition.c ****     FSBuf_Free(p_buf);
 656:rtos/uC-FS/Source/fs_partition.c **** 
 657:rtos/uC-FS/Source/fs_partition.c ****                                                                 /* ----------------- ASSIGN ENTRY I
ARM GAS  /tmp/ccz88FW6.s 			page 13


 658:rtos/uC-FS/Source/fs_partition.c ****     p_partition_entry->Start = partition_start;
 659:rtos/uC-FS/Source/fs_partition.c ****     p_partition_entry->Size  = partition_size;
 660:rtos/uC-FS/Source/fs_partition.c ****     p_partition_entry->Type  = partition_type;
 661:rtos/uC-FS/Source/fs_partition.c ****    *p_err = FS_ERR_NONE;
 662:rtos/uC-FS/Source/fs_partition.c **** }
 663:rtos/uC-FS/Source/fs_partition.c **** #endif
 664:rtos/uC-FS/Source/fs_partition.c **** 
 665:rtos/uC-FS/Source/fs_partition.c **** 
 666:rtos/uC-FS/Source/fs_partition.c **** /*
 667:rtos/uC-FS/Source/fs_partition.c **** ***************************************************************************************************
 668:rtos/uC-FS/Source/fs_partition.c **** *                                         FSPartition_Init()
 669:rtos/uC-FS/Source/fs_partition.c **** *
 670:rtos/uC-FS/Source/fs_partition.c **** * Description : Initialize the partition structure on the device.
 671:rtos/uC-FS/Source/fs_partition.c **** *
 672:rtos/uC-FS/Source/fs_partition.c **** * Argument(s) : p_dev           Pointer to device.
 673:rtos/uC-FS/Source/fs_partition.c **** *               ----------      Argument validated by caller.
 674:rtos/uC-FS/Source/fs_partition.c **** *
 675:rtos/uC-FS/Source/fs_partition.c **** *               partition_size  Size of partition (in sectors).
 676:rtos/uC-FS/Source/fs_partition.c **** *
 677:rtos/uC-FS/Source/fs_partition.c **** *               p_err           Pointer to variable that will receive the return error code from th
 678:rtos/uC-FS/Source/fs_partition.c **** *               ----------      Argument validated by caller.
 679:rtos/uC-FS/Source/fs_partition.c **** *
 680:rtos/uC-FS/Source/fs_partition.c **** *                                   FS_ERR_BUF_NONE_AVAIL            No buffers available.
 681:rtos/uC-FS/Source/fs_partition.c **** *                                   FS_ERR_DEV                       Device access error.
 682:rtos/uC-FS/Source/fs_partition.c **** *                                   FS_ERR_PARTITION_INVALID_SIZE    Partition size invalid.
 683:rtos/uC-FS/Source/fs_partition.c **** *
 684:rtos/uC-FS/Source/fs_partition.c **** * Return(s)   : none.
 685:rtos/uC-FS/Source/fs_partition.c **** *
 686:rtos/uC-FS/Source/fs_partition.c **** * Note(s)     : (1) The function caller MUST have acquired a reference to the device & hold the dev
 687:rtos/uC-FS/Source/fs_partition.c **** *
 688:rtos/uC-FS/Source/fs_partition.c **** *               (2) The partition begins in the sector immediately after the MBR.
 689:rtos/uC-FS/Source/fs_partition.c **** *
 690:rtos/uC-FS/Source/fs_partition.c **** *               (3) The file system type is not set in the MBR record.  This can only be done once 
 691:rtos/uC-FS/Source/fs_partition.c **** *                   file system type had been determined.
 692:rtos/uC-FS/Source/fs_partition.c **** *
 693:rtos/uC-FS/Source/fs_partition.c **** *                   (a) #### Provide mechanism for setting partition type.
 694:rtos/uC-FS/Source/fs_partition.c **** *
 695:rtos/uC-FS/Source/fs_partition.c **** *               (4) The CHS addresses are set as a backup addressing system, in case the disk is us
 696:rtos/uC-FS/Source/fs_partition.c **** *                   a system unaware of LBA addressing.
 697:rtos/uC-FS/Source/fs_partition.c **** *
 698:rtos/uC-FS/Source/fs_partition.c **** *                   (a) CHS addresses are always calculated assuming a geometry of 255 heads & 63 s
 699:rtos/uC-FS/Source/fs_partition.c **** *                       per track.
 700:rtos/uC-FS/Source/fs_partition.c **** *
 701:rtos/uC-FS/Source/fs_partition.c **** *                   (b) LBA & CHS address are related by :
 702:rtos/uC-FS/Source/fs_partition.c **** *
 703:rtos/uC-FS/Source/fs_partition.c **** *                           LBA = (((CYLINDER * heads_per_cylinder + HEAD) * sectors_per_track) + S
 704:rtos/uC-FS/Source/fs_partition.c **** *
 705:rtos/uC-FS/Source/fs_partition.c **** *                       so
 706:rtos/uC-FS/Source/fs_partition.c **** *
 707:rtos/uC-FS/Source/fs_partition.c **** *                           SECTOR   =   (LBA + 1) % sectors_per_track
 708:rtos/uC-FS/Source/fs_partition.c **** *                           HEAD     =  ((LBA + 1 - SECTOR) / sectors_per_track) % heads_per_cylind
 709:rtos/uC-FS/Source/fs_partition.c **** *                           CYLINDER = (((LBA + 1 - SECTOR) / sectors_per_track) - HEAD) / heads_pe
 710:rtos/uC-FS/Source/fs_partition.c **** *
 711:rtos/uC-FS/Source/fs_partition.c **** *               (5) The first sector of the new partition is cleared, so that any data from a previ
 712:rtos/uC-FS/Source/fs_partition.c **** *                   file system will not be used to incorrectly initialize the volume.
 713:rtos/uC-FS/Source/fs_partition.c **** *
 714:rtos/uC-FS/Source/fs_partition.c **** *               (6) Avoid 'Excessive shift value' or 'Constant expression evaluates to 0' warning.
ARM GAS  /tmp/ccz88FW6.s 			page 14


 715:rtos/uC-FS/Source/fs_partition.c **** ***************************************************************************************************
 716:rtos/uC-FS/Source/fs_partition.c **** */
 717:rtos/uC-FS/Source/fs_partition.c **** 
 718:rtos/uC-FS/Source/fs_partition.c **** #if (FS_CFG_RD_ONLY_EN == DEF_DISABLED)
 719:rtos/uC-FS/Source/fs_partition.c **** void  FSPartition_Init (FS_DEV      *p_dev,
 720:rtos/uC-FS/Source/fs_partition.c ****                         FS_SEC_QTY   partition_size,
 721:rtos/uC-FS/Source/fs_partition.c ****                         FS_ERR      *p_err)
 722:rtos/uC-FS/Source/fs_partition.c **** {
 723:rtos/uC-FS/Source/fs_partition.c ****     FS_BUF      *p_buf;
 724:rtos/uC-FS/Source/fs_partition.c ****     CPU_INT08U  *p_temp_08;
 725:rtos/uC-FS/Source/fs_partition.c ****     CPU_INT32U   start_lba;
 726:rtos/uC-FS/Source/fs_partition.c **** 
 727:rtos/uC-FS/Source/fs_partition.c **** 
 728:rtos/uC-FS/Source/fs_partition.c **** #if (FS_CFG_ERR_ARG_CHK_DBG_EN == DEF_ENABLED)                  /* ------------------- VALIDATE ARG
 729:rtos/uC-FS/Source/fs_partition.c ****     if (partition_size < 2u) {
 730:rtos/uC-FS/Source/fs_partition.c ****        *p_err = FS_ERR_PARTITION_INVALID_SIZE;
 731:rtos/uC-FS/Source/fs_partition.c ****         return;
 732:rtos/uC-FS/Source/fs_partition.c ****     }
 733:rtos/uC-FS/Source/fs_partition.c **** #endif
 734:rtos/uC-FS/Source/fs_partition.c **** 
 735:rtos/uC-FS/Source/fs_partition.c ****                                                                 /* ---------------------- GET BUF -
 736:rtos/uC-FS/Source/fs_partition.c ****     p_buf = FSBuf_Get((FS_VOL *)0);
 737:rtos/uC-FS/Source/fs_partition.c ****     if (p_buf == (FS_BUF *)0) {
 738:rtos/uC-FS/Source/fs_partition.c ****        *p_err = FS_ERR_BUF_NONE_AVAIL;
 739:rtos/uC-FS/Source/fs_partition.c ****         return;
 740:rtos/uC-FS/Source/fs_partition.c ****     }
 741:rtos/uC-FS/Source/fs_partition.c **** 
 742:rtos/uC-FS/Source/fs_partition.c **** 
 743:rtos/uC-FS/Source/fs_partition.c **** 
 744:rtos/uC-FS/Source/fs_partition.c ****                                                                 /* ------------------- FMT & WR MBR
 745:rtos/uC-FS/Source/fs_partition.c ****     p_temp_08 = (CPU_INT08U *)p_buf->DataPtr;
 746:rtos/uC-FS/Source/fs_partition.c ****     Mem_Clr((void *)p_temp_08, 512u);
 747:rtos/uC-FS/Source/fs_partition.c **** 
 748:rtos/uC-FS/Source/fs_partition.c ****     FSDev_WrLocked(        p_dev,                               /* Clr 1st sec of partition.       
 749:rtos/uC-FS/Source/fs_partition.c ****                    (void *)p_temp_08,
 750:rtos/uC-FS/Source/fs_partition.c ****                            1u,
 751:rtos/uC-FS/Source/fs_partition.c ****                            1u,
 752:rtos/uC-FS/Source/fs_partition.c ****                            p_err);
 753:rtos/uC-FS/Source/fs_partition.c **** 
 754:rtos/uC-FS/Source/fs_partition.c ****     if (*p_err != FS_ERR_NONE) {
 755:rtos/uC-FS/Source/fs_partition.c ****         *p_err  = FS_ERR_DEV;
 756:rtos/uC-FS/Source/fs_partition.c ****          FSBuf_Free(p_buf);
 757:rtos/uC-FS/Source/fs_partition.c ****          return;
 758:rtos/uC-FS/Source/fs_partition.c ****     }
 759:rtos/uC-FS/Source/fs_partition.c **** 
 760:rtos/uC-FS/Source/fs_partition.c ****     MEM_VAL_SET_INT08U_LITTLE((void *)(p_temp_08 + FS_PARTITION_DOS_OFF_BOOT_FLAG_1),      FS_PARTI
 761:rtos/uC-FS/Source/fs_partition.c **** 
 762:rtos/uC-FS/Source/fs_partition.c ****     FSPartition_CalcCHS(               p_temp_08 + FS_PARTITION_DOS_OFF_START_CHS_ADDR_1, (FS_SEC_N
 763:rtos/uC-FS/Source/fs_partition.c **** 
 764:rtos/uC-FS/Source/fs_partition.c ****     MEM_VAL_SET_INT08U_LITTLE((void *)(p_temp_08 + FS_PARTITION_DOS_OFF_PARTITION_TYPE_1), FS_PARTI
 765:rtos/uC-FS/Source/fs_partition.c **** 
 766:rtos/uC-FS/Source/fs_partition.c ****     FSPartition_CalcCHS(               p_temp_08 + FS_PARTITION_DOS_OFF_END_CHS_ADDR_1,    partitio
 767:rtos/uC-FS/Source/fs_partition.c **** 
 768:rtos/uC-FS/Source/fs_partition.c ****     start_lba = 1u;                                             /* See Note #6.                    
 769:rtos/uC-FS/Source/fs_partition.c ****     MEM_VAL_SET_INT32U_LITTLE((void *)(p_temp_08 + FS_PARTITION_DOS_OFF_START_LBA_1),      start_lb
 770:rtos/uC-FS/Source/fs_partition.c ****     MEM_VAL_SET_INT32U_LITTLE((void *)(p_temp_08 + FS_PARTITION_DOS_OFF_SIZE_1),           partitio
 771:rtos/uC-FS/Source/fs_partition.c ****     MEM_VAL_SET_INT16U_LITTLE((void *)(p_temp_08 + FS_PARTITION_DOS_OFF_SIG),              0xAA55u)
ARM GAS  /tmp/ccz88FW6.s 			page 15


 772:rtos/uC-FS/Source/fs_partition.c **** 
 773:rtos/uC-FS/Source/fs_partition.c ****     FSDev_WrLocked(        p_dev,                               /* Wr MBR.                         
 774:rtos/uC-FS/Source/fs_partition.c ****                    (void *)p_temp_08,
 775:rtos/uC-FS/Source/fs_partition.c ****                            0u,
 776:rtos/uC-FS/Source/fs_partition.c ****                            1u,
 777:rtos/uC-FS/Source/fs_partition.c ****                            p_err);
 778:rtos/uC-FS/Source/fs_partition.c **** 
 779:rtos/uC-FS/Source/fs_partition.c ****     FSBuf_Free(p_buf);
 780:rtos/uC-FS/Source/fs_partition.c **** 
 781:rtos/uC-FS/Source/fs_partition.c ****     if (*p_err != FS_ERR_NONE) {
 782:rtos/uC-FS/Source/fs_partition.c ****         *p_err  = FS_ERR_DEV;
 783:rtos/uC-FS/Source/fs_partition.c ****     }
 784:rtos/uC-FS/Source/fs_partition.c **** }
 785:rtos/uC-FS/Source/fs_partition.c **** #endif
 786:rtos/uC-FS/Source/fs_partition.c **** 
 787:rtos/uC-FS/Source/fs_partition.c **** 
 788:rtos/uC-FS/Source/fs_partition.c **** /*
 789:rtos/uC-FS/Source/fs_partition.c **** ***************************************************************************************************
 790:rtos/uC-FS/Source/fs_partition.c **** *                                        FSPartition_Update()
 791:rtos/uC-FS/Source/fs_partition.c **** *
 792:rtos/uC-FS/Source/fs_partition.c **** * Description : Update partition on a device.
 793:rtos/uC-FS/Source/fs_partition.c **** *
 794:rtos/uC-FS/Source/fs_partition.c **** * Argument(s) : p_dev           Pointer to device.
 795:rtos/uC-FS/Source/fs_partition.c **** *               ----------      Argument validated by caller.
 796:rtos/uC-FS/Source/fs_partition.c **** *
 797:rtos/uC-FS/Source/fs_partition.c **** *               partition_nbr   Index of the partition to update.
 798:rtos/uC-FS/Source/fs_partition.c **** *
 799:rtos/uC-FS/Source/fs_partition.c **** *               partition_type  New type of the partition.
 800:rtos/uC-FS/Source/fs_partition.c **** *
 801:rtos/uC-FS/Source/fs_partition.c **** *               p_err           Pointer to variable that will receive the return error code from th
 802:rtos/uC-FS/Source/fs_partition.c **** *               ----------      Argument validated by caller.
 803:rtos/uC-FS/Source/fs_partition.c **** *
 804:rtos/uC-FS/Source/fs_partition.c **** *                                   FS_ERR_NONE                    Partition found.
 805:rtos/uC-FS/Source/fs_partition.c **** *                                   FS_ERR_PARTITION_INVALID_NBR   Invalid partition number.
 806:rtos/uC-FS/Source/fs_partition.c **** *                                   FS_ERR_DEV                     Device access error.
 807:rtos/uC-FS/Source/fs_partition.c **** *
 808:rtos/uC-FS/Source/fs_partition.c **** * Return(s)   : none.
 809:rtos/uC-FS/Source/fs_partition.c **** *
 810:rtos/uC-FS/Source/fs_partition.c **** * Note(s)     : (1) The function caller MUST have acquired a reference to the device & hold the dev
 811:rtos/uC-FS/Source/fs_partition.c **** ***************************************************************************************************
 812:rtos/uC-FS/Source/fs_partition.c **** */
 813:rtos/uC-FS/Source/fs_partition.c **** 
 814:rtos/uC-FS/Source/fs_partition.c **** #if (FS_CFG_PARTITION_EN == DEF_ENABLED)
 815:rtos/uC-FS/Source/fs_partition.c **** #if (FS_CFG_RD_ONLY_EN   == DEF_DISABLED)
 816:rtos/uC-FS/Source/fs_partition.c **** void  FSPartition_Update (FS_DEV            *p_dev,
 817:rtos/uC-FS/Source/fs_partition.c ****                           FS_PARTITION_NBR   partition_nbr,
 818:rtos/uC-FS/Source/fs_partition.c ****                           CPU_INT08U         partition_type,
 819:rtos/uC-FS/Source/fs_partition.c ****                           FS_ERR            *p_err)
 820:rtos/uC-FS/Source/fs_partition.c **** {
 821:rtos/uC-FS/Source/fs_partition.c ****     FS_PARTITION        partition;
 822:rtos/uC-FS/Source/fs_partition.c ****     FS_PARTITION_NBR    partition_cnt;
 823:rtos/uC-FS/Source/fs_partition.c ****     FS_PARTITION_ENTRY  partition_entry;
 824:rtos/uC-FS/Source/fs_partition.c ****     FS_ERR              partition_err;
 825:rtos/uC-FS/Source/fs_partition.c **** 
 826:rtos/uC-FS/Source/fs_partition.c **** 
 827:rtos/uC-FS/Source/fs_partition.c ****                                                                 /* ------------------ OPEN PARTITIO
 828:rtos/uC-FS/Source/fs_partition.c ****     FSPartition_Open( p_dev,
ARM GAS  /tmp/ccz88FW6.s 			page 16


 829:rtos/uC-FS/Source/fs_partition.c ****                      &partition,
 830:rtos/uC-FS/Source/fs_partition.c ****                      &partition_err);
 831:rtos/uC-FS/Source/fs_partition.c **** 
 832:rtos/uC-FS/Source/fs_partition.c ****     if (partition_err != FS_ERR_NONE) {
 833:rtos/uC-FS/Source/fs_partition.c ****        *p_err = partition_err;
 834:rtos/uC-FS/Source/fs_partition.c ****         return;
 835:rtos/uC-FS/Source/fs_partition.c ****     }
 836:rtos/uC-FS/Source/fs_partition.c **** 
 837:rtos/uC-FS/Source/fs_partition.c **** 
 838:rtos/uC-FS/Source/fs_partition.c ****                                                                 /* ------------ ITERATE THROUGH PAR
 839:rtos/uC-FS/Source/fs_partition.c ****     FSPartition_Rd(&partition,
 840:rtos/uC-FS/Source/fs_partition.c ****                    &partition_entry,
 841:rtos/uC-FS/Source/fs_partition.c ****                    &partition_err);
 842:rtos/uC-FS/Source/fs_partition.c **** 
 843:rtos/uC-FS/Source/fs_partition.c ****     partition_cnt = 0u;
 844:rtos/uC-FS/Source/fs_partition.c **** 
 845:rtos/uC-FS/Source/fs_partition.c ****     while (partition_err == FS_ERR_NONE) {
 846:rtos/uC-FS/Source/fs_partition.c ****         if ((partition_entry.Type != FS_PARTITION_TYPE_CHS_MICROSOFT_EXT) &&
 847:rtos/uC-FS/Source/fs_partition.c ****             (partition_entry.Type != FS_PARTITION_TYPE_LBA_MICROSOFT_EXT) &&
 848:rtos/uC-FS/Source/fs_partition.c ****             (partition_entry.Type != FS_PARTITION_TYPE_LINUX_EXT)) {
 849:rtos/uC-FS/Source/fs_partition.c **** 
 850:rtos/uC-FS/Source/fs_partition.c ****             if (partition_cnt == partition_nbr) {
 851:rtos/uC-FS/Source/fs_partition.c ****                 partition_entry.Type = partition_type;
 852:rtos/uC-FS/Source/fs_partition.c **** 
 853:rtos/uC-FS/Source/fs_partition.c ****                 FSPartition_WrEntry( p_dev,                     /* Wr updated entry.               
 854:rtos/uC-FS/Source/fs_partition.c ****                                     &partition_entry,
 855:rtos/uC-FS/Source/fs_partition.c ****                                      partition.PrevMBR_Sec,
 856:rtos/uC-FS/Source/fs_partition.c ****                                      partition.PrevMBR_Pos,
 857:rtos/uC-FS/Source/fs_partition.c ****                                      p_err);
 858:rtos/uC-FS/Source/fs_partition.c ****                 return;
 859:rtos/uC-FS/Source/fs_partition.c ****             }
 860:rtos/uC-FS/Source/fs_partition.c ****             partition_cnt++;
 861:rtos/uC-FS/Source/fs_partition.c ****         }
 862:rtos/uC-FS/Source/fs_partition.c **** 
 863:rtos/uC-FS/Source/fs_partition.c ****         FSPartition_Rd(&partition,
 864:rtos/uC-FS/Source/fs_partition.c ****                        &partition_entry,
 865:rtos/uC-FS/Source/fs_partition.c ****                        &partition_err);
 866:rtos/uC-FS/Source/fs_partition.c ****     }
 867:rtos/uC-FS/Source/fs_partition.c **** 
 868:rtos/uC-FS/Source/fs_partition.c ****    *p_err = FS_ERR_PARTITION_INVALID_NBR;
 869:rtos/uC-FS/Source/fs_partition.c **** }
 870:rtos/uC-FS/Source/fs_partition.c **** #endif
 871:rtos/uC-FS/Source/fs_partition.c **** #endif
 872:rtos/uC-FS/Source/fs_partition.c **** 
 873:rtos/uC-FS/Source/fs_partition.c **** 
 874:rtos/uC-FS/Source/fs_partition.c **** /*
 875:rtos/uC-FS/Source/fs_partition.c **** ***************************************************************************************************
 876:rtos/uC-FS/Source/fs_partition.c **** ***************************************************************************************************
 877:rtos/uC-FS/Source/fs_partition.c **** *                                           LOCAL FUNCTIONS
 878:rtos/uC-FS/Source/fs_partition.c **** ***************************************************************************************************
 879:rtos/uC-FS/Source/fs_partition.c **** ***************************************************************************************************
 880:rtos/uC-FS/Source/fs_partition.c **** */
 881:rtos/uC-FS/Source/fs_partition.c **** 
 882:rtos/uC-FS/Source/fs_partition.c **** /*
 883:rtos/uC-FS/Source/fs_partition.c **** ***************************************************************************************************
 884:rtos/uC-FS/Source/fs_partition.c **** *                                        FSPartition_CalcCHS()
 885:rtos/uC-FS/Source/fs_partition.c **** *
ARM GAS  /tmp/ccz88FW6.s 			page 17


 886:rtos/uC-FS/Source/fs_partition.c **** * Description : Calculate CHS address.
 887:rtos/uC-FS/Source/fs_partition.c **** *
 888:rtos/uC-FS/Source/fs_partition.c **** * Argument(s) : p_buf       Pointer to buffer in which CHS address will be stored.
 889:rtos/uC-FS/Source/fs_partition.c **** *
 890:rtos/uC-FS/Source/fs_partition.c **** *               lba         LBA address.
 891:rtos/uC-FS/Source/fs_partition.c **** *
 892:rtos/uC-FS/Source/fs_partition.c **** * Return(s)   : none.
 893:rtos/uC-FS/Source/fs_partition.c **** *
 894:rtos/uC-FS/Source/fs_partition.c **** * Note(s)     : none.
 895:rtos/uC-FS/Source/fs_partition.c **** ***************************************************************************************************
 896:rtos/uC-FS/Source/fs_partition.c **** */
 897:rtos/uC-FS/Source/fs_partition.c **** 
 898:rtos/uC-FS/Source/fs_partition.c **** #if (FS_CFG_RD_ONLY_EN == DEF_DISABLED)
 899:rtos/uC-FS/Source/fs_partition.c **** static  void  FSPartition_CalcCHS (CPU_INT08U  *p_buf,
 900:rtos/uC-FS/Source/fs_partition.c ****                                    FS_SEC_NBR   lba)
 901:rtos/uC-FS/Source/fs_partition.c **** {
  29              		.loc 1 901 1 view -0
  30              		.cfi_startproc
  31              		@ args = 0, pretend = 0, frame = 0
  32              		@ frame_needed = 0, uses_anonymous_args = 0
  33              		@ link register save eliminated.
  34              		.loc 1 901 1 is_stmt 0 view .LVU1
  35 0000 30B4     		push	{r4, r5}
  36              	.LCFI0:
  37              		.cfi_def_cfa_offset 8
  38              		.cfi_offset 4, -8
  39              		.cfi_offset 5, -4
 902:rtos/uC-FS/Source/fs_partition.c ****     CPU_INT16U  cylinder;
  40              		.loc 1 902 5 is_stmt 1 view .LVU2
 903:rtos/uC-FS/Source/fs_partition.c ****     CPU_INT08U  head;
  41              		.loc 1 903 5 view .LVU3
 904:rtos/uC-FS/Source/fs_partition.c ****     CPU_INT08U  sector;
  42              		.loc 1 904 5 view .LVU4
 905:rtos/uC-FS/Source/fs_partition.c **** 
 906:rtos/uC-FS/Source/fs_partition.c **** 
 907:rtos/uC-FS/Source/fs_partition.c ****     sector   = (CPU_INT08U)(  (lba + 1u)          % FS_PARTITION_DOS_CHS_SECTORS_PER_TRK);
  43              		.loc 1 907 5 view .LVU5
  44              		.loc 1 907 36 is_stmt 0 view .LVU6
  45 0002 4C1C     		adds	r4, r1, #1
  46              		.loc 1 907 51 view .LVU7
  47 0004 134B     		ldr	r3, .L3
  48 0006 A3FB0452 		umull	r5, r2, r3, r4
  49 000a A51A     		subs	r5, r4, r2
  50 000c 02EB5502 		add	r2, r2, r5, lsr #1
  51 0010 5209     		lsrs	r2, r2, #5
  52 0012 C2EB8212 		rsb	r2, r2, r2, lsl #6
  53 0016 A21A     		subs	r2, r4, r2
  54              		.loc 1 907 14 view .LVU8
  55 0018 D2B2     		uxtb	r2, r2
  56              	.LVL1:
 908:rtos/uC-FS/Source/fs_partition.c ****     head     = (CPU_INT08U)( ((lba + 1u - sector) / FS_PARTITION_DOS_CHS_SECTORS_PER_TRK)         %
  57              		.loc 1 908 5 is_stmt 1 view .LVU9
  58              		.loc 1 908 41 is_stmt 0 view .LVU10
  59 001a 891A     		subs	r1, r1, r2
  60              	.LVL2:
  61              		.loc 1 908 41 view .LVU11
  62 001c 0131     		adds	r1, r1, #1
ARM GAS  /tmp/ccz88FW6.s 			page 18


  63              		.loc 1 908 51 view .LVU12
  64 001e A3FB0143 		umull	r4, r3, r3, r1
  65              	.LVL3:
  66              		.loc 1 908 51 view .LVU13
  67 0022 C91A     		subs	r1, r1, r3
  68 0024 03EB5103 		add	r3, r3, r1, lsr #1
  69 0028 5B09     		lsrs	r3, r3, #5
  70              		.loc 1 908 99 view .LVU14
  71 002a 0B4C     		ldr	r4, .L3+4
  72 002c A4FB0351 		umull	r5, r1, r4, r3
  73 0030 C909     		lsrs	r1, r1, #7
  74 0032 C1EB0121 		rsb	r1, r1, r1, lsl #8
  75 0036 591A     		subs	r1, r3, r1
  76              		.loc 1 908 14 view .LVU15
  77 0038 C9B2     		uxtb	r1, r1
  78              	.LVL4:
 909:rtos/uC-FS/Source/fs_partition.c ****     cylinder = (CPU_INT16U)((((lba + 1u - sector) / FS_PARTITION_DOS_CHS_SECTORS_PER_TRK) - head) /
  79              		.loc 1 909 5 is_stmt 1 view .LVU16
  80              		.loc 1 909 91 is_stmt 0 view .LVU17
  81 003a 5B1A     		subs	r3, r3, r1
  82              		.loc 1 909 99 view .LVU18
  83 003c A4FB0343 		umull	r4, r3, r4, r3
  84              	.LVL5:
 910:rtos/uC-FS/Source/fs_partition.c ****    *p_buf    = head;
  85              		.loc 1 910 4 is_stmt 1 view .LVU19
  86              		.loc 1 910 14 is_stmt 0 view .LVU20
  87 0040 0170     		strb	r1, [r0]
 911:rtos/uC-FS/Source/fs_partition.c ****     p_buf++;
  88              		.loc 1 911 5 is_stmt 1 view .LVU21
  89              	.LVL6:
 912:rtos/uC-FS/Source/fs_partition.c ****    *p_buf    = sector | (CPU_INT08U)((cylinder & 0x300u) >> 8);
  90              		.loc 1 912 4 view .LVU22
  91              		.loc 1 912 25 is_stmt 0 view .LVU23
  92 0042 C3F3C131 		ubfx	r1, r3, #15, #2
  93              	.LVL7:
  94              		.loc 1 912 14 view .LVU24
  95 0046 0A43     		orrs	r2, r2, r1
  96              	.LVL8:
  97              		.loc 1 912 14 view .LVU25
  98 0048 4270     		strb	r2, [r0, #1]
 913:rtos/uC-FS/Source/fs_partition.c ****     p_buf++;
  99              		.loc 1 913 5 is_stmt 1 view .LVU26
 100              	.LVL9:
 914:rtos/uC-FS/Source/fs_partition.c ****    *p_buf    = (CPU_INT08U)cylinder & DEF_INT_08_MASK;
 101              		.loc 1 914 4 view .LVU27
 102              		.loc 1 914 16 is_stmt 0 view .LVU28
 103 004a C3F3C713 		ubfx	r3, r3, #7, #8
 104              	.LVL10:
 105              		.loc 1 914 14 view .LVU29
 106 004e 8370     		strb	r3, [r0, #2]
 915:rtos/uC-FS/Source/fs_partition.c **** }
 107              		.loc 1 915 1 view .LVU30
 108 0050 30BC     		pop	{r4, r5}
 109              	.LCFI1:
 110              		.cfi_restore 5
 111              		.cfi_restore 4
 112              		.cfi_def_cfa_offset 0
ARM GAS  /tmp/ccz88FW6.s 			page 19


 113 0052 7047     		bx	lr
 114              	.L4:
 115              		.align	2
 116              	.L3:
 117 0054 05411004 		.word	68174085
 118 0058 81808080 		.word	-2139062143
 119              		.cfi_endproc
 120              	.LFE2:
 122              		.section	.text.FSPartition_FindSimple,"ax",%progbits
 123              		.align	1
 124              		.global	FSPartition_FindSimple
 125              		.syntax unified
 126              		.thumb
 127              		.thumb_func
 128              		.fpu fpv4-sp-d16
 130              	FSPartition_FindSimple:
 131              	.LVL11:
 132              	.LFB0:
 589:rtos/uC-FS/Source/fs_partition.c ****     FS_SEC_NBR   partition_end;
 133              		.loc 1 589 1 is_stmt 1 view -0
 134              		.cfi_startproc
 135              		@ args = 0, pretend = 0, frame = 0
 136              		@ frame_needed = 0, uses_anonymous_args = 0
 589:rtos/uC-FS/Source/fs_partition.c ****     FS_SEC_NBR   partition_end;
 137              		.loc 1 589 1 is_stmt 0 view .LVU32
 138 0000 2DE9F047 		push	{r4, r5, r6, r7, r8, r9, r10, lr}
 139              	.LCFI2:
 140              		.cfi_def_cfa_offset 32
 141              		.cfi_offset 4, -32
 142              		.cfi_offset 5, -28
 143              		.cfi_offset 6, -24
 144              		.cfi_offset 7, -20
 145              		.cfi_offset 8, -16
 146              		.cfi_offset 9, -12
 147              		.cfi_offset 10, -8
 148              		.cfi_offset 14, -4
 149 0004 82B0     		sub	sp, sp, #8
 150              	.LCFI3:
 151              		.cfi_def_cfa_offset 40
 152 0006 0746     		mov	r7, r0
 153 0008 0C46     		mov	r4, r1
 154 000a 1646     		mov	r6, r2
 590:rtos/uC-FS/Source/fs_partition.c ****     FS_SEC_QTY   partition_size;
 155              		.loc 1 590 5 is_stmt 1 view .LVU33
 591:rtos/uC-FS/Source/fs_partition.c ****     FS_SEC_NBR   partition_start;
 156              		.loc 1 591 5 view .LVU34
 592:rtos/uC-FS/Source/fs_partition.c ****     CPU_INT08U   partition_type;
 157              		.loc 1 592 5 view .LVU35
 593:rtos/uC-FS/Source/fs_partition.c ****     CPU_INT16U   sig_val;
 158              		.loc 1 593 5 view .LVU36
 594:rtos/uC-FS/Source/fs_partition.c ****     FS_BUF      *p_buf;
 159              		.loc 1 594 5 view .LVU37
 595:rtos/uC-FS/Source/fs_partition.c ****     CPU_INT08U  *p_temp;
 160              		.loc 1 595 5 view .LVU38
 596:rtos/uC-FS/Source/fs_partition.c **** 
 161              		.loc 1 596 5 view .LVU39
 600:rtos/uC-FS/Source/fs_partition.c ****     p_partition_entry->Size  = 0u;
ARM GAS  /tmp/ccz88FW6.s 			page 20


 162              		.loc 1 600 5 view .LVU40
 600:rtos/uC-FS/Source/fs_partition.c ****     p_partition_entry->Size  = 0u;
 163              		.loc 1 600 30 is_stmt 0 view .LVU41
 164 000c 0020     		movs	r0, #0
 165              	.LVL12:
 600:rtos/uC-FS/Source/fs_partition.c ****     p_partition_entry->Size  = 0u;
 166              		.loc 1 600 30 view .LVU42
 167 000e 0860     		str	r0, [r1]
 601:rtos/uC-FS/Source/fs_partition.c ****     p_partition_entry->Type  = 0u;
 168              		.loc 1 601 5 is_stmt 1 view .LVU43
 601:rtos/uC-FS/Source/fs_partition.c ****     p_partition_entry->Type  = 0u;
 169              		.loc 1 601 30 is_stmt 0 view .LVU44
 170 0010 4860     		str	r0, [r1, #4]
 602:rtos/uC-FS/Source/fs_partition.c **** 
 171              		.loc 1 602 5 is_stmt 1 view .LVU45
 602:rtos/uC-FS/Source/fs_partition.c **** 
 172              		.loc 1 602 30 is_stmt 0 view .LVU46
 173 0012 0872     		strb	r0, [r1, #8]
 607:rtos/uC-FS/Source/fs_partition.c ****     if (p_buf == (FS_BUF *)0) {
 174              		.loc 1 607 5 is_stmt 1 view .LVU47
 607:rtos/uC-FS/Source/fs_partition.c ****     if (p_buf == (FS_BUF *)0) {
 175              		.loc 1 607 13 is_stmt 0 view .LVU48
 176 0014 FFF7FEFF 		bl	FSBuf_Get
 177              	.LVL13:
 608:rtos/uC-FS/Source/fs_partition.c ****        *p_err = FS_ERR_BUF_NONE_AVAIL;
 178              		.loc 1 608 5 is_stmt 1 view .LVU49
 608:rtos/uC-FS/Source/fs_partition.c ****        *p_err = FS_ERR_BUF_NONE_AVAIL;
 179              		.loc 1 608 8 is_stmt 0 view .LVU50
 180 0018 0028     		cmp	r0, #0
 181 001a 47D0     		beq	.L13
 182 001c 8146     		mov	r9, r0
 614:rtos/uC-FS/Source/fs_partition.c **** 
 183              		.loc 1 614 5 is_stmt 1 view .LVU51
 614:rtos/uC-FS/Source/fs_partition.c **** 
 184              		.loc 1 614 12 is_stmt 0 view .LVU52
 185 001e 0569     		ldr	r5, [r0, #16]
 186              	.LVL14:
 616:rtos/uC-FS/Source/fs_partition.c ****                    (void *)p_temp,
 187              		.loc 1 616 5 is_stmt 1 view .LVU53
 188 0020 0096     		str	r6, [sp]
 189 0022 0123     		movs	r3, #1
 190 0024 0022     		movs	r2, #0
 191 0026 2946     		mov	r1, r5
 192 0028 3846     		mov	r0, r7
 193              	.LVL15:
 616:rtos/uC-FS/Source/fs_partition.c ****                    (void *)p_temp,
 194              		.loc 1 616 5 is_stmt 0 view .LVU54
 195 002a FFF7FEFF 		bl	FSDev_RdLocked
 196              	.LVL16:
 622:rtos/uC-FS/Source/fs_partition.c ****         *p_err  = FS_ERR_DEV;
 197              		.loc 1 622 5 is_stmt 1 view .LVU55
 622:rtos/uC-FS/Source/fs_partition.c ****         *p_err  = FS_ERR_DEV;
 198              		.loc 1 622 9 is_stmt 0 view .LVU56
 199 002e 3388     		ldrh	r3, [r6]
 622:rtos/uC-FS/Source/fs_partition.c ****         *p_err  = FS_ERR_DEV;
 200              		.loc 1 622 8 view .LVU57
 201 0030 002B     		cmp	r3, #0
ARM GAS  /tmp/ccz88FW6.s 			page 21


 202 0032 40D1     		bne	.L14
 628:rtos/uC-FS/Source/fs_partition.c ****     if (sig_val != 0xAA55u) {
 203              		.loc 1 628 5 is_stmt 1 view .LVU58
 628:rtos/uC-FS/Source/fs_partition.c ****     if (sig_val != 0xAA55u) {
 204              		.loc 1 628 15 is_stmt 0 view .LVU59
 205 0034 95F8FE31 		ldrb	r3, [r5, #510]	@ zero_extendqisi2
 206 0038 95F8FF21 		ldrb	r2, [r5, #511]	@ zero_extendqisi2
 628:rtos/uC-FS/Source/fs_partition.c ****     if (sig_val != 0xAA55u) {
 207              		.loc 1 628 13 view .LVU60
 208 003c 03EB0223 		add	r3, r3, r2, lsl #8
 209 0040 9BB2     		uxth	r3, r3
 210              	.LVL17:
 629:rtos/uC-FS/Source/fs_partition.c ****         FSBuf_Free(p_buf);
 211              		.loc 1 629 5 is_stmt 1 view .LVU61
 629:rtos/uC-FS/Source/fs_partition.c ****         FSBuf_Free(p_buf);
 212              		.loc 1 629 8 is_stmt 0 view .LVU62
 213 0042 4AF65522 		movw	r2, #43605
 214 0046 9342     		cmp	r3, r2
 215 0048 3CD1     		bne	.L15
 639:rtos/uC-FS/Source/fs_partition.c ****                                                                 /* Rd partition size (see Note #2).
 216              		.loc 1 639 5 is_stmt 1 view .LVU63
 639:rtos/uC-FS/Source/fs_partition.c ****                                                                 /* Rd partition size (see Note #2).
 217              		.loc 1 639 23 is_stmt 0 view .LVU64
 218 004a 95F8C681 		ldrb	r8, [r5, #454]	@ zero_extendqisi2
 219 004e 95F8C731 		ldrb	r3, [r5, #455]	@ zero_extendqisi2
 220              	.LVL18:
 639:rtos/uC-FS/Source/fs_partition.c ****                                                                 /* Rd partition size (see Note #2).
 221              		.loc 1 639 23 view .LVU65
 222 0052 08EB0328 		add	r8, r8, r3, lsl #8
 223 0056 95F8C831 		ldrb	r3, [r5, #456]	@ zero_extendqisi2
 224 005a 08EB0348 		add	r8, r8, r3, lsl #16
 225 005e 95F8C931 		ldrb	r3, [r5, #457]	@ zero_extendqisi2
 639:rtos/uC-FS/Source/fs_partition.c ****                                                                 /* Rd partition size (see Note #2).
 226              		.loc 1 639 21 view .LVU66
 227 0062 08EB0368 		add	r8, r8, r3, lsl #24
 228              	.LVL19:
 641:rtos/uC-FS/Source/fs_partition.c ****                                                                 /* Rd partition type.              
 229              		.loc 1 641 5 is_stmt 1 view .LVU67
 641:rtos/uC-FS/Source/fs_partition.c ****                                                                 /* Rd partition type.              
 230              		.loc 1 641 23 is_stmt 0 view .LVU68
 231 0066 95F8CAA1 		ldrb	r10, [r5, #458]	@ zero_extendqisi2
 232 006a 95F8CB31 		ldrb	r3, [r5, #459]	@ zero_extendqisi2
 233 006e 0AEB032A 		add	r10, r10, r3, lsl #8
 234 0072 95F8CC31 		ldrb	r3, [r5, #460]	@ zero_extendqisi2
 235 0076 0AEB034A 		add	r10, r10, r3, lsl #16
 236 007a 95F8CD31 		ldrb	r3, [r5, #461]	@ zero_extendqisi2
 641:rtos/uC-FS/Source/fs_partition.c ****                                                                 /* Rd partition type.              
 237              		.loc 1 641 21 view .LVU69
 238 007e 0AEB036A 		add	r10, r10, r3, lsl #24
 239              	.LVL20:
 643:rtos/uC-FS/Source/fs_partition.c **** 
 240              		.loc 1 643 5 is_stmt 1 view .LVU70
 643:rtos/uC-FS/Source/fs_partition.c **** 
 241              		.loc 1 643 21 is_stmt 0 view .LVU71
 242 0082 95F8C251 		ldrb	r5, [r5, #450]	@ zero_extendqisi2
 243              	.LVL21:
 645:rtos/uC-FS/Source/fs_partition.c **** 
ARM GAS  /tmp/ccz88FW6.s 			page 22


 244              		.loc 1 645 5 is_stmt 1 view .LVU72
 645:rtos/uC-FS/Source/fs_partition.c **** 
 245              		.loc 1 645 28 is_stmt 0 view .LVU73
 246 0086 7B6A     		ldr	r3, [r7, #36]
 645:rtos/uC-FS/Source/fs_partition.c **** 
 247              		.loc 1 645 21 view .LVU74
 248 0088 5A1E     		subs	r2, r3, #1
 249              	.LVL22:
 647:rtos/uC-FS/Source/fs_partition.c ****         (partition_start + partition_size >  partition_end   + 1u)  ||
 250              		.loc 1 647 5 is_stmt 1 view .LVU75
 647:rtos/uC-FS/Source/fs_partition.c ****         (partition_start + partition_size >  partition_end   + 1u)  ||
 251              		.loc 1 647 8 is_stmt 0 view .LVU76
 252 008a 9045     		cmp	r8, r2
 253 008c 07D8     		bhi	.L10
 648:rtos/uC-FS/Source/fs_partition.c ****         (partition_start + partition_size <= partition_start + 1u)) {
 254              		.loc 1 648 26 discriminator 1 view .LVU77
 255 008e 08EB0A02 		add	r2, r8, r10
 256              	.LVL23:
 647:rtos/uC-FS/Source/fs_partition.c ****         (partition_start + partition_size >  partition_end   + 1u)  ||
 257              		.loc 1 647 69 discriminator 1 view .LVU78
 258 0092 9342     		cmp	r3, r2
 259 0094 03D3     		bcc	.L10
 649:rtos/uC-FS/Source/fs_partition.c ****         FSBuf_Free(p_buf);
 260              		.loc 1 649 62 view .LVU79
 261 0096 08F10103 		add	r3, r8, #1
 262              	.LVL24:
 648:rtos/uC-FS/Source/fs_partition.c ****         (partition_start + partition_size <= partition_start + 1u)) {
 263              		.loc 1 648 69 view .LVU80
 264 009a 9A42     		cmp	r2, r3
 265 009c 19D8     		bhi	.L11
 266              	.L10:
 650:rtos/uC-FS/Source/fs_partition.c ****        *p_err = FS_ERR_PARTITION_INVALID;
 267              		.loc 1 650 9 is_stmt 1 view .LVU81
 268 009e 4846     		mov	r0, r9
 269 00a0 FFF7FEFF 		bl	FSBuf_Free
 270              	.LVL25:
 651:rtos/uC-FS/Source/fs_partition.c ****         return;
 271              		.loc 1 651 8 view .LVU82
 651:rtos/uC-FS/Source/fs_partition.c ****         return;
 272              		.loc 1 651 15 is_stmt 0 view .LVU83
 273 00a4 40F2E933 		movw	r3, #1001
 274 00a8 3380     		strh	r3, [r6]	@ movhi
 652:rtos/uC-FS/Source/fs_partition.c ****     }
 275              		.loc 1 652 9 is_stmt 1 view .LVU84
 276 00aa 01E0     		b	.L5
 277              	.LVL26:
 278              	.L13:
 609:rtos/uC-FS/Source/fs_partition.c ****         return;
 279              		.loc 1 609 8 view .LVU85
 609:rtos/uC-FS/Source/fs_partition.c ****         return;
 280              		.loc 1 609 15 is_stmt 0 view .LVU86
 281 00ac 6423     		movs	r3, #100
 282 00ae 3380     		strh	r3, [r6]	@ movhi
 610:rtos/uC-FS/Source/fs_partition.c ****     }
 283              		.loc 1 610 9 is_stmt 1 view .LVU87
 284              	.LVL27:
 285              	.L5:
ARM GAS  /tmp/ccz88FW6.s 			page 23


 662:rtos/uC-FS/Source/fs_partition.c **** #endif
 286              		.loc 1 662 1 is_stmt 0 view .LVU88
 287 00b0 02B0     		add	sp, sp, #8
 288              	.LCFI4:
 289              		.cfi_remember_state
 290              		.cfi_def_cfa_offset 32
 291              		@ sp needed
 292 00b2 BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, r10, pc}
 293              	.LVL28:
 294              	.L14:
 295              	.LCFI5:
 296              		.cfi_restore_state
 623:rtos/uC-FS/Source/fs_partition.c ****          FSBuf_Free(p_buf);
 297              		.loc 1 623 9 is_stmt 1 view .LVU89
 623:rtos/uC-FS/Source/fs_partition.c ****          FSBuf_Free(p_buf);
 298              		.loc 1 623 17 is_stmt 0 view .LVU90
 299 00b6 4FF49673 		mov	r3, #300
 300 00ba 3380     		strh	r3, [r6]	@ movhi
 624:rtos/uC-FS/Source/fs_partition.c ****          return;
 301              		.loc 1 624 10 is_stmt 1 view .LVU91
 302 00bc 4846     		mov	r0, r9
 303 00be FFF7FEFF 		bl	FSBuf_Free
 304              	.LVL29:
 625:rtos/uC-FS/Source/fs_partition.c ****     }
 305              		.loc 1 625 10 view .LVU92
 306 00c2 F5E7     		b	.L5
 307              	.LVL30:
 308              	.L15:
 630:rtos/uC-FS/Source/fs_partition.c ****        *p_err = FS_ERR_PARTITION_INVALID_SIG;
 309              		.loc 1 630 9 view .LVU93
 310 00c4 4846     		mov	r0, r9
 311 00c6 FFF7FEFF 		bl	FSBuf_Free
 312              	.LVL31:
 631:rtos/uC-FS/Source/fs_partition.c ****         return;
 313              		.loc 1 631 8 view .LVU94
 631:rtos/uC-FS/Source/fs_partition.c ****         return;
 314              		.loc 1 631 15 is_stmt 0 view .LVU95
 315 00ca 40F2EB33 		movw	r3, #1003
 316 00ce 3380     		strh	r3, [r6]	@ movhi
 632:rtos/uC-FS/Source/fs_partition.c ****     }
 317              		.loc 1 632 9 is_stmt 1 view .LVU96
 318 00d0 EEE7     		b	.L5
 319              	.LVL32:
 320              	.L11:
 655:rtos/uC-FS/Source/fs_partition.c **** 
 321              		.loc 1 655 5 view .LVU97
 322 00d2 4846     		mov	r0, r9
 323 00d4 FFF7FEFF 		bl	FSBuf_Free
 324              	.LVL33:
 658:rtos/uC-FS/Source/fs_partition.c ****     p_partition_entry->Size  = partition_size;
 325              		.loc 1 658 5 view .LVU98
 658:rtos/uC-FS/Source/fs_partition.c ****     p_partition_entry->Size  = partition_size;
 326              		.loc 1 658 30 is_stmt 0 view .LVU99
 327 00d8 C4F80080 		str	r8, [r4]
 659:rtos/uC-FS/Source/fs_partition.c ****     p_partition_entry->Type  = partition_type;
 328              		.loc 1 659 5 is_stmt 1 view .LVU100
 659:rtos/uC-FS/Source/fs_partition.c ****     p_partition_entry->Type  = partition_type;
ARM GAS  /tmp/ccz88FW6.s 			page 24


 329              		.loc 1 659 30 is_stmt 0 view .LVU101
 330 00dc C4F804A0 		str	r10, [r4, #4]
 660:rtos/uC-FS/Source/fs_partition.c ****    *p_err = FS_ERR_NONE;
 331              		.loc 1 660 5 is_stmt 1 view .LVU102
 660:rtos/uC-FS/Source/fs_partition.c ****    *p_err = FS_ERR_NONE;
 332              		.loc 1 660 30 is_stmt 0 view .LVU103
 333 00e0 2572     		strb	r5, [r4, #8]
 661:rtos/uC-FS/Source/fs_partition.c **** }
 334              		.loc 1 661 4 is_stmt 1 view .LVU104
 661:rtos/uC-FS/Source/fs_partition.c **** }
 335              		.loc 1 661 11 is_stmt 0 view .LVU105
 336 00e2 0023     		movs	r3, #0
 337 00e4 3380     		strh	r3, [r6]	@ movhi
 338 00e6 E3E7     		b	.L5
 339              		.cfi_endproc
 340              	.LFE0:
 342              		.section	.text.FSPartition_Init,"ax",%progbits
 343              		.align	1
 344              		.global	FSPartition_Init
 345              		.syntax unified
 346              		.thumb
 347              		.thumb_func
 348              		.fpu fpv4-sp-d16
 350              	FSPartition_Init:
 351              	.LVL34:
 352              	.LFB1:
 722:rtos/uC-FS/Source/fs_partition.c ****     FS_BUF      *p_buf;
 353              		.loc 1 722 1 is_stmt 1 view -0
 354              		.cfi_startproc
 355              		@ args = 0, pretend = 0, frame = 0
 356              		@ frame_needed = 0, uses_anonymous_args = 0
 722:rtos/uC-FS/Source/fs_partition.c ****     FS_BUF      *p_buf;
 357              		.loc 1 722 1 is_stmt 0 view .LVU107
 358 0000 2DE9F043 		push	{r4, r5, r6, r7, r8, r9, lr}
 359              	.LCFI6:
 360              		.cfi_def_cfa_offset 28
 361              		.cfi_offset 4, -28
 362              		.cfi_offset 5, -24
 363              		.cfi_offset 6, -20
 364              		.cfi_offset 7, -16
 365              		.cfi_offset 8, -12
 366              		.cfi_offset 9, -8
 367              		.cfi_offset 14, -4
 368 0004 83B0     		sub	sp, sp, #12
 369              	.LCFI7:
 370              		.cfi_def_cfa_offset 40
 371 0006 1446     		mov	r4, r2
 723:rtos/uC-FS/Source/fs_partition.c ****     CPU_INT08U  *p_temp_08;
 372              		.loc 1 723 5 is_stmt 1 view .LVU108
 724:rtos/uC-FS/Source/fs_partition.c ****     CPU_INT32U   start_lba;
 373              		.loc 1 724 5 view .LVU109
 725:rtos/uC-FS/Source/fs_partition.c **** 
 374              		.loc 1 725 5 view .LVU110
 729:rtos/uC-FS/Source/fs_partition.c ****        *p_err = FS_ERR_PARTITION_INVALID_SIZE;
 375              		.loc 1 729 5 view .LVU111
 729:rtos/uC-FS/Source/fs_partition.c ****        *p_err = FS_ERR_PARTITION_INVALID_SIZE;
 376              		.loc 1 729 8 is_stmt 0 view .LVU112
ARM GAS  /tmp/ccz88FW6.s 			page 25


 377 0008 0129     		cmp	r1, #1
 378 000a 55D9     		bls	.L22
 379 000c 0746     		mov	r7, r0
 380 000e 0E46     		mov	r6, r1
 736:rtos/uC-FS/Source/fs_partition.c ****     if (p_buf == (FS_BUF *)0) {
 381              		.loc 1 736 5 is_stmt 1 view .LVU113
 736:rtos/uC-FS/Source/fs_partition.c ****     if (p_buf == (FS_BUF *)0) {
 382              		.loc 1 736 13 is_stmt 0 view .LVU114
 383 0010 0020     		movs	r0, #0
 384              	.LVL35:
 736:rtos/uC-FS/Source/fs_partition.c ****     if (p_buf == (FS_BUF *)0) {
 385              		.loc 1 736 13 view .LVU115
 386 0012 FFF7FEFF 		bl	FSBuf_Get
 387              	.LVL36:
 737:rtos/uC-FS/Source/fs_partition.c ****        *p_err = FS_ERR_BUF_NONE_AVAIL;
 388              		.loc 1 737 5 is_stmt 1 view .LVU116
 737:rtos/uC-FS/Source/fs_partition.c ****        *p_err = FS_ERR_BUF_NONE_AVAIL;
 389              		.loc 1 737 8 is_stmt 0 view .LVU117
 390 0016 8146     		mov	r9, r0
 391 0018 0028     		cmp	r0, #0
 392 001a 53D0     		beq	.L23
 745:rtos/uC-FS/Source/fs_partition.c ****     Mem_Clr((void *)p_temp_08, 512u);
 393              		.loc 1 745 5 is_stmt 1 view .LVU118
 745:rtos/uC-FS/Source/fs_partition.c ****     Mem_Clr((void *)p_temp_08, 512u);
 394              		.loc 1 745 15 is_stmt 0 view .LVU119
 395 001c 0569     		ldr	r5, [r0, #16]
 396              	.LVL37:
 746:rtos/uC-FS/Source/fs_partition.c **** 
 397              		.loc 1 746 5 is_stmt 1 view .LVU120
 398 001e 4FF40071 		mov	r1, #512
 399 0022 2846     		mov	r0, r5
 400              	.LVL38:
 746:rtos/uC-FS/Source/fs_partition.c **** 
 401              		.loc 1 746 5 is_stmt 0 view .LVU121
 402 0024 FFF7FEFF 		bl	Mem_Clr
 403              	.LVL39:
 748:rtos/uC-FS/Source/fs_partition.c ****                    (void *)p_temp_08,
 404              		.loc 1 748 5 is_stmt 1 view .LVU122
 405 0028 0094     		str	r4, [sp]
 406 002a 0123     		movs	r3, #1
 407 002c 1A46     		mov	r2, r3
 408 002e 2946     		mov	r1, r5
 409 0030 3846     		mov	r0, r7
 410 0032 FFF7FEFF 		bl	FSDev_WrLocked
 411              	.LVL40:
 754:rtos/uC-FS/Source/fs_partition.c ****         *p_err  = FS_ERR_DEV;
 412              		.loc 1 754 5 view .LVU123
 754:rtos/uC-FS/Source/fs_partition.c ****         *p_err  = FS_ERR_DEV;
 413              		.loc 1 754 9 is_stmt 0 view .LVU124
 414 0036 2388     		ldrh	r3, [r4]
 754:rtos/uC-FS/Source/fs_partition.c ****         *p_err  = FS_ERR_DEV;
 415              		.loc 1 754 8 view .LVU125
 416 0038 002B     		cmp	r3, #0
 417 003a 46D1     		bne	.L24
 760:rtos/uC-FS/Source/fs_partition.c **** 
 418              		.loc 1 760 5 is_stmt 1 view .LVU126
 760:rtos/uC-FS/Source/fs_partition.c **** 
ARM GAS  /tmp/ccz88FW6.s 			page 26


 419              		.loc 1 760 5 view .LVU127
 420 003c 8023     		movs	r3, #128
 421 003e 85F8BE31 		strb	r3, [r5, #446]
 760:rtos/uC-FS/Source/fs_partition.c **** 
 422              		.loc 1 760 5 view .LVU128
 762:rtos/uC-FS/Source/fs_partition.c **** 
 423              		.loc 1 762 5 view .LVU129
 424 0042 0121     		movs	r1, #1
 425 0044 05F2BF10 		addw	r0, r5, #447
 426 0048 FFF7FEFF 		bl	FSPartition_CalcCHS
 427              	.LVL41:
 764:rtos/uC-FS/Source/fs_partition.c **** 
 428              		.loc 1 764 5 view .LVU130
 764:rtos/uC-FS/Source/fs_partition.c **** 
 429              		.loc 1 764 5 view .LVU131
 430 004c 0C23     		movs	r3, #12
 431 004e 85F8C231 		strb	r3, [r5, #450]
 764:rtos/uC-FS/Source/fs_partition.c **** 
 432              		.loc 1 764 5 view .LVU132
 766:rtos/uC-FS/Source/fs_partition.c **** 
 433              		.loc 1 766 5 view .LVU133
 434 0052 06F1FF38 		add	r8, r6, #-1
 435 0056 4146     		mov	r1, r8
 436 0058 05F2C310 		addw	r0, r5, #451
 437 005c FFF7FEFF 		bl	FSPartition_CalcCHS
 438              	.LVL42:
 768:rtos/uC-FS/Source/fs_partition.c ****     MEM_VAL_SET_INT32U_LITTLE((void *)(p_temp_08 + FS_PARTITION_DOS_OFF_START_LBA_1),      start_lb
 439              		.loc 1 768 5 view .LVU134
 769:rtos/uC-FS/Source/fs_partition.c ****     MEM_VAL_SET_INT32U_LITTLE((void *)(p_temp_08 + FS_PARTITION_DOS_OFF_SIZE_1),           partitio
 440              		.loc 1 769 5 view .LVU135
 769:rtos/uC-FS/Source/fs_partition.c ****     MEM_VAL_SET_INT32U_LITTLE((void *)(p_temp_08 + FS_PARTITION_DOS_OFF_SIZE_1),           partitio
 441              		.loc 1 769 5 view .LVU136
 442 0060 0123     		movs	r3, #1
 443 0062 85F8C631 		strb	r3, [r5, #454]
 769:rtos/uC-FS/Source/fs_partition.c ****     MEM_VAL_SET_INT32U_LITTLE((void *)(p_temp_08 + FS_PARTITION_DOS_OFF_SIZE_1),           partitio
 444              		.loc 1 769 5 view .LVU137
 445 0066 0022     		movs	r2, #0
 446 0068 85F8C721 		strb	r2, [r5, #455]
 769:rtos/uC-FS/Source/fs_partition.c ****     MEM_VAL_SET_INT32U_LITTLE((void *)(p_temp_08 + FS_PARTITION_DOS_OFF_SIZE_1),           partitio
 447              		.loc 1 769 5 view .LVU138
 448 006c 85F8C821 		strb	r2, [r5, #456]
 769:rtos/uC-FS/Source/fs_partition.c ****     MEM_VAL_SET_INT32U_LITTLE((void *)(p_temp_08 + FS_PARTITION_DOS_OFF_SIZE_1),           partitio
 449              		.loc 1 769 5 view .LVU139
 450 0070 85F8C921 		strb	r2, [r5, #457]
 769:rtos/uC-FS/Source/fs_partition.c ****     MEM_VAL_SET_INT32U_LITTLE((void *)(p_temp_08 + FS_PARTITION_DOS_OFF_SIZE_1),           partitio
 451              		.loc 1 769 5 view .LVU140
 770:rtos/uC-FS/Source/fs_partition.c ****     MEM_VAL_SET_INT16U_LITTLE((void *)(p_temp_08 + FS_PARTITION_DOS_OFF_SIG),              0xAA55u)
 452              		.loc 1 770 5 view .LVU141
 770:rtos/uC-FS/Source/fs_partition.c ****     MEM_VAL_SET_INT16U_LITTLE((void *)(p_temp_08 + FS_PARTITION_DOS_OFF_SIG),              0xAA55u)
 453              		.loc 1 770 5 view .LVU142
 454 0074 85F8CA81 		strb	r8, [r5, #458]
 770:rtos/uC-FS/Source/fs_partition.c ****     MEM_VAL_SET_INT16U_LITTLE((void *)(p_temp_08 + FS_PARTITION_DOS_OFF_SIG),              0xAA55u)
 455              		.loc 1 770 5 view .LVU143
 456 0078 C8F30721 		ubfx	r1, r8, #8, #8
 457 007c 85F8CB11 		strb	r1, [r5, #459]
 770:rtos/uC-FS/Source/fs_partition.c ****     MEM_VAL_SET_INT16U_LITTLE((void *)(p_temp_08 + FS_PARTITION_DOS_OFF_SIG),              0xAA55u)
 458              		.loc 1 770 5 view .LVU144
ARM GAS  /tmp/ccz88FW6.s 			page 27


 459 0080 C8F30741 		ubfx	r1, r8, #16, #8
 460 0084 85F8CC11 		strb	r1, [r5, #460]
 770:rtos/uC-FS/Source/fs_partition.c ****     MEM_VAL_SET_INT16U_LITTLE((void *)(p_temp_08 + FS_PARTITION_DOS_OFF_SIG),              0xAA55u)
 461              		.loc 1 770 5 view .LVU145
 462 0088 4FEA1868 		lsr	r8, r8, #24
 463 008c 85F8CD81 		strb	r8, [r5, #461]
 770:rtos/uC-FS/Source/fs_partition.c ****     MEM_VAL_SET_INT16U_LITTLE((void *)(p_temp_08 + FS_PARTITION_DOS_OFF_SIG),              0xAA55u)
 464              		.loc 1 770 5 view .LVU146
 771:rtos/uC-FS/Source/fs_partition.c **** 
 465              		.loc 1 771 5 view .LVU147
 771:rtos/uC-FS/Source/fs_partition.c **** 
 466              		.loc 1 771 5 view .LVU148
 467 0090 5521     		movs	r1, #85
 468 0092 85F8FE11 		strb	r1, [r5, #510]
 771:rtos/uC-FS/Source/fs_partition.c **** 
 469              		.loc 1 771 5 view .LVU149
 470 0096 AA21     		movs	r1, #170
 471 0098 85F8FF11 		strb	r1, [r5, #511]
 771:rtos/uC-FS/Source/fs_partition.c **** 
 472              		.loc 1 771 5 view .LVU150
 773:rtos/uC-FS/Source/fs_partition.c ****                    (void *)p_temp_08,
 473              		.loc 1 773 5 view .LVU151
 474 009c 0094     		str	r4, [sp]
 475 009e 2946     		mov	r1, r5
 476 00a0 3846     		mov	r0, r7
 477 00a2 FFF7FEFF 		bl	FSDev_WrLocked
 478              	.LVL43:
 779:rtos/uC-FS/Source/fs_partition.c **** 
 479              		.loc 1 779 5 view .LVU152
 480 00a6 4846     		mov	r0, r9
 481 00a8 FFF7FEFF 		bl	FSBuf_Free
 482              	.LVL44:
 781:rtos/uC-FS/Source/fs_partition.c ****         *p_err  = FS_ERR_DEV;
 483              		.loc 1 781 5 view .LVU153
 781:rtos/uC-FS/Source/fs_partition.c ****         *p_err  = FS_ERR_DEV;
 484              		.loc 1 781 9 is_stmt 0 view .LVU154
 485 00ac 2388     		ldrh	r3, [r4]
 781:rtos/uC-FS/Source/fs_partition.c ****         *p_err  = FS_ERR_DEV;
 486              		.loc 1 781 8 view .LVU155
 487 00ae 33B1     		cbz	r3, .L16
 782:rtos/uC-FS/Source/fs_partition.c ****     }
 488              		.loc 1 782 9 is_stmt 1 view .LVU156
 782:rtos/uC-FS/Source/fs_partition.c ****     }
 489              		.loc 1 782 17 is_stmt 0 view .LVU157
 490 00b0 4FF49673 		mov	r3, #300
 491 00b4 2380     		strh	r3, [r4]	@ movhi
 492 00b6 02E0     		b	.L16
 493              	.LVL45:
 494              	.L22:
 730:rtos/uC-FS/Source/fs_partition.c ****         return;
 495              		.loc 1 730 8 is_stmt 1 view .LVU158
 730:rtos/uC-FS/Source/fs_partition.c ****         return;
 496              		.loc 1 730 15 is_stmt 0 view .LVU159
 497 00b8 4FF47B73 		mov	r3, #1004
 498 00bc 1380     		strh	r3, [r2]	@ movhi
 731:rtos/uC-FS/Source/fs_partition.c ****     }
 499              		.loc 1 731 9 is_stmt 1 view .LVU160
ARM GAS  /tmp/ccz88FW6.s 			page 28


 500              	.LVL46:
 501              	.L16:
 784:rtos/uC-FS/Source/fs_partition.c **** #endif
 502              		.loc 1 784 1 is_stmt 0 view .LVU161
 503 00be 03B0     		add	sp, sp, #12
 504              	.LCFI8:
 505              		.cfi_remember_state
 506              		.cfi_def_cfa_offset 28
 507              		@ sp needed
 508 00c0 BDE8F083 		pop	{r4, r5, r6, r7, r8, r9, pc}
 509              	.LVL47:
 510              	.L23:
 511              	.LCFI9:
 512              		.cfi_restore_state
 738:rtos/uC-FS/Source/fs_partition.c ****         return;
 513              		.loc 1 738 8 is_stmt 1 view .LVU162
 738:rtos/uC-FS/Source/fs_partition.c ****         return;
 514              		.loc 1 738 15 is_stmt 0 view .LVU163
 515 00c4 6423     		movs	r3, #100
 516 00c6 2380     		strh	r3, [r4]	@ movhi
 739:rtos/uC-FS/Source/fs_partition.c ****     }
 517              		.loc 1 739 9 is_stmt 1 view .LVU164
 518 00c8 F9E7     		b	.L16
 519              	.LVL48:
 520              	.L24:
 755:rtos/uC-FS/Source/fs_partition.c ****          FSBuf_Free(p_buf);
 521              		.loc 1 755 9 view .LVU165
 755:rtos/uC-FS/Source/fs_partition.c ****          FSBuf_Free(p_buf);
 522              		.loc 1 755 17 is_stmt 0 view .LVU166
 523 00ca 4FF49673 		mov	r3, #300
 524 00ce 2380     		strh	r3, [r4]	@ movhi
 756:rtos/uC-FS/Source/fs_partition.c ****          return;
 525              		.loc 1 756 10 is_stmt 1 view .LVU167
 526 00d0 4846     		mov	r0, r9
 527 00d2 FFF7FEFF 		bl	FSBuf_Free
 528              	.LVL49:
 757:rtos/uC-FS/Source/fs_partition.c ****     }
 529              		.loc 1 757 10 view .LVU168
 530 00d6 F2E7     		b	.L16
 531              		.cfi_endproc
 532              	.LFE1:
 534              		.text
 535              	.Letext0:
 536              		.file 2 "rtos/uC-CPU/ARM-Cortex-M/ARMv7-M/GNU/cpu.h"
 537              		.file 3 "rtos/uC-LIB/lib_mem.h"
 538              		.file 4 "rtos/uC-FS/Source/fs_type.h"
 539              		.file 5 "rtos/uC-FS/Source/fs_buf.h"
 540              		.file 6 "rtos/uC-FS/Source/fs_dev.h"
 541              		.file 7 "rtos/uC-FS/Source/fs_partition.h"
 542              		.file 8 "rtos/uC-FS/Source/fs_err.h"
 543              		.file 9 "rtos/uC-FS/Source/fs_ctr.h"
ARM GAS  /tmp/ccz88FW6.s 			page 29


DEFINED SYMBOLS
                            *ABS*:0000000000000000 fs_partition.c
     /tmp/ccz88FW6.s:18     .text.FSPartition_CalcCHS:0000000000000000 $t
     /tmp/ccz88FW6.s:25     .text.FSPartition_CalcCHS:0000000000000000 FSPartition_CalcCHS
     /tmp/ccz88FW6.s:117    .text.FSPartition_CalcCHS:0000000000000054 $d
     /tmp/ccz88FW6.s:123    .text.FSPartition_FindSimple:0000000000000000 $t
     /tmp/ccz88FW6.s:130    .text.FSPartition_FindSimple:0000000000000000 FSPartition_FindSimple
     /tmp/ccz88FW6.s:343    .text.FSPartition_Init:0000000000000000 $t
     /tmp/ccz88FW6.s:350    .text.FSPartition_Init:0000000000000000 FSPartition_Init
                           .group:0000000000000000 wm4.0.0f5aa60db9403f389c005f20ecce4286
                           .group:0000000000000000 wm4.cpu_def.h.46.baa122a2898bdc40bb50d1f21ead1515
                           .group:0000000000000000 wm4.cpu_cfg.h.45.38a6a562da8b04490c382a226238c57e
                           .group:0000000000000000 wm4.cpu.h.171.3cb15ee3ccb812cbfdf76d1fbfb9eda0
                           .group:0000000000000000 wm4.cpu_core.h.51.7b35a59c319673f88ae4a256248776ec
                           .group:0000000000000000 wm4.lib_def.h.66.6ab2a012067a8e1f4289db5765835062
                           .group:0000000000000000 wm4.cpu_core.h.143.d3b700e12b3a14ed3bee14c822b49a7d
                           .group:0000000000000000 wm4.lib_cfg.h.40.b2958733f73e73af70f675ca0f89303e
                           .group:0000000000000000 wm4.lib_mem.h.121.89b942a057fb20091baad8bf6b28b1e6
                           .group:0000000000000000 wm4.fs.h.42.4f6311a594ee5619f1ee7a9392eb7faa
                           .group:0000000000000000 wm4.lib_ascii.h.84.da234f9d4d202bba866fb26067887eec
                           .group:0000000000000000 wm4.fs_def.h.42.653ad677c23ef93c522ec84af681385d
                           .group:0000000000000000 wm4.fs_cfg.h.116.da4f8e9d0b9040a97ef3bf26c61e90fd
                           .group:0000000000000000 wm4.clk.h.99.39403db6a27321e53b261bbe20b56e1d
                           .group:0000000000000000 wm4.lib_str.h.60.d6fb3a1336db17c586ed26be94929677
                           .group:0000000000000000 wm4.clk_cfg.h.45.428f260ed0fbcfa16fc822c67c85dade
                           .group:0000000000000000 wm4.clk.h.219.c24c7347fcc7691d3157fe73514cb366
                           .group:0000000000000000 wm4.fs_cfg_fs.h.176.c85074fbe881bfa594608376a65f4dc2
                           .group:0000000000000000 wm4.fs_type.h.42.3e681b291920189044ba1da24ae0f22a
                           .group:0000000000000000 wm4.fs_err.h.42.d52bfed31dff3d1419c5cf09952dee67
                           .group:0000000000000000 wm4.fs.h.97.1d629f0ba32b5622ab4e01a254bd98e8
                           .group:0000000000000000 wm4.fs_dev.h.42.457d0b7de373584765db5fbe40e7c30d
                           .group:0000000000000000 wm4.fs_ctr.h.42.9d1398cac157503ac8af114819f7782b
                           .group:0000000000000000 wm4.fs_dev.h.84.0b8682dc82cfd464ab0da30a876c8006
                           .group:0000000000000000 wm4.fs_partition.h.65.0b69985b4b7431e00a273aabc35be32a
                           .group:0000000000000000 wm4.fs_buf.h.42.0c8ba10968f085926266a27b71b3972d

UNDEFINED SYMBOLS
FSBuf_Get
FSDev_RdLocked
FSBuf_Free
Mem_Clr
FSDev_WrLocked
